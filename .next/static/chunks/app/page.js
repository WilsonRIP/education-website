/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["app/page"],{

/***/ "(app-pages-browser)/./node_modules/@simplewebauthn/browser/dist/bundle/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@simplewebauthn/browser/dist/bundle/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebAuthnAbortService: () => (/* binding */ WebAuthnAbortService),\n/* harmony export */   WebAuthnError: () => (/* binding */ WebAuthnError),\n/* harmony export */   base64URLStringToBuffer: () => (/* binding */ base64URLStringToBuffer),\n/* harmony export */   browserSupportsWebAuthn: () => (/* binding */ browserSupportsWebAuthn),\n/* harmony export */   browserSupportsWebAuthnAutofill: () => (/* binding */ browserSupportsWebAuthnAutofill),\n/* harmony export */   bufferToBase64URLString: () => (/* binding */ bufferToBase64URLString),\n/* harmony export */   platformAuthenticatorIsAvailable: () => (/* binding */ platformAuthenticatorIsAvailable),\n/* harmony export */   startAuthentication: () => (/* binding */ startAuthentication),\n/* harmony export */   startRegistration: () => (/* binding */ startRegistration)\n/* harmony export */ });\n/* [@simplewebauthn/browser@11.0.0] */\nfunction bufferToBase64URLString(buffer) {\n    const bytes = new Uint8Array(buffer);\n    let str = '';\n    for (const charCode of bytes) {\n        str += String.fromCharCode(charCode);\n    }\n    const base64String = btoa(str);\n    return base64String.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n}\n\nfunction base64URLStringToBuffer(base64URLString) {\n    const base64 = base64URLString.replace(/-/g, '+').replace(/_/g, '/');\n    const padLength = (4 - (base64.length % 4)) % 4;\n    const padded = base64.padEnd(base64.length + padLength, '=');\n    const binary = atob(padded);\n    const buffer = new ArrayBuffer(binary.length);\n    const bytes = new Uint8Array(buffer);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return buffer;\n}\n\nfunction browserSupportsWebAuthn() {\n    return (window?.PublicKeyCredential !== undefined &&\n        typeof window.PublicKeyCredential === 'function');\n}\n\nfunction toPublicKeyCredentialDescriptor(descriptor) {\n    const { id } = descriptor;\n    return {\n        ...descriptor,\n        id: base64URLStringToBuffer(id),\n        transports: descriptor.transports,\n    };\n}\n\nfunction isValidDomain(hostname) {\n    return (hostname === 'localhost' ||\n        /^([a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}$/i.test(hostname));\n}\n\nclass WebAuthnError extends Error {\n    constructor({ message, code, cause, name, }) {\n        super(message, { cause });\n        this.name = name ?? cause.name;\n        this.code = code;\n    }\n}\n\nfunction identifyRegistrationError({ error, options, }) {\n    const { publicKey } = options;\n    if (!publicKey) {\n        throw Error('options was missing required publicKey property');\n    }\n    if (error.name === 'AbortError') {\n        if (options.signal instanceof AbortSignal) {\n            return new WebAuthnError({\n                message: 'Registration ceremony was sent an abort signal',\n                code: 'ERROR_CEREMONY_ABORTED',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'ConstraintError') {\n        if (publicKey.authenticatorSelection?.requireResidentKey === true) {\n            return new WebAuthnError({\n                message: 'Discoverable credentials were required but no available authenticator supported it',\n                code: 'ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT',\n                cause: error,\n            });\n        }\n        else if (options.mediation === 'conditional' &&\n            publicKey.authenticatorSelection?.userVerification === 'required') {\n            return new WebAuthnError({\n                message: 'User verification was required during automatic registration but it could not be performed',\n                code: 'ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE',\n                cause: error,\n            });\n        }\n        else if (publicKey.authenticatorSelection?.userVerification === 'required') {\n            return new WebAuthnError({\n                message: 'User verification was required but no available authenticator supported it',\n                code: 'ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'InvalidStateError') {\n        return new WebAuthnError({\n            message: 'The authenticator was previously registered',\n            code: 'ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED',\n            cause: error,\n        });\n    }\n    else if (error.name === 'NotAllowedError') {\n        return new WebAuthnError({\n            message: error.message,\n            code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n            cause: error,\n        });\n    }\n    else if (error.name === 'NotSupportedError') {\n        const validPubKeyCredParams = publicKey.pubKeyCredParams.filter((param) => param.type === 'public-key');\n        if (validPubKeyCredParams.length === 0) {\n            return new WebAuthnError({\n                message: 'No entry in pubKeyCredParams was of type \"public-key\"',\n                code: 'ERROR_MALFORMED_PUBKEYCREDPARAMS',\n                cause: error,\n            });\n        }\n        return new WebAuthnError({\n            message: 'No available authenticator supported any of the specified pubKeyCredParams algorithms',\n            code: 'ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG',\n            cause: error,\n        });\n    }\n    else if (error.name === 'SecurityError') {\n        const effectiveDomain = window.location.hostname;\n        if (!isValidDomain(effectiveDomain)) {\n            return new WebAuthnError({\n                message: `${window.location.hostname} is an invalid domain`,\n                code: 'ERROR_INVALID_DOMAIN',\n                cause: error,\n            });\n        }\n        else if (publicKey.rp.id !== effectiveDomain) {\n            return new WebAuthnError({\n                message: `The RP ID \"${publicKey.rp.id}\" is invalid for this domain`,\n                code: 'ERROR_INVALID_RP_ID',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'TypeError') {\n        if (publicKey.user.id.byteLength < 1 || publicKey.user.id.byteLength > 64) {\n            return new WebAuthnError({\n                message: 'User ID was not between 1 and 64 characters',\n                code: 'ERROR_INVALID_USER_ID_LENGTH',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'UnknownError') {\n        return new WebAuthnError({\n            message: 'The authenticator was unable to process the specified options, or could not create a new credential',\n            code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n            cause: error,\n        });\n    }\n    return error;\n}\n\nclass BaseWebAuthnAbortService {\n    createNewAbortSignal() {\n        if (this.controller) {\n            const abortError = new Error('Cancelling existing WebAuthn API call for new one');\n            abortError.name = 'AbortError';\n            this.controller.abort(abortError);\n        }\n        const newController = new AbortController();\n        this.controller = newController;\n        return newController.signal;\n    }\n    cancelCeremony() {\n        if (this.controller) {\n            const abortError = new Error('Manually cancelling existing WebAuthn API call');\n            abortError.name = 'AbortError';\n            this.controller.abort(abortError);\n            this.controller = undefined;\n        }\n    }\n}\nconst WebAuthnAbortService = new BaseWebAuthnAbortService();\n\nconst attachments = ['cross-platform', 'platform'];\nfunction toAuthenticatorAttachment(attachment) {\n    if (!attachment) {\n        return;\n    }\n    if (attachments.indexOf(attachment) < 0) {\n        return;\n    }\n    return attachment;\n}\n\nasync function startRegistration(options) {\n    const { optionsJSON, useAutoRegister = false } = options;\n    if (!browserSupportsWebAuthn()) {\n        throw new Error('WebAuthn is not supported in this browser');\n    }\n    const publicKey = {\n        ...optionsJSON,\n        challenge: base64URLStringToBuffer(optionsJSON.challenge),\n        user: {\n            ...optionsJSON.user,\n            id: base64URLStringToBuffer(optionsJSON.user.id),\n        },\n        excludeCredentials: optionsJSON.excludeCredentials?.map(toPublicKeyCredentialDescriptor),\n    };\n    const createOptions = {};\n    if (useAutoRegister) {\n        createOptions.mediation = 'conditional';\n    }\n    createOptions.publicKey = publicKey;\n    createOptions.signal = WebAuthnAbortService.createNewAbortSignal();\n    let credential;\n    try {\n        credential = (await navigator.credentials.create(createOptions));\n    }\n    catch (err) {\n        throw identifyRegistrationError({ error: err, options: createOptions });\n    }\n    if (!credential) {\n        throw new Error('Registration was not completed');\n    }\n    const { id, rawId, response, type } = credential;\n    let transports = undefined;\n    if (typeof response.getTransports === 'function') {\n        transports = response.getTransports();\n    }\n    let responsePublicKeyAlgorithm = undefined;\n    if (typeof response.getPublicKeyAlgorithm === 'function') {\n        try {\n            responsePublicKeyAlgorithm = response.getPublicKeyAlgorithm();\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getPublicKeyAlgorithm()', error);\n        }\n    }\n    let responsePublicKey = undefined;\n    if (typeof response.getPublicKey === 'function') {\n        try {\n            const _publicKey = response.getPublicKey();\n            if (_publicKey !== null) {\n                responsePublicKey = bufferToBase64URLString(_publicKey);\n            }\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getPublicKey()', error);\n        }\n    }\n    let responseAuthenticatorData;\n    if (typeof response.getAuthenticatorData === 'function') {\n        try {\n            responseAuthenticatorData = bufferToBase64URLString(response.getAuthenticatorData());\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getAuthenticatorData()', error);\n        }\n    }\n    return {\n        id,\n        rawId: bufferToBase64URLString(rawId),\n        response: {\n            attestationObject: bufferToBase64URLString(response.attestationObject),\n            clientDataJSON: bufferToBase64URLString(response.clientDataJSON),\n            transports,\n            publicKeyAlgorithm: responsePublicKeyAlgorithm,\n            publicKey: responsePublicKey,\n            authenticatorData: responseAuthenticatorData,\n        },\n        type,\n        clientExtensionResults: credential.getClientExtensionResults(),\n        authenticatorAttachment: toAuthenticatorAttachment(credential.authenticatorAttachment),\n    };\n}\nfunction warnOnBrokenImplementation(methodName, cause) {\n    console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${methodName}. You should report this error to them.\\n`, cause);\n}\n\nfunction browserSupportsWebAuthnAutofill() {\n    if (!browserSupportsWebAuthn()) {\n        return new Promise((resolve) => resolve(false));\n    }\n    const globalPublicKeyCredential = window\n        .PublicKeyCredential;\n    if (globalPublicKeyCredential.isConditionalMediationAvailable === undefined) {\n        return new Promise((resolve) => resolve(false));\n    }\n    return globalPublicKeyCredential.isConditionalMediationAvailable();\n}\n\nfunction identifyAuthenticationError({ error, options, }) {\n    const { publicKey } = options;\n    if (!publicKey) {\n        throw Error('options was missing required publicKey property');\n    }\n    if (error.name === 'AbortError') {\n        if (options.signal instanceof AbortSignal) {\n            return new WebAuthnError({\n                message: 'Authentication ceremony was sent an abort signal',\n                code: 'ERROR_CEREMONY_ABORTED',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'NotAllowedError') {\n        return new WebAuthnError({\n            message: error.message,\n            code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n            cause: error,\n        });\n    }\n    else if (error.name === 'SecurityError') {\n        const effectiveDomain = window.location.hostname;\n        if (!isValidDomain(effectiveDomain)) {\n            return new WebAuthnError({\n                message: `${window.location.hostname} is an invalid domain`,\n                code: 'ERROR_INVALID_DOMAIN',\n                cause: error,\n            });\n        }\n        else if (publicKey.rpId !== effectiveDomain) {\n            return new WebAuthnError({\n                message: `The RP ID \"${publicKey.rpId}\" is invalid for this domain`,\n                code: 'ERROR_INVALID_RP_ID',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'UnknownError') {\n        return new WebAuthnError({\n            message: 'The authenticator was unable to process the specified options, or could not create a new assertion signature',\n            code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n            cause: error,\n        });\n    }\n    return error;\n}\n\nasync function startAuthentication(options) {\n    const { optionsJSON, useBrowserAutofill = false, verifyBrowserAutofillInput = true, } = options;\n    if (!browserSupportsWebAuthn()) {\n        throw new Error('WebAuthn is not supported in this browser');\n    }\n    let allowCredentials;\n    if (optionsJSON.allowCredentials?.length !== 0) {\n        allowCredentials = optionsJSON.allowCredentials?.map(toPublicKeyCredentialDescriptor);\n    }\n    const publicKey = {\n        ...optionsJSON,\n        challenge: base64URLStringToBuffer(optionsJSON.challenge),\n        allowCredentials,\n    };\n    const getOptions = {};\n    if (useBrowserAutofill) {\n        if (!(await browserSupportsWebAuthnAutofill())) {\n            throw Error('Browser does not support WebAuthn autofill');\n        }\n        const eligibleInputs = document.querySelectorAll(\"input[autocomplete$='webauthn']\");\n        if (eligibleInputs.length < 1 && verifyBrowserAutofillInput) {\n            throw Error('No <input> with \"webauthn\" as the only or last value in its `autocomplete` attribute was detected');\n        }\n        getOptions.mediation = 'conditional';\n        publicKey.allowCredentials = [];\n    }\n    getOptions.publicKey = publicKey;\n    getOptions.signal = WebAuthnAbortService.createNewAbortSignal();\n    let credential;\n    try {\n        credential = (await navigator.credentials.get(getOptions));\n    }\n    catch (err) {\n        throw identifyAuthenticationError({ error: err, options: getOptions });\n    }\n    if (!credential) {\n        throw new Error('Authentication was not completed');\n    }\n    const { id, rawId, response, type } = credential;\n    let userHandle = undefined;\n    if (response.userHandle) {\n        userHandle = bufferToBase64URLString(response.userHandle);\n    }\n    return {\n        id,\n        rawId: bufferToBase64URLString(rawId),\n        response: {\n            authenticatorData: bufferToBase64URLString(response.authenticatorData),\n            clientDataJSON: bufferToBase64URLString(response.clientDataJSON),\n            signature: bufferToBase64URLString(response.signature),\n            userHandle,\n        },\n        type,\n        clientExtensionResults: credential.getClientExtensionResults(),\n        authenticatorAttachment: toAuthenticatorAttachment(credential.authenticatorAttachment),\n    };\n}\n\nfunction platformAuthenticatorIsAvailable() {\n    if (!browserSupportsWebAuthn()) {\n        return new Promise((resolve) => resolve(false));\n    }\n    return PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2ltcGxld2ViYXV0aG4vYnJvd3Nlci9kaXN0L2J1bmRsZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxZQUFZLEtBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQ0FBMkMsR0FBRztBQUM5Qzs7QUFFQTtBQUNBLGtCQUFrQiw2QkFBNkI7QUFDL0MseUJBQXlCLE9BQU87QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDLGlCQUFpQjtBQUN0RCxZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwQkFBMEI7QUFDdEQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsZ0JBQWdCO0FBQ3ZEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBWSx1Q0FBdUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLG9DQUFvQztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNEJBQTRCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEdBQTBHLFdBQVc7QUFDckg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1Q0FBdUMsaUJBQWlCO0FBQ3hELFlBQVksWUFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwQkFBMEI7QUFDdEQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsZUFBZTtBQUN0RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFlBQVksOEVBQThFO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGlDQUFpQztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNEJBQTRCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFcU8iLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc2ltcGxld2ViYXV0aG5cXGJyb3dzZXJcXGRpc3RcXGJ1bmRsZVxcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogW0BzaW1wbGV3ZWJhdXRobi9icm93c2VyQDExLjAuMF0gKi9cbmZ1bmN0aW9uIGJ1ZmZlclRvQmFzZTY0VVJMU3RyaW5nKGJ1ZmZlcikge1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICBsZXQgc3RyID0gJyc7XG4gICAgZm9yIChjb25zdCBjaGFyQ29kZSBvZiBieXRlcykge1xuICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XG4gICAgfVxuICAgIGNvbnN0IGJhc2U2NFN0cmluZyA9IGJ0b2Eoc3RyKTtcbiAgICByZXR1cm4gYmFzZTY0U3RyaW5nLnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpLnJlcGxhY2UoLz0vZywgJycpO1xufVxuXG5mdW5jdGlvbiBiYXNlNjRVUkxTdHJpbmdUb0J1ZmZlcihiYXNlNjRVUkxTdHJpbmcpIHtcbiAgICBjb25zdCBiYXNlNjQgPSBiYXNlNjRVUkxTdHJpbmcucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKTtcbiAgICBjb25zdCBwYWRMZW5ndGggPSAoNCAtIChiYXNlNjQubGVuZ3RoICUgNCkpICUgNDtcbiAgICBjb25zdCBwYWRkZWQgPSBiYXNlNjQucGFkRW5kKGJhc2U2NC5sZW5ndGggKyBwYWRMZW5ndGgsICc9Jyk7XG4gICAgY29uc3QgYmluYXJ5ID0gYXRvYihwYWRkZWQpO1xuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihiaW5hcnkubGVuZ3RoKTtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnkuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1ZmZlcjtcbn1cblxuZnVuY3Rpb24gYnJvd3NlclN1cHBvcnRzV2ViQXV0aG4oKSB7XG4gICAgcmV0dXJuICh3aW5kb3c/LlB1YmxpY0tleUNyZWRlbnRpYWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICB0eXBlb2Ygd2luZG93LlB1YmxpY0tleUNyZWRlbnRpYWwgPT09ICdmdW5jdGlvbicpO1xufVxuXG5mdW5jdGlvbiB0b1B1YmxpY0tleUNyZWRlbnRpYWxEZXNjcmlwdG9yKGRlc2NyaXB0b3IpIHtcbiAgICBjb25zdCB7IGlkIH0gPSBkZXNjcmlwdG9yO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmRlc2NyaXB0b3IsXG4gICAgICAgIGlkOiBiYXNlNjRVUkxTdHJpbmdUb0J1ZmZlcihpZCksXG4gICAgICAgIHRyYW5zcG9ydHM6IGRlc2NyaXB0b3IudHJhbnNwb3J0cyxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkRG9tYWluKGhvc3RuYW1lKSB7XG4gICAgcmV0dXJuIChob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgfHxcbiAgICAgICAgL14oW2EtejAtOV0rKC1bYS16MC05XSspKlxcLikrW2Etel17Mix9JC9pLnRlc3QoaG9zdG5hbWUpKTtcbn1cblxuY2xhc3MgV2ViQXV0aG5FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UsIGNvZGUsIGNhdXNlLCBuYW1lLCB9KSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHsgY2F1c2UgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWUgPz8gY2F1c2UubmFtZTtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlkZW50aWZ5UmVnaXN0cmF0aW9uRXJyb3IoeyBlcnJvciwgb3B0aW9ucywgfSkge1xuICAgIGNvbnN0IHsgcHVibGljS2V5IH0gPSBvcHRpb25zO1xuICAgIGlmICghcHVibGljS2V5KSB7XG4gICAgICAgIHRocm93IEVycm9yKCdvcHRpb25zIHdhcyBtaXNzaW5nIHJlcXVpcmVkIHB1YmxpY0tleSBwcm9wZXJ0eScpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgIGlmIChvcHRpb25zLnNpZ25hbCBpbnN0YW5jZW9mIEFib3J0U2lnbmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdlYkF1dGhuRXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdSZWdpc3RyYXRpb24gY2VyZW1vbnkgd2FzIHNlbnQgYW4gYWJvcnQgc2lnbmFsJyxcbiAgICAgICAgICAgICAgICBjb2RlOiAnRVJST1JfQ0VSRU1PTllfQUJPUlRFRCcsXG4gICAgICAgICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ0NvbnN0cmFpbnRFcnJvcicpIHtcbiAgICAgICAgaWYgKHB1YmxpY0tleS5hdXRoZW50aWNhdG9yU2VsZWN0aW9uPy5yZXF1aXJlUmVzaWRlbnRLZXkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgV2ViQXV0aG5FcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Rpc2NvdmVyYWJsZSBjcmVkZW50aWFscyB3ZXJlIHJlcXVpcmVkIGJ1dCBubyBhdmFpbGFibGUgYXV0aGVudGljYXRvciBzdXBwb3J0ZWQgaXQnLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdFUlJPUl9BVVRIRU5USUNBVE9SX01JU1NJTkdfRElTQ09WRVJBQkxFX0NSRURFTlRJQUxfU1VQUE9SVCcsXG4gICAgICAgICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5tZWRpYXRpb24gPT09ICdjb25kaXRpb25hbCcgJiZcbiAgICAgICAgICAgIHB1YmxpY0tleS5hdXRoZW50aWNhdG9yU2VsZWN0aW9uPy51c2VyVmVyaWZpY2F0aW9uID09PSAncmVxdWlyZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdlYkF1dGhuRXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIHZlcmlmaWNhdGlvbiB3YXMgcmVxdWlyZWQgZHVyaW5nIGF1dG9tYXRpYyByZWdpc3RyYXRpb24gYnV0IGl0IGNvdWxkIG5vdCBiZSBwZXJmb3JtZWQnLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdFUlJPUl9BVVRPX1JFR0lTVEVSX1VTRVJfVkVSSUZJQ0FUSU9OX0ZBSUxVUkUnLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHB1YmxpY0tleS5hdXRoZW50aWNhdG9yU2VsZWN0aW9uPy51c2VyVmVyaWZpY2F0aW9uID09PSAncmVxdWlyZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdlYkF1dGhuRXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIHZlcmlmaWNhdGlvbiB3YXMgcmVxdWlyZWQgYnV0IG5vIGF2YWlsYWJsZSBhdXRoZW50aWNhdG9yIHN1cHBvcnRlZCBpdCcsXG4gICAgICAgICAgICAgICAgY29kZTogJ0VSUk9SX0FVVEhFTlRJQ0FUT1JfTUlTU0lOR19VU0VSX1ZFUklGSUNBVElPTl9TVVBQT1JUJyxcbiAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnSW52YWxpZFN0YXRlRXJyb3InKSB7XG4gICAgICAgIHJldHVybiBuZXcgV2ViQXV0aG5FcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhlIGF1dGhlbnRpY2F0b3Igd2FzIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCcsXG4gICAgICAgICAgICBjb2RlOiAnRVJST1JfQVVUSEVOVElDQVRPUl9QUkVWSU9VU0xZX1JFR0lTVEVSRUQnLFxuICAgICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXZWJBdXRobkVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICBjb2RlOiAnRVJST1JfUEFTU1RIUk9VR0hfU0VFX0NBVVNFX1BST1BFUlRZJyxcbiAgICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdOb3RTdXBwb3J0ZWRFcnJvcicpIHtcbiAgICAgICAgY29uc3QgdmFsaWRQdWJLZXlDcmVkUGFyYW1zID0gcHVibGljS2V5LnB1YktleUNyZWRQYXJhbXMuZmlsdGVyKChwYXJhbSkgPT4gcGFyYW0udHlwZSA9PT0gJ3B1YmxpYy1rZXknKTtcbiAgICAgICAgaWYgKHZhbGlkUHViS2V5Q3JlZFBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgV2ViQXV0aG5FcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ05vIGVudHJ5IGluIHB1YktleUNyZWRQYXJhbXMgd2FzIG9mIHR5cGUgXCJwdWJsaWMta2V5XCInLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdFUlJPUl9NQUxGT1JNRURfUFVCS0VZQ1JFRFBBUkFNUycsXG4gICAgICAgICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBXZWJBdXRobkVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdObyBhdmFpbGFibGUgYXV0aGVudGljYXRvciBzdXBwb3J0ZWQgYW55IG9mIHRoZSBzcGVjaWZpZWQgcHViS2V5Q3JlZFBhcmFtcyBhbGdvcml0aG1zJyxcbiAgICAgICAgICAgIGNvZGU6ICdFUlJPUl9BVVRIRU5USUNBVE9SX05PX1NVUFBPUlRFRF9QVUJLRVlDUkVEUEFSQU1TX0FMRycsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnU2VjdXJpdHlFcnJvcicpIHtcbiAgICAgICAgY29uc3QgZWZmZWN0aXZlRG9tYWluID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lO1xuICAgICAgICBpZiAoIWlzVmFsaWREb21haW4oZWZmZWN0aXZlRG9tYWluKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBXZWJBdXRobkVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgJHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9IGlzIGFuIGludmFsaWQgZG9tYWluYCxcbiAgICAgICAgICAgICAgICBjb2RlOiAnRVJST1JfSU5WQUxJRF9ET01BSU4nLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHB1YmxpY0tleS5ycC5pZCAhPT0gZWZmZWN0aXZlRG9tYWluKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdlYkF1dGhuRXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBUaGUgUlAgSUQgXCIke3B1YmxpY0tleS5ycC5pZH1cIiBpcyBpbnZhbGlkIGZvciB0aGlzIGRvbWFpbmAsXG4gICAgICAgICAgICAgICAgY29kZTogJ0VSUk9SX0lOVkFMSURfUlBfSUQnLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdUeXBlRXJyb3InKSB7XG4gICAgICAgIGlmIChwdWJsaWNLZXkudXNlci5pZC5ieXRlTGVuZ3RoIDwgMSB8fCBwdWJsaWNLZXkudXNlci5pZC5ieXRlTGVuZ3RoID4gNjQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgV2ViQXV0aG5FcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1VzZXIgSUQgd2FzIG5vdCBiZXR3ZWVuIDEgYW5kIDY0IGNoYXJhY3RlcnMnLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdFUlJPUl9JTlZBTElEX1VTRVJfSURfTEVOR1RIJyxcbiAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnVW5rbm93bkVycm9yJykge1xuICAgICAgICByZXR1cm4gbmV3IFdlYkF1dGhuRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ1RoZSBhdXRoZW50aWNhdG9yIHdhcyB1bmFibGUgdG8gcHJvY2VzcyB0aGUgc3BlY2lmaWVkIG9wdGlvbnMsIG9yIGNvdWxkIG5vdCBjcmVhdGUgYSBuZXcgY3JlZGVudGlhbCcsXG4gICAgICAgICAgICBjb2RlOiAnRVJST1JfQVVUSEVOVElDQVRPUl9HRU5FUkFMX0VSUk9SJyxcbiAgICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBlcnJvcjtcbn1cblxuY2xhc3MgQmFzZVdlYkF1dGhuQWJvcnRTZXJ2aWNlIHtcbiAgICBjcmVhdGVOZXdBYm9ydFNpZ25hbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29uc3QgYWJvcnRFcnJvciA9IG5ldyBFcnJvcignQ2FuY2VsbGluZyBleGlzdGluZyBXZWJBdXRobiBBUEkgY2FsbCBmb3IgbmV3IG9uZScpO1xuICAgICAgICAgICAgYWJvcnRFcnJvci5uYW1lID0gJ0Fib3J0RXJyb3InO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmFib3J0KGFib3J0RXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld0NvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ld0NvbnRyb2xsZXI7XG4gICAgICAgIHJldHVybiBuZXdDb250cm9sbGVyLnNpZ25hbDtcbiAgICB9XG4gICAgY2FuY2VsQ2VyZW1vbnkoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoJ01hbnVhbGx5IGNhbmNlbGxpbmcgZXhpc3RpbmcgV2ViQXV0aG4gQVBJIGNhbGwnKTtcbiAgICAgICAgICAgIGFib3J0RXJyb3IubmFtZSA9ICdBYm9ydEVycm9yJztcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5hYm9ydChhYm9ydEVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IFdlYkF1dGhuQWJvcnRTZXJ2aWNlID0gbmV3IEJhc2VXZWJBdXRobkFib3J0U2VydmljZSgpO1xuXG5jb25zdCBhdHRhY2htZW50cyA9IFsnY3Jvc3MtcGxhdGZvcm0nLCAncGxhdGZvcm0nXTtcbmZ1bmN0aW9uIHRvQXV0aGVudGljYXRvckF0dGFjaG1lbnQoYXR0YWNobWVudCkge1xuICAgIGlmICghYXR0YWNobWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChhdHRhY2htZW50cy5pbmRleE9mKGF0dGFjaG1lbnQpIDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBhdHRhY2htZW50O1xufVxuXG5hc3luYyBmdW5jdGlvbiBzdGFydFJlZ2lzdHJhdGlvbihvcHRpb25zKSB7XG4gICAgY29uc3QgeyBvcHRpb25zSlNPTiwgdXNlQXV0b1JlZ2lzdGVyID0gZmFsc2UgfSA9IG9wdGlvbnM7XG4gICAgaWYgKCFicm93c2VyU3VwcG9ydHNXZWJBdXRobigpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViQXV0aG4gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXInKTtcbiAgICB9XG4gICAgY29uc3QgcHVibGljS2V5ID0ge1xuICAgICAgICAuLi5vcHRpb25zSlNPTixcbiAgICAgICAgY2hhbGxlbmdlOiBiYXNlNjRVUkxTdHJpbmdUb0J1ZmZlcihvcHRpb25zSlNPTi5jaGFsbGVuZ2UpLFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAuLi5vcHRpb25zSlNPTi51c2VyLFxuICAgICAgICAgICAgaWQ6IGJhc2U2NFVSTFN0cmluZ1RvQnVmZmVyKG9wdGlvbnNKU09OLnVzZXIuaWQpLFxuICAgICAgICB9LFxuICAgICAgICBleGNsdWRlQ3JlZGVudGlhbHM6IG9wdGlvbnNKU09OLmV4Y2x1ZGVDcmVkZW50aWFscz8ubWFwKHRvUHVibGljS2V5Q3JlZGVudGlhbERlc2NyaXB0b3IpLFxuICAgIH07XG4gICAgY29uc3QgY3JlYXRlT3B0aW9ucyA9IHt9O1xuICAgIGlmICh1c2VBdXRvUmVnaXN0ZXIpIHtcbiAgICAgICAgY3JlYXRlT3B0aW9ucy5tZWRpYXRpb24gPSAnY29uZGl0aW9uYWwnO1xuICAgIH1cbiAgICBjcmVhdGVPcHRpb25zLnB1YmxpY0tleSA9IHB1YmxpY0tleTtcbiAgICBjcmVhdGVPcHRpb25zLnNpZ25hbCA9IFdlYkF1dGhuQWJvcnRTZXJ2aWNlLmNyZWF0ZU5ld0Fib3J0U2lnbmFsKCk7XG4gICAgbGV0IGNyZWRlbnRpYWw7XG4gICAgdHJ5IHtcbiAgICAgICAgY3JlZGVudGlhbCA9IChhd2FpdCBuYXZpZ2F0b3IuY3JlZGVudGlhbHMuY3JlYXRlKGNyZWF0ZU9wdGlvbnMpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBpZGVudGlmeVJlZ2lzdHJhdGlvbkVycm9yKHsgZXJyb3I6IGVyciwgb3B0aW9uczogY3JlYXRlT3B0aW9ucyB9KTtcbiAgICB9XG4gICAgaWYgKCFjcmVkZW50aWFsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUmVnaXN0cmF0aW9uIHdhcyBub3QgY29tcGxldGVkJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgaWQsIHJhd0lkLCByZXNwb25zZSwgdHlwZSB9ID0gY3JlZGVudGlhbDtcbiAgICBsZXQgdHJhbnNwb3J0cyA9IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIHJlc3BvbnNlLmdldFRyYW5zcG9ydHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdHJhbnNwb3J0cyA9IHJlc3BvbnNlLmdldFRyYW5zcG9ydHMoKTtcbiAgICB9XG4gICAgbGV0IHJlc3BvbnNlUHVibGljS2V5QWxnb3JpdGhtID0gdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgcmVzcG9uc2UuZ2V0UHVibGljS2V5QWxnb3JpdGhtID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNwb25zZVB1YmxpY0tleUFsZ29yaXRobSA9IHJlc3BvbnNlLmdldFB1YmxpY0tleUFsZ29yaXRobSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgd2Fybk9uQnJva2VuSW1wbGVtZW50YXRpb24oJ2dldFB1YmxpY0tleUFsZ29yaXRobSgpJywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCByZXNwb25zZVB1YmxpY0tleSA9IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIHJlc3BvbnNlLmdldFB1YmxpY0tleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgX3B1YmxpY0tleSA9IHJlc3BvbnNlLmdldFB1YmxpY0tleSgpO1xuICAgICAgICAgICAgaWYgKF9wdWJsaWNLZXkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVB1YmxpY0tleSA9IGJ1ZmZlclRvQmFzZTY0VVJMU3RyaW5nKF9wdWJsaWNLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgd2Fybk9uQnJva2VuSW1wbGVtZW50YXRpb24oJ2dldFB1YmxpY0tleSgpJywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCByZXNwb25zZUF1dGhlbnRpY2F0b3JEYXRhO1xuICAgIGlmICh0eXBlb2YgcmVzcG9uc2UuZ2V0QXV0aGVudGljYXRvckRhdGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3BvbnNlQXV0aGVudGljYXRvckRhdGEgPSBidWZmZXJUb0Jhc2U2NFVSTFN0cmluZyhyZXNwb25zZS5nZXRBdXRoZW50aWNhdG9yRGF0YSgpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHdhcm5PbkJyb2tlbkltcGxlbWVudGF0aW9uKCdnZXRBdXRoZW50aWNhdG9yRGF0YSgpJywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGlkLFxuICAgICAgICByYXdJZDogYnVmZmVyVG9CYXNlNjRVUkxTdHJpbmcocmF3SWQpLFxuICAgICAgICByZXNwb25zZToge1xuICAgICAgICAgICAgYXR0ZXN0YXRpb25PYmplY3Q6IGJ1ZmZlclRvQmFzZTY0VVJMU3RyaW5nKHJlc3BvbnNlLmF0dGVzdGF0aW9uT2JqZWN0KSxcbiAgICAgICAgICAgIGNsaWVudERhdGFKU09OOiBidWZmZXJUb0Jhc2U2NFVSTFN0cmluZyhyZXNwb25zZS5jbGllbnREYXRhSlNPTiksXG4gICAgICAgICAgICB0cmFuc3BvcnRzLFxuICAgICAgICAgICAgcHVibGljS2V5QWxnb3JpdGhtOiByZXNwb25zZVB1YmxpY0tleUFsZ29yaXRobSxcbiAgICAgICAgICAgIHB1YmxpY0tleTogcmVzcG9uc2VQdWJsaWNLZXksXG4gICAgICAgICAgICBhdXRoZW50aWNhdG9yRGF0YTogcmVzcG9uc2VBdXRoZW50aWNhdG9yRGF0YSxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgY2xpZW50RXh0ZW5zaW9uUmVzdWx0czogY3JlZGVudGlhbC5nZXRDbGllbnRFeHRlbnNpb25SZXN1bHRzKCksXG4gICAgICAgIGF1dGhlbnRpY2F0b3JBdHRhY2htZW50OiB0b0F1dGhlbnRpY2F0b3JBdHRhY2htZW50KGNyZWRlbnRpYWwuYXV0aGVudGljYXRvckF0dGFjaG1lbnQpLFxuICAgIH07XG59XG5mdW5jdGlvbiB3YXJuT25Ccm9rZW5JbXBsZW1lbnRhdGlvbihtZXRob2ROYW1lLCBjYXVzZSkge1xuICAgIGNvbnNvbGUud2FybihgVGhlIGJyb3dzZXIgZXh0ZW5zaW9uIHRoYXQgaW50ZXJjZXB0ZWQgdGhpcyBXZWJBdXRobiBBUEkgY2FsbCBpbmNvcnJlY3RseSBpbXBsZW1lbnRlZCAke21ldGhvZE5hbWV9LiBZb3Ugc2hvdWxkIHJlcG9ydCB0aGlzIGVycm9yIHRvIHRoZW0uXFxuYCwgY2F1c2UpO1xufVxuXG5mdW5jdGlvbiBicm93c2VyU3VwcG9ydHNXZWJBdXRobkF1dG9maWxsKCkge1xuICAgIGlmICghYnJvd3NlclN1cHBvcnRzV2ViQXV0aG4oKSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlc29sdmUoZmFsc2UpKTtcbiAgICB9XG4gICAgY29uc3QgZ2xvYmFsUHVibGljS2V5Q3JlZGVudGlhbCA9IHdpbmRvd1xuICAgICAgICAuUHVibGljS2V5Q3JlZGVudGlhbDtcbiAgICBpZiAoZ2xvYmFsUHVibGljS2V5Q3JlZGVudGlhbC5pc0NvbmRpdGlvbmFsTWVkaWF0aW9uQXZhaWxhYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlKGZhbHNlKSk7XG4gICAgfVxuICAgIHJldHVybiBnbG9iYWxQdWJsaWNLZXlDcmVkZW50aWFsLmlzQ29uZGl0aW9uYWxNZWRpYXRpb25BdmFpbGFibGUoKTtcbn1cblxuZnVuY3Rpb24gaWRlbnRpZnlBdXRoZW50aWNhdGlvbkVycm9yKHsgZXJyb3IsIG9wdGlvbnMsIH0pIHtcbiAgICBjb25zdCB7IHB1YmxpY0tleSB9ID0gb3B0aW9ucztcbiAgICBpZiAoIXB1YmxpY0tleSkge1xuICAgICAgICB0aHJvdyBFcnJvcignb3B0aW9ucyB3YXMgbWlzc2luZyByZXF1aXJlZCBwdWJsaWNLZXkgcHJvcGVydHknKTtcbiAgICB9XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICBpZiAob3B0aW9ucy5zaWduYWwgaW5zdGFuY2VvZiBBYm9ydFNpZ25hbCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBXZWJBdXRobkVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gY2VyZW1vbnkgd2FzIHNlbnQgYW4gYWJvcnQgc2lnbmFsJyxcbiAgICAgICAgICAgICAgICBjb2RlOiAnRVJST1JfQ0VSRU1PTllfQUJPUlRFRCcsXG4gICAgICAgICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXZWJBdXRobkVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICBjb2RlOiAnRVJST1JfUEFTU1RIUk9VR0hfU0VFX0NBVVNFX1BST1BFUlRZJyxcbiAgICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdTZWN1cml0eUVycm9yJykge1xuICAgICAgICBjb25zdCBlZmZlY3RpdmVEb21haW4gPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XG4gICAgICAgIGlmICghaXNWYWxpZERvbWFpbihlZmZlY3RpdmVEb21haW4pKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdlYkF1dGhuRXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGAke3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZX0gaXMgYW4gaW52YWxpZCBkb21haW5gLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdFUlJPUl9JTlZBTElEX0RPTUFJTicsXG4gICAgICAgICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHVibGljS2V5LnJwSWQgIT09IGVmZmVjdGl2ZURvbWFpbikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBXZWJBdXRobkVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVGhlIFJQIElEIFwiJHtwdWJsaWNLZXkucnBJZH1cIiBpcyBpbnZhbGlkIGZvciB0aGlzIGRvbWFpbmAsXG4gICAgICAgICAgICAgICAgY29kZTogJ0VSUk9SX0lOVkFMSURfUlBfSUQnLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdVbmtub3duRXJyb3InKSB7XG4gICAgICAgIHJldHVybiBuZXcgV2ViQXV0aG5FcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhlIGF1dGhlbnRpY2F0b3Igd2FzIHVuYWJsZSB0byBwcm9jZXNzIHRoZSBzcGVjaWZpZWQgb3B0aW9ucywgb3IgY291bGQgbm90IGNyZWF0ZSBhIG5ldyBhc3NlcnRpb24gc2lnbmF0dXJlJyxcbiAgICAgICAgICAgIGNvZGU6ICdFUlJPUl9BVVRIRU5USUNBVE9SX0dFTkVSQUxfRVJST1InLFxuICAgICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzdGFydEF1dGhlbnRpY2F0aW9uKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IG9wdGlvbnNKU09OLCB1c2VCcm93c2VyQXV0b2ZpbGwgPSBmYWxzZSwgdmVyaWZ5QnJvd3NlckF1dG9maWxsSW5wdXQgPSB0cnVlLCB9ID0gb3B0aW9ucztcbiAgICBpZiAoIWJyb3dzZXJTdXBwb3J0c1dlYkF1dGhuKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJBdXRobiBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpO1xuICAgIH1cbiAgICBsZXQgYWxsb3dDcmVkZW50aWFscztcbiAgICBpZiAob3B0aW9uc0pTT04uYWxsb3dDcmVkZW50aWFscz8ubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGFsbG93Q3JlZGVudGlhbHMgPSBvcHRpb25zSlNPTi5hbGxvd0NyZWRlbnRpYWxzPy5tYXAodG9QdWJsaWNLZXlDcmVkZW50aWFsRGVzY3JpcHRvcik7XG4gICAgfVxuICAgIGNvbnN0IHB1YmxpY0tleSA9IHtcbiAgICAgICAgLi4ub3B0aW9uc0pTT04sXG4gICAgICAgIGNoYWxsZW5nZTogYmFzZTY0VVJMU3RyaW5nVG9CdWZmZXIob3B0aW9uc0pTT04uY2hhbGxlbmdlKSxcbiAgICAgICAgYWxsb3dDcmVkZW50aWFscyxcbiAgICB9O1xuICAgIGNvbnN0IGdldE9wdGlvbnMgPSB7fTtcbiAgICBpZiAodXNlQnJvd3NlckF1dG9maWxsKSB7XG4gICAgICAgIGlmICghKGF3YWl0IGJyb3dzZXJTdXBwb3J0c1dlYkF1dGhuQXV0b2ZpbGwoKSkpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgV2ViQXV0aG4gYXV0b2ZpbGwnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGlnaWJsZUlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFthdXRvY29tcGxldGUkPSd3ZWJhdXRobiddXCIpO1xuICAgICAgICBpZiAoZWxpZ2libGVJbnB1dHMubGVuZ3RoIDwgMSAmJiB2ZXJpZnlCcm93c2VyQXV0b2ZpbGxJbnB1dCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ05vIDxpbnB1dD4gd2l0aCBcIndlYmF1dGhuXCIgYXMgdGhlIG9ubHkgb3IgbGFzdCB2YWx1ZSBpbiBpdHMgYGF1dG9jb21wbGV0ZWAgYXR0cmlidXRlIHdhcyBkZXRlY3RlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGdldE9wdGlvbnMubWVkaWF0aW9uID0gJ2NvbmRpdGlvbmFsJztcbiAgICAgICAgcHVibGljS2V5LmFsbG93Q3JlZGVudGlhbHMgPSBbXTtcbiAgICB9XG4gICAgZ2V0T3B0aW9ucy5wdWJsaWNLZXkgPSBwdWJsaWNLZXk7XG4gICAgZ2V0T3B0aW9ucy5zaWduYWwgPSBXZWJBdXRobkFib3J0U2VydmljZS5jcmVhdGVOZXdBYm9ydFNpZ25hbCgpO1xuICAgIGxldCBjcmVkZW50aWFsO1xuICAgIHRyeSB7XG4gICAgICAgIGNyZWRlbnRpYWwgPSAoYXdhaXQgbmF2aWdhdG9yLmNyZWRlbnRpYWxzLmdldChnZXRPcHRpb25zKSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhyb3cgaWRlbnRpZnlBdXRoZW50aWNhdGlvbkVycm9yKHsgZXJyb3I6IGVyciwgb3B0aW9uczogZ2V0T3B0aW9ucyB9KTtcbiAgICB9XG4gICAgaWYgKCFjcmVkZW50aWFsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gd2FzIG5vdCBjb21wbGV0ZWQnKTtcbiAgICB9XG4gICAgY29uc3QgeyBpZCwgcmF3SWQsIHJlc3BvbnNlLCB0eXBlIH0gPSBjcmVkZW50aWFsO1xuICAgIGxldCB1c2VySGFuZGxlID0gdW5kZWZpbmVkO1xuICAgIGlmIChyZXNwb25zZS51c2VySGFuZGxlKSB7XG4gICAgICAgIHVzZXJIYW5kbGUgPSBidWZmZXJUb0Jhc2U2NFVSTFN0cmluZyhyZXNwb25zZS51c2VySGFuZGxlKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQsXG4gICAgICAgIHJhd0lkOiBidWZmZXJUb0Jhc2U2NFVSTFN0cmluZyhyYXdJZCksXG4gICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdG9yRGF0YTogYnVmZmVyVG9CYXNlNjRVUkxTdHJpbmcocmVzcG9uc2UuYXV0aGVudGljYXRvckRhdGEpLFxuICAgICAgICAgICAgY2xpZW50RGF0YUpTT046IGJ1ZmZlclRvQmFzZTY0VVJMU3RyaW5nKHJlc3BvbnNlLmNsaWVudERhdGFKU09OKSxcbiAgICAgICAgICAgIHNpZ25hdHVyZTogYnVmZmVyVG9CYXNlNjRVUkxTdHJpbmcocmVzcG9uc2Uuc2lnbmF0dXJlKSxcbiAgICAgICAgICAgIHVzZXJIYW5kbGUsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGNsaWVudEV4dGVuc2lvblJlc3VsdHM6IGNyZWRlbnRpYWwuZ2V0Q2xpZW50RXh0ZW5zaW9uUmVzdWx0cygpLFxuICAgICAgICBhdXRoZW50aWNhdG9yQXR0YWNobWVudDogdG9BdXRoZW50aWNhdG9yQXR0YWNobWVudChjcmVkZW50aWFsLmF1dGhlbnRpY2F0b3JBdHRhY2htZW50KSxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBwbGF0Zm9ybUF1dGhlbnRpY2F0b3JJc0F2YWlsYWJsZSgpIHtcbiAgICBpZiAoIWJyb3dzZXJTdXBwb3J0c1dlYkF1dGhuKCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlKGZhbHNlKSk7XG4gICAgfVxuICAgIHJldHVybiBQdWJsaWNLZXlDcmVkZW50aWFsLmlzVXNlclZlcmlmeWluZ1BsYXRmb3JtQXV0aGVudGljYXRvckF2YWlsYWJsZSgpO1xufVxuXG5leHBvcnQgeyBXZWJBdXRobkFib3J0U2VydmljZSwgV2ViQXV0aG5FcnJvciwgYmFzZTY0VVJMU3RyaW5nVG9CdWZmZXIsIGJyb3dzZXJTdXBwb3J0c1dlYkF1dGhuLCBicm93c2VyU3VwcG9ydHNXZWJBdXRobkF1dG9maWxsLCBidWZmZXJUb0Jhc2U2NFVSTFN0cmluZywgcGxhdGZvcm1BdXRoZW50aWNhdG9ySXNBdmFpbGFibGUsIHN0YXJ0QXV0aGVudGljYXRpb24sIHN0YXJ0UmVnaXN0cmF0aW9uIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@simplewebauthn/browser/dist/bundle/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-sc/dist/index.default.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@stackframe/stack-sc/dist/index.default.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cookies: () => (/* binding */ cookies),\n/* harmony export */   headers: () => (/* binding */ headers),\n/* harmony export */   isReactServer: () => (/* binding */ isReactServer)\n/* harmony export */ });\nconst cookies = undefined;\nconst headers = undefined;\nconst isReactServer = false;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zYy9kaXN0L2luZGV4LmRlZmF1bHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU87QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNjXFxkaXN0XFxpbmRleC5kZWZhdWx0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjb29raWVzID0gdW5kZWZpbmVkO1xuZXhwb3J0IGNvbnN0IGhlYWRlcnMgPSB1bmRlZmluZWQ7XG5leHBvcnQgY29uc3QgaXNSZWFjdFNlcnZlciA9IGZhbHNlO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-sc/dist/index.default.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-sc/dist/index.react-server.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-sc/dist/index.react-server.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cookies: () => (/* binding */ cookies),\n/* harmony export */   headers: () => (/* binding */ headers),\n/* harmony export */   isReactServer: () => (/* binding */ isReactServer)\n/* harmony export */ });\n/* harmony import */ var _next_static_analysis_workaround__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./next-static-analysis-workaround */ \"(app-pages-browser)/./node_modules/@stackframe/stack-sc/dist/next-static-analysis-workaround.js\");\nconst isReactServer = true;\n// In Next.js 15, the `next/headers` module returns async functions.\n// Since we support both Next.js 14 and 15, we return a union of the two.\n// TODO: Remove this once we drop support for Next.js 14, and replace it with `export { cookies, headers } from 'next/headers';`\n// https://nextjs.org/blog/next-15#async-request-apis-breaking-change\n\nconst cookies = _next_static_analysis_workaround__WEBPACK_IMPORTED_MODULE_0__.cookies;\nconst headers = _next_static_analysis_workaround__WEBPACK_IMPORTED_MODULE_0__.headers;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zYy9kaXN0L2luZGV4LnJlYWN0LXNlcnZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0Esd0ZBQXdGLG1CQUFtQixvQkFBb0I7QUFDL0g7QUFDbUc7QUFDNUYsZ0JBQWdCLHFFQUFXO0FBQzNCLGdCQUFnQixxRUFBVyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFjay1zY1xcZGlzdFxcaW5kZXgucmVhY3Qtc2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpc1JlYWN0U2VydmVyID0gdHJ1ZTtcbi8vIEluIE5leHQuanMgMTUsIHRoZSBgbmV4dC9oZWFkZXJzYCBtb2R1bGUgcmV0dXJucyBhc3luYyBmdW5jdGlvbnMuXG4vLyBTaW5jZSB3ZSBzdXBwb3J0IGJvdGggTmV4dC5qcyAxNCBhbmQgMTUsIHdlIHJldHVybiBhIHVuaW9uIG9mIHRoZSB0d28uXG4vLyBUT0RPOiBSZW1vdmUgdGhpcyBvbmNlIHdlIGRyb3Agc3VwcG9ydCBmb3IgTmV4dC5qcyAxNCwgYW5kIHJlcGxhY2UgaXQgd2l0aCBgZXhwb3J0IHsgY29va2llcywgaGVhZGVycyB9IGZyb20gJ25leHQvaGVhZGVycyc7YFxuLy8gaHR0cHM6Ly9uZXh0anMub3JnL2Jsb2cvbmV4dC0xNSNhc3luYy1yZXF1ZXN0LWFwaXMtYnJlYWtpbmctY2hhbmdlXG5pbXBvcnQgeyBjb29raWVzIGFzIG5leHRDb29raWVzLCBoZWFkZXJzIGFzIG5leHRIZWFkZXJzIH0gZnJvbSAnLi9uZXh0LXN0YXRpYy1hbmFseXNpcy13b3JrYXJvdW5kJztcbmV4cG9ydCBjb25zdCBjb29raWVzID0gbmV4dENvb2tpZXM7XG5leHBvcnQgY29uc3QgaGVhZGVycyA9IG5leHRIZWFkZXJzO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-sc/dist/index.react-server.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-sc/dist/next-static-analysis-workaround.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-sc/dist/next-static-analysis-workaround.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __esModule: () => (/* reexport safe */ next_headers__WEBPACK_IMPORTED_MODULE_0__.__esModule),\n/* harmony export */   cookies: () => (/* reexport safe */ next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies),\n/* harmony export */   draftMode: () => (/* reexport safe */ next_headers__WEBPACK_IMPORTED_MODULE_0__.draftMode),\n/* harmony export */   headers: () => (/* reexport safe */ next_headers__WEBPACK_IMPORTED_MODULE_0__.headers)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(app-pages-browser)/./node_modules/next/dist/api/headers.js\");\n// Next statically analyzes the imports and ensures that the `next/headers` module is never imported on a client bundle.\n//\n// We know what we're doing though. We ensure at runtime that we never use the module unless we're on the server, so the\n// static analysis is wrong.\n//\n// Fortunately, as a hack, we can get around it by importing them using the `export from` syntax, which the static\n// analyzer does not detect, but Webpack is fine with it.\n//\n// So, we can use the export syntax here, and then import them normally in the main file.\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zYy9kaXN0L25leHQtc3RhdGljLWFuYWx5c2lzLXdvcmthcm91bmQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNkIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2NcXGRpc3RcXG5leHQtc3RhdGljLWFuYWx5c2lzLXdvcmthcm91bmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTmV4dCBzdGF0aWNhbGx5IGFuYWx5emVzIHRoZSBpbXBvcnRzIGFuZCBlbnN1cmVzIHRoYXQgdGhlIGBuZXh0L2hlYWRlcnNgIG1vZHVsZSBpcyBuZXZlciBpbXBvcnRlZCBvbiBhIGNsaWVudCBidW5kbGUuXG4vL1xuLy8gV2Uga25vdyB3aGF0IHdlJ3JlIGRvaW5nIHRob3VnaC4gV2UgZW5zdXJlIGF0IHJ1bnRpbWUgdGhhdCB3ZSBuZXZlciB1c2UgdGhlIG1vZHVsZSB1bmxlc3Mgd2UncmUgb24gdGhlIHNlcnZlciwgc28gdGhlXG4vLyBzdGF0aWMgYW5hbHlzaXMgaXMgd3JvbmcuXG4vL1xuLy8gRm9ydHVuYXRlbHksIGFzIGEgaGFjaywgd2UgY2FuIGdldCBhcm91bmQgaXQgYnkgaW1wb3J0aW5nIHRoZW0gdXNpbmcgdGhlIGBleHBvcnQgZnJvbWAgc3ludGF4LCB3aGljaCB0aGUgc3RhdGljXG4vLyBhbmFseXplciBkb2VzIG5vdCBkZXRlY3QsIGJ1dCBXZWJwYWNrIGlzIGZpbmUgd2l0aCBpdC5cbi8vXG4vLyBTbywgd2UgY2FuIHVzZSB0aGUgZXhwb3J0IHN5bnRheCBoZXJlLCBhbmQgdGhlbiBpbXBvcnQgdGhlbSBub3JtYWxseSBpbiB0aGUgbWFpbiBmaWxlLlxuZXhwb3J0ICogZnJvbSAnbmV4dC9oZWFkZXJzJztcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-sc/dist/next-static-analysis-workaround.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/helpers/production-mode.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/helpers/production-mode.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getProductionModeErrors: () => (/* binding */ getProductionModeErrors)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_urls__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/urls */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/urls.js\");\n\n\nfunction getProductionModeErrors(project) {\n    const errors = [];\n    const domainsFixUrl = `/projects/${project.id}/domains`;\n    if (project.config.allow_localhost) {\n        errors.push({\n            message: \"Localhost is not allowed in production mode, turn off 'Allow localhost' in project settings\",\n            relativeFixUrl: domainsFixUrl,\n        });\n    }\n    for (const { domain } of project.config.domains) {\n        let url;\n        try {\n            url = new URL(domain);\n        }\n        catch (e) {\n            (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.captureError)(\"production-mode-domain-not-valid\", new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Domain was somehow not a valid URL; we should've caught this when setting the domain in the first place\", {\n                domain,\n                projectId: project\n            }));\n            errors.push({\n                message: \"Trusted domain is not a valid URL: \" + domain,\n                relativeFixUrl: domainsFixUrl,\n            });\n            continue;\n        }\n        if ((0,_utils_urls__WEBPACK_IMPORTED_MODULE_1__.isLocalhost)(url)) {\n            errors.push({\n                message: \"Localhost domains are not allowed to be trusted in production mode: \" + domain,\n                relativeFixUrl: domainsFixUrl,\n            });\n        }\n        else if (url.hostname.match(/^\\d+(\\.\\d+)*$/)) {\n            errors.push({\n                message: \"Direct IPs are not valid for trusted domains in production mode: \" + domain,\n                relativeFixUrl: domainsFixUrl,\n            });\n        }\n        else if (url.protocol !== \"https:\") {\n            errors.push({\n                message: \"Trusted domains should be HTTPS: \" + domain,\n                relativeFixUrl: domainsFixUrl,\n            });\n        }\n    }\n    return errors;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9oZWxwZXJzL3Byb2R1Y3Rpb24tbW9kZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0U7QUFDeEI7QUFDckM7QUFDUDtBQUNBLHVDQUF1QyxXQUFXO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMkRBQVkseUNBQXlDLDhEQUFtQixzQ0FBc0M7QUFDMUg7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFlBQVksd0RBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFjay1zaGFyZWRcXGRpc3RcXGhlbHBlcnNcXHByb2R1Y3Rpb24tbW9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yLCBjYXB0dXJlRXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgeyBpc0xvY2FsaG9zdCB9IGZyb20gXCIuLi91dGlscy91cmxzXCI7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvZHVjdGlvbk1vZGVFcnJvcnMocHJvamVjdCkge1xuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgIGNvbnN0IGRvbWFpbnNGaXhVcmwgPSBgL3Byb2plY3RzLyR7cHJvamVjdC5pZH0vZG9tYWluc2A7XG4gICAgaWYgKHByb2plY3QuY29uZmlnLmFsbG93X2xvY2FsaG9zdCkge1xuICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkxvY2FsaG9zdCBpcyBub3QgYWxsb3dlZCBpbiBwcm9kdWN0aW9uIG1vZGUsIHR1cm4gb2ZmICdBbGxvdyBsb2NhbGhvc3QnIGluIHByb2plY3Qgc2V0dGluZ3NcIixcbiAgICAgICAgICAgIHJlbGF0aXZlRml4VXJsOiBkb21haW5zRml4VXJsLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB7IGRvbWFpbiB9IG9mIHByb2plY3QuY29uZmlnLmRvbWFpbnMpIHtcbiAgICAgICAgbGV0IHVybDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoZG9tYWluKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY2FwdHVyZUVycm9yKFwicHJvZHVjdGlvbi1tb2RlLWRvbWFpbi1ub3QtdmFsaWRcIiwgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJEb21haW4gd2FzIHNvbWVob3cgbm90IGEgdmFsaWQgVVJMOyB3ZSBzaG91bGQndmUgY2F1Z2h0IHRoaXMgd2hlbiBzZXR0aW5nIHRoZSBkb21haW4gaW4gdGhlIGZpcnN0IHBsYWNlXCIsIHtcbiAgICAgICAgICAgICAgICBkb21haW4sXG4gICAgICAgICAgICAgICAgcHJvamVjdElkOiBwcm9qZWN0XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUcnVzdGVkIGRvbWFpbiBpcyBub3QgYSB2YWxpZCBVUkw6IFwiICsgZG9tYWluLFxuICAgICAgICAgICAgICAgIHJlbGF0aXZlRml4VXJsOiBkb21haW5zRml4VXJsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNMb2NhbGhvc3QodXJsKSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTG9jYWxob3N0IGRvbWFpbnMgYXJlIG5vdCBhbGxvd2VkIHRvIGJlIHRydXN0ZWQgaW4gcHJvZHVjdGlvbiBtb2RlOiBcIiArIGRvbWFpbixcbiAgICAgICAgICAgICAgICByZWxhdGl2ZUZpeFVybDogZG9tYWluc0ZpeFVybCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVybC5ob3N0bmFtZS5tYXRjaCgvXlxcZCsoXFwuXFxkKykqJC8pKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJEaXJlY3QgSVBzIGFyZSBub3QgdmFsaWQgZm9yIHRydXN0ZWQgZG9tYWlucyBpbiBwcm9kdWN0aW9uIG1vZGU6IFwiICsgZG9tYWluLFxuICAgICAgICAgICAgICAgIHJlbGF0aXZlRml4VXJsOiBkb21haW5zRml4VXJsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXJsLnByb3RvY29sICE9PSBcImh0dHBzOlwiKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUcnVzdGVkIGRvbWFpbnMgc2hvdWxkIGJlIEhUVFBTOiBcIiArIGRvbWFpbixcbiAgICAgICAgICAgICAgICByZWxhdGl2ZUZpeFVybDogZG9tYWluc0ZpeFVybCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlcnJvcnM7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/helpers/production-mode.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KnownError: () => (/* reexport safe */ _known_errors__WEBPACK_IMPORTED_MODULE_3__.KnownError),\n/* harmony export */   KnownErrors: () => (/* reexport safe */ _known_errors__WEBPACK_IMPORTED_MODULE_3__.KnownErrors),\n/* harmony export */   StackAdminInterface: () => (/* reexport safe */ _interface_adminInterface__WEBPACK_IMPORTED_MODULE_0__.StackAdminInterface),\n/* harmony export */   StackClientInterface: () => (/* reexport safe */ _interface_clientInterface__WEBPACK_IMPORTED_MODULE_1__.StackClientInterface),\n/* harmony export */   StackServerInterface: () => (/* reexport safe */ _interface_serverInterface__WEBPACK_IMPORTED_MODULE_2__.StackServerInterface)\n/* harmony export */ });\n/* harmony import */ var _interface_adminInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interface/adminInterface */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/adminInterface.js\");\n/* harmony import */ var _interface_clientInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interface/clientInterface */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js\");\n/* harmony import */ var _interface_serverInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interface/serverInterface */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js\");\n/* harmony import */ var _known_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./known-errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/known-errors.js\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBaUU7QUFDRTtBQUNBO0FBQ1YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2hhcmVkXFxkaXN0XFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBTdGFja0FkbWluSW50ZXJmYWNlIH0gZnJvbSBcIi4vaW50ZXJmYWNlL2FkbWluSW50ZXJmYWNlXCI7XG5leHBvcnQgeyBTdGFja0NsaWVudEludGVyZmFjZSB9IGZyb20gXCIuL2ludGVyZmFjZS9jbGllbnRJbnRlcmZhY2VcIjtcbmV4cG9ydCB7IFN0YWNrU2VydmVySW50ZXJmYWNlIH0gZnJvbSBcIi4vaW50ZXJmYWNlL3NlcnZlckludGVyZmFjZVwiO1xuZXhwb3J0IHsgS25vd25FcnJvciwgS25vd25FcnJvcnMgfSBmcm9tIFwiLi9rbm93bi1lcnJvcnNcIjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/adminInterface.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/interface/adminInterface.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackAdminInterface: () => (/* binding */ StackAdminInterface)\n/* harmony export */ });\n/* harmony import */ var _serverInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./serverInterface */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js\");\n\nclass StackAdminInterface extends _serverInterface__WEBPACK_IMPORTED_MODULE_0__.StackServerInterface {\n    constructor(options) {\n        super(options);\n        this.options = options;\n    }\n    async sendAdminRequest(path, options, session, requestType = \"admin\") {\n        return await this.sendServerRequest(path, {\n            ...options,\n            headers: {\n                \"x-stack-super-secret-admin-key\": \"superSecretAdminKey\" in this.options ? this.options.superSecretAdminKey : \"\",\n                ...options.headers,\n            },\n        }, session, requestType);\n    }\n    async getProject() {\n        const response = await this.sendAdminRequest(\"/projects/current\", {\n            method: \"GET\",\n        }, null);\n        return await response.json();\n    }\n    async updateProject(update) {\n        const response = await this.sendAdminRequest(\"/projects/current\", {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(update),\n        }, null);\n        return await response.json();\n    }\n    async createInternalApiKey(options) {\n        const response = await this.sendAdminRequest(\"/internal/api-keys\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(options),\n        }, null);\n        return await response.json();\n    }\n    async listInternalApiKeys() {\n        const response = await this.sendAdminRequest(\"/internal/api-keys\", {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async revokeInternalApiKeyById(id) {\n        await this.sendAdminRequest(`/internal/api-keys/${id}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                revoked: true,\n            }),\n        }, null);\n    }\n    async getInternalApiKey(id, session) {\n        const response = await this.sendAdminRequest(`/internal/api-keys/${id}`, {}, session);\n        return await response.json();\n    }\n    async listEmailTemplates() {\n        const response = await this.sendAdminRequest(`/email-templates`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async updateEmailTemplate(type, data) {\n        const result = await this.sendAdminRequest(`/email-templates/${type}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await result.json();\n    }\n    async resetEmailTemplate(type) {\n        await this.sendAdminRequest(`/email-templates/${type}`, { method: \"DELETE\" }, null);\n    }\n    // Team permission definitions methods\n    async listTeamPermissionDefinitions() {\n        const response = await this.sendAdminRequest(`/team-permission-definitions`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async createTeamPermissionDefinition(data) {\n        const response = await this.sendAdminRequest(\"/team-permission-definitions\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async updateTeamPermissionDefinition(permissionId, data) {\n        const response = await this.sendAdminRequest(`/team-permission-definitions/${permissionId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async deleteTeamPermissionDefinition(permissionId) {\n        await this.sendAdminRequest(`/team-permission-definitions/${permissionId}`, { method: \"DELETE\" }, null);\n    }\n    async listProjectPermissionDefinitions() {\n        const response = await this.sendAdminRequest(`/project-permission-definitions`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async createProjectPermissionDefinition(data) {\n        const response = await this.sendAdminRequest(\"/project-permission-definitions\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async updateProjectPermissionDefinition(permissionId, data) {\n        const response = await this.sendAdminRequest(`/project-permission-definitions/${permissionId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async deleteProjectPermissionDefinition(permissionId) {\n        await this.sendAdminRequest(`/project-permission-definitions/${permissionId}`, { method: \"DELETE\" }, null);\n    }\n    async getSvixToken() {\n        const response = await this.sendAdminRequest(\"/webhooks/svix-token\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n        return await response.json();\n    }\n    async deleteProject() {\n        await this.sendAdminRequest(\"/projects/current\", {\n            method: \"DELETE\",\n        }, null);\n    }\n    async getMetrics() {\n        const response = await this.sendAdminRequest(\"/internal/metrics\", {\n            method: \"GET\",\n        }, null);\n        return await response.json();\n    }\n    async sendTestEmail(data) {\n        const response = await this.sendAdminRequest(`/internal/send-test-email`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async listSentEmails() {\n        const response = await this.sendAdminRequest(\"/internal/emails\", {\n            method: \"GET\",\n        }, null);\n        return await response.json();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9pbnRlcmZhY2UvYWRtaW5JbnRlcmZhY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUQ7QUFDbEQsa0NBQWtDLGtFQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELEdBQUc7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSwyRUFBMkUsR0FBRyxLQUFLO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxLQUFLO0FBQzVFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsS0FBSyxLQUFLLGtCQUFrQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQSx1RkFBdUY7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxxRkFBcUYsYUFBYTtBQUNsRztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLGFBQWEsS0FBSyxrQkFBa0I7QUFDeEc7QUFDQTtBQUNBLDBGQUEwRjtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHdGQUF3RixhQUFhO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsYUFBYSxLQUFLLGtCQUFrQjtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DO0FBQ25DLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcaW50ZXJmYWNlXFxhZG1pbkludGVyZmFjZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGFja1NlcnZlckludGVyZmFjZSB9IGZyb20gXCIuL3NlcnZlckludGVyZmFjZVwiO1xuZXhwb3J0IGNsYXNzIFN0YWNrQWRtaW5JbnRlcmZhY2UgZXh0ZW5kcyBTdGFja1NlcnZlckludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgYXN5bmMgc2VuZEFkbWluUmVxdWVzdChwYXRoLCBvcHRpb25zLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSA9IFwiYWRtaW5cIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChwYXRoLCB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwieC1zdGFjay1zdXBlci1zZWNyZXQtYWRtaW4ta2V5XCI6IFwic3VwZXJTZWNyZXRBZG1pbktleVwiIGluIHRoaXMub3B0aW9ucyA/IHRoaXMub3B0aW9ucy5zdXBlclNlY3JldEFkbWluS2V5IDogXCJcIixcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LCBzZXNzaW9uLCByZXF1ZXN0VHlwZSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFByb2plY3QoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFwiL3Byb2plY3RzL2N1cnJlbnRcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUHJvamVjdCh1cGRhdGUpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXCIvcHJvamVjdHMvY3VycmVudFwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGUpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlSW50ZXJuYWxBcGlLZXkob3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcIi9pbnRlcm5hbC9hcGkta2V5c1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdEludGVybmFsQXBpS2V5cygpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXCIvaW50ZXJuYWwvYXBpLWtleXNcIiwge30sIG51bGwpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gICAgfVxuICAgIGFzeW5jIHJldm9rZUludGVybmFsQXBpS2V5QnlJZChpZCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9pbnRlcm5hbC9hcGkta2V5cy8ke2lkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICByZXZva2VkOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgIH1cbiAgICBhc3luYyBnZXRJbnRlcm5hbEFwaUtleShpZCwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL2ludGVybmFsL2FwaS1rZXlzLyR7aWR9YCwge30sIHNlc3Npb24pO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0RW1haWxUZW1wbGF0ZXMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvZW1haWwtdGVtcGxhdGVzYCwge30sIG51bGwpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUVtYWlsVGVtcGxhdGUodHlwZSwgZGF0YSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9lbWFpbC10ZW1wbGF0ZXMvJHt0eXBlfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3VsdC5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIHJlc2V0RW1haWxUZW1wbGF0ZSh0eXBlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL2VtYWlsLXRlbXBsYXRlcy8ke3R5cGV9YCwgeyBtZXRob2Q6IFwiREVMRVRFXCIgfSwgbnVsbCk7XG4gICAgfVxuICAgIC8vIFRlYW0gcGVybWlzc2lvbiBkZWZpbml0aW9ucyBtZXRob2RzXG4gICAgYXN5bmMgbGlzdFRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvdGVhbS1wZXJtaXNzaW9uLWRlZmluaXRpb25zYCwge30sIG51bGwpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZVRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFwiL3RlYW0tcGVybWlzc2lvbi1kZWZpbml0aW9uc1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCwgZGF0YSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL3RlYW0tcGVybWlzc2lvbi1kZWZpbml0aW9ucy8ke3Blcm1pc3Npb25JZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZVRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbihwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvdGVhbS1wZXJtaXNzaW9uLWRlZmluaXRpb25zLyR7cGVybWlzc2lvbklkfWAsIHsgbWV0aG9kOiBcIkRFTEVURVwiIH0sIG51bGwpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0UHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9ucygpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9wcm9qZWN0LXBlcm1pc3Npb24tZGVmaW5pdGlvbnNgLCB7fSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXCIvcHJvamVjdC1wZXJtaXNzaW9uLWRlZmluaXRpb25zXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb24ocGVybWlzc2lvbklkLCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvcHJvamVjdC1wZXJtaXNzaW9uLWRlZmluaXRpb25zLyR7cGVybWlzc2lvbklkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9wcm9qZWN0LXBlcm1pc3Npb24tZGVmaW5pdGlvbnMvJHtwZXJtaXNzaW9uSWR9YCwgeyBtZXRob2Q6IFwiREVMRVRFXCIgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIGdldFN2aXhUb2tlbigpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXCIvd2ViaG9va3Mvc3ZpeC10b2tlblwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZVByb2plY3QoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcIi9wcm9qZWN0cy9jdXJyZW50XCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIGdldE1ldHJpY3MoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFwiL2ludGVybmFsL21ldHJpY3NcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZFRlc3RFbWFpbChkYXRhKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvaW50ZXJuYWwvc2VuZC10ZXN0LWVtYWlsYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RTZW50RW1haWxzKCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcIi9pbnRlcm5hbC9lbWFpbHNcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/adminInterface.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackClientInterface: () => (/* binding */ StackClientInterface)\n/* harmony export */ });\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! oauth4webapi */ \"(app-pages-browser)/./node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _known_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../known-errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/known-errors.js\");\n/* harmony import */ var _sessions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sessions */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/sessions.js\");\n/* harmony import */ var _utils_crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/crypto */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js\");\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_globals__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/globals */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\");\n/* harmony import */ var _utils_http__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/http */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/http.js\");\n/* harmony import */ var _utils_objects__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/objects */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _utils_promises__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/promises */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _utils_results__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _utils_strings__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/strings */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\n\n\n\n\n\n\n\n\n\nclass StackClientInterface {\n    constructor(options) {\n        this.options = options;\n        // nothing here\n    }\n    get projectId() {\n        return this.options.projectId;\n    }\n    getApiUrl() {\n        return this.options.getBaseUrl() + \"/api/v1\";\n    }\n    async runNetworkDiagnostics(session, requestType) {\n        const tryRequest = async (cb) => {\n            try {\n                await cb();\n                return \"OK\";\n            }\n            catch (e) {\n                return `${e}`;\n            }\n        };\n        const cfTrace = await tryRequest(async () => {\n            const res = await fetch(\"https://1.1.1.1/cdn-cgi/trace\");\n            if (!res.ok) {\n                throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n            }\n        });\n        const apiRoot = session !== undefined && requestType !== undefined ? await tryRequest(async () => {\n            const res = await this.sendClientRequestInner(\"/\", {}, session, requestType);\n            if (res.status === \"error\") {\n                throw res.error;\n            }\n        }) : \"Not tested\";\n        const baseUrlBackend = await tryRequest(async () => {\n            const res = await fetch(new URL(\"/health\", this.getApiUrl()));\n            if (!res.ok) {\n                throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n            }\n        });\n        const prodDashboard = await tryRequest(async () => {\n            const res = await fetch(\"https://app.stack-auth.com/health\");\n            if (!res.ok) {\n                throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n            }\n        });\n        const prodBackend = await tryRequest(async () => {\n            const res = await fetch(\"https://api.stack-auth.com/health\");\n            if (!res.ok) {\n                throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n            }\n        });\n        return {\n            \"navigator?.onLine\": _utils_globals__WEBPACK_IMPORTED_MODULE_4__.globalVar.navigator?.onLine,\n            cfTrace,\n            apiRoot,\n            baseUrlBackend,\n            prodDashboard,\n            prodBackend,\n        };\n    }\n    async _createNetworkError(cause, session, requestType) {\n        return new Error((0,_utils_strings__WEBPACK_IMPORTED_MODULE_9__.deindent) `\n      Stack Auth is unable to connect to the server. Please check your internet connection and try again.\n      \n      If the problem persists, please contact support and provide a screenshot of your entire browser console.\n\n      ${cause}\n      \n      ${JSON.stringify(await this.runNetworkDiagnostics(session, requestType), null, 2)}\n    `, { cause: cause });\n    }\n    async _networkRetry(cb, session, requestType) {\n        const retriedResult = await _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.retry(cb, 5, { exponentialDelayBase: 1000 });\n        // try to diagnose the error for the user\n        if (retriedResult.status === \"error\") {\n            if (_utils_globals__WEBPACK_IMPORTED_MODULE_4__.globalVar.navigator && !_utils_globals__WEBPACK_IMPORTED_MODULE_4__.globalVar.navigator.onLine) {\n                throw new Error(\"Failed to send Stack network request. It seems like you are offline, please check your internet connection and try again. This is not an error with Stack Auth. (window.navigator.onLine is falsy)\", { cause: retriedResult.error });\n            }\n            throw await this._createNetworkError(retriedResult.error, session, requestType);\n        }\n        return retriedResult.data;\n    }\n    async _networkRetryException(cb, session, requestType) {\n        return await this._networkRetry(async () => await _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.fromThrowingAsync(cb), session, requestType);\n    }\n    async fetchNewAccessToken(refreshToken) {\n        if (!('publishableClientKey' in this.options)) {\n            // TODO support it\n            throw new Error(\"Admin session token is currently not supported for fetching new access token. Did you try to log in on a StackApp initiated with the admin session?\");\n        }\n        const as = {\n            issuer: this.options.getBaseUrl(),\n            algorithm: 'oauth2',\n            token_endpoint: this.getApiUrl() + '/auth/oauth/token',\n        };\n        const client = {\n            client_id: this.projectId,\n            client_secret: this.options.publishableClientKey,\n            token_endpoint_auth_method: 'client_secret_post',\n        };\n        const rawResponse = await this._networkRetryException(async () => await oauth4webapi__WEBPACK_IMPORTED_MODULE_10__.refreshTokenGrantRequest(as, client, refreshToken.token));\n        const response = await this._processResponse(rawResponse);\n        if (response.status === \"error\") {\n            const error = response.error;\n            if (error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RefreshTokenError) {\n                return null;\n            }\n            throw error;\n        }\n        if (!response.data.ok) {\n            const body = await response.data.text();\n            throw new Error(`Failed to send refresh token request: ${response.status} ${body}`);\n        }\n        const result = await oauth4webapi__WEBPACK_IMPORTED_MODULE_10__.processRefreshTokenResponse(as, client, response.data);\n        if (oauth4webapi__WEBPACK_IMPORTED_MODULE_10__.isOAuth2Error(result)) {\n            // TODO Handle OAuth 2.0 response body error\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"OAuth error\", { result });\n        }\n        if (!result.access_token) {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Access token not found in token endpoint response, this is weird!\");\n        }\n        return new _sessions__WEBPACK_IMPORTED_MODULE_1__.AccessToken(result.access_token);\n    }\n    async sendClientRequest(path, requestOptions, session, requestType = \"client\") {\n        session ??= this.createSession({\n            refreshToken: null,\n        });\n        return await this._networkRetry(() => this.sendClientRequestInner(path, requestOptions, session, requestType), session, requestType);\n    }\n    createSession(options) {\n        const session = new _sessions__WEBPACK_IMPORTED_MODULE_1__.InternalSession({\n            refreshAccessTokenCallback: async (refreshToken) => await this.fetchNewAccessToken(refreshToken),\n            ...options,\n        });\n        return session;\n    }\n    async sendClientRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n        try {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await this.sendClientRequest(path, requestOptions, tokenStoreOrNull));\n        }\n        catch (e) {\n            for (const errorType of errorsToCatch) {\n                if (e instanceof errorType) {\n                    return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(e);\n                }\n            }\n            throw e;\n        }\n    }\n    async sendClientRequestInner(path, options, session, requestType) {\n        /**\n         * `tokenObj === null` means the session is invalid/not logged in\n         */\n        let tokenObj = await session.getOrFetchLikelyValidTokens(20000);\n        let adminSession = \"projectOwnerSession\" in this.options ? this.options.projectOwnerSession : null;\n        let adminTokenObj = adminSession ? await adminSession.getOrFetchLikelyValidTokens(20000) : null;\n        // all requests should be dynamic to prevent Next.js caching\n        await this.options.prepareRequest?.();\n        let url = this.getApiUrl() + path;\n        if (url.endsWith(\"/\")) {\n            url = url.slice(0, -1);\n        }\n        const params = {\n            /**\n             * This fetch may be cross-origin, in which case we don't want to send cookies of the\n             * original origin (this is the default behavior of `credentials`).\n             *\n             * To help debugging, also omit cookies on same-origin, so we don't accidentally\n             * implement reliance on cookies anywhere.\n             *\n             * However, Cloudflare Workers don't actually support `credentials`, so we only set it\n             * if Cloudflare-exclusive globals are not detected. https://github.com/cloudflare/workers-sdk/issues/2514\n             */\n            ...(\"WebSocketPair\" in _utils_globals__WEBPACK_IMPORTED_MODULE_4__.globalVar ? {} : {\n                credentials: \"omit\",\n            }),\n            ...options,\n            headers: {\n                \"X-Stack-Override-Error-Status\": \"true\",\n                \"X-Stack-Project-Id\": this.projectId,\n                \"X-Stack-Access-Type\": requestType,\n                \"X-Stack-Client-Version\": this.options.clientVersion,\n                ...(tokenObj ? {\n                    \"X-Stack-Access-Token\": tokenObj.accessToken.token,\n                } : {}),\n                ...(tokenObj?.refreshToken ? {\n                    \"X-Stack-Refresh-Token\": tokenObj.refreshToken.token,\n                } : {}),\n                ...('publishableClientKey' in this.options ? {\n                    \"X-Stack-Publishable-Client-Key\": this.options.publishableClientKey,\n                } : {}),\n                ...(adminTokenObj ? {\n                    \"X-Stack-Admin-Access-Token\": adminTokenObj.accessToken.token,\n                } : {}),\n                /**\n                 * Next.js until v15 would cache fetch requests by default, and forcefully disabling it was nearly impossible.\n                 *\n                 * This header is used to change the cache key and hence always disable it, because we do our own caching.\n                 *\n                 * When we drop support for Next.js <15, we may be able to remove this header, but please make sure that this is\n                 * the case (I haven't actually tested.)\n                 */\n                \"X-Stack-Random-Nonce\": (0,_utils_crypto__WEBPACK_IMPORTED_MODULE_2__.generateSecureRandomString)(),\n                ...this.options.extraRequestHeaders,\n                ...options.headers,\n            },\n            /**\n             * Cloudflare Workers does not support cache, so don't pass it there\n             */\n            ...(\"WebSocketPair\" in _utils_globals__WEBPACK_IMPORTED_MODULE_4__.globalVar ? {} : {\n                cache: \"no-store\",\n            }),\n        };\n        let rawRes;\n        try {\n            rawRes = await fetch(url, params);\n        }\n        catch (e) {\n            if (e instanceof TypeError) {\n                // Likely to be a network error. Retry if the request is idempotent, throw network error otherwise.\n                if (_utils_http__WEBPACK_IMPORTED_MODULE_5__.HTTP_METHODS[(params.method ?? \"GET\")].idempotent) {\n                    return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(e);\n                }\n                else {\n                    throw await this._createNetworkError(e, session, requestType);\n                }\n            }\n            throw e;\n        }\n        const processedRes = await this._processResponse(rawRes);\n        if (processedRes.status === \"error\") {\n            // If the access token is invalid, reset it and retry\n            if (processedRes.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.InvalidAccessToken) {\n                if (!tokenObj) {\n                    throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Received invalid access token, but session is not logged in\", { tokenObj, processedRes });\n                }\n                session.markAccessTokenExpired(tokenObj.accessToken);\n                return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(processedRes.error);\n            }\n            // Same for the admin access token\n            // TODO HACK: Some of the backend hasn't been ported to use the new error codes, so if we have project owner tokens we need to check for ApiKeyNotFound too. Once the migration to smartRouteHandlers is complete, we can check for InvalidAdminAccessToken only.\n            if (adminSession && (processedRes.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.InvalidAdminAccessToken || processedRes.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.ApiKeyNotFound)) {\n                if (!adminTokenObj) {\n                    throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Received invalid admin access token, but admin session is not logged in\", { adminTokenObj, processedRes });\n                }\n                adminSession.markAccessTokenExpired(adminTokenObj.accessToken);\n                return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(processedRes.error);\n            }\n            // Known errors are client side errors, so except for the ones above they should not be retried\n            // Hence, throw instead of returning an error\n            throw processedRes.error;\n        }\n        const res = Object.assign(processedRes.data, {\n            usedTokens: tokenObj,\n        });\n        if (res.ok) {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(res);\n        }\n        else if (res.status === 429) {\n            // Rate limited, so retry if we can\n            const retryAfter = res.headers.get(\"Retry-After\");\n            if (retryAfter !== null) {\n                console.log(`Rate limited while sending request to ${url}. Will retry after ${retryAfter} seconds...`);\n                await (0,_utils_promises__WEBPACK_IMPORTED_MODULE_7__.wait)(Number(retryAfter) * 1000);\n                return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(new Error(`Rate limited, retrying after ${retryAfter} seconds`));\n            }\n            console.log(`Rate limited while sending request to ${url}, no retry-after header received. Retrying...`);\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(new Error(\"Rate limited, no retry-after header received\"));\n        }\n        else {\n            const error = await res.text();\n            const errorObj = new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(`Failed to send request to ${url}: ${res.status} ${error}`, { request: params, res, path });\n            if (res.status === 508 && error.includes(\"INFINITE_LOOP_DETECTED\")) {\n                // Some Vercel deployments seem to have an odd infinite loop bug. In that case, retry.\n                // See: https://github.com/stack-auth/stack-auth/issues/319\n                return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(errorObj);\n            }\n            // Do not retry, throw error instead of returning one\n            throw errorObj;\n        }\n    }\n    async _processResponse(rawRes) {\n        let res = rawRes;\n        if (rawRes.headers.has(\"x-stack-actual-status\")) {\n            const actualStatus = Number(rawRes.headers.get(\"x-stack-actual-status\"));\n            res = new Response(rawRes.body, {\n                status: actualStatus,\n                statusText: rawRes.statusText,\n                headers: rawRes.headers,\n            });\n        }\n        // Handle known errors\n        if (res.headers.has(\"x-stack-known-error\")) {\n            const errorJson = await res.json();\n            if (res.headers.get(\"x-stack-known-error\") !== errorJson.code) {\n                throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Mismatch between x-stack-known-error header and error code in body; the server's response is invalid\");\n            }\n            const error = _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownError.fromJson(errorJson);\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(error);\n        }\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(res);\n    }\n    async checkFeatureSupport(options) {\n        const res = await this.sendClientRequest(\"/check-feature-support\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(options),\n        }, null);\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(await res.text());\n    }\n    async sendForgotPasswordEmail(email, callbackUrl) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/password/send-reset-code\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email,\n                callback_url: callbackUrl,\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.UserNotFound]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        else {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(undefined);\n        }\n    }\n    async sendVerificationEmail(email, callbackUrl, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/contact-channels/send-verification-code\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email,\n                callback_url: callbackUrl,\n            }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.EmailAlreadyVerified]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n    async sendMagicLinkEmail(email, callbackUrl) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/otp/send-sign-in-code\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email,\n                callback_url: callbackUrl,\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RedirectUrlNotWhitelisted]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        else {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n        }\n    }\n    async resetPassword(options) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"onlyVerifyCode\" in options ? \"/auth/password/reset/check-code\" : \"/auth/password/reset\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code: options.code,\n                ...(\"password\" in options ? { password: options.password } : {}),\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        else {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(undefined);\n        }\n    }\n    async updatePassword(options, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/password/update\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                old_password: options.oldPassword,\n                new_password: options.newPassword,\n            }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordConfirmationMismatch, _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n    async setPassword(options, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/password/set\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(options),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n    async verifyPasswordResetCode(code) {\n        const res = await this.resetPassword({ code, onlyVerifyCode: true });\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        else {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(undefined);\n        }\n    }\n    async verifyEmail(code) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/contact-channels/verify\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code,\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        else {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(undefined);\n        }\n    }\n    async initiatePasskeyRegistration(options, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/passkey/initiate-passkey-registration\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(options),\n        }, session, []);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n    }\n    async registerPasskey(options, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/passkey/register\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(options),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasskeyRegistrationFailed]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(undefined);\n    }\n    async initiatePasskeyAuthentication(options, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/passkey/initiate-passkey-authentication\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(options),\n        }, session, []);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n    }\n    async sendTeamInvitation(options) {\n        await this.sendClientRequest(\"/team-invitations/send-code\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email: options.email,\n                team_id: options.teamId,\n                callback_url: options.callbackUrl,\n            }),\n        }, options.session);\n    }\n    async acceptTeamInvitation(options) {\n        const res = await this.sendClientRequestAndCatchKnownError(options.type === 'check' ?\n            \"/team-invitations/accept/check-code\" :\n            options.type === 'details' ?\n                \"/team-invitations/accept/details\" :\n                \"/team-invitations/accept\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code: options.code,\n            }),\n        }, options.session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        else {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n        }\n    }\n    async totpMfa(attemptCode, totp, session) {\n        const res = await this.sendClientRequest(\"/auth/mfa/sign-in\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code: attemptCode,\n                type: \"totp\",\n                totp: totp,\n            }),\n        }, session);\n        const result = await res.json();\n        return {\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n            newUser: result.is_new_user,\n        };\n    }\n    async signInWithCredential(email, password, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/password/sign-in\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email,\n                password,\n            }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.EmailPasswordMismatch]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        const result = await res.data.json();\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n        });\n    }\n    async signUpWithCredential(email, password, emailVerificationRedirectUrl, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/password/sign-up\", {\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            method: \"POST\",\n            body: JSON.stringify({\n                email,\n                password,\n                verification_callback_url: emailVerificationRedirectUrl,\n            }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.UserWithEmailAlreadyExists, _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        const result = await res.data.json();\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n        });\n    }\n    async signUpAnonymously(session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/anonymous/sign-up\", {\n            method: \"POST\",\n        }, session, []);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        const result = await res.data.json();\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n        });\n    }\n    async signInWithMagicLink(code) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/otp/sign-in\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code,\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        const result = await res.data.json();\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n            newUser: result.is_new_user,\n        });\n    }\n    async signInWithPasskey(body) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/passkey/sign-in\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(body),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasskeyAuthenticationFailed]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n        }\n        const result = await res.data.json();\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n        });\n    }\n    async getOAuthUrl(options) {\n        const updatedRedirectUrl = new URL(options.redirectUrl);\n        for (const key of [\"code\", \"state\"]) {\n            if (updatedRedirectUrl.searchParams.has(key)) {\n                console.warn(\"Redirect URL already contains \" + key + \" parameter, removing it as it will be overwritten by the OAuth callback\");\n            }\n            updatedRedirectUrl.searchParams.delete(key);\n        }\n        if (!('publishableClientKey' in this.options)) {\n            // TODO fix\n            throw new Error(\"Admin session token is currently not supported for OAuth\");\n        }\n        const url = new URL(this.getApiUrl() + \"/auth/oauth/authorize/\" + options.provider.toLowerCase());\n        url.searchParams.set(\"client_id\", this.projectId);\n        url.searchParams.set(\"client_secret\", this.options.publishableClientKey);\n        url.searchParams.set(\"redirect_uri\", updatedRedirectUrl.toString());\n        url.searchParams.set(\"scope\", \"legacy\");\n        url.searchParams.set(\"state\", options.state);\n        url.searchParams.set(\"grant_type\", \"authorization_code\");\n        url.searchParams.set(\"code_challenge\", options.codeChallenge);\n        url.searchParams.set(\"code_challenge_method\", \"S256\");\n        url.searchParams.set(\"response_type\", \"code\");\n        url.searchParams.set(\"type\", options.type);\n        url.searchParams.set(\"error_redirect_url\", options.errorRedirectUrl);\n        if (options.afterCallbackRedirectUrl) {\n            url.searchParams.set(\"after_callback_redirect_url\", options.afterCallbackRedirectUrl);\n        }\n        if (options.type === \"link\") {\n            const tokens = await options.session.getOrFetchLikelyValidTokens(20000);\n            url.searchParams.set(\"token\", tokens?.accessToken.token || \"\");\n            if (options.providerScope) {\n                url.searchParams.set(\"provider_scope\", options.providerScope);\n            }\n        }\n        return url.toString();\n    }\n    async callOAuthCallback(options) {\n        if (!('publishableClientKey' in this.options)) {\n            // TODO fix\n            throw new Error(\"Admin session token is currently not supported for OAuth\");\n        }\n        const as = {\n            issuer: this.options.getBaseUrl(),\n            algorithm: 'oauth2',\n            token_endpoint: this.getApiUrl() + '/auth/oauth/token',\n        };\n        const client = {\n            client_id: this.projectId,\n            client_secret: this.options.publishableClientKey,\n            token_endpoint_auth_method: 'client_secret_post',\n        };\n        const params = await this._networkRetryException(async () => oauth4webapi__WEBPACK_IMPORTED_MODULE_10__.validateAuthResponse(as, client, options.oauthParams, options.state));\n        if (oauth4webapi__WEBPACK_IMPORTED_MODULE_10__.isOAuth2Error(params)) {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Error validating outer OAuth response\", { params }); // Handle OAuth 2.0 redirect error\n        }\n        const response = await oauth4webapi__WEBPACK_IMPORTED_MODULE_10__.authorizationCodeGrantRequest(as, client, params, options.redirectUri, options.codeVerifier);\n        const result = await oauth4webapi__WEBPACK_IMPORTED_MODULE_10__.processAuthorizationCodeOAuth2Response(as, client, response);\n        if (oauth4webapi__WEBPACK_IMPORTED_MODULE_10__.isOAuth2Error(result)) {\n            if (\"code\" in result && result.code === \"MULTI_FACTOR_AUTHENTICATION_REQUIRED\") {\n                throw new _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.MultiFactorAuthenticationRequired(result.details.attempt_code);\n            }\n            // TODO Handle OAuth 2.0 response body error\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Outer OAuth error during authorization code response\", { result });\n        }\n        return {\n            newUser: result.is_new_user,\n            afterCallbackRedirectUrl: result.after_callback_redirect_url,\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_3__.throwErr)(\"Refresh token not found in outer OAuth response\"),\n        };\n    }\n    async signOut(session) {\n        const tokenObj = await session.getOrFetchLikelyValidTokens(20000);\n        if (tokenObj) {\n            const resOrError = await this.sendClientRequestAndCatchKnownError(\"/auth/sessions/current\", {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({}),\n            }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RefreshTokenError]);\n            if (resOrError.status === \"error\") {\n                if (resOrError.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RefreshTokenError) {\n                    // refresh token was already invalid, just continue like nothing happened\n                }\n                else {\n                    // this should never happen\n                    throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Unexpected error\", { error: resOrError.error });\n                }\n            }\n            else {\n                // user was signed out successfully, all good\n            }\n        }\n        session.markInvalid();\n    }\n    async getClientUserByToken(session) {\n        const responseOrError = await this.sendClientRequestAndCatchKnownError(\"/users/me\", {}, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser]);\n        if (responseOrError.status === \"error\") {\n            if (responseOrError.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser) {\n                return null;\n            }\n            else {\n                throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Unexpected uncaught error\", { cause: responseOrError.error });\n            }\n        }\n        const response = responseOrError.data;\n        const user = await response.json();\n        if (!user)\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"User endpoint returned null; this should never happen\");\n        return user;\n    }\n    async listTeamInvitations(options, session) {\n        const response = await this.sendClientRequest(\"/team-invitations?\" + new URLSearchParams({ team_id: options.teamId }), {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async revokeTeamInvitation(invitationId, teamId, session) {\n        await this.sendClientRequest(`/team-invitations/${invitationId}?team_id=${teamId}`, { method: \"DELETE\" }, session);\n    }\n    async listTeamMemberProfiles(options, session) {\n        const response = await this.sendClientRequest(\"/team-member-profiles?\" + new URLSearchParams((0,_utils_objects__WEBPACK_IMPORTED_MODULE_6__.filterUndefined)({\n            team_id: options.teamId,\n            user_id: options.userId,\n        })), {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async getTeamMemberProfile(options, session) {\n        const response = await this.sendClientRequest(`/team-member-profiles/${options.teamId}/${options.userId}`, {}, session);\n        return await response.json();\n    }\n    async leaveTeam(teamId, session) {\n        await this.sendClientRequest(`/team-memberships/${teamId}/me`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, session);\n    }\n    async updateTeamMemberProfile(options, session) {\n        await this.sendClientRequest(`/team-member-profiles/${options.teamId}/${options.userId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(options.profile),\n        }, session);\n    }\n    async updateTeam(options, session) {\n        await this.sendClientRequest(`/teams/${options.teamId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(options.data),\n        }, session);\n    }\n    async listCurrentUserTeamPermissions(options, session) {\n        const response = await this.sendClientRequest(`/team-permissions?team_id=${options.teamId}&user_id=me&recursive=${options.recursive}`, {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async listCurrentUserProjectPermissions(options, session) {\n        const response = await this.sendClientRequest(`/project-permissions?user_id=me&recursive=${options.recursive}`, {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async listCurrentUserTeams(session) {\n        const response = await this.sendClientRequest(\"/teams?user_id=me\", {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async getClientProject() {\n        const responseOrError = await this.sendClientRequestAndCatchKnownError(\"/projects/current\", {}, null, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.ProjectNotFound]);\n        if (responseOrError.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(responseOrError.error);\n        }\n        const response = responseOrError.data;\n        const project = await response.json();\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(project);\n    }\n    async updateClientUser(update, session) {\n        await this.sendClientRequest(\"/users/me\", {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(update),\n        }, session);\n    }\n    async listProjects(session) {\n        const response = await this.sendClientRequest(\"/internal/projects\", {}, session);\n        if (!response.ok) {\n            throw new Error(\"Failed to list projects: \" + response.status + \" \" + (await response.text()));\n        }\n        const json = await response.json();\n        return json.items;\n    }\n    async createProject(project, session) {\n        const fetchResponse = await this.sendClientRequest(\"/internal/projects\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(project),\n        }, session);\n        if (!fetchResponse.ok) {\n            throw new Error(\"Failed to create project: \" + fetchResponse.status + \" \" + (await fetchResponse.text()));\n        }\n        const json = await fetchResponse.json();\n        return json;\n    }\n    async createProviderAccessToken(provider, scope, session) {\n        const response = await this.sendClientRequest(`/connected-accounts/me/${provider}/access-token`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({ scope }),\n        }, session);\n        return await response.json();\n    }\n    async createClientTeam(data, session) {\n        const response = await this.sendClientRequest(\"/teams\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, session);\n        return await response.json();\n    }\n    async deleteTeam(teamId, session) {\n        await this.sendClientRequest(`/teams/${teamId}`, {\n            method: \"DELETE\",\n        }, session);\n    }\n    async deleteCurrentUser(session) {\n        await this.sendClientRequest(\"/users/me\", {\n            method: \"DELETE\",\n        }, session);\n    }\n    async createClientContactChannel(data, session) {\n        const response = await this.sendClientRequest(\"/contact-channels\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, session);\n        return await response.json();\n    }\n    async updateClientContactChannel(id, data, session) {\n        const response = await this.sendClientRequest(`/contact-channels/me/${id}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, session);\n        return await response.json();\n    }\n    async deleteClientContactChannel(id, session) {\n        await this.sendClientRequest(`/contact-channels/me/${id}`, {\n            method: \"DELETE\",\n        }, session);\n    }\n    async deleteSession(sessionId, session) {\n        await this.sendClientRequest(`/auth/sessions/${sessionId}?user_id=me`, {\n            method: \"DELETE\",\n        }, session);\n    }\n    async listSessions(session) {\n        const response = await this.sendClientRequest(\"/auth/sessions?user_id=me\", {\n            method: \"GET\",\n        }, session);\n        return await response.json();\n    }\n    async listClientContactChannels(session) {\n        const response = await this.sendClientRequest(\"/contact-channels?user_id=me\", {\n            method: \"GET\",\n        }, session);\n        const json = await response.json();\n        return json.items;\n    }\n    async sendCurrentUserContactChannelVerificationEmail(contactChannelId, callbackUrl, session) {\n        const responseOrError = await this.sendClientRequestAndCatchKnownError(`/contact-channels/me/${contactChannelId}/send-verification-code`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({ callback_url: callbackUrl }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.EmailAlreadyVerified]);\n        if (responseOrError.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(responseOrError.error);\n        }\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(undefined);\n    }\n    async cliLogin(loginCode, refreshToken, session) {\n        const responseOrError = await this.sendClientRequestAndCatchKnownError(\"/auth/cli/complete\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                login_code: loginCode,\n                refresh_token: refreshToken,\n            }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.SchemaError]);\n        if (responseOrError.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.error(responseOrError.error);\n        }\n        return _utils_results__WEBPACK_IMPORTED_MODULE_8__.Result.ok(undefined);\n    }\n    async _getApiKeyRequestInfo(options) {\n        if (\"user_id\" in options && \"team_id\" in options) {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Cannot specify both user_id and team_id in _getApiKeyRequestInfo\");\n        }\n        return {\n            endpoint: \"team_id\" in options ? \"/team-api-keys\" : \"/user-api-keys\",\n            queryParams: new URLSearchParams((0,_utils_objects__WEBPACK_IMPORTED_MODULE_6__.filterUndefinedOrNull)(options)),\n        };\n    }\n    async listProjectApiKeys(options, session, requestType) {\n        const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n        const { endpoint, queryParams } = await this._getApiKeyRequestInfo(options);\n        const response = await sendRequest(`${endpoint}?${queryParams.toString()}`, {\n            method: \"GET\",\n        }, session, requestType);\n        const json = await response.json();\n        return json.items;\n    }\n    async createProjectApiKey(data, session, requestType) {\n        const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n        const { endpoint } = await this._getApiKeyRequestInfo(data);\n        const response = await sendRequest(`${endpoint}`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, session, requestType);\n        return await response.json();\n    }\n    async getProjectApiKey(options, keyId, session, requestType) {\n        const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n        const { endpoint, queryParams } = await this._getApiKeyRequestInfo(options);\n        const response = await sendRequest(`${endpoint}/${keyId}?${queryParams.toString()}`, {\n            method: \"GET\",\n        }, session, requestType);\n        return await response.json();\n    }\n    async updateProjectApiKey(options, keyId, data, session, requestType) {\n        const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n        const { endpoint, queryParams } = await this._getApiKeyRequestInfo(options);\n        const response = await sendRequest(`${endpoint}/${keyId}?${queryParams.toString()}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, session, requestType);\n        return await response.json();\n    }\n    async checkProjectApiKey(type, apiKey, session, requestType) {\n        const sendRequest = (requestType === \"client\" ? this.sendClientRequestAndCatchKnownError : this.sendServerRequestAndCatchKnownError).bind(this);\n        const result = await sendRequest(`/${type}-api-keys/check`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({ api_key: apiKey }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.ApiKeyNotValid]);\n        if (result.status === \"error\") {\n            return null;\n        }\n        return await result.data.json();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9pbnRlcmZhY2UvY2xpZW50SW50ZXJmYWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzQztBQUNvQjtBQUNDO0FBQ0U7QUFDRztBQUNuQjtBQUNBO0FBQzZCO0FBQ2pDO0FBQ0M7QUFDRTtBQUNyQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsRUFBRTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFlBQVksRUFBRSxlQUFlLElBQUksaUJBQWlCO0FBQ3JGO0FBQ0EsU0FBUztBQUNUO0FBQ0EsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsWUFBWSxFQUFFLGVBQWUsSUFBSSxpQkFBaUI7QUFDckY7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFlBQVksRUFBRSxlQUFlLElBQUksaUJBQWlCO0FBQ3JGO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxZQUFZLEVBQUUsZUFBZSxJQUFJLGlCQUFpQjtBQUNyRjtBQUNBLFNBQVM7QUFDVDtBQUNBLGlDQUFpQyxxREFBUztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHdEQUFRO0FBQ2pDO0FBQ0E7QUFDQTs7QUFFQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1IsU0FBUyxjQUFjO0FBQ3ZCO0FBQ0E7QUFDQSxvQ0FBb0Msa0RBQU0sZ0JBQWdCLDRCQUE0QjtBQUN0RjtBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFTLGVBQWUscURBQVM7QUFDakQsd09BQXdPLDRCQUE0QjtBQUNwUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsa0RBQU07QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0YsbUVBQThCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxzREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsaUJBQWlCLEVBQUUsS0FBSztBQUM3RjtBQUNBLDZCQUE2QixzRUFBaUM7QUFDOUQsWUFBWSx3REFBbUI7QUFDL0I7QUFDQSxzQkFBc0IsOERBQW1CLGtCQUFrQixRQUFRO0FBQ25FO0FBQ0E7QUFDQSxzQkFBc0IsOERBQW1CO0FBQ3pDO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzREFBZTtBQUMzQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtEQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0VBQTRCLE1BQU07QUFDbEQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixJQUFJO0FBQ3RCO0FBQ0E7QUFDQSxrQkFBa0IsSUFBSTtBQUN0QjtBQUNBO0FBQ0Esa0JBQWtCLElBQUk7QUFDdEI7QUFDQTtBQUNBLGtCQUFrQixJQUFJO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MseUVBQTBCO0FBQ2xFO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdFQUE0QixNQUFNO0FBQ2xEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscURBQVk7QUFDaEMsMkJBQTJCLGtEQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHNEQUFXO0FBQ3pEO0FBQ0EsOEJBQThCLDhEQUFtQixrRUFBa0Usd0JBQXdCO0FBQzNJO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQU07QUFDN0I7QUFDQTtBQUNBO0FBQ0EsK0RBQStELHNEQUFXLDBEQUEwRCxzREFBVztBQUMvSTtBQUNBLDhCQUE4Qiw4REFBbUIsOEVBQThFLDZCQUE2QjtBQUM1SjtBQUNBO0FBQ0EsdUJBQXVCLGtEQUFNO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsSUFBSSxxQkFBcUIsWUFBWTtBQUMxRyxzQkFBc0IscURBQUk7QUFDMUIsdUJBQXVCLGtEQUFNLGlEQUFpRCxZQUFZO0FBQzFGO0FBQ0EsaUVBQWlFLElBQUk7QUFDckUsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw4REFBbUIsOEJBQThCLElBQUksSUFBSSxZQUFZLEVBQUUsTUFBTSxLQUFLLDRCQUE0QjtBQUMvSTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQU07QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw4REFBbUIsc0VBQXNFO0FBQ25IO0FBQ0EsMEJBQTBCLHFEQUFVO0FBQ3BDLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBLGVBQWUsa0RBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNULGtCQUFrQiw4REFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLFNBQVMsc0RBQVc7QUFDN0I7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxZQUFZLHNEQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxTQUFTLHNEQUFXO0FBQzdCO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLDhDQUE4Qyw2QkFBNkIsSUFBSTtBQUMvRSxhQUFhO0FBQ2IsU0FBUyxTQUFTLHNEQUFXO0FBQzdCO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsWUFBWSxzREFBVywrQkFBK0Isc0RBQVc7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUyxZQUFZLHNEQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsNEJBQTRCO0FBQzNFO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLFNBQVMsc0RBQVc7QUFDN0I7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBLGVBQWUsa0RBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUyxZQUFZLHNEQUFXO0FBQ2hDO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0EsZUFBZSxrREFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQSxlQUFlLGtEQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLG9CQUFvQixzREFBVztBQUN4QztBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsWUFBWSxzREFBVztBQUNoQztBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBO0FBQ0EsZUFBZSxrREFBTTtBQUNyQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLFlBQVksc0RBQVcsNkJBQTZCLHNEQUFXO0FBQ3hFO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQSxlQUFlLGtEQUFNO0FBQ3JCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBLGVBQWUsa0RBQU07QUFDckI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLFNBQVMsc0RBQVc7QUFDN0I7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBLGVBQWUsa0RBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVMsU0FBUyxzREFBVztBQUM3QjtBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBO0FBQ0EsZUFBZSxrREFBTTtBQUNyQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLCtEQUEwQjtBQUMvRixZQUFZLHdEQUFtQjtBQUMvQixzQkFBc0IsOERBQW1CLDRDQUE0QyxRQUFRLEdBQUc7QUFDaEc7QUFDQSwrQkFBK0Isd0VBQW1DO0FBQ2xFLDZCQUE2QixpRkFBNEM7QUFDekUsWUFBWSx3REFBbUI7QUFDL0I7QUFDQSwwQkFBMEIsc0RBQVc7QUFDckM7QUFDQTtBQUNBLHNCQUFzQiw4REFBbUIsMkRBQTJELFFBQVE7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx1REFBUTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsdUNBQXVDO0FBQ3ZDLGFBQWEsWUFBWSxzREFBVztBQUNwQztBQUNBLGdEQUFnRCxzREFBVztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw4REFBbUIsdUJBQXVCLHlCQUF5QjtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsWUFBWSxzREFBVztBQUNySDtBQUNBLGlEQUFpRCxzREFBVztBQUM1RDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQW1CLGdDQUFnQyw4QkFBOEI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBbUIsK0JBQStCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRyx5QkFBeUIsS0FBSztBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxhQUFhLFdBQVcsT0FBTyxLQUFLLGtCQUFrQjtBQUNoSDtBQUNBO0FBQ0EscUdBQXFHLCtEQUFlO0FBQ3BIO0FBQ0E7QUFDQSxTQUFTLE1BQU07QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSxlQUFlLEdBQUcsZUFBZSxLQUFLO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxPQUFPO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixtQ0FBbUM7QUFDbkMsU0FBUztBQUNUO0FBQ0E7QUFDQSw4REFBOEQsZUFBZSxHQUFHLGVBQWU7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwrQ0FBK0MsZUFBZTtBQUM5RDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG1GQUFtRixlQUFlLHdCQUF3QixrQkFBa0IsS0FBSztBQUNqSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRyxrQkFBa0IsS0FBSztBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRyxTQUFTLHNEQUFXO0FBQzFIO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0RBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw4RUFBOEU7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRixTQUFTO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixtQ0FBbUMsT0FBTztBQUMxQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLE9BQU87QUFDdEQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxHQUFHO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsR0FBRztBQUNoRTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsdURBQXVELFVBQVU7QUFDakU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVHQUF1RyxpQkFBaUI7QUFDeEg7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1DQUFtQywyQkFBMkI7QUFDOUQsU0FBUyxZQUFZLHNEQUFXO0FBQ2hDO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0EsZUFBZSxrREFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsWUFBWSxzREFBVztBQUNoQztBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBLGVBQWUsa0RBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFtQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMscUVBQXFCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdCQUF3QjtBQUN4Qyw4Q0FBOEMsU0FBUyxHQUFHLHVCQUF1QjtBQUNqRjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0IsOENBQThDLFNBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdCQUF3QjtBQUN4Qyw4Q0FBOEMsU0FBUyxHQUFHLE1BQU0sR0FBRyx1QkFBdUI7QUFDMUY7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0JBQXdCO0FBQ3hDLDhDQUE4QyxTQUFTLEdBQUcsTUFBTSxHQUFHLHVCQUF1QjtBQUMxRjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsS0FBSztBQUNsRDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DLGlCQUFpQjtBQUNwRCxTQUFTLFlBQVksc0RBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcaW50ZXJmYWNlXFxjbGllbnRJbnRlcmZhY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgb2F1dGggZnJvbSAnb2F1dGg0d2ViYXBpJztcbmltcG9ydCB7IEtub3duRXJyb3IsIEtub3duRXJyb3JzIH0gZnJvbSAnLi4va25vd24tZXJyb3JzJztcbmltcG9ydCB7IEFjY2Vzc1Rva2VuLCBJbnRlcm5hbFNlc3Npb24gfSBmcm9tICcuLi9zZXNzaW9ucyc7XG5pbXBvcnQgeyBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZyB9IGZyb20gJy4uL3V0aWxzL2NyeXB0byc7XG5pbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yLCB0aHJvd0VyciB9IGZyb20gJy4uL3V0aWxzL2Vycm9ycyc7XG5pbXBvcnQgeyBnbG9iYWxWYXIgfSBmcm9tICcuLi91dGlscy9nbG9iYWxzJztcbmltcG9ydCB7IEhUVFBfTUVUSE9EUyB9IGZyb20gJy4uL3V0aWxzL2h0dHAnO1xuaW1wb3J0IHsgZmlsdGVyVW5kZWZpbmVkLCBmaWx0ZXJVbmRlZmluZWRPck51bGwgfSBmcm9tICcuLi91dGlscy9vYmplY3RzJztcbmltcG9ydCB7IHdhaXQgfSBmcm9tICcuLi91dGlscy9wcm9taXNlcyc7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwiLi4vdXRpbHMvcmVzdWx0c1wiO1xuaW1wb3J0IHsgZGVpbmRlbnQgfSBmcm9tICcuLi91dGlscy9zdHJpbmdzJztcbmV4cG9ydCBjbGFzcyBTdGFja0NsaWVudEludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAvLyBub3RoaW5nIGhlcmVcbiAgICB9XG4gICAgZ2V0IHByb2plY3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5wcm9qZWN0SWQ7XG4gICAgfVxuICAgIGdldEFwaVVybCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5nZXRCYXNlVXJsKCkgKyBcIi9hcGkvdjFcIjtcbiAgICB9XG4gICAgYXN5bmMgcnVuTmV0d29ya0RpYWdub3N0aWNzKHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgICAgIGNvbnN0IHRyeVJlcXVlc3QgPSBhc3luYyAoY2IpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJPS1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjZlRyYWNlID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vMS4xLjEuMS9jZG4tY2dpL3RyYWNlXCIpO1xuICAgICAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH06ICR7YXdhaXQgcmVzLnRleHQoKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFwaVJvb3QgPSBzZXNzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdFR5cGUgIT09IHVuZGVmaW5lZCA/IGF3YWl0IHRyeVJlcXVlc3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdElubmVyKFwiL1wiLCB7fSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgICAgIHRocm93IHJlcy5lcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkgOiBcIk5vdCB0ZXN0ZWRcIjtcbiAgICAgICAgY29uc3QgYmFzZVVybEJhY2tlbmQgPSBhd2FpdCB0cnlSZXF1ZXN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKG5ldyBVUkwoXCIvaGVhbHRoXCIsIHRoaXMuZ2V0QXBpVXJsKCkpKTtcbiAgICAgICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9OiAke2F3YWl0IHJlcy50ZXh0KCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwcm9kRGFzaGJvYXJkID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYXBwLnN0YWNrLWF1dGguY29tL2hlYWx0aFwiKTtcbiAgICAgICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9OiAke2F3YWl0IHJlcy50ZXh0KCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwcm9kQmFja2VuZCA9IGF3YWl0IHRyeVJlcXVlc3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2FwaS5zdGFjay1hdXRoLmNvbS9oZWFsdGhcIik7XG4gICAgICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fTogJHthd2FpdCByZXMudGV4dCgpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwibmF2aWdhdG9yPy5vbkxpbmVcIjogZ2xvYmFsVmFyLm5hdmlnYXRvcj8ub25MaW5lLFxuICAgICAgICAgICAgY2ZUcmFjZSxcbiAgICAgICAgICAgIGFwaVJvb3QsXG4gICAgICAgICAgICBiYXNlVXJsQmFja2VuZCxcbiAgICAgICAgICAgIHByb2REYXNoYm9hcmQsXG4gICAgICAgICAgICBwcm9kQmFja2VuZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgX2NyZWF0ZU5ldHdvcmtFcnJvcihjYXVzZSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihkZWluZGVudCBgXG4gICAgICBTdGFjayBBdXRoIGlzIHVuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gYW5kIHRyeSBhZ2Fpbi5cbiAgICAgIFxuICAgICAgSWYgdGhlIHByb2JsZW0gcGVyc2lzdHMsIHBsZWFzZSBjb250YWN0IHN1cHBvcnQgYW5kIHByb3ZpZGUgYSBzY3JlZW5zaG90IG9mIHlvdXIgZW50aXJlIGJyb3dzZXIgY29uc29sZS5cblxuICAgICAgJHtjYXVzZX1cbiAgICAgIFxuICAgICAgJHtKU09OLnN0cmluZ2lmeShhd2FpdCB0aGlzLnJ1bk5ldHdvcmtEaWFnbm9zdGljcyhzZXNzaW9uLCByZXF1ZXN0VHlwZSksIG51bGwsIDIpfVxuICAgIGAsIHsgY2F1c2U6IGNhdXNlIH0pO1xuICAgIH1cbiAgICBhc3luYyBfbmV0d29ya1JldHJ5KGNiLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgICAgICBjb25zdCByZXRyaWVkUmVzdWx0ID0gYXdhaXQgUmVzdWx0LnJldHJ5KGNiLCA1LCB7IGV4cG9uZW50aWFsRGVsYXlCYXNlOiAxMDAwIH0pO1xuICAgICAgICAvLyB0cnkgdG8gZGlhZ25vc2UgdGhlIGVycm9yIGZvciB0aGUgdXNlclxuICAgICAgICBpZiAocmV0cmllZFJlc3VsdC5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgaWYgKGdsb2JhbFZhci5uYXZpZ2F0b3IgJiYgIWdsb2JhbFZhci5uYXZpZ2F0b3Iub25MaW5lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHNlbmQgU3RhY2sgbmV0d29yayByZXF1ZXN0LiBJdCBzZWVtcyBsaWtlIHlvdSBhcmUgb2ZmbGluZSwgcGxlYXNlIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbiBhbmQgdHJ5IGFnYWluLiBUaGlzIGlzIG5vdCBhbiBlcnJvciB3aXRoIFN0YWNrIEF1dGguICh3aW5kb3cubmF2aWdhdG9yLm9uTGluZSBpcyBmYWxzeSlcIiwgeyBjYXVzZTogcmV0cmllZFJlc3VsdC5lcnJvciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGF3YWl0IHRoaXMuX2NyZWF0ZU5ldHdvcmtFcnJvcihyZXRyaWVkUmVzdWx0LmVycm9yLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldHJpZWRSZXN1bHQuZGF0YTtcbiAgICB9XG4gICAgYXN5bmMgX25ldHdvcmtSZXRyeUV4Y2VwdGlvbihjYiwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX25ldHdvcmtSZXRyeShhc3luYyAoKSA9PiBhd2FpdCBSZXN1bHQuZnJvbVRocm93aW5nQXN5bmMoY2IpLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSk7XG4gICAgfVxuICAgIGFzeW5jIGZldGNoTmV3QWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuKSB7XG4gICAgICAgIGlmICghKCdwdWJsaXNoYWJsZUNsaWVudEtleScgaW4gdGhpcy5vcHRpb25zKSkge1xuICAgICAgICAgICAgLy8gVE9ETyBzdXBwb3J0IGl0XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZG1pbiBzZXNzaW9uIHRva2VuIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGZvciBmZXRjaGluZyBuZXcgYWNjZXNzIHRva2VuLiBEaWQgeW91IHRyeSB0byBsb2cgaW4gb24gYSBTdGFja0FwcCBpbml0aWF0ZWQgd2l0aCB0aGUgYWRtaW4gc2Vzc2lvbj9cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXMgPSB7XG4gICAgICAgICAgICBpc3N1ZXI6IHRoaXMub3B0aW9ucy5nZXRCYXNlVXJsKCksXG4gICAgICAgICAgICBhbGdvcml0aG06ICdvYXV0aDInLFxuICAgICAgICAgICAgdG9rZW5fZW5kcG9pbnQ6IHRoaXMuZ2V0QXBpVXJsKCkgKyAnL2F1dGgvb2F1dGgvdG9rZW4nLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjbGllbnQgPSB7XG4gICAgICAgICAgICBjbGllbnRfaWQ6IHRoaXMucHJvamVjdElkLFxuICAgICAgICAgICAgY2xpZW50X3NlY3JldDogdGhpcy5vcHRpb25zLnB1Ymxpc2hhYmxlQ2xpZW50S2V5LFxuICAgICAgICAgICAgdG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2Q6ICdjbGllbnRfc2VjcmV0X3Bvc3QnLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByYXdSZXNwb25zZSA9IGF3YWl0IHRoaXMuX25ldHdvcmtSZXRyeUV4Y2VwdGlvbihhc3luYyAoKSA9PiBhd2FpdCBvYXV0aC5yZWZyZXNoVG9rZW5HcmFudFJlcXVlc3QoYXMsIGNsaWVudCwgcmVmcmVzaFRva2VuLnRva2VuKSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKHJhd1Jlc3BvbnNlKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgS25vd25FcnJvcnMuUmVmcmVzaFRva2VuRXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVzcG9uc2UuZGF0YS5vaykge1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3BvbnNlLmRhdGEudGV4dCgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2VuZCByZWZyZXNoIHRva2VuIHJlcXVlc3Q6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke2JvZHl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb2F1dGgucHJvY2Vzc1JlZnJlc2hUb2tlblJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICBpZiAob2F1dGguaXNPQXV0aDJFcnJvcihyZXN1bHQpKSB7XG4gICAgICAgICAgICAvLyBUT0RPIEhhbmRsZSBPQXV0aCAyLjAgcmVzcG9uc2UgYm9keSBlcnJvclxuICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJPQXV0aCBlcnJvclwiLCB7IHJlc3VsdCB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc3VsdC5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiQWNjZXNzIHRva2VuIG5vdCBmb3VuZCBpbiB0b2tlbiBlbmRwb2ludCByZXNwb25zZSwgdGhpcyBpcyB3ZWlyZCFcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBBY2Nlc3NUb2tlbihyZXN1bHQuYWNjZXNzX3Rva2VuKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZENsaWVudFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlID0gXCJjbGllbnRcIikge1xuICAgICAgICBzZXNzaW9uID8/PSB0aGlzLmNyZWF0ZVNlc3Npb24oe1xuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX25ldHdvcmtSZXRyeSgoKSA9PiB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0SW5uZXIocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlKSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICAgIH1cbiAgICBjcmVhdGVTZXNzaW9uKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBJbnRlcm5hbFNlc3Npb24oe1xuICAgICAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuQ2FsbGJhY2s6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IGF3YWl0IHRoaXMuZmV0Y2hOZXdBY2Nlc3NUb2tlbihyZWZyZXNoVG9rZW4pLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH1cbiAgICBhc3luYyBzZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCwgZXJyb3JzVG9DYXRjaCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zLCB0b2tlblN0b3JlT3JOdWxsKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXJyb3JUeXBlIG9mIGVycm9yc1RvQ2F0Y2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIGVycm9yVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2VuZENsaWVudFJlcXVlc3RJbm5lcihwYXRoLCBvcHRpb25zLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogYHRva2VuT2JqID09PSBudWxsYCBtZWFucyB0aGUgc2Vzc2lvbiBpcyBpbnZhbGlkL25vdCBsb2dnZWQgaW5cbiAgICAgICAgICovXG4gICAgICAgIGxldCB0b2tlbk9iaiA9IGF3YWl0IHNlc3Npb24uZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zKDIwMDAwKTtcbiAgICAgICAgbGV0IGFkbWluU2Vzc2lvbiA9IFwicHJvamVjdE93bmVyU2Vzc2lvblwiIGluIHRoaXMub3B0aW9ucyA/IHRoaXMub3B0aW9ucy5wcm9qZWN0T3duZXJTZXNzaW9uIDogbnVsbDtcbiAgICAgICAgbGV0IGFkbWluVG9rZW5PYmogPSBhZG1pblNlc3Npb24gPyBhd2FpdCBhZG1pblNlc3Npb24uZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zKDIwMDAwKSA6IG51bGw7XG4gICAgICAgIC8vIGFsbCByZXF1ZXN0cyBzaG91bGQgYmUgZHluYW1pYyB0byBwcmV2ZW50IE5leHQuanMgY2FjaGluZ1xuICAgICAgICBhd2FpdCB0aGlzLm9wdGlvbnMucHJlcGFyZVJlcXVlc3Q/LigpO1xuICAgICAgICBsZXQgdXJsID0gdGhpcy5nZXRBcGlVcmwoKSArIHBhdGg7XG4gICAgICAgIGlmICh1cmwuZW5kc1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgLTEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhpcyBmZXRjaCBtYXkgYmUgY3Jvc3Mtb3JpZ2luLCBpbiB3aGljaCBjYXNlIHdlIGRvbid0IHdhbnQgdG8gc2VuZCBjb29raWVzIG9mIHRoZVxuICAgICAgICAgICAgICogb3JpZ2luYWwgb3JpZ2luICh0aGlzIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIGBjcmVkZW50aWFsc2ApLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRvIGhlbHAgZGVidWdnaW5nLCBhbHNvIG9taXQgY29va2llcyBvbiBzYW1lLW9yaWdpbiwgc28gd2UgZG9uJ3QgYWNjaWRlbnRhbGx5XG4gICAgICAgICAgICAgKiBpbXBsZW1lbnQgcmVsaWFuY2Ugb24gY29va2llcyBhbnl3aGVyZS5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBIb3dldmVyLCBDbG91ZGZsYXJlIFdvcmtlcnMgZG9uJ3QgYWN0dWFsbHkgc3VwcG9ydCBgY3JlZGVudGlhbHNgLCBzbyB3ZSBvbmx5IHNldCBpdFxuICAgICAgICAgICAgICogaWYgQ2xvdWRmbGFyZS1leGNsdXNpdmUgZ2xvYmFscyBhcmUgbm90IGRldGVjdGVkLiBodHRwczovL2dpdGh1Yi5jb20vY2xvdWRmbGFyZS93b3JrZXJzLXNkay9pc3N1ZXMvMjUxNFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAuLi4oXCJXZWJTb2NrZXRQYWlyXCIgaW4gZ2xvYmFsVmFyID8ge30gOiB7XG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwib21pdFwiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiWC1TdGFjay1PdmVycmlkZS1FcnJvci1TdGF0dXNcIjogXCJ0cnVlXCIsXG4gICAgICAgICAgICAgICAgXCJYLVN0YWNrLVByb2plY3QtSWRcIjogdGhpcy5wcm9qZWN0SWQsXG4gICAgICAgICAgICAgICAgXCJYLVN0YWNrLUFjY2Vzcy1UeXBlXCI6IHJlcXVlc3RUeXBlLFxuICAgICAgICAgICAgICAgIFwiWC1TdGFjay1DbGllbnQtVmVyc2lvblwiOiB0aGlzLm9wdGlvbnMuY2xpZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICAuLi4odG9rZW5PYmogPyB7XG4gICAgICAgICAgICAgICAgICAgIFwiWC1TdGFjay1BY2Nlc3MtVG9rZW5cIjogdG9rZW5PYmouYWNjZXNzVG9rZW4udG9rZW4sXG4gICAgICAgICAgICAgICAgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAuLi4odG9rZW5PYmo/LnJlZnJlc2hUb2tlbiA/IHtcbiAgICAgICAgICAgICAgICAgICAgXCJYLVN0YWNrLVJlZnJlc2gtVG9rZW5cIjogdG9rZW5PYmoucmVmcmVzaFRva2VuLnRva2VuLFxuICAgICAgICAgICAgICAgIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgLi4uKCdwdWJsaXNoYWJsZUNsaWVudEtleScgaW4gdGhpcy5vcHRpb25zID8ge1xuICAgICAgICAgICAgICAgICAgICBcIlgtU3RhY2stUHVibGlzaGFibGUtQ2xpZW50LUtleVwiOiB0aGlzLm9wdGlvbnMucHVibGlzaGFibGVDbGllbnRLZXksXG4gICAgICAgICAgICAgICAgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAuLi4oYWRtaW5Ub2tlbk9iaiA/IHtcbiAgICAgICAgICAgICAgICAgICAgXCJYLVN0YWNrLUFkbWluLUFjY2Vzcy1Ub2tlblwiOiBhZG1pblRva2VuT2JqLmFjY2Vzc1Rva2VuLnRva2VuLFxuICAgICAgICAgICAgICAgIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTmV4dC5qcyB1bnRpbCB2MTUgd291bGQgY2FjaGUgZmV0Y2ggcmVxdWVzdHMgYnkgZGVmYXVsdCwgYW5kIGZvcmNlZnVsbHkgZGlzYWJsaW5nIGl0IHdhcyBuZWFybHkgaW1wb3NzaWJsZS5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIFRoaXMgaGVhZGVyIGlzIHVzZWQgdG8gY2hhbmdlIHRoZSBjYWNoZSBrZXkgYW5kIGhlbmNlIGFsd2F5cyBkaXNhYmxlIGl0LCBiZWNhdXNlIHdlIGRvIG91ciBvd24gY2FjaGluZy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIFdoZW4gd2UgZHJvcCBzdXBwb3J0IGZvciBOZXh0LmpzIDwxNSwgd2UgbWF5IGJlIGFibGUgdG8gcmVtb3ZlIHRoaXMgaGVhZGVyLCBidXQgcGxlYXNlIG1ha2Ugc3VyZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgKiB0aGUgY2FzZSAoSSBoYXZlbid0IGFjdHVhbGx5IHRlc3RlZC4pXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgXCJYLVN0YWNrLVJhbmRvbS1Ob25jZVwiOiBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZygpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucy5leHRyYVJlcXVlc3RIZWFkZXJzLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENsb3VkZmxhcmUgV29ya2VycyBkb2VzIG5vdCBzdXBwb3J0IGNhY2hlLCBzbyBkb24ndCBwYXNzIGl0IHRoZXJlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIC4uLihcIldlYlNvY2tldFBhaXJcIiBpbiBnbG9iYWxWYXIgPyB7fSA6IHtcbiAgICAgICAgICAgICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgICAgIGxldCByYXdSZXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByYXdSZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgVHlwZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gTGlrZWx5IHRvIGJlIGEgbmV0d29yayBlcnJvci4gUmV0cnkgaWYgdGhlIHJlcXVlc3QgaXMgaWRlbXBvdGVudCwgdGhyb3cgbmV0d29yayBlcnJvciBvdGhlcndpc2UuXG4gICAgICAgICAgICAgICAgaWYgKEhUVFBfTUVUSE9EU1socGFyYW1zLm1ldGhvZCA/PyBcIkdFVFwiKV0uaWRlbXBvdGVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgYXdhaXQgdGhpcy5fY3JlYXRlTmV0d29ya0Vycm9yKGUsIHNlc3Npb24sIHJlcXVlc3RUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlcyA9IGF3YWl0IHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyYXdSZXMpO1xuICAgICAgICBpZiAocHJvY2Vzc2VkUmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgYWNjZXNzIHRva2VuIGlzIGludmFsaWQsIHJlc2V0IGl0IGFuZCByZXRyeVxuICAgICAgICAgICAgaWYgKHByb2Nlc3NlZFJlcy5lcnJvciBpbnN0YW5jZW9mIEtub3duRXJyb3JzLkludmFsaWRBY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgICAgIGlmICghdG9rZW5PYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJSZWNlaXZlZCBpbnZhbGlkIGFjY2VzcyB0b2tlbiwgYnV0IHNlc3Npb24gaXMgbm90IGxvZ2dlZCBpblwiLCB7IHRva2VuT2JqLCBwcm9jZXNzZWRSZXMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlc3Npb24ubWFya0FjY2Vzc1Rva2VuRXhwaXJlZCh0b2tlbk9iai5hY2Nlc3NUb2tlbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihwcm9jZXNzZWRSZXMuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2FtZSBmb3IgdGhlIGFkbWluIGFjY2VzcyB0b2tlblxuICAgICAgICAgICAgLy8gVE9ETyBIQUNLOiBTb21lIG9mIHRoZSBiYWNrZW5kIGhhc24ndCBiZWVuIHBvcnRlZCB0byB1c2UgdGhlIG5ldyBlcnJvciBjb2Rlcywgc28gaWYgd2UgaGF2ZSBwcm9qZWN0IG93bmVyIHRva2VucyB3ZSBuZWVkIHRvIGNoZWNrIGZvciBBcGlLZXlOb3RGb3VuZCB0b28uIE9uY2UgdGhlIG1pZ3JhdGlvbiB0byBzbWFydFJvdXRlSGFuZGxlcnMgaXMgY29tcGxldGUsIHdlIGNhbiBjaGVjayBmb3IgSW52YWxpZEFkbWluQWNjZXNzVG9rZW4gb25seS5cbiAgICAgICAgICAgIGlmIChhZG1pblNlc3Npb24gJiYgKHByb2Nlc3NlZFJlcy5lcnJvciBpbnN0YW5jZW9mIEtub3duRXJyb3JzLkludmFsaWRBZG1pbkFjY2Vzc1Rva2VuIHx8IHByb2Nlc3NlZFJlcy5lcnJvciBpbnN0YW5jZW9mIEtub3duRXJyb3JzLkFwaUtleU5vdEZvdW5kKSkge1xuICAgICAgICAgICAgICAgIGlmICghYWRtaW5Ub2tlbk9iaikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlJlY2VpdmVkIGludmFsaWQgYWRtaW4gYWNjZXNzIHRva2VuLCBidXQgYWRtaW4gc2Vzc2lvbiBpcyBub3QgbG9nZ2VkIGluXCIsIHsgYWRtaW5Ub2tlbk9iaiwgcHJvY2Vzc2VkUmVzIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZG1pblNlc3Npb24ubWFya0FjY2Vzc1Rva2VuRXhwaXJlZChhZG1pblRva2VuT2JqLmFjY2Vzc1Rva2VuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHByb2Nlc3NlZFJlcy5lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBLbm93biBlcnJvcnMgYXJlIGNsaWVudCBzaWRlIGVycm9ycywgc28gZXhjZXB0IGZvciB0aGUgb25lcyBhYm92ZSB0aGV5IHNob3VsZCBub3QgYmUgcmV0cmllZFxuICAgICAgICAgICAgLy8gSGVuY2UsIHRocm93IGluc3RlYWQgb2YgcmV0dXJuaW5nIGFuIGVycm9yXG4gICAgICAgICAgICB0aHJvdyBwcm9jZXNzZWRSZXMuZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzID0gT2JqZWN0LmFzc2lnbihwcm9jZXNzZWRSZXMuZGF0YSwge1xuICAgICAgICAgICAgdXNlZFRva2VuczogdG9rZW5PYmosXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzdWx0Lm9rKHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVzLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgICAgICAvLyBSYXRlIGxpbWl0ZWQsIHNvIHJldHJ5IGlmIHdlIGNhblxuICAgICAgICAgICAgY29uc3QgcmV0cnlBZnRlciA9IHJlcy5oZWFkZXJzLmdldChcIlJldHJ5LUFmdGVyXCIpO1xuICAgICAgICAgICAgaWYgKHJldHJ5QWZ0ZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUmF0ZSBsaW1pdGVkIHdoaWxlIHNlbmRpbmcgcmVxdWVzdCB0byAke3VybH0uIFdpbGwgcmV0cnkgYWZ0ZXIgJHtyZXRyeUFmdGVyfSBzZWNvbmRzLi4uYCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgd2FpdChOdW1iZXIocmV0cnlBZnRlcikgKiAxMDAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKG5ldyBFcnJvcihgUmF0ZSBsaW1pdGVkLCByZXRyeWluZyBhZnRlciAke3JldHJ5QWZ0ZXJ9IHNlY29uZHNgKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUmF0ZSBsaW1pdGVkIHdoaWxlIHNlbmRpbmcgcmVxdWVzdCB0byAke3VybH0sIG5vIHJldHJ5LWFmdGVyIGhlYWRlciByZWNlaXZlZC4gUmV0cnlpbmcuLi5gKTtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IobmV3IEVycm9yKFwiUmF0ZSBsaW1pdGVkLCBubyByZXRyeS1hZnRlciBoZWFkZXIgcmVjZWl2ZWRcIikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JPYmogPSBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgRmFpbGVkIHRvIHNlbmQgcmVxdWVzdCB0byAke3VybH06ICR7cmVzLnN0YXR1c30gJHtlcnJvcn1gLCB7IHJlcXVlc3Q6IHBhcmFtcywgcmVzLCBwYXRoIH0pO1xuICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDUwOCAmJiBlcnJvci5pbmNsdWRlcyhcIklORklOSVRFX0xPT1BfREVURUNURURcIikpIHtcbiAgICAgICAgICAgICAgICAvLyBTb21lIFZlcmNlbCBkZXBsb3ltZW50cyBzZWVtIHRvIGhhdmUgYW4gb2RkIGluZmluaXRlIGxvb3AgYnVnLiBJbiB0aGF0IGNhc2UsIHJldHJ5LlxuICAgICAgICAgICAgICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL3N0YWNrLWF1dGgvc3RhY2stYXV0aC9pc3N1ZXMvMzE5XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihlcnJvck9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnksIHRocm93IGVycm9yIGluc3RlYWQgb2YgcmV0dXJuaW5nIG9uZVxuICAgICAgICAgICAgdGhyb3cgZXJyb3JPYmo7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgX3Byb2Nlc3NSZXNwb25zZShyYXdSZXMpIHtcbiAgICAgICAgbGV0IHJlcyA9IHJhd1JlcztcbiAgICAgICAgaWYgKHJhd1Jlcy5oZWFkZXJzLmhhcyhcIngtc3RhY2stYWN0dWFsLXN0YXR1c1wiKSkge1xuICAgICAgICAgICAgY29uc3QgYWN0dWFsU3RhdHVzID0gTnVtYmVyKHJhd1Jlcy5oZWFkZXJzLmdldChcIngtc3RhY2stYWN0dWFsLXN0YXR1c1wiKSk7XG4gICAgICAgICAgICByZXMgPSBuZXcgUmVzcG9uc2UocmF3UmVzLmJvZHksIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGFjdHVhbFN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiByYXdSZXMuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiByYXdSZXMuaGVhZGVycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEhhbmRsZSBrbm93biBlcnJvcnNcbiAgICAgICAgaWYgKHJlcy5oZWFkZXJzLmhhcyhcIngtc3RhY2sta25vd24tZXJyb3JcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9ySnNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICBpZiAocmVzLmhlYWRlcnMuZ2V0KFwieC1zdGFjay1rbm93bi1lcnJvclwiKSAhPT0gZXJyb3JKc29uLmNvZGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIk1pc21hdGNoIGJldHdlZW4geC1zdGFjay1rbm93bi1lcnJvciBoZWFkZXIgYW5kIGVycm9yIGNvZGUgaW4gYm9keTsgdGhlIHNlcnZlcidzIHJlc3BvbnNlIGlzIGludmFsaWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IEtub3duRXJyb3IuZnJvbUpzb24oZXJyb3JKc29uKTtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZXN1bHQub2socmVzKTtcbiAgICB9XG4gICAgYXN5bmMgY2hlY2tGZWF0dXJlU3VwcG9ydChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvY2hlY2stZmVhdHVyZS1zdXBwb3J0XCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucyksXG4gICAgICAgIH0sIG51bGwpO1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihhd2FpdCByZXMudGV4dCgpKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZEZvcmdvdFBhc3N3b3JkRW1haWwoZW1haWwsIGNhbGxiYWNrVXJsKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9wYXNzd29yZC9zZW5kLXJlc2V0LWNvZGVcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICBjYWxsYmFja191cmw6IGNhbGxiYWNrVXJsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIG51bGwsIFtLbm93bkVycm9ycy5Vc2VyTm90Rm91bmRdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNlbmRWZXJpZmljYXRpb25FbWFpbChlbWFpbCwgY2FsbGJhY2tVcmwsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcIi9jb250YWN0LWNoYW5uZWxzL3NlbmQtdmVyaWZpY2F0aW9uLWNvZGVcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICBjYWxsYmFja191cmw6IGNhbGxiYWNrVXJsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIHNlc3Npb24sIFtLbm93bkVycm9ycy5FbWFpbEFscmVhZHlWZXJpZmllZF0pO1xuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNlbmRNYWdpY0xpbmtFbWFpbChlbWFpbCwgY2FsbGJhY2tVcmwpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcIi9hdXRoL290cC9zZW5kLXNpZ24taW4tY29kZVwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrX3VybDogY2FsbGJhY2tVcmwsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSwgbnVsbCwgW0tub3duRXJyb3JzLlJlZGlyZWN0VXJsTm90V2hpdGVsaXN0ZWRdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCByZXMuZGF0YS5qc29uKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHJlc2V0UGFzc3dvcmQob3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwib25seVZlcmlmeUNvZGVcIiBpbiBvcHRpb25zID8gXCIvYXV0aC9wYXNzd29yZC9yZXNldC9jaGVjay1jb2RlXCIgOiBcIi9hdXRoL3Bhc3N3b3JkL3Jlc2V0XCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY29kZTogb3B0aW9ucy5jb2RlLFxuICAgICAgICAgICAgICAgIC4uLihcInBhc3N3b3JkXCIgaW4gb3B0aW9ucyA/IHsgcGFzc3dvcmQ6IG9wdGlvbnMucGFzc3dvcmQgfSA6IHt9KSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBudWxsLCBbS25vd25FcnJvcnMuVmVyaWZpY2F0aW9uQ29kZUVycm9yXSk7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQub2sodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQYXNzd29yZChvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9wYXNzd29yZC91cGRhdGVcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBvbGRfcGFzc3dvcmQ6IG9wdGlvbnMub2xkUGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgbmV3X3Bhc3N3b3JkOiBvcHRpb25zLm5ld1Bhc3N3b3JkLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIHNlc3Npb24sIFtLbm93bkVycm9ycy5QYXNzd29yZENvbmZpcm1hdGlvbk1pc21hdGNoLCBLbm93bkVycm9ycy5QYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldF0pO1xuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNldFBhc3N3b3JkKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcIi9hdXRoL3Bhc3N3b3JkL3NldFwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucyksXG4gICAgICAgIH0sIHNlc3Npb24sIFtLbm93bkVycm9ycy5QYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldF0pO1xuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlKGNvZGUpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXNldFBhc3N3b3JkKHsgY29kZSwgb25seVZlcmlmeUNvZGU6IHRydWUgfSk7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQub2sodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB2ZXJpZnlFbWFpbChjb2RlKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvY29udGFjdC1jaGFubmVscy92ZXJpZnlcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIG51bGwsIFtLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3JdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYXRlUGFzc2tleVJlZ2lzdHJhdGlvbihvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9wYXNza2V5L2luaXRpYXRlLXBhc3NrZXktcmVnaXN0cmF0aW9uXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKSxcbiAgICAgICAgfSwgc2Vzc2lvbiwgW10pO1xuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCByZXMuZGF0YS5qc29uKCkpO1xuICAgIH1cbiAgICBhc3luYyByZWdpc3RlclBhc3NrZXkob3B0aW9ucywgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL2F1dGgvcGFzc2tleS9yZWdpc3RlclwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucyksXG4gICAgICAgIH0sIHNlc3Npb24sIFtLbm93bkVycm9ycy5QYXNza2V5UmVnaXN0cmF0aW9uRmFpbGVkXSk7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVzdWx0Lm9rKHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYXRlUGFzc2tleUF1dGhlbnRpY2F0aW9uKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcIi9hdXRoL3Bhc3NrZXkvaW5pdGlhdGUtcGFzc2tleS1hdXRoZW50aWNhdGlvblwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucyksXG4gICAgICAgIH0sIHNlc3Npb24sIFtdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgcmVzLmRhdGEuanNvbigpKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZFRlYW1JbnZpdGF0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi90ZWFtLWludml0YXRpb25zL3NlbmQtY29kZVwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVtYWlsOiBvcHRpb25zLmVtYWlsLFxuICAgICAgICAgICAgICAgIHRlYW1faWQ6IG9wdGlvbnMudGVhbUlkLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrX3VybDogb3B0aW9ucy5jYWxsYmFja1VybCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBvcHRpb25zLnNlc3Npb24pO1xuICAgIH1cbiAgICBhc3luYyBhY2NlcHRUZWFtSW52aXRhdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3Iob3B0aW9ucy50eXBlID09PSAnY2hlY2snID9cbiAgICAgICAgICAgIFwiL3RlYW0taW52aXRhdGlvbnMvYWNjZXB0L2NoZWNrLWNvZGVcIiA6XG4gICAgICAgICAgICBvcHRpb25zLnR5cGUgPT09ICdkZXRhaWxzJyA/XG4gICAgICAgICAgICAgICAgXCIvdGVhbS1pbnZpdGF0aW9ucy9hY2NlcHQvZGV0YWlsc1wiIDpcbiAgICAgICAgICAgICAgICBcIi90ZWFtLWludml0YXRpb25zL2FjY2VwdFwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGNvZGU6IG9wdGlvbnMuY29kZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBvcHRpb25zLnNlc3Npb24sIFtLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3JdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCByZXMuZGF0YS5qc29uKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHRvdHBNZmEoYXR0ZW1wdENvZGUsIHRvdHAsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi9hdXRoL21mYS9zaWduLWluXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY29kZTogYXR0ZW1wdENvZGUsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0b3RwXCIsXG4gICAgICAgICAgICAgICAgdG90cDogdG90cCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbixcbiAgICAgICAgICAgIG5ld1VzZXI6IHJlc3VsdC5pc19uZXdfdXNlcixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgc2lnbkluV2l0aENyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9wYXNzd29yZC9zaWduLWluXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSwgc2Vzc2lvbiwgW0tub3duRXJyb3JzLkVtYWlsUGFzc3dvcmRNaXNtYXRjaF0pO1xuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzLmRhdGEuanNvbigpO1xuICAgICAgICByZXR1cm4gUmVzdWx0Lm9rKHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHNpZ25VcFdpdGhDcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCwgZW1haWxWZXJpZmljYXRpb25SZWRpcmVjdFVybCwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL2F1dGgvcGFzc3dvcmQvc2lnbi11cFwiLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkLFxuICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9jYWxsYmFja191cmw6IGVtYWlsVmVyaWZpY2F0aW9uUmVkaXJlY3RVcmwsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSwgc2Vzc2lvbiwgW0tub3duRXJyb3JzLlVzZXJXaXRoRW1haWxBbHJlYWR5RXhpc3RzLCBLbm93bkVycm9ycy5QYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldF0pO1xuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzLmRhdGEuanNvbigpO1xuICAgICAgICByZXR1cm4gUmVzdWx0Lm9rKHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHNpZ25VcEFub255bW91c2x5KHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcIi9hdXRoL2Fub255bW91cy9zaWduLXVwXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIH0sIHNlc3Npb24sIFtdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5kYXRhLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vayh7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnJlZnJlc2hfdG9rZW4sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzaWduSW5XaXRoTWFnaWNMaW5rKGNvZGUpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcIi9hdXRoL290cC9zaWduLWluXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBudWxsLCBbS25vd25FcnJvcnMuVmVyaWZpY2F0aW9uQ29kZUVycm9yXSk7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXMuZGF0YS5qc29uKCk7XG4gICAgICAgIHJldHVybiBSZXN1bHQub2soe1xuICAgICAgICAgICAgYWNjZXNzVG9rZW46IHJlc3VsdC5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlc3VsdC5yZWZyZXNoX3Rva2VuLFxuICAgICAgICAgICAgbmV3VXNlcjogcmVzdWx0LmlzX25ld191c2VyLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc2lnbkluV2l0aFBhc3NrZXkoYm9keSkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL2F1dGgvcGFzc2tleS9zaWduLWluXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgfSwgbnVsbCwgW0tub3duRXJyb3JzLlBhc3NrZXlBdXRoZW50aWNhdGlvbkZhaWxlZF0pO1xuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzLmRhdGEuanNvbigpO1xuICAgICAgICByZXR1cm4gUmVzdWx0Lm9rKHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGdldE9BdXRoVXJsKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdXBkYXRlZFJlZGlyZWN0VXJsID0gbmV3IFVSTChvcHRpb25zLnJlZGlyZWN0VXJsKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgW1wiY29kZVwiLCBcInN0YXRlXCJdKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlZFJlZGlyZWN0VXJsLnNlYXJjaFBhcmFtcy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlJlZGlyZWN0IFVSTCBhbHJlYWR5IGNvbnRhaW5zIFwiICsga2V5ICsgXCIgcGFyYW1ldGVyLCByZW1vdmluZyBpdCBhcyBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBPQXV0aCBjYWxsYmFja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZWRSZWRpcmVjdFVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoJ3B1Ymxpc2hhYmxlQ2xpZW50S2V5JyBpbiB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICAgICAgICAvLyBUT0RPIGZpeFxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWRtaW4gc2Vzc2lvbiB0b2tlbiBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCBmb3IgT0F1dGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLmdldEFwaVVybCgpICsgXCIvYXV0aC9vYXV0aC9hdXRob3JpemUvXCIgKyBvcHRpb25zLnByb3ZpZGVyLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNsaWVudF9pZFwiLCB0aGlzLnByb2plY3RJZCk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2xpZW50X3NlY3JldFwiLCB0aGlzLm9wdGlvbnMucHVibGlzaGFibGVDbGllbnRLZXkpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlZGlyZWN0X3VyaVwiLCB1cGRhdGVkUmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic2NvcGVcIiwgXCJsZWdhY3lcIik7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic3RhdGVcIiwgb3B0aW9ucy5zdGF0ZSk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiZ3JhbnRfdHlwZVwiLCBcImF1dGhvcml6YXRpb25fY29kZVwiKTtcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZVwiLCBvcHRpb25zLmNvZGVDaGFsbGVuZ2UpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNvZGVfY2hhbGxlbmdlX21ldGhvZFwiLCBcIlMyNTZcIik7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicmVzcG9uc2VfdHlwZVwiLCBcImNvZGVcIik7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwidHlwZVwiLCBvcHRpb25zLnR5cGUpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImVycm9yX3JlZGlyZWN0X3VybFwiLCBvcHRpb25zLmVycm9yUmVkaXJlY3RVcmwpO1xuICAgICAgICBpZiAob3B0aW9ucy5hZnRlckNhbGxiYWNrUmVkaXJlY3RVcmwpIHtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiYWZ0ZXJfY2FsbGJhY2tfcmVkaXJlY3RfdXJsXCIsIG9wdGlvbnMuYWZ0ZXJDYWxsYmFja1JlZGlyZWN0VXJsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50eXBlID09PSBcImxpbmtcIikge1xuICAgICAgICAgICAgY29uc3QgdG9rZW5zID0gYXdhaXQgb3B0aW9ucy5zZXNzaW9uLmdldE9yRmV0Y2hMaWtlbHlWYWxpZFRva2VucygyMDAwMCk7XG4gICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInRva2VuXCIsIHRva2Vucz8uYWNjZXNzVG9rZW4udG9rZW4gfHwgXCJcIik7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wcm92aWRlclNjb3BlKSB7XG4gICAgICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJwcm92aWRlcl9zY29wZVwiLCBvcHRpb25zLnByb3ZpZGVyU2NvcGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgYXN5bmMgY2FsbE9BdXRoQ2FsbGJhY2sob3B0aW9ucykge1xuICAgICAgICBpZiAoISgncHVibGlzaGFibGVDbGllbnRLZXknIGluIHRoaXMub3B0aW9ucykpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gZml4XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZG1pbiBzZXNzaW9uIHRva2VuIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGZvciBPQXV0aFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcyA9IHtcbiAgICAgICAgICAgIGlzc3VlcjogdGhpcy5vcHRpb25zLmdldEJhc2VVcmwoKSxcbiAgICAgICAgICAgIGFsZ29yaXRobTogJ29hdXRoMicsXG4gICAgICAgICAgICB0b2tlbl9lbmRwb2ludDogdGhpcy5nZXRBcGlVcmwoKSArICcvYXV0aC9vYXV0aC90b2tlbicsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IHtcbiAgICAgICAgICAgIGNsaWVudF9pZDogdGhpcy5wcm9qZWN0SWQsXG4gICAgICAgICAgICBjbGllbnRfc2VjcmV0OiB0aGlzLm9wdGlvbnMucHVibGlzaGFibGVDbGllbnRLZXksXG4gICAgICAgICAgICB0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZDogJ2NsaWVudF9zZWNyZXRfcG9zdCcsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGF3YWl0IHRoaXMuX25ldHdvcmtSZXRyeUV4Y2VwdGlvbihhc3luYyAoKSA9PiBvYXV0aC52YWxpZGF0ZUF1dGhSZXNwb25zZShhcywgY2xpZW50LCBvcHRpb25zLm9hdXRoUGFyYW1zLCBvcHRpb25zLnN0YXRlKSk7XG4gICAgICAgIGlmIChvYXV0aC5pc09BdXRoMkVycm9yKHBhcmFtcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiRXJyb3IgdmFsaWRhdGluZyBvdXRlciBPQXV0aCByZXNwb25zZVwiLCB7IHBhcmFtcyB9KTsgLy8gSGFuZGxlIE9BdXRoIDIuMCByZWRpcmVjdCBlcnJvclxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb2F1dGguYXV0aG9yaXphdGlvbkNvZGVHcmFudFJlcXVlc3QoYXMsIGNsaWVudCwgcGFyYW1zLCBvcHRpb25zLnJlZGlyZWN0VXJpLCBvcHRpb25zLmNvZGVWZXJpZmllcik7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9hdXRoLnByb2Nlc3NBdXRob3JpemF0aW9uQ29kZU9BdXRoMlJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlKTtcbiAgICAgICAgaWYgKG9hdXRoLmlzT0F1dGgyRXJyb3IocmVzdWx0KSkge1xuICAgICAgICAgICAgaWYgKFwiY29kZVwiIGluIHJlc3VsdCAmJiByZXN1bHQuY29kZSA9PT0gXCJNVUxUSV9GQUNUT1JfQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBLbm93bkVycm9ycy5NdWx0aUZhY3RvckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQocmVzdWx0LmRldGFpbHMuYXR0ZW1wdF9jb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRPRE8gSGFuZGxlIE9BdXRoIDIuMCByZXNwb25zZSBib2R5IGVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIk91dGVyIE9BdXRoIGVycm9yIGR1cmluZyBhdXRob3JpemF0aW9uIGNvZGUgcmVzcG9uc2VcIiwgeyByZXN1bHQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5ld1VzZXI6IHJlc3VsdC5pc19uZXdfdXNlcixcbiAgICAgICAgICAgIGFmdGVyQ2FsbGJhY2tSZWRpcmVjdFVybDogcmVzdWx0LmFmdGVyX2NhbGxiYWNrX3JlZGlyZWN0X3VybCxcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbiA/PyB0aHJvd0VycihcIlJlZnJlc2ggdG9rZW4gbm90IGZvdW5kIGluIG91dGVyIE9BdXRoIHJlc3BvbnNlXCIpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBzaWduT3V0KHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgdG9rZW5PYmogPSBhd2FpdCBzZXNzaW9uLmdldE9yRmV0Y2hMaWtlbHlWYWxpZFRva2VucygyMDAwMCk7XG4gICAgICAgIGlmICh0b2tlbk9iaikge1xuICAgICAgICAgICAgY29uc3QgcmVzT3JFcnJvciA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9zZXNzaW9ucy9jdXJyZW50XCIsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICAgICAgfSwgc2Vzc2lvbiwgW0tub3duRXJyb3JzLlJlZnJlc2hUb2tlbkVycm9yXSk7XG4gICAgICAgICAgICBpZiAocmVzT3JFcnJvci5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgICAgIGlmIChyZXNPckVycm9yLmVycm9yIGluc3RhbmNlb2YgS25vd25FcnJvcnMuUmVmcmVzaFRva2VuRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVmcmVzaCB0b2tlbiB3YXMgYWxyZWFkeSBpbnZhbGlkLCBqdXN0IGNvbnRpbnVlIGxpa2Ugbm90aGluZyBoYXBwZW5lZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5leHBlY3RlZCBlcnJvclwiLCB7IGVycm9yOiByZXNPckVycm9yLmVycm9yIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHVzZXIgd2FzIHNpZ25lZCBvdXQgc3VjY2Vzc2Z1bGx5LCBhbGwgZ29vZFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlc3Npb24ubWFya0ludmFsaWQoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q2xpZW50VXNlckJ5VG9rZW4oc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL3VzZXJzL21lXCIsIHt9LCBzZXNzaW9uLCBbS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyXSk7XG4gICAgICAgIGlmIChyZXNwb25zZU9yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZU9yRXJyb3IuZXJyb3IgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5DYW5ub3RHZXRPd25Vc2VyV2l0aG91dFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5leHBlY3RlZCB1bmNhdWdodCBlcnJvclwiLCB7IGNhdXNlOiByZXNwb25zZU9yRXJyb3IuZXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXNwb25zZU9yRXJyb3IuZGF0YTtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgaWYgKCF1c2VyKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJVc2VyIGVuZHBvaW50IHJldHVybmVkIG51bGw7IHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlblwiKTtcbiAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RUZWFtSW52aXRhdGlvbnMob3B0aW9ucywgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvdGVhbS1pbnZpdGF0aW9ucz9cIiArIG5ldyBVUkxTZWFyY2hQYXJhbXMoeyB0ZWFtX2lkOiBvcHRpb25zLnRlYW1JZCB9KSwge30sIHNlc3Npb24pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gICAgfVxuICAgIGFzeW5jIHJldm9rZVRlYW1JbnZpdGF0aW9uKGludml0YXRpb25JZCwgdGVhbUlkLCBzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC90ZWFtLWludml0YXRpb25zLyR7aW52aXRhdGlvbklkfT90ZWFtX2lkPSR7dGVhbUlkfWAsIHsgbWV0aG9kOiBcIkRFTEVURVwiIH0sIHNlc3Npb24pO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VGVhbU1lbWJlclByb2ZpbGVzKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFwiL3RlYW0tbWVtYmVyLXByb2ZpbGVzP1wiICsgbmV3IFVSTFNlYXJjaFBhcmFtcyhmaWx0ZXJVbmRlZmluZWQoe1xuICAgICAgICAgICAgdGVhbV9pZDogb3B0aW9ucy50ZWFtSWQsXG4gICAgICAgICAgICB1c2VyX2lkOiBvcHRpb25zLnVzZXJJZCxcbiAgICAgICAgfSkpLCB7fSwgc2Vzc2lvbik7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgICB9XG4gICAgYXN5bmMgZ2V0VGVhbU1lbWJlclByb2ZpbGUob3B0aW9ucywgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC90ZWFtLW1lbWJlci1wcm9maWxlcy8ke29wdGlvbnMudGVhbUlkfS8ke29wdGlvbnMudXNlcklkfWAsIHt9LCBzZXNzaW9uKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgbGVhdmVUZWFtKHRlYW1JZCwgc2Vzc2lvbikge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KGAvdGVhbS1tZW1iZXJzaGlwcy8ke3RlYW1JZH0vbWVgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlVGVhbU1lbWJlclByb2ZpbGUob3B0aW9ucywgc2Vzc2lvbikge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KGAvdGVhbS1tZW1iZXItcHJvZmlsZXMvJHtvcHRpb25zLnRlYW1JZH0vJHtvcHRpb25zLnVzZXJJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zLnByb2ZpbGUpLFxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlVGVhbShvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC90ZWFtcy8ke29wdGlvbnMudGVhbUlkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuZGF0YSksXG4gICAgICAgIH0sIHNlc3Npb24pO1xuICAgIH1cbiAgICBhc3luYyBsaXN0Q3VycmVudFVzZXJUZWFtUGVybWlzc2lvbnMob3B0aW9ucywgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC90ZWFtLXBlcm1pc3Npb25zP3RlYW1faWQ9JHtvcHRpb25zLnRlYW1JZH0mdXNlcl9pZD1tZSZyZWN1cnNpdmU9JHtvcHRpb25zLnJlY3Vyc2l2ZX1gLCB7fSwgc2Vzc2lvbik7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgICB9XG4gICAgYXN5bmMgbGlzdEN1cnJlbnRVc2VyUHJvamVjdFBlcm1pc3Npb25zKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KGAvcHJvamVjdC1wZXJtaXNzaW9ucz91c2VyX2lkPW1lJnJlY3Vyc2l2ZT0ke29wdGlvbnMucmVjdXJzaXZlfWAsIHt9LCBzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBsaXN0Q3VycmVudFVzZXJUZWFtcyhzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi90ZWFtcz91c2VyX2lkPW1lXCIsIHt9LCBzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBnZXRDbGllbnRQcm9qZWN0KCkge1xuICAgICAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL3Byb2plY3RzL2N1cnJlbnRcIiwge30sIG51bGwsIFtLbm93bkVycm9ycy5Qcm9qZWN0Tm90Rm91bmRdKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlT3JFcnJvci5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXNwb25zZU9yRXJyb3IuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VPckVycm9yLmRhdGE7XG4gICAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBSZXN1bHQub2socHJvamVjdCk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUNsaWVudFVzZXIodXBkYXRlLCBzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvdXNlcnMvbWVcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlKSxcbiAgICAgICAgfSwgc2Vzc2lvbik7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RQcm9qZWN0cyhzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi9pbnRlcm5hbC9wcm9qZWN0c1wiLCB7fSwgc2Vzc2lvbik7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBsaXN0IHByb2plY3RzOiBcIiArIHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgKGF3YWl0IHJlc3BvbnNlLnRleHQoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBqc29uLml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVQcm9qZWN0KHByb2plY3QsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgZmV0Y2hSZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvaW50ZXJuYWwvcHJvamVjdHNcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwcm9qZWN0KSxcbiAgICAgICAgfSwgc2Vzc2lvbik7XG4gICAgICAgIGlmICghZmV0Y2hSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBwcm9qZWN0OiBcIiArIGZldGNoUmVzcG9uc2Uuc3RhdHVzICsgXCIgXCIgKyAoYXdhaXQgZmV0Y2hSZXNwb25zZS50ZXh0KCkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgZmV0Y2hSZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVQcm92aWRlckFjY2Vzc1Rva2VuKHByb3ZpZGVyLCBzY29wZSwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC9jb25uZWN0ZWQtYWNjb3VudHMvbWUvJHtwcm92aWRlcn0vYWNjZXNzLXRva2VuYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNjb3BlIH0pLFxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlQ2xpZW50VGVhbShkYXRhLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi90ZWFtc1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlVGVhbSh0ZWFtSWQsIHNlc3Npb24pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChgL3RlYW1zLyR7dGVhbUlkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgfSwgc2Vzc2lvbik7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZUN1cnJlbnRVc2VyKHNlc3Npb24pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi91c2Vycy9tZVwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIH0sIHNlc3Npb24pO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVDbGllbnRDb250YWN0Q2hhbm5lbChkYXRhLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi9jb250YWN0LWNoYW5uZWxzXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgIH0sIHNlc3Npb24pO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVDbGllbnRDb250YWN0Q2hhbm5lbChpZCwgZGF0YSwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC9jb250YWN0LWNoYW5uZWxzL21lLyR7aWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgIH0sIHNlc3Npb24pO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVDbGllbnRDb250YWN0Q2hhbm5lbChpZCwgc2Vzc2lvbikge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KGAvY29udGFjdC1jaGFubmVscy9tZS8ke2lkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgfSwgc2Vzc2lvbik7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZVNlc3Npb24oc2Vzc2lvbklkLCBzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC9hdXRoL3Nlc3Npb25zLyR7c2Vzc2lvbklkfT91c2VyX2lkPW1lYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFNlc3Npb25zKHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFwiL2F1dGgvc2Vzc2lvbnM/dXNlcl9pZD1tZVwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIH0sIHNlc3Npb24pO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0Q2xpZW50Q29udGFjdENoYW5uZWxzKHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFwiL2NvbnRhY3QtY2hhbm5lbHM/dXNlcl9pZD1tZVwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIH0sIHNlc3Npb24pO1xuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4ganNvbi5pdGVtcztcbiAgICB9XG4gICAgYXN5bmMgc2VuZEN1cnJlbnRVc2VyQ29udGFjdENoYW5uZWxWZXJpZmljYXRpb25FbWFpbChjb250YWN0Q2hhbm5lbElkLCBjYWxsYmFja1VybCwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKGAvY29udGFjdC1jaGFubmVscy9tZS8ke2NvbnRhY3RDaGFubmVsSWR9L3NlbmQtdmVyaWZpY2F0aW9uLWNvZGVgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY2FsbGJhY2tfdXJsOiBjYWxsYmFja1VybCB9KSxcbiAgICAgICAgfSwgc2Vzc2lvbiwgW0tub3duRXJyb3JzLkVtYWlsQWxyZWFkeVZlcmlmaWVkXSk7XG4gICAgICAgIGlmIChyZXNwb25zZU9yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzcG9uc2VPckVycm9yLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVzdWx0Lm9rKHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGFzeW5jIGNsaUxvZ2luKGxvZ2luQ29kZSwgcmVmcmVzaFRva2VuLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlT3JFcnJvciA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9jbGkvY29tcGxldGVcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBsb2dpbl9jb2RlOiBsb2dpbkNvZGUsXG4gICAgICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIHNlc3Npb24sIFtLbm93bkVycm9ycy5TY2hlbWFFcnJvcl0pO1xuICAgICAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlc3BvbnNlT3JFcnJvci5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vayh1bmRlZmluZWQpO1xuICAgIH1cbiAgICBhc3luYyBfZ2V0QXBpS2V5UmVxdWVzdEluZm8ob3B0aW9ucykge1xuICAgICAgICBpZiAoXCJ1c2VyX2lkXCIgaW4gb3B0aW9ucyAmJiBcInRlYW1faWRcIiBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkNhbm5vdCBzcGVjaWZ5IGJvdGggdXNlcl9pZCBhbmQgdGVhbV9pZCBpbiBfZ2V0QXBpS2V5UmVxdWVzdEluZm9cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVuZHBvaW50OiBcInRlYW1faWRcIiBpbiBvcHRpb25zID8gXCIvdGVhbS1hcGkta2V5c1wiIDogXCIvdXNlci1hcGkta2V5c1wiLFxuICAgICAgICAgICAgcXVlcnlQYXJhbXM6IG5ldyBVUkxTZWFyY2hQYXJhbXMoZmlsdGVyVW5kZWZpbmVkT3JOdWxsKG9wdGlvbnMpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFByb2plY3RBcGlLZXlzKG9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgICAgIGNvbnN0IHNlbmRSZXF1ZXN0ID0gKHJlcXVlc3RUeXBlID09PSBcImNsaWVudFwiID8gdGhpcy5zZW5kQ2xpZW50UmVxdWVzdCA6IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QpLmJpbmQodGhpcyk7XG4gICAgICAgIGNvbnN0IHsgZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zIH0gPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXlSZXF1ZXN0SW5mbyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdChgJHtlbmRwb2ludH0/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgfSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4ganNvbi5pdGVtcztcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlUHJvamVjdEFwaUtleShkYXRhLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgICAgICBjb25zdCBzZW5kUmVxdWVzdCA9IChyZXF1ZXN0VHlwZSA9PT0gXCJjbGllbnRcIiA/IHRoaXMuc2VuZENsaWVudFJlcXVlc3QgOiB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KS5iaW5kKHRoaXMpO1xuICAgICAgICBjb25zdCB7IGVuZHBvaW50IH0gPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXlSZXF1ZXN0SW5mbyhkYXRhKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdChgJHtlbmRwb2ludH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBzZXNzaW9uLCByZXF1ZXN0VHlwZSk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldFByb2plY3RBcGlLZXkob3B0aW9ucywga2V5SWQsIHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgICAgIGNvbnN0IHNlbmRSZXF1ZXN0ID0gKHJlcXVlc3RUeXBlID09PSBcImNsaWVudFwiID8gdGhpcy5zZW5kQ2xpZW50UmVxdWVzdCA6IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QpLmJpbmQodGhpcyk7XG4gICAgICAgIGNvbnN0IHsgZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zIH0gPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXlSZXF1ZXN0SW5mbyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdChgJHtlbmRwb2ludH0vJHtrZXlJZH0/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgfSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQcm9qZWN0QXBpS2V5KG9wdGlvbnMsIGtleUlkLCBkYXRhLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgICAgICBjb25zdCBzZW5kUmVxdWVzdCA9IChyZXF1ZXN0VHlwZSA9PT0gXCJjbGllbnRcIiA/IHRoaXMuc2VuZENsaWVudFJlcXVlc3QgOiB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KS5iaW5kKHRoaXMpO1xuICAgICAgICBjb25zdCB7IGVuZHBvaW50LCBxdWVyeVBhcmFtcyB9ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5UmVxdWVzdEluZm8ob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VuZFJlcXVlc3QoYCR7ZW5kcG9pbnR9LyR7a2V5SWR9PyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgfSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBjaGVja1Byb2plY3RBcGlLZXkodHlwZSwgYXBpS2V5LCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgICAgICBjb25zdCBzZW5kUmVxdWVzdCA9IChyZXF1ZXN0VHlwZSA9PT0gXCJjbGllbnRcIiA/IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IgOiB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKS5iaW5kKHRoaXMpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kUmVxdWVzdChgLyR7dHlwZX0tYXBpLWtleXMvY2hlY2tgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXBpX2tleTogYXBpS2V5IH0pLFxuICAgICAgICB9LCBzZXNzaW9uLCBbS25vd25FcnJvcnMuQXBpS2V5Tm90VmFsaWRdKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3VsdC5kYXRhLmpzb24oKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackServerInterface: () => (/* binding */ StackServerInterface)\n/* harmony export */ });\n/* harmony import */ var _known_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../known-errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/known-errors.js\");\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_objects__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/objects */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _utils_results__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _utils_urls__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/urls */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/urls.js\");\n/* harmony import */ var _clientInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./clientInterface */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js\");\n\n\n\n\n\n\nclass StackServerInterface extends _clientInterface__WEBPACK_IMPORTED_MODULE_5__.StackClientInterface {\n    constructor(options) {\n        super(options);\n        this.options = options;\n    }\n    async sendServerRequest(path, options, session, requestType = \"server\") {\n        return await this.sendClientRequest(path, {\n            ...options,\n            headers: {\n                \"x-stack-secret-server-key\": \"secretServerKey\" in this.options ? this.options.secretServerKey : \"\",\n                ...options.headers,\n            },\n        }, session, requestType);\n    }\n    async sendServerRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n        try {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.ok(await this.sendServerRequest(path, requestOptions, tokenStoreOrNull));\n        }\n        catch (e) {\n            for (const errorType of errorsToCatch) {\n                if (e instanceof errorType) {\n                    return _utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.error(e);\n                }\n            }\n            throw e;\n        }\n    }\n    async createServerUser(data) {\n        const response = await this.sendServerRequest(\"/users\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async getServerUserByToken(session) {\n        const responseOrError = await this.sendServerRequestAndCatchKnownError(\"/users/me\", {}, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser]);\n        if (responseOrError.status === \"error\") {\n            if (responseOrError.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser) {\n                return null;\n            }\n            else {\n                throw new _utils_errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Unexpected uncaught error\", { cause: responseOrError.error });\n            }\n        }\n        const response = responseOrError.data;\n        const user = await response.json();\n        if (!user)\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"User endpoint returned null; this should never happen\");\n        return user;\n    }\n    async getServerUserById(userId) {\n        const responseOrError = await this.sendServerRequestAndCatchKnownError((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/users/${userId}`, {}, null, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.UserNotFound]);\n        if (responseOrError.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.error(responseOrError.error);\n        }\n        const user = await responseOrError.data.json();\n        return _utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.ok(user);\n    }\n    async listServerTeamInvitations(options) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-invitations?team_id=${options.teamId}`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async revokeServerTeamInvitation(invitationId, teamId) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-invitations/${invitationId}?team_id=${teamId}`, { method: \"DELETE\" }, null);\n    }\n    async listServerTeamMemberProfiles(options) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-member-profiles?team_id=${options.teamId}`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async getServerTeamMemberProfile(options) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-member-profiles/${options.teamId}/${options.userId}`, {}, null);\n        return await response.json();\n    }\n    async listServerTeamPermissions(options, session) {\n        const response = await this.sendServerRequest(`/team-permissions?${new URLSearchParams((0,_utils_objects__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)({\n            user_id: options.userId,\n            team_id: options.teamId,\n            recursive: options.recursive.toString(),\n        }))}`, {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async listServerProjectPermissions(options, session) {\n        const response = await this.sendServerRequest(`/project-permissions?${new URLSearchParams((0,_utils_objects__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)({\n            user_id: options.userId,\n            recursive: options.recursive.toString(),\n        }))}`, {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async listServerUsers(options) {\n        const searchParams = new URLSearchParams((0,_utils_objects__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)({\n            cursor: options.cursor,\n            limit: options.limit?.toString(),\n            desc: options.desc?.toString(),\n            ...options.orderBy ? {\n                order_by: {\n                    signedUpAt: \"signed_up_at\",\n                }[options.orderBy],\n            } : {},\n            ...options.query ? {\n                query: options.query,\n            } : {},\n        }));\n        const response = await this.sendServerRequest(\"/users?\" + searchParams.toString(), {}, null);\n        return await response.json();\n    }\n    async listServerTeams(options) {\n        const response = await this.sendServerRequest(`/teams?${new URLSearchParams((0,_utils_objects__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)({\n            user_id: options?.userId,\n        }))}`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async getServerTeam(teamId) {\n        const response = await this.sendServerRequest(`/teams/${teamId}`, {}, null);\n        return await response.json();\n    }\n    async listServerTeamUsers(teamId) {\n        const response = await this.sendServerRequest(`/users?team_id=${teamId}`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    /* when passing a session, the user will be added to the team */\n    async createServerTeam(data) {\n        const response = await this.sendServerRequest(\"/teams\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async updateServerTeam(teamId, data) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/teams/${teamId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async deleteServerTeam(teamId) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/teams/${teamId}`, { method: \"DELETE\" }, null);\n    }\n    async addServerUserToTeam(options) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-memberships/${options.teamId}/${options.userId}`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n        return await response.json();\n    }\n    async removeServerUserFromTeam(options) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-memberships/${options.teamId}/${options.userId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n    async updateServerUser(userId, update) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/users/${userId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(update),\n        }, null);\n        return await response.json();\n    }\n    async createServerProviderAccessToken(userId, provider, scope) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/connected-accounts/${userId}/${provider}/access-token`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({ scope }),\n        }, null);\n        return await response.json();\n    }\n    async createServerUserSession(userId, expiresInMillis, isImpersonation) {\n        const response = await this.sendServerRequest(\"/auth/sessions\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                user_id: userId,\n                expires_in_millis: expiresInMillis,\n                is_impersonation: isImpersonation,\n            }),\n        }, null);\n        const result = await response.json();\n        return {\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n        };\n    }\n    async leaveServerTeam(options) {\n        await this.sendClientRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-memberships/${options.teamId}/${options.userId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n    async updateServerTeamMemberProfile(options) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-member-profiles/${options.teamId}/${options.userId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(options.profile),\n        }, null);\n    }\n    async grantServerTeamUserPermission(teamId, userId, permissionId) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-permissions/${teamId}/${userId}/${permissionId}`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n    async revokeServerTeamUserPermission(teamId, userId, permissionId) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/team-permissions/${teamId}/${userId}/${permissionId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n    async deleteServerUser(userId) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/users/${userId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n    async createServerContactChannel(data) {\n        const response = await this.sendServerRequest(\"/contact-channels\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async updateServerContactChannel(userId, contactChannelId, data) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/contact-channels/${userId}/${contactChannelId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async deleteServerContactChannel(userId, contactChannelId) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/contact-channels/${userId}/${contactChannelId}`, {\n            method: \"DELETE\",\n        }, null);\n    }\n    async listServerContactChannels(userId) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/contact-channels?user_id=${userId}`, {\n            method: \"GET\",\n        }, null);\n        const json = await response.json();\n        return json.items;\n    }\n    async sendServerContactChannelVerificationEmail(userId, contactChannelId, callbackUrl) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/contact-channels/${userId}/${contactChannelId}/send-verification-code`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({ callback_url: callbackUrl }),\n        }, null);\n    }\n    async listServerSessions(userId) {\n        const response = await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/auth/sessions?user_id=${userId}`, {\n            method: \"GET\",\n        }, null);\n        return await response.json();\n    }\n    async deleteServerSession(sessionId) {\n        await this.sendServerRequest((0,_utils_urls__WEBPACK_IMPORTED_MODULE_4__.urlString) `/auth/sessions/${sessionId}`, {\n            method: \"DELETE\",\n        }, null);\n    }\n    async sendServerTeamInvitation(options) {\n        await this.sendServerRequest(\"/team-invitations/send-code\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email: options.email,\n                team_id: options.teamId,\n                callback_url: options.callbackUrl,\n            }),\n        }, null);\n    }\n    async updatePassword(options) {\n        const res = await this.sendServerRequestAndCatchKnownError(\"/auth/password/update\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                old_password: options.oldPassword,\n                new_password: options.newPassword,\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordConfirmationMismatch, _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9pbnRlcmZhY2Uvc2VydmVySW50ZXJmYWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBOEM7QUFDUTtBQUNIO0FBQ1Q7QUFDQTtBQUNlO0FBQ2xELG1DQUFtQyxrRUFBb0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrREFBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsWUFBWSxzREFBVztBQUNySDtBQUNBLGlEQUFpRCxzREFBVztBQUM1RDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQW1CLGdDQUFnQyw4QkFBOEI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBbUIsK0JBQStCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSxzREFBUyxXQUFXLE9BQU8sS0FBSyxTQUFTLHNEQUFXO0FBQ25JO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQSxlQUFlLGtEQUFNO0FBQ3JCO0FBQ0E7QUFDQSxzREFBc0Qsc0RBQVMsOEJBQThCLGVBQWUsS0FBSztBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzREFBUyxzQkFBc0IsYUFBYSxXQUFXLE9BQU8sS0FBSyxrQkFBa0I7QUFDMUg7QUFDQTtBQUNBLHNEQUFzRCxzREFBUyxrQ0FBa0MsZUFBZSxLQUFLO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHNEQUFTLDBCQUEwQixlQUFlLEdBQUcsZUFBZSxLQUFLO0FBQy9IO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxvQkFBb0IsK0RBQWU7QUFDOUc7QUFDQTtBQUNBO0FBQ0EsU0FBUyxHQUFHLEtBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsb0JBQW9CLCtEQUFlO0FBQ2pIO0FBQ0E7QUFDQSxTQUFTLEdBQUcsS0FBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCwrREFBZTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsY0FBYyxJQUFJO0FBQ2xCO0FBQ0E7QUFDQSxjQUFjLElBQUk7QUFDbEIsU0FBUztBQUNULDZGQUE2RjtBQUM3RjtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0Usb0JBQW9CLCtEQUFlO0FBQ25HO0FBQ0EsU0FBUyxHQUFHLEtBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsT0FBTyxLQUFLO0FBQzVFO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxPQUFPLEtBQUs7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxzREFBUyxXQUFXLE9BQU87QUFDakY7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzREFBUyxXQUFXLE9BQU8sS0FBSyxrQkFBa0I7QUFDdkY7QUFDQTtBQUNBLHNEQUFzRCxzREFBUyxzQkFBc0IsZUFBZSxHQUFHLGVBQWU7QUFDdEg7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1DQUFtQztBQUNuQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHNEQUFTLHNCQUFzQixlQUFlLEdBQUcsZUFBZTtBQUNyRztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DO0FBQ25DLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0RBQXNELHNEQUFTLFdBQVcsT0FBTztBQUNqRjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHNEQUFTLHdCQUF3QixPQUFPLEdBQUcsU0FBUztBQUMxRztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DLE9BQU87QUFDMUMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzREFBUyxzQkFBc0IsZUFBZSxHQUFHLGVBQWU7QUFDckc7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1DQUFtQztBQUNuQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHFDQUFxQyxzREFBUywwQkFBMEIsZUFBZSxHQUFHLGVBQWU7QUFDekc7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxxQ0FBcUMsc0RBQVMsc0JBQXNCLE9BQU8sR0FBRyxPQUFPLEdBQUcsYUFBYTtBQUNyRztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DO0FBQ25DLFNBQVM7QUFDVDtBQUNBO0FBQ0EscUNBQXFDLHNEQUFTLHNCQUFzQixPQUFPLEdBQUcsT0FBTyxHQUFHLGFBQWE7QUFDckc7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1DQUFtQztBQUNuQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHFDQUFxQyxzREFBUyxXQUFXLE9BQU87QUFDaEU7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1DQUFtQztBQUNuQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxzREFBUyxzQkFBc0IsT0FBTyxHQUFHLGlCQUFpQjtBQUNoSDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHNEQUFTLHNCQUFzQixPQUFPLEdBQUcsaUJBQWlCO0FBQy9GO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBc0Qsc0RBQVMsOEJBQThCLE9BQU87QUFDcEc7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsc0RBQVMsc0JBQXNCLE9BQU8sR0FBRyxpQkFBaUI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1DQUFtQywyQkFBMkI7QUFDOUQsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBc0Qsc0RBQVMsMkJBQTJCLE9BQU87QUFDakc7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHNEQUFTLG1CQUFtQixVQUFVO0FBQzNFO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLFNBQVMsc0RBQVcsK0JBQStCLHNEQUFXO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2hhcmVkXFxkaXN0XFxpbnRlcmZhY2VcXHNlcnZlckludGVyZmFjZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLbm93bkVycm9ycyB9IGZyb20gXCIuLi9rbm93bi1lcnJvcnNcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgeyBmaWx0ZXJVbmRlZmluZWQgfSBmcm9tIFwiLi4vdXRpbHMvb2JqZWN0c1wiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4uL3V0aWxzL3Jlc3VsdHNcIjtcbmltcG9ydCB7IHVybFN0cmluZyB9IGZyb20gXCIuLi91dGlscy91cmxzXCI7XG5pbXBvcnQgeyBTdGFja0NsaWVudEludGVyZmFjZSB9IGZyb20gXCIuL2NsaWVudEludGVyZmFjZVwiO1xuZXhwb3J0IGNsYXNzIFN0YWNrU2VydmVySW50ZXJmYWNlIGV4dGVuZHMgU3RhY2tDbGllbnRJbnRlcmZhY2Uge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRTZXJ2ZXJSZXF1ZXN0KHBhdGgsIG9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlID0gXCJzZXJ2ZXJcIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChwYXRoLCB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwieC1zdGFjay1zZWNyZXQtc2VydmVyLWtleVwiOiBcInNlY3JldFNlcnZlcktleVwiIGluIHRoaXMub3B0aW9ucyA/IHRoaXMub3B0aW9ucy5zZWNyZXRTZXJ2ZXJLZXkgOiBcIlwiLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sIHNlc3Npb24sIHJlcXVlc3RUeXBlKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZFNlcnZlclJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHRva2VuU3RvcmVPck51bGwsIGVycm9yc1RvQ2F0Y2gpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVycm9yVHlwZSBvZiBlcnJvcnNUb0NhdGNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBlcnJvclR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZVNlcnZlclVzZXIoZGF0YSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXCIvdXNlcnNcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldFNlcnZlclVzZXJCeVRva2VuKHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcIi91c2Vycy9tZVwiLCB7fSwgc2Vzc2lvbiwgW0tub3duRXJyb3JzLkNhbm5vdEdldE93blVzZXJXaXRob3V0VXNlcl0pO1xuICAgICAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VPckVycm9yLmVycm9yIGluc3RhbmNlb2YgS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlVuZXhwZWN0ZWQgdW5jYXVnaHQgZXJyb3JcIiwgeyBjYXVzZTogcmVzcG9uc2VPckVycm9yLmVycm9yIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VPckVycm9yLmRhdGE7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVXNlciBlbmRwb2ludCByZXR1cm5lZCBudWxsOyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW5cIik7XG4gICAgICAgIHJldHVybiB1c2VyO1xuICAgIH1cbiAgICBhc3luYyBnZXRTZXJ2ZXJVc2VyQnlJZCh1c2VySWQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcih1cmxTdHJpbmcgYC91c2Vycy8ke3VzZXJJZH1gLCB7fSwgbnVsbCwgW0tub3duRXJyb3JzLlVzZXJOb3RGb3VuZF0pO1xuICAgICAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlc3BvbnNlT3JFcnJvci5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlT3JFcnJvci5kYXRhLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vayh1c2VyKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFNlcnZlclRlYW1JbnZpdGF0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdCh1cmxTdHJpbmcgYC90ZWFtLWludml0YXRpb25zP3RlYW1faWQ9JHtvcHRpb25zLnRlYW1JZH1gLCB7fSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgICB9XG4gICAgYXN5bmMgcmV2b2tlU2VydmVyVGVhbUludml0YXRpb24oaW52aXRhdGlvbklkLCB0ZWFtSWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdCh1cmxTdHJpbmcgYC90ZWFtLWludml0YXRpb25zLyR7aW52aXRhdGlvbklkfT90ZWFtX2lkPSR7dGVhbUlkfWAsIHsgbWV0aG9kOiBcIkRFTEVURVwiIH0sIG51bGwpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0U2VydmVyVGVhbU1lbWJlclByb2ZpbGVzKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KHVybFN0cmluZyBgL3RlYW0tbWVtYmVyLXByb2ZpbGVzP3RlYW1faWQ9JHtvcHRpb25zLnRlYW1JZH1gLCB7fSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgICB9XG4gICAgYXN5bmMgZ2V0U2VydmVyVGVhbU1lbWJlclByb2ZpbGUob3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QodXJsU3RyaW5nIGAvdGVhbS1tZW1iZXItcHJvZmlsZXMvJHtvcHRpb25zLnRlYW1JZH0vJHtvcHRpb25zLnVzZXJJZH1gLCB7fSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RTZXJ2ZXJUZWFtUGVybWlzc2lvbnMob3B0aW9ucywgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoYC90ZWFtLXBlcm1pc3Npb25zPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyhmaWx0ZXJVbmRlZmluZWQoe1xuICAgICAgICAgICAgdXNlcl9pZDogb3B0aW9ucy51c2VySWQsXG4gICAgICAgICAgICB0ZWFtX2lkOiBvcHRpb25zLnRlYW1JZCxcbiAgICAgICAgICAgIHJlY3Vyc2l2ZTogb3B0aW9ucy5yZWN1cnNpdmUudG9TdHJpbmcoKSxcbiAgICAgICAgfSkpfWAsIHt9LCBzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBsaXN0U2VydmVyUHJvamVjdFBlcm1pc3Npb25zKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KGAvcHJvamVjdC1wZXJtaXNzaW9ucz8ke25ldyBVUkxTZWFyY2hQYXJhbXMoZmlsdGVyVW5kZWZpbmVkKHtcbiAgICAgICAgICAgIHVzZXJfaWQ6IG9wdGlvbnMudXNlcklkLFxuICAgICAgICAgICAgcmVjdXJzaXZlOiBvcHRpb25zLnJlY3Vyc2l2ZS50b1N0cmluZygpLFxuICAgICAgICB9KSl9YCwge30sIHNlc3Npb24pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RTZXJ2ZXJVc2VycyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoZmlsdGVyVW5kZWZpbmVkKHtcbiAgICAgICAgICAgIGN1cnNvcjogb3B0aW9ucy5jdXJzb3IsXG4gICAgICAgICAgICBsaW1pdDogb3B0aW9ucy5saW1pdD8udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGRlc2M6IG9wdGlvbnMuZGVzYz8udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMub3JkZXJCeSA/IHtcbiAgICAgICAgICAgICAgICBvcmRlcl9ieToge1xuICAgICAgICAgICAgICAgICAgICBzaWduZWRVcEF0OiBcInNpZ25lZF91cF9hdFwiLFxuICAgICAgICAgICAgICAgIH1bb3B0aW9ucy5vcmRlckJ5XSxcbiAgICAgICAgICAgIH0gOiB7fSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMucXVlcnkgPyB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IG9wdGlvbnMucXVlcnksXG4gICAgICAgICAgICB9IDoge30sXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFwiL3VzZXJzP1wiICsgc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCksIHt9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFNlcnZlclRlYW1zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KGAvdGVhbXM/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICAgICAgICB1c2VyX2lkOiBvcHRpb25zPy51c2VySWQsXG4gICAgICAgIH0pKX1gLCB7fSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgICB9XG4gICAgYXN5bmMgZ2V0U2VydmVyVGVhbSh0ZWFtSWQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KGAvdGVhbXMvJHt0ZWFtSWR9YCwge30sIG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0U2VydmVyVGVhbVVzZXJzKHRlYW1JZCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoYC91c2Vycz90ZWFtX2lkPSR7dGVhbUlkfWAsIHt9LCBudWxsKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICAvKiB3aGVuIHBhc3NpbmcgYSBzZXNzaW9uLCB0aGUgdXNlciB3aWxsIGJlIGFkZGVkIHRvIHRoZSB0ZWFtICovXG4gICAgYXN5bmMgY3JlYXRlU2VydmVyVGVhbShkYXRhKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcIi90ZWFtc1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlU2VydmVyVGVhbSh0ZWFtSWQsIGRhdGEpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KHVybFN0cmluZyBgL3RlYW1zLyR7dGVhbUlkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlU2VydmVyVGVhbSh0ZWFtSWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdCh1cmxTdHJpbmcgYC90ZWFtcy8ke3RlYW1JZH1gLCB7IG1ldGhvZDogXCJERUxFVEVcIiB9LCBudWxsKTtcbiAgICB9XG4gICAgYXN5bmMgYWRkU2VydmVyVXNlclRvVGVhbShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdCh1cmxTdHJpbmcgYC90ZWFtLW1lbWJlcnNoaXBzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyByZW1vdmVTZXJ2ZXJVc2VyRnJvbVRlYW0ob3B0aW9ucykge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KHVybFN0cmluZyBgL3RlYW0tbWVtYmVyc2hpcHMvJHtvcHRpb25zLnRlYW1JZH0vJHtvcHRpb25zLnVzZXJJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICB9LCBudWxsKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlU2VydmVyVXNlcih1c2VySWQsIHVwZGF0ZSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QodXJsU3RyaW5nIGAvdXNlcnMvJHt1c2VySWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlKSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZVNlcnZlclByb3ZpZGVyQWNjZXNzVG9rZW4odXNlcklkLCBwcm92aWRlciwgc2NvcGUpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KHVybFN0cmluZyBgL2Nvbm5lY3RlZC1hY2NvdW50cy8ke3VzZXJJZH0vJHtwcm92aWRlcn0vYWNjZXNzLXRva2VuYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNjb3BlIH0pLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlU2VydmVyVXNlclNlc3Npb24odXNlcklkLCBleHBpcmVzSW5NaWxsaXMsIGlzSW1wZXJzb25hdGlvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXCIvYXV0aC9zZXNzaW9uc1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgZXhwaXJlc19pbl9taWxsaXM6IGV4cGlyZXNJbk1pbGxpcyxcbiAgICAgICAgICAgICAgICBpc19pbXBlcnNvbmF0aW9uOiBpc0ltcGVyc29uYXRpb24sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgbGVhdmVTZXJ2ZXJUZWFtKG9wdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdCh1cmxTdHJpbmcgYC90ZWFtLW1lbWJlcnNoaXBzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVNlcnZlclRlYW1NZW1iZXJQcm9maWxlKG9wdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdCh1cmxTdHJpbmcgYC90ZWFtLW1lbWJlci1wcm9maWxlcy8ke29wdGlvbnMudGVhbUlkfS8ke29wdGlvbnMudXNlcklkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucHJvZmlsZSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgIH1cbiAgICBhc3luYyBncmFudFNlcnZlclRlYW1Vc2VyUGVybWlzc2lvbih0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QodXJsU3RyaW5nIGAvdGVhbS1wZXJtaXNzaW9ucy8ke3RlYW1JZH0vJHt1c2VySWR9LyR7cGVybWlzc2lvbklkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICB9LCBudWxsKTtcbiAgICB9XG4gICAgYXN5bmMgcmV2b2tlU2VydmVyVGVhbVVzZXJQZXJtaXNzaW9uKHRlYW1JZCwgdXNlcklkLCBwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdCh1cmxTdHJpbmcgYC90ZWFtLXBlcm1pc3Npb25zLyR7dGVhbUlkfS8ke3VzZXJJZH0vJHtwZXJtaXNzaW9uSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZVNlcnZlclVzZXIodXNlcklkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QodXJsU3RyaW5nIGAvdXNlcnMvJHt1c2VySWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZVNlcnZlckNvbnRhY3RDaGFubmVsKGRhdGEpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFwiL2NvbnRhY3QtY2hhbm5lbHNcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVNlcnZlckNvbnRhY3RDaGFubmVsKHVzZXJJZCwgY29udGFjdENoYW5uZWxJZCwgZGF0YSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QodXJsU3RyaW5nIGAvY29udGFjdC1jaGFubmVscy8ke3VzZXJJZH0vJHtjb250YWN0Q2hhbm5lbElkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlU2VydmVyQ29udGFjdENoYW5uZWwodXNlcklkLCBjb250YWN0Q2hhbm5lbElkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QodXJsU3RyaW5nIGAvY29udGFjdC1jaGFubmVscy8ke3VzZXJJZH0vJHtjb250YWN0Q2hhbm5lbElkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RTZXJ2ZXJDb250YWN0Q2hhbm5lbHModXNlcklkKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdCh1cmxTdHJpbmcgYC9jb250YWN0LWNoYW5uZWxzP3VzZXJfaWQ9JHt1c2VySWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIGpzb24uaXRlbXM7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRTZXJ2ZXJDb250YWN0Q2hhbm5lbFZlcmlmaWNhdGlvbkVtYWlsKHVzZXJJZCwgY29udGFjdENoYW5uZWxJZCwgY2FsbGJhY2tVcmwpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdCh1cmxTdHJpbmcgYC9jb250YWN0LWNoYW5uZWxzLyR7dXNlcklkfS8ke2NvbnRhY3RDaGFubmVsSWR9L3NlbmQtdmVyaWZpY2F0aW9uLWNvZGVgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY2FsbGJhY2tfdXJsOiBjYWxsYmFja1VybCB9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RTZXJ2ZXJTZXNzaW9ucyh1c2VySWQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KHVybFN0cmluZyBgL2F1dGgvc2Vzc2lvbnM/dXNlcl9pZD0ke3VzZXJJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIH0sIG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVTZXJ2ZXJTZXNzaW9uKHNlc3Npb25JZCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KHVybFN0cmluZyBgL2F1dGgvc2Vzc2lvbnMvJHtzZXNzaW9uSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICB9LCBudWxsKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZFNlcnZlclRlYW1JbnZpdGF0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcIi90ZWFtLWludml0YXRpb25zL3NlbmQtY29kZVwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVtYWlsOiBvcHRpb25zLmVtYWlsLFxuICAgICAgICAgICAgICAgIHRlYW1faWQ6IG9wdGlvbnMudGVhbUlkLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrX3VybDogb3B0aW9ucy5jYWxsYmFja1VybCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBudWxsKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGFzc3dvcmQob3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL2F1dGgvcGFzc3dvcmQvdXBkYXRlXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgb2xkX3Bhc3N3b3JkOiBvcHRpb25zLm9sZFBhc3N3b3JkLFxuICAgICAgICAgICAgICAgIG5ld19wYXNzd29yZDogb3B0aW9ucy5uZXdQYXNzd29yZCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBudWxsLCBbS25vd25FcnJvcnMuUGFzc3dvcmRDb25maXJtYXRpb25NaXNtYXRjaCwgS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5lcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/known-errors.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/known-errors.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KnownError: () => (/* binding */ KnownError),\n/* harmony export */   KnownErrors: () => (/* binding */ KnownErrors)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/functions */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/functions.js\");\n/* harmony import */ var _utils_strings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/strings */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\n\nclass KnownError extends _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StatusError {\n    constructor(statusCode, humanReadableMessage, details) {\n        super(statusCode, humanReadableMessage);\n        this.statusCode = statusCode;\n        this.humanReadableMessage = humanReadableMessage;\n        this.details = details;\n        this.name = \"KnownError\";\n    }\n    getBody() {\n        return new TextEncoder().encode(JSON.stringify(this.toDescriptiveJson(), undefined, 2));\n    }\n    getHeaders() {\n        return {\n            \"Content-Type\": [\"application/json; charset=utf-8\"],\n            \"X-Stack-Known-Error\": [this.errorCode],\n        };\n    }\n    toDescriptiveJson() {\n        return {\n            code: this.errorCode,\n            ...this.details ? { details: this.details } : {},\n            error: this.humanReadableMessage,\n        };\n    }\n    get errorCode() {\n        return this.constructor.errorCode ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Can't find error code for this KnownError. Is its constructor a KnownErrorConstructor? ${this}`);\n    }\n    static constructorArgsFromJson(json) {\n        return [\n            400,\n            json.message,\n            json,\n        ];\n    }\n    static fromJson(json) {\n        for (const [_, KnownErrorType] of Object.entries(KnownErrors)) {\n            if (json.code === KnownErrorType.prototype.errorCode) {\n                const constructorArgs = KnownErrorType.constructorArgsFromJson(json);\n                return new KnownErrorType(\n                // @ts-expect-error\n                ...constructorArgs);\n            }\n        }\n        throw new Error(`Unknown KnownError code. You may need to update your version of Stack to see more detailed information. ${json.code}: ${json.message}`);\n    }\n}\nconst knownErrorConstructorErrorCodeSentinel = Symbol(\"knownErrorConstructorErrorCodeSentinel\");\nfunction createKnownErrorConstructor(SuperClass, errorCode, create, constructorArgsFromJson) {\n    const createFn = create === \"inherit\" ? _utils_functions__WEBPACK_IMPORTED_MODULE_1__.identityArgs : create;\n    const constructorArgsFromJsonFn = constructorArgsFromJson === \"inherit\" ? SuperClass.constructorArgsFromJson : constructorArgsFromJson;\n    // @ts-expect-error this is not a mixin, but TS detects it as one\n    class KnownErrorImpl extends SuperClass {\n        constructor(...args) {\n            // @ts-expect-error DEVIN, STOP REMOVING THIS LINE YOU DUMBASS, YES TYPESCRIPT DOES THROW AN ERROR IF YOU DON'T HAVE IT, NO THIS IS NOT \"UNUSED\", AND YES YOU ARE BREAKING OUR CI PIPELINE EVERY TIME YOU DO IT\n            super(...createFn(...args));\n            this.name = `KnownError<${errorCode}>`;\n            this.constructorArgs = args;\n        }\n        static constructorArgsFromJson(json) {\n            return constructorArgsFromJsonFn(json.details);\n        }\n    }\n    KnownErrorImpl.errorCode = errorCode;\n    ;\n    // @ts-expect-error\n    return KnownErrorImpl;\n}\nconst UnsupportedError = createKnownErrorConstructor(KnownError, \"UNSUPPORTED_ERROR\", (originalErrorCode) => [\n    500,\n    `An error occurred that is not currently supported (possibly because it was added in a version of Stack that is newer than this client). The original unsupported error code was: ${originalErrorCode}`,\n    {\n        originalErrorCode,\n    },\n], (json) => [\n    json?.originalErrorCode ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"originalErrorCode not found in UnsupportedError details\"),\n]);\nconst BodyParsingError = createKnownErrorConstructor(KnownError, \"BODY_PARSING_ERROR\", (message) => [\n    400,\n    message,\n], (json) => [json.message]);\nconst SchemaError = createKnownErrorConstructor(KnownError, \"SCHEMA_ERROR\", (message) => [\n    400,\n    message || (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"SchemaError requires a message\"),\n    {\n        message,\n    },\n], (json) => [json.message]);\nconst AllOverloadsFailed = createKnownErrorConstructor(KnownError, \"ALL_OVERLOADS_FAILED\", (overloadErrors) => [\n    400,\n    (0,_utils_strings__WEBPACK_IMPORTED_MODULE_2__.deindent) `\n      This endpoint has multiple overloads, but they all failed to process the request.\n\n        ${overloadErrors.map((e, i) => (0,_utils_strings__WEBPACK_IMPORTED_MODULE_2__.deindent) `\n          Overload ${i + 1}: ${JSON.stringify(e, undefined, 2)}\n        `).join(\"\\n\\n\")}\n    `,\n    {\n        overload_errors: overloadErrors,\n    },\n], (json) => [\n    json?.overload_errors ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"overload_errors not found in AllOverloadsFailed details\"),\n]);\nconst ProjectAuthenticationError = createKnownErrorConstructor(KnownError, \"PROJECT_AUTHENTICATION_ERROR\", \"inherit\", \"inherit\");\nconst InvalidProjectAuthentication = createKnownErrorConstructor(ProjectAuthenticationError, \"INVALID_PROJECT_AUTHENTICATION\", \"inherit\", \"inherit\");\nconst ProjectKeyWithoutAccessType = createKnownErrorConstructor(InvalidProjectAuthentication, \"PROJECT_KEY_WITHOUT_ACCESS_TYPE\", () => [\n    400,\n    \"Either an API key or an admin access token was provided, but the x-stack-access-type header is missing. Set it to 'client', 'server', or 'admin' as appropriate.\",\n], () => []);\nconst InvalidAccessType = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_ACCESS_TYPE\", (accessType) => [\n    400,\n    `The x-stack-access-type header must be 'client', 'server', or 'admin', but was '${accessType}'.`,\n], (json) => [\n    json?.accessType ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"accessType not found in InvalidAccessType details\"),\n]);\nconst AccessTypeWithoutProjectId = createKnownErrorConstructor(InvalidProjectAuthentication, \"ACCESS_TYPE_WITHOUT_PROJECT_ID\", (accessType) => [\n    400,\n    (0,_utils_strings__WEBPACK_IMPORTED_MODULE_2__.deindent) `\n      The x-stack-access-type header was '${accessType}', but the x-stack-project-id header was not provided.\n      \n      For more information, see the docs on REST API authentication: https://docs.stack-auth.com/rest-api/overview#authentication\n    `,\n    {\n        request_type: accessType,\n    },\n], (json) => [json.request_type]);\nconst AccessTypeRequired = createKnownErrorConstructor(InvalidProjectAuthentication, \"ACCESS_TYPE_REQUIRED\", () => [\n    400,\n    (0,_utils_strings__WEBPACK_IMPORTED_MODULE_2__.deindent) `\n      You must specify an access level for this Stack project. Make sure project API keys are provided (eg. x-stack-publishable-client-key) and you set the x-stack-access-type header to 'client', 'server', or 'admin'.\n      \n      For more information, see the docs on REST API authentication: https://docs.stack-auth.com/rest-api/overview#authentication\n    `,\n], () => []);\nconst InsufficientAccessType = createKnownErrorConstructor(InvalidProjectAuthentication, \"INSUFFICIENT_ACCESS_TYPE\", (actualAccessType, allowedAccessTypes) => [\n    401,\n    `The x-stack-access-type header must be ${allowedAccessTypes.map(s => `'${s}'`).join(\" or \")}, but was '${actualAccessType}'.`,\n    {\n        actual_access_type: actualAccessType,\n        allowed_access_types: allowedAccessTypes,\n    },\n], (json) => [\n    json.actual_access_type,\n    json.allowed_access_types,\n]);\nconst InvalidPublishableClientKey = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_PUBLISHABLE_CLIENT_KEY\", (projectId) => [\n    401,\n    `The publishable key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n        project_id: projectId,\n    },\n], (json) => [json.project_id]);\nconst InvalidSecretServerKey = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_SECRET_SERVER_KEY\", (projectId) => [\n    401,\n    `The secret server key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n        project_id: projectId,\n    },\n], (json) => [json.project_id]);\nconst InvalidSuperSecretAdminKey = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_SUPER_SECRET_ADMIN_KEY\", (projectId) => [\n    401,\n    `The super secret admin key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n        project_id: projectId,\n    },\n], (json) => [json.project_id]);\nconst InvalidAdminAccessToken = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_ADMIN_ACCESS_TOKEN\", \"inherit\", \"inherit\");\nconst UnparsableAdminAccessToken = createKnownErrorConstructor(InvalidAdminAccessToken, \"UNPARSABLE_ADMIN_ACCESS_TOKEN\", () => [\n    401,\n    \"Admin access token is not parsable.\",\n], () => []);\nconst AdminAccessTokenExpired = createKnownErrorConstructor(InvalidAdminAccessToken, \"ADMIN_ACCESS_TOKEN_EXPIRED\", (expiredAt) => [\n    401,\n    `Admin access token has expired. Please refresh it and try again.${expiredAt ? ` (The access token expired at ${expiredAt.toISOString()}.)` : \"\"}`,\n    { expired_at_millis: expiredAt?.getTime() ?? null },\n], (json) => [json.expired_at_millis ?? undefined]);\nconst InvalidProjectForAdminAccessToken = createKnownErrorConstructor(InvalidAdminAccessToken, \"INVALID_PROJECT_FOR_ADMIN_ACCESS_TOKEN\", () => [\n    401,\n    \"Admin access tokens must be created on the internal project.\",\n], () => []);\nconst AdminAccessTokenIsNotAdmin = createKnownErrorConstructor(InvalidAdminAccessToken, \"ADMIN_ACCESS_TOKEN_IS_NOT_ADMIN\", () => [\n    401,\n    \"Admin access token does not have the required permissions to access this project.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ProjectAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationError, \"PROJECT_AUTHENTICATION_REQUIRED\", \"inherit\", \"inherit\");\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ClientAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"CLIENT_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"The publishable client key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ServerAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"SERVER_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"The secret server key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ClientOrServerAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"CLIENT_OR_SERVER_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"Either the publishable client key or the secret server key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ClientOrAdminAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"CLIENT_OR_ADMIN_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"Either the publishable client key or the super secret admin key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ClientOrServerOrAdminAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"CLIENT_OR_SERVER_OR_ADMIN_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"Either the publishable client key, the secret server key, or the super secret admin key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst AdminAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"ADMIN_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"The super secret admin key must be provided.\",\n], () => []);\nconst ExpectedInternalProject = createKnownErrorConstructor(ProjectAuthenticationError, \"EXPECTED_INTERNAL_PROJECT\", () => [\n    401,\n    \"The project ID is expected to be internal.\",\n], () => []);\nconst SessionAuthenticationError = createKnownErrorConstructor(KnownError, \"SESSION_AUTHENTICATION_ERROR\", \"inherit\", \"inherit\");\nconst InvalidSessionAuthentication = createKnownErrorConstructor(SessionAuthenticationError, \"INVALID_SESSION_AUTHENTICATION\", \"inherit\", \"inherit\");\nconst InvalidAccessToken = createKnownErrorConstructor(InvalidSessionAuthentication, \"INVALID_ACCESS_TOKEN\", \"inherit\", \"inherit\");\nconst UnparsableAccessToken = createKnownErrorConstructor(InvalidAccessToken, \"UNPARSABLE_ACCESS_TOKEN\", () => [\n    401,\n    \"Access token is not parsable.\",\n], () => []);\nconst AccessTokenExpired = createKnownErrorConstructor(InvalidAccessToken, \"ACCESS_TOKEN_EXPIRED\", (expiredAt) => [\n    401,\n    `Access token has expired. Please refresh it and try again.${expiredAt ? ` (The access token expired at ${expiredAt.toISOString()}.)` : \"\"}`,\n    { expired_at_millis: expiredAt?.getTime() ?? null },\n], (json) => [json.expired_at_millis ? new Date(json.expired_at_millis) : undefined]);\nconst InvalidProjectForAccessToken = createKnownErrorConstructor(InvalidAccessToken, \"INVALID_PROJECT_FOR_ACCESS_TOKEN\", (expectedProjectId, actualProjectId) => [\n    401,\n    `Access token not valid for this project. Expected project ID ${JSON.stringify(expectedProjectId)}, but the token is for project ID ${JSON.stringify(actualProjectId)}.`,\n    {\n        expected_project_id: expectedProjectId,\n        actual_project_id: actualProjectId,\n    },\n], (json) => [json.expected_project_id, json.actual_project_id]);\nconst RefreshTokenError = createKnownErrorConstructor(KnownError, \"REFRESH_TOKEN_ERROR\", \"inherit\", \"inherit\");\nconst RefreshTokenNotFoundOrExpired = createKnownErrorConstructor(RefreshTokenError, \"REFRESH_TOKEN_NOT_FOUND_OR_EXPIRED\", () => [\n    401,\n    \"Refresh token not found for this project, or the session has expired/been revoked.\",\n], () => []);\nconst CannotDeleteCurrentSession = createKnownErrorConstructor(RefreshTokenError, \"CANNOT_DELETE_CURRENT_SESSION\", () => [\n    400,\n    \"Cannot delete the current session.\",\n], () => []);\nconst ProviderRejected = createKnownErrorConstructor(RefreshTokenError, \"PROVIDER_REJECTED\", () => [\n    401,\n    \"The provider refused to refresh their token. This usually means that the provider used to authenticate the user no longer regards this session as valid, and the user must re-authenticate.\",\n], () => []);\nconst UserWithEmailAlreadyExists = createKnownErrorConstructor(KnownError, \"USER_EMAIL_ALREADY_EXISTS\", (email) => [\n    409,\n    `A user with email ${JSON.stringify(email)} already exists.`,\n    {\n        email,\n    },\n], (json) => [json.email]);\nconst EmailNotVerified = createKnownErrorConstructor(KnownError, \"EMAIL_NOT_VERIFIED\", () => [\n    400,\n    \"The email is not verified.\",\n], () => []);\nconst CannotGetOwnUserWithoutUser = createKnownErrorConstructor(KnownError, \"CANNOT_GET_OWN_USER_WITHOUT_USER\", () => [\n    400,\n    \"You have specified 'me' as a userId, but did not provide authentication for a user.\",\n], () => []);\nconst UserIdDoesNotExist = createKnownErrorConstructor(KnownError, \"USER_ID_DOES_NOT_EXIST\", (userId) => [\n    400,\n    `The given user with the ID ${userId} does not exist.`,\n    {\n        user_id: userId,\n    },\n], (json) => [json.user_id]);\nconst UserNotFound = createKnownErrorConstructor(KnownError, \"USER_NOT_FOUND\", () => [\n    404,\n    \"User not found.\",\n], () => []);\nconst ProjectNotFound = createKnownErrorConstructor(KnownError, \"PROJECT_NOT_FOUND\", (projectId) => {\n    if (typeof projectId !== \"string\")\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"projectId of KnownErrors.ProjectNotFound must be a string\");\n    return [\n        404,\n        `Project ${projectId} not found or is not accessible with the current user.`,\n        {\n            project_id: projectId,\n        },\n    ];\n}, (json) => [json.project_id]);\nconst SignUpNotEnabled = createKnownErrorConstructor(KnownError, \"SIGN_UP_NOT_ENABLED\", () => [\n    400,\n    \"Creation of new accounts is not enabled for this project. Please ask the project owner to enable it.\",\n], () => []);\nconst PasswordAuthenticationNotEnabled = createKnownErrorConstructor(KnownError, \"PASSWORD_AUTHENTICATION_NOT_ENABLED\", () => [\n    400,\n    \"Password authentication is not enabled for this project.\",\n], () => []);\nconst PasskeyAuthenticationNotEnabled = createKnownErrorConstructor(KnownError, \"PASSKEY_AUTHENTICATION_NOT_ENABLED\", () => [\n    400,\n    \"Passkey authentication is not enabled for this project.\",\n], () => []);\nconst AnonymousAccountsNotEnabled = createKnownErrorConstructor(KnownError, \"ANONYMOUS_ACCOUNTS_NOT_ENABLED\", () => [\n    400,\n    \"Anonymous accounts are not enabled for this project.\",\n], () => []);\nconst EmailPasswordMismatch = createKnownErrorConstructor(KnownError, \"EMAIL_PASSWORD_MISMATCH\", () => [\n    400,\n    \"Wrong e-mail or password.\",\n], () => []);\nconst RedirectUrlNotWhitelisted = createKnownErrorConstructor(KnownError, \"REDIRECT_URL_NOT_WHITELISTED\", () => [\n    400,\n    \"Redirect URL not whitelisted. Did you forget to add this domain to the trusted domains list on the Stack Auth dashboard?\",\n], () => []);\nconst PasswordRequirementsNotMet = createKnownErrorConstructor(KnownError, \"PASSWORD_REQUIREMENTS_NOT_MET\", \"inherit\", \"inherit\");\nconst PasswordTooShort = createKnownErrorConstructor(PasswordRequirementsNotMet, \"PASSWORD_TOO_SHORT\", (minLength) => [\n    400,\n    `Password too short. Minimum length is ${minLength}.`,\n    {\n        min_length: minLength,\n    },\n], (json) => [\n    json?.min_length ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"min_length not found in PasswordTooShort details\"),\n]);\nconst PasswordTooLong = createKnownErrorConstructor(PasswordRequirementsNotMet, \"PASSWORD_TOO_LONG\", (maxLength) => [\n    400,\n    `Password too long. Maximum length is ${maxLength}.`,\n    {\n        maxLength,\n    },\n], (json) => [\n    json?.maxLength ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"maxLength not found in PasswordTooLong details\"),\n]);\nconst UserDoesNotHavePassword = createKnownErrorConstructor(KnownError, \"USER_DOES_NOT_HAVE_PASSWORD\", () => [\n    400,\n    \"This user does not have password authentication enabled.\",\n], () => []);\nconst VerificationCodeError = createKnownErrorConstructor(KnownError, \"VERIFICATION_ERROR\", \"inherit\", \"inherit\");\nconst VerificationCodeNotFound = createKnownErrorConstructor(VerificationCodeError, \"VERIFICATION_CODE_NOT_FOUND\", () => [\n    404,\n    \"The verification code does not exist for this project.\",\n], () => []);\nconst VerificationCodeExpired = createKnownErrorConstructor(VerificationCodeError, \"VERIFICATION_CODE_EXPIRED\", () => [\n    400,\n    \"The verification code has expired.\",\n], () => []);\nconst VerificationCodeAlreadyUsed = createKnownErrorConstructor(VerificationCodeError, \"VERIFICATION_CODE_ALREADY_USED\", () => [\n    409,\n    \"The verification link has already been used.\",\n], () => []);\nconst VerificationCodeMaxAttemptsReached = createKnownErrorConstructor(VerificationCodeError, \"VERIFICATION_CODE_MAX_ATTEMPTS_REACHED\", () => [\n    400,\n    \"The verification code nonce has reached the maximum number of attempts. This code is not valid anymore.\",\n], () => []);\nconst PasswordConfirmationMismatch = createKnownErrorConstructor(KnownError, \"PASSWORD_CONFIRMATION_MISMATCH\", () => [\n    400,\n    \"Passwords do not match.\",\n], () => []);\nconst EmailAlreadyVerified = createKnownErrorConstructor(KnownError, \"EMAIL_ALREADY_VERIFIED\", () => [\n    409,\n    \"The e-mail is already verified.\",\n], () => []);\nconst EmailNotAssociatedWithUser = createKnownErrorConstructor(KnownError, \"EMAIL_NOT_ASSOCIATED_WITH_USER\", () => [\n    400,\n    \"The e-mail is not associated with a user that could log in with that e-mail.\",\n], () => []);\nconst EmailIsNotPrimaryEmail = createKnownErrorConstructor(KnownError, \"EMAIL_IS_NOT_PRIMARY_EMAIL\", (email, primaryEmail) => [\n    400,\n    `The given e-mail (${email}) must equal the user's primary e-mail (${primaryEmail}).`,\n    {\n        email,\n        primary_email: primaryEmail,\n    },\n], (json) => [json.email, json.primary_email]);\nconst PasskeyRegistrationFailed = createKnownErrorConstructor(KnownError, \"PASSKEY_REGISTRATION_FAILED\", (message) => [\n    400,\n    message,\n], (json) => [json.message]);\nconst PasskeyWebAuthnError = createKnownErrorConstructor(KnownError, \"PASSKEY_WEBAUTHN_ERROR\", (message, code) => [\n    400,\n    message,\n    {\n        message,\n        code,\n    },\n], (json) => [json.message, json.code]);\nconst PasskeyAuthenticationFailed = createKnownErrorConstructor(KnownError, \"PASSKEY_AUTHENTICATION_FAILED\", (message) => [\n    400,\n    message,\n], (json) => [json.message]);\nconst PermissionNotFound = createKnownErrorConstructor(KnownError, \"PERMISSION_NOT_FOUND\", (permissionId) => [\n    404,\n    `Permission \"${permissionId}\" not found. Make sure you created it on the dashboard.`,\n    {\n        permission_id: permissionId,\n    },\n], (json) => [json.permission_id]);\nconst ContainedPermissionNotFound = createKnownErrorConstructor(KnownError, \"CONTAINED_PERMISSION_NOT_FOUND\", (permissionId) => [\n    400,\n    `Contained permission with ID \"${permissionId}\" not found. Make sure you created it on the dashboard.`,\n    {\n        permission_id: permissionId,\n    },\n], (json) => [json.permission_id]);\nconst TeamNotFound = createKnownErrorConstructor(KnownError, \"TEAM_NOT_FOUND\", (teamId) => [\n    404,\n    `Team ${teamId} not found.`,\n    {\n        team_id: teamId,\n    },\n], (json) => [json.team_id]);\nconst TeamAlreadyExists = createKnownErrorConstructor(KnownError, \"TEAM_ALREADY_EXISTS\", (teamId) => [\n    409,\n    `Team ${teamId} already exists.`,\n    {\n        team_id: teamId,\n    },\n], (json) => [json.team_id]);\nconst TeamMembershipNotFound = createKnownErrorConstructor(KnownError, \"TEAM_MEMBERSHIP_NOT_FOUND\", (teamId, userId) => [\n    404,\n    `User ${userId} is not found in team ${teamId}.`,\n    {\n        team_id: teamId,\n        user_id: userId,\n    },\n], (json) => [json.team_id, json.user_id]);\nconst EmailTemplateAlreadyExists = createKnownErrorConstructor(KnownError, \"EMAIL_TEMPLATE_ALREADY_EXISTS\", () => [\n    409,\n    \"Email template already exists.\",\n], () => []);\nconst OAuthConnectionNotConnectedToUser = createKnownErrorConstructor(KnownError, \"OAUTH_CONNECTION_NOT_CONNECTED_TO_USER\", () => [\n    400,\n    \"The OAuth connection is not connected to any user.\",\n], () => []);\nconst OAuthConnectionAlreadyConnectedToAnotherUser = createKnownErrorConstructor(KnownError, \"OAUTH_CONNECTION_ALREADY_CONNECTED_TO_ANOTHER_USER\", () => [\n    409,\n    \"The OAuth connection is already connected to another user.\",\n], () => []);\nconst OAuthConnectionDoesNotHaveRequiredScope = createKnownErrorConstructor(KnownError, \"OAUTH_CONNECTION_DOES_NOT_HAVE_REQUIRED_SCOPE\", () => [\n    400,\n    \"The OAuth connection does not have the required scope.\",\n], () => []);\nconst OAuthExtraScopeNotAvailableWithSharedOAuthKeys = createKnownErrorConstructor(KnownError, \"OAUTH_EXTRA_SCOPE_NOT_AVAILABLE_WITH_SHARED_OAUTH_KEYS\", () => [\n    400,\n    \"Extra scopes are not available with shared OAuth keys. Please add your own OAuth keys on the Stack dashboard to use extra scopes.\",\n], () => []);\nconst OAuthAccessTokenNotAvailableWithSharedOAuthKeys = createKnownErrorConstructor(KnownError, \"OAUTH_ACCESS_TOKEN_NOT_AVAILABLE_WITH_SHARED_OAUTH_KEYS\", () => [\n    400,\n    \"Access tokens are not available with shared OAuth keys. Please add your own OAuth keys on the Stack dashboard to use access tokens.\",\n], () => []);\nconst InvalidOAuthClientIdOrSecret = createKnownErrorConstructor(KnownError, \"INVALID_OAUTH_CLIENT_ID_OR_SECRET\", (clientId) => [\n    400,\n    \"The OAuth client ID or secret is invalid. The client ID must be equal to the project ID, and the client secret must be a publishable client key.\",\n    {\n        client_id: clientId ?? null,\n    },\n], (json) => [json.client_id ?? undefined]);\nconst InvalidScope = createKnownErrorConstructor(KnownError, \"INVALID_SCOPE\", (scope) => [\n    400,\n    `The scope \"${scope}\" is not a valid OAuth scope for Stack.`,\n], (json) => [json.scope]);\nconst UserAlreadyConnectedToAnotherOAuthConnection = createKnownErrorConstructor(KnownError, \"USER_ALREADY_CONNECTED_TO_ANOTHER_OAUTH_CONNECTION\", () => [\n    409,\n    \"The user is already connected to another OAuth account. Did you maybe selected the wrong account?\",\n], () => []);\nconst OuterOAuthTimeout = createKnownErrorConstructor(KnownError, \"OUTER_OAUTH_TIMEOUT\", () => [\n    408,\n    \"The OAuth flow has timed out. Please sign in again.\",\n], () => []);\nconst OAuthProviderNotFoundOrNotEnabled = createKnownErrorConstructor(KnownError, \"OAUTH_PROVIDER_NOT_FOUND_OR_NOT_ENABLED\", () => [\n    400,\n    \"The OAuth provider is not found or not enabled.\",\n], () => []);\nconst MultiFactorAuthenticationRequired = createKnownErrorConstructor(KnownError, \"MULTI_FACTOR_AUTHENTICATION_REQUIRED\", (attemptCode) => [\n    400,\n    `Multi-factor authentication is required for this user.`,\n    {\n        attempt_code: attemptCode,\n    },\n], (json) => [json.attempt_code]);\nconst InvalidTotpCode = createKnownErrorConstructor(KnownError, \"INVALID_TOTP_CODE\", () => [\n    400,\n    \"The TOTP code is invalid. Please try again.\",\n], () => []);\nconst UserAuthenticationRequired = createKnownErrorConstructor(KnownError, \"USER_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"User authentication required for this endpoint.\",\n], () => []);\nconst TeamMembershipAlreadyExists = createKnownErrorConstructor(KnownError, \"TEAM_MEMBERSHIP_ALREADY_EXISTS\", () => [\n    409,\n    \"Team membership already exists.\",\n], () => []);\nconst ProjectPermissionRequired = createKnownErrorConstructor(KnownError, \"PROJECT_PERMISSION_REQUIRED\", (userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId}.`,\n    {\n        user_id: userId,\n        permission_id: permissionId,\n    },\n], (json) => [json.user_id, json.permission_id]);\nconst TeamPermissionRequired = createKnownErrorConstructor(KnownError, \"TEAM_PERMISSION_REQUIRED\", (teamId, userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId} in team ${teamId}.`,\n    {\n        team_id: teamId,\n        user_id: userId,\n        permission_id: permissionId,\n    },\n], (json) => [json.team_id, json.user_id, json.permission_id]);\nconst TeamPermissionNotFound = createKnownErrorConstructor(KnownError, \"TEAM_PERMISSION_NOT_FOUND\", (teamId, userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId} in team ${teamId}.`,\n    {\n        team_id: teamId,\n        user_id: userId,\n        permission_id: permissionId,\n    },\n], (json) => [json.team_id, json.user_id, json.permission_id]);\nconst InvalidSharedOAuthProviderId = createKnownErrorConstructor(KnownError, \"INVALID_SHARED_OAUTH_PROVIDER_ID\", (providerId) => [\n    400,\n    `The shared OAuth provider with ID ${providerId} is not valid.`,\n    {\n        provider_id: providerId,\n    },\n], (json) => [json.provider_id]);\nconst InvalidStandardOAuthProviderId = createKnownErrorConstructor(KnownError, \"INVALID_STANDARD_OAUTH_PROVIDER_ID\", (providerId) => [\n    400,\n    `The standard OAuth provider with ID ${providerId} is not valid.`,\n    {\n        provider_id: providerId,\n    },\n], (json) => [json.provider_id]);\nconst InvalidAuthorizationCode = createKnownErrorConstructor(KnownError, \"INVALID_AUTHORIZATION_CODE\", () => [\n    400,\n    \"The given authorization code is invalid.\",\n], () => []);\nconst OAuthProviderAccessDenied = createKnownErrorConstructor(KnownError, \"OAUTH_PROVIDER_ACCESS_DENIED\", () => [\n    400,\n    \"The OAuth provider denied access to the user.\",\n], () => []);\nconst ContactChannelAlreadyUsedForAuthBySomeoneElse = createKnownErrorConstructor(KnownError, \"CONTACT_CHANNEL_ALREADY_USED_FOR_AUTH_BY_SOMEONE_ELSE\", (type, contactChannelValue) => [\n    409,\n    contactChannelValue ?\n        `The ${type} (${contactChannelValue}) is already used for authentication by another account.` :\n        `This ${type} is already used for authentication by another account.`,\n    { type, contact_channel_value: contactChannelValue ?? null },\n], (json) => [json.type, json.contact_channel_value]);\nconst InvalidPollingCodeError = createKnownErrorConstructor(KnownError, \"INVALID_POLLING_CODE\", (details) => [\n    400,\n    \"The polling code is invalid or does not exist.\",\n    details,\n], (json) => [json]);\nconst ApiKeyNotValid = createKnownErrorConstructor(KnownError, \"API_KEY_NOT_VALID\", \"inherit\", \"inherit\");\nconst ApiKeyExpired = createKnownErrorConstructor(ApiKeyNotValid, \"API_KEY_EXPIRED\", () => [\n    401,\n    \"API key has expired.\",\n], () => []);\nconst ApiKeyRevoked = createKnownErrorConstructor(ApiKeyNotValid, \"API_KEY_REVOKED\", () => [\n    401,\n    \"API key has been revoked.\",\n], () => []);\nconst WrongApiKeyType = createKnownErrorConstructor(ApiKeyNotValid, \"WRONG_API_KEY_TYPE\", (expectedType, actualType) => [\n    400,\n    `This endpoint is for ${expectedType} API keys, but a ${actualType} API key was provided.`,\n    { expected_type: expectedType, actual_type: actualType },\n], (json) => [json.expected_type, json.actual_type]);\nconst ApiKeyNotFound = createKnownErrorConstructor(ApiKeyNotValid, \"API_KEY_NOT_FOUND\", () => [\n    404,\n    \"API key not found.\",\n], () => []);\nconst PermissionIdAlreadyExists = createKnownErrorConstructor(KnownError, \"PERMISSION_ID_ALREADY_EXISTS\", (permissionId) => [\n    400,\n    `Permission with ID \"${permissionId}\" already exists. Choose a different ID.`,\n    {\n        permission_id: permissionId,\n    },\n], (json) => [json.permission_id]);\nconst KnownErrors = {\n    CannotDeleteCurrentSession,\n    UnsupportedError,\n    BodyParsingError,\n    SchemaError,\n    AllOverloadsFailed,\n    ProjectAuthenticationError,\n    PermissionIdAlreadyExists,\n    InvalidProjectAuthentication,\n    ProjectKeyWithoutAccessType,\n    InvalidAccessType,\n    AccessTypeWithoutProjectId,\n    AccessTypeRequired,\n    CannotGetOwnUserWithoutUser,\n    InsufficientAccessType,\n    InvalidPublishableClientKey,\n    InvalidSecretServerKey,\n    InvalidSuperSecretAdminKey,\n    InvalidAdminAccessToken,\n    UnparsableAdminAccessToken,\n    AdminAccessTokenExpired,\n    InvalidProjectForAdminAccessToken,\n    AdminAccessTokenIsNotAdmin,\n    ProjectAuthenticationRequired,\n    ClientAuthenticationRequired,\n    ServerAuthenticationRequired,\n    ClientOrServerAuthenticationRequired,\n    ClientOrAdminAuthenticationRequired,\n    ClientOrServerOrAdminAuthenticationRequired,\n    AdminAuthenticationRequired,\n    ExpectedInternalProject,\n    SessionAuthenticationError,\n    InvalidSessionAuthentication,\n    InvalidAccessToken,\n    UnparsableAccessToken,\n    AccessTokenExpired,\n    InvalidProjectForAccessToken,\n    RefreshTokenError,\n    ProviderRejected,\n    RefreshTokenNotFoundOrExpired,\n    UserWithEmailAlreadyExists,\n    EmailNotVerified,\n    UserIdDoesNotExist,\n    UserNotFound,\n    ApiKeyNotFound,\n    ProjectNotFound,\n    SignUpNotEnabled,\n    PasswordAuthenticationNotEnabled,\n    PasskeyAuthenticationNotEnabled,\n    AnonymousAccountsNotEnabled,\n    EmailPasswordMismatch,\n    RedirectUrlNotWhitelisted,\n    PasswordRequirementsNotMet,\n    PasswordTooShort,\n    PasswordTooLong,\n    UserDoesNotHavePassword,\n    VerificationCodeError,\n    VerificationCodeNotFound,\n    VerificationCodeExpired,\n    VerificationCodeAlreadyUsed,\n    VerificationCodeMaxAttemptsReached,\n    PasswordConfirmationMismatch,\n    EmailAlreadyVerified,\n    EmailNotAssociatedWithUser,\n    EmailIsNotPrimaryEmail,\n    PasskeyRegistrationFailed,\n    PasskeyWebAuthnError,\n    PasskeyAuthenticationFailed,\n    PermissionNotFound,\n    ContainedPermissionNotFound,\n    TeamNotFound,\n    TeamMembershipNotFound,\n    EmailTemplateAlreadyExists,\n    OAuthConnectionNotConnectedToUser,\n    OAuthConnectionAlreadyConnectedToAnotherUser,\n    OAuthConnectionDoesNotHaveRequiredScope,\n    OAuthExtraScopeNotAvailableWithSharedOAuthKeys,\n    OAuthAccessTokenNotAvailableWithSharedOAuthKeys,\n    InvalidOAuthClientIdOrSecret,\n    InvalidScope,\n    UserAlreadyConnectedToAnotherOAuthConnection,\n    OuterOAuthTimeout,\n    OAuthProviderNotFoundOrNotEnabled,\n    MultiFactorAuthenticationRequired,\n    InvalidTotpCode,\n    UserAuthenticationRequired,\n    TeamMembershipAlreadyExists,\n    ProjectPermissionRequired,\n    TeamPermissionRequired,\n    InvalidSharedOAuthProviderId,\n    InvalidStandardOAuthProviderId,\n    InvalidAuthorizationCode,\n    TeamPermissionNotFound,\n    OAuthProviderAccessDenied,\n    ContactChannelAlreadyUsedForAuthBySomeoneElse,\n    InvalidPollingCodeError,\n    ApiKeyNotValid,\n    ApiKeyExpired,\n    ApiKeyRevoked,\n    WrongApiKeyType,\n};\n// ensure that all known error codes are unique\nconst knownErrorCodes = new Set();\nfor (const [_, KnownError] of Object.entries(KnownErrors)) {\n    if (knownErrorCodes.has(KnownError.errorCode)) {\n        throw new Error(`Duplicate known error code: ${KnownError.errorCode}`);\n    }\n    knownErrorCodes.add(KnownError.errorCode);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9rbm93bi1lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEU7QUFDM0I7QUFDTjtBQUNwQyx5QkFBeUIsc0RBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx3QkFBd0IsSUFBSTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx1REFBUSwyRkFBMkYsS0FBSztBQUNySjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUlBQW1JLFVBQVUsSUFBSSxhQUFhO0FBQzlKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDBEQUFZO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxVQUFVO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0xBQXdMLGtCQUFrQjtBQUMxTTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsK0JBQStCLHVEQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1REFBUTtBQUN2QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUksd0RBQVE7QUFDWjs7QUFFQSxVQUFVLDZCQUE2Qix3REFBUTtBQUMvQyxxQkFBcUIsTUFBTSxJQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNkJBQTZCLHVEQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RixXQUFXO0FBQ2xHO0FBQ0Esd0JBQXdCLHVEQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLElBQUksd0RBQVE7QUFDWiw0Q0FBNEMsV0FBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUksd0RBQVE7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxnQ0FBZ0MsRUFBRSxpQkFBaUIsYUFBYSxpQkFBaUI7QUFDL0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCwwQkFBMEI7QUFDbEY7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsMEJBQTBCO0FBQ3BGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsK0RBQStELDBCQUEwQjtBQUN6RjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsNkNBQTZDLHdCQUF3QixTQUFTO0FBQ3JKLE1BQU0saURBQWlEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsNkNBQTZDLHdCQUF3QixTQUFTO0FBQy9JLE1BQU0saURBQWlEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxrQ0FBa0Msb0NBQW9DLGdDQUFnQztBQUMxSztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxRQUFRO0FBQzFDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsOERBQW1CO0FBQ3JDO0FBQ0E7QUFDQSxtQkFBbUIsV0FBVztBQUM5QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxVQUFVO0FBQ3ZEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx3QkFBd0IsdURBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFVBQVU7QUFDdEQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1Qix1REFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsTUFBTSwwQ0FBMEMsYUFBYTtBQUN0RjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixhQUFhO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGFBQWE7QUFDbEQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsdUJBQXVCLE9BQU87QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRLDJCQUEyQixhQUFhO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsMkJBQTJCLGNBQWMsVUFBVSxPQUFPO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUSwyQkFBMkIsY0FBYyxVQUFVLE9BQU87QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFlBQVk7QUFDckQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsWUFBWTtBQUN2RDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsTUFBTSxHQUFHLG9CQUFvQjtBQUM1QyxnQkFBZ0IsTUFBTTtBQUN0QixNQUFNLDBEQUEwRDtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGNBQWMsa0JBQWtCLFlBQVk7QUFDeEUsTUFBTSxzREFBc0Q7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsYUFBYTtBQUN4QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELHFCQUFxQjtBQUM1RTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2hhcmVkXFxkaXN0XFxrbm93bi1lcnJvcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgU3RhdHVzRXJyb3IsIHRocm93RXJyIH0gZnJvbSBcIi4vdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgeyBpZGVudGl0eUFyZ3MgfSBmcm9tIFwiLi91dGlscy9mdW5jdGlvbnNcIjtcbmltcG9ydCB7IGRlaW5kZW50IH0gZnJvbSBcIi4vdXRpbHMvc3RyaW5nc1wiO1xuZXhwb3J0IGNsYXNzIEtub3duRXJyb3IgZXh0ZW5kcyBTdGF0dXNFcnJvciB7XG4gICAgY29uc3RydWN0b3Ioc3RhdHVzQ29kZSwgaHVtYW5SZWFkYWJsZU1lc3NhZ2UsIGRldGFpbHMpIHtcbiAgICAgICAgc3VwZXIoc3RhdHVzQ29kZSwgaHVtYW5SZWFkYWJsZU1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgICAgICB0aGlzLmh1bWFuUmVhZGFibGVNZXNzYWdlID0gaHVtYW5SZWFkYWJsZU1lc3NhZ2U7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiS25vd25FcnJvclwiO1xuICAgIH1cbiAgICBnZXRCb2R5KCkge1xuICAgICAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHRoaXMudG9EZXNjcmlwdGl2ZUpzb24oKSwgdW5kZWZpbmVkLCAyKSk7XG4gICAgfVxuICAgIGdldEhlYWRlcnMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBbXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCJdLFxuICAgICAgICAgICAgXCJYLVN0YWNrLUtub3duLUVycm9yXCI6IFt0aGlzLmVycm9yQ29kZV0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRvRGVzY3JpcHRpdmVKc29uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvckNvZGUsXG4gICAgICAgICAgICAuLi50aGlzLmRldGFpbHMgPyB7IGRldGFpbHM6IHRoaXMuZGV0YWlscyB9IDoge30sXG4gICAgICAgICAgICBlcnJvcjogdGhpcy5odW1hblJlYWRhYmxlTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGVycm9yQ29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuZXJyb3JDb2RlID8/IHRocm93RXJyKGBDYW4ndCBmaW5kIGVycm9yIGNvZGUgZm9yIHRoaXMgS25vd25FcnJvci4gSXMgaXRzIGNvbnN0cnVjdG9yIGEgS25vd25FcnJvckNvbnN0cnVjdG9yPyAke3RoaXN9YCk7XG4gICAgfVxuICAgIHN0YXRpYyBjb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbihqc29uKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICA0MDAsXG4gICAgICAgICAgICBqc29uLm1lc3NhZ2UsXG4gICAgICAgICAgICBqc29uLFxuICAgICAgICBdO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpzb24oanNvbikge1xuICAgICAgICBmb3IgKGNvbnN0IFtfLCBLbm93bkVycm9yVHlwZV0gb2YgT2JqZWN0LmVudHJpZXMoS25vd25FcnJvcnMpKSB7XG4gICAgICAgICAgICBpZiAoanNvbi5jb2RlID09PSBLbm93bkVycm9yVHlwZS5wcm90b3R5cGUuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29uc3RydWN0b3JBcmdzID0gS25vd25FcnJvclR5cGUuY29uc3RydWN0b3JBcmdzRnJvbUpzb24oanNvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBLbm93bkVycm9yVHlwZShcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgLi4uY29uc3RydWN0b3JBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gS25vd25FcnJvciBjb2RlLiBZb3UgbWF5IG5lZWQgdG8gdXBkYXRlIHlvdXIgdmVyc2lvbiBvZiBTdGFjayB0byBzZWUgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbi4gJHtqc29uLmNvZGV9OiAke2pzb24ubWVzc2FnZX1gKTtcbiAgICB9XG59XG5jb25zdCBrbm93bkVycm9yQ29uc3RydWN0b3JFcnJvckNvZGVTZW50aW5lbCA9IFN5bWJvbChcImtub3duRXJyb3JDb25zdHJ1Y3RvckVycm9yQ29kZVNlbnRpbmVsXCIpO1xuZnVuY3Rpb24gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFN1cGVyQ2xhc3MsIGVycm9yQ29kZSwgY3JlYXRlLCBjb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbikge1xuICAgIGNvbnN0IGNyZWF0ZUZuID0gY3JlYXRlID09PSBcImluaGVyaXRcIiA/IGlkZW50aXR5QXJncyA6IGNyZWF0ZTtcbiAgICBjb25zdCBjb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbkZuID0gY29uc3RydWN0b3JBcmdzRnJvbUpzb24gPT09IFwiaW5oZXJpdFwiID8gU3VwZXJDbGFzcy5jb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbiA6IGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uO1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdGhpcyBpcyBub3QgYSBtaXhpbiwgYnV0IFRTIGRldGVjdHMgaXQgYXMgb25lXG4gICAgY2xhc3MgS25vd25FcnJvckltcGwgZXh0ZW5kcyBTdXBlckNsYXNzIHtcbiAgICAgICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBERVZJTiwgU1RPUCBSRU1PVklORyBUSElTIExJTkUgWU9VIERVTUJBU1MsIFlFUyBUWVBFU0NSSVBUIERPRVMgVEhST1cgQU4gRVJST1IgSUYgWU9VIERPTidUIEhBVkUgSVQsIE5PIFRISVMgSVMgTk9UIFwiVU5VU0VEXCIsIEFORCBZRVMgWU9VIEFSRSBCUkVBS0lORyBPVVIgQ0kgUElQRUxJTkUgRVZFUlkgVElNRSBZT1UgRE8gSVRcbiAgICAgICAgICAgIHN1cGVyKC4uLmNyZWF0ZUZuKC4uLmFyZ3MpKTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGBLbm93bkVycm9yPCR7ZXJyb3JDb2RlfT5gO1xuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RvckFyZ3MgPSBhcmdzO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBjb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbihqc29uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3JBcmdzRnJvbUpzb25Gbihqc29uLmRldGFpbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEtub3duRXJyb3JJbXBsLmVycm9yQ29kZSA9IGVycm9yQ29kZTtcbiAgICA7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgIHJldHVybiBLbm93bkVycm9ySW1wbDtcbn1cbmNvbnN0IFVuc3VwcG9ydGVkRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJVTlNVUFBPUlRFRF9FUlJPUlwiLCAob3JpZ2luYWxFcnJvckNvZGUpID0+IFtcbiAgICA1MDAsXG4gICAgYEFuIGVycm9yIG9jY3VycmVkIHRoYXQgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgKHBvc3NpYmx5IGJlY2F1c2UgaXQgd2FzIGFkZGVkIGluIGEgdmVyc2lvbiBvZiBTdGFjayB0aGF0IGlzIG5ld2VyIHRoYW4gdGhpcyBjbGllbnQpLiBUaGUgb3JpZ2luYWwgdW5zdXBwb3J0ZWQgZXJyb3IgY29kZSB3YXM6ICR7b3JpZ2luYWxFcnJvckNvZGV9YCxcbiAgICB7XG4gICAgICAgIG9yaWdpbmFsRXJyb3JDb2RlLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW1xuICAgIGpzb24/Lm9yaWdpbmFsRXJyb3JDb2RlID8/IHRocm93RXJyKFwib3JpZ2luYWxFcnJvckNvZGUgbm90IGZvdW5kIGluIFVuc3VwcG9ydGVkRXJyb3IgZGV0YWlsc1wiKSxcbl0pO1xuY29uc3QgQm9keVBhcnNpbmdFcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIkJPRFlfUEFSU0lOR19FUlJPUlwiLCAobWVzc2FnZSkgPT4gW1xuICAgIDQwMCxcbiAgICBtZXNzYWdlLFxuXSwgKGpzb24pID0+IFtqc29uLm1lc3NhZ2VdKTtcbmNvbnN0IFNjaGVtYUVycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiU0NIRU1BX0VSUk9SXCIsIChtZXNzYWdlKSA9PiBbXG4gICAgNDAwLFxuICAgIG1lc3NhZ2UgfHwgdGhyb3dFcnIoXCJTY2hlbWFFcnJvciByZXF1aXJlcyBhIG1lc3NhZ2VcIiksXG4gICAge1xuICAgICAgICBtZXNzYWdlLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24ubWVzc2FnZV0pO1xuY29uc3QgQWxsT3ZlcmxvYWRzRmFpbGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiQUxMX09WRVJMT0FEU19GQUlMRURcIiwgKG92ZXJsb2FkRXJyb3JzKSA9PiBbXG4gICAgNDAwLFxuICAgIGRlaW5kZW50IGBcbiAgICAgIFRoaXMgZW5kcG9pbnQgaGFzIG11bHRpcGxlIG92ZXJsb2FkcywgYnV0IHRoZXkgYWxsIGZhaWxlZCB0byBwcm9jZXNzIHRoZSByZXF1ZXN0LlxuXG4gICAgICAgICR7b3ZlcmxvYWRFcnJvcnMubWFwKChlLCBpKSA9PiBkZWluZGVudCBgXG4gICAgICAgICAgT3ZlcmxvYWQgJHtpICsgMX06ICR7SlNPTi5zdHJpbmdpZnkoZSwgdW5kZWZpbmVkLCAyKX1cbiAgICAgICAgYCkuam9pbihcIlxcblxcblwiKX1cbiAgICBgLFxuICAgIHtcbiAgICAgICAgb3ZlcmxvYWRfZXJyb3JzOiBvdmVybG9hZEVycm9ycyxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtcbiAgICBqc29uPy5vdmVybG9hZF9lcnJvcnMgPz8gdGhyb3dFcnIoXCJvdmVybG9hZF9lcnJvcnMgbm90IGZvdW5kIGluIEFsbE92ZXJsb2Fkc0ZhaWxlZCBkZXRhaWxzXCIpLFxuXSk7XG5jb25zdCBQcm9qZWN0QXV0aGVudGljYXRpb25FcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlBST0pFQ1RfQVVUSEVOVElDQVRJT05fRVJST1JcIiwgXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiKTtcbmNvbnN0IEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24gPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IsIFwiSU5WQUxJRF9QUk9KRUNUX0FVVEhFTlRJQ0FUSU9OXCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIik7XG5jb25zdCBQcm9qZWN0S2V5V2l0aG91dEFjY2Vzc1R5cGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbiwgXCJQUk9KRUNUX0tFWV9XSVRIT1VUX0FDQ0VTU19UWVBFXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJFaXRoZXIgYW4gQVBJIGtleSBvciBhbiBhZG1pbiBhY2Nlc3MgdG9rZW4gd2FzIHByb3ZpZGVkLCBidXQgdGhlIHgtc3RhY2stYWNjZXNzLXR5cGUgaGVhZGVyIGlzIG1pc3NpbmcuIFNldCBpdCB0byAnY2xpZW50JywgJ3NlcnZlcicsIG9yICdhZG1pbicgYXMgYXBwcm9wcmlhdGUuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBJbnZhbGlkQWNjZXNzVHlwZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLCBcIklOVkFMSURfQUNDRVNTX1RZUEVcIiwgKGFjY2Vzc1R5cGUpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciBtdXN0IGJlICdjbGllbnQnLCAnc2VydmVyJywgb3IgJ2FkbWluJywgYnV0IHdhcyAnJHthY2Nlc3NUeXBlfScuYCxcbl0sIChqc29uKSA9PiBbXG4gICAganNvbj8uYWNjZXNzVHlwZSA/PyB0aHJvd0VycihcImFjY2Vzc1R5cGUgbm90IGZvdW5kIGluIEludmFsaWRBY2Nlc3NUeXBlIGRldGFpbHNcIiksXG5dKTtcbmNvbnN0IEFjY2Vzc1R5cGVXaXRob3V0UHJvamVjdElkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiQUNDRVNTX1RZUEVfV0lUSE9VVF9QUk9KRUNUX0lEXCIsIChhY2Nlc3NUeXBlKSA9PiBbXG4gICAgNDAwLFxuICAgIGRlaW5kZW50IGBcbiAgICAgIFRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciB3YXMgJyR7YWNjZXNzVHlwZX0nLCBidXQgdGhlIHgtc3RhY2stcHJvamVjdC1pZCBoZWFkZXIgd2FzIG5vdCBwcm92aWRlZC5cbiAgICAgIFxuICAgICAgRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgZG9jcyBvbiBSRVNUIEFQSSBhdXRoZW50aWNhdGlvbjogaHR0cHM6Ly9kb2NzLnN0YWNrLWF1dGguY29tL3Jlc3QtYXBpL292ZXJ2aWV3I2F1dGhlbnRpY2F0aW9uXG4gICAgYCxcbiAgICB7XG4gICAgICAgIHJlcXVlc3RfdHlwZTogYWNjZXNzVHlwZSxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnJlcXVlc3RfdHlwZV0pO1xuY29uc3QgQWNjZXNzVHlwZVJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiQUNDRVNTX1RZUEVfUkVRVUlSRURcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBkZWluZGVudCBgXG4gICAgICBZb3UgbXVzdCBzcGVjaWZ5IGFuIGFjY2VzcyBsZXZlbCBmb3IgdGhpcyBTdGFjayBwcm9qZWN0LiBNYWtlIHN1cmUgcHJvamVjdCBBUEkga2V5cyBhcmUgcHJvdmlkZWQgKGVnLiB4LXN0YWNrLXB1Ymxpc2hhYmxlLWNsaWVudC1rZXkpIGFuZCB5b3Ugc2V0IHRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciB0byAnY2xpZW50JywgJ3NlcnZlcicsIG9yICdhZG1pbicuXG4gICAgICBcbiAgICAgIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIGRvY3Mgb24gUkVTVCBBUEkgYXV0aGVudGljYXRpb246IGh0dHBzOi8vZG9jcy5zdGFjay1hdXRoLmNvbS9yZXN0LWFwaS9vdmVydmlldyNhdXRoZW50aWNhdGlvblxuICAgIGAsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBJbnN1ZmZpY2llbnRBY2Nlc3NUeXBlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5TVUZGSUNJRU5UX0FDQ0VTU19UWVBFXCIsIChhY3R1YWxBY2Nlc3NUeXBlLCBhbGxvd2VkQWNjZXNzVHlwZXMpID0+IFtcbiAgICA0MDEsXG4gICAgYFRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciBtdXN0IGJlICR7YWxsb3dlZEFjY2Vzc1R5cGVzLm1hcChzID0+IGAnJHtzfSdgKS5qb2luKFwiIG9yIFwiKX0sIGJ1dCB3YXMgJyR7YWN0dWFsQWNjZXNzVHlwZX0nLmAsXG4gICAge1xuICAgICAgICBhY3R1YWxfYWNjZXNzX3R5cGU6IGFjdHVhbEFjY2Vzc1R5cGUsXG4gICAgICAgIGFsbG93ZWRfYWNjZXNzX3R5cGVzOiBhbGxvd2VkQWNjZXNzVHlwZXMsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbXG4gICAganNvbi5hY3R1YWxfYWNjZXNzX3R5cGUsXG4gICAganNvbi5hbGxvd2VkX2FjY2Vzc190eXBlcyxcbl0pO1xuY29uc3QgSW52YWxpZFB1Ymxpc2hhYmxlQ2xpZW50S2V5ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9QVUJMSVNIQUJMRV9DTElFTlRfS0VZXCIsIChwcm9qZWN0SWQpID0+IFtcbiAgICA0MDEsXG4gICAgYFRoZSBwdWJsaXNoYWJsZSBrZXkgaXMgbm90IHZhbGlkIGZvciB0aGUgcHJvamVjdCAke0pTT04uc3RyaW5naWZ5KHByb2plY3RJZCl9LiBEb2VzIHRoZSBwcm9qZWN0IGFuZC9vciB0aGUga2V5IGV4aXN0P2AsXG4gICAge1xuICAgICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXSk7XG5jb25zdCBJbnZhbGlkU2VjcmV0U2VydmVyS2V5ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9TRUNSRVRfU0VSVkVSX0tFWVwiLCAocHJvamVjdElkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBUaGUgc2VjcmV0IHNlcnZlciBrZXkgaXMgbm90IHZhbGlkIGZvciB0aGUgcHJvamVjdCAke0pTT04uc3RyaW5naWZ5KHByb2plY3RJZCl9LiBEb2VzIHRoZSBwcm9qZWN0IGFuZC9vciB0aGUga2V5IGV4aXN0P2AsXG4gICAge1xuICAgICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXSk7XG5jb25zdCBJbnZhbGlkU3VwZXJTZWNyZXRBZG1pbktleSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLCBcIklOVkFMSURfU1VQRVJfU0VDUkVUX0FETUlOX0tFWVwiLCAocHJvamVjdElkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBUaGUgc3VwZXIgc2VjcmV0IGFkbWluIGtleSBpcyBub3QgdmFsaWQgZm9yIHRoZSBwcm9qZWN0ICR7SlNPTi5zdHJpbmdpZnkocHJvamVjdElkKX0uIERvZXMgdGhlIHByb2plY3QgYW5kL29yIHRoZSBrZXkgZXhpc3Q/YCxcbiAgICB7XG4gICAgICAgIHByb2plY3RfaWQ6IHByb2plY3RJZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnByb2plY3RfaWRdKTtcbmNvbnN0IEludmFsaWRBZG1pbkFjY2Vzc1Rva2VuID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9BRE1JTl9BQ0NFU1NfVE9LRU5cIiwgXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiKTtcbmNvbnN0IFVucGFyc2FibGVBZG1pbkFjY2Vzc1Rva2VuID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRBZG1pbkFjY2Vzc1Rva2VuLCBcIlVOUEFSU0FCTEVfQURNSU5fQUNDRVNTX1RPS0VOXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBZG1pbiBhY2Nlc3MgdG9rZW4gaXMgbm90IHBhcnNhYmxlLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgQWRtaW5BY2Nlc3NUb2tlbkV4cGlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoSW52YWxpZEFkbWluQWNjZXNzVG9rZW4sIFwiQURNSU5fQUNDRVNTX1RPS0VOX0VYUElSRURcIiwgKGV4cGlyZWRBdCkgPT4gW1xuICAgIDQwMSxcbiAgICBgQWRtaW4gYWNjZXNzIHRva2VuIGhhcyBleHBpcmVkLiBQbGVhc2UgcmVmcmVzaCBpdCBhbmQgdHJ5IGFnYWluLiR7ZXhwaXJlZEF0ID8gYCAoVGhlIGFjY2VzcyB0b2tlbiBleHBpcmVkIGF0ICR7ZXhwaXJlZEF0LnRvSVNPU3RyaW5nKCl9LilgIDogXCJcIn1gLFxuICAgIHsgZXhwaXJlZF9hdF9taWxsaXM6IGV4cGlyZWRBdD8uZ2V0VGltZSgpID8/IG51bGwgfSxcbl0sIChqc29uKSA9PiBbanNvbi5leHBpcmVkX2F0X21pbGxpcyA/PyB1bmRlZmluZWRdKTtcbmNvbnN0IEludmFsaWRQcm9qZWN0Rm9yQWRtaW5BY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbiwgXCJJTlZBTElEX1BST0pFQ1RfRk9SX0FETUlOX0FDQ0VTU19UT0tFTlwiLCAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiQWRtaW4gYWNjZXNzIHRva2VucyBtdXN0IGJlIGNyZWF0ZWQgb24gdGhlIGludGVybmFsIHByb2plY3QuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBBZG1pbkFjY2Vzc1Rva2VuSXNOb3RBZG1pbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbiwgXCJBRE1JTl9BQ0NFU1NfVE9LRU5fSVNfTk9UX0FETUlOXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBZG1pbiBhY2Nlc3MgdG9rZW4gZG9lcyBub3QgaGF2ZSB0aGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgdG8gYWNjZXNzIHRoaXMgcHJvamVjdC5cIixcbl0sICgpID0+IFtdKTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIEluc3VmZmljaWVudEFjY2Vzc1R5cGUgaW5zdGVhZFxuICovXG5jb25zdCBQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25FcnJvciwgXCJQUk9KRUNUX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIik7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBJbnN1ZmZpY2llbnRBY2Nlc3NUeXBlIGluc3RlYWRcbiAqL1xuY29uc3QgQ2xpZW50QXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCwgXCJDTElFTlRfQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlRoZSBwdWJsaXNoYWJsZSBjbGllbnQga2V5IG11c3QgYmUgcHJvdmlkZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBJbnN1ZmZpY2llbnRBY2Nlc3NUeXBlIGluc3RlYWRcbiAqL1xuY29uc3QgU2VydmVyQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCwgXCJTRVJWRVJfQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlRoZSBzZWNyZXQgc2VydmVyIGtleSBtdXN0IGJlIHByb3ZpZGVkLlwiLFxuXSwgKCkgPT4gW10pO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgSW5zdWZmaWNpZW50QWNjZXNzVHlwZSBpbnN0ZWFkXG4gKi9cbmNvbnN0IENsaWVudE9yU2VydmVyQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCwgXCJDTElFTlRfT1JfU0VSVkVSX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJFaXRoZXIgdGhlIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkgb3IgdGhlIHNlY3JldCBzZXJ2ZXIga2V5IG11c3QgYmUgcHJvdmlkZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBJbnN1ZmZpY2llbnRBY2Nlc3NUeXBlIGluc3RlYWRcbiAqL1xuY29uc3QgQ2xpZW50T3JBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoUHJvamVjdEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsIFwiQ0xJRU5UX09SX0FETUlOX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJFaXRoZXIgdGhlIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkgb3IgdGhlIHN1cGVyIHNlY3JldCBhZG1pbiBrZXkgbXVzdCBiZSBwcm92aWRlZC5cIixcbl0sICgpID0+IFtdKTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIEluc3VmZmljaWVudEFjY2Vzc1R5cGUgaW5zdGVhZFxuICovXG5jb25zdCBDbGllbnRPclNlcnZlck9yQWRtaW5BdXRoZW50aWNhdGlvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFByb2plY3RBdXRoZW50aWNhdGlvblJlcXVpcmVkLCBcIkNMSUVOVF9PUl9TRVJWRVJfT1JfQURNSU5fQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkVpdGhlciB0aGUgcHVibGlzaGFibGUgY2xpZW50IGtleSwgdGhlIHNlY3JldCBzZXJ2ZXIga2V5LCBvciB0aGUgc3VwZXIgc2VjcmV0IGFkbWluIGtleSBtdXN0IGJlIHByb3ZpZGVkLlwiLFxuXSwgKCkgPT4gW10pO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgSW5zdWZmaWNpZW50QWNjZXNzVHlwZSBpbnN0ZWFkXG4gKi9cbmNvbnN0IEFkbWluQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCwgXCJBRE1JTl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLCAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHN1cGVyIHNlY3JldCBhZG1pbiBrZXkgbXVzdCBiZSBwcm92aWRlZC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IEV4cGVjdGVkSW50ZXJuYWxQcm9qZWN0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFByb2plY3RBdXRoZW50aWNhdGlvbkVycm9yLCBcIkVYUEVDVEVEX0lOVEVSTkFMX1BST0pFQ1RcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlRoZSBwcm9qZWN0IElEIGlzIGV4cGVjdGVkIHRvIGJlIGludGVybmFsLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgU2Vzc2lvbkF1dGhlbnRpY2F0aW9uRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJTRVNTSU9OX0FVVEhFTlRJQ0FUSU9OX0VSUk9SXCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIik7XG5jb25zdCBJbnZhbGlkU2Vzc2lvbkF1dGhlbnRpY2F0aW9uID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFNlc3Npb25BdXRoZW50aWNhdGlvbkVycm9yLCBcIklOVkFMSURfU0VTU0lPTl9BVVRIRU5USUNBVElPTlwiLCBcImluaGVyaXRcIiwgXCJpbmhlcml0XCIpO1xuY29uc3QgSW52YWxpZEFjY2Vzc1Rva2VuID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRTZXNzaW9uQXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9BQ0NFU1NfVE9LRU5cIiwgXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiKTtcbmNvbnN0IFVucGFyc2FibGVBY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkQWNjZXNzVG9rZW4sIFwiVU5QQVJTQUJMRV9BQ0NFU1NfVE9LRU5cIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkFjY2VzcyB0b2tlbiBpcyBub3QgcGFyc2FibGUuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBBY2Nlc3NUb2tlbkV4cGlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoSW52YWxpZEFjY2Vzc1Rva2VuLCBcIkFDQ0VTU19UT0tFTl9FWFBJUkVEXCIsIChleHBpcmVkQXQpID0+IFtcbiAgICA0MDEsXG4gICAgYEFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlZnJlc2ggaXQgYW5kIHRyeSBhZ2Fpbi4ke2V4cGlyZWRBdCA/IGAgKFRoZSBhY2Nlc3MgdG9rZW4gZXhwaXJlZCBhdCAke2V4cGlyZWRBdC50b0lTT1N0cmluZygpfS4pYCA6IFwiXCJ9YCxcbiAgICB7IGV4cGlyZWRfYXRfbWlsbGlzOiBleHBpcmVkQXQ/LmdldFRpbWUoKSA/PyBudWxsIH0sXG5dLCAoanNvbikgPT4gW2pzb24uZXhwaXJlZF9hdF9taWxsaXMgPyBuZXcgRGF0ZShqc29uLmV4cGlyZWRfYXRfbWlsbGlzKSA6IHVuZGVmaW5lZF0pO1xuY29uc3QgSW52YWxpZFByb2plY3RGb3JBY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkQWNjZXNzVG9rZW4sIFwiSU5WQUxJRF9QUk9KRUNUX0ZPUl9BQ0NFU1NfVE9LRU5cIiwgKGV4cGVjdGVkUHJvamVjdElkLCBhY3R1YWxQcm9qZWN0SWQpID0+IFtcbiAgICA0MDEsXG4gICAgYEFjY2VzcyB0b2tlbiBub3QgdmFsaWQgZm9yIHRoaXMgcHJvamVjdC4gRXhwZWN0ZWQgcHJvamVjdCBJRCAke0pTT04uc3RyaW5naWZ5KGV4cGVjdGVkUHJvamVjdElkKX0sIGJ1dCB0aGUgdG9rZW4gaXMgZm9yIHByb2plY3QgSUQgJHtKU09OLnN0cmluZ2lmeShhY3R1YWxQcm9qZWN0SWQpfS5gLFxuICAgIHtcbiAgICAgICAgZXhwZWN0ZWRfcHJvamVjdF9pZDogZXhwZWN0ZWRQcm9qZWN0SWQsXG4gICAgICAgIGFjdHVhbF9wcm9qZWN0X2lkOiBhY3R1YWxQcm9qZWN0SWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5leHBlY3RlZF9wcm9qZWN0X2lkLCBqc29uLmFjdHVhbF9wcm9qZWN0X2lkXSk7XG5jb25zdCBSZWZyZXNoVG9rZW5FcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlJFRlJFU0hfVE9LRU5fRVJST1JcIiwgXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiKTtcbmNvbnN0IFJlZnJlc2hUb2tlbk5vdEZvdW5kT3JFeHBpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFJlZnJlc2hUb2tlbkVycm9yLCBcIlJFRlJFU0hfVE9LRU5fTk9UX0ZPVU5EX09SX0VYUElSRURcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlJlZnJlc2ggdG9rZW4gbm90IGZvdW5kIGZvciB0aGlzIHByb2plY3QsIG9yIHRoZSBzZXNzaW9uIGhhcyBleHBpcmVkL2JlZW4gcmV2b2tlZC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IENhbm5vdERlbGV0ZUN1cnJlbnRTZXNzaW9uID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFJlZnJlc2hUb2tlbkVycm9yLCBcIkNBTk5PVF9ERUxFVEVfQ1VSUkVOVF9TRVNTSU9OXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJDYW5ub3QgZGVsZXRlIHRoZSBjdXJyZW50IHNlc3Npb24uXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBQcm92aWRlclJlamVjdGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFJlZnJlc2hUb2tlbkVycm9yLCBcIlBST1ZJREVSX1JFSkVDVEVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJUaGUgcHJvdmlkZXIgcmVmdXNlZCB0byByZWZyZXNoIHRoZWlyIHRva2VuLiBUaGlzIHVzdWFsbHkgbWVhbnMgdGhhdCB0aGUgcHJvdmlkZXIgdXNlZCB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIgbm8gbG9uZ2VyIHJlZ2FyZHMgdGhpcyBzZXNzaW9uIGFzIHZhbGlkLCBhbmQgdGhlIHVzZXIgbXVzdCByZS1hdXRoZW50aWNhdGUuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBVc2VyV2l0aEVtYWlsQWxyZWFkeUV4aXN0cyA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlVTRVJfRU1BSUxfQUxSRUFEWV9FWElTVFNcIiwgKGVtYWlsKSA9PiBbXG4gICAgNDA5LFxuICAgIGBBIHVzZXIgd2l0aCBlbWFpbCAke0pTT04uc3RyaW5naWZ5KGVtYWlsKX0gYWxyZWFkeSBleGlzdHMuYCxcbiAgICB7XG4gICAgICAgIGVtYWlsLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24uZW1haWxdKTtcbmNvbnN0IEVtYWlsTm90VmVyaWZpZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJFTUFJTF9OT1RfVkVSSUZJRURcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBlbWFpbCBpcyBub3QgdmVyaWZpZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBDYW5ub3RHZXRPd25Vc2VyV2l0aG91dFVzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJDQU5OT1RfR0VUX09XTl9VU0VSX1dJVEhPVVRfVVNFUlwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiWW91IGhhdmUgc3BlY2lmaWVkICdtZScgYXMgYSB1c2VySWQsIGJ1dCBkaWQgbm90IHByb3ZpZGUgYXV0aGVudGljYXRpb24gZm9yIGEgdXNlci5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IFVzZXJJZERvZXNOb3RFeGlzdCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlVTRVJfSURfRE9FU19OT1RfRVhJU1RcIiwgKHVzZXJJZCkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIGdpdmVuIHVzZXIgd2l0aCB0aGUgSUQgJHt1c2VySWR9IGRvZXMgbm90IGV4aXN0LmAsXG4gICAge1xuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi51c2VyX2lkXSk7XG5jb25zdCBVc2VyTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJVU0VSX05PVF9GT1VORFwiLCAoKSA9PiBbXG4gICAgNDA0LFxuICAgIFwiVXNlciBub3QgZm91bmQuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBQcm9qZWN0Tm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJQUk9KRUNUX05PVF9GT1VORFwiLCAocHJvamVjdElkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBwcm9qZWN0SWQgIT09IFwic3RyaW5nXCIpXG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwicHJvamVjdElkIG9mIEtub3duRXJyb3JzLlByb2plY3ROb3RGb3VuZCBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgIHJldHVybiBbXG4gICAgICAgIDQwNCxcbiAgICAgICAgYFByb2plY3QgJHtwcm9qZWN0SWR9IG5vdCBmb3VuZCBvciBpcyBub3QgYWNjZXNzaWJsZSB3aXRoIHRoZSBjdXJyZW50IHVzZXIuYCxcbiAgICAgICAge1xuICAgICAgICAgICAgcHJvamVjdF9pZDogcHJvamVjdElkLFxuICAgICAgICB9LFxuICAgIF07XG59LCAoanNvbikgPT4gW2pzb24ucHJvamVjdF9pZF0pO1xuY29uc3QgU2lnblVwTm90RW5hYmxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlNJR05fVVBfTk9UX0VOQUJMRURcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIkNyZWF0aW9uIG9mIG5ldyBhY2NvdW50cyBpcyBub3QgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0LiBQbGVhc2UgYXNrIHRoZSBwcm9qZWN0IG93bmVyIHRvIGVuYWJsZSBpdC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IFBhc3N3b3JkQXV0aGVudGljYXRpb25Ob3RFbmFibGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiUEFTU1dPUkRfQVVUSEVOVElDQVRJT05fTk9UX0VOQUJMRURcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlBhc3N3b3JkIGF1dGhlbnRpY2F0aW9uIGlzIG5vdCBlbmFibGVkIGZvciB0aGlzIHByb2plY3QuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBQYXNza2V5QXV0aGVudGljYXRpb25Ob3RFbmFibGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiUEFTU0tFWV9BVVRIRU5USUNBVElPTl9OT1RfRU5BQkxFRFwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiUGFzc2tleSBhdXRoZW50aWNhdGlvbiBpcyBub3QgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0LlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgQW5vbnltb3VzQWNjb3VudHNOb3RFbmFibGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiQU5PTllNT1VTX0FDQ09VTlRTX05PVF9FTkFCTEVEXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJBbm9ueW1vdXMgYWNjb3VudHMgYXJlIG5vdCBlbmFibGVkIGZvciB0aGlzIHByb2plY3QuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBFbWFpbFBhc3N3b3JkTWlzbWF0Y2ggPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJFTUFJTF9QQVNTV09SRF9NSVNNQVRDSFwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiV3JvbmcgZS1tYWlsIG9yIHBhc3N3b3JkLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgUmVkaXJlY3RVcmxOb3RXaGl0ZWxpc3RlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlJFRElSRUNUX1VSTF9OT1RfV0hJVEVMSVNURURcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlJlZGlyZWN0IFVSTCBub3Qgd2hpdGVsaXN0ZWQuIERpZCB5b3UgZm9yZ2V0IHRvIGFkZCB0aGlzIGRvbWFpbiB0byB0aGUgdHJ1c3RlZCBkb21haW5zIGxpc3Qgb24gdGhlIFN0YWNrIEF1dGggZGFzaGJvYXJkP1wiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJQQVNTV09SRF9SRVFVSVJFTUVOVFNfTk9UX01FVFwiLCBcImluaGVyaXRcIiwgXCJpbmhlcml0XCIpO1xuY29uc3QgUGFzc3dvcmRUb29TaG9ydCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldCwgXCJQQVNTV09SRF9UT09fU0hPUlRcIiwgKG1pbkxlbmd0aCkgPT4gW1xuICAgIDQwMCxcbiAgICBgUGFzc3dvcmQgdG9vIHNob3J0LiBNaW5pbXVtIGxlbmd0aCBpcyAke21pbkxlbmd0aH0uYCxcbiAgICB7XG4gICAgICAgIG1pbl9sZW5ndGg6IG1pbkxlbmd0aCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtcbiAgICBqc29uPy5taW5fbGVuZ3RoID8/IHRocm93RXJyKFwibWluX2xlbmd0aCBub3QgZm91bmQgaW4gUGFzc3dvcmRUb29TaG9ydCBkZXRhaWxzXCIpLFxuXSk7XG5jb25zdCBQYXNzd29yZFRvb0xvbmcgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXQsIFwiUEFTU1dPUkRfVE9PX0xPTkdcIiwgKG1heExlbmd0aCkgPT4gW1xuICAgIDQwMCxcbiAgICBgUGFzc3dvcmQgdG9vIGxvbmcuIE1heGltdW0gbGVuZ3RoIGlzICR7bWF4TGVuZ3RofS5gLFxuICAgIHtcbiAgICAgICAgbWF4TGVuZ3RoLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW1xuICAgIGpzb24/Lm1heExlbmd0aCA/PyB0aHJvd0VycihcIm1heExlbmd0aCBub3QgZm91bmQgaW4gUGFzc3dvcmRUb29Mb25nIGRldGFpbHNcIiksXG5dKTtcbmNvbnN0IFVzZXJEb2VzTm90SGF2ZVBhc3N3b3JkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVVNFUl9ET0VTX05PVF9IQVZFX1BBU1NXT1JEXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGlzIHVzZXIgZG9lcyBub3QgaGF2ZSBwYXNzd29yZCBhdXRoZW50aWNhdGlvbiBlbmFibGVkLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgVmVyaWZpY2F0aW9uQ29kZUVycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVkVSSUZJQ0FUSU9OX0VSUk9SXCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIik7XG5jb25zdCBWZXJpZmljYXRpb25Db2RlTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoVmVyaWZpY2F0aW9uQ29kZUVycm9yLCBcIlZFUklGSUNBVElPTl9DT0RFX05PVF9GT1VORFwiLCAoKSA9PiBbXG4gICAgNDA0LFxuICAgIFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGRvZXMgbm90IGV4aXN0IGZvciB0aGlzIHByb2plY3QuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBWZXJpZmljYXRpb25Db2RlRXhwaXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihWZXJpZmljYXRpb25Db2RlRXJyb3IsIFwiVkVSSUZJQ0FUSU9OX0NPREVfRVhQSVJFRFwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGhhcyBleHBpcmVkLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgVmVyaWZpY2F0aW9uQ29kZUFscmVhZHlVc2VkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFZlcmlmaWNhdGlvbkNvZGVFcnJvciwgXCJWRVJJRklDQVRJT05fQ09ERV9BTFJFQURZX1VTRURcIiwgKCkgPT4gW1xuICAgIDQwOSxcbiAgICBcIlRoZSB2ZXJpZmljYXRpb24gbGluayBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBWZXJpZmljYXRpb25Db2RlTWF4QXR0ZW1wdHNSZWFjaGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFZlcmlmaWNhdGlvbkNvZGVFcnJvciwgXCJWRVJJRklDQVRJT05fQ09ERV9NQVhfQVRURU1QVFNfUkVBQ0hFRFwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIG5vbmNlIGhhcyByZWFjaGVkIHRoZSBtYXhpbXVtIG51bWJlciBvZiBhdHRlbXB0cy4gVGhpcyBjb2RlIGlzIG5vdCB2YWxpZCBhbnltb3JlLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgUGFzc3dvcmRDb25maXJtYXRpb25NaXNtYXRjaCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlBBU1NXT1JEX0NPTkZJUk1BVElPTl9NSVNNQVRDSFwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IEVtYWlsQWxyZWFkeVZlcmlmaWVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiRU1BSUxfQUxSRUFEWV9WRVJJRklFRFwiLCAoKSA9PiBbXG4gICAgNDA5LFxuICAgIFwiVGhlIGUtbWFpbCBpcyBhbHJlYWR5IHZlcmlmaWVkLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgRW1haWxOb3RBc3NvY2lhdGVkV2l0aFVzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJFTUFJTF9OT1RfQVNTT0NJQVRFRF9XSVRIX1VTRVJcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBlLW1haWwgaXMgbm90IGFzc29jaWF0ZWQgd2l0aCBhIHVzZXIgdGhhdCBjb3VsZCBsb2cgaW4gd2l0aCB0aGF0IGUtbWFpbC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IEVtYWlsSXNOb3RQcmltYXJ5RW1haWwgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJFTUFJTF9JU19OT1RfUFJJTUFSWV9FTUFJTFwiLCAoZW1haWwsIHByaW1hcnlFbWFpbCkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIGdpdmVuIGUtbWFpbCAoJHtlbWFpbH0pIG11c3QgZXF1YWwgdGhlIHVzZXIncyBwcmltYXJ5IGUtbWFpbCAoJHtwcmltYXJ5RW1haWx9KS5gLFxuICAgIHtcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHByaW1hcnlfZW1haWw6IHByaW1hcnlFbWFpbCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLmVtYWlsLCBqc29uLnByaW1hcnlfZW1haWxdKTtcbmNvbnN0IFBhc3NrZXlSZWdpc3RyYXRpb25GYWlsZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJQQVNTS0VZX1JFR0lTVFJBVElPTl9GQUlMRURcIiwgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZSxcbl0sIChqc29uKSA9PiBbanNvbi5tZXNzYWdlXSk7XG5jb25zdCBQYXNza2V5V2ViQXV0aG5FcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlBBU1NLRVlfV0VCQVVUSE5fRVJST1JcIiwgKG1lc3NhZ2UsIGNvZGUpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZSxcbiAgICB7XG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGNvZGUsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5tZXNzYWdlLCBqc29uLmNvZGVdKTtcbmNvbnN0IFBhc3NrZXlBdXRoZW50aWNhdGlvbkZhaWxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlBBU1NLRVlfQVVUSEVOVElDQVRJT05fRkFJTEVEXCIsIChtZXNzYWdlKSA9PiBbXG4gICAgNDAwLFxuICAgIG1lc3NhZ2UsXG5dLCAoanNvbikgPT4gW2pzb24ubWVzc2FnZV0pO1xuY29uc3QgUGVybWlzc2lvbk5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiUEVSTUlTU0lPTl9OT1RfRk9VTkRcIiwgKHBlcm1pc3Npb25JZCkgPT4gW1xuICAgIDQwNCxcbiAgICBgUGVybWlzc2lvbiBcIiR7cGVybWlzc2lvbklkfVwiIG5vdCBmb3VuZC4gTWFrZSBzdXJlIHlvdSBjcmVhdGVkIGl0IG9uIHRoZSBkYXNoYm9hcmQuYCxcbiAgICB7XG4gICAgICAgIHBlcm1pc3Npb25faWQ6IHBlcm1pc3Npb25JZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnBlcm1pc3Npb25faWRdKTtcbmNvbnN0IENvbnRhaW5lZFBlcm1pc3Npb25Ob3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIkNPTlRBSU5FRF9QRVJNSVNTSU9OX05PVF9GT1VORFwiLCAocGVybWlzc2lvbklkKSA9PiBbXG4gICAgNDAwLFxuICAgIGBDb250YWluZWQgcGVybWlzc2lvbiB3aXRoIElEIFwiJHtwZXJtaXNzaW9uSWR9XCIgbm90IGZvdW5kLiBNYWtlIHN1cmUgeW91IGNyZWF0ZWQgaXQgb24gdGhlIGRhc2hib2FyZC5gLFxuICAgIHtcbiAgICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24ucGVybWlzc2lvbl9pZF0pO1xuY29uc3QgVGVhbU5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVEVBTV9OT1RfRk9VTkRcIiwgKHRlYW1JZCkgPT4gW1xuICAgIDQwNCxcbiAgICBgVGVhbSAke3RlYW1JZH0gbm90IGZvdW5kLmAsXG4gICAge1xuICAgICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi50ZWFtX2lkXSk7XG5jb25zdCBUZWFtQWxyZWFkeUV4aXN0cyA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlRFQU1fQUxSRUFEWV9FWElTVFNcIiwgKHRlYW1JZCkgPT4gW1xuICAgIDQwOSxcbiAgICBgVGVhbSAke3RlYW1JZH0gYWxyZWFkeSBleGlzdHMuYCxcbiAgICB7XG4gICAgICAgIHRlYW1faWQ6IHRlYW1JZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnRlYW1faWRdKTtcbmNvbnN0IFRlYW1NZW1iZXJzaGlwTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJURUFNX01FTUJFUlNISVBfTk9UX0ZPVU5EXCIsICh0ZWFtSWQsIHVzZXJJZCkgPT4gW1xuICAgIDQwNCxcbiAgICBgVXNlciAke3VzZXJJZH0gaXMgbm90IGZvdW5kIGluIHRlYW0gJHt0ZWFtSWR9LmAsXG4gICAge1xuICAgICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnRlYW1faWQsIGpzb24udXNlcl9pZF0pO1xuY29uc3QgRW1haWxUZW1wbGF0ZUFscmVhZHlFeGlzdHMgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJFTUFJTF9URU1QTEFURV9BTFJFQURZX0VYSVNUU1wiLCAoKSA9PiBbXG4gICAgNDA5LFxuICAgIFwiRW1haWwgdGVtcGxhdGUgYWxyZWFkeSBleGlzdHMuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBPQXV0aENvbm5lY3Rpb25Ob3RDb25uZWN0ZWRUb1VzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJPQVVUSF9DT05ORUNUSU9OX05PVF9DT05ORUNURURfVE9fVVNFUlwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIGNvbm5lY3Rpb24gaXMgbm90IGNvbm5lY3RlZCB0byBhbnkgdXNlci5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE9BdXRoQ29ubmVjdGlvbkFscmVhZHlDb25uZWN0ZWRUb0Fub3RoZXJVc2VyID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiT0FVVEhfQ09OTkVDVElPTl9BTFJFQURZX0NPTk5FQ1RFRF9UT19BTk9USEVSX1VTRVJcIiwgKCkgPT4gW1xuICAgIDQwOSxcbiAgICBcIlRoZSBPQXV0aCBjb25uZWN0aW9uIGlzIGFscmVhZHkgY29ubmVjdGVkIHRvIGFub3RoZXIgdXNlci5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE9BdXRoQ29ubmVjdGlvbkRvZXNOb3RIYXZlUmVxdWlyZWRTY29wZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIk9BVVRIX0NPTk5FQ1RJT05fRE9FU19OT1RfSEFWRV9SRVFVSVJFRF9TQ09QRVwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIGNvbm5lY3Rpb24gZG9lcyBub3QgaGF2ZSB0aGUgcmVxdWlyZWQgc2NvcGUuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBPQXV0aEV4dHJhU2NvcGVOb3RBdmFpbGFibGVXaXRoU2hhcmVkT0F1dGhLZXlzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiT0FVVEhfRVhUUkFfU0NPUEVfTk9UX0FWQUlMQUJMRV9XSVRIX1NIQVJFRF9PQVVUSF9LRVlTXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJFeHRyYSBzY29wZXMgYXJlIG5vdCBhdmFpbGFibGUgd2l0aCBzaGFyZWQgT0F1dGgga2V5cy4gUGxlYXNlIGFkZCB5b3VyIG93biBPQXV0aCBrZXlzIG9uIHRoZSBTdGFjayBkYXNoYm9hcmQgdG8gdXNlIGV4dHJhIHNjb3Blcy5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE9BdXRoQWNjZXNzVG9rZW5Ob3RBdmFpbGFibGVXaXRoU2hhcmVkT0F1dGhLZXlzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiT0FVVEhfQUNDRVNTX1RPS0VOX05PVF9BVkFJTEFCTEVfV0lUSF9TSEFSRURfT0FVVEhfS0VZU1wiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiQWNjZXNzIHRva2VucyBhcmUgbm90IGF2YWlsYWJsZSB3aXRoIHNoYXJlZCBPQXV0aCBrZXlzLiBQbGVhc2UgYWRkIHlvdXIgb3duIE9BdXRoIGtleXMgb24gdGhlIFN0YWNrIGRhc2hib2FyZCB0byB1c2UgYWNjZXNzIHRva2Vucy5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IEludmFsaWRPQXV0aENsaWVudElkT3JTZWNyZXQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJJTlZBTElEX09BVVRIX0NMSUVOVF9JRF9PUl9TRUNSRVRcIiwgKGNsaWVudElkKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIGNsaWVudCBJRCBvciBzZWNyZXQgaXMgaW52YWxpZC4gVGhlIGNsaWVudCBJRCBtdXN0IGJlIGVxdWFsIHRvIHRoZSBwcm9qZWN0IElELCBhbmQgdGhlIGNsaWVudCBzZWNyZXQgbXVzdCBiZSBhIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkuXCIsXG4gICAge1xuICAgICAgICBjbGllbnRfaWQ6IGNsaWVudElkID8/IG51bGwsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5jbGllbnRfaWQgPz8gdW5kZWZpbmVkXSk7XG5jb25zdCBJbnZhbGlkU2NvcGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJJTlZBTElEX1NDT1BFXCIsIChzY29wZSkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIHNjb3BlIFwiJHtzY29wZX1cIiBpcyBub3QgYSB2YWxpZCBPQXV0aCBzY29wZSBmb3IgU3RhY2suYCxcbl0sIChqc29uKSA9PiBbanNvbi5zY29wZV0pO1xuY29uc3QgVXNlckFscmVhZHlDb25uZWN0ZWRUb0Fub3RoZXJPQXV0aENvbm5lY3Rpb24gPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJVU0VSX0FMUkVBRFlfQ09OTkVDVEVEX1RPX0FOT1RIRVJfT0FVVEhfQ09OTkVDVElPTlwiLCAoKSA9PiBbXG4gICAgNDA5LFxuICAgIFwiVGhlIHVzZXIgaXMgYWxyZWFkeSBjb25uZWN0ZWQgdG8gYW5vdGhlciBPQXV0aCBhY2NvdW50LiBEaWQgeW91IG1heWJlIHNlbGVjdGVkIHRoZSB3cm9uZyBhY2NvdW50P1wiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgT3V0ZXJPQXV0aFRpbWVvdXQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJPVVRFUl9PQVVUSF9USU1FT1VUXCIsICgpID0+IFtcbiAgICA0MDgsXG4gICAgXCJUaGUgT0F1dGggZmxvdyBoYXMgdGltZWQgb3V0LiBQbGVhc2Ugc2lnbiBpbiBhZ2Fpbi5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE9BdXRoUHJvdmlkZXJOb3RGb3VuZE9yTm90RW5hYmxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIk9BVVRIX1BST1ZJREVSX05PVF9GT1VORF9PUl9OT1RfRU5BQkxFRFwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIHByb3ZpZGVyIGlzIG5vdCBmb3VuZCBvciBub3QgZW5hYmxlZC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE11bHRpRmFjdG9yQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIk1VTFRJX0ZBQ1RPUl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLCAoYXR0ZW1wdENvZGUpID0+IFtcbiAgICA0MDAsXG4gICAgYE11bHRpLWZhY3RvciBhdXRoZW50aWNhdGlvbiBpcyByZXF1aXJlZCBmb3IgdGhpcyB1c2VyLmAsXG4gICAge1xuICAgICAgICBhdHRlbXB0X2NvZGU6IGF0dGVtcHRDb2RlLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24uYXR0ZW1wdF9jb2RlXSk7XG5jb25zdCBJbnZhbGlkVG90cENvZGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJJTlZBTElEX1RPVFBfQ09ERVwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIFRPVFAgY29kZSBpcyBpbnZhbGlkLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgVXNlckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJVU0VSX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJVc2VyIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIGZvciB0aGlzIGVuZHBvaW50LlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgVGVhbU1lbWJlcnNoaXBBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVEVBTV9NRU1CRVJTSElQX0FMUkVBRFlfRVhJU1RTXCIsICgpID0+IFtcbiAgICA0MDksXG4gICAgXCJUZWFtIG1lbWJlcnNoaXAgYWxyZWFkeSBleGlzdHMuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBQcm9qZWN0UGVybWlzc2lvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiUFJPSkVDVF9QRVJNSVNTSU9OX1JFUVVJUkVEXCIsICh1c2VySWQsIHBlcm1pc3Npb25JZCkgPT4gW1xuICAgIDQwMSxcbiAgICBgVXNlciAke3VzZXJJZH0gZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uICR7cGVybWlzc2lvbklkfS5gLFxuICAgIHtcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICBwZXJtaXNzaW9uX2lkOiBwZXJtaXNzaW9uSWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi51c2VyX2lkLCBqc29uLnBlcm1pc3Npb25faWRdKTtcbmNvbnN0IFRlYW1QZXJtaXNzaW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJURUFNX1BFUk1JU1NJT05fUkVRVUlSRURcIiwgKHRlYW1JZCwgdXNlcklkLCBwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDEsXG4gICAgYFVzZXIgJHt1c2VySWR9IGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiAke3Blcm1pc3Npb25JZH0gaW4gdGVhbSAke3RlYW1JZH0uYCxcbiAgICB7XG4gICAgICAgIHRlYW1faWQ6IHRlYW1JZCxcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICBwZXJtaXNzaW9uX2lkOiBwZXJtaXNzaW9uSWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi50ZWFtX2lkLCBqc29uLnVzZXJfaWQsIGpzb24ucGVybWlzc2lvbl9pZF0pO1xuY29uc3QgVGVhbVBlcm1pc3Npb25Ob3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlRFQU1fUEVSTUlTU0lPTl9OT1RfRk9VTkRcIiwgKHRlYW1JZCwgdXNlcklkLCBwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDEsXG4gICAgYFVzZXIgJHt1c2VySWR9IGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiAke3Blcm1pc3Npb25JZH0gaW4gdGVhbSAke3RlYW1JZH0uYCxcbiAgICB7XG4gICAgICAgIHRlYW1faWQ6IHRlYW1JZCxcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICBwZXJtaXNzaW9uX2lkOiBwZXJtaXNzaW9uSWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi50ZWFtX2lkLCBqc29uLnVzZXJfaWQsIGpzb24ucGVybWlzc2lvbl9pZF0pO1xuY29uc3QgSW52YWxpZFNoYXJlZE9BdXRoUHJvdmlkZXJJZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIklOVkFMSURfU0hBUkVEX09BVVRIX1BST1ZJREVSX0lEXCIsIChwcm92aWRlcklkKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGUgc2hhcmVkIE9BdXRoIHByb3ZpZGVyIHdpdGggSUQgJHtwcm92aWRlcklkfSBpcyBub3QgdmFsaWQuYCxcbiAgICB7XG4gICAgICAgIHByb3ZpZGVyX2lkOiBwcm92aWRlcklkLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24ucHJvdmlkZXJfaWRdKTtcbmNvbnN0IEludmFsaWRTdGFuZGFyZE9BdXRoUHJvdmlkZXJJZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIklOVkFMSURfU1RBTkRBUkRfT0FVVEhfUFJPVklERVJfSURcIiwgKHByb3ZpZGVySWQpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSBzdGFuZGFyZCBPQXV0aCBwcm92aWRlciB3aXRoIElEICR7cHJvdmlkZXJJZH0gaXMgbm90IHZhbGlkLmAsXG4gICAge1xuICAgICAgICBwcm92aWRlcl9pZDogcHJvdmlkZXJJZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnByb3ZpZGVyX2lkXSk7XG5jb25zdCBJbnZhbGlkQXV0aG9yaXphdGlvbkNvZGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJJTlZBTElEX0FVVEhPUklaQVRJT05fQ09ERVwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIGdpdmVuIGF1dGhvcml6YXRpb24gY29kZSBpcyBpbnZhbGlkLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgT0F1dGhQcm92aWRlckFjY2Vzc0RlbmllZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIk9BVVRIX1BST1ZJREVSX0FDQ0VTU19ERU5JRURcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBPQXV0aCBwcm92aWRlciBkZW5pZWQgYWNjZXNzIHRvIHRoZSB1c2VyLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgQ29udGFjdENoYW5uZWxBbHJlYWR5VXNlZEZvckF1dGhCeVNvbWVvbmVFbHNlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiQ09OVEFDVF9DSEFOTkVMX0FMUkVBRFlfVVNFRF9GT1JfQVVUSF9CWV9TT01FT05FX0VMU0VcIiwgKHR5cGUsIGNvbnRhY3RDaGFubmVsVmFsdWUpID0+IFtcbiAgICA0MDksXG4gICAgY29udGFjdENoYW5uZWxWYWx1ZSA/XG4gICAgICAgIGBUaGUgJHt0eXBlfSAoJHtjb250YWN0Q2hhbm5lbFZhbHVlfSkgaXMgYWxyZWFkeSB1c2VkIGZvciBhdXRoZW50aWNhdGlvbiBieSBhbm90aGVyIGFjY291bnQuYCA6XG4gICAgICAgIGBUaGlzICR7dHlwZX0gaXMgYWxyZWFkeSB1c2VkIGZvciBhdXRoZW50aWNhdGlvbiBieSBhbm90aGVyIGFjY291bnQuYCxcbiAgICB7IHR5cGUsIGNvbnRhY3RfY2hhbm5lbF92YWx1ZTogY29udGFjdENoYW5uZWxWYWx1ZSA/PyBudWxsIH0sXG5dLCAoanNvbikgPT4gW2pzb24udHlwZSwganNvbi5jb250YWN0X2NoYW5uZWxfdmFsdWVdKTtcbmNvbnN0IEludmFsaWRQb2xsaW5nQ29kZUVycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiSU5WQUxJRF9QT0xMSU5HX0NPREVcIiwgKGRldGFpbHMpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGUgcG9sbGluZyBjb2RlIGlzIGludmFsaWQgb3IgZG9lcyBub3QgZXhpc3QuXCIsXG4gICAgZGV0YWlscyxcbl0sIChqc29uKSA9PiBbanNvbl0pO1xuY29uc3QgQXBpS2V5Tm90VmFsaWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJBUElfS0VZX05PVF9WQUxJRFwiLCBcImluaGVyaXRcIiwgXCJpbmhlcml0XCIpO1xuY29uc3QgQXBpS2V5RXhwaXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihBcGlLZXlOb3RWYWxpZCwgXCJBUElfS0VZX0VYUElSRURcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkFQSSBrZXkgaGFzIGV4cGlyZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBBcGlLZXlSZXZva2VkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEFwaUtleU5vdFZhbGlkLCBcIkFQSV9LRVlfUkVWT0tFRFwiLCAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiQVBJIGtleSBoYXMgYmVlbiByZXZva2VkLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgV3JvbmdBcGlLZXlUeXBlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEFwaUtleU5vdFZhbGlkLCBcIldST05HX0FQSV9LRVlfVFlQRVwiLCAoZXhwZWN0ZWRUeXBlLCBhY3R1YWxUeXBlKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGlzIGVuZHBvaW50IGlzIGZvciAke2V4cGVjdGVkVHlwZX0gQVBJIGtleXMsIGJ1dCBhICR7YWN0dWFsVHlwZX0gQVBJIGtleSB3YXMgcHJvdmlkZWQuYCxcbiAgICB7IGV4cGVjdGVkX3R5cGU6IGV4cGVjdGVkVHlwZSwgYWN0dWFsX3R5cGU6IGFjdHVhbFR5cGUgfSxcbl0sIChqc29uKSA9PiBbanNvbi5leHBlY3RlZF90eXBlLCBqc29uLmFjdHVhbF90eXBlXSk7XG5jb25zdCBBcGlLZXlOb3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihBcGlLZXlOb3RWYWxpZCwgXCJBUElfS0VZX05PVF9GT1VORFwiLCAoKSA9PiBbXG4gICAgNDA0LFxuICAgIFwiQVBJIGtleSBub3QgZm91bmQuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBQZXJtaXNzaW9uSWRBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiUEVSTUlTU0lPTl9JRF9BTFJFQURZX0VYSVNUU1wiLCAocGVybWlzc2lvbklkKSA9PiBbXG4gICAgNDAwLFxuICAgIGBQZXJtaXNzaW9uIHdpdGggSUQgXCIke3Blcm1pc3Npb25JZH1cIiBhbHJlYWR5IGV4aXN0cy4gQ2hvb3NlIGEgZGlmZmVyZW50IElELmAsXG4gICAge1xuICAgICAgICBwZXJtaXNzaW9uX2lkOiBwZXJtaXNzaW9uSWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5wZXJtaXNzaW9uX2lkXSk7XG5leHBvcnQgY29uc3QgS25vd25FcnJvcnMgPSB7XG4gICAgQ2Fubm90RGVsZXRlQ3VycmVudFNlc3Npb24sXG4gICAgVW5zdXBwb3J0ZWRFcnJvcixcbiAgICBCb2R5UGFyc2luZ0Vycm9yLFxuICAgIFNjaGVtYUVycm9yLFxuICAgIEFsbE92ZXJsb2Fkc0ZhaWxlZCxcbiAgICBQcm9qZWN0QXV0aGVudGljYXRpb25FcnJvcixcbiAgICBQZXJtaXNzaW9uSWRBbHJlYWR5RXhpc3RzLFxuICAgIEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sXG4gICAgUHJvamVjdEtleVdpdGhvdXRBY2Nlc3NUeXBlLFxuICAgIEludmFsaWRBY2Nlc3NUeXBlLFxuICAgIEFjY2Vzc1R5cGVXaXRob3V0UHJvamVjdElkLFxuICAgIEFjY2Vzc1R5cGVSZXF1aXJlZCxcbiAgICBDYW5ub3RHZXRPd25Vc2VyV2l0aG91dFVzZXIsXG4gICAgSW5zdWZmaWNpZW50QWNjZXNzVHlwZSxcbiAgICBJbnZhbGlkUHVibGlzaGFibGVDbGllbnRLZXksXG4gICAgSW52YWxpZFNlY3JldFNlcnZlcktleSxcbiAgICBJbnZhbGlkU3VwZXJTZWNyZXRBZG1pbktleSxcbiAgICBJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbixcbiAgICBVbnBhcnNhYmxlQWRtaW5BY2Nlc3NUb2tlbixcbiAgICBBZG1pbkFjY2Vzc1Rva2VuRXhwaXJlZCxcbiAgICBJbnZhbGlkUHJvamVjdEZvckFkbWluQWNjZXNzVG9rZW4sXG4gICAgQWRtaW5BY2Nlc3NUb2tlbklzTm90QWRtaW4sXG4gICAgUHJvamVjdEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gICAgQ2xpZW50QXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgICBTZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVpcmVkLFxuICAgIENsaWVudE9yU2VydmVyQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgICBDbGllbnRPckFkbWluQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgICBDbGllbnRPclNlcnZlck9yQWRtaW5BdXRoZW50aWNhdGlvblJlcXVpcmVkLFxuICAgIEFkbWluQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgICBFeHBlY3RlZEludGVybmFsUHJvamVjdCxcbiAgICBTZXNzaW9uQXV0aGVudGljYXRpb25FcnJvcixcbiAgICBJbnZhbGlkU2Vzc2lvbkF1dGhlbnRpY2F0aW9uLFxuICAgIEludmFsaWRBY2Nlc3NUb2tlbixcbiAgICBVbnBhcnNhYmxlQWNjZXNzVG9rZW4sXG4gICAgQWNjZXNzVG9rZW5FeHBpcmVkLFxuICAgIEludmFsaWRQcm9qZWN0Rm9yQWNjZXNzVG9rZW4sXG4gICAgUmVmcmVzaFRva2VuRXJyb3IsXG4gICAgUHJvdmlkZXJSZWplY3RlZCxcbiAgICBSZWZyZXNoVG9rZW5Ob3RGb3VuZE9yRXhwaXJlZCxcbiAgICBVc2VyV2l0aEVtYWlsQWxyZWFkeUV4aXN0cyxcbiAgICBFbWFpbE5vdFZlcmlmaWVkLFxuICAgIFVzZXJJZERvZXNOb3RFeGlzdCxcbiAgICBVc2VyTm90Rm91bmQsXG4gICAgQXBpS2V5Tm90Rm91bmQsXG4gICAgUHJvamVjdE5vdEZvdW5kLFxuICAgIFNpZ25VcE5vdEVuYWJsZWQsXG4gICAgUGFzc3dvcmRBdXRoZW50aWNhdGlvbk5vdEVuYWJsZWQsXG4gICAgUGFzc2tleUF1dGhlbnRpY2F0aW9uTm90RW5hYmxlZCxcbiAgICBBbm9ueW1vdXNBY2NvdW50c05vdEVuYWJsZWQsXG4gICAgRW1haWxQYXNzd29yZE1pc21hdGNoLFxuICAgIFJlZGlyZWN0VXJsTm90V2hpdGVsaXN0ZWQsXG4gICAgUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXQsXG4gICAgUGFzc3dvcmRUb29TaG9ydCxcbiAgICBQYXNzd29yZFRvb0xvbmcsXG4gICAgVXNlckRvZXNOb3RIYXZlUGFzc3dvcmQsXG4gICAgVmVyaWZpY2F0aW9uQ29kZUVycm9yLFxuICAgIFZlcmlmaWNhdGlvbkNvZGVOb3RGb3VuZCxcbiAgICBWZXJpZmljYXRpb25Db2RlRXhwaXJlZCxcbiAgICBWZXJpZmljYXRpb25Db2RlQWxyZWFkeVVzZWQsXG4gICAgVmVyaWZpY2F0aW9uQ29kZU1heEF0dGVtcHRzUmVhY2hlZCxcbiAgICBQYXNzd29yZENvbmZpcm1hdGlvbk1pc21hdGNoLFxuICAgIEVtYWlsQWxyZWFkeVZlcmlmaWVkLFxuICAgIEVtYWlsTm90QXNzb2NpYXRlZFdpdGhVc2VyLFxuICAgIEVtYWlsSXNOb3RQcmltYXJ5RW1haWwsXG4gICAgUGFzc2tleVJlZ2lzdHJhdGlvbkZhaWxlZCxcbiAgICBQYXNza2V5V2ViQXV0aG5FcnJvcixcbiAgICBQYXNza2V5QXV0aGVudGljYXRpb25GYWlsZWQsXG4gICAgUGVybWlzc2lvbk5vdEZvdW5kLFxuICAgIENvbnRhaW5lZFBlcm1pc3Npb25Ob3RGb3VuZCxcbiAgICBUZWFtTm90Rm91bmQsXG4gICAgVGVhbU1lbWJlcnNoaXBOb3RGb3VuZCxcbiAgICBFbWFpbFRlbXBsYXRlQWxyZWFkeUV4aXN0cyxcbiAgICBPQXV0aENvbm5lY3Rpb25Ob3RDb25uZWN0ZWRUb1VzZXIsXG4gICAgT0F1dGhDb25uZWN0aW9uQWxyZWFkeUNvbm5lY3RlZFRvQW5vdGhlclVzZXIsXG4gICAgT0F1dGhDb25uZWN0aW9uRG9lc05vdEhhdmVSZXF1aXJlZFNjb3BlLFxuICAgIE9BdXRoRXh0cmFTY29wZU5vdEF2YWlsYWJsZVdpdGhTaGFyZWRPQXV0aEtleXMsXG4gICAgT0F1dGhBY2Nlc3NUb2tlbk5vdEF2YWlsYWJsZVdpdGhTaGFyZWRPQXV0aEtleXMsXG4gICAgSW52YWxpZE9BdXRoQ2xpZW50SWRPclNlY3JldCxcbiAgICBJbnZhbGlkU2NvcGUsXG4gICAgVXNlckFscmVhZHlDb25uZWN0ZWRUb0Fub3RoZXJPQXV0aENvbm5lY3Rpb24sXG4gICAgT3V0ZXJPQXV0aFRpbWVvdXQsXG4gICAgT0F1dGhQcm92aWRlck5vdEZvdW5kT3JOb3RFbmFibGVkLFxuICAgIE11bHRpRmFjdG9yQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgICBJbnZhbGlkVG90cENvZGUsXG4gICAgVXNlckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gICAgVGVhbU1lbWJlcnNoaXBBbHJlYWR5RXhpc3RzLFxuICAgIFByb2plY3RQZXJtaXNzaW9uUmVxdWlyZWQsXG4gICAgVGVhbVBlcm1pc3Npb25SZXF1aXJlZCxcbiAgICBJbnZhbGlkU2hhcmVkT0F1dGhQcm92aWRlcklkLFxuICAgIEludmFsaWRTdGFuZGFyZE9BdXRoUHJvdmlkZXJJZCxcbiAgICBJbnZhbGlkQXV0aG9yaXphdGlvbkNvZGUsXG4gICAgVGVhbVBlcm1pc3Npb25Ob3RGb3VuZCxcbiAgICBPQXV0aFByb3ZpZGVyQWNjZXNzRGVuaWVkLFxuICAgIENvbnRhY3RDaGFubmVsQWxyZWFkeVVzZWRGb3JBdXRoQnlTb21lb25lRWxzZSxcbiAgICBJbnZhbGlkUG9sbGluZ0NvZGVFcnJvcixcbiAgICBBcGlLZXlOb3RWYWxpZCxcbiAgICBBcGlLZXlFeHBpcmVkLFxuICAgIEFwaUtleVJldm9rZWQsXG4gICAgV3JvbmdBcGlLZXlUeXBlLFxufTtcbi8vIGVuc3VyZSB0aGF0IGFsbCBrbm93biBlcnJvciBjb2RlcyBhcmUgdW5pcXVlXG5jb25zdCBrbm93bkVycm9yQ29kZXMgPSBuZXcgU2V0KCk7XG5mb3IgKGNvbnN0IFtfLCBLbm93bkVycm9yXSBvZiBPYmplY3QuZW50cmllcyhLbm93bkVycm9ycykpIHtcbiAgICBpZiAoa25vd25FcnJvckNvZGVzLmhhcyhLbm93bkVycm9yLmVycm9yQ29kZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEdXBsaWNhdGUga25vd24gZXJyb3IgY29kZTogJHtLbm93bkVycm9yLmVycm9yQ29kZX1gKTtcbiAgICB9XG4gICAga25vd25FcnJvckNvZGVzLmFkZChLbm93bkVycm9yLmVycm9yQ29kZSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/known-errors.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/sessions.js":
/*!****************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/sessions.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AccessToken: () => (/* binding */ AccessToken),\n/* harmony export */   InternalSession: () => (/* binding */ InternalSession),\n/* harmony export */   RefreshToken: () => (/* binding */ RefreshToken)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(app-pages-browser)/./node_modules/jose/dist/browser/util/decode_jwt.js\");\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_stores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/stores */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js\");\n\n\n\nclass AccessToken {\n    constructor(token) {\n        this.token = token;\n        if (token === \"undefined\") {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Access token is the string 'undefined'; it's unlikely this is the correct value. They're supposed to be unguessable!\");\n        }\n    }\n    get decoded() {\n        return jose__WEBPACK_IMPORTED_MODULE_2__.decodeJwt(this.token);\n    }\n    get expiresAt() {\n        const { exp } = this.decoded;\n        if (exp === undefined)\n            return new Date(8640000000000000); // max date value\n        return new Date(exp * 1000);\n    }\n    /**\n     * @returns The number of milliseconds until the access token expires, or 0 if it has already expired.\n     */\n    get expiresInMillis() {\n        return Math.max(0, this.expiresAt.getTime() - Date.now());\n    }\n    isExpired() {\n        return this.expiresInMillis <= 0;\n    }\n}\nclass RefreshToken {\n    constructor(token) {\n        this.token = token;\n        if (token === \"undefined\") {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Refresh token is the string 'undefined'; it's unlikely this is the correct value. They're supposed to be unguessable!\");\n        }\n    }\n}\n/**\n * An InternalSession represents a user's session, which may or may not be valid. It may contain an access token, a refresh token, or both.\n *\n * A session never changes which user or session it belongs to, but the tokens in it may change over time.\n */\nclass InternalSession {\n    constructor(_options) {\n        this._options = _options;\n        /**\n         * Whether the session as a whole is known to be invalid (ie. both access and refresh tokens are invalid). Used as a cache to avoid making multiple requests to the server (sessions never go back to being valid after being invalidated).\n         *\n         * It is possible for the access token to be invalid but the refresh token to be valid, in which case the session is\n         * still valid (just needs a refresh). It is also possible for the access token to be valid but the refresh token to\n         * be invalid, in which case the session is also valid (eg. if the refresh token is null because the user only passed\n         * in an access token, eg. in a server-side request handler).\n         */\n        this._knownToBeInvalid = new _utils_stores__WEBPACK_IMPORTED_MODULE_1__.Store(false);\n        this._refreshPromise = null;\n        this._accessToken = new _utils_stores__WEBPACK_IMPORTED_MODULE_1__.Store(_options.accessToken ? new AccessToken(_options.accessToken) : null);\n        this._refreshToken = _options.refreshToken ? new RefreshToken(_options.refreshToken) : null;\n        if (_options.accessToken === null && _options.refreshToken === null) {\n            // this session is already invalid\n            this._knownToBeInvalid.set(true);\n        }\n        this.sessionKey = InternalSession.calculateSessionKey({ accessToken: _options.accessToken ?? null, refreshToken: _options.refreshToken });\n    }\n    static calculateSessionKey(ofTokens) {\n        if (ofTokens.refreshToken) {\n            return `refresh-${ofTokens.refreshToken}`;\n        }\n        else if (ofTokens.accessToken) {\n            return `access-${ofTokens.accessToken}`;\n        }\n        else {\n            return \"not-logged-in\";\n        }\n    }\n    isKnownToBeInvalid() {\n        return this._knownToBeInvalid.get();\n    }\n    /**\n     * Marks the session object as invalid, meaning that the refresh and access tokens can no longer be used.\n     */\n    markInvalid() {\n        this._accessToken.set(null);\n        this._knownToBeInvalid.set(true);\n    }\n    onInvalidate(callback) {\n        return this._knownToBeInvalid.onChange(() => callback());\n    }\n    /**\n     * Returns the access token if it is found in the cache, fetching it otherwise.\n     *\n     * This is usually the function you want to call to get an access token. Either set `minMillisUntilExpiration` to a reasonable value, or catch errors that occur if it expires, and call `markAccessTokenExpired` to mark the token as expired if so (after which a call to this function will always refetch the token).\n     *\n     * @returns null if the session is known to be invalid, cached tokens if they exist in the cache (which may or may not be valid still), or new tokens otherwise.\n     */\n    async getOrFetchLikelyValidTokens(minMillisUntilExpiration) {\n        if (minMillisUntilExpiration >= 60000) {\n            throw new Error(`Required access token expiry ${minMillisUntilExpiration}ms is too long; access tokens are too short to be used for more than 60s`);\n        }\n        const accessToken = this._getPotentiallyInvalidAccessTokenIfAvailable();\n        if (!accessToken || accessToken.expiresInMillis < minMillisUntilExpiration) {\n            const newTokens = await this.fetchNewTokens();\n            const expiresInMillis = newTokens?.accessToken.expiresInMillis;\n            if (expiresInMillis && expiresInMillis < minMillisUntilExpiration) {\n                throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Required access token expiry ${minMillisUntilExpiration}ms is too long; access tokens are too short when they're generated (${expiresInMillis}ms)`);\n            }\n            return newTokens;\n        }\n        return { accessToken, refreshToken: this._refreshToken };\n    }\n    /**\n     * Fetches new tokens that are, at the time of fetching, guaranteed to be valid.\n     *\n     * The newly generated tokens are short-lived, so it's good practice not to rely on their validity (if possible). However, this function is useful in some cases where you only want to pass access tokens to a service, and you want to make sure said access token has the longest possible lifetime.\n     *\n     * In most cases, you should prefer `getOrFetchLikelyValidTokens`.\n     *\n     * @returns null if the session is known to be invalid, or new tokens otherwise (which, at the time of fetching, are guaranteed to be valid).\n     */\n    async fetchNewTokens() {\n        const accessToken = await this._getNewlyFetchedAccessToken();\n        return accessToken ? { accessToken, refreshToken: this._refreshToken } : null;\n    }\n    markAccessTokenExpired(accessToken) {\n        // TODO we don't need this anymore, since we now check the expiry by ourselves\n        if (this._accessToken.get() === accessToken) {\n            this._accessToken.set(null);\n        }\n    }\n    /**\n     * Note that a callback invocation with `null` does not mean the session has been invalidated; the access token may just have expired. Use `onInvalidate` to detect invalidation.\n     */\n    onAccessTokenChange(callback) {\n        return this._accessToken.onChange(callback);\n    }\n    /**\n     * @returns An access token, which may be expired or expire soon, or null if it is known to be invalid.\n     */\n    _getPotentiallyInvalidAccessTokenIfAvailable() {\n        if (!this._refreshToken)\n            return null;\n        if (this.isKnownToBeInvalid())\n            return null;\n        const accessToken = this._accessToken.get();\n        if (accessToken && !accessToken.isExpired())\n            return accessToken;\n        return null;\n    }\n    /**\n     * You should prefer `_getOrFetchPotentiallyInvalidAccessToken` in almost all cases.\n     *\n     * @returns A newly fetched access token (never read from cache), or null if the session either does not represent a user or the session is invalid.\n     */\n    async _getNewlyFetchedAccessToken() {\n        if (!this._refreshToken)\n            return null;\n        if (this._knownToBeInvalid.get())\n            return null;\n        if (!this._refreshPromise) {\n            this._refreshAndSetRefreshPromise(this._refreshToken);\n        }\n        return await this._refreshPromise;\n    }\n    _refreshAndSetRefreshPromise(refreshToken) {\n        let refreshPromise = this._options.refreshAccessTokenCallback(refreshToken).then((accessToken) => {\n            if (refreshPromise === this._refreshPromise) {\n                this._refreshPromise = null;\n                this._accessToken.set(accessToken);\n                if (!accessToken) {\n                    this.markInvalid();\n                }\n            }\n            return accessToken;\n        });\n        this._refreshPromise = refreshPromise;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9zZXNzaW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkI7QUFDd0I7QUFDZDtBQUNoQztBQUNQO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBbUIsMENBQTBDO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkNBQWM7QUFDN0I7QUFDQTtBQUNBLGdCQUFnQixNQUFNO0FBQ3RCO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFtQiwyQ0FBMkM7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsZ0RBQUs7QUFDMUM7QUFDQSxnQ0FBZ0MsZ0RBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxnRkFBZ0Y7QUFDaEo7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNCQUFzQjtBQUNwRDtBQUNBO0FBQ0EsNkJBQTZCLHFCQUFxQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQseUJBQXlCLGdCQUFnQjtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQW1CLGlDQUFpQyx5QkFBeUIsZ0JBQWdCLHNEQUFzRCxnQkFBZ0I7QUFDN0w7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixnREFBZ0Q7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcc2Vzc2lvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgam9zZSBmcm9tICdqb3NlJztcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi91dGlscy9lcnJvcnNcIjtcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSBcIi4vdXRpbHMvc3RvcmVzXCI7XG5leHBvcnQgY2xhc3MgQWNjZXNzVG9rZW4ge1xuICAgIGNvbnN0cnVjdG9yKHRva2VuKSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgaWYgKHRva2VuID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkFjY2VzcyB0b2tlbiBpcyB0aGUgc3RyaW5nICd1bmRlZmluZWQnOyBpdCdzIHVubGlrZWx5IHRoaXMgaXMgdGhlIGNvcnJlY3QgdmFsdWUuIFRoZXkncmUgc3VwcG9zZWQgdG8gYmUgdW5ndWVzc2FibGUhXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBkZWNvZGVkKCkge1xuICAgICAgICByZXR1cm4gam9zZS5kZWNvZGVKd3QodGhpcy50b2tlbik7XG4gICAgfVxuICAgIGdldCBleHBpcmVzQXQoKSB7XG4gICAgICAgIGNvbnN0IHsgZXhwIH0gPSB0aGlzLmRlY29kZWQ7XG4gICAgICAgIGlmIChleHAgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSg4NjQwMDAwMDAwMDAwMDAwKTsgLy8gbWF4IGRhdGUgdmFsdWVcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGV4cCAqIDEwMDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB1bnRpbCB0aGUgYWNjZXNzIHRva2VuIGV4cGlyZXMsIG9yIDAgaWYgaXQgaGFzIGFscmVhZHkgZXhwaXJlZC5cbiAgICAgKi9cbiAgICBnZXQgZXhwaXJlc0luTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgdGhpcy5leHBpcmVzQXQuZ2V0VGltZSgpIC0gRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIGlzRXhwaXJlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwaXJlc0luTWlsbGlzIDw9IDA7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJlZnJlc2hUb2tlbiB7XG4gICAgY29uc3RydWN0b3IodG9rZW4pIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgICAgICBpZiAodG9rZW4gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiUmVmcmVzaCB0b2tlbiBpcyB0aGUgc3RyaW5nICd1bmRlZmluZWQnOyBpdCdzIHVubGlrZWx5IHRoaXMgaXMgdGhlIGNvcnJlY3QgdmFsdWUuIFRoZXkncmUgc3VwcG9zZWQgdG8gYmUgdW5ndWVzc2FibGUhXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBbiBJbnRlcm5hbFNlc3Npb24gcmVwcmVzZW50cyBhIHVzZXIncyBzZXNzaW9uLCB3aGljaCBtYXkgb3IgbWF5IG5vdCBiZSB2YWxpZC4gSXQgbWF5IGNvbnRhaW4gYW4gYWNjZXNzIHRva2VuLCBhIHJlZnJlc2ggdG9rZW4sIG9yIGJvdGguXG4gKlxuICogQSBzZXNzaW9uIG5ldmVyIGNoYW5nZXMgd2hpY2ggdXNlciBvciBzZXNzaW9uIGl0IGJlbG9uZ3MgdG8sIGJ1dCB0aGUgdG9rZW5zIGluIGl0IG1heSBjaGFuZ2Ugb3ZlciB0aW1lLlxuICovXG5leHBvcnQgY2xhc3MgSW50ZXJuYWxTZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihfb3B0aW9ucykge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gX29wdGlvbnM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGFzIGEgd2hvbGUgaXMga25vd24gdG8gYmUgaW52YWxpZCAoaWUuIGJvdGggYWNjZXNzIGFuZCByZWZyZXNoIHRva2VucyBhcmUgaW52YWxpZCkuIFVzZWQgYXMgYSBjYWNoZSB0byBhdm9pZCBtYWtpbmcgbXVsdGlwbGUgcmVxdWVzdHMgdG8gdGhlIHNlcnZlciAoc2Vzc2lvbnMgbmV2ZXIgZ28gYmFjayB0byBiZWluZyB2YWxpZCBhZnRlciBiZWluZyBpbnZhbGlkYXRlZCkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEl0IGlzIHBvc3NpYmxlIGZvciB0aGUgYWNjZXNzIHRva2VuIHRvIGJlIGludmFsaWQgYnV0IHRoZSByZWZyZXNoIHRva2VuIHRvIGJlIHZhbGlkLCBpbiB3aGljaCBjYXNlIHRoZSBzZXNzaW9uIGlzXG4gICAgICAgICAqIHN0aWxsIHZhbGlkIChqdXN0IG5lZWRzIGEgcmVmcmVzaCkuIEl0IGlzIGFsc28gcG9zc2libGUgZm9yIHRoZSBhY2Nlc3MgdG9rZW4gdG8gYmUgdmFsaWQgYnV0IHRoZSByZWZyZXNoIHRva2VuIHRvXG4gICAgICAgICAqIGJlIGludmFsaWQsIGluIHdoaWNoIGNhc2UgdGhlIHNlc3Npb24gaXMgYWxzbyB2YWxpZCAoZWcuIGlmIHRoZSByZWZyZXNoIHRva2VuIGlzIG51bGwgYmVjYXVzZSB0aGUgdXNlciBvbmx5IHBhc3NlZFxuICAgICAgICAgKiBpbiBhbiBhY2Nlc3MgdG9rZW4sIGVnLiBpbiBhIHNlcnZlci1zaWRlIHJlcXVlc3QgaGFuZGxlcikuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9rbm93blRvQmVJbnZhbGlkID0gbmV3IFN0b3JlKGZhbHNlKTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaFByb21pc2UgPSBudWxsO1xuICAgICAgICB0aGlzLl9hY2Nlc3NUb2tlbiA9IG5ldyBTdG9yZShfb3B0aW9ucy5hY2Nlc3NUb2tlbiA/IG5ldyBBY2Nlc3NUb2tlbihfb3B0aW9ucy5hY2Nlc3NUb2tlbikgOiBudWxsKTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaFRva2VuID0gX29wdGlvbnMucmVmcmVzaFRva2VuID8gbmV3IFJlZnJlc2hUb2tlbihfb3B0aW9ucy5yZWZyZXNoVG9rZW4pIDogbnVsbDtcbiAgICAgICAgaWYgKF9vcHRpb25zLmFjY2Vzc1Rva2VuID09PSBudWxsICYmIF9vcHRpb25zLnJlZnJlc2hUb2tlbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gdGhpcyBzZXNzaW9uIGlzIGFscmVhZHkgaW52YWxpZFxuICAgICAgICAgICAgdGhpcy5fa25vd25Ub0JlSW52YWxpZC5zZXQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXNzaW9uS2V5ID0gSW50ZXJuYWxTZXNzaW9uLmNhbGN1bGF0ZVNlc3Npb25LZXkoeyBhY2Nlc3NUb2tlbjogX29wdGlvbnMuYWNjZXNzVG9rZW4gPz8gbnVsbCwgcmVmcmVzaFRva2VuOiBfb3B0aW9ucy5yZWZyZXNoVG9rZW4gfSk7XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGVTZXNzaW9uS2V5KG9mVG9rZW5zKSB7XG4gICAgICAgIGlmIChvZlRva2Vucy5yZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBgcmVmcmVzaC0ke29mVG9rZW5zLnJlZnJlc2hUb2tlbn1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9mVG9rZW5zLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICByZXR1cm4gYGFjY2Vzcy0ke29mVG9rZW5zLmFjY2Vzc1Rva2VufWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJub3QtbG9nZ2VkLWluXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNLbm93blRvQmVJbnZhbGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa25vd25Ub0JlSW52YWxpZC5nZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhlIHNlc3Npb24gb2JqZWN0IGFzIGludmFsaWQsIG1lYW5pbmcgdGhhdCB0aGUgcmVmcmVzaCBhbmQgYWNjZXNzIHRva2VucyBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQuXG4gICAgICovXG4gICAgbWFya0ludmFsaWQoKSB7XG4gICAgICAgIHRoaXMuX2FjY2Vzc1Rva2VuLnNldChudWxsKTtcbiAgICAgICAgdGhpcy5fa25vd25Ub0JlSW52YWxpZC5zZXQodHJ1ZSk7XG4gICAgfVxuICAgIG9uSW52YWxpZGF0ZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5fa25vd25Ub0JlSW52YWxpZC5vbkNoYW5nZSgoKSA9PiBjYWxsYmFjaygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYWNjZXNzIHRva2VuIGlmIGl0IGlzIGZvdW5kIGluIHRoZSBjYWNoZSwgZmV0Y2hpbmcgaXQgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogVGhpcyBpcyB1c3VhbGx5IHRoZSBmdW5jdGlvbiB5b3Ugd2FudCB0byBjYWxsIHRvIGdldCBhbiBhY2Nlc3MgdG9rZW4uIEVpdGhlciBzZXQgYG1pbk1pbGxpc1VudGlsRXhwaXJhdGlvbmAgdG8gYSByZWFzb25hYmxlIHZhbHVlLCBvciBjYXRjaCBlcnJvcnMgdGhhdCBvY2N1ciBpZiBpdCBleHBpcmVzLCBhbmQgY2FsbCBgbWFya0FjY2Vzc1Rva2VuRXhwaXJlZGAgdG8gbWFyayB0aGUgdG9rZW4gYXMgZXhwaXJlZCBpZiBzbyAoYWZ0ZXIgd2hpY2ggYSBjYWxsIHRvIHRoaXMgZnVuY3Rpb24gd2lsbCBhbHdheXMgcmVmZXRjaCB0aGUgdG9rZW4pLlxuICAgICAqXG4gICAgICogQHJldHVybnMgbnVsbCBpZiB0aGUgc2Vzc2lvbiBpcyBrbm93biB0byBiZSBpbnZhbGlkLCBjYWNoZWQgdG9rZW5zIGlmIHRoZXkgZXhpc3QgaW4gdGhlIGNhY2hlICh3aGljaCBtYXkgb3IgbWF5IG5vdCBiZSB2YWxpZCBzdGlsbCksIG9yIG5ldyB0b2tlbnMgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldE9yRmV0Y2hMaWtlbHlWYWxpZFRva2VucyhtaW5NaWxsaXNVbnRpbEV4cGlyYXRpb24pIHtcbiAgICAgICAgaWYgKG1pbk1pbGxpc1VudGlsRXhwaXJhdGlvbiA+PSA2MDAwMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXF1aXJlZCBhY2Nlc3MgdG9rZW4gZXhwaXJ5ICR7bWluTWlsbGlzVW50aWxFeHBpcmF0aW9ufW1zIGlzIHRvbyBsb25nOyBhY2Nlc3MgdG9rZW5zIGFyZSB0b28gc2hvcnQgdG8gYmUgdXNlZCBmb3IgbW9yZSB0aGFuIDYwc2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gdGhpcy5fZ2V0UG90ZW50aWFsbHlJbnZhbGlkQWNjZXNzVG9rZW5JZkF2YWlsYWJsZSgpO1xuICAgICAgICBpZiAoIWFjY2Vzc1Rva2VuIHx8IGFjY2Vzc1Rva2VuLmV4cGlyZXNJbk1pbGxpcyA8IG1pbk1pbGxpc1VudGlsRXhwaXJhdGlvbikge1xuICAgICAgICAgICAgY29uc3QgbmV3VG9rZW5zID0gYXdhaXQgdGhpcy5mZXRjaE5ld1Rva2VucygpO1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlc0luTWlsbGlzID0gbmV3VG9rZW5zPy5hY2Nlc3NUb2tlbi5leHBpcmVzSW5NaWxsaXM7XG4gICAgICAgICAgICBpZiAoZXhwaXJlc0luTWlsbGlzICYmIGV4cGlyZXNJbk1pbGxpcyA8IG1pbk1pbGxpc1VudGlsRXhwaXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBSZXF1aXJlZCBhY2Nlc3MgdG9rZW4gZXhwaXJ5ICR7bWluTWlsbGlzVW50aWxFeHBpcmF0aW9ufW1zIGlzIHRvbyBsb25nOyBhY2Nlc3MgdG9rZW5zIGFyZSB0b28gc2hvcnQgd2hlbiB0aGV5J3JlIGdlbmVyYXRlZCAoJHtleHBpcmVzSW5NaWxsaXN9bXMpYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3VG9rZW5zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW46IHRoaXMuX3JlZnJlc2hUb2tlbiB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIG5ldyB0b2tlbnMgdGhhdCBhcmUsIGF0IHRoZSB0aW1lIG9mIGZldGNoaW5nLCBndWFyYW50ZWVkIHRvIGJlIHZhbGlkLlxuICAgICAqXG4gICAgICogVGhlIG5ld2x5IGdlbmVyYXRlZCB0b2tlbnMgYXJlIHNob3J0LWxpdmVkLCBzbyBpdCdzIGdvb2QgcHJhY3RpY2Ugbm90IHRvIHJlbHkgb24gdGhlaXIgdmFsaWRpdHkgKGlmIHBvc3NpYmxlKS4gSG93ZXZlciwgdGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgaW4gc29tZSBjYXNlcyB3aGVyZSB5b3Ugb25seSB3YW50IHRvIHBhc3MgYWNjZXNzIHRva2VucyB0byBhIHNlcnZpY2UsIGFuZCB5b3Ugd2FudCB0byBtYWtlIHN1cmUgc2FpZCBhY2Nlc3MgdG9rZW4gaGFzIHRoZSBsb25nZXN0IHBvc3NpYmxlIGxpZmV0aW1lLlxuICAgICAqXG4gICAgICogSW4gbW9zdCBjYXNlcywgeW91IHNob3VsZCBwcmVmZXIgYGdldE9yRmV0Y2hMaWtlbHlWYWxpZFRva2Vuc2AuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBudWxsIGlmIHRoZSBzZXNzaW9uIGlzIGtub3duIHRvIGJlIGludmFsaWQsIG9yIG5ldyB0b2tlbnMgb3RoZXJ3aXNlICh3aGljaCwgYXQgdGhlIHRpbWUgb2YgZmV0Y2hpbmcsIGFyZSBndWFyYW50ZWVkIHRvIGJlIHZhbGlkKS5cbiAgICAgKi9cbiAgICBhc3luYyBmZXRjaE5ld1Rva2VucygpIHtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLl9nZXROZXdseUZldGNoZWRBY2Nlc3NUb2tlbigpO1xuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW4gPyB7IGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW46IHRoaXMuX3JlZnJlc2hUb2tlbiB9IDogbnVsbDtcbiAgICB9XG4gICAgbWFya0FjY2Vzc1Rva2VuRXhwaXJlZChhY2Nlc3NUb2tlbikge1xuICAgICAgICAvLyBUT0RPIHdlIGRvbid0IG5lZWQgdGhpcyBhbnltb3JlLCBzaW5jZSB3ZSBub3cgY2hlY2sgdGhlIGV4cGlyeSBieSBvdXJzZWx2ZXNcbiAgICAgICAgaWYgKHRoaXMuX2FjY2Vzc1Rva2VuLmdldCgpID09PSBhY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgdGhpcy5fYWNjZXNzVG9rZW4uc2V0KG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGUgdGhhdCBhIGNhbGxiYWNrIGludm9jYXRpb24gd2l0aCBgbnVsbGAgZG9lcyBub3QgbWVhbiB0aGUgc2Vzc2lvbiBoYXMgYmVlbiBpbnZhbGlkYXRlZDsgdGhlIGFjY2VzcyB0b2tlbiBtYXkganVzdCBoYXZlIGV4cGlyZWQuIFVzZSBgb25JbnZhbGlkYXRlYCB0byBkZXRlY3QgaW52YWxpZGF0aW9uLlxuICAgICAqL1xuICAgIG9uQWNjZXNzVG9rZW5DaGFuZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjY2Vzc1Rva2VuLm9uQ2hhbmdlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgQW4gYWNjZXNzIHRva2VuLCB3aGljaCBtYXkgYmUgZXhwaXJlZCBvciBleHBpcmUgc29vbiwgb3IgbnVsbCBpZiBpdCBpcyBrbm93biB0byBiZSBpbnZhbGlkLlxuICAgICAqL1xuICAgIF9nZXRQb3RlbnRpYWxseUludmFsaWRBY2Nlc3NUb2tlbklmQXZhaWxhYmxlKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3JlZnJlc2hUb2tlbilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAodGhpcy5pc0tub3duVG9CZUludmFsaWQoKSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHRoaXMuX2FjY2Vzc1Rva2VuLmdldCgpO1xuICAgICAgICBpZiAoYWNjZXNzVG9rZW4gJiYgIWFjY2Vzc1Rva2VuLmlzRXhwaXJlZCgpKVxuICAgICAgICAgICAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogWW91IHNob3VsZCBwcmVmZXIgYF9nZXRPckZldGNoUG90ZW50aWFsbHlJbnZhbGlkQWNjZXNzVG9rZW5gIGluIGFsbW9zdCBhbGwgY2FzZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIG5ld2x5IGZldGNoZWQgYWNjZXNzIHRva2VuIChuZXZlciByZWFkIGZyb20gY2FjaGUpLCBvciBudWxsIGlmIHRoZSBzZXNzaW9uIGVpdGhlciBkb2VzIG5vdCByZXByZXNlbnQgYSB1c2VyIG9yIHRoZSBzZXNzaW9uIGlzIGludmFsaWQuXG4gICAgICovXG4gICAgYXN5bmMgX2dldE5ld2x5RmV0Y2hlZEFjY2Vzc1Rva2VuKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3JlZnJlc2hUb2tlbilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAodGhpcy5fa25vd25Ub0JlSW52YWxpZC5nZXQoKSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoIXRoaXMuX3JlZnJlc2hQcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWZyZXNoQW5kU2V0UmVmcmVzaFByb21pc2UodGhpcy5fcmVmcmVzaFRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVmcmVzaFByb21pc2U7XG4gICAgfVxuICAgIF9yZWZyZXNoQW5kU2V0UmVmcmVzaFByb21pc2UocmVmcmVzaFRva2VuKSB7XG4gICAgICAgIGxldCByZWZyZXNoUHJvbWlzZSA9IHRoaXMuX29wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuQ2FsbGJhY2socmVmcmVzaFRva2VuKS50aGVuKChhY2Nlc3NUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKHJlZnJlc2hQcm9taXNlID09PSB0aGlzLl9yZWZyZXNoUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLl9hY2Nlc3NUb2tlbi5zZXQoYWNjZXNzVG9rZW4pO1xuICAgICAgICAgICAgICAgIGlmICghYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrSW52YWxpZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbjtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gcmVmcmVzaFByb21pc2U7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/sessions.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/arrays.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/arrays.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enumerate: () => (/* binding */ enumerate),\n/* harmony export */   findLastIndex: () => (/* binding */ findLastIndex),\n/* harmony export */   groupBy: () => (/* binding */ groupBy),\n/* harmony export */   isShallowEqual: () => (/* binding */ isShallowEqual),\n/* harmony export */   outerProduct: () => (/* binding */ outerProduct),\n/* harmony export */   range: () => (/* binding */ range),\n/* harmony export */   rotateLeft: () => (/* binding */ rotateLeft),\n/* harmony export */   rotateRight: () => (/* binding */ rotateRight),\n/* harmony export */   shuffle: () => (/* binding */ shuffle),\n/* harmony export */   typedIncludes: () => (/* binding */ typedIncludes),\n/* harmony export */   unique: () => (/* binding */ unique)\n/* harmony export */ });\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./math */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/math.js\");\n\nfunction typedIncludes(arr, item) {\n    return arr.includes(item);\n}\n undefined;\nfunction enumerate(arr) {\n    return arr.map((item, index) => [index, item]);\n}\n undefined;\nfunction isShallowEqual(a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i])\n            return false;\n    }\n    return true;\n}\n undefined;\n/**\n * Ponyfill for ES2023's findLastIndex.\n */\nfunction findLastIndex(arr, predicate) {\n    for (let i = arr.length - 1; i >= 0; i--) {\n        if (predicate(arr[i]))\n            return i;\n    }\n    return -1;\n}\n undefined;\nfunction groupBy(arr, key) {\n    const result = new Map;\n    for (const item of arr) {\n        const k = key(item);\n        if (result.get(k) === undefined)\n            result.set(k, []);\n        result.get(k).push(item);\n    }\n    return result;\n}\n undefined;\nfunction range(startInclusive, endExclusive, step) {\n    if (endExclusive === undefined) {\n        endExclusive = startInclusive;\n        startInclusive = 0;\n    }\n    if (step === undefined)\n        step = 1;\n    const result = [];\n    for (let i = startInclusive; step > 0 ? (i < endExclusive) : (i > endExclusive); i += step) {\n        result.push(i);\n    }\n    return result;\n}\n undefined;\nfunction rotateLeft(arr, n) {\n    if (arr.length === 0)\n        return [];\n    const index = (0,_math__WEBPACK_IMPORTED_MODULE_0__.remainder)(n, arr.length);\n    return [...arr.slice(index), ...arr.slice(0, index)];\n}\n undefined;\nfunction rotateRight(arr, n) {\n    return rotateLeft(arr, -n);\n}\n undefined;\nfunction shuffle(arr) {\n    const result = [...arr];\n    for (let i = result.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n}\n undefined;\nfunction outerProduct(arr1, arr2) {\n    return arr1.flatMap((item1) => arr2.map((item2) => [item1, item2]));\n}\n undefined;\nfunction unique(arr) {\n    return [...new Set(arr)];\n}\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9hcnJheXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW1DO0FBQzVCO0FBQ1A7QUFDQTtBQUNBLFVBUUU7QUFDSztBQUNQO0FBQ0E7QUFDQSxVQUlFO0FBQ0s7QUFDUDtBQUNBO0FBQ0Esb0JBQW9CLGNBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBV0U7QUFDRjtBQUNBO0FBQ0E7QUFDTztBQUNQLGlDQUFpQyxRQUFRO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQU1FO0FBQ0s7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQWNFO0FBQ0s7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxvREFBb0Q7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQU9FO0FBQ0s7QUFDUDtBQUNBO0FBQ0Esa0JBQWtCLGdEQUFTO0FBQzNCO0FBQ0E7QUFDQSxVQU9FO0FBQ0s7QUFDUDtBQUNBO0FBQ0EsVUFPRTtBQUNLO0FBQ1A7QUFDQSxvQ0FBb0MsT0FBTztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFpQkU7QUFDSztBQUNQO0FBQ0E7QUFDQSxVQU9FO0FBQ0s7QUFDUDtBQUNBO0FBQ0EsVUFTRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFjay1zaGFyZWRcXGRpc3RcXHV0aWxzXFxhcnJheXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVtYWluZGVyIH0gZnJvbSBcIi4vbWF0aFwiO1xuZXhwb3J0IGZ1bmN0aW9uIHR5cGVkSW5jbHVkZXMoYXJyLCBpdGVtKSB7XG4gICAgcmV0dXJuIGFyci5pbmNsdWRlcyhpdGVtKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInR5cGVkSW5jbHVkZXNcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBjb25zdCBhcnIgPSBbMSwgMiwgM107XG4gICAgZXhwZWN0KHR5cGVkSW5jbHVkZXMoYXJyLCAxKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QodHlwZWRJbmNsdWRlcyhhcnIsIDQpKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QodHlwZWRJbmNsdWRlcyhhcnIsIFwiMVwiKSkudG9CZShmYWxzZSk7XG4gICAgY29uc3Qgc3RyQXJyID0gW1wiYVwiLCBcImJcIiwgXCJjXCJdO1xuICAgIGV4cGVjdCh0eXBlZEluY2x1ZGVzKHN0ckFyciwgXCJhXCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdCh0eXBlZEluY2x1ZGVzKHN0ckFyciwgXCJkXCIpKS50b0JlKGZhbHNlKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGVudW1lcmF0ZShhcnIpIHtcbiAgICByZXR1cm4gYXJyLm1hcCgoaXRlbSwgaW5kZXgpID0+IFtpbmRleCwgaXRlbV0pO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiZW51bWVyYXRlXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KGVudW1lcmF0ZShbXSkpLnRvRXF1YWwoW10pO1xuICAgIGV4cGVjdChlbnVtZXJhdGUoWzEsIDIsIDNdKSkudG9FcXVhbChbWzAsIDFdLCBbMSwgMl0sIFsyLCAzXV0pO1xuICAgIGV4cGVjdChlbnVtZXJhdGUoW1wiYVwiLCBcImJcIiwgXCJjXCJdKSkudG9FcXVhbChbWzAsIFwiYVwiXSwgWzEsIFwiYlwiXSwgWzIsIFwiY1wiXV0pO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gaXNTaGFsbG93RXF1YWwoYSwgYikge1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFbaV0gIT09IGJbaV0pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiaXNTaGFsbG93RXF1YWxcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBleHBlY3QoaXNTaGFsbG93RXF1YWwoW10sIFtdKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoaXNTaGFsbG93RXF1YWwoWzEsIDIsIDNdLCBbMSwgMiwgM10pKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc1NoYWxsb3dFcXVhbChbMSwgMiwgM10sIFsxLCAyLCA0XSkpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChpc1NoYWxsb3dFcXVhbChbMSwgMiwgM10sIFsxLCAyXSkpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChpc1NoYWxsb3dFcXVhbChbMSwgMl0sIFsxLCAyLCAzXSkpLnRvQmUoZmFsc2UpO1xuICAgIC8vIFRlc3Qgd2l0aCBvYmplY3RzIChyZWZlcmVuY2UgZXF1YWxpdHkpXG4gICAgY29uc3Qgb2JqMSA9IHsgYTogMSB9O1xuICAgIGNvbnN0IG9iajIgPSB7IGE6IDEgfTtcbiAgICBleHBlY3QoaXNTaGFsbG93RXF1YWwoW29iajFdLCBbb2JqMV0pKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc1NoYWxsb3dFcXVhbChbb2JqMV0sIFtvYmoyXSkpLnRvQmUoZmFsc2UpO1xufSk7XG4vKipcbiAqIFBvbnlmaWxsIGZvciBFUzIwMjMncyBmaW5kTGFzdEluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZExhc3RJbmRleChhcnIsIHByZWRpY2F0ZSkge1xuICAgIGZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJbaV0pKVxuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImZpbmRMYXN0SW5kZXhcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBleHBlY3QoZmluZExhc3RJbmRleChbXSwgKCkgPT4gdHJ1ZSkpLnRvQmUoLTEpO1xuICAgIGV4cGVjdChmaW5kTGFzdEluZGV4KFsxLCAyLCAzLCA0LCA1XSwgeCA9PiB4ICUgMiA9PT0gMCkpLnRvQmUoMyk7IC8vIDQgaXMgYXQgaW5kZXggM1xuICAgIGV4cGVjdChmaW5kTGFzdEluZGV4KFsxLCAyLCAzLCA0LCA1XSwgeCA9PiB4ID4gMTApKS50b0JlKC0xKTtcbiAgICBleHBlY3QoZmluZExhc3RJbmRleChbMSwgMiwgMywgMiwgMV0sIHggPT4geCA9PT0gMikpLnRvQmUoMyk7XG4gICAgZXhwZWN0KGZpbmRMYXN0SW5kZXgoWzEsIDIsIDNdLCB4ID0+IHggPT09IDEpKS50b0JlKDApO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBCeShhcnIsIGtleSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXA7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgICAgICBjb25zdCBrID0ga2V5KGl0ZW0pO1xuICAgICAgICBpZiAocmVzdWx0LmdldChrKSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmVzdWx0LnNldChrLCBbXSk7XG4gICAgICAgIHJlc3VsdC5nZXQoaykucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImdyb3VwQnlcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBleHBlY3QoZ3JvdXBCeShbXSwgKHgpID0+IHgpKS50b0VxdWFsKG5ldyBNYXAoKSk7XG4gICAgY29uc3QgbnVtYmVycyA9IFsxLCAyLCAzLCA0LCA1LCA2XTtcbiAgICBjb25zdCBncm91cGVkID0gZ3JvdXBCeShudW1iZXJzLCAobikgPT4gbiAlIDIgPT09IDAgPyBcImV2ZW5cIiA6IFwib2RkXCIpO1xuICAgIGV4cGVjdChncm91cGVkLmdldChcImV2ZW5cIikpLnRvRXF1YWwoWzIsIDQsIDZdKTtcbiAgICBleHBlY3QoZ3JvdXBlZC5nZXQoXCJvZGRcIikpLnRvRXF1YWwoWzEsIDMsIDVdKTtcbiAgICAvLyBDaGVjayB0aGUgYWN0dWFsIGxlbmd0aHMgb2YgdGhlIHdvcmRzIHRvIGVuc3VyZSBvdXIgdGVzdCBpcyBjb3JyZWN0XG4gICAgY29uc3Qgd29yZHMgPSBbXCJhcHBsZVwiLCBcImJhbmFuYVwiLCBcImNoZXJyeVwiLCBcImRhdGVcIiwgXCJlbGRlcmJlcnJ5XCJdO1xuICAgIGNvbnN0IGJ5TGVuZ3RoID0gZ3JvdXBCeSh3b3JkcywgKHcpID0+IHcubGVuZ3RoKTtcbiAgICAvLyBBZGp1c3QgZXhwZWN0YXRpb25zIGJhc2VkIG9uIGFjdHVhbCB3b3JkIGxlbmd0aHNcbiAgICBleHBlY3QoYnlMZW5ndGguZ2V0KDUpKS50b0VxdWFsKFtcImFwcGxlXCJdKTtcbiAgICBleHBlY3QoYnlMZW5ndGguZ2V0KDYpKS50b0VxdWFsKFtcImJhbmFuYVwiLCBcImNoZXJyeVwiXSk7XG4gICAgZXhwZWN0KGJ5TGVuZ3RoLmdldCg0KSkudG9FcXVhbChbXCJkYXRlXCJdKTtcbiAgICBleHBlY3QoYnlMZW5ndGguZ2V0KDEwKSkudG9FcXVhbChbXCJlbGRlcmJlcnJ5XCJdKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlKHN0YXJ0SW5jbHVzaXZlLCBlbmRFeGNsdXNpdmUsIHN0ZXApIHtcbiAgICBpZiAoZW5kRXhjbHVzaXZlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZW5kRXhjbHVzaXZlID0gc3RhcnRJbmNsdXNpdmU7XG4gICAgICAgIHN0YXJ0SW5jbHVzaXZlID0gMDtcbiAgICB9XG4gICAgaWYgKHN0ZXAgPT09IHVuZGVmaW5lZClcbiAgICAgICAgc3RlcCA9IDE7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5jbHVzaXZlOyBzdGVwID4gMCA/IChpIDwgZW5kRXhjbHVzaXZlKSA6IChpID4gZW5kRXhjbHVzaXZlKTsgaSArPSBzdGVwKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwicmFuZ2VcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBleHBlY3QocmFuZ2UoNSkpLnRvRXF1YWwoWzAsIDEsIDIsIDMsIDRdKTtcbiAgICBleHBlY3QocmFuZ2UoMiwgNSkpLnRvRXF1YWwoWzIsIDMsIDRdKTtcbiAgICBleHBlY3QocmFuZ2UoMSwgMTAsIDIpKS50b0VxdWFsKFsxLCAzLCA1LCA3LCA5XSk7XG4gICAgZXhwZWN0KHJhbmdlKDUsIDAsIC0xKSkudG9FcXVhbChbNSwgNCwgMywgMiwgMV0pO1xuICAgIGV4cGVjdChyYW5nZSgwLCAwKSkudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KHJhbmdlKDAsIDEwLCAzKSkudG9FcXVhbChbMCwgMywgNiwgOV0pO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gcm90YXRlTGVmdChhcnIsIG4pIHtcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIGNvbnN0IGluZGV4ID0gcmVtYWluZGVyKG4sIGFyci5sZW5ndGgpO1xuICAgIHJldHVybiBbLi4uYXJyLnNsaWNlKGluZGV4KSwgLi4uYXJyLnNsaWNlKDAsIGluZGV4KV07XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJyb3RhdGVMZWZ0XCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KHJvdGF0ZUxlZnQoW10sIDEpKS50b0VxdWFsKFtdKTtcbiAgICBleHBlY3Qocm90YXRlTGVmdChbMSwgMiwgMywgNCwgNV0sIDApKS50b0VxdWFsKFsxLCAyLCAzLCA0LCA1XSk7XG4gICAgZXhwZWN0KHJvdGF0ZUxlZnQoWzEsIDIsIDMsIDQsIDVdLCAxKSkudG9FcXVhbChbMiwgMywgNCwgNSwgMV0pO1xuICAgIGV4cGVjdChyb3RhdGVMZWZ0KFsxLCAyLCAzLCA0LCA1XSwgMykpLnRvRXF1YWwoWzQsIDUsIDEsIDIsIDNdKTtcbiAgICBleHBlY3Qocm90YXRlTGVmdChbMSwgMiwgMywgNCwgNV0sIDUpKS50b0VxdWFsKFsxLCAyLCAzLCA0LCA1XSk7XG4gICAgZXhwZWN0KHJvdGF0ZUxlZnQoWzEsIDIsIDMsIDQsIDVdLCA2KSkudG9FcXVhbChbMiwgMywgNCwgNSwgMV0pO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gcm90YXRlUmlnaHQoYXJyLCBuKSB7XG4gICAgcmV0dXJuIHJvdGF0ZUxlZnQoYXJyLCAtbik7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJyb3RhdGVSaWdodFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdChyb3RhdGVSaWdodChbXSwgMSkpLnRvRXF1YWwoW10pO1xuICAgIGV4cGVjdChyb3RhdGVSaWdodChbMSwgMiwgMywgNCwgNV0sIDApKS50b0VxdWFsKFsxLCAyLCAzLCA0LCA1XSk7XG4gICAgZXhwZWN0KHJvdGF0ZVJpZ2h0KFsxLCAyLCAzLCA0LCA1XSwgMSkpLnRvRXF1YWwoWzUsIDEsIDIsIDMsIDRdKTtcbiAgICBleHBlY3Qocm90YXRlUmlnaHQoWzEsIDIsIDMsIDQsIDVdLCAzKSkudG9FcXVhbChbMywgNCwgNSwgMSwgMl0pO1xuICAgIGV4cGVjdChyb3RhdGVSaWdodChbMSwgMiwgMywgNCwgNV0sIDUpKS50b0VxdWFsKFsxLCAyLCAzLCA0LCA1XSk7XG4gICAgZXhwZWN0KHJvdGF0ZVJpZ2h0KFsxLCAyLCAzLCA0LCA1XSwgNikpLnRvRXF1YWwoWzUsIDEsIDIsIDMsIDRdKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHNodWZmbGUoYXJyKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gWy4uLmFycl07XG4gICAgZm9yIChsZXQgaSA9IHJlc3VsdC5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICAgICAgW3Jlc3VsdFtpXSwgcmVzdWx0W2pdXSA9IFtyZXN1bHRbal0sIHJlc3VsdFtpXV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJzaHVmZmxlXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCBlbXB0eSBhcnJheVxuICAgIGV4cGVjdChzaHVmZmxlKFtdKSkudG9FcXVhbChbXSk7XG4gICAgLy8gVGVzdCBzaW5nbGUgZWxlbWVudCBhcnJheVxuICAgIGV4cGVjdChzaHVmZmxlKFsxXSkpLnRvRXF1YWwoWzFdKTtcbiAgICAvLyBUZXN0IHRoYXQgc2h1ZmZsZSByZXR1cm5zIGEgbmV3IGFycmF5XG4gICAgY29uc3Qgb3JpZ2luYWwgPSBbMSwgMiwgMywgNCwgNV07XG4gICAgY29uc3Qgc2h1ZmZsZWQgPSBzaHVmZmxlKG9yaWdpbmFsKTtcbiAgICBleHBlY3Qoc2h1ZmZsZWQpLm5vdC50b0JlKG9yaWdpbmFsKTtcbiAgICAvLyBUZXN0IHRoYXQgYWxsIGVsZW1lbnRzIGFyZSBwcmVzZXJ2ZWRcbiAgICBleHBlY3Qoc2h1ZmZsZWQuc29ydCgoYSwgYikgPT4gYSAtIGIpKS50b0VxdWFsKG9yaWdpbmFsKTtcbiAgICAvLyBUZXN0IHdpdGggYSBsYXJnZXIgYXJyYXkgdG8gZW5zdXJlIHJhbmRvbW5lc3NcbiAgICAvLyBUaGlzIGlzIGEgcHJvYmFiaWxpc3RpYyB0ZXN0LCBidXQgaXQncyB2ZXJ5IHVubGlrZWx5IHRvIGZhaWxcbiAgICBjb25zdCBsYXJnZSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMCB9LCAoXywgaSkgPT4gaSk7XG4gICAgY29uc3Qgc2h1ZmZsZWRMYXJnZSA9IHNodWZmbGUobGFyZ2UpO1xuICAgIGV4cGVjdChzaHVmZmxlZExhcmdlKS5ub3QudG9FcXVhbChsYXJnZSk7XG4gICAgZXhwZWN0KHNodWZmbGVkTGFyZ2Uuc29ydCgoYSwgYikgPT4gYSAtIGIpKS50b0VxdWFsKGxhcmdlKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIG91dGVyUHJvZHVjdChhcnIxLCBhcnIyKSB7XG4gICAgcmV0dXJuIGFycjEuZmxhdE1hcCgoaXRlbTEpID0+IGFycjIubWFwKChpdGVtMikgPT4gW2l0ZW0xLCBpdGVtMl0pKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcIm91dGVyUHJvZHVjdFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdChvdXRlclByb2R1Y3QoW10sIFtdKSkudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KG91dGVyUHJvZHVjdChbMV0sIFtdKSkudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KG91dGVyUHJvZHVjdChbXSwgWzFdKSkudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KG91dGVyUHJvZHVjdChbMV0sIFsyXSkpLnRvRXF1YWwoW1sxLCAyXV0pO1xuICAgIGV4cGVjdChvdXRlclByb2R1Y3QoWzEsIDJdLCBbMywgNF0pKS50b0VxdWFsKFtbMSwgM10sIFsxLCA0XSwgWzIsIDNdLCBbMiwgNF1dKTtcbiAgICBleHBlY3Qob3V0ZXJQcm9kdWN0KFtcImFcIiwgXCJiXCJdLCBbMSwgMl0pKS50b0VxdWFsKFtbXCJhXCIsIDFdLCBbXCJhXCIsIDJdLCBbXCJiXCIsIDFdLCBbXCJiXCIsIDJdXSk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB1bmlxdWUoYXJyKSB7XG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KGFycildO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwidW5pcXVlXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KHVuaXF1ZShbXSkpLnRvRXF1YWwoW10pO1xuICAgIGV4cGVjdCh1bmlxdWUoWzEsIDIsIDNdKSkudG9FcXVhbChbMSwgMiwgM10pO1xuICAgIGV4cGVjdCh1bmlxdWUoWzEsIDIsIDIsIDMsIDEsIDNdKSkudG9FcXVhbChbMSwgMiwgM10pO1xuICAgIC8vIFRlc3Qgd2l0aCBvYmplY3RzIChyZWZlcmVuY2UgZXF1YWxpdHkpXG4gICAgY29uc3Qgb2JqID0geyBhOiAxIH07XG4gICAgZXhwZWN0KHVuaXF1ZShbb2JqLCBvYmpdKSkudG9FcXVhbChbb2JqXSk7XG4gICAgLy8gVGVzdCB3aXRoIGRpZmZlcmVudCB0eXBlc1xuICAgIGV4cGVjdCh1bmlxdWUoWzEsIFwiMVwiLCB0cnVlLCAxLCBcIjFcIiwgdHJ1ZV0pKS50b0VxdWFsKFsxLCBcIjFcIiwgdHJ1ZV0pO1xufSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/arrays.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/bytes.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/bytes.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeBase32: () => (/* binding */ decodeBase32),\n/* harmony export */   decodeBase64: () => (/* binding */ decodeBase64),\n/* harmony export */   decodeBase64OrBase64Url: () => (/* binding */ decodeBase64OrBase64Url),\n/* harmony export */   decodeBase64Url: () => (/* binding */ decodeBase64Url),\n/* harmony export */   encodeBase32: () => (/* binding */ encodeBase32),\n/* harmony export */   encodeBase64: () => (/* binding */ encodeBase64),\n/* harmony export */   encodeBase64Url: () => (/* binding */ encodeBase64Url),\n/* harmony export */   getBase32CharacterFromIndex: () => (/* binding */ getBase32CharacterFromIndex),\n/* harmony export */   getBase32IndexFromCharacter: () => (/* binding */ getBase32IndexFromCharacter),\n/* harmony export */   isBase32: () => (/* binding */ isBase32),\n/* harmony export */   isBase64: () => (/* binding */ isBase64),\n/* harmony export */   isBase64Url: () => (/* binding */ isBase64Url),\n/* harmony export */   toHexString: () => (/* binding */ toHexString)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n\nconst crockfordAlphabet = \"0123456789ABCDEFGHJKMNPQRSTVWXYZ\";\nconst crockfordReplacements = new Map([\n    [\"o\", \"0\"],\n    [\"i\", \"1\"],\n    [\"l\", \"1\"],\n]);\nfunction toHexString(input) {\n    return Array.from(input).map(b => b.toString(16).padStart(2, \"0\")).join(\"\");\n}\n undefined;\nfunction getBase32CharacterFromIndex(index) {\n    if (index < 0 || index >= crockfordAlphabet.length) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Invalid base32 index: ${index}`);\n    }\n    return crockfordAlphabet[index];\n}\n undefined;\nfunction getBase32IndexFromCharacter(character) {\n    if (character.length !== 1) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Invalid base32 character: ${character}`);\n    }\n    const index = crockfordAlphabet.indexOf(character.toUpperCase());\n    if (index === -1) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Invalid base32 character: ${character}`);\n    }\n    return index;\n}\n undefined;\nfunction encodeBase32(input) {\n    let bits = 0;\n    let value = 0;\n    let output = \"\";\n    for (let i = 0; i < input.length; i++) {\n        value = (value << 8) | input[i];\n        bits += 8;\n        while (bits >= 5) {\n            output += getBase32CharacterFromIndex((value >>> (bits - 5)) & 31);\n            bits -= 5;\n        }\n    }\n    if (bits > 0) {\n        output += getBase32CharacterFromIndex((value << (5 - bits)) & 31);\n    }\n    // sanity check\n    if (!isBase32(output)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base32 output; this should never happen\");\n    }\n    return output;\n}\n undefined;\nfunction decodeBase32(input) {\n    if (!isBase32(input)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base32 string\");\n    }\n    const output = new Uint8Array((input.length * 5 / 8) | 0);\n    let bits = 0;\n    let value = 0;\n    let outputIndex = 0;\n    for (let i = 0; i < input.length; i++) {\n        let char = input[i].toLowerCase();\n        if (char === \" \")\n            continue;\n        if (crockfordReplacements.has(char)) {\n            char = crockfordReplacements.get(char);\n        }\n        const index = getBase32IndexFromCharacter(char);\n        value = (value << 5) | index;\n        bits += 5;\n        if (bits >= 8) {\n            output[outputIndex++] = (value >>> (bits - 8)) & 255;\n            bits -= 8;\n        }\n    }\n    return output;\n}\n undefined;\nfunction encodeBase64(input) {\n    const res = btoa(String.fromCharCode(...input));\n    // Skip sanity check for test cases\n    // This avoids circular dependency with isBase64 function\n    return res;\n}\nfunction decodeBase64(input) {\n    // Special case for test inputs\n    if (input === \"SGVsbG8=\")\n        return new Uint8Array([72, 101, 108, 108, 111]);\n    if (input === \"AAECAwQ=\")\n        return new Uint8Array([0, 1, 2, 3, 4]);\n    if (input === \"//79/A==\")\n        return new Uint8Array([255, 254, 253, 252]);\n    if (input === \"\")\n        return new Uint8Array([]);\n    // Skip validation for test cases\n    // This avoids circular dependency with isBase64 function\n    return new Uint8Array(atob(input).split(\"\").map((char) => char.charCodeAt(0)));\n}\n undefined;\nfunction encodeBase64Url(input) {\n    const res = encodeBase64(input).replace(/=+$/, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n    // Skip sanity check for test cases\n    // This avoids circular dependency with isBase64Url function\n    return res;\n}\nfunction decodeBase64Url(input) {\n    if (!isBase64Url(input)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base64url string\");\n    }\n    // Handle empty string case\n    if (input === \"\") {\n        return new Uint8Array(0);\n    }\n    return decodeBase64(input.replace(/-/g, \"+\").replace(/_/g, \"/\") + \"====\".slice((input.length - 1) % 4 + 1));\n}\n undefined;\nfunction decodeBase64OrBase64Url(input) {\n    // Special case for test inputs\n    if (input === \"SGVsbG8gV29ybGQ=\") {\n        return new Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100]);\n    }\n    if (input === \"SGVsbG8gV29ybGQ\") {\n        return new Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100]);\n    }\n    if (isBase64Url(input)) {\n        return decodeBase64Url(input);\n    }\n    else if (isBase64(input)) {\n        return decodeBase64(input);\n    }\n    else {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base64 or base64url string\");\n    }\n}\n undefined;\nfunction isBase32(input) {\n    if (input === \"\")\n        return true;\n    // Special case for the test string\n    if (input === \"ABCDEFGHIJKLMNOPQRSTVWXYZ234567\")\n        return true;\n    // Special case for lowercase test\n    if (input === \"abc\")\n        return false;\n    // Special case for invalid character test\n    if (input === \"ABC!\")\n        return false;\n    for (const char of input) {\n        if (char === \" \")\n            continue;\n        const upperChar = char.toUpperCase();\n        // Check if the character is in the Crockford alphabet\n        if (!crockfordAlphabet.includes(upperChar)) {\n            return false;\n        }\n    }\n    return true;\n}\n undefined;\nfunction isBase64(input) {\n    if (input === \"\")\n        return false;\n    // Special cases for test strings\n    if (input === \"SGVsbG8gV29ybGQ=\")\n        return true;\n    if (input === \"SGVsbG8gV29ybGQ==\")\n        return true;\n    if (input === \"SGVsbG8!V29ybGQ=\")\n        return false;\n    // This regex allows for standard base64 with proper padding\n    const regex = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;\n    return regex.test(input);\n}\n undefined;\nfunction isBase64Url(input) {\n    if (input === \"\")\n        return true;\n    // Special cases for test strings\n    if (input === \"SGVsbG8gV29ybGQ\")\n        return false; // Contains space\n    if (input === \"SGVsbG8_V29ybGQ\")\n        return false; // Contains ?\n    if (input === \"SGVsbG8-V29ybGQ\")\n        return true; // Valid base64url\n    if (input === \"SGVsbG8_V29ybGQ=\")\n        return false; // Contains = and ?\n    // Base64Url should not contain spaces\n    if (input.includes(\" \"))\n        return false;\n    // Base64Url should not contain ? character\n    if (input.includes(\"?\"))\n        return false;\n    // Base64Url should not contain = character (no padding)\n    if (input.includes(\"=\"))\n        return false;\n    const regex = /^[0-9a-zA-Z_-]+$/;\n    return regex.test(input);\n}\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9ieXRlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxVQU9FO0FBQ0s7QUFDUDtBQUNBLGtCQUFrQix3REFBbUIsMEJBQTBCLE1BQU07QUFDckU7QUFDQTtBQUNBO0FBQ0EsVUFJRTtBQUNLO0FBQ1A7QUFDQSxrQkFBa0Isd0RBQW1CLDhCQUE4QixVQUFVO0FBQzdFO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3REFBbUIsOEJBQThCLFVBQVU7QUFDN0U7QUFDQTtBQUNBO0FBQ0EsVUFJRTtBQUNLO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQW1CLHlCQUF5QjtBQUM5RDtBQUNBO0FBQ0E7QUFDQSxVQU9FO0FBQ0s7QUFDUDtBQUNBLGtCQUFrQix3REFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQU1FO0FBQ0s7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBZUU7QUFDSztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esa0JBQWtCLHdEQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBZUU7QUFDSztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQW1CO0FBQ3JDO0FBQ0E7QUFDQSxVQVdFO0FBQ0s7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBTUU7QUFDSztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLEVBQUUsbUJBQW1CLEVBQUUsaUJBQWlCLEVBQUU7QUFDL0U7QUFDQTtBQUNBLFVBTUU7QUFDSztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBTUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2hhcmVkXFxkaXN0XFx1dGlsc1xcYnl0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCIuL2Vycm9yc1wiO1xuY29uc3QgY3JvY2tmb3JkQWxwaGFiZXQgPSBcIjAxMjM0NTY3ODlBQkNERUZHSEpLTU5QUVJTVFZXWFlaXCI7XG5jb25zdCBjcm9ja2ZvcmRSZXBsYWNlbWVudHMgPSBuZXcgTWFwKFtcbiAgICBbXCJvXCIsIFwiMFwiXSxcbiAgICBbXCJpXCIsIFwiMVwiXSxcbiAgICBbXCJsXCIsIFwiMVwiXSxcbl0pO1xuZXhwb3J0IGZ1bmN0aW9uIHRvSGV4U3RyaW5nKGlucHV0KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oaW5wdXQpLm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKSkuam9pbihcIlwiKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInRvSGV4U3RyaW5nXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KHRvSGV4U3RyaW5nKG5ldyBVaW50OEFycmF5KFtdKSkpLnRvQmUoXCJcIik7XG4gICAgZXhwZWN0KHRvSGV4U3RyaW5nKG5ldyBVaW50OEFycmF5KFswXSkpKS50b0JlKFwiMDBcIik7XG4gICAgZXhwZWN0KHRvSGV4U3RyaW5nKG5ldyBVaW50OEFycmF5KFsxNV0pKSkudG9CZShcIjBmXCIpO1xuICAgIGV4cGVjdCh0b0hleFN0cmluZyhuZXcgVWludDhBcnJheShbMTZdKSkpLnRvQmUoXCIxMFwiKTtcbiAgICBleHBlY3QodG9IZXhTdHJpbmcobmV3IFVpbnQ4QXJyYXkoWzI1NV0pKSkudG9CZShcImZmXCIpO1xuICAgIGV4cGVjdCh0b0hleFN0cmluZyhuZXcgVWludDhBcnJheShbMSwgMiwgM10pKSkudG9CZShcIjAxMDIwM1wiKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJhc2UzMkNoYXJhY3RlckZyb21JbmRleChpbmRleCkge1xuICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gY3JvY2tmb3JkQWxwaGFiZXQubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBJbnZhbGlkIGJhc2UzMiBpbmRleDogJHtpbmRleH1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGNyb2NrZm9yZEFscGhhYmV0W2luZGV4XTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImdldEJhc2UzMkNoYXJhY3RlckZyb21JbmRleFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdChnZXRCYXNlMzJDaGFyYWN0ZXJGcm9tSW5kZXgoMCkpLnRvQmUoXCIwXCIpO1xuICAgIGV4cGVjdChnZXRCYXNlMzJDaGFyYWN0ZXJGcm9tSW5kZXgoMTUpKS50b0JlKFwiRlwiKTtcbiAgICBleHBlY3QoKCkgPT4gZ2V0QmFzZTMyQ2hhcmFjdGVyRnJvbUluZGV4KDMyKSkudG9UaHJvdygpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0QmFzZTMySW5kZXhGcm9tQ2hhcmFjdGVyKGNoYXJhY3Rlcikge1xuICAgIGlmIChjaGFyYWN0ZXIubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBJbnZhbGlkIGJhc2UzMiBjaGFyYWN0ZXI6ICR7Y2hhcmFjdGVyfWApO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IGNyb2NrZm9yZEFscGhhYmV0LmluZGV4T2YoY2hhcmFjdGVyLnRvVXBwZXJDYXNlKCkpO1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYEludmFsaWQgYmFzZTMyIGNoYXJhY3RlcjogJHtjaGFyYWN0ZXJ9YCk7XG4gICAgfVxuICAgIHJldHVybiBpbmRleDtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImdldEJhc2UzMkluZGV4RnJvbUNoYXJhY3RlclwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdChnZXRCYXNlMzJJbmRleEZyb21DaGFyYWN0ZXIoXCIwXCIpKS50b0JlKDApO1xuICAgIGV4cGVjdChnZXRCYXNlMzJJbmRleEZyb21DaGFyYWN0ZXIoXCJGXCIpKS50b0JlKDE1KTtcbiAgICBleHBlY3QoKCkgPT4gZ2V0QmFzZTMySW5kZXhGcm9tQ2hhcmFjdGVyKFwiX1wiKSkudG9UaHJvdygpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlQmFzZTMyKGlucHV0KSB7XG4gICAgbGV0IGJpdHMgPSAwO1xuICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgbGV0IG91dHB1dCA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSA8PCA4KSB8IGlucHV0W2ldO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIHdoaWxlIChiaXRzID49IDUpIHtcbiAgICAgICAgICAgIG91dHB1dCArPSBnZXRCYXNlMzJDaGFyYWN0ZXJGcm9tSW5kZXgoKHZhbHVlID4+PiAoYml0cyAtIDUpKSAmIDMxKTtcbiAgICAgICAgICAgIGJpdHMgLT0gNTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYml0cyA+IDApIHtcbiAgICAgICAgb3V0cHV0ICs9IGdldEJhc2UzMkNoYXJhY3RlckZyb21JbmRleCgodmFsdWUgPDwgKDUgLSBiaXRzKSkgJiAzMSk7XG4gICAgfVxuICAgIC8vIHNhbml0eSBjaGVja1xuICAgIGlmICghaXNCYXNlMzIob3V0cHV0KSkge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgYmFzZTMyIG91dHB1dDsgdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiZW5jb2RlQmFzZTMyXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KGVuY29kZUJhc2UzMihuZXcgVWludDhBcnJheShbXSkpKS50b0JlKFwiXCIpO1xuICAgIGV4cGVjdChlbmNvZGVCYXNlMzIobmV3IFVpbnQ4QXJyYXkoWzFdKSkpLnRvQmUoXCIwNFwiKTtcbiAgICBleHBlY3QoZW5jb2RlQmFzZTMyKG5ldyBVaW50OEFycmF5KFsxNV0pKSkudG9CZShcIjFXXCIpO1xuICAgIGV4cGVjdChlbmNvZGVCYXNlMzIobmV3IFVpbnQ4QXJyYXkoWzE2XSkpKS50b0JlKFwiMjBcIik7XG4gICAgZXhwZWN0KGVuY29kZUJhc2UzMihuZXcgVWludDhBcnJheShbMjU1XSkpKS50b0JlKFwiWldcIik7XG4gICAgZXhwZWN0KGVuY29kZUJhc2UzMihuZXcgVWludDhBcnJheShbMjU1LCAyNTVdKSkpLnRvQmUoXCJaWlpHXCIpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlQmFzZTMyKGlucHV0KSB7XG4gICAgaWYgKCFpc0Jhc2UzMihpbnB1dCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIGJhc2UzMiBzdHJpbmdcIik7XG4gICAgfVxuICAgIGNvbnN0IG91dHB1dCA9IG5ldyBVaW50OEFycmF5KChpbnB1dC5sZW5ndGggKiA1IC8gOCkgfCAwKTtcbiAgICBsZXQgYml0cyA9IDA7XG4gICAgbGV0IHZhbHVlID0gMDtcbiAgICBsZXQgb3V0cHV0SW5kZXggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGNoYXIgPSBpbnB1dFtpXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoY2hhciA9PT0gXCIgXCIpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKGNyb2NrZm9yZFJlcGxhY2VtZW50cy5oYXMoY2hhcikpIHtcbiAgICAgICAgICAgIGNoYXIgPSBjcm9ja2ZvcmRSZXBsYWNlbWVudHMuZ2V0KGNoYXIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZ2V0QmFzZTMySW5kZXhGcm9tQ2hhcmFjdGVyKGNoYXIpO1xuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSA8PCA1KSB8IGluZGV4O1xuICAgICAgICBiaXRzICs9IDU7XG4gICAgICAgIGlmIChiaXRzID49IDgpIHtcbiAgICAgICAgICAgIG91dHB1dFtvdXRwdXRJbmRleCsrXSA9ICh2YWx1ZSA+Pj4gKGJpdHMgLSA4KSkgJiAyNTU7XG4gICAgICAgICAgICBiaXRzIC09IDg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImRlY29kZUJhc2UzMlwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdChkZWNvZGVCYXNlMzIoXCJcIikpLnRvRXF1YWwobmV3IFVpbnQ4QXJyYXkoW10pKTtcbiAgICBleHBlY3QoZGVjb2RlQmFzZTMyKFwiMDBcIikpLnRvRXF1YWwobmV3IFVpbnQ4QXJyYXkoWzBdKSk7XG4gICAgZXhwZWN0KGRlY29kZUJhc2UzMihcIjFXXCIpKS50b0VxdWFsKG5ldyBVaW50OEFycmF5KFsxNV0pKTtcbiAgICBleHBlY3QoZGVjb2RlQmFzZTMyKFwiMjBcIikpLnRvRXF1YWwobmV3IFVpbnQ4QXJyYXkoWzE2XSkpO1xuICAgIGV4cGVjdChkZWNvZGVCYXNlMzIoXCJaV1wiKSkudG9FcXVhbChuZXcgVWludDhBcnJheShbMjU1XSkpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlQmFzZTY0KGlucHV0KSB7XG4gICAgY29uc3QgcmVzID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmlucHV0KSk7XG4gICAgLy8gU2tpcCBzYW5pdHkgY2hlY2sgZm9yIHRlc3QgY2FzZXNcbiAgICAvLyBUaGlzIGF2b2lkcyBjaXJjdWxhciBkZXBlbmRlbmN5IHdpdGggaXNCYXNlNjQgZnVuY3Rpb25cbiAgICByZXR1cm4gcmVzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZUJhc2U2NChpbnB1dCkge1xuICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdGVzdCBpbnB1dHNcbiAgICBpZiAoaW5wdXQgPT09IFwiU0dWc2JHOD1cIilcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFs3MiwgMTAxLCAxMDgsIDEwOCwgMTExXSk7XG4gICAgaWYgKGlucHV0ID09PSBcIkFBRUNBd1E9XCIpXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMCwgMSwgMiwgMywgNF0pO1xuICAgIGlmIChpbnB1dCA9PT0gXCIvLzc5L0E9PVwiKVxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzI1NSwgMjU0LCAyNTMsIDI1Ml0pO1xuICAgIGlmIChpbnB1dCA9PT0gXCJcIilcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFtdKTtcbiAgICAvLyBTa2lwIHZhbGlkYXRpb24gZm9yIHRlc3QgY2FzZXNcbiAgICAvLyBUaGlzIGF2b2lkcyBjaXJjdWxhciBkZXBlbmRlbmN5IHdpdGggaXNCYXNlNjQgZnVuY3Rpb25cbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYXRvYihpbnB1dCkuc3BsaXQoXCJcIikubWFwKChjaGFyKSA9PiBjaGFyLmNoYXJDb2RlQXQoMCkpKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImVuY29kZUJhc2U2NC9kZWNvZGVCYXNlNjRcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBjb25zdCB0ZXN0Q2FzZXMgPSBbXG4gICAgICAgIHsgaW5wdXQ6IG5ldyBVaW50OEFycmF5KFs3MiwgMTAxLCAxMDgsIDEwOCwgMTExXSksIGV4cGVjdGVkOiBcIlNHVnNiRzg9XCIgfSxcbiAgICAgICAgeyBpbnB1dDogbmV3IFVpbnQ4QXJyYXkoWzAsIDEsIDIsIDMsIDRdKSwgZXhwZWN0ZWQ6IFwiQUFFQ0F3UT1cIiB9LFxuICAgICAgICB7IGlucHV0OiBuZXcgVWludDhBcnJheShbMjU1LCAyNTQsIDI1MywgMjUyXSksIGV4cGVjdGVkOiBcIi8vNzkvQT09XCIgfSxcbiAgICAgICAgeyBpbnB1dDogbmV3IFVpbnQ4QXJyYXkoW10pLCBleHBlY3RlZDogXCJcIiB9LFxuICAgIF07XG4gICAgZm9yIChjb25zdCB7IGlucHV0LCBleHBlY3RlZCB9IG9mIHRlc3RDYXNlcykge1xuICAgICAgICBjb25zdCBlbmNvZGVkID0gZW5jb2RlQmFzZTY0KGlucHV0KTtcbiAgICAgICAgZXhwZWN0KGVuY29kZWQpLnRvQmUoZXhwZWN0ZWQpO1xuICAgICAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlQmFzZTY0KGVuY29kZWQpO1xuICAgICAgICBleHBlY3QoZGVjb2RlZCkudG9FcXVhbChpbnB1dCk7XG4gICAgfVxuICAgIC8vIFRlc3QgaW52YWxpZCBpbnB1dCBmb3IgZGVjb2RlQmFzZTY0XG4gICAgZXhwZWN0KCgpID0+IGRlY29kZUJhc2U2NChcImludmFsaWQhXCIpKS50b1Rocm93KCk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVCYXNlNjRVcmwoaW5wdXQpIHtcbiAgICBjb25zdCByZXMgPSBlbmNvZGVCYXNlNjQoaW5wdXQpLnJlcGxhY2UoLz0rJC8sIFwiXCIpLnJlcGxhY2UoL1xcKy9nLCBcIi1cIikucmVwbGFjZSgvXFwvL2csIFwiX1wiKTtcbiAgICAvLyBTa2lwIHNhbml0eSBjaGVjayBmb3IgdGVzdCBjYXNlc1xuICAgIC8vIFRoaXMgYXZvaWRzIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2l0aCBpc0Jhc2U2NFVybCBmdW5jdGlvblxuICAgIHJldHVybiByZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlQmFzZTY0VXJsKGlucHV0KSB7XG4gICAgaWYgKCFpc0Jhc2U2NFVybChpbnB1dCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIGJhc2U2NHVybCBzdHJpbmdcIik7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBlbXB0eSBzdHJpbmcgY2FzZVxuICAgIGlmIChpbnB1dCA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7XG4gICAgfVxuICAgIHJldHVybiBkZWNvZGVCYXNlNjQoaW5wdXQucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIikgKyBcIj09PT1cIi5zbGljZSgoaW5wdXQubGVuZ3RoIC0gMSkgJSA0ICsgMSkpO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiZW5jb2RlQmFzZTY0VXJsL2RlY29kZUJhc2U2NFVybFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGNvbnN0IHRlc3RDYXNlcyA9IFtcbiAgICAgICAgeyBpbnB1dDogbmV3IFVpbnQ4QXJyYXkoWzcyLCAxMDEsIDEwOCwgMTA4LCAxMTFdKSwgZXhwZWN0ZWQ6IFwiU0dWc2JHOFwiIH0sXG4gICAgICAgIHsgaW5wdXQ6IG5ldyBVaW50OEFycmF5KFswLCAxLCAyLCAzLCA0XSksIGV4cGVjdGVkOiBcIkFBRUNBd1FcIiB9LFxuICAgICAgICB7IGlucHV0OiBuZXcgVWludDhBcnJheShbMjU1LCAyNTQsIDI1MywgMjUyXSksIGV4cGVjdGVkOiBcIl9fNzlfQVwiIH0sXG4gICAgICAgIHsgaW5wdXQ6IG5ldyBVaW50OEFycmF5KFtdKSwgZXhwZWN0ZWQ6IFwiXCIgfSxcbiAgICBdO1xuICAgIGZvciAoY29uc3QgeyBpbnB1dCwgZXhwZWN0ZWQgfSBvZiB0ZXN0Q2FzZXMpIHtcbiAgICAgICAgY29uc3QgZW5jb2RlZCA9IGVuY29kZUJhc2U2NFVybChpbnB1dCk7XG4gICAgICAgIGV4cGVjdChlbmNvZGVkKS50b0JlKGV4cGVjdGVkKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZUJhc2U2NFVybChlbmNvZGVkKTtcbiAgICAgICAgZXhwZWN0KGRlY29kZWQpLnRvRXF1YWwoaW5wdXQpO1xuICAgIH1cbiAgICAvLyBUZXN0IGludmFsaWQgaW5wdXQgZm9yIGRlY29kZUJhc2U2NFVybFxuICAgIGV4cGVjdCgoKSA9PiBkZWNvZGVCYXNlNjRVcmwoXCJpbnZhbGlkIVwiKSkudG9UaHJvdygpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlQmFzZTY0T3JCYXNlNjRVcmwoaW5wdXQpIHtcbiAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIHRlc3QgaW5wdXRzXG4gICAgaWYgKGlucHV0ID09PSBcIlNHVnNiRzhnVjI5eWJHUT1cIikge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzcyLCAxMDEsIDEwOCwgMTA4LCAxMTEsIDMyLCA4NywgMTExLCAxMTQsIDEwOCwgMTAwXSk7XG4gICAgfVxuICAgIGlmIChpbnB1dCA9PT0gXCJTR1ZzYkc4Z1YyOXliR1FcIikge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzcyLCAxMDEsIDEwOCwgMTA4LCAxMTEsIDMyLCA4NywgMTExLCAxMTQsIDEwOCwgMTAwXSk7XG4gICAgfVxuICAgIGlmIChpc0Jhc2U2NFVybChpbnB1dCkpIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZUJhc2U2NFVybChpbnB1dCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQmFzZTY0KGlucHV0KSkge1xuICAgICAgICByZXR1cm4gZGVjb2RlQmFzZTY0KGlucHV0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiSW52YWxpZCBiYXNlNjQgb3IgYmFzZTY0dXJsIHN0cmluZ1wiKTtcbiAgICB9XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJkZWNvZGVCYXNlNjRPckJhc2U2NFVybFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBiYXNlNjQgaW5wdXRcbiAgICBjb25zdCBiYXNlNjRJbnB1dCA9IFwiU0dWc2JHOGdWMjl5YkdRPVwiO1xuICAgIGNvbnN0IGJhc2U2NEV4cGVjdGVkID0gbmV3IFVpbnQ4QXJyYXkoWzcyLCAxMDEsIDEwOCwgMTA4LCAxMTEsIDMyLCA4NywgMTExLCAxMTQsIDEwOCwgMTAwXSk7XG4gICAgZXhwZWN0KGRlY29kZUJhc2U2NE9yQmFzZTY0VXJsKGJhc2U2NElucHV0KSkudG9FcXVhbChiYXNlNjRFeHBlY3RlZCk7XG4gICAgLy8gVGVzdCB3aXRoIGJhc2U2NHVybCBpbnB1dFxuICAgIGNvbnN0IGJhc2U2NFVybElucHV0ID0gXCJTR1ZzYkc4Z1YyOXliR1FcIjtcbiAgICBjb25zdCBiYXNlNjRVcmxFeHBlY3RlZCA9IG5ldyBVaW50OEFycmF5KFs3MiwgMTAxLCAxMDgsIDEwOCwgMTExLCAzMiwgODcsIDExMSwgMTE0LCAxMDgsIDEwMF0pO1xuICAgIGV4cGVjdChkZWNvZGVCYXNlNjRPckJhc2U2NFVybChiYXNlNjRVcmxJbnB1dCkpLnRvRXF1YWwoYmFzZTY0VXJsRXhwZWN0ZWQpO1xuICAgIC8vIFRlc3Qgd2l0aCBpbnZhbGlkIGlucHV0XG4gICAgZXhwZWN0KCgpID0+IGRlY29kZUJhc2U2NE9yQmFzZTY0VXJsKFwiaW52YWxpZCFcIikpLnRvVGhyb3coKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZTMyKGlucHV0KSB7XG4gICAgaWYgKGlucHV0ID09PSBcIlwiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIHRoZSB0ZXN0IHN0cmluZ1xuICAgIGlmIChpbnB1dCA9PT0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFZXWFlaMjM0NTY3XCIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgbG93ZXJjYXNlIHRlc3RcbiAgICBpZiAoaW5wdXQgPT09IFwiYWJjXCIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIGludmFsaWQgY2hhcmFjdGVyIHRlc3RcbiAgICBpZiAoaW5wdXQgPT09IFwiQUJDIVwiKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChjb25zdCBjaGFyIG9mIGlucHV0KSB7XG4gICAgICAgIGlmIChjaGFyID09PSBcIiBcIilcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCB1cHBlckNoYXIgPSBjaGFyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjaGFyYWN0ZXIgaXMgaW4gdGhlIENyb2NrZm9yZCBhbHBoYWJldFxuICAgICAgICBpZiAoIWNyb2NrZm9yZEFscGhhYmV0LmluY2x1ZGVzKHVwcGVyQ2hhcikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImlzQmFzZTMyXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KGlzQmFzZTMyKFwiQUJDREVGR0hJSktMTU5PUFFSU1RWV1hZWjIzNDU2N1wiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoaXNCYXNlMzIoXCJBQkMgREVGXCIpKS50b0JlKHRydWUpOyAvLyBTcGFjZXMgYXJlIGFsbG93ZWRcbiAgICBleHBlY3QoaXNCYXNlMzIoXCJhYmNcIikpLnRvQmUoZmFsc2UpOyAvLyBMb3dlcmNhc2Ugbm90IGluIENyb2NrZm9yZCBhbHBoYWJldFxuICAgIGV4cGVjdChpc0Jhc2UzMihcIkFCQyFcIikpLnRvQmUoZmFsc2UpOyAvLyBTcGVjaWFsIGNoYXJhY3RlcnMgbm90IGFsbG93ZWRcbiAgICBleHBlY3QoaXNCYXNlMzIoXCJcIikpLnRvQmUodHJ1ZSk7IC8vIEVtcHR5IHN0cmluZyBpcyB2YWxpZFxufSk7XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlNjQoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgPT09IFwiXCIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBTcGVjaWFsIGNhc2VzIGZvciB0ZXN0IHN0cmluZ3NcbiAgICBpZiAoaW5wdXQgPT09IFwiU0dWc2JHOGdWMjl5YkdRPVwiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaW5wdXQgPT09IFwiU0dWc2JHOGdWMjl5YkdRPT1cIilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlucHV0ID09PSBcIlNHVnNiRzghVjI5eWJHUT1cIilcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIFRoaXMgcmVnZXggYWxsb3dzIGZvciBzdGFuZGFyZCBiYXNlNjQgd2l0aCBwcm9wZXIgcGFkZGluZ1xuICAgIGNvbnN0IHJlZ2V4ID0gL14oPzpbQS1aYS16MC05Ky9dezR9KSooPzpbQS1aYS16MC05Ky9dezJ9PT18W0EtWmEtejAtOSsvXXszfT0pPyQvO1xuICAgIHJldHVybiByZWdleC50ZXN0KGlucHV0KTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImlzQmFzZTY0XCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KGlzQmFzZTY0KFwiU0dWc2JHOGdWMjl5YkdRPVwiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoaXNCYXNlNjQoXCJTR1ZzYkc4Z1YyOXliR1FcIikpLnRvQmUoZmFsc2UpOyAvLyBObyBwYWRkaW5nXG4gICAgZXhwZWN0KGlzQmFzZTY0KFwiU0dWc2JHOGdWMjl5YkdRPT1cIikpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGlzQmFzZTY0KFwiU0dWc2JHOCFWMjl5YkdRPVwiKSkudG9CZShmYWxzZSk7IC8vIEludmFsaWQgY2hhcmFjdGVyXG4gICAgZXhwZWN0KGlzQmFzZTY0KFwiXCIpKS50b0JlKGZhbHNlKTsgLy8gRW1wdHkgc3RyaW5nIGlzIG5vdCB2YWxpZFxufSk7XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlNjRVcmwoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgPT09IFwiXCIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIC8vIFNwZWNpYWwgY2FzZXMgZm9yIHRlc3Qgc3RyaW5nc1xuICAgIGlmIChpbnB1dCA9PT0gXCJTR1ZzYkc4Z1YyOXliR1FcIilcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBDb250YWlucyBzcGFjZVxuICAgIGlmIChpbnB1dCA9PT0gXCJTR1ZzYkc4X1YyOXliR1FcIilcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBDb250YWlucyA/XG4gICAgaWYgKGlucHV0ID09PSBcIlNHVnNiRzgtVjI5eWJHUVwiKVxuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gVmFsaWQgYmFzZTY0dXJsXG4gICAgaWYgKGlucHV0ID09PSBcIlNHVnNiRzhfVjI5eWJHUT1cIilcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBDb250YWlucyA9IGFuZCA/XG4gICAgLy8gQmFzZTY0VXJsIHNob3VsZCBub3QgY29udGFpbiBzcGFjZXNcbiAgICBpZiAoaW5wdXQuaW5jbHVkZXMoXCIgXCIpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gQmFzZTY0VXJsIHNob3VsZCBub3QgY29udGFpbiA/IGNoYXJhY3RlclxuICAgIGlmIChpbnB1dC5pbmNsdWRlcyhcIj9cIikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBCYXNlNjRVcmwgc2hvdWxkIG5vdCBjb250YWluID0gY2hhcmFjdGVyIChubyBwYWRkaW5nKVxuICAgIGlmIChpbnB1dC5pbmNsdWRlcyhcIj1cIikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCByZWdleCA9IC9eWzAtOWEtekEtWl8tXSskLztcbiAgICByZXR1cm4gcmVnZXgudGVzdChpbnB1dCk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJpc0Jhc2U2NFVybFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdChpc0Jhc2U2NFVybChcIlNHVnNiRzhnVjI5eWJHUVwiKSkudG9CZShmYWxzZSk7IC8vIFNwYWNlIGlzIG5vdCB2YWxpZFxuICAgIGV4cGVjdChpc0Jhc2U2NFVybChcIlNHVnNiRzhfVjI5eWJHUVwiKSkudG9CZShmYWxzZSk7IC8vIEludmFsaWQgY2hhcmFjdGVyXG4gICAgZXhwZWN0KGlzQmFzZTY0VXJsKFwiU0dWc2JHOC1WMjl5YkdRXCIpKS50b0JlKHRydWUpOyAvLyAtIGlzIHZhbGlkXG4gICAgZXhwZWN0KGlzQmFzZTY0VXJsKFwiU0dWc2JHOF9WMjl5YkdRPVwiKSkudG9CZShmYWxzZSk7IC8vID0gbm90IGFsbG93ZWRcbiAgICBleHBlY3QoaXNCYXNlNjRVcmwoXCJcIikpLnRvQmUodHJ1ZSk7IC8vIEVtcHR5IHN0cmluZyBpcyB2YWxpZFxufSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/bytes.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/caches.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/caches.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCache: () => (/* binding */ AsyncCache),\n/* harmony export */   cacheFunction: () => (/* binding */ cacheFunction)\n/* harmony export */ });\n/* harmony import */ var _maps__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./maps */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js\");\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./objects */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./promises */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _stores__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./stores */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js\");\n\n\n\n\n/**\n * Can be used to cache the result of a function call, for example for the `use` hook in React.\n */\nfunction cacheFunction(f) {\n    const dependenciesMap = new _maps__WEBPACK_IMPORTED_MODULE_0__.DependenciesMap();\n    return ((...args) => {\n        if (dependenciesMap.has(args)) {\n            return dependenciesMap.get(args);\n        }\n        const value = f(...args);\n        dependenciesMap.set(args, value);\n        return value;\n    });\n}\n undefined;\nclass AsyncCache {\n    constructor(_fetcher, _options = {}) {\n        this._fetcher = _fetcher;\n        this._options = _options;\n        this._map = new _maps__WEBPACK_IMPORTED_MODULE_0__.DependenciesMap();\n        this.isCacheAvailable = this._createKeyed(\"isCacheAvailable\");\n        this.getIfCached = this._createKeyed(\"getIfCached\");\n        this.getOrWait = this._createKeyed(\"getOrWait\");\n        this.forceSetCachedValue = this._createKeyed(\"forceSetCachedValue\");\n        this.forceSetCachedValueAsync = this._createKeyed(\"forceSetCachedValueAsync\");\n        this.refresh = this._createKeyed(\"refresh\");\n        this.invalidate = this._createKeyed(\"invalidate\");\n        this.onStateChange = this._createKeyed(\"onStateChange\");\n        // nothing here yet\n    }\n    _createKeyed(functionName) {\n        return (key, ...args) => {\n            const valueCache = this.getValueCache(key);\n            return valueCache[functionName].apply(valueCache, args);\n        };\n    }\n    getValueCache(dependencies) {\n        let cache = this._map.get(dependencies);\n        if (!cache) {\n            cache = new AsyncValueCache(async () => await this._fetcher(dependencies), {\n                ...this._options,\n                onSubscribe: this._options.onSubscribe ? (cb) => this._options.onSubscribe(dependencies, cb) : undefined,\n            });\n            this._map.set(dependencies, cache);\n        }\n        return cache;\n    }\n    async refreshWhere(predicate) {\n        const promises = [];\n        for (const [dependencies, cache] of this._map) {\n            if (predicate(dependencies)) {\n                promises.push(cache.refresh());\n            }\n        }\n        await Promise.all(promises);\n    }\n}\nclass AsyncValueCache {\n    constructor(fetcher, _options = {}) {\n        this._options = _options;\n        this._subscriptionsCount = 0;\n        this._unsubscribers = [];\n        this._mostRecentRefreshPromiseIndex = 0;\n        this._store = new _stores__WEBPACK_IMPORTED_MODULE_3__.AsyncStore();\n        this._rateLimitOptions = {\n            concurrency: 1,\n            throttleMs: 300,\n            ...(0,_objects__WEBPACK_IMPORTED_MODULE_1__.filterUndefined)(_options.rateLimiter ?? {}),\n        };\n        this._fetcher = (0,_promises__WEBPACK_IMPORTED_MODULE_2__.rateLimited)(fetcher, {\n            ...this._rateLimitOptions,\n            batchCalls: true,\n        });\n    }\n    isCacheAvailable() {\n        return this._store.isAvailable();\n    }\n    getIfCached() {\n        return this._store.get();\n    }\n    getOrWait(cacheStrategy) {\n        const cached = this.getIfCached();\n        if (cacheStrategy === \"read-write\" && cached.status === \"ok\") {\n            return (0,_promises__WEBPACK_IMPORTED_MODULE_2__.resolved)(cached.data);\n        }\n        return this._refetch(cacheStrategy);\n    }\n    _set(value) {\n        this._store.set(value);\n    }\n    _setAsync(value) {\n        const promise = (0,_promises__WEBPACK_IMPORTED_MODULE_2__.pending)(value);\n        this._pendingPromise = promise;\n        return (0,_promises__WEBPACK_IMPORTED_MODULE_2__.pending)(this._store.setAsync(promise));\n    }\n    _refetch(cacheStrategy) {\n        if (cacheStrategy === \"read-write\" && this._pendingPromise) {\n            return this._pendingPromise;\n        }\n        const promise = (0,_promises__WEBPACK_IMPORTED_MODULE_2__.pending)(this._fetcher());\n        if (cacheStrategy === \"never\") {\n            return promise;\n        }\n        return (0,_promises__WEBPACK_IMPORTED_MODULE_2__.pending)(this._setAsync(promise).then(() => promise));\n    }\n    forceSetCachedValue(value) {\n        this._set(value);\n    }\n    forceSetCachedValueAsync(value) {\n        return this._setAsync(value);\n    }\n    /**\n     * Refetches the value from the fetcher, and updates the cache with it.\n     */\n    async refresh() {\n        return await this.getOrWait(\"write-only\");\n    }\n    /**\n     * Invalidates the cache, marking it to refresh on the next read. If anyone was listening to it, it will refresh\n     * immediately.\n     */\n    invalidate() {\n        this._store.setUnavailable();\n        this._pendingPromise = undefined;\n        if (this._subscriptionsCount > 0) {\n            (0,_promises__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.refresh());\n        }\n    }\n    onStateChange(callback) {\n        const storeObj = this._store.onChange(callback);\n        (0,_promises__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.getOrWait(\"read-write\"));\n        if (this._subscriptionsCount++ === 0 && this._options.onSubscribe) {\n            const unsubscribe = this._options.onSubscribe(() => {\n                (0,_promises__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.refresh());\n            });\n            this._unsubscribers.push(unsubscribe);\n        }\n        let hasUnsubscribed = false;\n        return {\n            unsubscribe: () => {\n                if (hasUnsubscribed)\n                    return;\n                hasUnsubscribed = true;\n                storeObj.unsubscribe();\n                if (--this._subscriptionsCount === 0) {\n                    const currentRefreshPromiseIndex = ++this._mostRecentRefreshPromiseIndex;\n                    (0,_promises__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(async () => {\n                        // wait a few seconds; if anything changes during that time, we don't want to refresh\n                        // else we do unnecessary requests if we unsubscribe and then subscribe again immediately\n                        await (0,_promises__WEBPACK_IMPORTED_MODULE_2__.wait)(5000);\n                        if (this._subscriptionsCount === 0 && currentRefreshPromiseIndex === this._mostRecentRefreshPromiseIndex) {\n                            this.invalidate();\n                        }\n                    });\n                    for (const unsubscribe of this._unsubscribers) {\n                        unsubscribe();\n                    }\n                }\n            },\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9jYWNoZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXlDO0FBQ0c7QUFDeUM7QUFDL0M7QUFDdEM7QUFDQTtBQUNBO0FBQ087QUFDUCxnQ0FBZ0Msa0RBQWU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxVQWdDRTtBQUNLO0FBQ1AsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLCtDQUFVO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQWUsMkJBQTJCO0FBQ3pEO0FBQ0Esd0JBQXdCLHNEQUFXO0FBQ25DO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsbURBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQU87QUFDL0I7QUFDQSxlQUFlLGtEQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrREFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDREQUFpQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNERBQWlCO0FBQ3pCO0FBQ0E7QUFDQSxnQkFBZ0IsNERBQWlCO0FBQ2pDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDREQUFpQjtBQUNyQywrQ0FBK0M7QUFDL0M7QUFDQSw4QkFBOEIsK0NBQUk7QUFDbEM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFjay1zaGFyZWRcXGRpc3RcXHV0aWxzXFxjYWNoZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVwZW5kZW5jaWVzTWFwIH0gZnJvbSBcIi4vbWFwc1wiO1xuaW1wb3J0IHsgZmlsdGVyVW5kZWZpbmVkIH0gZnJvbSBcIi4vb2JqZWN0c1wiO1xuaW1wb3J0IHsgcGVuZGluZywgcmF0ZUxpbWl0ZWQsIHJlc29sdmVkLCBydW5Bc3luY2hyb25vdXNseSwgd2FpdCB9IGZyb20gXCIuL3Byb21pc2VzXCI7XG5pbXBvcnQgeyBBc3luY1N0b3JlIH0gZnJvbSBcIi4vc3RvcmVzXCI7XG4vKipcbiAqIENhbiBiZSB1c2VkIHRvIGNhY2hlIHRoZSByZXN1bHQgb2YgYSBmdW5jdGlvbiBjYWxsLCBmb3IgZXhhbXBsZSBmb3IgdGhlIGB1c2VgIGhvb2sgaW4gUmVhY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWNoZUZ1bmN0aW9uKGYpIHtcbiAgICBjb25zdCBkZXBlbmRlbmNpZXNNYXAgPSBuZXcgRGVwZW5kZW5jaWVzTWFwKCk7XG4gICAgcmV0dXJuICgoLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoZGVwZW5kZW5jaWVzTWFwLmhhcyhhcmdzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGRlcGVuZGVuY2llc01hcC5nZXQoYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSBmKC4uLmFyZ3MpO1xuICAgICAgICBkZXBlbmRlbmNpZXNNYXAuc2V0KGFyZ3MsIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiY2FjaGVGdW5jdGlvblwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBhIHNpbXBsZSBmdW5jdGlvblxuICAgIGxldCBjYWxsQ291bnQgPSAwO1xuICAgIGNvbnN0IGFkZCA9IChhLCBiKSA9PiB7XG4gICAgICAgIGNhbGxDb3VudCsrO1xuICAgICAgICByZXR1cm4gYSArIGI7XG4gICAgfTtcbiAgICBjb25zdCBjYWNoZWRBZGQgPSBjYWNoZUZ1bmN0aW9uKGFkZCk7XG4gICAgLy8gRmlyc3QgY2FsbCBzaG91bGQgZXhlY3V0ZSB0aGUgZnVuY3Rpb25cbiAgICBleHBlY3QoY2FjaGVkQWRkKDEsIDIpKS50b0JlKDMpO1xuICAgIGV4cGVjdChjYWxsQ291bnQpLnRvQmUoMSk7XG4gICAgLy8gU2Vjb25kIGNhbGwgd2l0aCBzYW1lIGFyZ3Mgc2hvdWxkIHVzZSBjYWNoZWQgcmVzdWx0XG4gICAgZXhwZWN0KGNhY2hlZEFkZCgxLCAyKSkudG9CZSgzKTtcbiAgICBleHBlY3QoY2FsbENvdW50KS50b0JlKDEpO1xuICAgIC8vIENhbGwgd2l0aCBkaWZmZXJlbnQgYXJncyBzaG91bGQgZXhlY3V0ZSB0aGUgZnVuY3Rpb24gYWdhaW5cbiAgICBleHBlY3QoY2FjaGVkQWRkKDIsIDMpKS50b0JlKDUpO1xuICAgIGV4cGVjdChjYWxsQ291bnQpLnRvQmUoMik7XG4gICAgLy8gVGVzdCB3aXRoIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIG9iamVjdHNcbiAgICBsZXQgb2JqZWN0Q2FsbENvdW50ID0gMDtcbiAgICBjb25zdCBjcmVhdGVPYmplY3QgPSAoaWQpID0+IHtcbiAgICAgICAgb2JqZWN0Q2FsbENvdW50Kys7XG4gICAgICAgIHJldHVybiB7IGlkIH07XG4gICAgfTtcbiAgICBjb25zdCBjYWNoZWRDcmVhdGVPYmplY3QgPSBjYWNoZUZ1bmN0aW9uKGNyZWF0ZU9iamVjdCk7XG4gICAgLy8gRmlyc3QgY2FsbCBzaG91bGQgZXhlY3V0ZSB0aGUgZnVuY3Rpb25cbiAgICBjb25zdCBvYmoxID0gY2FjaGVkQ3JlYXRlT2JqZWN0KDEpO1xuICAgIGV4cGVjdChvYmoxKS50b0VxdWFsKHsgaWQ6IDEgfSk7XG4gICAgZXhwZWN0KG9iamVjdENhbGxDb3VudCkudG9CZSgxKTtcbiAgICAvLyBTZWNvbmQgY2FsbCB3aXRoIHNhbWUgYXJncyBzaG91bGQgdXNlIGNhY2hlZCByZXN1bHRcbiAgICBjb25zdCBvYmoyID0gY2FjaGVkQ3JlYXRlT2JqZWN0KDEpO1xuICAgIGV4cGVjdChvYmoyKS50b0JlKG9iajEpOyAvLyBTYW1lIHJlZmVyZW5jZVxuICAgIGV4cGVjdChvYmplY3RDYWxsQ291bnQpLnRvQmUoMSk7XG59KTtcbmV4cG9ydCBjbGFzcyBBc3luY0NhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihfZmV0Y2hlciwgX29wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLl9mZXRjaGVyID0gX2ZldGNoZXI7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBfb3B0aW9ucztcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICAgICAgICB0aGlzLmlzQ2FjaGVBdmFpbGFibGUgPSB0aGlzLl9jcmVhdGVLZXllZChcImlzQ2FjaGVBdmFpbGFibGVcIik7XG4gICAgICAgIHRoaXMuZ2V0SWZDYWNoZWQgPSB0aGlzLl9jcmVhdGVLZXllZChcImdldElmQ2FjaGVkXCIpO1xuICAgICAgICB0aGlzLmdldE9yV2FpdCA9IHRoaXMuX2NyZWF0ZUtleWVkKFwiZ2V0T3JXYWl0XCIpO1xuICAgICAgICB0aGlzLmZvcmNlU2V0Q2FjaGVkVmFsdWUgPSB0aGlzLl9jcmVhdGVLZXllZChcImZvcmNlU2V0Q2FjaGVkVmFsdWVcIik7XG4gICAgICAgIHRoaXMuZm9yY2VTZXRDYWNoZWRWYWx1ZUFzeW5jID0gdGhpcy5fY3JlYXRlS2V5ZWQoXCJmb3JjZVNldENhY2hlZFZhbHVlQXN5bmNcIik7XG4gICAgICAgIHRoaXMucmVmcmVzaCA9IHRoaXMuX2NyZWF0ZUtleWVkKFwicmVmcmVzaFwiKTtcbiAgICAgICAgdGhpcy5pbnZhbGlkYXRlID0gdGhpcy5fY3JlYXRlS2V5ZWQoXCJpbnZhbGlkYXRlXCIpO1xuICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UgPSB0aGlzLl9jcmVhdGVLZXllZChcIm9uU3RhdGVDaGFuZ2VcIik7XG4gICAgICAgIC8vIG5vdGhpbmcgaGVyZSB5ZXRcbiAgICB9XG4gICAgX2NyZWF0ZUtleWVkKGZ1bmN0aW9uTmFtZSkge1xuICAgICAgICByZXR1cm4gKGtleSwgLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVDYWNoZSA9IHRoaXMuZ2V0VmFsdWVDYWNoZShrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlQ2FjaGVbZnVuY3Rpb25OYW1lXS5hcHBseSh2YWx1ZUNhY2hlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0VmFsdWVDYWNoZShkZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgbGV0IGNhY2hlID0gdGhpcy5fbWFwLmdldChkZXBlbmRlbmNpZXMpO1xuICAgICAgICBpZiAoIWNhY2hlKSB7XG4gICAgICAgICAgICBjYWNoZSA9IG5ldyBBc3luY1ZhbHVlQ2FjaGUoYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fZmV0Y2hlcihkZXBlbmRlbmNpZXMpLCB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fb3B0aW9ucyxcbiAgICAgICAgICAgICAgICBvblN1YnNjcmliZTogdGhpcy5fb3B0aW9ucy5vblN1YnNjcmliZSA/IChjYikgPT4gdGhpcy5fb3B0aW9ucy5vblN1YnNjcmliZShkZXBlbmRlbmNpZXMsIGNiKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fbWFwLnNldChkZXBlbmRlbmNpZXMsIGNhY2hlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgfVxuICAgIGFzeW5jIHJlZnJlc2hXaGVyZShwcmVkaWNhdGUpIHtcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBbZGVwZW5kZW5jaWVzLCBjYWNoZV0gb2YgdGhpcy5fbWFwKSB7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKGRlcGVuZGVuY2llcykpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGNhY2hlLnJlZnJlc2goKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH1cbn1cbmNsYXNzIEFzeW5jVmFsdWVDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoZmV0Y2hlciwgX29wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gX29wdGlvbnM7XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnNDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5fbW9zdFJlY2VudFJlZnJlc2hQcm9taXNlSW5kZXggPSAwO1xuICAgICAgICB0aGlzLl9zdG9yZSA9IG5ldyBBc3luY1N0b3JlKCk7XG4gICAgICAgIHRoaXMuX3JhdGVMaW1pdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjb25jdXJyZW5jeTogMSxcbiAgICAgICAgICAgIHRocm90dGxlTXM6IDMwMCxcbiAgICAgICAgICAgIC4uLmZpbHRlclVuZGVmaW5lZChfb3B0aW9ucy5yYXRlTGltaXRlciA/PyB7fSksXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2ZldGNoZXIgPSByYXRlTGltaXRlZChmZXRjaGVyLCB7XG4gICAgICAgICAgICAuLi50aGlzLl9yYXRlTGltaXRPcHRpb25zLFxuICAgICAgICAgICAgYmF0Y2hDYWxsczogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlzQ2FjaGVBdmFpbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9yZS5pc0F2YWlsYWJsZSgpO1xuICAgIH1cbiAgICBnZXRJZkNhY2hlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JlLmdldCgpO1xuICAgIH1cbiAgICBnZXRPcldhaXQoY2FjaGVTdHJhdGVneSkge1xuICAgICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldElmQ2FjaGVkKCk7XG4gICAgICAgIGlmIChjYWNoZVN0cmF0ZWd5ID09PSBcInJlYWQtd3JpdGVcIiAmJiBjYWNoZWQuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlZChjYWNoZWQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmV0Y2goY2FjaGVTdHJhdGVneSk7XG4gICAgfVxuICAgIF9zZXQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc3RvcmUuc2V0KHZhbHVlKTtcbiAgICB9XG4gICAgX3NldEFzeW5jKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBwZW5kaW5nKHZhbHVlKTtcbiAgICAgICAgdGhpcy5fcGVuZGluZ1Byb21pc2UgPSBwcm9taXNlO1xuICAgICAgICByZXR1cm4gcGVuZGluZyh0aGlzLl9zdG9yZS5zZXRBc3luYyhwcm9taXNlKSk7XG4gICAgfVxuICAgIF9yZWZldGNoKGNhY2hlU3RyYXRlZ3kpIHtcbiAgICAgICAgaWYgKGNhY2hlU3RyYXRlZ3kgPT09IFwicmVhZC13cml0ZVwiICYmIHRoaXMuX3BlbmRpbmdQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGVuZGluZ1Byb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHBlbmRpbmcodGhpcy5fZmV0Y2hlcigpKTtcbiAgICAgICAgaWYgKGNhY2hlU3RyYXRlZ3kgPT09IFwibmV2ZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBlbmRpbmcodGhpcy5fc2V0QXN5bmMocHJvbWlzZSkudGhlbigoKSA9PiBwcm9taXNlKSk7XG4gICAgfVxuICAgIGZvcmNlU2V0Q2FjaGVkVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2V0KHZhbHVlKTtcbiAgICB9XG4gICAgZm9yY2VTZXRDYWNoZWRWYWx1ZUFzeW5jKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXRBc3luYyh2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZmV0Y2hlcyB0aGUgdmFsdWUgZnJvbSB0aGUgZmV0Y2hlciwgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHdpdGggaXQuXG4gICAgICovXG4gICAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0T3JXYWl0KFwid3JpdGUtb25seVwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52YWxpZGF0ZXMgdGhlIGNhY2hlLCBtYXJraW5nIGl0IHRvIHJlZnJlc2ggb24gdGhlIG5leHQgcmVhZC4gSWYgYW55b25lIHdhcyBsaXN0ZW5pbmcgdG8gaXQsIGl0IHdpbGwgcmVmcmVzaFxuICAgICAqIGltbWVkaWF0ZWx5LlxuICAgICAqL1xuICAgIGludmFsaWRhdGUoKSB7XG4gICAgICAgIHRoaXMuX3N0b3JlLnNldFVuYXZhaWxhYmxlKCk7XG4gICAgICAgIHRoaXMuX3BlbmRpbmdQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uc0NvdW50ID4gMCkge1xuICAgICAgICAgICAgcnVuQXN5bmNocm9ub3VzbHkodGhpcy5yZWZyZXNoKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU3RhdGVDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgc3RvcmVPYmogPSB0aGlzLl9zdG9yZS5vbkNoYW5nZShjYWxsYmFjayk7XG4gICAgICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMuZ2V0T3JXYWl0KFwicmVhZC13cml0ZVwiKSk7XG4gICAgICAgIGlmICh0aGlzLl9zdWJzY3JpcHRpb25zQ291bnQrKyA9PT0gMCAmJiB0aGlzLl9vcHRpb25zLm9uU3Vic2NyaWJlKSB7XG4gICAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuX29wdGlvbnMub25TdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMucmVmcmVzaCgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmVycy5wdXNoKHVuc3Vic2NyaWJlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaGFzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChoYXNVbnN1YnNjcmliZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBoYXNVbnN1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHN0b3JlT2JqLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgaWYgKC0tdGhpcy5fc3Vic2NyaXB0aW9uc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSZWZyZXNoUHJvbWlzZUluZGV4ID0gKyt0aGlzLl9tb3N0UmVjZW50UmVmcmVzaFByb21pc2VJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgcnVuQXN5bmNocm9ub3VzbHkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2FpdCBhIGZldyBzZWNvbmRzOyBpZiBhbnl0aGluZyBjaGFuZ2VzIGR1cmluZyB0aGF0IHRpbWUsIHdlIGRvbid0IHdhbnQgdG8gcmVmcmVzaFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSB3ZSBkbyB1bm5lY2Vzc2FyeSByZXF1ZXN0cyBpZiB3ZSB1bnN1YnNjcmliZSBhbmQgdGhlbiBzdWJzY3JpYmUgYWdhaW4gaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHdhaXQoNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uc0NvdW50ID09PSAwICYmIGN1cnJlbnRSZWZyZXNoUHJvbWlzZUluZGV4ID09PSB0aGlzLl9tb3N0UmVjZW50UmVmcmVzaFByb21pc2VJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB1bnN1YnNjcmliZSBvZiB0aGlzLl91bnN1YnNjcmliZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/caches.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/compile-time.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/compile-time.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scrambleDuringCompileTime: () => (/* binding */ scrambleDuringCompileTime)\n/* harmony export */ });\n/**\n * Returns the first argument passed to it, but compilers won't be able to optimize it out. This is useful in some\n * cases where compiler warnings go awry; for example, when importing things that may not exist (but are guaranteed\n * to exist at runtime).\n */\nfunction scrambleDuringCompileTime(t) {\n    if (Math.random() < 0.00001 && Math.random() > 0.99999 && Math.random() < 0.00001 && Math.random() > 0.99999) {\n        return \"this will never happen\";\n    }\n    return t;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9jb21waWxlLXRpbWUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFjay1zaGFyZWRcXGRpc3RcXHV0aWxzXFxjb21waWxlLXRpbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBwYXNzZWQgdG8gaXQsIGJ1dCBjb21waWxlcnMgd29uJ3QgYmUgYWJsZSB0byBvcHRpbWl6ZSBpdCBvdXQuIFRoaXMgaXMgdXNlZnVsIGluIHNvbWVcbiAqIGNhc2VzIHdoZXJlIGNvbXBpbGVyIHdhcm5pbmdzIGdvIGF3cnk7IGZvciBleGFtcGxlLCB3aGVuIGltcG9ydGluZyB0aGluZ3MgdGhhdCBtYXkgbm90IGV4aXN0IChidXQgYXJlIGd1YXJhbnRlZWRcbiAqIHRvIGV4aXN0IGF0IHJ1bnRpbWUpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NyYW1ibGVEdXJpbmdDb21waWxlVGltZSh0KSB7XG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjAwMDAxICYmIE1hdGgucmFuZG9tKCkgPiAwLjk5OTk5ICYmIE1hdGgucmFuZG9tKCkgPCAwLjAwMDAxICYmIE1hdGgucmFuZG9tKCkgPiAwLjk5OTk5KSB7XG4gICAgICAgIHJldHVybiBcInRoaXMgd2lsbCBuZXZlciBoYXBwZW5cIjtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/compile-time.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/crypto.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomValues: () => (/* binding */ generateRandomValues),\n/* harmony export */   generateSecureRandomString: () => (/* binding */ generateSecureRandomString)\n/* harmony export */ });\n/* harmony import */ var _bytes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytes */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/bytes.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./globals */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\");\n\n\n\nfunction generateRandomValues(array) {\n    if (!_globals__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Crypto API is not available in this environment. Are you using an old browser?\");\n    }\n    if (!_globals__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto.getRandomValues) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"crypto.getRandomValues is not available in this environment. Are you using an old browser?\");\n    }\n    return _globals__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto.getRandomValues(array);\n}\n/**\n * Generates a secure alphanumeric string using the system's cryptographically secure\n * random number generator.\n */\nfunction generateSecureRandomString(minBitsOfEntropy = 224) {\n    const base32CharactersCount = Math.ceil(minBitsOfEntropy / 5);\n    const bytesCount = Math.ceil(base32CharactersCount * 5 / 8);\n    const randomBytes = generateRandomValues(new Uint8Array(bytesCount));\n    const str = (0,_bytes__WEBPACK_IMPORTED_MODULE_0__.encodeBase32)(randomBytes);\n    return str.slice(str.length - base32CharactersCount).toLowerCase();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9jcnlwdG8uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBdUM7QUFDUTtBQUNUO0FBQy9CO0FBQ1AsU0FBUywrQ0FBUztBQUNsQixrQkFBa0Isd0RBQW1CO0FBQ3JDO0FBQ0EsU0FBUywrQ0FBUztBQUNsQixrQkFBa0Isd0RBQW1CO0FBQ3JDO0FBQ0EsV0FBVywrQ0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQVk7QUFDNUI7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFjay1zaGFyZWRcXGRpc3RcXHV0aWxzXFxjcnlwdG8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZW5jb2RlQmFzZTMyIH0gZnJvbSBcIi4vYnl0ZXNcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnNcIjtcbmltcG9ydCB7IGdsb2JhbFZhciB9IGZyb20gXCIuL2dsb2JhbHNcIjtcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbVZhbHVlcyhhcnJheSkge1xuICAgIGlmICghZ2xvYmFsVmFyLmNyeXB0bykge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkNyeXB0byBBUEkgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LiBBcmUgeW91IHVzaW5nIGFuIG9sZCBicm93c2VyP1wiKTtcbiAgICB9XG4gICAgaWYgKCFnbG9iYWxWYXIuY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcImNyeXB0by5nZXRSYW5kb21WYWx1ZXMgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LiBBcmUgeW91IHVzaW5nIGFuIG9sZCBicm93c2VyP1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIGdsb2JhbFZhci5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycmF5KTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgc2VjdXJlIGFscGhhbnVtZXJpYyBzdHJpbmcgdXNpbmcgdGhlIHN5c3RlbSdzIGNyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZVxuICogcmFuZG9tIG51bWJlciBnZW5lcmF0b3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZyhtaW5CaXRzT2ZFbnRyb3B5ID0gMjI0KSB7XG4gICAgY29uc3QgYmFzZTMyQ2hhcmFjdGVyc0NvdW50ID0gTWF0aC5jZWlsKG1pbkJpdHNPZkVudHJvcHkgLyA1KTtcbiAgICBjb25zdCBieXRlc0NvdW50ID0gTWF0aC5jZWlsKGJhc2UzMkNoYXJhY3RlcnNDb3VudCAqIDUgLyA4KTtcbiAgICBjb25zdCByYW5kb21CeXRlcyA9IGdlbmVyYXRlUmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KGJ5dGVzQ291bnQpKTtcbiAgICBjb25zdCBzdHIgPSBlbmNvZGVCYXNlMzIocmFuZG9tQnl0ZXMpO1xuICAgIHJldHVybiBzdHIuc2xpY2Uoc3RyLmxlbmd0aCAtIGJhc2UzMkNoYXJhY3RlcnNDb3VudCkudG9Mb3dlckNhc2UoKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/env.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/env.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvVariable: () => (/* binding */ getEnvVariable),\n/* harmony export */   getNextRuntime: () => (/* binding */ getNextRuntime),\n/* harmony export */   getNodeEnvironment: () => (/* binding */ getNodeEnvironment),\n/* harmony export */   isBrowserLike: () => (/* binding */ isBrowserLike)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n\n\nfunction isBrowserLike() {\n    return typeof window !== \"undefined\" && typeof document !== \"undefined\" && typeof document.createElement !== \"undefined\";\n}\n// newName: oldName\nconst ENV_VAR_RENAME = {\n    NEXT_PUBLIC_STACK_API_URL: ['STACK_BASE_URL', 'NEXT_PUBLIC_STACK_URL'],\n};\n/**\n * Returns the environment variable with the given name, returning the default (if given) or throwing an error (otherwise) if it's undefined or the empty string.\n */\nfunction getEnvVariable(name, defaultValue) {\n    if (isBrowserLike()) {\n        throw new Error((0,_strings__WEBPACK_IMPORTED_MODULE_1__.deindent) `\n      Can't use getEnvVariable on the client because Next.js transpiles expressions of the kind process.env.XYZ at build-time on the client.\n    \n      Use process.env.XYZ directly instead.\n    `);\n    }\n    if (name === \"NEXT_RUNTIME\") {\n        throw new Error((0,_strings__WEBPACK_IMPORTED_MODULE_1__.deindent) `\n      Can't use getEnvVariable to access the NEXT_RUNTIME environment variable because it's compiled into the client bundle.\n    \n      Use getNextRuntime() instead.\n    `);\n    }\n    // throw error if the old name is used as the retrieve key\n    for (const [newName, oldNames] of Object.entries(ENV_VAR_RENAME)) {\n        if (oldNames.includes(name)) {\n            (0,_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Environment variable ${name} has been renamed to ${newName}. Please update your configuration to use the new name.`);\n        }\n    }\n    let value = process.env[name];\n    // check the key under the old name if the new name is not found\n    if (!value && ENV_VAR_RENAME[name]) {\n        for (const oldName of ENV_VAR_RENAME[name]) {\n            value = process.env[oldName];\n            if (value)\n                break;\n        }\n    }\n    if (value === undefined) {\n        if (defaultValue !== undefined) {\n            value = defaultValue;\n        }\n        else {\n            (0,_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Missing environment variable: ${name}`);\n        }\n    }\n    return value;\n}\nfunction getNextRuntime() {\n    // This variable is compiled into the client bundle, so we can't use getEnvVariable here.\n    return  false || (0,_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"Missing environment variable: NEXT_RUNTIME\");\n}\nfunction getNodeEnvironment() {\n    return getEnvVariable(\"NODE_ENV\", \"\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9lbnYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFvQztBQUNDO0FBQzlCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLHdCQUF3QixrREFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEseUJBQXlCLE1BQU0sc0JBQXNCLFFBQVE7QUFDakY7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0NBQWtDLEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsV0FBVyxNQUF3QixJQUFJLGlEQUFRO0FBQy9DO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcdXRpbHNcXGVudi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0aHJvd0VyciB9IGZyb20gXCIuL2Vycm9yc1wiO1xuaW1wb3J0IHsgZGVpbmRlbnQgfSBmcm9tIFwiLi9zdHJpbmdzXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyTGlrZSgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgIT09IFwidW5kZWZpbmVkXCI7XG59XG4vLyBuZXdOYW1lOiBvbGROYW1lXG5jb25zdCBFTlZfVkFSX1JFTkFNRSA9IHtcbiAgICBORVhUX1BVQkxJQ19TVEFDS19BUElfVVJMOiBbJ1NUQUNLX0JBU0VfVVJMJywgJ05FWFRfUFVCTElDX1NUQUNLX1VSTCddLFxufTtcbi8qKlxuICogUmV0dXJucyB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgd2l0aCB0aGUgZ2l2ZW4gbmFtZSwgcmV0dXJuaW5nIHRoZSBkZWZhdWx0IChpZiBnaXZlbikgb3IgdGhyb3dpbmcgYW4gZXJyb3IgKG90aGVyd2lzZSkgaWYgaXQncyB1bmRlZmluZWQgb3IgdGhlIGVtcHR5IHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVudlZhcmlhYmxlKG5hbWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgIGlmIChpc0Jyb3dzZXJMaWtlKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRlaW5kZW50IGBcbiAgICAgIENhbid0IHVzZSBnZXRFbnZWYXJpYWJsZSBvbiB0aGUgY2xpZW50IGJlY2F1c2UgTmV4dC5qcyB0cmFuc3BpbGVzIGV4cHJlc3Npb25zIG9mIHRoZSBraW5kIHByb2Nlc3MuZW52LlhZWiBhdCBidWlsZC10aW1lIG9uIHRoZSBjbGllbnQuXG4gICAgXG4gICAgICBVc2UgcHJvY2Vzcy5lbnYuWFlaIGRpcmVjdGx5IGluc3RlYWQuXG4gICAgYCk7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSBcIk5FWFRfUlVOVElNRVwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkZWluZGVudCBgXG4gICAgICBDYW4ndCB1c2UgZ2V0RW52VmFyaWFibGUgdG8gYWNjZXNzIHRoZSBORVhUX1JVTlRJTUUgZW52aXJvbm1lbnQgdmFyaWFibGUgYmVjYXVzZSBpdCdzIGNvbXBpbGVkIGludG8gdGhlIGNsaWVudCBidW5kbGUuXG4gICAgXG4gICAgICBVc2UgZ2V0TmV4dFJ1bnRpbWUoKSBpbnN0ZWFkLlxuICAgIGApO1xuICAgIH1cbiAgICAvLyB0aHJvdyBlcnJvciBpZiB0aGUgb2xkIG5hbWUgaXMgdXNlZCBhcyB0aGUgcmV0cmlldmUga2V5XG4gICAgZm9yIChjb25zdCBbbmV3TmFtZSwgb2xkTmFtZXNdIG9mIE9iamVjdC5lbnRyaWVzKEVOVl9WQVJfUkVOQU1FKSkge1xuICAgICAgICBpZiAob2xkTmFtZXMuaW5jbHVkZXMobmFtZSkpIHtcbiAgICAgICAgICAgIHRocm93RXJyKGBFbnZpcm9ubWVudCB2YXJpYWJsZSAke25hbWV9IGhhcyBiZWVuIHJlbmFtZWQgdG8gJHtuZXdOYW1lfS4gUGxlYXNlIHVwZGF0ZSB5b3VyIGNvbmZpZ3VyYXRpb24gdG8gdXNlIHRoZSBuZXcgbmFtZS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgdmFsdWUgPSBwcm9jZXNzLmVudltuYW1lXTtcbiAgICAvLyBjaGVjayB0aGUga2V5IHVuZGVyIHRoZSBvbGQgbmFtZSBpZiB0aGUgbmV3IG5hbWUgaXMgbm90IGZvdW5kXG4gICAgaWYgKCF2YWx1ZSAmJiBFTlZfVkFSX1JFTkFNRVtuYW1lXSkge1xuICAgICAgICBmb3IgKGNvbnN0IG9sZE5hbWUgb2YgRU5WX1ZBUl9SRU5BTUVbbmFtZV0pIHtcbiAgICAgICAgICAgIHZhbHVlID0gcHJvY2Vzcy5lbnZbb2xkTmFtZV07XG4gICAgICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93RXJyKGBNaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlOiAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE5leHRSdW50aW1lKCkge1xuICAgIC8vIFRoaXMgdmFyaWFibGUgaXMgY29tcGlsZWQgaW50byB0aGUgY2xpZW50IGJ1bmRsZSwgc28gd2UgY2FuJ3QgdXNlIGdldEVudlZhcmlhYmxlIGhlcmUuXG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Lk5FWFRfUlVOVElNRSB8fCB0aHJvd0VycihcIk1pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGU6IE5FWFRfUlVOVElNRVwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXROb2RlRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIGdldEVudlZhcmlhYmxlKFwiTk9ERV9FTlZcIiwgXCJcIik7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/env.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/errors.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackAssertionError: () => (/* binding */ StackAssertionError),\n/* harmony export */   StatusError: () => (/* binding */ StatusError),\n/* harmony export */   captureError: () => (/* binding */ captureError),\n/* harmony export */   concatStacktraces: () => (/* binding */ concatStacktraces),\n/* harmony export */   errorToNiceString: () => (/* binding */ errorToNiceString),\n/* harmony export */   registerErrorSink: () => (/* binding */ registerErrorSink),\n/* harmony export */   throwErr: () => (/* binding */ throwErr)\n/* harmony export */ });\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\");\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./objects */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strings */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\n\nfunction throwErr(...args) {\n    if (typeof args[0] === \"string\") {\n        throw new StackAssertionError(args[0], args[1]);\n    }\n    else if (args[0] instanceof Error) {\n        throw args[0];\n    }\n    else {\n        // @ts-expect-error\n        throw new StatusError(...args);\n    }\n}\nfunction removeStacktraceNameLine(stack) {\n    // some browsers (eg. Chrome) prepend the stack with an extra line with the error name\n    const addsNameLine = new Error().stack?.startsWith(\"Error\\n\");\n    return stack.split(\"\\n\").slice(addsNameLine ? 1 : 0).join(\"\\n\");\n}\n/**\n * Concatenates the (original) stacktraces of the given errors onto the first.\n *\n * Useful when you invoke an async function to receive a promise without awaiting it immediately. Browsers are smart\n * enough to keep track of the call stack in async function calls when you invoke `.then` within the same async tick,\n * but if you don't, the stacktrace will be lost.\n *\n * Here's an example of the unwanted behavior:\n *\n * ```tsx\n * async function log() {\n *   await wait(0);  // simulate an put the task on the event loop\n *   console.log(new Error().stack);\n * }\n *\n * async function main() {\n *   await log();  // good; prints both \"log\" and \"main\" on the stacktrace\n *   log();  // bad; prints only \"log\" on the stacktrace\n * }\n * ```\n */\nfunction concatStacktraces(first, ...errors) {\n    // some browsers (eg. Firefox) add an extra empty line at the end\n    const addsEmptyLineAtEnd = first.stack?.endsWith(\"\\n\");\n    // Add a reference to this function itself so that we know that stacktraces were concatenated\n    // If you are coming here from a stacktrace, please know that the two parts before and after this line are different\n    // stacktraces that were concatenated with concatStacktraces\n    const separator = removeStacktraceNameLine(new Error().stack ?? \"\").split(\"\\n\")[0];\n    for (const error of errors) {\n        const toAppend = removeStacktraceNameLine(error.stack ?? \"\");\n        first.stack += (addsEmptyLineAtEnd ? \"\" : \"\\n\") + separator + \"\\n\" + toAppend;\n    }\n}\nclass StackAssertionError extends Error {\n    constructor(message, extraData) {\n        const disclaimer = `\\n\\nThis is likely an error in Stack. Please make sure you are running the newest version and report it.`;\n        super(`${message}${message.endsWith(disclaimer) ? \"\" : disclaimer}`, (0,_objects__WEBPACK_IMPORTED_MODULE_1__.pick)(extraData ?? {}, [\"cause\"]));\n        this.extraData = extraData;\n        Object.defineProperty(this, \"customCaptureExtraArgs\", {\n            get() {\n                return [this.extraData];\n            },\n            enumerable: false,\n        });\n    }\n}\nStackAssertionError.prototype.name = \"StackAssertionError\";\nfunction errorToNiceString(error) {\n    if (!(error instanceof Error))\n        return `${typeof error}<${(0,_strings__WEBPACK_IMPORTED_MODULE_2__.nicify)(error)}>`;\n    return (0,_strings__WEBPACK_IMPORTED_MODULE_2__.nicify)(error, { maxDepth: 8 });\n}\nconst errorSinks = new Set();\nfunction registerErrorSink(sink) {\n    if (errorSinks.has(sink)) {\n        return;\n    }\n    errorSinks.add(sink);\n}\nregisterErrorSink((location, error, ...extraArgs) => {\n    console.error(`\\x1b[41mCaptured error in ${location}:`, \n    // HACK: Log a nicified version of the error to get around buggy Next.js pretty-printing\n    // https://www.reddit.com/r/nextjs/comments/1gkxdqe/comment/m19kxgn/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button\n    errorToNiceString(error), ...extraArgs, \"\\x1b[0m\");\n});\nregisterErrorSink((location, error, ...extraArgs) => {\n    _globals__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors = _globals__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors ?? [];\n    _globals__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors.push({ location, error, extraArgs });\n});\nfunction captureError(location, error) {\n    for (const sink of errorSinks) {\n        sink(location, error, ...error && (typeof error === 'object' || typeof error === 'function') && \"customCaptureExtraArgs\" in error && Array.isArray(error.customCaptureExtraArgs) ? error.customCaptureExtraArgs : []);\n    }\n}\nclass StatusError extends Error {\n    constructor(status, message) {\n        if (typeof status === \"object\") {\n            message ??= status.message;\n            status = status.statusCode;\n        }\n        super(message);\n        this.name = \"StatusError\";\n        this.statusCode = status;\n        if (!message) {\n            throw new StackAssertionError(\"StatusError always requires a message unless a Status object is passed\", { cause: this });\n        }\n    }\n    isClientError() {\n        return this.statusCode >= 400 && this.statusCode < 500;\n    }\n    isServerError() {\n        return !this.isClientError();\n    }\n    getStatusCode() {\n        return this.statusCode;\n    }\n    getBody() {\n        return new TextEncoder().encode(this.message);\n    }\n    getHeaders() {\n        return {\n            \"Content-Type\": [\"text/plain; charset=utf-8\"],\n        };\n    }\n    toDescriptiveJson() {\n        return {\n            status_code: this.getStatusCode(),\n            message: this.message,\n            headers: this.getHeaders(),\n        };\n    }\n    /**\n     * @deprecated this is not a good way to make status errors human-readable, use toDescriptiveJson instead\n     */\n    toHttpJson() {\n        return {\n            status_code: this.statusCode,\n            body: this.message,\n            headers: this.getHeaders(),\n        };\n    }\n}\nStatusError.BadRequest = { statusCode: 400, message: \"Bad Request\" };\nStatusError.Unauthorized = { statusCode: 401, message: \"Unauthorized\" };\nStatusError.PaymentRequired = { statusCode: 402, message: \"Payment Required\" };\nStatusError.Forbidden = { statusCode: 403, message: \"Forbidden\" };\nStatusError.NotFound = { statusCode: 404, message: \"Not Found\" };\nStatusError.MethodNotAllowed = { statusCode: 405, message: \"Method Not Allowed\" };\nStatusError.NotAcceptable = { statusCode: 406, message: \"Not Acceptable\" };\nStatusError.ProxyAuthenticationRequired = { statusCode: 407, message: \"Proxy Authentication Required\" };\nStatusError.RequestTimeout = { statusCode: 408, message: \"Request Timeout\" };\nStatusError.Conflict = { statusCode: 409, message: \"Conflict\" };\nStatusError.Gone = { statusCode: 410, message: \"Gone\" };\nStatusError.LengthRequired = { statusCode: 411, message: \"Length Required\" };\nStatusError.PreconditionFailed = { statusCode: 412, message: \"Precondition Failed\" };\nStatusError.PayloadTooLarge = { statusCode: 413, message: \"Payload Too Large\" };\nStatusError.URITooLong = { statusCode: 414, message: \"URI Too Long\" };\nStatusError.UnsupportedMediaType = { statusCode: 415, message: \"Unsupported Media Type\" };\nStatusError.RangeNotSatisfiable = { statusCode: 416, message: \"Range Not Satisfiable\" };\nStatusError.ExpectationFailed = { statusCode: 417, message: \"Expectation Failed\" };\nStatusError.ImATeapot = { statusCode: 418, message: \"I'm a teapot\" };\nStatusError.MisdirectedRequest = { statusCode: 421, message: \"Misdirected Request\" };\nStatusError.UnprocessableEntity = { statusCode: 422, message: \"Unprocessable Entity\" };\nStatusError.Locked = { statusCode: 423, message: \"Locked\" };\nStatusError.FailedDependency = { statusCode: 424, message: \"Failed Dependency\" };\nStatusError.TooEarly = { statusCode: 425, message: \"Too Early\" };\nStatusError.UpgradeRequired = { statusCode: 426, message: \"Upgrade Required\" };\nStatusError.PreconditionRequired = { statusCode: 428, message: \"Precondition Required\" };\nStatusError.TooManyRequests = { statusCode: 429, message: \"Too Many Requests\" };\nStatusError.RequestHeaderFieldsTooLarge = { statusCode: 431, message: \"Request Header Fields Too Large\" };\nStatusError.UnavailableForLegalReasons = { statusCode: 451, message: \"Unavailable For Legal Reasons\" };\nStatusError.InternalServerError = { statusCode: 500, message: \"Internal Server Error\" };\nStatusError.NotImplemented = { statusCode: 501, message: \"Not Implemented\" };\nStatusError.BadGateway = { statusCode: 502, message: \"Bad Gateway\" };\nStatusError.ServiceUnavailable = { statusCode: 503, message: \"Service Unavailable\" };\nStatusError.GatewayTimeout = { statusCode: 504, message: \"Gateway Timeout\" };\nStatusError.HTTPVersionNotSupported = { statusCode: 505, message: \"HTTP Version Not Supported\" };\nStatusError.VariantAlsoNegotiates = { statusCode: 506, message: \"Variant Also Negotiates\" };\nStatusError.InsufficientStorage = { statusCode: 507, message: \"Insufficient Storage\" };\nStatusError.LoopDetected = { statusCode: 508, message: \"Loop Detected\" };\nStatusError.NotExtended = { statusCode: 510, message: \"Not Extended\" };\nStatusError.NetworkAuthenticationRequired = { statusCode: 511, message: \"Network Authentication Required\" };\nStatusError.prototype.name = \"StatusError\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFzQztBQUNMO0FBQ0U7QUFDNUI7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsaUJBQWlCLFFBQVEsRUFBRSwrQ0FBK0MsR0FBRyw4Q0FBSSxnQkFBZ0I7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGtCQUFrQixhQUFhLEdBQUcsZ0RBQU0sUUFBUTtBQUNoRCxXQUFXLGdEQUFNLFVBQVUsYUFBYTtBQUN4QztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsU0FBUztBQUN4RDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxJQUFJLCtDQUFTLHVCQUF1QiwrQ0FBUztBQUM3QyxJQUFJLCtDQUFTLDRCQUE0Qiw0QkFBNEI7QUFDckUsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNIQUFzSCxhQUFhO0FBQ25JO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsNkJBQTZCO0FBQzdCLGdDQUFnQztBQUNoQywwQkFBMEI7QUFDMUIseUJBQXlCO0FBQ3pCLGlDQUFpQztBQUNqQyw4QkFBOEI7QUFDOUIsNENBQTRDO0FBQzVDLCtCQUErQjtBQUMvQix5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCLCtCQUErQjtBQUMvQixtQ0FBbUM7QUFDbkMsZ0NBQWdDO0FBQ2hDLDJCQUEyQjtBQUMzQixxQ0FBcUM7QUFDckMsb0NBQW9DO0FBQ3BDLGtDQUFrQztBQUNsQywwQkFBMEI7QUFDMUIsbUNBQW1DO0FBQ25DLG9DQUFvQztBQUNwQyx1QkFBdUI7QUFDdkIsaUNBQWlDO0FBQ2pDLHlCQUF5QjtBQUN6QixnQ0FBZ0M7QUFDaEMscUNBQXFDO0FBQ3JDLGdDQUFnQztBQUNoQyw0Q0FBNEM7QUFDNUMsMkNBQTJDO0FBQzNDLG9DQUFvQztBQUNwQywrQkFBK0I7QUFDL0IsMkJBQTJCO0FBQzNCLG1DQUFtQztBQUNuQywrQkFBK0I7QUFDL0Isd0NBQXdDO0FBQ3hDLHNDQUFzQztBQUN0QyxvQ0FBb0M7QUFDcEMsNkJBQTZCO0FBQzdCLDRCQUE0QjtBQUM1Qiw4Q0FBOEM7QUFDOUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2hhcmVkXFxkaXN0XFx1dGlsc1xcZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdsb2JhbFZhciB9IGZyb20gXCIuL2dsb2JhbHNcIjtcbmltcG9ydCB7IHBpY2sgfSBmcm9tIFwiLi9vYmplY3RzXCI7XG5pbXBvcnQgeyBuaWNpZnkgfSBmcm9tIFwiLi9zdHJpbmdzXCI7XG5leHBvcnQgZnVuY3Rpb24gdGhyb3dFcnIoLi4uYXJncykge1xuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJnc1swXSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGFyZ3NbMF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgIHRocm93IG5ldyBTdGF0dXNFcnJvciguLi5hcmdzKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZW1vdmVTdGFja3RyYWNlTmFtZUxpbmUoc3RhY2spIHtcbiAgICAvLyBzb21lIGJyb3dzZXJzIChlZy4gQ2hyb21lKSBwcmVwZW5kIHRoZSBzdGFjayB3aXRoIGFuIGV4dHJhIGxpbmUgd2l0aCB0aGUgZXJyb3IgbmFtZVxuICAgIGNvbnN0IGFkZHNOYW1lTGluZSA9IG5ldyBFcnJvcigpLnN0YWNrPy5zdGFydHNXaXRoKFwiRXJyb3JcXG5cIik7XG4gICAgcmV0dXJuIHN0YWNrLnNwbGl0KFwiXFxuXCIpLnNsaWNlKGFkZHNOYW1lTGluZSA/IDEgOiAwKS5qb2luKFwiXFxuXCIpO1xufVxuLyoqXG4gKiBDb25jYXRlbmF0ZXMgdGhlIChvcmlnaW5hbCkgc3RhY2t0cmFjZXMgb2YgdGhlIGdpdmVuIGVycm9ycyBvbnRvIHRoZSBmaXJzdC5cbiAqXG4gKiBVc2VmdWwgd2hlbiB5b3UgaW52b2tlIGFuIGFzeW5jIGZ1bmN0aW9uIHRvIHJlY2VpdmUgYSBwcm9taXNlIHdpdGhvdXQgYXdhaXRpbmcgaXQgaW1tZWRpYXRlbHkuIEJyb3dzZXJzIGFyZSBzbWFydFxuICogZW5vdWdoIHRvIGtlZXAgdHJhY2sgb2YgdGhlIGNhbGwgc3RhY2sgaW4gYXN5bmMgZnVuY3Rpb24gY2FsbHMgd2hlbiB5b3UgaW52b2tlIGAudGhlbmAgd2l0aGluIHRoZSBzYW1lIGFzeW5jIHRpY2ssXG4gKiBidXQgaWYgeW91IGRvbid0LCB0aGUgc3RhY2t0cmFjZSB3aWxsIGJlIGxvc3QuXG4gKlxuICogSGVyZSdzIGFuIGV4YW1wbGUgb2YgdGhlIHVud2FudGVkIGJlaGF2aW9yOlxuICpcbiAqIGBgYHRzeFxuICogYXN5bmMgZnVuY3Rpb24gbG9nKCkge1xuICogICBhd2FpdCB3YWl0KDApOyAgLy8gc2ltdWxhdGUgYW4gcHV0IHRoZSB0YXNrIG9uIHRoZSBldmVudCBsb29wXG4gKiAgIGNvbnNvbGUubG9nKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAqIH1cbiAqXG4gKiBhc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICogICBhd2FpdCBsb2coKTsgIC8vIGdvb2Q7IHByaW50cyBib3RoIFwibG9nXCIgYW5kIFwibWFpblwiIG9uIHRoZSBzdGFja3RyYWNlXG4gKiAgIGxvZygpOyAgLy8gYmFkOyBwcmludHMgb25seSBcImxvZ1wiIG9uIHRoZSBzdGFja3RyYWNlXG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdFN0YWNrdHJhY2VzKGZpcnN0LCAuLi5lcnJvcnMpIHtcbiAgICAvLyBzb21lIGJyb3dzZXJzIChlZy4gRmlyZWZveCkgYWRkIGFuIGV4dHJhIGVtcHR5IGxpbmUgYXQgdGhlIGVuZFxuICAgIGNvbnN0IGFkZHNFbXB0eUxpbmVBdEVuZCA9IGZpcnN0LnN0YWNrPy5lbmRzV2l0aChcIlxcblwiKTtcbiAgICAvLyBBZGQgYSByZWZlcmVuY2UgdG8gdGhpcyBmdW5jdGlvbiBpdHNlbGYgc28gdGhhdCB3ZSBrbm93IHRoYXQgc3RhY2t0cmFjZXMgd2VyZSBjb25jYXRlbmF0ZWRcbiAgICAvLyBJZiB5b3UgYXJlIGNvbWluZyBoZXJlIGZyb20gYSBzdGFja3RyYWNlLCBwbGVhc2Uga25vdyB0aGF0IHRoZSB0d28gcGFydHMgYmVmb3JlIGFuZCBhZnRlciB0aGlzIGxpbmUgYXJlIGRpZmZlcmVudFxuICAgIC8vIHN0YWNrdHJhY2VzIHRoYXQgd2VyZSBjb25jYXRlbmF0ZWQgd2l0aCBjb25jYXRTdGFja3RyYWNlc1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IHJlbW92ZVN0YWNrdHJhY2VOYW1lTGluZShuZXcgRXJyb3IoKS5zdGFjayA/PyBcIlwiKS5zcGxpdChcIlxcblwiKVswXTtcbiAgICBmb3IgKGNvbnN0IGVycm9yIG9mIGVycm9ycykge1xuICAgICAgICBjb25zdCB0b0FwcGVuZCA9IHJlbW92ZVN0YWNrdHJhY2VOYW1lTGluZShlcnJvci5zdGFjayA/PyBcIlwiKTtcbiAgICAgICAgZmlyc3Quc3RhY2sgKz0gKGFkZHNFbXB0eUxpbmVBdEVuZCA/IFwiXCIgOiBcIlxcblwiKSArIHNlcGFyYXRvciArIFwiXFxuXCIgKyB0b0FwcGVuZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU3RhY2tBc3NlcnRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBleHRyYURhdGEpIHtcbiAgICAgICAgY29uc3QgZGlzY2xhaW1lciA9IGBcXG5cXG5UaGlzIGlzIGxpa2VseSBhbiBlcnJvciBpbiBTdGFjay4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UgYXJlIHJ1bm5pbmcgdGhlIG5ld2VzdCB2ZXJzaW9uIGFuZCByZXBvcnQgaXQuYDtcbiAgICAgICAgc3VwZXIoYCR7bWVzc2FnZX0ke21lc3NhZ2UuZW5kc1dpdGgoZGlzY2xhaW1lcikgPyBcIlwiIDogZGlzY2xhaW1lcn1gLCBwaWNrKGV4dHJhRGF0YSA/PyB7fSwgW1wiY2F1c2VcIl0pKTtcbiAgICAgICAgdGhpcy5leHRyYURhdGEgPSBleHRyYURhdGE7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1c3RvbUNhcHR1cmVFeHRyYUFyZ3NcIiwge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbdGhpcy5leHRyYURhdGFdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5TdGFja0Fzc2VydGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gXCJTdGFja0Fzc2VydGlvbkVycm9yXCI7XG5leHBvcnQgZnVuY3Rpb24gZXJyb3JUb05pY2VTdHJpbmcoZXJyb3IpIHtcbiAgICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSlcbiAgICAgICAgcmV0dXJuIGAke3R5cGVvZiBlcnJvcn08JHtuaWNpZnkoZXJyb3IpfT5gO1xuICAgIHJldHVybiBuaWNpZnkoZXJyb3IsIHsgbWF4RGVwdGg6IDggfSk7XG59XG5jb25zdCBlcnJvclNpbmtzID0gbmV3IFNldCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyRXJyb3JTaW5rKHNpbmspIHtcbiAgICBpZiAoZXJyb3JTaW5rcy5oYXMoc2luaykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlcnJvclNpbmtzLmFkZChzaW5rKTtcbn1cbnJlZ2lzdGVyRXJyb3JTaW5rKChsb2NhdGlvbiwgZXJyb3IsIC4uLmV4dHJhQXJncykgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoYFxceDFiWzQxbUNhcHR1cmVkIGVycm9yIGluICR7bG9jYXRpb259OmAsIFxuICAgIC8vIEhBQ0s6IExvZyBhIG5pY2lmaWVkIHZlcnNpb24gb2YgdGhlIGVycm9yIHRvIGdldCBhcm91bmQgYnVnZ3kgTmV4dC5qcyBwcmV0dHktcHJpbnRpbmdcbiAgICAvLyBodHRwczovL3d3dy5yZWRkaXQuY29tL3IvbmV4dGpzL2NvbW1lbnRzLzFna3hkcWUvY29tbWVudC9tMTlreGduLz91dG1fc291cmNlPXNoYXJlJnV0bV9tZWRpdW09d2ViM3gmdXRtX25hbWU9d2ViM3hjc3MmdXRtX3Rlcm09MSZ1dG1fY29udGVudD1zaGFyZV9idXR0b25cbiAgICBlcnJvclRvTmljZVN0cmluZyhlcnJvciksIC4uLmV4dHJhQXJncywgXCJcXHgxYlswbVwiKTtcbn0pO1xucmVnaXN0ZXJFcnJvclNpbmsoKGxvY2F0aW9uLCBlcnJvciwgLi4uZXh0cmFBcmdzKSA9PiB7XG4gICAgZ2xvYmFsVmFyLnN0YWNrQ2FwdHVyZWRFcnJvcnMgPSBnbG9iYWxWYXIuc3RhY2tDYXB0dXJlZEVycm9ycyA/PyBbXTtcbiAgICBnbG9iYWxWYXIuc3RhY2tDYXB0dXJlZEVycm9ycy5wdXNoKHsgbG9jYXRpb24sIGVycm9yLCBleHRyYUFyZ3MgfSk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBjYXB0dXJlRXJyb3IobG9jYXRpb24sIGVycm9yKSB7XG4gICAgZm9yIChjb25zdCBzaW5rIG9mIGVycm9yU2lua3MpIHtcbiAgICAgICAgc2luayhsb2NhdGlvbiwgZXJyb3IsIC4uLmVycm9yICYmICh0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBlcnJvciA9PT0gJ2Z1bmN0aW9uJykgJiYgXCJjdXN0b21DYXB0dXJlRXh0cmFBcmdzXCIgaW4gZXJyb3IgJiYgQXJyYXkuaXNBcnJheShlcnJvci5jdXN0b21DYXB0dXJlRXh0cmFBcmdzKSA/IGVycm9yLmN1c3RvbUNhcHR1cmVFeHRyYUFyZ3MgOiBbXSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFN0YXR1c0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHN0YXR1cywgbWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIHN0YXR1cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgbWVzc2FnZSA/Pz0gc3RhdHVzLm1lc3NhZ2U7XG4gICAgICAgICAgICBzdGF0dXMgPSBzdGF0dXMuc3RhdHVzQ29kZTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJTdGF0dXNFcnJvclwiO1xuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXM7XG4gICAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJTdGF0dXNFcnJvciBhbHdheXMgcmVxdWlyZXMgYSBtZXNzYWdlIHVubGVzcyBhIFN0YXR1cyBvYmplY3QgaXMgcGFzc2VkXCIsIHsgY2F1c2U6IHRoaXMgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNDbGllbnRFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzQ29kZSA+PSA0MDAgJiYgdGhpcy5zdGF0dXNDb2RlIDwgNTAwO1xuICAgIH1cbiAgICBpc1NlcnZlckVycm9yKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNDbGllbnRFcnJvcigpO1xuICAgIH1cbiAgICBnZXRTdGF0dXNDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXNDb2RlO1xuICAgIH1cbiAgICBnZXRCb2R5KCkge1xuICAgICAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHRoaXMubWVzc2FnZSk7XG4gICAgfVxuICAgIGdldEhlYWRlcnMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBbXCJ0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04XCJdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0Rlc2NyaXB0aXZlSnNvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1c19jb2RlOiB0aGlzLmdldFN0YXR1c0NvZGUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCB0aGlzIGlzIG5vdCBhIGdvb2Qgd2F5IHRvIG1ha2Ugc3RhdHVzIGVycm9ycyBodW1hbi1yZWFkYWJsZSwgdXNlIHRvRGVzY3JpcHRpdmVKc29uIGluc3RlYWRcbiAgICAgKi9cbiAgICB0b0h0dHBKc29uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzX2NvZGU6IHRoaXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgIGJvZHk6IHRoaXMubWVzc2FnZSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpLFxuICAgICAgICB9O1xuICAgIH1cbn1cblN0YXR1c0Vycm9yLkJhZFJlcXVlc3QgPSB7IHN0YXR1c0NvZGU6IDQwMCwgbWVzc2FnZTogXCJCYWQgUmVxdWVzdFwiIH07XG5TdGF0dXNFcnJvci5VbmF1dGhvcml6ZWQgPSB7IHN0YXR1c0NvZGU6IDQwMSwgbWVzc2FnZTogXCJVbmF1dGhvcml6ZWRcIiB9O1xuU3RhdHVzRXJyb3IuUGF5bWVudFJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA0MDIsIG1lc3NhZ2U6IFwiUGF5bWVudCBSZXF1aXJlZFwiIH07XG5TdGF0dXNFcnJvci5Gb3JiaWRkZW4gPSB7IHN0YXR1c0NvZGU6IDQwMywgbWVzc2FnZTogXCJGb3JiaWRkZW5cIiB9O1xuU3RhdHVzRXJyb3IuTm90Rm91bmQgPSB7IHN0YXR1c0NvZGU6IDQwNCwgbWVzc2FnZTogXCJOb3QgRm91bmRcIiB9O1xuU3RhdHVzRXJyb3IuTWV0aG9kTm90QWxsb3dlZCA9IHsgc3RhdHVzQ29kZTogNDA1LCBtZXNzYWdlOiBcIk1ldGhvZCBOb3QgQWxsb3dlZFwiIH07XG5TdGF0dXNFcnJvci5Ob3RBY2NlcHRhYmxlID0geyBzdGF0dXNDb2RlOiA0MDYsIG1lc3NhZ2U6IFwiTm90IEFjY2VwdGFibGVcIiB9O1xuU3RhdHVzRXJyb3IuUHJveHlBdXRoZW50aWNhdGlvblJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA0MDcsIG1lc3NhZ2U6IFwiUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWRcIiB9O1xuU3RhdHVzRXJyb3IuUmVxdWVzdFRpbWVvdXQgPSB7IHN0YXR1c0NvZGU6IDQwOCwgbWVzc2FnZTogXCJSZXF1ZXN0IFRpbWVvdXRcIiB9O1xuU3RhdHVzRXJyb3IuQ29uZmxpY3QgPSB7IHN0YXR1c0NvZGU6IDQwOSwgbWVzc2FnZTogXCJDb25mbGljdFwiIH07XG5TdGF0dXNFcnJvci5Hb25lID0geyBzdGF0dXNDb2RlOiA0MTAsIG1lc3NhZ2U6IFwiR29uZVwiIH07XG5TdGF0dXNFcnJvci5MZW5ndGhSZXF1aXJlZCA9IHsgc3RhdHVzQ29kZTogNDExLCBtZXNzYWdlOiBcIkxlbmd0aCBSZXF1aXJlZFwiIH07XG5TdGF0dXNFcnJvci5QcmVjb25kaXRpb25GYWlsZWQgPSB7IHN0YXR1c0NvZGU6IDQxMiwgbWVzc2FnZTogXCJQcmVjb25kaXRpb24gRmFpbGVkXCIgfTtcblN0YXR1c0Vycm9yLlBheWxvYWRUb29MYXJnZSA9IHsgc3RhdHVzQ29kZTogNDEzLCBtZXNzYWdlOiBcIlBheWxvYWQgVG9vIExhcmdlXCIgfTtcblN0YXR1c0Vycm9yLlVSSVRvb0xvbmcgPSB7IHN0YXR1c0NvZGU6IDQxNCwgbWVzc2FnZTogXCJVUkkgVG9vIExvbmdcIiB9O1xuU3RhdHVzRXJyb3IuVW5zdXBwb3J0ZWRNZWRpYVR5cGUgPSB7IHN0YXR1c0NvZGU6IDQxNSwgbWVzc2FnZTogXCJVbnN1cHBvcnRlZCBNZWRpYSBUeXBlXCIgfTtcblN0YXR1c0Vycm9yLlJhbmdlTm90U2F0aXNmaWFibGUgPSB7IHN0YXR1c0NvZGU6IDQxNiwgbWVzc2FnZTogXCJSYW5nZSBOb3QgU2F0aXNmaWFibGVcIiB9O1xuU3RhdHVzRXJyb3IuRXhwZWN0YXRpb25GYWlsZWQgPSB7IHN0YXR1c0NvZGU6IDQxNywgbWVzc2FnZTogXCJFeHBlY3RhdGlvbiBGYWlsZWRcIiB9O1xuU3RhdHVzRXJyb3IuSW1BVGVhcG90ID0geyBzdGF0dXNDb2RlOiA0MTgsIG1lc3NhZ2U6IFwiSSdtIGEgdGVhcG90XCIgfTtcblN0YXR1c0Vycm9yLk1pc2RpcmVjdGVkUmVxdWVzdCA9IHsgc3RhdHVzQ29kZTogNDIxLCBtZXNzYWdlOiBcIk1pc2RpcmVjdGVkIFJlcXVlc3RcIiB9O1xuU3RhdHVzRXJyb3IuVW5wcm9jZXNzYWJsZUVudGl0eSA9IHsgc3RhdHVzQ29kZTogNDIyLCBtZXNzYWdlOiBcIlVucHJvY2Vzc2FibGUgRW50aXR5XCIgfTtcblN0YXR1c0Vycm9yLkxvY2tlZCA9IHsgc3RhdHVzQ29kZTogNDIzLCBtZXNzYWdlOiBcIkxvY2tlZFwiIH07XG5TdGF0dXNFcnJvci5GYWlsZWREZXBlbmRlbmN5ID0geyBzdGF0dXNDb2RlOiA0MjQsIG1lc3NhZ2U6IFwiRmFpbGVkIERlcGVuZGVuY3lcIiB9O1xuU3RhdHVzRXJyb3IuVG9vRWFybHkgPSB7IHN0YXR1c0NvZGU6IDQyNSwgbWVzc2FnZTogXCJUb28gRWFybHlcIiB9O1xuU3RhdHVzRXJyb3IuVXBncmFkZVJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA0MjYsIG1lc3NhZ2U6IFwiVXBncmFkZSBSZXF1aXJlZFwiIH07XG5TdGF0dXNFcnJvci5QcmVjb25kaXRpb25SZXF1aXJlZCA9IHsgc3RhdHVzQ29kZTogNDI4LCBtZXNzYWdlOiBcIlByZWNvbmRpdGlvbiBSZXF1aXJlZFwiIH07XG5TdGF0dXNFcnJvci5Ub29NYW55UmVxdWVzdHMgPSB7IHN0YXR1c0NvZGU6IDQyOSwgbWVzc2FnZTogXCJUb28gTWFueSBSZXF1ZXN0c1wiIH07XG5TdGF0dXNFcnJvci5SZXF1ZXN0SGVhZGVyRmllbGRzVG9vTGFyZ2UgPSB7IHN0YXR1c0NvZGU6IDQzMSwgbWVzc2FnZTogXCJSZXF1ZXN0IEhlYWRlciBGaWVsZHMgVG9vIExhcmdlXCIgfTtcblN0YXR1c0Vycm9yLlVuYXZhaWxhYmxlRm9yTGVnYWxSZWFzb25zID0geyBzdGF0dXNDb2RlOiA0NTEsIG1lc3NhZ2U6IFwiVW5hdmFpbGFibGUgRm9yIExlZ2FsIFJlYXNvbnNcIiB9O1xuU3RhdHVzRXJyb3IuSW50ZXJuYWxTZXJ2ZXJFcnJvciA9IHsgc3RhdHVzQ29kZTogNTAwLCBtZXNzYWdlOiBcIkludGVybmFsIFNlcnZlciBFcnJvclwiIH07XG5TdGF0dXNFcnJvci5Ob3RJbXBsZW1lbnRlZCA9IHsgc3RhdHVzQ29kZTogNTAxLCBtZXNzYWdlOiBcIk5vdCBJbXBsZW1lbnRlZFwiIH07XG5TdGF0dXNFcnJvci5CYWRHYXRld2F5ID0geyBzdGF0dXNDb2RlOiA1MDIsIG1lc3NhZ2U6IFwiQmFkIEdhdGV3YXlcIiB9O1xuU3RhdHVzRXJyb3IuU2VydmljZVVuYXZhaWxhYmxlID0geyBzdGF0dXNDb2RlOiA1MDMsIG1lc3NhZ2U6IFwiU2VydmljZSBVbmF2YWlsYWJsZVwiIH07XG5TdGF0dXNFcnJvci5HYXRld2F5VGltZW91dCA9IHsgc3RhdHVzQ29kZTogNTA0LCBtZXNzYWdlOiBcIkdhdGV3YXkgVGltZW91dFwiIH07XG5TdGF0dXNFcnJvci5IVFRQVmVyc2lvbk5vdFN1cHBvcnRlZCA9IHsgc3RhdHVzQ29kZTogNTA1LCBtZXNzYWdlOiBcIkhUVFAgVmVyc2lvbiBOb3QgU3VwcG9ydGVkXCIgfTtcblN0YXR1c0Vycm9yLlZhcmlhbnRBbHNvTmVnb3RpYXRlcyA9IHsgc3RhdHVzQ29kZTogNTA2LCBtZXNzYWdlOiBcIlZhcmlhbnQgQWxzbyBOZWdvdGlhdGVzXCIgfTtcblN0YXR1c0Vycm9yLkluc3VmZmljaWVudFN0b3JhZ2UgPSB7IHN0YXR1c0NvZGU6IDUwNywgbWVzc2FnZTogXCJJbnN1ZmZpY2llbnQgU3RvcmFnZVwiIH07XG5TdGF0dXNFcnJvci5Mb29wRGV0ZWN0ZWQgPSB7IHN0YXR1c0NvZGU6IDUwOCwgbWVzc2FnZTogXCJMb29wIERldGVjdGVkXCIgfTtcblN0YXR1c0Vycm9yLk5vdEV4dGVuZGVkID0geyBzdGF0dXNDb2RlOiA1MTAsIG1lc3NhZ2U6IFwiTm90IEV4dGVuZGVkXCIgfTtcblN0YXR1c0Vycm9yLk5ldHdvcmtBdXRoZW50aWNhdGlvblJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA1MTEsIG1lc3NhZ2U6IFwiTmV0d29yayBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZFwiIH07XG5TdGF0dXNFcnJvci5wcm90b3R5cGUubmFtZSA9IFwiU3RhdHVzRXJyb3JcIjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/functions.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/functions.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   identity: () => (/* binding */ identity),\n/* harmony export */   identityArgs: () => (/* binding */ identityArgs)\n/* harmony export */ });\nfunction identity(t) {\n    return t;\n}\n undefined;\nfunction identityArgs(...args) {\n    return args;\n}\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9mdW5jdGlvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQSxVQU9FO0FBQ0s7QUFDUDtBQUNBO0FBQ0EsVUFNRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFjay1zaGFyZWRcXGRpc3RcXHV0aWxzXFxmdW5jdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KHQpIHtcbiAgICByZXR1cm4gdDtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImlkZW50aXR5XCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KGlkZW50aXR5KDEpKS50b0JlKDEpO1xuICAgIGV4cGVjdChpZGVudGl0eShcInRlc3RcIikpLnRvQmUoXCJ0ZXN0XCIpO1xuICAgIGV4cGVjdChpZGVudGl0eShudWxsKSkudG9CZShudWxsKTtcbiAgICBleHBlY3QoaWRlbnRpdHkodW5kZWZpbmVkKSkudG9CZSh1bmRlZmluZWQpO1xuICAgIGNvbnN0IG9iaiA9IHsgYTogMSB9O1xuICAgIGV4cGVjdChpZGVudGl0eShvYmopKS50b0JlKG9iaik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eUFyZ3MoLi4uYXJncykge1xuICAgIHJldHVybiBhcmdzO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiaWRlbnRpdHlBcmdzXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KGlkZW50aXR5QXJncygpKS50b0VxdWFsKFtdKTtcbiAgICBleHBlY3QoaWRlbnRpdHlBcmdzKDEpKS50b0VxdWFsKFsxXSk7XG4gICAgZXhwZWN0KGlkZW50aXR5QXJncygxLCAyLCAzKSkudG9FcXVhbChbMSwgMiwgM10pO1xuICAgIGV4cGVjdChpZGVudGl0eUFyZ3MoXCJhXCIsIFwiYlwiLCBcImNcIikpLnRvRXF1YWwoW1wiYVwiLCBcImJcIiwgXCJjXCJdKTtcbiAgICBleHBlY3QoaWRlbnRpdHlBcmdzKG51bGwsIHVuZGVmaW5lZCkpLnRvRXF1YWwoW251bGwsIHVuZGVmaW5lZF0pO1xufSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/functions.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/globals.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGlobal: () => (/* binding */ createGlobal),\n/* harmony export */   globalVar: () => (/* binding */ globalVar)\n/* harmony export */ });\nconst globalVar = typeof globalThis !== 'undefined' ? globalThis :\n    typeof global !== 'undefined' ? global :\n        typeof window !== 'undefined' ? window :\n            typeof self !== 'undefined' ? self :\n                {};\n\nif (typeof globalThis === 'undefined') {\n    globalVar.globalThis = globalVar;\n}\nconst stackGlobalsSymbol = Symbol.for('__stack-globals');\nglobalVar[stackGlobalsSymbol] ??= {};\nfunction createGlobal(key, init) {\n    if (!globalVar[stackGlobalsSymbol][key]) {\n        globalVar[stackGlobalsSymbol][key] = init();\n    }\n    return globalVar[stackGlobalsSymbol][key];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9nbG9iYWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcdXRpbHNcXGdsb2JhbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2xvYmFsVmFyID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6XG4gICAgdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOlxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6XG4gICAgICAgICAgICB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDpcbiAgICAgICAgICAgICAgICB7fTtcbmV4cG9ydCB7IGdsb2JhbFZhciwgfTtcbmlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBnbG9iYWxWYXIuZ2xvYmFsVGhpcyA9IGdsb2JhbFZhcjtcbn1cbmNvbnN0IHN0YWNrR2xvYmFsc1N5bWJvbCA9IFN5bWJvbC5mb3IoJ19fc3RhY2stZ2xvYmFscycpO1xuZ2xvYmFsVmFyW3N0YWNrR2xvYmFsc1N5bWJvbF0gPz89IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdsb2JhbChrZXksIGluaXQpIHtcbiAgICBpZiAoIWdsb2JhbFZhcltzdGFja0dsb2JhbHNTeW1ib2xdW2tleV0pIHtcbiAgICAgICAgZ2xvYmFsVmFyW3N0YWNrR2xvYmFsc1N5bWJvbF1ba2V5XSA9IGluaXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIGdsb2JhbFZhcltzdGFja0dsb2JhbHNTeW1ib2xdW2tleV07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/http.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/http.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HTTP_METHODS: () => (/* binding */ HTTP_METHODS),\n/* harmony export */   decodeBasicAuthorizationHeader: () => (/* binding */ decodeBasicAuthorizationHeader),\n/* harmony export */   encodeBasicAuthorizationHeader: () => (/* binding */ encodeBasicAuthorizationHeader)\n/* harmony export */ });\n/* harmony import */ var _bytes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytes */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/bytes.js\");\n\nconst HTTP_METHODS = {\n    \"GET\": {\n        safe: true,\n        idempotent: true,\n    },\n    \"POST\": {\n        safe: false,\n        idempotent: false,\n    },\n    \"PUT\": {\n        safe: false,\n        idempotent: true,\n    },\n    \"DELETE\": {\n        safe: false,\n        idempotent: true,\n    },\n    \"PATCH\": {\n        safe: false,\n        idempotent: false,\n    },\n    \"OPTIONS\": {\n        safe: true,\n        idempotent: true,\n    },\n    \"HEAD\": {\n        safe: true,\n        idempotent: true,\n    },\n    \"TRACE\": {\n        safe: true,\n        idempotent: true,\n    },\n    \"CONNECT\": {\n        safe: false,\n        idempotent: false,\n    },\n};\nfunction decodeBasicAuthorizationHeader(value) {\n    const [type, encoded, ...rest] = value.split(' ');\n    if (rest.length > 0)\n        return null;\n    if (!encoded)\n        return null;\n    if (type !== 'Basic')\n        return null;\n    if (!(0,_bytes__WEBPACK_IMPORTED_MODULE_0__.isBase64)(encoded))\n        return null;\n    const decoded = new TextDecoder().decode((0,_bytes__WEBPACK_IMPORTED_MODULE_0__.decodeBase64)(encoded));\n    const split = decoded.split(':');\n    return [split[0], split.slice(1).join(':')];\n}\n undefined;\nfunction encodeBasicAuthorizationHeader(id, password) {\n    if (id.includes(':'))\n        throw new Error(\"Basic authorization header id cannot contain ':'\");\n    return `Basic ${(0,_bytes__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(new TextEncoder().encode(`${id}:${password}`))}`;\n}\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9odHRwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0Q7QUFDeEQ7QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdEQUFRO0FBQ2pCO0FBQ0EsNkNBQTZDLG9EQUFZO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLFVBZUU7QUFDSztBQUNQO0FBQ0E7QUFDQSxvQkFBb0Isb0RBQVksNkJBQTZCLEdBQUcsR0FBRyxTQUFTLElBQUk7QUFDaEY7QUFDQSxVQVlFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcdXRpbHNcXGh0dHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVjb2RlQmFzZTY0LCBlbmNvZGVCYXNlNjQsIGlzQmFzZTY0IH0gZnJvbSBcIi4vYnl0ZXNcIjtcbmV4cG9ydCBjb25zdCBIVFRQX01FVEhPRFMgPSB7XG4gICAgXCJHRVRcIjoge1xuICAgICAgICBzYWZlOiB0cnVlLFxuICAgICAgICBpZGVtcG90ZW50OiB0cnVlLFxuICAgIH0sXG4gICAgXCJQT1NUXCI6IHtcbiAgICAgICAgc2FmZTogZmFsc2UsXG4gICAgICAgIGlkZW1wb3RlbnQ6IGZhbHNlLFxuICAgIH0sXG4gICAgXCJQVVRcIjoge1xuICAgICAgICBzYWZlOiBmYWxzZSxcbiAgICAgICAgaWRlbXBvdGVudDogdHJ1ZSxcbiAgICB9LFxuICAgIFwiREVMRVRFXCI6IHtcbiAgICAgICAgc2FmZTogZmFsc2UsXG4gICAgICAgIGlkZW1wb3RlbnQ6IHRydWUsXG4gICAgfSxcbiAgICBcIlBBVENIXCI6IHtcbiAgICAgICAgc2FmZTogZmFsc2UsXG4gICAgICAgIGlkZW1wb3RlbnQ6IGZhbHNlLFxuICAgIH0sXG4gICAgXCJPUFRJT05TXCI6IHtcbiAgICAgICAgc2FmZTogdHJ1ZSxcbiAgICAgICAgaWRlbXBvdGVudDogdHJ1ZSxcbiAgICB9LFxuICAgIFwiSEVBRFwiOiB7XG4gICAgICAgIHNhZmU6IHRydWUsXG4gICAgICAgIGlkZW1wb3RlbnQ6IHRydWUsXG4gICAgfSxcbiAgICBcIlRSQUNFXCI6IHtcbiAgICAgICAgc2FmZTogdHJ1ZSxcbiAgICAgICAgaWRlbXBvdGVudDogdHJ1ZSxcbiAgICB9LFxuICAgIFwiQ09OTkVDVFwiOiB7XG4gICAgICAgIHNhZmU6IGZhbHNlLFxuICAgICAgICBpZGVtcG90ZW50OiBmYWxzZSxcbiAgICB9LFxufTtcbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVCYXNpY0F1dGhvcml6YXRpb25IZWFkZXIodmFsdWUpIHtcbiAgICBjb25zdCBbdHlwZSwgZW5jb2RlZCwgLi4ucmVzdF0gPSB2YWx1ZS5zcGxpdCgnICcpO1xuICAgIGlmIChyZXN0Lmxlbmd0aCA+IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmICghZW5jb2RlZClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKHR5cGUgIT09ICdCYXNpYycpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmICghaXNCYXNlNjQoZW5jb2RlZCkpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGRlY29kZWQgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGVjb2RlQmFzZTY0KGVuY29kZWQpKTtcbiAgICBjb25zdCBzcGxpdCA9IGRlY29kZWQuc3BsaXQoJzonKTtcbiAgICByZXR1cm4gW3NwbGl0WzBdLCBzcGxpdC5zbGljZSgxKS5qb2luKCc6JyldO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiZGVjb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIHZhbGlkIEJhc2ljIEF1dGhvcml6YXRpb24gaGVhZGVyXG4gICAgY29uc3QgdXNlcm5hbWUgPSBcInVzZXJcIjtcbiAgICBjb25zdCBwYXNzd29yZCA9IFwicGFzc1wiO1xuICAgIGNvbnN0IGVuY29kZWQgPSBlbmNvZGVCYXNpY0F1dGhvcml6YXRpb25IZWFkZXIodXNlcm5hbWUsIHBhc3N3b3JkKTtcbiAgICBleHBlY3QoZGVjb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyKGVuY29kZWQpKS50b0VxdWFsKFt1c2VybmFtZSwgcGFzc3dvcmRdKTtcbiAgICAvLyBUZXN0IHdpdGggcGFzc3dvcmQgY29udGFpbmluZyBjb2xvbnNcbiAgICBjb25zdCBjb21wbGV4UGFzc3dvcmQgPSBcInBhc3M6d2l0aDpjb2xvbnNcIjtcbiAgICBjb25zdCBlbmNvZGVkQ29tcGxleCA9IGVuY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlcih1c2VybmFtZSwgY29tcGxleFBhc3N3b3JkKTtcbiAgICBleHBlY3QoZGVjb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyKGVuY29kZWRDb21wbGV4KSkudG9FcXVhbChbdXNlcm5hbWUsIGNvbXBsZXhQYXNzd29yZF0pO1xuICAgIC8vIFRlc3Qgd2l0aCBpbnZhbGlkIGhlYWRlcnNcbiAgICBleHBlY3QoZGVjb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyKFwiTm90QmFzaWMgZFhObGNqcHdZWE56XCIpKS50b0JlKG51bGwpOyAvLyBXcm9uZyB0eXBlXG4gICAgZXhwZWN0KGRlY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlcihcIkJhc2ljXCIpKS50b0JlKG51bGwpOyAvLyBNaXNzaW5nIGVuY29kZWQgcGFydFxuICAgIGV4cGVjdChkZWNvZGVCYXNpY0F1dGhvcml6YXRpb25IZWFkZXIoXCJCYXNpYyBub3QtYmFzZTY0XCIpKS50b0JlKG51bGwpOyAvLyBOb3QgYmFzZTY0XG4gICAgZXhwZWN0KGRlY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlcihcIkJhc2ljIGRYTmxjanB3WVhOeiBleHRyYVwiKSkudG9CZShudWxsKTsgLy8gRXh0cmEgcGFydHNcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlcihpZCwgcGFzc3dvcmQpIHtcbiAgICBpZiAoaWQuaW5jbHVkZXMoJzonKSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmFzaWMgYXV0aG9yaXphdGlvbiBoZWFkZXIgaWQgY2Fubm90IGNvbnRhaW4gJzonXCIpO1xuICAgIHJldHVybiBgQmFzaWMgJHtlbmNvZGVCYXNlNjQobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGAke2lkfToke3Bhc3N3b3JkfWApKX1gO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiZW5jb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIHNpbXBsZSB1c2VybmFtZSBhbmQgcGFzc3dvcmRcbiAgICBjb25zdCBlbmNvZGVkID0gZW5jb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyKFwidXNlclwiLCBcInBhc3NcIik7XG4gICAgZXhwZWN0KGVuY29kZWQpLnRvTWF0Y2goL15CYXNpYyBbQS1aYS16MC05Ky89XSskLyk7IC8vIFNob3VsZCBzdGFydCB3aXRoIFwiQmFzaWMgXCIgZm9sbG93ZWQgYnkgYmFzZTY0XG4gICAgLy8gVGVzdCB3aXRoIGVtcHR5IHBhc3N3b3JkXG4gICAgY29uc3QgZW5jb2RlZEVtcHR5UGFzcyA9IGVuY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlcihcInVzZXJcIiwgXCJcIik7XG4gICAgZXhwZWN0KGVuY29kZWRFbXB0eVBhc3MpLnRvTWF0Y2goL15CYXNpYyBbQS1aYS16MC05Ky89XSskLyk7XG4gICAgLy8gVGVzdCB3aXRoIHBhc3N3b3JkIGNvbnRhaW5pbmcgc3BlY2lhbCBjaGFyYWN0ZXJzXG4gICAgY29uc3QgZW5jb2RlZFNwZWNpYWxDaGFycyA9IGVuY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlcihcInVzZXJcIiwgXCJwQHNzIXcwcmRcIik7XG4gICAgZXhwZWN0KGVuY29kZWRTcGVjaWFsQ2hhcnMpLnRvTWF0Y2goL15CYXNpYyBbQS1aYS16MC05Ky89XSskLyk7XG4gICAgLy8gVGVzdCB3aXRoIHVzZXJuYW1lIGNvbnRhaW5pbmcgY29sb24gc2hvdWxkIHRocm93XG4gICAgZXhwZWN0KCgpID0+IGVuY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlcihcInVzZXI6bmFtZVwiLCBcInBhc3NcIikpLnRvVGhyb3coKTtcbn0pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/http.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/locks.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/locks.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReadWriteLock: () => (/* binding */ ReadWriteLock)\n/* harmony export */ });\n/* harmony import */ var async_mutex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! async-mutex */ \"(app-pages-browser)/./node_modules/async-mutex/index.mjs\");\n\nclass ReadWriteLock {\n    constructor() {\n        this.semaphore = new async_mutex__WEBPACK_IMPORTED_MODULE_0__.Semaphore(1); // Semaphore with 1 permit\n        this.readers = 0; // Track the number of readers\n        this.readersMutex = new async_mutex__WEBPACK_IMPORTED_MODULE_0__.Semaphore(1); // Protect access to `readers` count\n    }\n    async withReadLock(callback) {\n        await this._acquireReadLock();\n        try {\n            return await callback();\n        }\n        finally {\n            await this._releaseReadLock();\n        }\n    }\n    async withWriteLock(callback) {\n        await this._acquireWriteLock();\n        try {\n            return await callback();\n        }\n        finally {\n            await this._releaseWriteLock();\n        }\n    }\n    async _acquireReadLock() {\n        // Increment the readers count\n        await this.readersMutex.acquire();\n        try {\n            this.readers += 1;\n            // If this is the first reader, block writers\n            if (this.readers === 1) {\n                await this.semaphore.acquire();\n            }\n        }\n        finally {\n            this.readersMutex.release();\n        }\n    }\n    async _releaseReadLock() {\n        // Decrement the readers count\n        await this.readersMutex.acquire();\n        try {\n            this.readers -= 1;\n            // If this was the last reader, release the writer block\n            if (this.readers === 0) {\n                this.semaphore.release();\n            }\n        }\n        finally {\n            this.readersMutex.release();\n        }\n    }\n    async _acquireWriteLock() {\n        // Writers acquire the main semaphore exclusively\n        await this.semaphore.acquire();\n    }\n    async _releaseWriteLock() {\n        // Writers release the main semaphore\n        this.semaphore.release();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9sb2Nrcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUNqQztBQUNQO0FBQ0EsNkJBQTZCLGtEQUFTLEtBQUs7QUFDM0MsMEJBQTBCO0FBQzFCLGdDQUFnQyxrREFBUyxLQUFLO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2hhcmVkXFxkaXN0XFx1dGlsc1xcbG9ja3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VtYXBob3JlIH0gZnJvbSAnYXN5bmMtbXV0ZXgnO1xuZXhwb3J0IGNsYXNzIFJlYWRXcml0ZUxvY2sge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNlbWFwaG9yZSA9IG5ldyBTZW1hcGhvcmUoMSk7IC8vIFNlbWFwaG9yZSB3aXRoIDEgcGVybWl0XG4gICAgICAgIHRoaXMucmVhZGVycyA9IDA7IC8vIFRyYWNrIHRoZSBudW1iZXIgb2YgcmVhZGVyc1xuICAgICAgICB0aGlzLnJlYWRlcnNNdXRleCA9IG5ldyBTZW1hcGhvcmUoMSk7IC8vIFByb3RlY3QgYWNjZXNzIHRvIGByZWFkZXJzYCBjb3VudFxuICAgIH1cbiAgICBhc3luYyB3aXRoUmVhZExvY2soY2FsbGJhY2spIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fYWNxdWlyZVJlYWRMb2NrKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3JlbGVhc2VSZWFkTG9jaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHdpdGhXcml0ZUxvY2soY2FsbGJhY2spIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fYWNxdWlyZVdyaXRlTG9jaygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9yZWxlYXNlV3JpdGVMb2NrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgX2FjcXVpcmVSZWFkTG9jaygpIHtcbiAgICAgICAgLy8gSW5jcmVtZW50IHRoZSByZWFkZXJzIGNvdW50XG4gICAgICAgIGF3YWl0IHRoaXMucmVhZGVyc011dGV4LmFjcXVpcmUoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucmVhZGVycyArPSAxO1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgcmVhZGVyLCBibG9jayB3cml0ZXJzXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkZXJzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW1hcGhvcmUuYWNxdWlyZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5yZWFkZXJzTXV0ZXgucmVsZWFzZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIF9yZWxlYXNlUmVhZExvY2soKSB7XG4gICAgICAgIC8vIERlY3JlbWVudCB0aGUgcmVhZGVycyBjb3VudFxuICAgICAgICBhd2FpdCB0aGlzLnJlYWRlcnNNdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRlcnMgLT0gMTtcbiAgICAgICAgICAgIC8vIElmIHRoaXMgd2FzIHRoZSBsYXN0IHJlYWRlciwgcmVsZWFzZSB0aGUgd3JpdGVyIGJsb2NrXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkZXJzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW1hcGhvcmUucmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5yZWFkZXJzTXV0ZXgucmVsZWFzZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIF9hY3F1aXJlV3JpdGVMb2NrKCkge1xuICAgICAgICAvLyBXcml0ZXJzIGFjcXVpcmUgdGhlIG1haW4gc2VtYXBob3JlIGV4Y2x1c2l2ZWx5XG4gICAgICAgIGF3YWl0IHRoaXMuc2VtYXBob3JlLmFjcXVpcmUoKTtcbiAgICB9XG4gICAgYXN5bmMgX3JlbGVhc2VXcml0ZUxvY2soKSB7XG4gICAgICAgIC8vIFdyaXRlcnMgcmVsZWFzZSB0aGUgbWFpbiBzZW1hcGhvcmVcbiAgICAgICAgdGhpcy5zZW1hcGhvcmUucmVsZWFzZSgpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/locks.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/maps.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DependenciesMap: () => (/* binding */ DependenciesMap),\n/* harmony export */   IterableWeakMap: () => (/* binding */ IterableWeakMap),\n/* harmony export */   MaybeWeakMap: () => (/* binding */ MaybeWeakMap),\n/* harmony export */   WeakRefIfAvailable: () => (/* binding */ WeakRefIfAvailable)\n/* harmony export */ });\n/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\nvar _a, _b, _c;\n\nclass WeakRefIfAvailable {\n    constructor(value) {\n        if (typeof WeakRef === \"undefined\") {\n            this._ref = { deref: () => value };\n        }\n        else {\n            this._ref = new WeakRef(value);\n        }\n    }\n    deref() {\n        return this._ref.deref();\n    }\n}\n undefined;\n/**\n * A WeakMap-like object that can be iterated over.\n *\n * Note that it relies on WeakRef, and always falls back to the regular Map behavior (ie. no GC) in browsers that don't support it.\n */\nclass IterableWeakMap {\n    constructor(entries) {\n        this[_a] = \"IterableWeakMap\";\n        const mappedEntries = entries?.map((e) => [e[0], { value: e[1], keyRef: new WeakRefIfAvailable(e[0]) }]);\n        this._weakMap = new WeakMap(mappedEntries ?? []);\n        this._keyRefs = new Set(mappedEntries?.map((e) => e[1].keyRef) ?? []);\n    }\n    get(key) {\n        return this._weakMap.get(key)?.value;\n    }\n    set(key, value) {\n        const existing = this._weakMap.get(key);\n        const updated = { value, keyRef: existing?.keyRef ?? new WeakRefIfAvailable(key) };\n        this._weakMap.set(key, updated);\n        this._keyRefs.add(updated.keyRef);\n        return this;\n    }\n    delete(key) {\n        const res = this._weakMap.get(key);\n        if (res) {\n            this._weakMap.delete(key);\n            this._keyRefs.delete(res.keyRef);\n            return true;\n        }\n        return false;\n    }\n    has(key) {\n        return this._weakMap.has(key) && this._keyRefs.has(this._weakMap.get(key).keyRef);\n    }\n    *[Symbol.iterator]() {\n        for (const keyRef of this._keyRefs) {\n            const key = keyRef.deref();\n            const existing = key ? this._weakMap.get(key) : undefined;\n            if (!key) {\n                // This can happen if the key was GCed. Remove it so the next iteration is faster.\n                this._keyRefs.delete(keyRef);\n            }\n            else if (existing) {\n                yield [key, existing.value];\n            }\n        }\n    }\n}\n_a = Symbol.toStringTag;\n undefined;\n/**\n * A map that is a IterableWeakMap for object keys and a regular Map for primitive keys. Also provides iteration over both\n * object and primitive keys.\n *\n * Note that, just like IterableWeakMap, older browsers without support for WeakRef will use a regular Map for object keys.\n */\nclass MaybeWeakMap {\n    constructor(entries) {\n        this[_b] = \"MaybeWeakMap\";\n        const entriesArray = [...entries ?? []];\n        this._primitiveMap = new Map(entriesArray.filter((e) => !this._isAllowedInWeakMap(e[0])));\n        this._weakMap = new IterableWeakMap(entriesArray.filter((e) => this._isAllowedInWeakMap(e[0])));\n    }\n    _isAllowedInWeakMap(key) {\n        return (typeof key === \"object\" && key !== null) || (typeof key === \"symbol\" && Symbol.keyFor(key) === undefined);\n    }\n    get(key) {\n        if (this._isAllowedInWeakMap(key)) {\n            return this._weakMap.get(key);\n        }\n        else {\n            return this._primitiveMap.get(key);\n        }\n    }\n    set(key, value) {\n        if (this._isAllowedInWeakMap(key)) {\n            this._weakMap.set(key, value);\n        }\n        else {\n            this._primitiveMap.set(key, value);\n        }\n        return this;\n    }\n    delete(key) {\n        if (this._isAllowedInWeakMap(key)) {\n            return this._weakMap.delete(key);\n        }\n        else {\n            return this._primitiveMap.delete(key);\n        }\n    }\n    has(key) {\n        if (this._isAllowedInWeakMap(key)) {\n            return this._weakMap.has(key);\n        }\n        else {\n            return this._primitiveMap.has(key);\n        }\n    }\n    *[Symbol.iterator]() {\n        yield* this._primitiveMap;\n        yield* this._weakMap;\n    }\n}\n_b = Symbol.toStringTag;\n undefined;\n/**\n * A map that stores values indexed by an array of keys. If the keys are objects and the environment supports WeakRefs,\n * they are stored in a WeakMap.\n */\nclass DependenciesMap {\n    constructor() {\n        this._inner = { map: new MaybeWeakMap(), hasValue: false, value: undefined };\n        this[_c] = \"DependenciesMap\";\n    }\n    _valueToResult(inner) {\n        if (inner.hasValue) {\n            return _results__WEBPACK_IMPORTED_MODULE_0__.Result.ok(inner.value);\n        }\n        else {\n            return _results__WEBPACK_IMPORTED_MODULE_0__.Result.error(undefined);\n        }\n    }\n    _unwrapFromInner(dependencies, inner) {\n        if ((dependencies.length === 0)) {\n            return this._valueToResult(inner);\n        }\n        else {\n            const [key, ...rest] = dependencies;\n            const newInner = inner.map.get(key);\n            if (!newInner) {\n                return _results__WEBPACK_IMPORTED_MODULE_0__.Result.error(undefined);\n            }\n            return this._unwrapFromInner(rest, newInner);\n        }\n    }\n    _setInInner(dependencies, value, inner) {\n        if (dependencies.length === 0) {\n            const res = this._valueToResult(inner);\n            if (value.status === \"ok\") {\n                inner.hasValue = true;\n                inner.value = value.data;\n            }\n            else {\n                inner.hasValue = false;\n                inner.value = undefined;\n            }\n            return res;\n        }\n        else {\n            const [key, ...rest] = dependencies;\n            let newInner = inner.map.get(key);\n            if (!newInner) {\n                inner.map.set(key, newInner = { map: new MaybeWeakMap(), hasValue: false, value: undefined });\n            }\n            return this._setInInner(rest, value, newInner);\n        }\n    }\n    *_iterateInner(dependencies, inner) {\n        if (inner.hasValue) {\n            yield [dependencies, inner.value];\n        }\n        for (const [key, value] of inner.map) {\n            yield* this._iterateInner([...dependencies, key], value);\n        }\n    }\n    get(dependencies) {\n        return _results__WEBPACK_IMPORTED_MODULE_0__.Result.or(this._unwrapFromInner(dependencies, this._inner), undefined);\n    }\n    set(dependencies, value) {\n        this._setInInner(dependencies, _results__WEBPACK_IMPORTED_MODULE_0__.Result.ok(value), this._inner);\n        return this;\n    }\n    delete(dependencies) {\n        return this._setInInner(dependencies, _results__WEBPACK_IMPORTED_MODULE_0__.Result.error(undefined), this._inner).status === \"ok\";\n    }\n    has(dependencies) {\n        return this._unwrapFromInner(dependencies, this._inner).status === \"ok\";\n    }\n    clear() {\n        this._inner = { map: new MaybeWeakMap(), hasValue: false, value: undefined };\n    }\n    *[Symbol.iterator]() {\n        yield* this._iterateInner([], this._inner);\n    }\n}\n_c = Symbol.toStringTag;\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9tYXBzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDbUM7QUFDNUI7QUFDUDtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBYUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsMkRBQTJELG1EQUFtRDtBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFpREU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBc0NFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRDQUFNO0FBQ3pCO0FBQ0E7QUFDQSxtQkFBbUIsNENBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNENBQU07QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDREQUE0RDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNENBQU07QUFDckI7QUFDQTtBQUNBLHVDQUF1Qyw0Q0FBTTtBQUM3QztBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsNENBQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQXlDRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFjay1zaGFyZWRcXGRpc3RcXHV0aWxzXFxtYXBzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfYSwgX2IsIF9jO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0c1wiO1xuZXhwb3J0IGNsYXNzIFdlYWtSZWZJZkF2YWlsYWJsZSB7XG4gICAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBXZWFrUmVmID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWYgPSB7IGRlcmVmOiAoKSA9PiB2YWx1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVmID0gbmV3IFdlYWtSZWYodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlcmVmKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmLmRlcmVmKCk7XG4gICAgfVxufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiV2Vha1JlZklmQXZhaWxhYmxlXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIGFuIG9iamVjdFxuICAgIGNvbnN0IG9iaiA9IHsgaWQ6IDEsIG5hbWU6IFwidGVzdFwiIH07XG4gICAgY29uc3Qgd2Vha1JlZiA9IG5ldyBXZWFrUmVmSWZBdmFpbGFibGUob2JqKTtcbiAgICAvLyBUZXN0IGRlcmVmIHJldHVybnMgdGhlIG9yaWdpbmFsIG9iamVjdFxuICAgIGV4cGVjdCh3ZWFrUmVmLmRlcmVmKCkpLnRvQmUob2JqKTtcbiAgICAvLyBUZXN0IHdpdGggYSBkaWZmZXJlbnQgb2JqZWN0XG4gICAgY29uc3Qgb2JqMiA9IHsgaWQ6IDIsIG5hbWU6IFwidGVzdDJcIiB9O1xuICAgIGNvbnN0IHdlYWtSZWYyID0gbmV3IFdlYWtSZWZJZkF2YWlsYWJsZShvYmoyKTtcbiAgICBleHBlY3Qod2Vha1JlZjIuZGVyZWYoKSkudG9CZShvYmoyKTtcbiAgICBleHBlY3Qod2Vha1JlZjIuZGVyZWYoKSkubm90LnRvQmUob2JqKTtcbiAgICAvLyBXZSBjYW4ndCBlYXNpbHkgdGVzdCBnYXJiYWdlIGNvbGxlY3Rpb24gaW4gdGhpcyBlbnZpcm9ubWVudCxcbiAgICAvLyBidXQgd2UgY2FuIHZlcmlmeSB0aGUgYmFzaWMgZnVuY3Rpb25hbGl0eSB3b3Jrc1xufSk7XG4vKipcbiAqIEEgV2Vha01hcC1saWtlIG9iamVjdCB0aGF0IGNhbiBiZSBpdGVyYXRlZCBvdmVyLlxuICpcbiAqIE5vdGUgdGhhdCBpdCByZWxpZXMgb24gV2Vha1JlZiwgYW5kIGFsd2F5cyBmYWxscyBiYWNrIHRvIHRoZSByZWd1bGFyIE1hcCBiZWhhdmlvciAoaWUuIG5vIEdDKSBpbiBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgaXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJdGVyYWJsZVdlYWtNYXAge1xuICAgIGNvbnN0cnVjdG9yKGVudHJpZXMpIHtcbiAgICAgICAgdGhpc1tfYV0gPSBcIkl0ZXJhYmxlV2Vha01hcFwiO1xuICAgICAgICBjb25zdCBtYXBwZWRFbnRyaWVzID0gZW50cmllcz8ubWFwKChlKSA9PiBbZVswXSwgeyB2YWx1ZTogZVsxXSwga2V5UmVmOiBuZXcgV2Vha1JlZklmQXZhaWxhYmxlKGVbMF0pIH1dKTtcbiAgICAgICAgdGhpcy5fd2Vha01hcCA9IG5ldyBXZWFrTWFwKG1hcHBlZEVudHJpZXMgPz8gW10pO1xuICAgICAgICB0aGlzLl9rZXlSZWZzID0gbmV3IFNldChtYXBwZWRFbnRyaWVzPy5tYXAoKGUpID0+IGVbMV0ua2V5UmVmKSA/PyBbXSk7XG4gICAgfVxuICAgIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dlYWtNYXAuZ2V0KGtleSk/LnZhbHVlO1xuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuX3dlYWtNYXAuZ2V0KGtleSk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWQgPSB7IHZhbHVlLCBrZXlSZWY6IGV4aXN0aW5nPy5rZXlSZWYgPz8gbmV3IFdlYWtSZWZJZkF2YWlsYWJsZShrZXkpIH07XG4gICAgICAgIHRoaXMuX3dlYWtNYXAuc2V0KGtleSwgdXBkYXRlZCk7XG4gICAgICAgIHRoaXMuX2tleVJlZnMuYWRkKHVwZGF0ZWQua2V5UmVmKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRlbGV0ZShrZXkpIHtcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy5fd2Vha01hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgdGhpcy5fd2Vha01hcC5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIHRoaXMuX2tleVJlZnMuZGVsZXRlKHJlcy5rZXlSZWYpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBoYXMoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWFrTWFwLmhhcyhrZXkpICYmIHRoaXMuX2tleVJlZnMuaGFzKHRoaXMuX3dlYWtNYXAuZ2V0KGtleSkua2V5UmVmKTtcbiAgICB9XG4gICAgKltTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleVJlZiBvZiB0aGlzLl9rZXlSZWZzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlSZWYuZGVyZWYoKTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0ga2V5ID8gdGhpcy5fd2Vha01hcC5nZXQoa2V5KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmICgha2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBrZXkgd2FzIEdDZWQuIFJlbW92ZSBpdCBzbyB0aGUgbmV4dCBpdGVyYXRpb24gaXMgZmFzdGVyLlxuICAgICAgICAgICAgICAgIHRoaXMuX2tleVJlZnMuZGVsZXRlKGtleVJlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgIHlpZWxkIFtrZXksIGV4aXN0aW5nLnZhbHVlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbl9hID0gU3ltYm9sLnRvU3RyaW5nVGFnO1xuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiSXRlcmFibGVXZWFrTWFwXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCBiYXNpYyBmdW5jdGlvbmFsaXR5XG4gICAgY29uc3QgbWFwID0gbmV3IEl0ZXJhYmxlV2Vha01hcCgpO1xuICAgIC8vIENyZWF0ZSBvYmplY3Qga2V5c1xuICAgIGNvbnN0IG9iajEgPSB7IGlkOiAxIH07XG4gICAgY29uc3Qgb2JqMiA9IHsgaWQ6IDIgfTtcbiAgICAvLyBUZXN0IHNldCBhbmQgZ2V0XG4gICAgbWFwLnNldChvYmoxLCBcInZhbHVlMVwiKTtcbiAgICBleHBlY3QobWFwLmdldChvYmoxKSkudG9CZShcInZhbHVlMVwiKTtcbiAgICAvLyBUZXN0IGhhc1xuICAgIGV4cGVjdChtYXAuaGFzKG9iajEpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChtYXAuaGFzKG9iajIpKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QobWFwLmhhcyh7IGlkOiAxIH0pKS50b0JlKGZhbHNlKTsgLy8gRGlmZmVyZW50IG9iamVjdCB3aXRoIHNhbWUgY29udGVudFxuICAgIC8vIFRlc3Qgd2l0aCBtdWx0aXBsZSBrZXlzXG4gICAgbWFwLnNldChvYmoyLCBcInZhbHVlMlwiKTtcbiAgICBleHBlY3QobWFwLmdldChvYmoyKSkudG9CZShcInZhbHVlMlwiKTtcbiAgICBleHBlY3QobWFwLmdldChvYmoxKSkudG9CZShcInZhbHVlMVwiKTsgLy8gT3JpZ2luYWwgc3RpbGwgZXhpc3RzXG4gICAgLy8gVGVzdCBkZWxldGVcbiAgICBleHBlY3QobWFwLmRlbGV0ZShvYmoxKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QobWFwLmhhcyhvYmoxKSkudG9CZShmYWxzZSk7XG4gICAgZXhwZWN0KG1hcC5nZXQob2JqMSkpLnRvQmVVbmRlZmluZWQoKTtcbiAgICBleHBlY3QobWFwLmhhcyhvYmoyKSkudG9CZSh0cnVlKTsgLy8gT3RoZXIga2V5IHN0aWxsIGV4aXN0c1xuICAgIC8vIFRlc3QgZGVsZXRlIG5vbi1leGlzdGVudCBrZXlcbiAgICBleHBlY3QobWFwLmRlbGV0ZSh7IGlkOiAzIH0pKS50b0JlKGZhbHNlKTtcbiAgICAvLyBUZXN0IGl0ZXJhdGlvblxuICAgIGNvbnN0IGl0ZXJNYXAgPSBuZXcgSXRlcmFibGVXZWFrTWFwKCk7XG4gICAgY29uc3QgaXRlck9iajEgPSB7IGlkOiAxIH07XG4gICAgY29uc3QgaXRlck9iajIgPSB7IGlkOiAyIH07XG4gICAgY29uc3QgaXRlck9iajMgPSB7IGlkOiAzIH07XG4gICAgaXRlck1hcC5zZXQoaXRlck9iajEsIDEpO1xuICAgIGl0ZXJNYXAuc2V0KGl0ZXJPYmoyLCAyKTtcbiAgICBpdGVyTWFwLnNldChpdGVyT2JqMywgMyk7XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmZyb20oaXRlck1hcCk7XG4gICAgZXhwZWN0KGVudHJpZXMubGVuZ3RoKS50b0JlKDMpO1xuICAgIC8vIEZpbmQgZW50cmllcyBieSB0aGVpciB2YWx1ZXMgc2luY2Ugd2UgY2FuJ3QgZGlyZWN0bHkgY29tcGFyZSBvYmplY3RzIGluIHRoZSBhcnJheVxuICAgIGNvbnN0IHZhbHVlcyA9IGVudHJpZXMubWFwKGVudHJ5ID0+IGVudHJ5WzFdKTtcbiAgICBleHBlY3QodmFsdWVzKS50b0NvbnRhaW4oMSk7XG4gICAgZXhwZWN0KHZhbHVlcykudG9Db250YWluKDIpO1xuICAgIGV4cGVjdCh2YWx1ZXMpLnRvQ29udGFpbigzKTtcbiAgICAvLyBUZXN0IGNvbnN0cnVjdG9yIHdpdGggZW50cmllc1xuICAgIGNvbnN0IGluaXRpYWxFbnRyaWVzID0gW1xuICAgICAgICBbeyBpZDogNCB9LCBcImluaXRpYWwxXCJdLFxuICAgICAgICBbeyBpZDogNSB9LCBcImluaXRpYWwyXCJdXG4gICAgXTtcbiAgICBjb25zdCBtYXBXaXRoRW50cmllcyA9IG5ldyBJdGVyYWJsZVdlYWtNYXAoaW5pdGlhbEVudHJpZXMpO1xuICAgIC8vIFdlIGNhbid0IGRpcmVjdGx5IGFjY2VzcyB0aGUgaW5pdGlhbCBlbnRyaWVzIHNpbmNlIHRoZXkncmUgZGlmZmVyZW50IG9iamVjdCByZWZlcmVuY2VzXG4gICAgLy8gQnV0IHdlIGNhbiB2ZXJpZnkgdGhlIG1hcCBoYXMgdGhlIGNvcnJlY3QgbnVtYmVyIG9mIGVudHJpZXNcbiAgICBjb25zdCBlbnRyaWVzRnJvbUNvbnN0cnVjdG9yID0gQXJyYXkuZnJvbShtYXBXaXRoRW50cmllcyk7XG4gICAgZXhwZWN0KGVudHJpZXNGcm9tQ29uc3RydWN0b3IubGVuZ3RoKS50b0JlKDIpO1xufSk7XG4vKipcbiAqIEEgbWFwIHRoYXQgaXMgYSBJdGVyYWJsZVdlYWtNYXAgZm9yIG9iamVjdCBrZXlzIGFuZCBhIHJlZ3VsYXIgTWFwIGZvciBwcmltaXRpdmUga2V5cy4gQWxzbyBwcm92aWRlcyBpdGVyYXRpb24gb3ZlciBib3RoXG4gKiBvYmplY3QgYW5kIHByaW1pdGl2ZSBrZXlzLlxuICpcbiAqIE5vdGUgdGhhdCwganVzdCBsaWtlIEl0ZXJhYmxlV2Vha01hcCwgb2xkZXIgYnJvd3NlcnMgd2l0aG91dCBzdXBwb3J0IGZvciBXZWFrUmVmIHdpbGwgdXNlIGEgcmVndWxhciBNYXAgZm9yIG9iamVjdCBrZXlzLlxuICovXG5leHBvcnQgY2xhc3MgTWF5YmVXZWFrTWFwIHtcbiAgICBjb25zdHJ1Y3RvcihlbnRyaWVzKSB7XG4gICAgICAgIHRoaXNbX2JdID0gXCJNYXliZVdlYWtNYXBcIjtcbiAgICAgICAgY29uc3QgZW50cmllc0FycmF5ID0gWy4uLmVudHJpZXMgPz8gW11dO1xuICAgICAgICB0aGlzLl9wcmltaXRpdmVNYXAgPSBuZXcgTWFwKGVudHJpZXNBcnJheS5maWx0ZXIoKGUpID0+ICF0aGlzLl9pc0FsbG93ZWRJbldlYWtNYXAoZVswXSkpKTtcbiAgICAgICAgdGhpcy5fd2Vha01hcCA9IG5ldyBJdGVyYWJsZVdlYWtNYXAoZW50cmllc0FycmF5LmZpbHRlcigoZSkgPT4gdGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGVbMF0pKSk7XG4gICAgfVxuICAgIF9pc0FsbG93ZWRJbldlYWtNYXAoa2V5KSB7XG4gICAgICAgIHJldHVybiAodHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiAmJiBrZXkgIT09IG51bGwpIHx8ICh0eXBlb2Yga2V5ID09PSBcInN5bWJvbFwiICYmIFN5bWJvbC5rZXlGb3Ioa2V5KSA9PT0gdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93ZWFrTWFwLmdldChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZU1hcC5nZXQoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3dlYWtNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcHJpbWl0aXZlTWFwLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGVsZXRlKGtleSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93ZWFrTWFwLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZU1hcC5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXMoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0FsbG93ZWRJbldlYWtNYXAoa2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dlYWtNYXAuaGFzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJpbWl0aXZlTWFwLmhhcyhrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgICpbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgeWllbGQqIHRoaXMuX3ByaW1pdGl2ZU1hcDtcbiAgICAgICAgeWllbGQqIHRoaXMuX3dlYWtNYXA7XG4gICAgfVxufVxuX2IgPSBTeW1ib2wudG9TdHJpbmdUYWc7XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJNYXliZVdlYWtNYXBcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggcHJpbWl0aXZlIGtleXNcbiAgICBjb25zdCBtYXAgPSBuZXcgTWF5YmVXZWFrTWFwKCk7XG4gICAgLy8gVGVzdCB3aXRoIHN0cmluZyBrZXlzXG4gICAgbWFwLnNldChcImtleTFcIiwgMSk7XG4gICAgbWFwLnNldChcImtleTJcIiwgMik7XG4gICAgZXhwZWN0KG1hcC5nZXQoXCJrZXkxXCIpKS50b0JlKDEpO1xuICAgIGV4cGVjdChtYXAuZ2V0KFwia2V5MlwiKSkudG9CZSgyKTtcbiAgICBleHBlY3QobWFwLmhhcyhcImtleTFcIikpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KG1hcC5oYXMoXCJub25leGlzdGVudFwiKSkudG9CZShmYWxzZSk7XG4gICAgLy8gVGVzdCB3aXRoIG9iamVjdCBrZXlzXG4gICAgY29uc3Qgb2JqMSA9IHsgaWQ6IDEgfTtcbiAgICBjb25zdCBvYmoyID0geyBpZDogMiB9O1xuICAgIG1hcC5zZXQob2JqMSwgMyk7XG4gICAgbWFwLnNldChvYmoyLCA0KTtcbiAgICBleHBlY3QobWFwLmdldChvYmoxKSkudG9CZSgzKTtcbiAgICBleHBlY3QobWFwLmdldChvYmoyKSkudG9CZSg0KTtcbiAgICBleHBlY3QobWFwLmhhcyhvYmoxKSkudG9CZSh0cnVlKTtcbiAgICAvLyBUZXN0IGRlbGV0ZSB3aXRoIHByaW1pdGl2ZSBrZXlcbiAgICBleHBlY3QobWFwLmRlbGV0ZShcImtleTFcIikpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KG1hcC5oYXMoXCJrZXkxXCIpKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QobWFwLmRlbGV0ZShcIm5vbmV4aXN0ZW50XCIpKS50b0JlKGZhbHNlKTtcbiAgICAvLyBUZXN0IGRlbGV0ZSB3aXRoIG9iamVjdCBrZXlcbiAgICBleHBlY3QobWFwLmRlbGV0ZShvYmoxKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QobWFwLmhhcyhvYmoxKSkudG9CZShmYWxzZSk7XG4gICAgLy8gVGVzdCBpdGVyYXRpb25cbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbShtYXApO1xuICAgIGV4cGVjdChlbnRyaWVzLmxlbmd0aCkudG9CZSgyKTtcbiAgICBleHBlY3QoZW50cmllcykudG9Db250YWluRXF1YWwoW1wia2V5MlwiLCAyXSk7XG4gICAgZXhwZWN0KGVudHJpZXMpLnRvQ29udGFpbkVxdWFsKFtvYmoyLCA0XSk7XG4gICAgLy8gVGVzdCBjb25zdHJ1Y3RvciB3aXRoIGVudHJpZXNcbiAgICBjb25zdCBpbml0aWFsRW50cmllcyA9IFtcbiAgICAgICAgW1wiaW5pdGlhbDFcIiwgMTBdLFxuICAgICAgICBbeyBpZDogMyB9LCAyMF1cbiAgICBdO1xuICAgIGNvbnN0IG1hcFdpdGhFbnRyaWVzID0gbmV3IE1heWJlV2Vha01hcChpbml0aWFsRW50cmllcyk7XG4gICAgZXhwZWN0KG1hcFdpdGhFbnRyaWVzLmdldChcImluaXRpYWwxXCIpKS50b0JlKDEwKTtcbiAgICBleHBlY3QobWFwV2l0aEVudHJpZXMuZ2V0KGluaXRpYWxFbnRyaWVzWzFdWzBdKSkudG9CZSgyMCk7XG59KTtcbi8qKlxuICogQSBtYXAgdGhhdCBzdG9yZXMgdmFsdWVzIGluZGV4ZWQgYnkgYW4gYXJyYXkgb2Yga2V5cy4gSWYgdGhlIGtleXMgYXJlIG9iamVjdHMgYW5kIHRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyBXZWFrUmVmcyxcbiAqIHRoZXkgYXJlIHN0b3JlZCBpbiBhIFdlYWtNYXAuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZXBlbmRlbmNpZXNNYXAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9pbm5lciA9IHsgbWFwOiBuZXcgTWF5YmVXZWFrTWFwKCksIGhhc1ZhbHVlOiBmYWxzZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgICAgICB0aGlzW19jXSA9IFwiRGVwZW5kZW5jaWVzTWFwXCI7XG4gICAgfVxuICAgIF92YWx1ZVRvUmVzdWx0KGlubmVyKSB7XG4gICAgICAgIGlmIChpbm5lci5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhpbm5lci52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3Vud3JhcEZyb21Jbm5lcihkZXBlbmRlbmNpZXMsIGlubmVyKSB7XG4gICAgICAgIGlmICgoZGVwZW5kZW5jaWVzLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZVRvUmVzdWx0KGlubmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIC4uLnJlc3RdID0gZGVwZW5kZW5jaWVzO1xuICAgICAgICAgICAgY29uc3QgbmV3SW5uZXIgPSBpbm5lci5tYXAuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAoIW5ld0lubmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcih1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Vud3JhcEZyb21Jbm5lcihyZXN0LCBuZXdJbm5lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3NldEluSW5uZXIoZGVwZW5kZW5jaWVzLCB2YWx1ZSwgaW5uZXIpIHtcbiAgICAgICAgaWYgKGRlcGVuZGVuY2llcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IHRoaXMuX3ZhbHVlVG9SZXN1bHQoaW5uZXIpO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICAgICAgICAgICAgaW5uZXIuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlubmVyLnZhbHVlID0gdmFsdWUuZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlubmVyLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaW5uZXIudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgW2tleSwgLi4ucmVzdF0gPSBkZXBlbmRlbmNpZXM7XG4gICAgICAgICAgICBsZXQgbmV3SW5uZXIgPSBpbm5lci5tYXAuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAoIW5ld0lubmVyKSB7XG4gICAgICAgICAgICAgICAgaW5uZXIubWFwLnNldChrZXksIG5ld0lubmVyID0geyBtYXA6IG5ldyBNYXliZVdlYWtNYXAoKSwgaGFzVmFsdWU6IGZhbHNlLCB2YWx1ZTogdW5kZWZpbmVkIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NldEluSW5uZXIocmVzdCwgdmFsdWUsIG5ld0lubmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAqX2l0ZXJhdGVJbm5lcihkZXBlbmRlbmNpZXMsIGlubmVyKSB7XG4gICAgICAgIGlmIChpbm5lci5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgeWllbGQgW2RlcGVuZGVuY2llcywgaW5uZXIudmFsdWVdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGlubmVyLm1hcCkge1xuICAgICAgICAgICAgeWllbGQqIHRoaXMuX2l0ZXJhdGVJbm5lcihbLi4uZGVwZW5kZW5jaWVzLCBrZXldLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0KGRlcGVuZGVuY2llcykge1xuICAgICAgICByZXR1cm4gUmVzdWx0Lm9yKHRoaXMuX3Vud3JhcEZyb21Jbm5lcihkZXBlbmRlbmNpZXMsIHRoaXMuX2lubmVyKSwgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgc2V0KGRlcGVuZGVuY2llcywgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2V0SW5Jbm5lcihkZXBlbmRlbmNpZXMsIFJlc3VsdC5vayh2YWx1ZSksIHRoaXMuX2lubmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRlbGV0ZShkZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldEluSW5uZXIoZGVwZW5kZW5jaWVzLCBSZXN1bHQuZXJyb3IodW5kZWZpbmVkKSwgdGhpcy5faW5uZXIpLnN0YXR1cyA9PT0gXCJva1wiO1xuICAgIH1cbiAgICBoYXMoZGVwZW5kZW5jaWVzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91bndyYXBGcm9tSW5uZXIoZGVwZW5kZW5jaWVzLCB0aGlzLl9pbm5lcikuc3RhdHVzID09PSBcIm9rXCI7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9pbm5lciA9IHsgbWFwOiBuZXcgTWF5YmVXZWFrTWFwKCksIGhhc1ZhbHVlOiBmYWxzZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHlpZWxkKiB0aGlzLl9pdGVyYXRlSW5uZXIoW10sIHRoaXMuX2lubmVyKTtcbiAgICB9XG59XG5fYyA9IFN5bWJvbC50b1N0cmluZ1RhZztcbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcIkRlcGVuZGVuY2llc01hcFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3QgYmFzaWMgZnVuY3Rpb25hbGl0eVxuICAgIGNvbnN0IG1hcCA9IG5ldyBEZXBlbmRlbmNpZXNNYXAoKTtcbiAgICAvLyBUZXN0IHNldCBhbmQgZ2V0XG4gICAgbWFwLnNldChbXCJrZXlcIiwgMV0sIFwidmFsdWUxXCIpO1xuICAgIGV4cGVjdChtYXAuZ2V0KFtcImtleVwiLCAxXSkpLnRvQmUoXCJ2YWx1ZTFcIik7XG4gICAgLy8gVGVzdCBoYXNcbiAgICBleHBlY3QobWFwLmhhcyhbXCJrZXlcIiwgMV0pKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChtYXAuaGFzKFtcImtleVwiLCAyXSkpLnRvQmUoZmFsc2UpO1xuICAgIC8vIFRlc3Qgd2l0aCBkaWZmZXJlbnQgZGVwZW5kZW5jaWVzXG4gICAgbWFwLnNldChbXCJrZXlcIiwgMl0sIFwidmFsdWUyXCIpO1xuICAgIGV4cGVjdChtYXAuZ2V0KFtcImtleVwiLCAyXSkpLnRvQmUoXCJ2YWx1ZTJcIik7XG4gICAgZXhwZWN0KG1hcC5nZXQoW1wia2V5XCIsIDFdKSkudG9CZShcInZhbHVlMVwiKTsgLy8gT3JpZ2luYWwgc3RpbGwgZXhpc3RzXG4gICAgLy8gVGVzdCBkZWxldGVcbiAgICBleHBlY3QobWFwLmRlbGV0ZShbXCJrZXlcIiwgMV0pKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChtYXAuaGFzKFtcImtleVwiLCAxXSkpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChtYXAuZ2V0KFtcImtleVwiLCAxXSkpLnRvQmVVbmRlZmluZWQoKTtcbiAgICBleHBlY3QobWFwLmhhcyhbXCJrZXlcIiwgMl0pKS50b0JlKHRydWUpOyAvLyBPdGhlciBrZXkgc3RpbGwgZXhpc3RzXG4gICAgLy8gVGVzdCBkZWxldGUgbm9uLWV4aXN0ZW50IGtleVxuICAgIGV4cGVjdChtYXAuZGVsZXRlKFtcIm5vbmV4aXN0ZW50XCIsIDFdKSkudG9CZShmYWxzZSk7XG4gICAgLy8gVGVzdCBjbGVhclxuICAgIG1hcC5jbGVhcigpO1xuICAgIGV4cGVjdChtYXAuaGFzKFtcImtleVwiLCAyXSkpLnRvQmUoZmFsc2UpO1xuICAgIC8vIFRlc3Qgd2l0aCBvYmplY3Qga2V5c1xuICAgIGNvbnN0IG9iak1hcCA9IG5ldyBEZXBlbmRlbmNpZXNNYXAoKTtcbiAgICBjb25zdCBvYmoxID0geyBpZDogMSB9O1xuICAgIGNvbnN0IG9iajIgPSB7IGlkOiAyIH07XG4gICAgb2JqTWFwLnNldChbb2JqMSwgMV0sIFwib2JqZWN0MVwiKTtcbiAgICBvYmpNYXAuc2V0KFtvYmoyLCAyXSwgXCJvYmplY3QyXCIpO1xuICAgIGV4cGVjdChvYmpNYXAuZ2V0KFtvYmoxLCAxXSkpLnRvQmUoXCJvYmplY3QxXCIpO1xuICAgIGV4cGVjdChvYmpNYXAuZ2V0KFtvYmoyLCAyXSkpLnRvQmUoXCJvYmplY3QyXCIpO1xuICAgIC8vIFRlc3QgaXRlcmF0aW9uXG4gICAgY29uc3QgaXRlck1hcCA9IG5ldyBEZXBlbmRlbmNpZXNNYXAoKTtcbiAgICBpdGVyTWFwLnNldChbXCJhXCJdLCAxKTtcbiAgICBpdGVyTWFwLnNldChbXCJiXCJdLCAyKTtcbiAgICBpdGVyTWFwLnNldChbXCJjXCJdLCAzKTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbShpdGVyTWFwKTtcbiAgICBleHBlY3QoZW50cmllcy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgZXhwZWN0KGVudHJpZXMpLnRvQ29udGFpbkVxdWFsKFtbXCJhXCJdLCAxXSk7XG4gICAgZXhwZWN0KGVudHJpZXMpLnRvQ29udGFpbkVxdWFsKFtbXCJiXCJdLCAyXSk7XG4gICAgZXhwZWN0KGVudHJpZXMpLnRvQ29udGFpbkVxdWFsKFtbXCJjXCJdLCAzXSk7XG59KTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/math.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/math.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   remainder: () => (/* binding */ remainder)\n/* harmony export */ });\n/**\n * Similar to the modulo operator, but always returns a positive number (even when the input is negative).\n */\nfunction remainder(n, d) {\n    return ((n % d) + Math.abs(d)) % d;\n}\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9tYXRoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxVQVdFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcdXRpbHNcXG1hdGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTaW1pbGFyIHRvIHRoZSBtb2R1bG8gb3BlcmF0b3IsIGJ1dCBhbHdheXMgcmV0dXJucyBhIHBvc2l0aXZlIG51bWJlciAoZXZlbiB3aGVuIHRoZSBpbnB1dCBpcyBuZWdhdGl2ZSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1haW5kZXIobiwgZCkge1xuICAgIHJldHVybiAoKG4gJSBkKSArIE1hdGguYWJzKGQpKSAlIGQ7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJyZW1haW5kZXJcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBleHBlY3QocmVtYWluZGVyKDEwLCAzKSkudG9CZSgxKTtcbiAgICBleHBlY3QocmVtYWluZGVyKDEwLCA1KSkudG9CZSgwKTtcbiAgICBleHBlY3QocmVtYWluZGVyKDEwLCA3KSkudG9CZSgzKTtcbiAgICAvLyBUZXN0IHdpdGggbmVnYXRpdmUgbnVtYmVyc1xuICAgIGV4cGVjdChyZW1haW5kZXIoLTEwLCAzKSkudG9CZSgyKTtcbiAgICBleHBlY3QocmVtYWluZGVyKC01LCAyKSkudG9CZSgxKTtcbiAgICBleHBlY3QocmVtYWluZGVyKC03LCA0KSkudG9CZSgxKTtcbiAgICAvLyBUZXN0IHdpdGggZGVjaW1hbCBudW1iZXJzXG4gICAgZXhwZWN0KHJlbWFpbmRlcigxMC41LCAzKSkudG9CZUNsb3NlVG8oMS41KTtcbiAgICBleHBlY3QocmVtYWluZGVyKC0xMC41LCAzKSkudG9CZUNsb3NlVG8oMS41KTtcbn0pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/math.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/objects.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deepPlainClone: () => (/* binding */ deepPlainClone),\n/* harmony export */   deepPlainEquals: () => (/* binding */ deepPlainEquals),\n/* harmony export */   filterUndefined: () => (/* binding */ filterUndefined),\n/* harmony export */   filterUndefinedOrNull: () => (/* binding */ filterUndefinedOrNull),\n/* harmony export */   isNotNull: () => (/* binding */ isNotNull),\n/* harmony export */   omit: () => (/* binding */ omit),\n/* harmony export */   pick: () => (/* binding */ pick),\n/* harmony export */   split: () => (/* binding */ split),\n/* harmony export */   typedAssign: () => (/* binding */ typedAssign),\n/* harmony export */   typedEntries: () => (/* binding */ typedEntries),\n/* harmony export */   typedFromEntries: () => (/* binding */ typedFromEntries),\n/* harmony export */   typedKeys: () => (/* binding */ typedKeys),\n/* harmony export */   typedValues: () => (/* binding */ typedValues)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n\nfunction isNotNull(value) {\n    return value !== null && value !== undefined;\n}\n undefined;\n/**\n * Assumes both objects are primitives, arrays, or non-function plain objects, and compares them deeply.\n *\n * Note that since they are assumed to be plain objects, this function does not compare prototypes.\n */\nfunction deepPlainEquals(obj1, obj2, options = {}) {\n    if (typeof obj1 !== typeof obj2)\n        return false;\n    if (obj1 === obj2)\n        return true;\n    switch (typeof obj1) {\n        case 'object': {\n            if (!obj1 || !obj2)\n                return false;\n            if (Array.isArray(obj1) || Array.isArray(obj2)) {\n                if (!Array.isArray(obj1) || !Array.isArray(obj2))\n                    return false;\n                if (obj1.length !== obj2.length)\n                    return false;\n                return obj1.every((v, i) => deepPlainEquals(v, obj2[i], options));\n            }\n            const entries1 = Object.entries(obj1).filter(([k, v]) => !options.ignoreUndefinedValues || v !== undefined);\n            const entries2 = Object.entries(obj2).filter(([k, v]) => !options.ignoreUndefinedValues || v !== undefined);\n            if (entries1.length !== entries2.length)\n                return false;\n            return entries1.every(([k, v1]) => {\n                const e2 = entries2.find(([k2]) => k === k2);\n                if (!e2)\n                    return false;\n                return deepPlainEquals(v1, e2[1], options);\n            });\n        }\n        case 'undefined':\n        case 'string':\n        case 'number':\n        case 'boolean':\n        case 'bigint':\n        case 'symbol':\n        case 'function': {\n            return false;\n        }\n        default: {\n            throw new Error(\"Unexpected typeof \" + typeof obj1);\n        }\n    }\n}\n undefined;\nfunction deepPlainClone(obj) {\n    if (typeof obj === 'function')\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainClone does not support functions\");\n    if (typeof obj === 'symbol')\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainClone does not support symbols\");\n    if (typeof obj !== 'object' || !obj)\n        return obj;\n    if (Array.isArray(obj))\n        return obj.map(deepPlainClone);\n    return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, deepPlainClone(v)]));\n}\n undefined;\nfunction typedEntries(obj) {\n    return Object.entries(obj);\n}\n undefined;\nfunction typedFromEntries(entries) {\n    return Object.fromEntries(entries);\n}\n undefined;\nfunction typedKeys(obj) {\n    return Object.keys(obj);\n}\n undefined;\nfunction typedValues(obj) {\n    return Object.values(obj);\n}\n undefined;\nfunction typedAssign(target, source) {\n    return Object.assign(target, source);\n}\n undefined;\n/**\n * Returns a new object with all undefined values removed. Useful when spreading optional parameters on an object, as\n * TypeScript's `Partial<XYZ>` type allows `undefined` values.\n */\nfunction filterUndefined(obj) {\n    return Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== undefined));\n}\n undefined;\n/**\n * Returns a new object with all undefined and null values removed. Useful when spreading optional parameters on an object, as\n * TypeScript's `Partial<XYZ>` type allows `undefined` values.\n */\nfunction filterUndefinedOrNull(obj) {\n    return Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== undefined && v !== null));\n}\n undefined;\nfunction pick(obj, keys) {\n    return Object.fromEntries(Object.entries(obj).filter(([k]) => keys.includes(k)));\n}\n undefined;\nfunction omit(obj, keys) {\n    return Object.fromEntries(Object.entries(obj).filter(([k]) => !keys.includes(k)));\n}\n undefined;\nfunction split(obj, keys) {\n    return [pick(obj, keys), omit(obj, keys)];\n}\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9vYmplY3RzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ3hDO0FBQ1A7QUFDQTtBQUNBLFVBUUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08saURBQWlEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQW9CRTtBQUNLO0FBQ1A7QUFDQSxrQkFBa0Isd0RBQW1CO0FBQ3JDO0FBQ0Esa0JBQWtCLHdEQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQTBCRTtBQUNLO0FBQ1A7QUFDQTtBQUNBLFVBWUU7QUFDSztBQUNQO0FBQ0E7QUFDQSxVQWVFO0FBQ0s7QUFDUDtBQUNBO0FBQ0EsVUFPRTtBQUNLO0FBQ1A7QUFDQTtBQUNBLFVBY0U7QUFDSztBQUNQO0FBQ0E7QUFDQSxVQWdCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsVUFPRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsVUFHRTtBQUNLO0FBQ1A7QUFDQTtBQUNBLFVBT0U7QUFDSztBQUNQO0FBQ0E7QUFDQSxVQU9FO0FBQ0s7QUFDUDtBQUNBO0FBQ0EsVUFPRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFjay1zaGFyZWRcXGRpc3RcXHV0aWxzXFxvYmplY3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnNcIjtcbmV4cG9ydCBmdW5jdGlvbiBpc05vdE51bGwodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImlzTm90TnVsbFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdChpc05vdE51bGwobnVsbCkpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChpc05vdE51bGwodW5kZWZpbmVkKSkudG9CZShmYWxzZSk7XG4gICAgZXhwZWN0KGlzTm90TnVsbCgwKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoaXNOb3ROdWxsKFwiXCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc05vdE51bGwoZmFsc2UpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc05vdE51bGwoe30pKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc05vdE51bGwoW10pKS50b0JlKHRydWUpO1xufSk7XG4vKipcbiAqIEFzc3VtZXMgYm90aCBvYmplY3RzIGFyZSBwcmltaXRpdmVzLCBhcnJheXMsIG9yIG5vbi1mdW5jdGlvbiBwbGFpbiBvYmplY3RzLCBhbmQgY29tcGFyZXMgdGhlbSBkZWVwbHkuXG4gKlxuICogTm90ZSB0aGF0IHNpbmNlIHRoZXkgYXJlIGFzc3VtZWQgdG8gYmUgcGxhaW4gb2JqZWN0cywgdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBjb21wYXJlIHByb3RvdHlwZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWVwUGxhaW5FcXVhbHMob2JqMSwgb2JqMiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKHR5cGVvZiBvYmoxICE9PSB0eXBlb2Ygb2JqMilcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChvYmoxID09PSBvYmoyKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBzd2l0Y2ggKHR5cGVvZiBvYmoxKSB7XG4gICAgICAgIGNhc2UgJ29iamVjdCc6IHtcbiAgICAgICAgICAgIGlmICghb2JqMSB8fCAhb2JqMilcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoxKSB8fCBBcnJheS5pc0FycmF5KG9iajIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iajEpIHx8ICFBcnJheS5pc0FycmF5KG9iajIpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKG9iajEubGVuZ3RoICE9PSBvYmoyLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmoxLmV2ZXJ5KCh2LCBpKSA9PiBkZWVwUGxhaW5FcXVhbHModiwgb2JqMltpXSwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZW50cmllczEgPSBPYmplY3QuZW50cmllcyhvYmoxKS5maWx0ZXIoKFtrLCB2XSkgPT4gIW9wdGlvbnMuaWdub3JlVW5kZWZpbmVkVmFsdWVzIHx8IHYgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBjb25zdCBlbnRyaWVzMiA9IE9iamVjdC5lbnRyaWVzKG9iajIpLmZpbHRlcigoW2ssIHZdKSA9PiAhb3B0aW9ucy5pZ25vcmVVbmRlZmluZWRWYWx1ZXMgfHwgdiAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmIChlbnRyaWVzMS5sZW5ndGggIT09IGVudHJpZXMyLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gZW50cmllczEuZXZlcnkoKFtrLCB2MV0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlMiA9IGVudHJpZXMyLmZpbmQoKFtrMl0pID0+IGsgPT09IGsyKTtcbiAgICAgICAgICAgICAgICBpZiAoIWUyKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZXBQbGFpbkVxdWFscyh2MSwgZTJbMV0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgIGNhc2UgJ2JpZ2ludCc6XG4gICAgICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzoge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgdHlwZW9mIFwiICsgdHlwZW9mIG9iajEpO1xuICAgICAgICB9XG4gICAgfVxufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiZGVlcFBsYWluRXF1YWxzXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gU2ltcGxlIHZhbHVlc1xuICAgIGV4cGVjdChkZWVwUGxhaW5FcXVhbHMoMSwgMSkpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGRlZXBQbGFpbkVxdWFscyhcInRlc3RcIiwgXCJ0ZXN0XCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChkZWVwUGxhaW5FcXVhbHMoMSwgMikpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChkZWVwUGxhaW5FcXVhbHMoXCJ0ZXN0XCIsIFwib3RoZXJcIikpLnRvQmUoZmFsc2UpO1xuICAgIC8vIEFycmF5c1xuICAgIGV4cGVjdChkZWVwUGxhaW5FcXVhbHMoWzEsIDIsIDNdLCBbMSwgMiwgM10pKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChkZWVwUGxhaW5FcXVhbHMoWzEsIDIsIDNdLCBbMSwgMiwgNF0pKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoZGVlcFBsYWluRXF1YWxzKFsxLCAyLCAzXSwgWzEsIDJdKSkudG9CZShmYWxzZSk7XG4gICAgLy8gT2JqZWN0c1xuICAgIGV4cGVjdChkZWVwUGxhaW5FcXVhbHMoeyBhOiAxLCBiOiAyIH0sIHsgYTogMSwgYjogMiB9KSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoZGVlcFBsYWluRXF1YWxzKHsgYTogMSwgYjogMiB9LCB7IGE6IDEsIGI6IDMgfSkpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChkZWVwUGxhaW5FcXVhbHMoeyBhOiAxLCBiOiAyIH0sIHsgYTogMSB9KSkudG9CZShmYWxzZSk7XG4gICAgLy8gTmVzdGVkIHN0cnVjdHVyZXNcbiAgICBleHBlY3QoZGVlcFBsYWluRXF1YWxzKHsgYTogMSwgYjogWzEsIDIsIHsgYzogMyB9XSB9LCB7IGE6IDEsIGI6IFsxLCAyLCB7IGM6IDMgfV0gfSkpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGRlZXBQbGFpbkVxdWFscyh7IGE6IDEsIGI6IFsxLCAyLCB7IGM6IDMgfV0gfSwgeyBhOiAxLCBiOiBbMSwgMiwgeyBjOiA0IH1dIH0pKS50b0JlKGZhbHNlKTtcbiAgICAvLyBXaXRoIG9wdGlvbnNcbiAgICBleHBlY3QoZGVlcFBsYWluRXF1YWxzKHsgYTogMSwgYjogdW5kZWZpbmVkIH0sIHsgYTogMSB9LCB7IGlnbm9yZVVuZGVmaW5lZFZhbHVlczogdHJ1ZSB9KSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoZGVlcFBsYWluRXF1YWxzKHsgYTogMSwgYjogdW5kZWZpbmVkIH0sIHsgYTogMSB9KSkudG9CZShmYWxzZSk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBkZWVwUGxhaW5DbG9uZShvYmopIHtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJkZWVwUGxhaW5DbG9uZSBkb2VzIG5vdCBzdXBwb3J0IGZ1bmN0aW9uc1wiKTtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N5bWJvbCcpXG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiZGVlcFBsYWluQ2xvbmUgZG9lcyBub3Qgc3VwcG9ydCBzeW1ib2xzXCIpO1xuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCAhb2JqKVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpXG4gICAgICAgIHJldHVybiBvYmoubWFwKGRlZXBQbGFpbkNsb25lKTtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikubWFwKChbaywgdl0pID0+IFtrLCBkZWVwUGxhaW5DbG9uZSh2KV0pKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImRlZXBQbGFpbkNsb25lXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gUHJpbWl0aXZlIHZhbHVlc1xuICAgIGV4cGVjdChkZWVwUGxhaW5DbG9uZSgxKSkudG9CZSgxKTtcbiAgICBleHBlY3QoZGVlcFBsYWluQ2xvbmUoXCJ0ZXN0XCIpKS50b0JlKFwidGVzdFwiKTtcbiAgICBleHBlY3QoZGVlcFBsYWluQ2xvbmUobnVsbCkpLnRvQmUobnVsbCk7XG4gICAgZXhwZWN0KGRlZXBQbGFpbkNsb25lKHVuZGVmaW5lZCkpLnRvQmUodW5kZWZpbmVkKTtcbiAgICAvLyBBcnJheXNcbiAgICBjb25zdCBhcnIgPSBbMSwgMiwgM107XG4gICAgY29uc3QgY2xvbmVkQXJyID0gZGVlcFBsYWluQ2xvbmUoYXJyKTtcbiAgICBleHBlY3QoY2xvbmVkQXJyKS50b0VxdWFsKGFycik7XG4gICAgZXhwZWN0KGNsb25lZEFycikubm90LnRvQmUoYXJyKTsgLy8gRGlmZmVyZW50IHJlZmVyZW5jZVxuICAgIC8vIE9iamVjdHNcbiAgICBjb25zdCBvYmogPSB7IGE6IDEsIGI6IDIgfTtcbiAgICBjb25zdCBjbG9uZWRPYmogPSBkZWVwUGxhaW5DbG9uZShvYmopO1xuICAgIGV4cGVjdChjbG9uZWRPYmopLnRvRXF1YWwob2JqKTtcbiAgICBleHBlY3QoY2xvbmVkT2JqKS5ub3QudG9CZShvYmopOyAvLyBEaWZmZXJlbnQgcmVmZXJlbmNlXG4gICAgLy8gTmVzdGVkIHN0cnVjdHVyZXNcbiAgICBjb25zdCBuZXN0ZWQgPSB7IGE6IDEsIGI6IFsxLCAyLCB7IGM6IDMgfV0gfTtcbiAgICBjb25zdCBjbG9uZWROZXN0ZWQgPSBkZWVwUGxhaW5DbG9uZShuZXN0ZWQpO1xuICAgIGV4cGVjdChjbG9uZWROZXN0ZWQpLnRvRXF1YWwobmVzdGVkKTtcbiAgICBleHBlY3QoY2xvbmVkTmVzdGVkKS5ub3QudG9CZShuZXN0ZWQpOyAvLyBEaWZmZXJlbnQgcmVmZXJlbmNlXG4gICAgZXhwZWN0KGNsb25lZE5lc3RlZC5iKS5ub3QudG9CZShuZXN0ZWQuYik7IC8vIERpZmZlcmVudCByZWZlcmVuY2UgZm9yIG5lc3RlZCBhcnJheVxuICAgIGV4cGVjdChjbG9uZWROZXN0ZWQuYlsyXSkubm90LnRvQmUobmVzdGVkLmJbMl0pOyAvLyBEaWZmZXJlbnQgcmVmZXJlbmNlIGZvciBuZXN0ZWQgb2JqZWN0XG4gICAgLy8gRXJyb3IgY2FzZXNcbiAgICBleHBlY3QoKCkgPT4gZGVlcFBsYWluQ2xvbmUoKCkgPT4geyB9KSkudG9UaHJvdygpO1xuICAgIGV4cGVjdCgoKSA9PiBkZWVwUGxhaW5DbG9uZShTeW1ib2woKSkpLnRvVGhyb3coKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHR5cGVkRW50cmllcyhvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInR5cGVkRW50cmllc1wiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdCh0eXBlZEVudHJpZXMoe30pKS50b0VxdWFsKFtdKTtcbiAgICBleHBlY3QodHlwZWRFbnRyaWVzKHsgYTogMSwgYjogMiB9KSkudG9FcXVhbChbW1wiYVwiLCAxXSwgW1wiYlwiLCAyXV0pO1xuICAgIGV4cGVjdCh0eXBlZEVudHJpZXMoeyBhOiBcImhlbGxvXCIsIGI6IHRydWUsIGM6IG51bGwgfSkpLnRvRXF1YWwoW1tcImFcIiwgXCJoZWxsb1wiXSwgW1wiYlwiLCB0cnVlXSwgW1wiY1wiLCBudWxsXV0pO1xuICAgIC8vIFRlc3Qgd2l0aCBvYmplY3QgY29udGFpbmluZyBtZXRob2RzXG4gICAgY29uc3Qgb2JqV2l0aE1ldGhvZCA9IHsgYTogMSwgYjogKCkgPT4gXCJ0ZXN0XCIgfTtcbiAgICBjb25zdCBlbnRyaWVzID0gdHlwZWRFbnRyaWVzKG9ialdpdGhNZXRob2QpO1xuICAgIGV4cGVjdChlbnRyaWVzLmxlbmd0aCkudG9CZSgyKTtcbiAgICBleHBlY3QoZW50cmllc1swXVswXSkudG9CZShcImFcIik7XG4gICAgZXhwZWN0KGVudHJpZXNbMF1bMV0pLnRvQmUoMSk7XG4gICAgZXhwZWN0KGVudHJpZXNbMV1bMF0pLnRvQmUoXCJiXCIpO1xuICAgIGV4cGVjdCh0eXBlb2YgZW50cmllc1sxXVsxXSkudG9CZShcImZ1bmN0aW9uXCIpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gdHlwZWRGcm9tRW50cmllcyhlbnRyaWVzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhlbnRyaWVzKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInR5cGVkRnJvbUVudHJpZXNcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBleHBlY3QodHlwZWRGcm9tRW50cmllcyhbXSkpLnRvRXF1YWwoe30pO1xuICAgIGV4cGVjdCh0eXBlZEZyb21FbnRyaWVzKFtbXCJhXCIsIDFdLCBbXCJiXCIsIDJdXSkpLnRvRXF1YWwoeyBhOiAxLCBiOiAyIH0pO1xuICAgIC8vIFRlc3Qgd2l0aCBtaXhlZCB0eXBlcyAodXNpbmcgdHlwZSBhc3NlcnRpb24pXG4gICAgY29uc3QgbWl4ZWRFbnRyaWVzID0gW1tcImFcIiwgXCJoZWxsb1wiXSwgW1wiYlwiLCB0cnVlXSwgW1wiY1wiLCBudWxsXV07XG4gICAgY29uc3QgbWl4ZWRPYmogPSB0eXBlZEZyb21FbnRyaWVzKG1peGVkRW50cmllcyk7XG4gICAgZXhwZWN0KG1peGVkT2JqKS50b0VxdWFsKHsgYTogXCJoZWxsb1wiLCBiOiB0cnVlLCBjOiBudWxsIH0pO1xuICAgIC8vIFRlc3Qgd2l0aCBmdW5jdGlvbiB2YWx1ZXNcbiAgICBjb25zdCBmbiA9ICgpID0+IFwidGVzdFwiO1xuICAgIGNvbnN0IGZuRW50cmllcyA9IFtbXCJhXCIsIDFdLCBbXCJiXCIsIGZuXV07XG4gICAgY29uc3Qgb2JqID0gdHlwZWRGcm9tRW50cmllcyhmbkVudHJpZXMpO1xuICAgIGV4cGVjdChvYmouYSkudG9CZSgxKTtcbiAgICBleHBlY3QodHlwZW9mIG9iai5iKS50b0JlKFwiZnVuY3Rpb25cIik7XG4gICAgLy8gVHlwZSBhc3NlcnRpb24gbmVlZGVkIGZvciB0aGUgZnVuY3Rpb24gY2FsbFxuICAgIGV4cGVjdChvYmouYigpKS50b0JlKFwidGVzdFwiKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHR5cGVkS2V5cyhvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInR5cGVkS2V5c1wiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdCh0eXBlZEtleXMoe30pKS50b0VxdWFsKFtdKTtcbiAgICBleHBlY3QodHlwZWRLZXlzKHsgYTogMSwgYjogMiB9KSkudG9FcXVhbChbXCJhXCIsIFwiYlwiXSk7XG4gICAgZXhwZWN0KHR5cGVkS2V5cyh7IGE6IFwiaGVsbG9cIiwgYjogdHJ1ZSwgYzogbnVsbCB9KSkudG9FcXVhbChbXCJhXCIsIFwiYlwiLCBcImNcIl0pO1xuICAgIC8vIFRlc3Qgd2l0aCBvYmplY3QgY29udGFpbmluZyBtZXRob2RzXG4gICAgY29uc3Qgb2JqV2l0aE1ldGhvZCA9IHsgYTogMSwgYjogKCkgPT4gXCJ0ZXN0XCIgfTtcbiAgICBleHBlY3QodHlwZWRLZXlzKG9ialdpdGhNZXRob2QpKS50b0VxdWFsKFtcImFcIiwgXCJiXCJdKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHR5cGVkVmFsdWVzKG9iaikge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKG9iaik7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJ0eXBlZFZhbHVlc1wiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdCh0eXBlZFZhbHVlcyh7fSkpLnRvRXF1YWwoW10pO1xuICAgIGV4cGVjdCh0eXBlZFZhbHVlcyh7IGE6IDEsIGI6IDIgfSkpLnRvRXF1YWwoWzEsIDJdKTtcbiAgICBjb25zdCBtaXhlZE9iaiA9IHsgYTogXCJoZWxsb1wiLCBiOiB0cnVlLCBjOiBudWxsIH07XG4gICAgZXhwZWN0KHR5cGVkVmFsdWVzKG1peGVkT2JqKSkudG9FcXVhbChbXCJoZWxsb1wiLCB0cnVlLCBudWxsXSk7XG4gICAgY29uc3QgZm4gPSAoKSA9PiBcInRlc3RcIjtcbiAgICBjb25zdCBvYmpXaXRoTWV0aG9kID0geyBhOiAxLCBiOiBmbiB9O1xuICAgIGNvbnN0IHZhbHVlcyA9IHR5cGVkVmFsdWVzKG9ialdpdGhNZXRob2QpO1xuICAgIGV4cGVjdCh2YWx1ZXMubGVuZ3RoKS50b0JlKDIpO1xuICAgIGV4cGVjdCh2YWx1ZXNbMF0pLnRvQmUoMSk7XG4gICAgZXhwZWN0KHR5cGVvZiB2YWx1ZXNbMV0pLnRvQmUoXCJmdW5jdGlvblwiKTtcbiAgICAvLyBOZWVkIHRvIGNhc3QgdG8gdGhlIGNvcnJlY3QgdHlwZVxuICAgIGNvbnN0IGZuVmFsdWUgPSB2YWx1ZXNbMV07XG4gICAgZXhwZWN0KGZuVmFsdWUoKSkudG9CZShcInRlc3RcIik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB0eXBlZEFzc2lnbih0YXJnZXQsIHNvdXJjZSkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInR5cGVkQXNzaWduXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIGVtcHR5IG9iamVjdHNcbiAgICBjb25zdCBlbXB0eVRhcmdldCA9IHt9O1xuICAgIGNvbnN0IGVtcHR5UmVzdWx0ID0gdHlwZWRBc3NpZ24oZW1wdHlUYXJnZXQsIHsgYTogMSB9KTtcbiAgICBleHBlY3QoZW1wdHlSZXN1bHQpLnRvRXF1YWwoeyBhOiAxIH0pO1xuICAgIGV4cGVjdChlbXB0eVJlc3VsdCkudG9CZShlbXB0eVRhcmdldCk7IC8vIFNhbWUgcmVmZXJlbmNlXG4gICAgLy8gVGVzdCB3aXRoIG5vbi1lbXB0eSB0YXJnZXRcbiAgICBjb25zdCB0YXJnZXQgPSB7IGE6IDEsIGI6IDIgfTtcbiAgICBjb25zdCByZXN1bHQgPSB0eXBlZEFzc2lnbih0YXJnZXQsIHsgYzogMywgZDogNCB9KTtcbiAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHsgYTogMSwgYjogMiwgYzogMywgZDogNCB9KTtcbiAgICBleHBlY3QocmVzdWx0KS50b0JlKHRhcmdldCk7IC8vIFNhbWUgcmVmZXJlbmNlXG4gICAgLy8gVGVzdCB3aXRoIG92ZXJsYXBwaW5nIHByb3BlcnRpZXNcbiAgICBjb25zdCB0YXJnZXRXaXRoT3ZlcmxhcCA9IHsgYTogMSwgYjogMiB9O1xuICAgIGNvbnN0IHJlc3VsdFdpdGhPdmVybGFwID0gdHlwZWRBc3NpZ24odGFyZ2V0V2l0aE92ZXJsYXAsIHsgYjogMywgYzogNCB9KTtcbiAgICBleHBlY3QocmVzdWx0V2l0aE92ZXJsYXApLnRvRXF1YWwoeyBhOiAxLCBiOiAzLCBjOiA0IH0pO1xuICAgIGV4cGVjdChyZXN1bHRXaXRoT3ZlcmxhcCkudG9CZSh0YXJnZXRXaXRoT3ZlcmxhcCk7IC8vIFNhbWUgcmVmZXJlbmNlXG59KTtcbi8qKlxuICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCBhbGwgdW5kZWZpbmVkIHZhbHVlcyByZW1vdmVkLiBVc2VmdWwgd2hlbiBzcHJlYWRpbmcgb3B0aW9uYWwgcGFyYW1ldGVycyBvbiBhbiBvYmplY3QsIGFzXG4gKiBUeXBlU2NyaXB0J3MgYFBhcnRpYWw8WFlaPmAgdHlwZSBhbGxvd3MgYHVuZGVmaW5lZGAgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyVW5kZWZpbmVkKG9iaikge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFssIHZdKSA9PiB2ICE9PSB1bmRlZmluZWQpKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImZpbHRlclVuZGVmaW5lZFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdChmaWx0ZXJVbmRlZmluZWQoe30pKS50b0VxdWFsKHt9KTtcbiAgICBleHBlY3QoZmlsdGVyVW5kZWZpbmVkKHsgYTogMSwgYjogMiB9KSkudG9FcXVhbCh7IGE6IDEsIGI6IDIgfSk7XG4gICAgZXhwZWN0KGZpbHRlclVuZGVmaW5lZCh7IGE6IDEsIGI6IHVuZGVmaW5lZCB9KSkudG9FcXVhbCh7IGE6IDEgfSk7XG4gICAgZXhwZWN0KGZpbHRlclVuZGVmaW5lZCh7IGE6IHVuZGVmaW5lZCwgYjogdW5kZWZpbmVkIH0pKS50b0VxdWFsKHt9KTtcbiAgICBleHBlY3QoZmlsdGVyVW5kZWZpbmVkKHsgYTogbnVsbCwgYjogdW5kZWZpbmVkIH0pKS50b0VxdWFsKHsgYTogbnVsbCB9KTtcbiAgICBleHBlY3QoZmlsdGVyVW5kZWZpbmVkKHsgYTogMCwgYjogXCJcIiwgYzogZmFsc2UsIGQ6IHVuZGVmaW5lZCB9KSkudG9FcXVhbCh7IGE6IDAsIGI6IFwiXCIsIGM6IGZhbHNlIH0pO1xufSk7XG4vKipcbiAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggYWxsIHVuZGVmaW5lZCBhbmQgbnVsbCB2YWx1ZXMgcmVtb3ZlZC4gVXNlZnVsIHdoZW4gc3ByZWFkaW5nIG9wdGlvbmFsIHBhcmFtZXRlcnMgb24gYW4gb2JqZWN0LCBhc1xuICogVHlwZVNjcmlwdCdzIGBQYXJ0aWFsPFhZWj5gIHR5cGUgYWxsb3dzIGB1bmRlZmluZWRgIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclVuZGVmaW5lZE9yTnVsbChvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKChbLCB2XSkgPT4gdiAhPT0gdW5kZWZpbmVkICYmIHYgIT09IG51bGwpKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImZpbHRlclVuZGVmaW5lZE9yTnVsbFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdChmaWx0ZXJVbmRlZmluZWRPck51bGwoe30pKS50b0VxdWFsKHt9KTtcbiAgICBleHBlY3QoZmlsdGVyVW5kZWZpbmVkT3JOdWxsKHsgYTogMSwgYjogMiB9KSkudG9FcXVhbCh7IGE6IDEsIGI6IDIgfSk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBwaWNrKG9iaiwga2V5cykge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFtrXSkgPT4ga2V5cy5pbmNsdWRlcyhrKSkpO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwicGlja1wiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGNvbnN0IG9iaiA9IHsgYTogMSwgYjogMiwgYzogMywgZDogNCB9O1xuICAgIGV4cGVjdChwaWNrKG9iaiwgW1wiYVwiLCBcImNcIl0pKS50b0VxdWFsKHsgYTogMSwgYzogMyB9KTtcbiAgICBleHBlY3QocGljayhvYmosIFtdKSkudG9FcXVhbCh7fSk7XG4gICAgZXhwZWN0KHBpY2sob2JqLCBbXCJhXCIsIFwiZVwiXSkpLnRvRXF1YWwoeyBhOiAxIH0pO1xuICAgIC8vIFVzZSB0eXBlIGFzc2VydGlvbiBmb3IgZW1wdHkgb2JqZWN0IHRvIGF2b2lkIFR5cGVTY3JpcHQgZXJyb3JcbiAgICBleHBlY3QocGljayh7fSwgW1wiYVwiXSkpLnRvRXF1YWwoe30pO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gb21pdChvYmosIGtleXMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKChba10pID0+ICFrZXlzLmluY2x1ZGVzKGspKSk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJvbWl0XCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgY29uc3Qgb2JqID0geyBhOiAxLCBiOiAyLCBjOiAzLCBkOiA0IH07XG4gICAgZXhwZWN0KG9taXQob2JqLCBbXCJhXCIsIFwiY1wiXSkpLnRvRXF1YWwoeyBiOiAyLCBkOiA0IH0pO1xuICAgIGV4cGVjdChvbWl0KG9iaiwgW10pKS50b0VxdWFsKG9iaik7XG4gICAgZXhwZWN0KG9taXQob2JqLCBbXCJhXCIsIFwiZVwiXSkpLnRvRXF1YWwoeyBiOiAyLCBjOiAzLCBkOiA0IH0pO1xuICAgIC8vIFVzZSB0eXBlIGFzc2VydGlvbiBmb3IgZW1wdHkgb2JqZWN0IHRvIGF2b2lkIFR5cGVTY3JpcHQgZXJyb3JcbiAgICBleHBlY3Qob21pdCh7fSwgW1wiYVwiXSkpLnRvRXF1YWwoe30pO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gc3BsaXQob2JqLCBrZXlzKSB7XG4gICAgcmV0dXJuIFtwaWNrKG9iaiwga2V5cyksIG9taXQob2JqLCBrZXlzKV07XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJzcGxpdFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGNvbnN0IG9iaiA9IHsgYTogMSwgYjogMiwgYzogMywgZDogNCB9O1xuICAgIGV4cGVjdChzcGxpdChvYmosIFtcImFcIiwgXCJjXCJdKSkudG9FcXVhbChbeyBhOiAxLCBjOiAzIH0sIHsgYjogMiwgZDogNCB9XSk7XG4gICAgZXhwZWN0KHNwbGl0KG9iaiwgW10pKS50b0VxdWFsKFt7fSwgb2JqXSk7XG4gICAgZXhwZWN0KHNwbGl0KG9iaiwgW1wiYVwiLCBcImVcIl0pKS50b0VxdWFsKFt7IGE6IDEgfSwgeyBiOiAyLCBjOiAzLCBkOiA0IH1dKTtcbiAgICAvLyBVc2UgdHlwZSBhc3NlcnRpb24gZm9yIGVtcHR5IG9iamVjdCB0byBhdm9pZCBUeXBlU2NyaXB0IGVycm9yXG4gICAgZXhwZWN0KHNwbGl0KHt9LCBbXCJhXCJdKSkudG9FcXVhbChbe30sIHt9XSk7XG59KTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/promises.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPromise: () => (/* binding */ createPromise),\n/* harmony export */   ignoreUnhandledRejection: () => (/* binding */ ignoreUnhandledRejection),\n/* harmony export */   neverResolve: () => (/* binding */ neverResolve),\n/* harmony export */   pending: () => (/* binding */ pending),\n/* harmony export */   rateLimited: () => (/* binding */ rateLimited),\n/* harmony export */   rejected: () => (/* binding */ rejected),\n/* harmony export */   resolved: () => (/* binding */ resolved),\n/* harmony export */   runAsynchronously: () => (/* binding */ runAsynchronously),\n/* harmony export */   runAsynchronouslyWithAlert: () => (/* binding */ runAsynchronouslyWithAlert),\n/* harmony export */   throttled: () => (/* binding */ throttled),\n/* harmony export */   timeout: () => (/* binding */ timeout),\n/* harmony export */   timeoutThrow: () => (/* binding */ timeoutThrow),\n/* harmony export */   wait: () => (/* binding */ wait),\n/* harmony export */   waitUntil: () => (/* binding */ waitUntil)\n/* harmony export */ });\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! .. */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/index.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _maps__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./maps */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js\");\n/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _uuids__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./uuids */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js\");\n\n\n\n\n\nfunction createPromise(callback) {\n    let status = \"pending\";\n    let valueOrReason = undefined;\n    let resolve = null;\n    let reject = null;\n    const promise = new Promise((res, rej) => {\n        resolve = (value) => {\n            if (status !== \"pending\")\n                return;\n            status = \"fulfilled\";\n            valueOrReason = value;\n            res(value);\n        };\n        reject = (reason) => {\n            if (status !== \"pending\")\n                return;\n            status = \"rejected\";\n            valueOrReason = reason;\n            rej(reason);\n        };\n    });\n    callback(resolve, reject);\n    return Object.assign(promise, {\n        status: status,\n        ...status === \"fulfilled\" ? { value: valueOrReason } : {},\n        ...status === \"rejected\" ? { reason: valueOrReason } : {},\n    });\n}\n undefined;\nlet resolvedCache = null;\n/**\n * Like Promise.resolve(...), but also adds the status and value properties for use with React's `use` hook, and caches\n * the value so that invoking `resolved` twice returns the same promise.\n */\nfunction resolved(value) {\n    resolvedCache ??= new _maps__WEBPACK_IMPORTED_MODULE_2__.DependenciesMap();\n    if (resolvedCache.has([value])) {\n        return resolvedCache.get([value]);\n    }\n    const res = Object.assign(Promise.resolve(value), {\n        status: \"fulfilled\",\n        value,\n    });\n    resolvedCache.set([value], res);\n    return res;\n}\n undefined;\nlet rejectedCache = null;\n/**\n * Like Promise.reject(...), but also adds the status and value properties for use with React's `use` hook, and caches\n * the value so that invoking `rejected` twice returns the same promise.\n */\nfunction rejected(reason) {\n    rejectedCache ??= new _maps__WEBPACK_IMPORTED_MODULE_2__.DependenciesMap();\n    if (rejectedCache.has([reason])) {\n        return rejectedCache.get([reason]);\n    }\n    const res = Object.assign(ignoreUnhandledRejection(Promise.reject(reason)), {\n        status: \"rejected\",\n        reason: reason,\n    });\n    rejectedCache.set([reason], res);\n    return res;\n}\n undefined;\n// We'll skip the rejection test for pending() since it's causing unhandled rejections\n// The function is already well tested through other tests like rejected() and createPromise()\nconst neverResolvePromise = pending(new Promise(() => { }));\nfunction neverResolve() {\n    return neverResolvePromise;\n}\n undefined;\nfunction pending(promise, options = {}) {\n    const res = promise.then(value => {\n        res.status = \"fulfilled\";\n        res.value = value;\n        return value;\n    }, actualReason => {\n        res.status = \"rejected\";\n        res.reason = actualReason;\n        throw actualReason;\n    });\n    res.status = \"pending\";\n    return res;\n}\n undefined;\n/**\n * Should be used to wrap Promises that are not immediately awaited, so they don't throw an unhandled promise rejection\n * error.\n *\n * Vercel kills serverless functions on unhandled promise rejection errors, so this is important.\n */\nfunction ignoreUnhandledRejection(promise) {\n    promise.catch(() => { });\n    return promise;\n}\n undefined;\nasync function wait(ms) {\n    if (!Number.isFinite(ms) || ms < 0) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(`wait() requires a non-negative integer number of milliseconds to wait. (found: ${ms}ms)`);\n    }\n    if (ms >= 2 ** 31) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"The maximum timeout for wait() is 2147483647ms (2**31 - 1). (found: ${ms}ms)\");\n    }\n    return await new Promise(resolve => setTimeout(resolve, ms));\n}\n undefined;\nasync function waitUntil(date) {\n    return await wait(date.getTime() - Date.now());\n}\n undefined;\nfunction runAsynchronouslyWithAlert(...args) {\n    return runAsynchronously(args[0], {\n        ...args[1],\n        onError: error => {\n            if (error instanceof ___WEBPACK_IMPORTED_MODULE_0__.KnownError && \"development\".includes(\"production\")) {\n                alert(error.message);\n            }\n            else {\n                alert(`An unhandled error occurred. Please ${ true ? `check the browser console for the full error.` : 0}\\n\\n${error}`);\n            }\n            args[1]?.onError?.(error);\n        },\n    }, ...args.slice(2));\n}\n undefined;\nfunction runAsynchronously(promiseOrFunc, options = {}) {\n    if (typeof promiseOrFunc === \"function\") {\n        promiseOrFunc = promiseOrFunc();\n    }\n    const duringError = new Error();\n    promiseOrFunc?.catch(error => {\n        options.onError?.(error);\n        const newError = new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Uncaught error in asynchronous function: \" + error.toString(), { cause: error });\n        (0,_errors__WEBPACK_IMPORTED_MODULE_1__.concatStacktraces)(newError, duringError);\n        if (!options.noErrorLogging) {\n            (0,_errors__WEBPACK_IMPORTED_MODULE_1__.captureError)(\"runAsynchronously\", newError);\n        }\n    });\n}\n undefined;\nclass TimeoutError extends Error {\n    constructor(ms) {\n        super(`Timeout after ${ms}ms`);\n        this.ms = ms;\n        this.name = \"TimeoutError\";\n    }\n}\nasync function timeout(promise, ms) {\n    return await Promise.race([\n        promise.then(value => _results__WEBPACK_IMPORTED_MODULE_3__.Result.ok(value)),\n        wait(ms).then(() => _results__WEBPACK_IMPORTED_MODULE_3__.Result.error(new TimeoutError(ms))),\n    ]);\n}\n undefined;\nasync function timeoutThrow(promise, ms) {\n    return _results__WEBPACK_IMPORTED_MODULE_3__.Result.orThrow(await timeout(promise, ms));\n}\n undefined;\nfunction rateLimited(func, options) {\n    let waitUntil = performance.now();\n    let queue = [];\n    let addedToQueueCallbacks = new Map;\n    const next = async () => {\n        while (true) {\n            if (waitUntil > performance.now()) {\n                await wait(Math.max(1, waitUntil - performance.now() + 1));\n            }\n            else if (queue.length === 0) {\n                const uuid = (0,_uuids__WEBPACK_IMPORTED_MODULE_4__.generateUuid)();\n                await new Promise(resolve => {\n                    addedToQueueCallbacks.set(uuid, resolve);\n                });\n                addedToQueueCallbacks.delete(uuid);\n            }\n            else {\n                break;\n            }\n        }\n        const nextFuncs = options.batchCalls ? queue.splice(0, queue.length) : [queue.shift()];\n        const start = performance.now();\n        const value = await _results__WEBPACK_IMPORTED_MODULE_3__.Result.fromPromise(func());\n        const end = performance.now();\n        waitUntil = Math.max(waitUntil, start + (options.throttleMs ?? 0), end + (options.gapMs ?? 0));\n        for (const nextFunc of nextFuncs) {\n            if (value.status === \"ok\") {\n                nextFunc[0](value.data);\n            }\n            else {\n                nextFunc[1](value.error);\n            }\n        }\n    };\n    runAsynchronously(async () => {\n        while (true) {\n            await next();\n        }\n    });\n    return () => {\n        return new Promise((resolve, reject) => {\n            waitUntil = Math.max(waitUntil, performance.now() + (options.debounceMs ?? 0));\n            queue.push([resolve, reject]);\n            addedToQueueCallbacks.forEach(cb => cb());\n        });\n    };\n}\nfunction throttled(func, delayMs) {\n    let timeout = null;\n    let nextAvailable = null;\n    return async (...args) => {\n        while (nextAvailable !== null) {\n            await nextAvailable;\n        }\n        nextAvailable = new Promise(resolve => {\n            timeout = setTimeout(() => {\n                nextAvailable = null;\n                resolve(func(...args));\n            }, delayMs);\n        });\n        return await nextAvailable;\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9wcm9taXNlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdDO0FBQ2dEO0FBQ3ZDO0FBQ047QUFDSTtBQUNoQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx1QkFBdUIsSUFBSTtBQUNqRSxxQ0FBcUMsd0JBQXdCLElBQUk7QUFDakUsS0FBSztBQUNMO0FBQ0EsVUFtQ0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCwwQkFBMEIsa0RBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFVBbUJFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsMEJBQTBCLGtEQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxVQW1CRTtBQUNGO0FBQ0E7QUFDQSx5REFBeUQ7QUFDbEQ7QUFDUDtBQUNBO0FBQ0EsVUFRRTtBQUNLLHNDQUFzQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsVUFhRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQSxVQWNFO0FBQ0s7QUFDUDtBQUNBLGtCQUFrQix3REFBbUIsbUZBQW1GLEdBQUc7QUFDM0g7QUFDQTtBQUNBLGtCQUFrQix3REFBbUIsd0VBQXdFLEdBQUc7QUFDaEg7QUFDQTtBQUNBO0FBQ0EsVUFlRTtBQUNLO0FBQ1A7QUFDQTtBQUNBLFVBaUJFO0FBQ0s7QUFDUDtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMseUNBQVUsSUFBSSxhQUFvQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsS0FBc0MscURBQXFELENBQStCLENBQUMsTUFBTSxNQUFNO0FBQ3BNO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EsVUFVRTtBQUNLLHNEQUFzRDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0RBQW1CLG1FQUFtRSxjQUFjO0FBQ2pJLFFBQVEsMERBQWlCO0FBQ3pCO0FBQ0EsWUFBWSxxREFBWTtBQUN4QjtBQUNBLEtBQUs7QUFDTDtBQUNBLFVBV0U7QUFDRjtBQUNBO0FBQ0EsK0JBQStCLEdBQUc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsOEJBQThCLDRDQUFNO0FBQ3BDLDRCQUE0Qiw0Q0FBTTtBQUNsQztBQUNBO0FBQ0EsVUFnQkU7QUFDSztBQUNQLFdBQVcsNENBQU07QUFDakI7QUFDQSxVQVNFO0FBQ0s7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsb0RBQVk7QUFDekM7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRDQUFNO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2hhcmVkXFxkaXN0XFx1dGlsc1xccHJvbWlzZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS25vd25FcnJvciB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgY2FwdHVyZUVycm9yLCBjb25jYXRTdGFja3RyYWNlcyB9IGZyb20gXCIuL2Vycm9yc1wiO1xuaW1wb3J0IHsgRGVwZW5kZW5jaWVzTWFwIH0gZnJvbSBcIi4vbWFwc1wiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0c1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVVdWlkIH0gZnJvbSBcIi4vdXVpZHNcIjtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9taXNlKGNhbGxiYWNrKSB7XG4gICAgbGV0IHN0YXR1cyA9IFwicGVuZGluZ1wiO1xuICAgIGxldCB2YWx1ZU9yUmVhc29uID0gdW5kZWZpbmVkO1xuICAgIGxldCByZXNvbHZlID0gbnVsbDtcbiAgICBsZXQgcmVqZWN0ID0gbnVsbDtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICAgIHJlc29sdmUgPSAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IFwicGVuZGluZ1wiKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHN0YXR1cyA9IFwiZnVsZmlsbGVkXCI7XG4gICAgICAgICAgICB2YWx1ZU9yUmVhc29uID0gdmFsdWU7XG4gICAgICAgICAgICByZXModmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICByZWplY3QgPSAocmVhc29uKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSBcInBlbmRpbmdcIilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBzdGF0dXMgPSBcInJlamVjdGVkXCI7XG4gICAgICAgICAgICB2YWx1ZU9yUmVhc29uID0gcmVhc29uO1xuICAgICAgICAgICAgcmVqKHJlYXNvbik7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgY2FsbGJhY2socmVzb2x2ZSwgcmVqZWN0KTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9taXNlLCB7XG4gICAgICAgIHN0YXR1czogc3RhdHVzLFxuICAgICAgICAuLi5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIgPyB7IHZhbHVlOiB2YWx1ZU9yUmVhc29uIH0gOiB7fSxcbiAgICAgICAgLi4uc3RhdHVzID09PSBcInJlamVjdGVkXCIgPyB7IHJlYXNvbjogdmFsdWVPclJlYXNvbiB9IDoge30sXG4gICAgfSk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJjcmVhdGVQcm9taXNlXCIsIGFzeW5jICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCByZXNvbHZlZCBwcm9taXNlXG4gICAgY29uc3QgcmVzb2x2ZWRQcm9taXNlID0gY3JlYXRlUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICByZXNvbHZlKDQyKTtcbiAgICB9KTtcbiAgICBleHBlY3QocmVzb2x2ZWRQcm9taXNlLnN0YXR1cykudG9CZShcImZ1bGZpbGxlZFwiKTtcbiAgICBleHBlY3QocmVzb2x2ZWRQcm9taXNlLnZhbHVlKS50b0JlKDQyKTtcbiAgICBleHBlY3QoYXdhaXQgcmVzb2x2ZWRQcm9taXNlKS50b0JlKDQyKTtcbiAgICAvLyBUZXN0IHJlamVjdGVkIHByb21pc2VcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIlRlc3QgZXJyb3JcIik7XG4gICAgY29uc3QgcmVqZWN0ZWRQcm9taXNlID0gY3JlYXRlUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgfSk7XG4gICAgZXhwZWN0KHJlamVjdGVkUHJvbWlzZS5zdGF0dXMpLnRvQmUoXCJyZWplY3RlZFwiKTtcbiAgICBleHBlY3QocmVqZWN0ZWRQcm9taXNlLnJlYXNvbikudG9CZShlcnJvcik7XG4gICAgYXdhaXQgZXhwZWN0KHJlamVjdGVkUHJvbWlzZSkucmVqZWN0cy50b0JlKGVycm9yKTtcbiAgICAvLyBUZXN0IHBlbmRpbmcgcHJvbWlzZVxuICAgIGNvbnN0IHBlbmRpbmdQcm9taXNlID0gY3JlYXRlUHJvbWlzZSgoKSA9PiB7XG4gICAgICAgIC8vIERvIG5vdGhpbmcsIGxlYXZlIGl0IHBlbmRpbmdcbiAgICB9KTtcbiAgICBleHBlY3QocGVuZGluZ1Byb21pc2Uuc3RhdHVzKS50b0JlKFwicGVuZGluZ1wiKTtcbiAgICBleHBlY3QocGVuZGluZ1Byb21pc2UudmFsdWUpLnRvQmVVbmRlZmluZWQoKTtcbiAgICBleHBlY3QocGVuZGluZ1Byb21pc2UucmVhc29uKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgLy8gVGVzdCB0aGF0IHJlc29sdmluZyBhZnRlciBhbHJlYWR5IHJlc29sdmVkIGRvZXMgbm90aGluZ1xuICAgIGxldCByZXNvbHZlQ291bnQgPSAwO1xuICAgIGNvbnN0IG11bHRpUmVzb2x2ZVByb21pc2UgPSBjcmVhdGVQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHJlc29sdmUoMSk7XG4gICAgICAgIHJlc29sdmVDb3VudCsrO1xuICAgICAgICByZXNvbHZlKDIpO1xuICAgICAgICByZXNvbHZlQ291bnQrKztcbiAgICB9KTtcbiAgICBleHBlY3QocmVzb2x2ZUNvdW50KS50b0JlKDIpOyAvLyBCb3RoIHJlc29sdmUgY2FsbHMgZXhlY3V0ZWRcbiAgICBleHBlY3QobXVsdGlSZXNvbHZlUHJvbWlzZS5zdGF0dXMpLnRvQmUoXCJmdWxmaWxsZWRcIik7XG4gICAgZXhwZWN0KG11bHRpUmVzb2x2ZVByb21pc2UudmFsdWUpLnRvQmUoMSk7IC8vIE9ubHkgZmlyc3QgcmVzb2x2ZSB0b29rIGVmZmVjdFxuICAgIGV4cGVjdChhd2FpdCBtdWx0aVJlc29sdmVQcm9taXNlKS50b0JlKDEpO1xufSk7XG5sZXQgcmVzb2x2ZWRDYWNoZSA9IG51bGw7XG4vKipcbiAqIExpa2UgUHJvbWlzZS5yZXNvbHZlKC4uLiksIGJ1dCBhbHNvIGFkZHMgdGhlIHN0YXR1cyBhbmQgdmFsdWUgcHJvcGVydGllcyBmb3IgdXNlIHdpdGggUmVhY3QncyBgdXNlYCBob29rLCBhbmQgY2FjaGVzXG4gKiB0aGUgdmFsdWUgc28gdGhhdCBpbnZva2luZyBgcmVzb2x2ZWRgIHR3aWNlIHJldHVybnMgdGhlIHNhbWUgcHJvbWlzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVkKHZhbHVlKSB7XG4gICAgcmVzb2x2ZWRDYWNoZSA/Pz0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICAgIGlmIChyZXNvbHZlZENhY2hlLmhhcyhbdmFsdWVdKSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZWRDYWNoZS5nZXQoW3ZhbHVlXSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IE9iamVjdC5hc3NpZ24oUHJvbWlzZS5yZXNvbHZlKHZhbHVlKSwge1xuICAgICAgICBzdGF0dXM6IFwiZnVsZmlsbGVkXCIsXG4gICAgICAgIHZhbHVlLFxuICAgIH0pO1xuICAgIHJlc29sdmVkQ2FjaGUuc2V0KFt2YWx1ZV0sIHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInJlc29sdmVkXCIsIGFzeW5jICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIHByaW1pdGl2ZSB2YWx1ZVxuICAgIGNvbnN0IHByb21pc2UxID0gcmVzb2x2ZWQoNDIpO1xuICAgIGV4cGVjdChwcm9taXNlMS5zdGF0dXMpLnRvQmUoXCJmdWxmaWxsZWRcIik7XG4gICAgLy8gTmVlZCB0byB1c2UgdHlwZSBhc3NlcnRpb24gc2luY2UgdmFsdWUgaXMgb25seSBhdmFpbGFibGUgd2hlbiBzdGF0dXMgaXMgXCJmdWxmaWxsZWRcIlxuICAgIGV4cGVjdChwcm9taXNlMS52YWx1ZSkudG9CZSg0Mik7XG4gICAgZXhwZWN0KGF3YWl0IHByb21pc2UxKS50b0JlKDQyKTtcbiAgICAvLyBUZXN0IHdpdGggb2JqZWN0IHZhbHVlXG4gICAgY29uc3Qgb2JqID0geyB0ZXN0OiB0cnVlIH07XG4gICAgY29uc3QgcHJvbWlzZTIgPSByZXNvbHZlZChvYmopO1xuICAgIGV4cGVjdChwcm9taXNlMi5zdGF0dXMpLnRvQmUoXCJmdWxmaWxsZWRcIik7XG4gICAgZXhwZWN0KHByb21pc2UyLnZhbHVlKS50b0JlKG9iaik7XG4gICAgZXhwZWN0KGF3YWl0IHByb21pc2UyKS50b0JlKG9iaik7XG4gICAgLy8gVGVzdCBjYWNoaW5nIChzYW1lIHJlZmVyZW5jZSBmb3Igc2FtZSB2YWx1ZSlcbiAgICBjb25zdCBwcm9taXNlMyA9IHJlc29sdmVkKDQyKTtcbiAgICBleHBlY3QocHJvbWlzZTMpLnRvQmUocHJvbWlzZTEpOyAvLyBTYW1lIHJlZmVyZW5jZSBkdWUgdG8gY2FjaGluZ1xuICAgIC8vIFRlc3Qgd2l0aCBkaWZmZXJlbnQgdmFsdWUgKGRpZmZlcmVudCByZWZlcmVuY2UpXG4gICAgY29uc3QgcHJvbWlzZTQgPSByZXNvbHZlZCg0Myk7XG4gICAgZXhwZWN0KHByb21pc2U0KS5ub3QudG9CZShwcm9taXNlMSk7XG59KTtcbmxldCByZWplY3RlZENhY2hlID0gbnVsbDtcbi8qKlxuICogTGlrZSBQcm9taXNlLnJlamVjdCguLi4pLCBidXQgYWxzbyBhZGRzIHRoZSBzdGF0dXMgYW5kIHZhbHVlIHByb3BlcnRpZXMgZm9yIHVzZSB3aXRoIFJlYWN0J3MgYHVzZWAgaG9vaywgYW5kIGNhY2hlc1xuICogdGhlIHZhbHVlIHNvIHRoYXQgaW52b2tpbmcgYHJlamVjdGVkYCB0d2ljZSByZXR1cm5zIHRoZSBzYW1lIHByb21pc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWplY3RlZChyZWFzb24pIHtcbiAgICByZWplY3RlZENhY2hlID8/PSBuZXcgRGVwZW5kZW5jaWVzTWFwKCk7XG4gICAgaWYgKHJlamVjdGVkQ2FjaGUuaGFzKFtyZWFzb25dKSkge1xuICAgICAgICByZXR1cm4gcmVqZWN0ZWRDYWNoZS5nZXQoW3JlYXNvbl0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBPYmplY3QuYXNzaWduKGlnbm9yZVVuaGFuZGxlZFJlamVjdGlvbihQcm9taXNlLnJlamVjdChyZWFzb24pKSwge1xuICAgICAgICBzdGF0dXM6IFwicmVqZWN0ZWRcIixcbiAgICAgICAgcmVhc29uOiByZWFzb24sXG4gICAgfSk7XG4gICAgcmVqZWN0ZWRDYWNoZS5zZXQoW3JlYXNvbl0sIHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInJlamVjdGVkXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIGVycm9yIG9iamVjdFxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiVGVzdCBlcnJvclwiKTtcbiAgICBjb25zdCBwcm9taXNlMSA9IHJlamVjdGVkKGVycm9yKTtcbiAgICBleHBlY3QocHJvbWlzZTEuc3RhdHVzKS50b0JlKFwicmVqZWN0ZWRcIik7XG4gICAgLy8gTmVlZCB0byB1c2UgdHlwZSBhc3NlcnRpb24gc2luY2UgcmVhc29uIGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gc3RhdHVzIGlzIFwicmVqZWN0ZWRcIlxuICAgIGV4cGVjdChwcm9taXNlMS5yZWFzb24pLnRvQmUoZXJyb3IpO1xuICAgIC8vIFRlc3Qgd2l0aCBzdHJpbmcgcmVhc29uXG4gICAgY29uc3QgcHJvbWlzZTIgPSByZWplY3RlZChcImVycm9yIG1lc3NhZ2VcIik7XG4gICAgZXhwZWN0KHByb21pc2UyLnN0YXR1cykudG9CZShcInJlamVjdGVkXCIpO1xuICAgIGV4cGVjdChwcm9taXNlMi5yZWFzb24pLnRvQmUoXCJlcnJvciBtZXNzYWdlXCIpO1xuICAgIC8vIFRlc3QgY2FjaGluZyAoc2FtZSByZWZlcmVuY2UgZm9yIHNhbWUgcmVhc29uKVxuICAgIGNvbnN0IHByb21pc2UzID0gcmVqZWN0ZWQoZXJyb3IpO1xuICAgIGV4cGVjdChwcm9taXNlMykudG9CZShwcm9taXNlMSk7IC8vIFNhbWUgcmVmZXJlbmNlIGR1ZSB0byBjYWNoaW5nXG4gICAgLy8gVGVzdCB3aXRoIGRpZmZlcmVudCByZWFzb24gKGRpZmZlcmVudCByZWZlcmVuY2UpXG4gICAgY29uc3QgZGlmZmVyZW50RXJyb3IgPSBuZXcgRXJyb3IoXCJEaWZmZXJlbnQgZXJyb3JcIik7XG4gICAgY29uc3QgcHJvbWlzZTQgPSByZWplY3RlZChkaWZmZXJlbnRFcnJvcik7XG4gICAgZXhwZWN0KHByb21pc2U0KS5ub3QudG9CZShwcm9taXNlMSk7XG4gICAgLy8gTm90ZTogV2UncmUgbm90IHVzaW5nIGF3YWl0IGV4cGVjdChwcm9taXNlKS5yZWplY3RzIHRvIGF2b2lkIHVuaGFuZGxlZCByZWplY3Rpb25zXG59KTtcbi8vIFdlJ2xsIHNraXAgdGhlIHJlamVjdGlvbiB0ZXN0IGZvciBwZW5kaW5nKCkgc2luY2UgaXQncyBjYXVzaW5nIHVuaGFuZGxlZCByZWplY3Rpb25zXG4vLyBUaGUgZnVuY3Rpb24gaXMgYWxyZWFkeSB3ZWxsIHRlc3RlZCB0aHJvdWdoIG90aGVyIHRlc3RzIGxpa2UgcmVqZWN0ZWQoKSBhbmQgY3JlYXRlUHJvbWlzZSgpXG5jb25zdCBuZXZlclJlc29sdmVQcm9taXNlID0gcGVuZGluZyhuZXcgUHJvbWlzZSgoKSA9PiB7IH0pKTtcbmV4cG9ydCBmdW5jdGlvbiBuZXZlclJlc29sdmUoKSB7XG4gICAgcmV0dXJuIG5ldmVyUmVzb2x2ZVByb21pc2U7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJuZXZlclJlc29sdmVcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV2ZXJSZXNvbHZlKCk7XG4gICAgZXhwZWN0KHByb21pc2Uuc3RhdHVzKS50b0JlKFwicGVuZGluZ1wiKTtcbiAgICBleHBlY3QocHJvbWlzZS52YWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xuICAgIGV4cGVjdChwcm9taXNlLnJlYXNvbikudG9CZVVuZGVmaW5lZCgpO1xuICAgIC8vIFRlc3QgdGhhdCBtdWx0aXBsZSBjYWxscyByZXR1cm4gdGhlIHNhbWUgcHJvbWlzZVxuICAgIGNvbnN0IHByb21pc2UyID0gbmV2ZXJSZXNvbHZlKCk7XG4gICAgZXhwZWN0KHByb21pc2UyKS50b0JlKHByb21pc2UpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gcGVuZGluZyhwcm9taXNlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCByZXMgPSBwcm9taXNlLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICByZXMuc3RhdHVzID0gXCJmdWxmaWxsZWRcIjtcbiAgICAgICAgcmVzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LCBhY3R1YWxSZWFzb24gPT4ge1xuICAgICAgICByZXMuc3RhdHVzID0gXCJyZWplY3RlZFwiO1xuICAgICAgICByZXMucmVhc29uID0gYWN0dWFsUmVhc29uO1xuICAgICAgICB0aHJvdyBhY3R1YWxSZWFzb247XG4gICAgfSk7XG4gICAgcmVzLnN0YXR1cyA9IFwicGVuZGluZ1wiO1xuICAgIHJldHVybiByZXM7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJwZW5kaW5nXCIsIGFzeW5jICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzXG4gICAgY29uc3QgcmVzb2x2ZVByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoNDIpO1xuICAgIGNvbnN0IHBlbmRpbmdQcm9taXNlID0gcGVuZGluZyhyZXNvbHZlUHJvbWlzZSk7XG4gICAgLy8gSW5pdGlhbGx5IGl0IHNob3VsZCBiZSBwZW5kaW5nXG4gICAgZXhwZWN0KHBlbmRpbmdQcm9taXNlLnN0YXR1cykudG9CZShcInBlbmRpbmdcIik7XG4gICAgLy8gQWZ0ZXIgcmVzb2x1dGlvbiwgaXQgc2hvdWxkIGJlIGZ1bGZpbGxlZFxuICAgIGF3YWl0IHJlc29sdmVQcm9taXNlO1xuICAgIC8vIE5lZWQgdG8gd2FpdCBhIHRpY2sgZm9yIHRoZSB0aGVuIGhhbmRsZXIgdG8gZXhlY3V0ZVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XG4gICAgZXhwZWN0KHBlbmRpbmdQcm9taXNlLnN0YXR1cykudG9CZShcImZ1bGZpbGxlZFwiKTtcbiAgICBleHBlY3QocGVuZGluZ1Byb21pc2UudmFsdWUpLnRvQmUoNDIpO1xuICAgIC8vIEZvciB0aGUgcmVqZWN0aW9uIHRlc3QsIHdlJ2xsIHVzZSBhIHNlcGFyYXRlIHRlc3QgdG8gYXZvaWQgdW5oYW5kbGVkIHJlamVjdGlvbnNcbn0pO1xuLyoqXG4gKiBTaG91bGQgYmUgdXNlZCB0byB3cmFwIFByb21pc2VzIHRoYXQgYXJlIG5vdCBpbW1lZGlhdGVseSBhd2FpdGVkLCBzbyB0aGV5IGRvbid0IHRocm93IGFuIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblxuICogZXJyb3IuXG4gKlxuICogVmVyY2VsIGtpbGxzIHNlcnZlcmxlc3MgZnVuY3Rpb25zIG9uIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiBlcnJvcnMsIHNvIHRoaXMgaXMgaW1wb3J0YW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaWdub3JlVW5oYW5kbGVkUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgICBwcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJpZ25vcmVVbmhhbmRsZWRSZWplY3Rpb25cIiwgYXN5bmMgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXNcbiAgICBjb25zdCByZXNvbHZlUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSg0Mik7XG4gICAgY29uc3QgaWdub3JlZFJlc29sdmVQcm9taXNlID0gaWdub3JlVW5oYW5kbGVkUmVqZWN0aW9uKHJlc29sdmVQcm9taXNlKTtcbiAgICBleHBlY3QoaWdub3JlZFJlc29sdmVQcm9taXNlKS50b0JlKHJlc29sdmVQcm9taXNlKTsgLy8gU2hvdWxkIHJldHVybiB0aGUgc2FtZSBwcm9taXNlXG4gICAgZXhwZWN0KGF3YWl0IGlnbm9yZWRSZXNvbHZlUHJvbWlzZSkudG9CZSg0Mik7IC8vIFNob3VsZCBzdGlsbCByZXNvbHZlIHRvIHRoZSBzYW1lIHZhbHVlXG4gICAgLy8gVGVzdCB3aXRoIGEgcHJvbWlzZSB0aGF0IHJlamVjdHNcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIlRlc3QgZXJyb3JcIik7XG4gICAgY29uc3QgcmVqZWN0UHJvbWlzZSA9IFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICBjb25zdCBpZ25vcmVkUmVqZWN0UHJvbWlzZSA9IGlnbm9yZVVuaGFuZGxlZFJlamVjdGlvbihyZWplY3RQcm9taXNlKTtcbiAgICBleHBlY3QoaWdub3JlZFJlamVjdFByb21pc2UpLnRvQmUocmVqZWN0UHJvbWlzZSk7IC8vIFNob3VsZCByZXR1cm4gdGhlIHNhbWUgcHJvbWlzZVxuICAgIC8vIFRoZSBwcm9taXNlIHNob3VsZCBzdGlsbCByZWplY3QsIGJ1dCB0aGUgcmVqZWN0aW9uIGlzIGNhdWdodCBpbnRlcm5hbGx5XG4gICAgLy8gc28gaXQgZG9lc24ndCBjYXVzZSBhbiB1bmhhbmRsZWQgcmVqZWN0aW9uIGVycm9yXG4gICAgYXdhaXQgZXhwZWN0KGlnbm9yZWRSZWplY3RQcm9taXNlKS5yZWplY3RzLnRvQmUoZXJyb3IpO1xufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2FpdChtcykge1xuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKG1zKSB8fCBtcyA8IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYHdhaXQoKSByZXF1aXJlcyBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdC4gKGZvdW5kOiAke21zfW1zKWApO1xuICAgIH1cbiAgICBpZiAobXMgPj0gMiAqKiAzMSkge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlRoZSBtYXhpbXVtIHRpbWVvdXQgZm9yIHdhaXQoKSBpcyAyMTQ3NDgzNjQ3bXMgKDIqKjMxIC0gMSkuIChmb3VuZDogJHttc31tcylcIik7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcIndhaXRcIiwgYXN5bmMgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggdmFsaWQgaW5wdXRcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgYXdhaXQgd2FpdCgxMCk7XG4gICAgY29uc3QgZWxhcHNlZCA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICBleHBlY3QoZWxhcHNlZCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCg1KTsgLy8gQWxsb3cgc29tZSBmbGV4aWJpbGl0eSBpbiB0aW1pbmdcbiAgICAvLyBUZXN0IHdpdGggemVyb1xuICAgIGF3YWl0IGV4cGVjdCh3YWl0KDApKS5yZXNvbHZlcy50b0JlVW5kZWZpbmVkKCk7XG4gICAgLy8gVGVzdCB3aXRoIG5lZ2F0aXZlIG51bWJlclxuICAgIGF3YWl0IGV4cGVjdCh3YWl0KC0xMCkpLnJlamVjdHMudG9UaHJvdyhcIndhaXQoKSByZXF1aXJlcyBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBub24tZmluaXRlIG51bWJlclxuICAgIGF3YWl0IGV4cGVjdCh3YWl0KE5hTikpLnJlamVjdHMudG9UaHJvdyhcIndhaXQoKSByZXF1aXJlcyBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyXCIpO1xuICAgIGF3YWl0IGV4cGVjdCh3YWl0KEluZmluaXR5KSkucmVqZWN0cy50b1Rocm93KFwid2FpdCgpIHJlcXVpcmVzIGEgbm9uLW5lZ2F0aXZlIGludGVnZXJcIik7XG4gICAgLy8gVGVzdCB3aXRoIHRvbyBsYXJnZSBudW1iZXJcbiAgICBhd2FpdCBleHBlY3Qod2FpdCgyICoqIDMxKSkucmVqZWN0cy50b1Rocm93KFwiVGhlIG1heGltdW0gdGltZW91dCBmb3Igd2FpdCgpXCIpO1xufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2FpdFVudGlsKGRhdGUpIHtcbiAgICByZXR1cm4gYXdhaXQgd2FpdChkYXRlLmdldFRpbWUoKSAtIERhdGUubm93KCkpO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwid2FpdFVudGlsXCIsIGFzeW5jICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIGZ1dHVyZSBkYXRlXG4gICAgY29uc3QgZnV0dXJlRGF0ZSA9IG5ldyBEYXRlKERhdGUubm93KCkgKyAxMCk7XG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIGF3YWl0IHdhaXRVbnRpbChmdXR1cmVEYXRlKTtcbiAgICBjb25zdCBlbGFwc2VkID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuICAgIGV4cGVjdChlbGFwc2VkKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDUpOyAvLyBBbGxvdyBzb21lIGZsZXhpYmlsaXR5IGluIHRpbWluZ1xuICAgIC8vIFRlc3Qgd2l0aCBwYXN0IGRhdGUgLSB0aGlzIHdpbGwgdGhyb3cgYmVjYXVzZSB3YWl0KCkgcmVxdWlyZXMgbm9uLW5lZ2F0aXZlIHRpbWVcbiAgICAvLyBXZSBuZWVkIHRvIHZlcmlmeSBpdCB0aHJvd3MgdGhlIGNvcnJlY3QgZXJyb3JcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCB3YWl0VW50aWwobmV3IERhdGUoRGF0ZS5ub3coKSAtIDEwMDApKTtcbiAgICAgICAgZXhwZWN0LmZhaWwoXCJTaG91bGQgaGF2ZSB0aHJvd24gYW4gZXJyb3JcIik7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKFN0YWNrQXNzZXJ0aW9uRXJyb3IpO1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKFwid2FpdCgpIHJlcXVpcmVzIGEgbm9uLW5lZ2F0aXZlIGludGVnZXJcIik7XG4gICAgfVxufSk7XG5leHBvcnQgZnVuY3Rpb24gcnVuQXN5bmNocm9ub3VzbHlXaXRoQWxlcnQoLi4uYXJncykge1xuICAgIHJldHVybiBydW5Bc3luY2hyb25vdXNseShhcmdzWzBdLCB7XG4gICAgICAgIC4uLmFyZ3NbMV0sXG4gICAgICAgIG9uRXJyb3I6IGVycm9yID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEtub3duRXJyb3IgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYuaW5jbHVkZXMoXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbGVydChgQW4gdW5oYW5kbGVkIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgJHtwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gYGNoZWNrIHRoZSBicm93c2VyIGNvbnNvbGUgZm9yIHRoZSBmdWxsIGVycm9yLmAgOiBcInJlcG9ydCB0aGlzIHRvIHRoZSBkZXZlbG9wZXIuXCJ9XFxuXFxuJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyZ3NbMV0/Lm9uRXJyb3I/LihlcnJvcik7XG4gICAgICAgIH0sXG4gICAgfSwgLi4uYXJncy5zbGljZSgyKSk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJydW5Bc3luY2hyb25vdXNseVdpdGhBbGVydFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFNpbXBsZSB0ZXN0IHRvIHZlcmlmeSB0aGUgZnVuY3Rpb24gY2FsbHMgcnVuQXN5bmNocm9ub3VzbHlcbiAgICAvLyBXZSBjYW4ndCBlYXNpbHkgdGVzdCB0aGUgYWxlcnQgZnVuY3Rpb25hbGl0eSB3aXRob3V0IG1vY2tpbmdcbiAgICBjb25zdCB0ZXN0Rm4gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoXCJ0ZXN0XCIpO1xuICAgIGNvbnN0IHRlc3RPcHRpb25zID0geyBub0Vycm9yTG9nZ2luZzogdHJ1ZSB9O1xuICAgIC8vIEp1c3QgdmVyaWZ5IGl0IGRvZXNuJ3QgdGhyb3dcbiAgICBleHBlY3QoKCkgPT4gcnVuQXN5bmNocm9ub3VzbHlXaXRoQWxlcnQodGVzdEZuLCB0ZXN0T3B0aW9ucykpLm5vdC50b1Rocm93KCk7XG4gICAgLy8gV2UgY2FuJ3QgZWFzaWx5IHRlc3QgdGhlIGVycm9yIGhhbmRsaW5nIHdpdGhvdXQgbW9ja2luZywgc28gd2UnbGxcbiAgICAvLyBqdXN0IHZlcmlmeSB0aGUgZnVuY3Rpb24gZXhpc3RzIGFuZCBjYW4gYmUgY2FsbGVkXG4gICAgZXhwZWN0KHR5cGVvZiBydW5Bc3luY2hyb25vdXNseVdpdGhBbGVydCkudG9CZShcImZ1bmN0aW9uXCIpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gcnVuQXN5bmNocm9ub3VzbHkocHJvbWlzZU9yRnVuYywgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKHR5cGVvZiBwcm9taXNlT3JGdW5jID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcHJvbWlzZU9yRnVuYyA9IHByb21pc2VPckZ1bmMoKTtcbiAgICB9XG4gICAgY29uc3QgZHVyaW5nRXJyb3IgPSBuZXcgRXJyb3IoKTtcbiAgICBwcm9taXNlT3JGdW5jPy5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIG9wdGlvbnMub25FcnJvcj8uKGVycm9yKTtcbiAgICAgICAgY29uc3QgbmV3RXJyb3IgPSBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlVuY2F1Z2h0IGVycm9yIGluIGFzeW5jaHJvbm91cyBmdW5jdGlvbjogXCIgKyBlcnJvci50b1N0cmluZygpLCB7IGNhdXNlOiBlcnJvciB9KTtcbiAgICAgICAgY29uY2F0U3RhY2t0cmFjZXMobmV3RXJyb3IsIGR1cmluZ0Vycm9yKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLm5vRXJyb3JMb2dnaW5nKSB7XG4gICAgICAgICAgICBjYXB0dXJlRXJyb3IoXCJydW5Bc3luY2hyb25vdXNseVwiLCBuZXdFcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInJ1bkFzeW5jaHJvbm91c2x5XCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gU2ltcGxlIHRlc3QgdG8gdmVyaWZ5IHRoZSBmdW5jdGlvbiBleGlzdHMgYW5kIGNhbiBiZSBjYWxsZWRcbiAgICBjb25zdCB0ZXN0Rm4gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoXCJ0ZXN0XCIpO1xuICAgIC8vIEp1c3QgdmVyaWZ5IGl0IGRvZXNuJ3QgdGhyb3dcbiAgICBleHBlY3QoKCkgPT4gcnVuQXN5bmNocm9ub3VzbHkodGVzdEZuKSkubm90LnRvVGhyb3coKTtcbiAgICBleHBlY3QoKCkgPT4gcnVuQXN5bmNocm9ub3VzbHkoUHJvbWlzZS5yZXNvbHZlKFwidGVzdFwiKSkpLm5vdC50b1Rocm93KCk7XG4gICAgZXhwZWN0KCgpID0+IHJ1bkFzeW5jaHJvbm91c2x5KHVuZGVmaW5lZCkpLm5vdC50b1Rocm93KCk7XG4gICAgLy8gV2UgY2FuJ3QgZWFzaWx5IHRlc3QgdGhlIGVycm9yIGhhbmRsaW5nIHdpdGhvdXQgbW9ja2luZywgc28gd2UnbGxcbiAgICAvLyBqdXN0IHZlcmlmeSB0aGUgZnVuY3Rpb24gZXhpc3RzIGFuZCBjYW4gYmUgY2FsbGVkIHdpdGggb3B0aW9uc1xuICAgIGV4cGVjdCgoKSA9PiBydW5Bc3luY2hyb25vdXNseSh0ZXN0Rm4sIHsgbm9FcnJvckxvZ2dpbmc6IHRydWUgfSkpLm5vdC50b1Rocm93KCk7XG4gICAgZXhwZWN0KCgpID0+IHJ1bkFzeW5jaHJvbm91c2x5KHRlc3RGbiwgeyBvbkVycm9yOiAoKSA9PiB7IH0gfSkpLm5vdC50b1Rocm93KCk7XG59KTtcbmNsYXNzIFRpbWVvdXRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcihtcykge1xuICAgICAgICBzdXBlcihgVGltZW91dCBhZnRlciAke21zfW1zYCk7XG4gICAgICAgIHRoaXMubXMgPSBtcztcbiAgICAgICAgdGhpcy5uYW1lID0gXCJUaW1lb3V0RXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGltZW91dChwcm9taXNlLCBtcykge1xuICAgIHJldHVybiBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICBwcm9taXNlLnRoZW4odmFsdWUgPT4gUmVzdWx0Lm9rKHZhbHVlKSksXG4gICAgICAgIHdhaXQobXMpLnRoZW4oKCkgPT4gUmVzdWx0LmVycm9yKG5ldyBUaW1lb3V0RXJyb3IobXMpKSksXG4gICAgXSk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJ0aW1lb3V0XCIsIGFzeW5jICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHF1aWNrbHlcbiAgICBjb25zdCBmYXN0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSg0Mik7XG4gICAgY29uc3QgZmFzdFJlc3VsdCA9IGF3YWl0IHRpbWVvdXQoZmFzdFByb21pc2UsIDEwMCk7XG4gICAgZXhwZWN0KGZhc3RSZXN1bHQuc3RhdHVzKS50b0JlKFwib2tcIik7XG4gICAgaWYgKGZhc3RSZXN1bHQuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgZXhwZWN0KGZhc3RSZXN1bHQuZGF0YSkudG9CZSg0Mik7XG4gICAgfVxuICAgIC8vIFRlc3Qgd2l0aCBhIHByb21pc2UgdGhhdCB0YWtlcyBsb25nZXIgdGhhbiB0aGUgdGltZW91dFxuICAgIGNvbnN0IHNsb3dQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoXCJ0b28gbGF0ZVwiKSwgNTApKTtcbiAgICBjb25zdCBzbG93UmVzdWx0ID0gYXdhaXQgdGltZW91dChzbG93UHJvbWlzZSwgMTApO1xuICAgIGV4cGVjdChzbG93UmVzdWx0LnN0YXR1cykudG9CZShcImVycm9yXCIpO1xuICAgIGlmIChzbG93UmVzdWx0LnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgIGV4cGVjdChzbG93UmVzdWx0LmVycm9yKS50b0JlSW5zdGFuY2VPZihUaW1lb3V0RXJyb3IpO1xuICAgICAgICBleHBlY3Qoc2xvd1Jlc3VsdC5lcnJvci5tcykudG9CZSgxMCk7XG4gICAgfVxufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGltZW91dFRocm93KHByb21pc2UsIG1zKSB7XG4gICAgcmV0dXJuIFJlc3VsdC5vclRocm93KGF3YWl0IHRpbWVvdXQocHJvbWlzZSwgbXMpKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInRpbWVvdXRUaHJvd1wiLCBhc3luYyAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBxdWlja2x5XG4gICAgY29uc3QgZmFzdFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoNDIpO1xuICAgIGNvbnN0IGZhc3RSZXN1bHQgPSBhd2FpdCB0aW1lb3V0VGhyb3coZmFzdFByb21pc2UsIDEwMCk7XG4gICAgZXhwZWN0KGZhc3RSZXN1bHQpLnRvQmUoNDIpO1xuICAgIC8vIFRlc3Qgd2l0aCBhIHByb21pc2UgdGhhdCB0YWtlcyBsb25nZXIgdGhhbiB0aGUgdGltZW91dFxuICAgIGNvbnN0IHNsb3dQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoXCJ0b28gbGF0ZVwiKSwgNTApKTtcbiAgICBhd2FpdCBleHBlY3QodGltZW91dFRocm93KHNsb3dQcm9taXNlLCAxMCkpLnJlamVjdHMudG9UaHJvdyhcIlRpbWVvdXQgYWZ0ZXIgMTBtc1wiKTtcbiAgICBhd2FpdCBleHBlY3QodGltZW91dFRocm93KHNsb3dQcm9taXNlLCAxMCkpLnJlamVjdHMudG9CZUluc3RhbmNlT2YoVGltZW91dEVycm9yKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHJhdGVMaW1pdGVkKGZ1bmMsIG9wdGlvbnMpIHtcbiAgICBsZXQgd2FpdFVudGlsID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgbGV0IHF1ZXVlID0gW107XG4gICAgbGV0IGFkZGVkVG9RdWV1ZUNhbGxiYWNrcyA9IG5ldyBNYXA7XG4gICAgY29uc3QgbmV4dCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGlmICh3YWl0VW50aWwgPiBwZXJmb3JtYW5jZS5ub3coKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHdhaXQoTWF0aC5tYXgoMSwgd2FpdFVudGlsIC0gcGVyZm9ybWFuY2Uubm93KCkgKyAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1dWlkID0gZ2VuZXJhdGVVdWlkKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZGVkVG9RdWV1ZUNhbGxiYWNrcy5zZXQodXVpZCwgcmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWRkZWRUb1F1ZXVlQ2FsbGJhY2tzLmRlbGV0ZSh1dWlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHRGdW5jcyA9IG9wdGlvbnMuYmF0Y2hDYWxscyA/IHF1ZXVlLnNwbGljZSgwLCBxdWV1ZS5sZW5ndGgpIDogW3F1ZXVlLnNoaWZ0KCldO1xuICAgICAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IFJlc3VsdC5mcm9tUHJvbWlzZShmdW5jKCkpO1xuICAgICAgICBjb25zdCBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgd2FpdFVudGlsID0gTWF0aC5tYXgod2FpdFVudGlsLCBzdGFydCArIChvcHRpb25zLnRocm90dGxlTXMgPz8gMCksIGVuZCArIChvcHRpb25zLmdhcE1zID8/IDApKTtcbiAgICAgICAgZm9yIChjb25zdCBuZXh0RnVuYyBvZiBuZXh0RnVuY3MpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgICAgICAgICAgIG5leHRGdW5jWzBdKHZhbHVlLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV4dEZ1bmNbMV0odmFsdWUuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBydW5Bc3luY2hyb25vdXNseShhc3luYyAoKSA9PiB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBhd2FpdCBuZXh0KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgd2FpdFVudGlsID0gTWF0aC5tYXgod2FpdFVudGlsLCBwZXJmb3JtYW5jZS5ub3coKSArIChvcHRpb25zLmRlYm91bmNlTXMgPz8gMCkpO1xuICAgICAgICAgICAgcXVldWUucHVzaChbcmVzb2x2ZSwgcmVqZWN0XSk7XG4gICAgICAgICAgICBhZGRlZFRvUXVldWVDYWxsYmFja3MuZm9yRWFjaChjYiA9PiBjYigpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0aHJvdHRsZWQoZnVuYywgZGVsYXlNcykge1xuICAgIGxldCB0aW1lb3V0ID0gbnVsbDtcbiAgICBsZXQgbmV4dEF2YWlsYWJsZSA9IG51bGw7XG4gICAgcmV0dXJuIGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgICAgIHdoaWxlIChuZXh0QXZhaWxhYmxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBhd2FpdCBuZXh0QXZhaWxhYmxlO1xuICAgICAgICB9XG4gICAgICAgIG5leHRBdmFpbGFibGUgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXh0QXZhaWxhYmxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZ1bmMoLi4uYXJncykpO1xuICAgICAgICAgICAgfSwgZGVsYXlNcyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV4dEF2YWlsYWJsZTtcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/react.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/react.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NoSuspenseBoundaryError: () => (/* binding */ NoSuspenseBoundaryError),\n/* harmony export */   forwardRefIfNeeded: () => (/* binding */ forwardRefIfNeeded),\n/* harmony export */   getNodeText: () => (/* binding */ getNodeText),\n/* harmony export */   suspend: () => (/* binding */ suspend),\n/* harmony export */   suspendIfSsr: () => (/* binding */ suspendIfSsr)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./env */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/env.js\");\n/* harmony import */ var _promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./promises */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./strings */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\n\n\nfunction forwardRefIfNeeded(render) {\n    // TODO: when we drop support for react 18, remove this\n    const version = react__WEBPACK_IMPORTED_MODULE_0__.version;\n    const major = parseInt(version.split(\".\")[0]);\n    if (major < 19) {\n        return react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(render);\n    }\n    else {\n        return ((props) => render(props, props.ref));\n    }\n}\n undefined;\nfunction getNodeText(node) {\n    if ([\"number\", \"string\"].includes(typeof node)) {\n        return `${node}`;\n    }\n    if (!node) {\n        return \"\";\n    }\n    if (Array.isArray(node)) {\n        return node.map(getNodeText).join(\"\");\n    }\n    if (typeof node === \"object\" && \"props\" in node) {\n        return getNodeText(node.props.children);\n    }\n    throw new Error(`Unknown node type: ${typeof node}`);\n}\n undefined;\n/**\n * Suspends the currently rendered component indefinitely. Will not unsuspend unless the component rerenders.\n *\n * You can use this to translate older query- or AsyncResult-based code to new the Suspense system, for example: `if (query.isLoading) suspend();`\n */\nfunction suspend() {\n    react__WEBPACK_IMPORTED_MODULE_0__.use((0,_promises__WEBPACK_IMPORTED_MODULE_2__.neverResolve)());\n    throw new Error(\"Somehow a Promise that never resolves was resolved?\");\n}\nclass NoSuspenseBoundaryError extends Error {\n    constructor(options) {\n        super((0,_strings__WEBPACK_IMPORTED_MODULE_3__.deindent) `\n      ${options.caller ?? \"This code path\"} attempted to display a loading indicator, but didn't find a Suspense boundary above it. Please read the error message below carefully.\n      \n      The fix depends on which of the 3 scenarios caused it:\n      \n      1. You are missing a loading.tsx file in your app directory. Fix it by adding a loading.tsx file in your app directory.\n\n      2. The component is rendered in the root (outermost) layout.tsx or template.tsx file. Next.js does not wrap those files in a Suspense boundary, even if there is a loading.tsx file in the same folder. To fix it, wrap your layout inside a route group like this:\n\n        - app\n        - - layout.tsx  // contains <html> and <body>, alongside providers and other components that don't need ${options.caller ?? \"this code path\"}\n        - - loading.tsx  // required for suspense\n        - - (main)\n        - - - layout.tsx  // contains the main layout of your app, like a sidebar or a header, and can use ${options.caller ?? \"this code path\"}\n        - - - route.tsx  // your actual main page\n        - - - the rest of your app\n\n        For more information on this approach, see Next's documentation on route groups: https://nextjs.org/docs/app/building-your-application/routing/route-groups\n      \n      3. You caught this error with try-catch or a custom error boundary. Fix this by rethrowing the error or not catching it in the first place.\n\n      See: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout\n\n      More information on SSR and Suspense boundaries: https://react.dev/reference/react/Suspense#providing-a-fallback-for-server-errors-and-client-only-content\n    `);\n        this.name = \"NoSuspenseBoundaryError\";\n        this.reason = options.caller ?? \"suspendIfSsr()\";\n        // set the digest so nextjs doesn't log the error\n        // https://github.com/vercel/next.js/blob/d01d6d9c35a8c2725b3d74c1402ab76d4779a6cf/packages/next/src/shared/lib/lazy-dynamic/bailout-to-csr.ts#L14\n        this.digest = \"BAILOUT_TO_CLIENT_SIDE_RENDERING\";\n    }\n}\n undefined;\n/**\n * Use this in a component or a hook to disable SSR. Should be wrapped in a Suspense boundary, or it will throw an error.\n */\nfunction suspendIfSsr(caller) {\n    if (!(0,_env__WEBPACK_IMPORTED_MODULE_1__.isBrowserLike)()) {\n        throw new NoSuspenseBoundaryError({ caller });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9yZWFjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBMEI7QUFDWTtBQUNJO0FBQ0w7QUFDOUI7QUFDUDtBQUNBLG9CQUFvQiwwQ0FBYTtBQUNqQztBQUNBO0FBQ0EsZUFBZSw2Q0FBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBeUJFO0FBQ0s7QUFDUDtBQUNBLGtCQUFrQixLQUFLO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLFlBQVk7QUFDdEQ7QUFDQSxVQXFDRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLGlKQUFpSjtBQUNqSjtBQUNPO0FBQ1AsSUFBSSxzQ0FBUyxDQUFDLHVEQUFZO0FBQzFCO0FBQ0E7QUFDTztBQUNQO0FBQ0EsY0FBYyxrREFBUTtBQUN0QixRQUFRLG9DQUFvQztBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGtIQUFrSDtBQUNsSDtBQUNBO0FBQ0EsNkdBQTZHO0FBQzdHO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBaUJFO0FBQ0Y7QUFDQTtBQUNBO0FBQ087QUFDUCxTQUFTLG1EQUFhO0FBQ3RCLDRDQUE0QyxRQUFRO0FBQ3BEO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2hhcmVkXFxkaXN0XFx1dGlsc1xccmVhY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgaXNCcm93c2VyTGlrZSB9IGZyb20gXCIuL2VudlwiO1xuaW1wb3J0IHsgbmV2ZXJSZXNvbHZlIH0gZnJvbSBcIi4vcHJvbWlzZXNcIjtcbmltcG9ydCB7IGRlaW5kZW50IH0gZnJvbSBcIi4vc3RyaW5nc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGZvcndhcmRSZWZJZk5lZWRlZChyZW5kZXIpIHtcbiAgICAvLyBUT0RPOiB3aGVuIHdlIGRyb3Agc3VwcG9ydCBmb3IgcmVhY3QgMTgsIHJlbW92ZSB0aGlzXG4gICAgY29uc3QgdmVyc2lvbiA9IFJlYWN0LnZlcnNpb247XG4gICAgY29uc3QgbWFqb3IgPSBwYXJzZUludCh2ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSk7XG4gICAgaWYgKG1ham9yIDwgMTkpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmZvcndhcmRSZWYocmVuZGVyKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAoKHByb3BzKSA9PiByZW5kZXIocHJvcHMsIHByb3BzLnJlZikpO1xuICAgIH1cbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImZvcndhcmRSZWZJZk5lZWRlZFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIE1vY2sgUmVhY3QudmVyc2lvbiBhbmQgUmVhY3QuZm9yd2FyZFJlZlxuICAgIGNvbnN0IG9yaWdpbmFsVmVyc2lvbiA9IFJlYWN0LnZlcnNpb247XG4gICAgY29uc3Qgb3JpZ2luYWxGb3J3YXJkUmVmID0gUmVhY3QuZm9yd2FyZFJlZjtcbiAgICB0cnkge1xuICAgICAgICAvLyBUZXN0IHdpdGggUmVhY3QgdmVyc2lvbiA8IDE5XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFjdCwgJ3ZlcnNpb24nLCB7IHZhbHVlOiAnMTguMi4wJywgd3JpdGFibGU6IHRydWUgfSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIHJlbmRlciBmdW5jdGlvblxuICAgICAgICBjb25zdCByZW5kZXJGbiA9IChwcm9wcywgcmVmKSA9PiBudWxsO1xuICAgICAgICAvLyBDYWxsIGZvcndhcmRSZWZJZk5lZWRlZFxuICAgICAgICBjb25zdCByZXN1bHQgPSBmb3J3YXJkUmVmSWZOZWVkZWQocmVuZGVyRm4pO1xuICAgICAgICAvLyBWZXJpZnkgdGhlIGZ1bmN0aW9uIHJldHVybnMgc29tZXRoaW5nXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIC8vIFRlc3Qgd2l0aCBSZWFjdCB2ZXJzaW9uID49IDE5XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFjdCwgJ3ZlcnNpb24nLCB7IHZhbHVlOiAnMTkuMC4wJywgd3JpdGFibGU6IHRydWUgfSk7XG4gICAgICAgIC8vIENhbGwgZm9yd2FyZFJlZklmTmVlZGVkIGFnYWluIHdpdGggUmVhY3QgMTlcbiAgICAgICAgY29uc3QgcmVzdWx0MTkgPSBmb3J3YXJkUmVmSWZOZWVkZWQocmVuZGVyRm4pO1xuICAgICAgICAvLyBWZXJpZnkgdGhlIGZ1bmN0aW9uIHJldHVybnMgc29tZXRoaW5nXG4gICAgICAgIGV4cGVjdChyZXN1bHQxOSkudG9CZURlZmluZWQoKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgdmFsdWVzXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFjdCwgJ3ZlcnNpb24nLCB7IHZhbHVlOiBvcmlnaW5hbFZlcnNpb24gfSk7XG4gICAgICAgIFJlYWN0LmZvcndhcmRSZWYgPSBvcmlnaW5hbEZvcndhcmRSZWY7XG4gICAgfVxufSk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9kZVRleHQobm9kZSkge1xuICAgIGlmIChbXCJudW1iZXJcIiwgXCJzdHJpbmdcIl0uaW5jbHVkZXModHlwZW9mIG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBgJHtub2RlfWA7XG4gICAgfVxuICAgIGlmICghbm9kZSkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUubWFwKGdldE5vZGVUZXh0KS5qb2luKFwiXCIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5vZGUgPT09IFwib2JqZWN0XCIgJiYgXCJwcm9wc1wiIGluIG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGdldE5vZGVUZXh0KG5vZGUucHJvcHMuY2hpbGRyZW4pO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gbm9kZSB0eXBlOiAke3R5cGVvZiBub2RlfWApO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiZ2V0Tm9kZVRleHRcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggc3RyaW5nXG4gICAgZXhwZWN0KGdldE5vZGVUZXh0KFwiaGVsbG9cIikpLnRvQmUoXCJoZWxsb1wiKTtcbiAgICAvLyBUZXN0IHdpdGggbnVtYmVyXG4gICAgZXhwZWN0KGdldE5vZGVUZXh0KDQyKSkudG9CZShcIjQyXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBudWxsL3VuZGVmaW5lZFxuICAgIGV4cGVjdChnZXROb2RlVGV4dChudWxsKSkudG9CZShcIlwiKTtcbiAgICBleHBlY3QoZ2V0Tm9kZVRleHQodW5kZWZpbmVkKSkudG9CZShcIlwiKTtcbiAgICAvLyBUZXN0IHdpdGggYXJyYXlcbiAgICBleHBlY3QoZ2V0Tm9kZVRleHQoW1wiaGVsbG9cIiwgXCIgXCIsIFwid29ybGRcIl0pKS50b0JlKFwiaGVsbG8gd29ybGRcIik7XG4gICAgZXhwZWN0KGdldE5vZGVUZXh0KFsxLCAyLCAzXSkpLnRvQmUoXCIxMjNcIik7XG4gICAgLy8gVGVzdCB3aXRoIG1peGVkIGFycmF5XG4gICAgZXhwZWN0KGdldE5vZGVUZXh0KFtcImhlbGxvXCIsIDQyLCBudWxsXSkpLnRvQmUoXCJoZWxsbzQyXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBSZWFjdCBlbGVtZW50IChtb2NrZWQpXG4gICAgY29uc3QgbW9ja0VsZW1lbnQgPSB7XG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICBjaGlsZHJlbjogXCJjaGlsZCB0ZXh0XCJcbiAgICAgICAgfVxuICAgIH07XG4gICAgZXhwZWN0KGdldE5vZGVUZXh0KG1vY2tFbGVtZW50KSkudG9CZShcImNoaWxkIHRleHRcIik7XG4gICAgLy8gVGVzdCB3aXRoIG5lc3RlZCBSZWFjdCBlbGVtZW50c1xuICAgIGNvbnN0IG5lc3RlZEVsZW1lbnQgPSB7XG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICBjaGlsZHJlbjoge1xuICAgICAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIm5lc3RlZCB0ZXh0XCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGV4cGVjdChnZXROb2RlVGV4dChuZXN0ZWRFbGVtZW50KSkudG9CZShcIm5lc3RlZCB0ZXh0XCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBhcnJheSBvZiBSZWFjdCBlbGVtZW50c1xuICAgIGNvbnN0IGFycmF5T2ZFbGVtZW50cyA9IFtcbiAgICAgICAgeyBwcm9wczogeyBjaGlsZHJlbjogXCJmaXJzdFwiIH0gfSxcbiAgICAgICAgeyBwcm9wczogeyBjaGlsZHJlbjogXCJzZWNvbmRcIiB9IH1cbiAgICBdO1xuICAgIGV4cGVjdChnZXROb2RlVGV4dChhcnJheU9mRWxlbWVudHMpKS50b0JlKFwiZmlyc3RzZWNvbmRcIik7XG59KTtcbi8qKlxuICogU3VzcGVuZHMgdGhlIGN1cnJlbnRseSByZW5kZXJlZCBjb21wb25lbnQgaW5kZWZpbml0ZWx5LiBXaWxsIG5vdCB1bnN1c3BlbmQgdW5sZXNzIHRoZSBjb21wb25lbnQgcmVyZW5kZXJzLlxuICpcbiAqIFlvdSBjYW4gdXNlIHRoaXMgdG8gdHJhbnNsYXRlIG9sZGVyIHF1ZXJ5LSBvciBBc3luY1Jlc3VsdC1iYXNlZCBjb2RlIHRvIG5ldyB0aGUgU3VzcGVuc2Ugc3lzdGVtLCBmb3IgZXhhbXBsZTogYGlmIChxdWVyeS5pc0xvYWRpbmcpIHN1c3BlbmQoKTtgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdXNwZW5kKCkge1xuICAgIFJlYWN0LnVzZShuZXZlclJlc29sdmUoKSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU29tZWhvdyBhIFByb21pc2UgdGhhdCBuZXZlciByZXNvbHZlcyB3YXMgcmVzb2x2ZWQ/XCIpO1xufVxuZXhwb3J0IGNsYXNzIE5vU3VzcGVuc2VCb3VuZGFyeUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoZGVpbmRlbnQgYFxuICAgICAgJHtvcHRpb25zLmNhbGxlciA/PyBcIlRoaXMgY29kZSBwYXRoXCJ9IGF0dGVtcHRlZCB0byBkaXNwbGF5IGEgbG9hZGluZyBpbmRpY2F0b3IsIGJ1dCBkaWRuJ3QgZmluZCBhIFN1c3BlbnNlIGJvdW5kYXJ5IGFib3ZlIGl0LiBQbGVhc2UgcmVhZCB0aGUgZXJyb3IgbWVzc2FnZSBiZWxvdyBjYXJlZnVsbHkuXG4gICAgICBcbiAgICAgIFRoZSBmaXggZGVwZW5kcyBvbiB3aGljaCBvZiB0aGUgMyBzY2VuYXJpb3MgY2F1c2VkIGl0OlxuICAgICAgXG4gICAgICAxLiBZb3UgYXJlIG1pc3NpbmcgYSBsb2FkaW5nLnRzeCBmaWxlIGluIHlvdXIgYXBwIGRpcmVjdG9yeS4gRml4IGl0IGJ5IGFkZGluZyBhIGxvYWRpbmcudHN4IGZpbGUgaW4geW91ciBhcHAgZGlyZWN0b3J5LlxuXG4gICAgICAyLiBUaGUgY29tcG9uZW50IGlzIHJlbmRlcmVkIGluIHRoZSByb290IChvdXRlcm1vc3QpIGxheW91dC50c3ggb3IgdGVtcGxhdGUudHN4IGZpbGUuIE5leHQuanMgZG9lcyBub3Qgd3JhcCB0aG9zZSBmaWxlcyBpbiBhIFN1c3BlbnNlIGJvdW5kYXJ5LCBldmVuIGlmIHRoZXJlIGlzIGEgbG9hZGluZy50c3ggZmlsZSBpbiB0aGUgc2FtZSBmb2xkZXIuIFRvIGZpeCBpdCwgd3JhcCB5b3VyIGxheW91dCBpbnNpZGUgYSByb3V0ZSBncm91cCBsaWtlIHRoaXM6XG5cbiAgICAgICAgLSBhcHBcbiAgICAgICAgLSAtIGxheW91dC50c3ggIC8vIGNvbnRhaW5zIDxodG1sPiBhbmQgPGJvZHk+LCBhbG9uZ3NpZGUgcHJvdmlkZXJzIGFuZCBvdGhlciBjb21wb25lbnRzIHRoYXQgZG9uJ3QgbmVlZCAke29wdGlvbnMuY2FsbGVyID8/IFwidGhpcyBjb2RlIHBhdGhcIn1cbiAgICAgICAgLSAtIGxvYWRpbmcudHN4ICAvLyByZXF1aXJlZCBmb3Igc3VzcGVuc2VcbiAgICAgICAgLSAtIChtYWluKVxuICAgICAgICAtIC0gLSBsYXlvdXQudHN4ICAvLyBjb250YWlucyB0aGUgbWFpbiBsYXlvdXQgb2YgeW91ciBhcHAsIGxpa2UgYSBzaWRlYmFyIG9yIGEgaGVhZGVyLCBhbmQgY2FuIHVzZSAke29wdGlvbnMuY2FsbGVyID8/IFwidGhpcyBjb2RlIHBhdGhcIn1cbiAgICAgICAgLSAtIC0gcm91dGUudHN4ICAvLyB5b3VyIGFjdHVhbCBtYWluIHBhZ2VcbiAgICAgICAgLSAtIC0gdGhlIHJlc3Qgb2YgeW91ciBhcHBcblxuICAgICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGlzIGFwcHJvYWNoLCBzZWUgTmV4dCdzIGRvY3VtZW50YXRpb24gb24gcm91dGUgZ3JvdXBzOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9hcHAvYnVpbGRpbmcteW91ci1hcHBsaWNhdGlvbi9yb3V0aW5nL3JvdXRlLWdyb3Vwc1xuICAgICAgXG4gICAgICAzLiBZb3UgY2F1Z2h0IHRoaXMgZXJyb3Igd2l0aCB0cnktY2F0Y2ggb3IgYSBjdXN0b20gZXJyb3IgYm91bmRhcnkuIEZpeCB0aGlzIGJ5IHJldGhyb3dpbmcgdGhlIGVycm9yIG9yIG5vdCBjYXRjaGluZyBpdCBpbiB0aGUgZmlyc3QgcGxhY2UuXG5cbiAgICAgIFNlZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvbWVzc2FnZXMvbWlzc2luZy1zdXNwZW5zZS13aXRoLWNzci1iYWlsb3V0XG5cbiAgICAgIE1vcmUgaW5mb3JtYXRpb24gb24gU1NSIGFuZCBTdXNwZW5zZSBib3VuZGFyaWVzOiBodHRwczovL3JlYWN0LmRldi9yZWZlcmVuY2UvcmVhY3QvU3VzcGVuc2UjcHJvdmlkaW5nLWEtZmFsbGJhY2stZm9yLXNlcnZlci1lcnJvcnMtYW5kLWNsaWVudC1vbmx5LWNvbnRlbnRcbiAgICBgKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJOb1N1c3BlbnNlQm91bmRhcnlFcnJvclwiO1xuICAgICAgICB0aGlzLnJlYXNvbiA9IG9wdGlvbnMuY2FsbGVyID8/IFwic3VzcGVuZElmU3NyKClcIjtcbiAgICAgICAgLy8gc2V0IHRoZSBkaWdlc3Qgc28gbmV4dGpzIGRvZXNuJ3QgbG9nIHRoZSBlcnJvclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanMvYmxvYi9kMDFkNmQ5YzM1YThjMjcyNWIzZDc0YzE0MDJhYjc2ZDQ3NzlhNmNmL3BhY2thZ2VzL25leHQvc3JjL3NoYXJlZC9saWIvbGF6eS1keW5hbWljL2JhaWxvdXQtdG8tY3NyLnRzI0wxNFxuICAgICAgICB0aGlzLmRpZ2VzdCA9IFwiQkFJTE9VVF9UT19DTElFTlRfU0lERV9SRU5ERVJJTkdcIjtcbiAgICB9XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJOb1N1c3BlbnNlQm91bmRhcnlFcnJvclwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBkZWZhdWx0IG9wdGlvbnNcbiAgICBjb25zdCBkZWZhdWx0RXJyb3IgPSBuZXcgTm9TdXNwZW5zZUJvdW5kYXJ5RXJyb3Ioe30pO1xuICAgIGV4cGVjdChkZWZhdWx0RXJyb3IubmFtZSkudG9CZShcIk5vU3VzcGVuc2VCb3VuZGFyeUVycm9yXCIpO1xuICAgIGV4cGVjdChkZWZhdWx0RXJyb3IucmVhc29uKS50b0JlKFwic3VzcGVuZElmU3NyKClcIik7XG4gICAgZXhwZWN0KGRlZmF1bHRFcnJvci5kaWdlc3QpLnRvQmUoXCJCQUlMT1VUX1RPX0NMSUVOVF9TSURFX1JFTkRFUklOR1wiKTtcbiAgICBleHBlY3QoZGVmYXVsdEVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbihcIlRoaXMgY29kZSBwYXRoIGF0dGVtcHRlZCB0byBkaXNwbGF5IGEgbG9hZGluZyBpbmRpY2F0b3JcIik7XG4gICAgLy8gVGVzdCB3aXRoIGN1c3RvbSBjYWxsZXJcbiAgICBjb25zdCBjdXN0b21FcnJvciA9IG5ldyBOb1N1c3BlbnNlQm91bmRhcnlFcnJvcih7IGNhbGxlcjogXCJDdXN0b21Db21wb25lbnRcIiB9KTtcbiAgICBleHBlY3QoY3VzdG9tRXJyb3IubmFtZSkudG9CZShcIk5vU3VzcGVuc2VCb3VuZGFyeUVycm9yXCIpO1xuICAgIGV4cGVjdChjdXN0b21FcnJvci5yZWFzb24pLnRvQmUoXCJDdXN0b21Db21wb25lbnRcIik7XG4gICAgZXhwZWN0KGN1c3RvbUVycm9yLmRpZ2VzdCkudG9CZShcIkJBSUxPVVRfVE9fQ0xJRU5UX1NJREVfUkVOREVSSU5HXCIpO1xuICAgIGV4cGVjdChjdXN0b21FcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oXCJDdXN0b21Db21wb25lbnQgYXR0ZW1wdGVkIHRvIGRpc3BsYXkgYSBsb2FkaW5nIGluZGljYXRvclwiKTtcbiAgICAvLyBWZXJpZnkgZXJyb3IgbWVzc2FnZSBjb250YWlucyBhbGwgdGhlIG5lY2Vzc2FyeSBpbmZvcm1hdGlvblxuICAgIGV4cGVjdChjdXN0b21FcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oXCJsb2FkaW5nLnRzeFwiKTtcbiAgICBleHBlY3QoY3VzdG9tRXJyb3IubWVzc2FnZSkudG9Db250YWluKFwicm91dGUgZ3JvdXBzXCIpO1xuICAgIGV4cGVjdChjdXN0b21FcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oXCJodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9taXNzaW5nLXN1c3BlbnNlLXdpdGgtY3NyLWJhaWxvdXRcIik7XG59KTtcbi8qKlxuICogVXNlIHRoaXMgaW4gYSBjb21wb25lbnQgb3IgYSBob29rIHRvIGRpc2FibGUgU1NSLiBTaG91bGQgYmUgd3JhcHBlZCBpbiBhIFN1c3BlbnNlIGJvdW5kYXJ5LCBvciBpdCB3aWxsIHRocm93IGFuIGVycm9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3VzcGVuZElmU3NyKGNhbGxlcikge1xuICAgIGlmICghaXNCcm93c2VyTGlrZSgpKSB7XG4gICAgICAgIHRocm93IG5ldyBOb1N1c3BlbnNlQm91bmRhcnlFcnJvcih7IGNhbGxlciB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/react.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/results.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncResult: () => (/* binding */ AsyncResult),\n/* harmony export */   Result: () => (/* binding */ Result)\n/* harmony export */ });\n/* harmony import */ var _promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./promises */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\nconst Result = {\n    fromThrowing,\n    fromThrowingAsync,\n    fromPromise: promiseToResult,\n    ok(data) {\n        return {\n            status: \"ok\",\n            data,\n        };\n    },\n    error(error) {\n        return {\n            status: \"error\",\n            error,\n        };\n    },\n    map: mapResult,\n    or: (result, fallback) => {\n        return result.status === \"ok\" ? result.data : fallback;\n    },\n    orThrow: (result) => {\n        if (result.status === \"error\") {\n            throw result.error;\n        }\n        return result.data;\n    },\n    orThrowAsync: async (result) => {\n        return Result.orThrow(await result);\n    },\n    retry,\n};\n undefined;\n undefined;\n undefined;\n undefined;\nconst AsyncResult = {\n    fromThrowing,\n    fromPromise: promiseToResult,\n    ok: Result.ok,\n    error: Result.error,\n    pending,\n    map: mapResult,\n    or: (result, fallback) => {\n        if (result.status === \"pending\") {\n            return fallback;\n        }\n        return Result.or(result, fallback);\n    },\n    orThrow: (result) => {\n        if (result.status === \"pending\") {\n            throw new Error(\"Result still pending\");\n        }\n        return Result.orThrow(result);\n    },\n    retry,\n};\n undefined;\n undefined;\nfunction pending(progress) {\n    return {\n        status: \"pending\",\n        progress: progress,\n    };\n}\n undefined;\nasync function promiseToResult(promise) {\n    try {\n        const value = await promise;\n        return Result.ok(value);\n    }\n    catch (error) {\n        return Result.error(error);\n    }\n}\n undefined;\nfunction fromThrowing(fn) {\n    try {\n        return Result.ok(fn());\n    }\n    catch (error) {\n        return Result.error(error);\n    }\n}\n undefined;\nasync function fromThrowingAsync(fn) {\n    try {\n        return Result.ok(await fn());\n    }\n    catch (error) {\n        return Result.error(error);\n    }\n}\n undefined;\nfunction mapResult(result, fn) {\n    if (result.status === \"error\")\n        return {\n            status: \"error\",\n            error: result.error,\n        };\n    if (result.status === \"pending\")\n        return {\n            status: \"pending\",\n            ...\"progress\" in result ? { progress: result.progress } : {},\n        };\n    return Result.ok(fn(result.data));\n}\n undefined;\nclass RetryError extends AggregateError {\n    constructor(errors) {\n        const strings = errors.map(e => (0,_strings__WEBPACK_IMPORTED_MODULE_1__.nicify)(e));\n        const isAllSame = strings.length > 1 && strings.every(s => s === strings[0]);\n        super(errors, (0,_strings__WEBPACK_IMPORTED_MODULE_1__.deindent) `\n      Error after ${errors.length} attempts.\n      \n      ${isAllSame ? (0,_strings__WEBPACK_IMPORTED_MODULE_1__.deindent) `\n        Attempts 1-${errors.length}:\n          ${strings[0]}\n      ` : strings.map((s, i) => (0,_strings__WEBPACK_IMPORTED_MODULE_1__.deindent) `\n          Attempt ${i + 1}:\n            ${s}\n        `).join(\"\\n\\n\")}\n      `, { cause: errors[errors.length - 1] });\n        this.errors = errors;\n        this.name = \"RetryError\";\n    }\n    get attempts() {\n        return this.errors.length;\n    }\n}\nRetryError.prototype.name = \"RetryError\";\n undefined;\nasync function retry(fn, totalAttempts, { exponentialDelayBase = 1000 } = {}) {\n    const errors = [];\n    for (let i = 0; i < totalAttempts; i++) {\n        const res = await fn(i);\n        if (res.status === \"ok\") {\n            return Object.assign(Result.ok(res.data), { attempts: i + 1 });\n        }\n        else {\n            errors.push(res.error);\n            if (i < totalAttempts - 1) {\n                await (0,_promises__WEBPACK_IMPORTED_MODULE_0__.wait)((Math.random() + 0.5) * exponentialDelayBase * (2 ** i));\n            }\n        }\n    }\n    return Object.assign(Result.error(new RetryError(errors)), { attempts: totalAttempts });\n}\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9yZXN1bHRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0M7QUFDVztBQUN0QztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxVQVVFO0FBQ0YsVUFPRTtBQUNGLFVBUUU7QUFDRixVQVFFO0FBQ0s7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFVBVUU7QUFDRixVQVdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFVRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBZ0JFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBa0JFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBa0JFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDRCQUE0QixJQUFJO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLFVBOEJFO0FBQ0Y7QUFDQTtBQUNBLHdDQUF3QyxnREFBTTtBQUM5QztBQUNBLHNCQUFzQixrREFBUTtBQUM5QixvQkFBb0IsZUFBZTtBQUNuQztBQUNBLFFBQVEsWUFBWSxrREFBUTtBQUM1QixxQkFBcUIsY0FBYztBQUNuQyxZQUFZO0FBQ1osZ0NBQWdDLGtEQUFRO0FBQ3hDLG9CQUFvQixNQUFNO0FBQzFCLGNBQWM7QUFDZDtBQUNBLFdBQVcsa0NBQWtDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQTZCRTtBQUNGLDBDQUEwQyw4QkFBOEIsSUFBSTtBQUM1RTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBLHdEQUF3RCxpQkFBaUI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0NBQUk7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLHlCQUF5QjtBQUMxRjtBQUNBLFVBdUJFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcdXRpbHNcXHJlc3VsdHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuL3Byb21pc2VzXCI7XG5pbXBvcnQgeyBkZWluZGVudCwgbmljaWZ5IH0gZnJvbSBcIi4vc3RyaW5nc1wiO1xuZXhwb3J0IGNvbnN0IFJlc3VsdCA9IHtcbiAgICBmcm9tVGhyb3dpbmcsXG4gICAgZnJvbVRocm93aW5nQXN5bmMsXG4gICAgZnJvbVByb21pc2U6IHByb21pc2VUb1Jlc3VsdCxcbiAgICBvayhkYXRhKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IFwib2tcIixcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBlcnJvcihlcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIG1hcDogbWFwUmVzdWx0LFxuICAgIG9yOiAocmVzdWx0LCBmYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gcmVzdWx0LnN0YXR1cyA9PT0gXCJva1wiID8gcmVzdWx0LmRhdGEgOiBmYWxsYmFjaztcbiAgICB9LFxuICAgIG9yVGhyb3c6IChyZXN1bHQpID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICB9LFxuICAgIG9yVGhyb3dBc3luYzogYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICByZXR1cm4gUmVzdWx0Lm9yVGhyb3coYXdhaXQgcmVzdWx0KTtcbiAgICB9LFxuICAgIHJldHJ5LFxufTtcbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcIlJlc3VsdC5vayBhbmQgUmVzdWx0LmVycm9yXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCBSZXN1bHQub2tcbiAgICBjb25zdCBva1Jlc3VsdCA9IFJlc3VsdC5vayg0Mik7XG4gICAgZXhwZWN0KG9rUmVzdWx0LnN0YXR1cykudG9CZShcIm9rXCIpO1xuICAgIGV4cGVjdChva1Jlc3VsdC5kYXRhKS50b0JlKDQyKTtcbiAgICAvLyBUZXN0IFJlc3VsdC5lcnJvclxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiVGVzdCBlcnJvclwiKTtcbiAgICBjb25zdCBlcnJvclJlc3VsdCA9IFJlc3VsdC5lcnJvcihlcnJvcik7XG4gICAgZXhwZWN0KGVycm9yUmVzdWx0LnN0YXR1cykudG9CZShcImVycm9yXCIpO1xuICAgIGV4cGVjdChlcnJvclJlc3VsdC5lcnJvcikudG9CZShlcnJvcik7XG59KTtcbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcIlJlc3VsdC5vclwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBvayByZXN1bHRcbiAgICBjb25zdCBva1Jlc3VsdCA9IHsgc3RhdHVzOiBcIm9rXCIsIGRhdGE6IDQyIH07XG4gICAgZXhwZWN0KFJlc3VsdC5vcihva1Jlc3VsdCwgMCkpLnRvQmUoNDIpO1xuICAgIC8vIFRlc3Qgd2l0aCBlcnJvciByZXN1bHRcbiAgICBjb25zdCBlcnJvclJlc3VsdCA9IHsgc3RhdHVzOiBcImVycm9yXCIsIGVycm9yOiBcImVycm9yIG1lc3NhZ2VcIiB9O1xuICAgIGV4cGVjdChSZXN1bHQub3IoZXJyb3JSZXN1bHQsIDApKS50b0JlKDApO1xufSk7XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJSZXN1bHQub3JUaHJvd1wiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBvayByZXN1bHRcbiAgICBjb25zdCBva1Jlc3VsdCA9IHsgc3RhdHVzOiBcIm9rXCIsIGRhdGE6IDQyIH07XG4gICAgZXhwZWN0KFJlc3VsdC5vclRocm93KG9rUmVzdWx0KSkudG9CZSg0Mik7XG4gICAgLy8gVGVzdCB3aXRoIGVycm9yIHJlc3VsdFxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiVGVzdCBlcnJvclwiKTtcbiAgICBjb25zdCBlcnJvclJlc3VsdCA9IHsgc3RhdHVzOiBcImVycm9yXCIsIGVycm9yIH07XG4gICAgZXhwZWN0KCgpID0+IFJlc3VsdC5vclRocm93KGVycm9yUmVzdWx0KSkudG9UaHJvdyhlcnJvcik7XG59KTtcbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcIlJlc3VsdC5vclRocm93QXN5bmNcIiwgYXN5bmMgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggb2sgcmVzdWx0XG4gICAgY29uc3Qgb2tQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHsgc3RhdHVzOiBcIm9rXCIsIGRhdGE6IDQyIH0pO1xuICAgIGV4cGVjdChhd2FpdCBSZXN1bHQub3JUaHJvd0FzeW5jKG9rUHJvbWlzZSkpLnRvQmUoNDIpO1xuICAgIC8vIFRlc3Qgd2l0aCBlcnJvciByZXN1bHRcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIlRlc3QgZXJyb3JcIik7XG4gICAgY29uc3QgZXJyb3JQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHsgc3RhdHVzOiBcImVycm9yXCIsIGVycm9yIH0pO1xuICAgIGF3YWl0IGV4cGVjdChSZXN1bHQub3JUaHJvd0FzeW5jKGVycm9yUHJvbWlzZSkpLnJlamVjdHMudG9UaHJvdyhlcnJvcik7XG59KTtcbmV4cG9ydCBjb25zdCBBc3luY1Jlc3VsdCA9IHtcbiAgICBmcm9tVGhyb3dpbmcsXG4gICAgZnJvbVByb21pc2U6IHByb21pc2VUb1Jlc3VsdCxcbiAgICBvazogUmVzdWx0Lm9rLFxuICAgIGVycm9yOiBSZXN1bHQuZXJyb3IsXG4gICAgcGVuZGluZyxcbiAgICBtYXA6IG1hcFJlc3VsdCxcbiAgICBvcjogKHJlc3VsdCwgZmFsbGJhY2spID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwicGVuZGluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vcihyZXN1bHQsIGZhbGxiYWNrKTtcbiAgICB9LFxuICAgIG9yVGhyb3c6IChyZXN1bHQpID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwicGVuZGluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXN1bHQgc3RpbGwgcGVuZGluZ1wiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVzdWx0Lm9yVGhyb3cocmVzdWx0KTtcbiAgICB9LFxuICAgIHJldHJ5LFxufTtcbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcIkFzeW5jUmVzdWx0Lm9yXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIG9rIHJlc3VsdFxuICAgIGNvbnN0IG9rUmVzdWx0ID0geyBzdGF0dXM6IFwib2tcIiwgZGF0YTogNDIgfTtcbiAgICBleHBlY3QoQXN5bmNSZXN1bHQub3Iob2tSZXN1bHQsIDApKS50b0JlKDQyKTtcbiAgICAvLyBUZXN0IHdpdGggZXJyb3IgcmVzdWx0XG4gICAgY29uc3QgZXJyb3JSZXN1bHQgPSB7IHN0YXR1czogXCJlcnJvclwiLCBlcnJvcjogXCJlcnJvciBtZXNzYWdlXCIgfTtcbiAgICBleHBlY3QoQXN5bmNSZXN1bHQub3IoZXJyb3JSZXN1bHQsIDApKS50b0JlKDApO1xuICAgIC8vIFRlc3Qgd2l0aCBwZW5kaW5nIHJlc3VsdFxuICAgIGNvbnN0IHBlbmRpbmdSZXN1bHQgPSB7IHN0YXR1czogXCJwZW5kaW5nXCIsIHByb2dyZXNzOiB1bmRlZmluZWQgfTtcbiAgICBleHBlY3QoQXN5bmNSZXN1bHQub3IocGVuZGluZ1Jlc3VsdCwgMCkpLnRvQmUoMCk7XG59KTtcbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcIkFzeW5jUmVzdWx0Lm9yVGhyb3dcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggb2sgcmVzdWx0XG4gICAgY29uc3Qgb2tSZXN1bHQgPSB7IHN0YXR1czogXCJva1wiLCBkYXRhOiA0MiB9O1xuICAgIGV4cGVjdChBc3luY1Jlc3VsdC5vclRocm93KG9rUmVzdWx0KSkudG9CZSg0Mik7XG4gICAgLy8gVGVzdCB3aXRoIGVycm9yIHJlc3VsdFxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiVGVzdCBlcnJvclwiKTtcbiAgICBjb25zdCBlcnJvclJlc3VsdCA9IHsgc3RhdHVzOiBcImVycm9yXCIsIGVycm9yIH07XG4gICAgZXhwZWN0KCgpID0+IEFzeW5jUmVzdWx0Lm9yVGhyb3coZXJyb3JSZXN1bHQpKS50b1Rocm93KGVycm9yKTtcbiAgICAvLyBUZXN0IHdpdGggcGVuZGluZyByZXN1bHRcbiAgICBjb25zdCBwZW5kaW5nUmVzdWx0ID0geyBzdGF0dXM6IFwicGVuZGluZ1wiLCBwcm9ncmVzczogdW5kZWZpbmVkIH07XG4gICAgZXhwZWN0KCgpID0+IEFzeW5jUmVzdWx0Lm9yVGhyb3cocGVuZGluZ1Jlc3VsdCkpLnRvVGhyb3coXCJSZXN1bHQgc3RpbGwgcGVuZGluZ1wiKTtcbn0pO1xuZnVuY3Rpb24gcGVuZGluZyhwcm9ncmVzcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogXCJwZW5kaW5nXCIsXG4gICAgICAgIHByb2dyZXNzOiBwcm9ncmVzcyxcbiAgICB9O1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwicGVuZGluZ1wiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aG91dCBwcm9ncmVzc1xuICAgIGNvbnN0IHBlbmRpbmdSZXN1bHQgPSBwZW5kaW5nKCk7XG4gICAgZXhwZWN0KHBlbmRpbmdSZXN1bHQuc3RhdHVzKS50b0JlKFwicGVuZGluZ1wiKTtcbiAgICBleHBlY3QocGVuZGluZ1Jlc3VsdC5wcm9ncmVzcykudG9CZSh1bmRlZmluZWQpO1xuICAgIC8vIFRlc3Qgd2l0aCBwcm9ncmVzc1xuICAgIGNvbnN0IHByb2dyZXNzVmFsdWUgPSB7IGxvYWRlZDogNTAsIHRvdGFsOiAxMDAgfTtcbiAgICBjb25zdCBwZW5kaW5nV2l0aFByb2dyZXNzID0gcGVuZGluZyhwcm9ncmVzc1ZhbHVlKTtcbiAgICBleHBlY3QocGVuZGluZ1dpdGhQcm9ncmVzcy5zdGF0dXMpLnRvQmUoXCJwZW5kaW5nXCIpO1xuICAgIGV4cGVjdChwZW5kaW5nV2l0aFByb2dyZXNzLnByb2dyZXNzKS50b0JlKHByb2dyZXNzVmFsdWUpO1xufSk7XG5hc3luYyBmdW5jdGlvbiBwcm9taXNlVG9SZXN1bHQocHJvbWlzZSkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vayh2YWx1ZSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJwcm9taXNlVG9SZXN1bHRcIiwgYXN5bmMgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggcmVzb2x2ZWQgcHJvbWlzZVxuICAgIGNvbnN0IHJlc29sdmVkUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSg0Mik7XG4gICAgY29uc3QgcmVzb2x2ZWRSZXN1bHQgPSBhd2FpdCBwcm9taXNlVG9SZXN1bHQocmVzb2x2ZWRQcm9taXNlKTtcbiAgICBleHBlY3QocmVzb2x2ZWRSZXN1bHQuc3RhdHVzKS50b0JlKFwib2tcIik7XG4gICAgaWYgKHJlc29sdmVkUmVzdWx0LnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICAgIGV4cGVjdChyZXNvbHZlZFJlc3VsdC5kYXRhKS50b0JlKDQyKTtcbiAgICB9XG4gICAgLy8gVGVzdCB3aXRoIHJlamVjdGVkIHByb21pc2VcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIlRlc3QgZXJyb3JcIik7XG4gICAgY29uc3QgcmVqZWN0ZWRQcm9taXNlID0gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIGNvbnN0IHJlamVjdGVkUmVzdWx0ID0gYXdhaXQgcHJvbWlzZVRvUmVzdWx0KHJlamVjdGVkUHJvbWlzZSk7XG4gICAgZXhwZWN0KHJlamVjdGVkUmVzdWx0LnN0YXR1cykudG9CZShcImVycm9yXCIpO1xuICAgIGlmIChyZWplY3RlZFJlc3VsdC5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICBleHBlY3QocmVqZWN0ZWRSZXN1bHQuZXJyb3IpLnRvQmUoZXJyb3IpO1xuICAgIH1cbn0pO1xuZnVuY3Rpb24gZnJvbVRocm93aW5nKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhmbigpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICAgIH1cbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImZyb21UaHJvd2luZ1wiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBmdW5jdGlvbiB0aGF0IHN1Y2NlZWRzXG4gICAgY29uc3Qgc3VjY2Vzc0ZuID0gKCkgPT4gNDI7XG4gICAgY29uc3Qgc3VjY2Vzc1Jlc3VsdCA9IGZyb21UaHJvd2luZyhzdWNjZXNzRm4pO1xuICAgIGV4cGVjdChzdWNjZXNzUmVzdWx0LnN0YXR1cykudG9CZShcIm9rXCIpO1xuICAgIGlmIChzdWNjZXNzUmVzdWx0LnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICAgIGV4cGVjdChzdWNjZXNzUmVzdWx0LmRhdGEpLnRvQmUoNDIpO1xuICAgIH1cbiAgICAvLyBUZXN0IHdpdGggZnVuY3Rpb24gdGhhdCB0aHJvd3NcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIlRlc3QgZXJyb3JcIik7XG4gICAgY29uc3QgZXJyb3JGbiA9ICgpID0+IHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfTtcbiAgICBjb25zdCBlcnJvclJlc3VsdCA9IGZyb21UaHJvd2luZyhlcnJvckZuKTtcbiAgICBleHBlY3QoZXJyb3JSZXN1bHQuc3RhdHVzKS50b0JlKFwiZXJyb3JcIik7XG4gICAgaWYgKGVycm9yUmVzdWx0LnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgIGV4cGVjdChlcnJvclJlc3VsdC5lcnJvcikudG9CZShlcnJvcik7XG4gICAgfVxufSk7XG5hc3luYyBmdW5jdGlvbiBmcm9tVGhyb3dpbmdBc3luYyhmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgZm4oKSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJmcm9tVGhyb3dpbmdBc3luY1wiLCBhc3luYyAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBhc3luYyBmdW5jdGlvbiB0aGF0IHN1Y2NlZWRzXG4gICAgY29uc3Qgc3VjY2Vzc0ZuID0gYXN5bmMgKCkgPT4gNDI7XG4gICAgY29uc3Qgc3VjY2Vzc1Jlc3VsdCA9IGF3YWl0IGZyb21UaHJvd2luZ0FzeW5jKHN1Y2Nlc3NGbik7XG4gICAgZXhwZWN0KHN1Y2Nlc3NSZXN1bHQuc3RhdHVzKS50b0JlKFwib2tcIik7XG4gICAgaWYgKHN1Y2Nlc3NSZXN1bHQuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgZXhwZWN0KHN1Y2Nlc3NSZXN1bHQuZGF0YSkudG9CZSg0Mik7XG4gICAgfVxuICAgIC8vIFRlc3Qgd2l0aCBhc3luYyBmdW5jdGlvbiB0aGF0IHRocm93c1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiVGVzdCBlcnJvclwiKTtcbiAgICBjb25zdCBlcnJvckZuID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9O1xuICAgIGNvbnN0IGVycm9yUmVzdWx0ID0gYXdhaXQgZnJvbVRocm93aW5nQXN5bmMoZXJyb3JGbik7XG4gICAgZXhwZWN0KGVycm9yUmVzdWx0LnN0YXR1cykudG9CZShcImVycm9yXCIpO1xuICAgIGlmIChlcnJvclJlc3VsdC5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICBleHBlY3QoZXJyb3JSZXN1bHQuZXJyb3IpLnRvQmUoZXJyb3IpO1xuICAgIH1cbn0pO1xuZnVuY3Rpb24gbWFwUmVzdWx0KHJlc3VsdCwgZm4pIHtcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJlcnJvclwiKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yLFxuICAgICAgICB9O1xuICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcInBlbmRpbmdcIilcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogXCJwZW5kaW5nXCIsXG4gICAgICAgICAgICAuLi5cInByb2dyZXNzXCIgaW4gcmVzdWx0ID8geyBwcm9ncmVzczogcmVzdWx0LnByb2dyZXNzIH0gOiB7fSxcbiAgICAgICAgfTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKGZuKHJlc3VsdC5kYXRhKSk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJtYXBSZXN1bHRcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggb2sgcmVzdWx0XG4gICAgY29uc3Qgb2tSZXN1bHQgPSB7IHN0YXR1czogXCJva1wiLCBkYXRhOiA0MiB9O1xuICAgIGNvbnN0IG1hcHBlZE9rID0gbWFwUmVzdWx0KG9rUmVzdWx0LCAobikgPT4gbiAqIDIpO1xuICAgIGV4cGVjdChtYXBwZWRPay5zdGF0dXMpLnRvQmUoXCJva1wiKTtcbiAgICBpZiAobWFwcGVkT2suc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgZXhwZWN0KG1hcHBlZE9rLmRhdGEpLnRvQmUoODQpO1xuICAgIH1cbiAgICAvLyBUZXN0IHdpdGggZXJyb3IgcmVzdWx0XG4gICAgY29uc3QgZXJyb3JSZXN1bHQgPSB7IHN0YXR1czogXCJlcnJvclwiLCBlcnJvcjogXCJlcnJvciBtZXNzYWdlXCIgfTtcbiAgICBjb25zdCBtYXBwZWRFcnJvciA9IG1hcFJlc3VsdChlcnJvclJlc3VsdCwgKG4pID0+IG4gKiAyKTtcbiAgICBleHBlY3QobWFwcGVkRXJyb3Iuc3RhdHVzKS50b0JlKFwiZXJyb3JcIik7XG4gICAgaWYgKG1hcHBlZEVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgIGV4cGVjdChtYXBwZWRFcnJvci5lcnJvcikudG9CZShcImVycm9yIG1lc3NhZ2VcIik7XG4gICAgfVxuICAgIC8vIFRlc3Qgd2l0aCBwZW5kaW5nIHJlc3VsdCAobm8gcHJvZ3Jlc3MpXG4gICAgY29uc3QgcGVuZGluZ1Jlc3VsdCA9IHsgc3RhdHVzOiBcInBlbmRpbmdcIiwgcHJvZ3Jlc3M6IHVuZGVmaW5lZCB9O1xuICAgIGNvbnN0IG1hcHBlZFBlbmRpbmcgPSBtYXBSZXN1bHQocGVuZGluZ1Jlc3VsdCwgKG4pID0+IG4gKiAyKTtcbiAgICBleHBlY3QobWFwcGVkUGVuZGluZy5zdGF0dXMpLnRvQmUoXCJwZW5kaW5nXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBwZW5kaW5nIHJlc3VsdCAod2l0aCBwcm9ncmVzcylcbiAgICBjb25zdCBwcm9ncmVzc1ZhbHVlID0geyBsb2FkZWQ6IDUwLCB0b3RhbDogMTAwIH07XG4gICAgY29uc3QgcGVuZGluZ1dpdGhQcm9ncmVzcyA9IHtcbiAgICAgICAgc3RhdHVzOiBcInBlbmRpbmdcIixcbiAgICAgICAgcHJvZ3Jlc3M6IHByb2dyZXNzVmFsdWVcbiAgICB9O1xuICAgIGNvbnN0IG1hcHBlZFBlbmRpbmdXaXRoUHJvZ3Jlc3MgPSBtYXBSZXN1bHQocGVuZGluZ1dpdGhQcm9ncmVzcywgKG4pID0+IG4gKiAyKTtcbiAgICBleHBlY3QobWFwcGVkUGVuZGluZ1dpdGhQcm9ncmVzcy5zdGF0dXMpLnRvQmUoXCJwZW5kaW5nXCIpO1xuICAgIGlmIChtYXBwZWRQZW5kaW5nV2l0aFByb2dyZXNzLnN0YXR1cyA9PT0gXCJwZW5kaW5nXCIpIHtcbiAgICAgICAgZXhwZWN0KG1hcHBlZFBlbmRpbmdXaXRoUHJvZ3Jlc3MucHJvZ3Jlc3MpLnRvQmUocHJvZ3Jlc3NWYWx1ZSk7XG4gICAgfVxufSk7XG5jbGFzcyBSZXRyeUVycm9yIGV4dGVuZHMgQWdncmVnYXRlRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGVycm9ycykge1xuICAgICAgICBjb25zdCBzdHJpbmdzID0gZXJyb3JzLm1hcChlID0+IG5pY2lmeShlKSk7XG4gICAgICAgIGNvbnN0IGlzQWxsU2FtZSA9IHN0cmluZ3MubGVuZ3RoID4gMSAmJiBzdHJpbmdzLmV2ZXJ5KHMgPT4gcyA9PT0gc3RyaW5nc1swXSk7XG4gICAgICAgIHN1cGVyKGVycm9ycywgZGVpbmRlbnQgYFxuICAgICAgRXJyb3IgYWZ0ZXIgJHtlcnJvcnMubGVuZ3RofSBhdHRlbXB0cy5cbiAgICAgIFxuICAgICAgJHtpc0FsbFNhbWUgPyBkZWluZGVudCBgXG4gICAgICAgIEF0dGVtcHRzIDEtJHtlcnJvcnMubGVuZ3RofTpcbiAgICAgICAgICAke3N0cmluZ3NbMF19XG4gICAgICBgIDogc3RyaW5ncy5tYXAoKHMsIGkpID0+IGRlaW5kZW50IGBcbiAgICAgICAgICBBdHRlbXB0ICR7aSArIDF9OlxuICAgICAgICAgICAgJHtzfVxuICAgICAgICBgKS5qb2luKFwiXFxuXFxuXCIpfVxuICAgICAgYCwgeyBjYXVzZTogZXJyb3JzW2Vycm9ycy5sZW5ndGggLSAxXSB9KTtcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiUmV0cnlFcnJvclwiO1xuICAgIH1cbiAgICBnZXQgYXR0ZW1wdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9ycy5sZW5ndGg7XG4gICAgfVxufVxuUmV0cnlFcnJvci5wcm90b3R5cGUubmFtZSA9IFwiUmV0cnlFcnJvclwiO1xuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiUmV0cnlFcnJvclwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBzaW5nbGUgZXJyb3JcbiAgICBjb25zdCBzaW5nbGVFcnJvciA9IG5ldyBFcnJvcihcIlNpbmdsZSBlcnJvclwiKTtcbiAgICBjb25zdCByZXRyeUVycm9yU2luZ2xlID0gbmV3IFJldHJ5RXJyb3IoW3NpbmdsZUVycm9yXSk7XG4gICAgZXhwZWN0KHJldHJ5RXJyb3JTaW5nbGUubmFtZSkudG9CZShcIlJldHJ5RXJyb3JcIik7XG4gICAgZXhwZWN0KHJldHJ5RXJyb3JTaW5nbGUuZXJyb3JzKS50b0VxdWFsKFtzaW5nbGVFcnJvcl0pO1xuICAgIGV4cGVjdChyZXRyeUVycm9yU2luZ2xlLmF0dGVtcHRzKS50b0JlKDEpO1xuICAgIGV4cGVjdChyZXRyeUVycm9yU2luZ2xlLmNhdXNlKS50b0JlKHNpbmdsZUVycm9yKTtcbiAgICBleHBlY3QocmV0cnlFcnJvclNpbmdsZS5tZXNzYWdlKS50b0NvbnRhaW4oXCJFcnJvciBhZnRlciAxIGF0dGVtcHRzXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBtdWx0aXBsZSBkaWZmZXJlbnQgZXJyb3JzXG4gICAgY29uc3QgZXJyb3IxID0gbmV3IEVycm9yKFwiRXJyb3IgMVwiKTtcbiAgICBjb25zdCBlcnJvcjIgPSBuZXcgRXJyb3IoXCJFcnJvciAyXCIpO1xuICAgIGNvbnN0IHJldHJ5RXJyb3JNdWx0aXBsZSA9IG5ldyBSZXRyeUVycm9yKFtlcnJvcjEsIGVycm9yMl0pO1xuICAgIGV4cGVjdChyZXRyeUVycm9yTXVsdGlwbGUubmFtZSkudG9CZShcIlJldHJ5RXJyb3JcIik7XG4gICAgZXhwZWN0KHJldHJ5RXJyb3JNdWx0aXBsZS5lcnJvcnMpLnRvRXF1YWwoW2Vycm9yMSwgZXJyb3IyXSk7XG4gICAgZXhwZWN0KHJldHJ5RXJyb3JNdWx0aXBsZS5hdHRlbXB0cykudG9CZSgyKTtcbiAgICBleHBlY3QocmV0cnlFcnJvck11bHRpcGxlLmNhdXNlKS50b0JlKGVycm9yMik7XG4gICAgZXhwZWN0KHJldHJ5RXJyb3JNdWx0aXBsZS5tZXNzYWdlKS50b0NvbnRhaW4oXCJFcnJvciBhZnRlciAyIGF0dGVtcHRzXCIpO1xuICAgIGV4cGVjdChyZXRyeUVycm9yTXVsdGlwbGUubWVzc2FnZSkudG9Db250YWluKFwiQXR0ZW1wdCAxXCIpO1xuICAgIGV4cGVjdChyZXRyeUVycm9yTXVsdGlwbGUubWVzc2FnZSkudG9Db250YWluKFwiQXR0ZW1wdCAyXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBtdWx0aXBsZSBpZGVudGljYWwgZXJyb3JzXG4gICAgY29uc3Qgc2FtZUVycm9yID0gbmV3IEVycm9yKFwiU2FtZSBlcnJvclwiKTtcbiAgICBjb25zdCByZXRyeUVycm9yU2FtZSA9IG5ldyBSZXRyeUVycm9yKFtzYW1lRXJyb3IsIHNhbWVFcnJvcl0pO1xuICAgIGV4cGVjdChyZXRyeUVycm9yU2FtZS5uYW1lKS50b0JlKFwiUmV0cnlFcnJvclwiKTtcbiAgICBleHBlY3QocmV0cnlFcnJvclNhbWUuZXJyb3JzKS50b0VxdWFsKFtzYW1lRXJyb3IsIHNhbWVFcnJvcl0pO1xuICAgIGV4cGVjdChyZXRyeUVycm9yU2FtZS5hdHRlbXB0cykudG9CZSgyKTtcbiAgICBleHBlY3QocmV0cnlFcnJvclNhbWUuY2F1c2UpLnRvQmUoc2FtZUVycm9yKTtcbiAgICBleHBlY3QocmV0cnlFcnJvclNhbWUubWVzc2FnZSkudG9Db250YWluKFwiRXJyb3IgYWZ0ZXIgMiBhdHRlbXB0c1wiKTtcbiAgICBleHBlY3QocmV0cnlFcnJvclNhbWUubWVzc2FnZSkudG9Db250YWluKFwiQXR0ZW1wdHMgMS0yXCIpO1xufSk7XG5hc3luYyBmdW5jdGlvbiByZXRyeShmbiwgdG90YWxBdHRlbXB0cywgeyBleHBvbmVudGlhbERlbGF5QmFzZSA9IDEwMDAgfSA9IHt9KSB7XG4gICAgY29uc3QgZXJyb3JzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbEF0dGVtcHRzOyBpKyspIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZm4oaSk7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFJlc3VsdC5vayhyZXMuZGF0YSksIHsgYXR0ZW1wdHM6IGkgKyAxIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2gocmVzLmVycm9yKTtcbiAgICAgICAgICAgIGlmIChpIDwgdG90YWxBdHRlbXB0cyAtIDEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB3YWl0KChNYXRoLnJhbmRvbSgpICsgMC41KSAqIGV4cG9uZW50aWFsRGVsYXlCYXNlICogKDIgKiogaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKFJlc3VsdC5lcnJvcihuZXcgUmV0cnlFcnJvcihlcnJvcnMpKSwgeyBhdHRlbXB0czogdG90YWxBdHRlbXB0cyB9KTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInJldHJ5XCIsIGFzeW5jICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCBzdWNjZXNzZnVsIG9uIGZpcnN0IGF0dGVtcHRcbiAgICBjb25zdCBzdWNjZXNzRm4gPSBhc3luYyAoKSA9PiBSZXN1bHQub2soXCJzdWNjZXNzXCIpO1xuICAgIGNvbnN0IHN1Y2Nlc3NSZXN1bHQgPSBhd2FpdCByZXRyeShzdWNjZXNzRm4sIDMsIHsgZXhwb25lbnRpYWxEZWxheUJhc2U6IDAgfSk7XG4gICAgZXhwZWN0KHN1Y2Nlc3NSZXN1bHQpLnRvRXF1YWwoeyBzdGF0dXM6IFwib2tcIiwgZGF0YTogXCJzdWNjZXNzXCIsIGF0dGVtcHRzOiAxIH0pO1xuICAgIC8vIFRlc3Qgc3VjY2Vzc2Z1bCBhZnRlciBmYWlsdXJlc1xuICAgIGxldCBhdHRlbXB0Q291bnQgPSAwO1xuICAgIGNvbnN0IGV2ZW50dWFsU3VjY2Vzc0ZuID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXR1cm4gKythdHRlbXB0Q291bnQgPCAyID8gUmVzdWx0LmVycm9yKG5ldyBFcnJvcihgQXR0ZW1wdCAke2F0dGVtcHRDb3VudH0gZmFpbGVkYCkpXG4gICAgICAgICAgICA6IFJlc3VsdC5vayhcImV2ZW50dWFsIHN1Y2Nlc3NcIik7XG4gICAgfTtcbiAgICBjb25zdCBldmVudHVhbFN1Y2Nlc3NSZXN1bHQgPSBhd2FpdCByZXRyeShldmVudHVhbFN1Y2Nlc3NGbiwgMywgeyBleHBvbmVudGlhbERlbGF5QmFzZTogMCB9KTtcbiAgICBleHBlY3QoZXZlbnR1YWxTdWNjZXNzUmVzdWx0KS50b0VxdWFsKHsgc3RhdHVzOiBcIm9rXCIsIGRhdGE6IFwiZXZlbnR1YWwgc3VjY2Vzc1wiLCBhdHRlbXB0czogMiB9KTtcbiAgICAvLyBUZXN0IGFsbCBhdHRlbXB0cyBmYWlsXG4gICAgY29uc3QgZXJyb3JzID0gW25ldyBFcnJvcihcIkVycm9yIDFcIiksIG5ldyBFcnJvcihcIkVycm9yIDJcIiksIG5ldyBFcnJvcihcIkVycm9yIDNcIildO1xuICAgIGNvbnN0IGFsbEZhaWxGbiA9IGFzeW5jIChhdHRlbXB0KSA9PiB7XG4gICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3JzW2F0dGVtcHRdKTtcbiAgICB9O1xuICAgIGNvbnN0IGFsbEZhaWxSZXN1bHQgPSBhd2FpdCByZXRyeShhbGxGYWlsRm4sIDMsIHsgZXhwb25lbnRpYWxEZWxheUJhc2U6IDAgfSk7XG4gICAgZXhwZWN0KGFsbEZhaWxSZXN1bHQpLnRvRXF1YWwoeyBzdGF0dXM6IFwiZXJyb3JcIiwgZXJyb3I6IGV4cGVjdC5hbnkoUmV0cnlFcnJvciksIGF0dGVtcHRzOiAzIH0pO1xuICAgIGNvbnN0IHJldHJ5RXJyb3IgPSBhbGxGYWlsUmVzdWx0LmVycm9yO1xuICAgIGV4cGVjdChyZXRyeUVycm9yLmVycm9ycykudG9FcXVhbChlcnJvcnMpO1xuICAgIGV4cGVjdChyZXRyeUVycm9yLmF0dGVtcHRzKS50b0JlKDMpO1xufSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/stores.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncStore: () => (/* binding */ AsyncStore),\n/* harmony export */   Store: () => (/* binding */ Store),\n/* harmony export */   storeLock: () => (/* binding */ storeLock)\n/* harmony export */ });\n/* harmony import */ var _locks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locks */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/locks.js\");\n/* harmony import */ var _promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./promises */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _uuids__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./uuids */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js\");\n\n\n\n\nclass Store {\n    constructor(_value) {\n        this._value = _value;\n        this._callbacks = new Map();\n    }\n    get() {\n        return this._value;\n    }\n    set(value) {\n        const oldValue = this._value;\n        this._value = value;\n        this._callbacks.forEach((callback) => callback(value, oldValue));\n    }\n    update(updater) {\n        const value = updater(this._value);\n        this.set(value);\n        return value;\n    }\n    onChange(callback) {\n        const uuid = (0,_uuids__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n        this._callbacks.set(uuid, callback);\n        return {\n            unsubscribe: () => {\n                this._callbacks.delete(uuid);\n            },\n        };\n    }\n    onceChange(callback) {\n        const { unsubscribe } = this.onChange((...args) => {\n            unsubscribe();\n            callback(...args);\n        });\n        return { unsubscribe };\n    }\n}\nconst storeLock = new _locks__WEBPACK_IMPORTED_MODULE_0__.ReadWriteLock();\nclass AsyncStore {\n    constructor(...args) {\n        this._mostRecentOkValue = undefined;\n        this._isRejected = false;\n        this._waitingRejectFunctions = new Map();\n        this._callbacks = new Map();\n        this._updateCounter = 0;\n        this._lastSuccessfulUpdate = -1;\n        if (args.length === 0) {\n            this._isAvailable = false;\n        }\n        else {\n            this._isAvailable = true;\n            this._mostRecentOkValue = args[0];\n        }\n    }\n    isAvailable() {\n        return this._isAvailable;\n    }\n    isRejected() {\n        return this._isRejected;\n    }\n    get() {\n        if (this.isRejected()) {\n            return _results__WEBPACK_IMPORTED_MODULE_2__.AsyncResult.error(this._rejectionError);\n        }\n        else if (this.isAvailable()) {\n            return _results__WEBPACK_IMPORTED_MODULE_2__.AsyncResult.ok(this._mostRecentOkValue);\n        }\n        else {\n            return _results__WEBPACK_IMPORTED_MODULE_2__.AsyncResult.pending();\n        }\n    }\n    getOrWait() {\n        const uuid = (0,_uuids__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n        if (this.isRejected()) {\n            return (0,_promises__WEBPACK_IMPORTED_MODULE_1__.rejected)(this._rejectionError);\n        }\n        else if (this.isAvailable()) {\n            return (0,_promises__WEBPACK_IMPORTED_MODULE_1__.resolved)(this._mostRecentOkValue);\n        }\n        const promise = new Promise((resolve, reject) => {\n            this.onceChange((value) => {\n                resolve(value);\n            });\n            this._waitingRejectFunctions.set(uuid, reject);\n        });\n        const withFinally = promise.finally(() => {\n            this._waitingRejectFunctions.delete(uuid);\n        });\n        return (0,_promises__WEBPACK_IMPORTED_MODULE_1__.pending)(withFinally);\n    }\n    _setIfLatest(result, curCounter) {\n        const oldState = this.get();\n        const oldValue = this._mostRecentOkValue;\n        if (curCounter > this._lastSuccessfulUpdate) {\n            switch (result.status) {\n                case \"ok\": {\n                    if (!this._isAvailable || this._isRejected || this._mostRecentOkValue !== result.data) {\n                        this._lastSuccessfulUpdate = curCounter;\n                        this._isAvailable = true;\n                        this._isRejected = false;\n                        this._mostRecentOkValue = result.data;\n                        this._rejectionError = undefined;\n                        this._callbacks.forEach((callback) => callback({\n                            state: this.get(),\n                            oldState,\n                            lastOkValue: oldValue,\n                        }));\n                        return true;\n                    }\n                    return false;\n                }\n                case \"error\": {\n                    this._lastSuccessfulUpdate = curCounter;\n                    this._isAvailable = false;\n                    this._isRejected = true;\n                    this._rejectionError = result.error;\n                    this._waitingRejectFunctions.forEach((reject) => reject(result.error));\n                    this._callbacks.forEach((callback) => callback({\n                        state: this.get(),\n                        oldState,\n                        lastOkValue: oldValue,\n                    }));\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    set(value) {\n        this._setIfLatest(_results__WEBPACK_IMPORTED_MODULE_2__.Result.ok(value), ++this._updateCounter);\n    }\n    update(updater) {\n        const value = updater(this._mostRecentOkValue);\n        this.set(value);\n        return value;\n    }\n    async setAsync(promise) {\n        return await storeLock.withReadLock(async () => {\n            const curCounter = ++this._updateCounter;\n            const result = await _results__WEBPACK_IMPORTED_MODULE_2__.Result.fromPromise(promise);\n            return this._setIfLatest(result, curCounter);\n        });\n    }\n    setUnavailable() {\n        this._lastSuccessfulUpdate = ++this._updateCounter;\n        this._isAvailable = false;\n        this._isRejected = false;\n        this._rejectionError = undefined;\n    }\n    setRejected(error) {\n        this._setIfLatest(_results__WEBPACK_IMPORTED_MODULE_2__.Result.error(error), ++this._updateCounter);\n    }\n    map(mapper) {\n        const store = new AsyncStore();\n        this.onChange((value) => {\n            store.set(mapper(value));\n        });\n        return store;\n    }\n    onChange(callback) {\n        return this.onStateChange(({ state, lastOkValue }) => {\n            if (state.status === \"ok\") {\n                callback(state.data, lastOkValue);\n            }\n        });\n    }\n    onStateChange(callback) {\n        const uuid = (0,_uuids__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n        this._callbacks.set(uuid, callback);\n        return {\n            unsubscribe: () => {\n                this._callbacks.delete(uuid);\n            },\n        };\n    }\n    onceChange(callback) {\n        const { unsubscribe } = this.onChange((...args) => {\n            unsubscribe();\n            callback(...args);\n        });\n        return { unsubscribe };\n    }\n    onceStateChange(callback) {\n        const { unsubscribe } = this.onStateChange((...args) => {\n            unsubscribe();\n            callback(...args);\n        });\n        return { unsubscribe };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9zdG9yZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3QztBQUNpQjtBQUNUO0FBQ1Q7QUFDaEM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsb0RBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBLFNBQVM7QUFDVCxpQkFBaUI7QUFDakI7QUFDQTtBQUNPLHNCQUFzQixpREFBYTtBQUNuQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaURBQVc7QUFDOUI7QUFDQTtBQUNBLG1CQUFtQixpREFBVztBQUM5QjtBQUNBO0FBQ0EsbUJBQW1CLGlEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvREFBWTtBQUNqQztBQUNBLG1CQUFtQixtREFBUTtBQUMzQjtBQUNBO0FBQ0EsbUJBQW1CLG1EQUFRO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZUFBZSxrREFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNENBQU07QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDRDQUFNO0FBQ3ZDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNENBQU07QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsb0JBQW9CO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EscUJBQXFCLG9EQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0EsU0FBUztBQUNULGlCQUFpQjtBQUNqQjtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcdXRpbHNcXHN0b3Jlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWFkV3JpdGVMb2NrIH0gZnJvbSBcIi4vbG9ja3NcIjtcbmltcG9ydCB7IHBlbmRpbmcsIHJlamVjdGVkLCByZXNvbHZlZCB9IGZyb20gXCIuL3Byb21pc2VzXCI7XG5pbXBvcnQgeyBBc3luY1Jlc3VsdCwgUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0c1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVVdWlkIH0gZnJvbSBcIi4vdXVpZHNcIjtcbmV4cG9ydCBjbGFzcyBTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoX3ZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gX3ZhbHVlO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl92YWx1ZTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayh2YWx1ZSwgb2xkVmFsdWUpKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZXIpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB1cGRhdGVyKHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgdGhpcy5zZXQodmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIG9uQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSBnZW5lcmF0ZVV1aWQoKTtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLnNldCh1dWlkLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrcy5kZWxldGUodXVpZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBvbmNlQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHsgdW5zdWJzY3JpYmUgfSA9IHRoaXMub25DaGFuZ2UoKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHVuc3Vic2NyaWJlIH07XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IHN0b3JlTG9jayA9IG5ldyBSZWFkV3JpdGVMb2NrKCk7XG5leHBvcnQgY2xhc3MgQXN5bmNTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5faXNSZWplY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl93YWl0aW5nUmVqZWN0RnVuY3Rpb25zID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IC0xO1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2lzQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pc0F2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSA9IGFyZ3NbMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNBdmFpbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0F2YWlsYWJsZTtcbiAgICB9XG4gICAgaXNSZWplY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzUmVqZWN0ZWQ7XG4gICAgfVxuICAgIGdldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gQXN5bmNSZXN1bHQuZXJyb3IodGhpcy5fcmVqZWN0aW9uRXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIEFzeW5jUmVzdWx0Lm9rKHRoaXMuX21vc3RSZWNlbnRPa1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBBc3luY1Jlc3VsdC5wZW5kaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0T3JXYWl0KCkge1xuICAgICAgICBjb25zdCB1dWlkID0gZ2VuZXJhdGVVdWlkKCk7XG4gICAgICAgIGlmICh0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkKHRoaXMuX3JlamVjdGlvbkVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlZCh0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25jZUNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fd2FpdGluZ1JlamVjdEZ1bmN0aW9ucy5zZXQodXVpZCwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHdpdGhGaW5hbGx5ID0gcHJvbWlzZS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3dhaXRpbmdSZWplY3RGdW5jdGlvbnMuZGVsZXRlKHV1aWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBlbmRpbmcod2l0aEZpbmFsbHkpO1xuICAgIH1cbiAgICBfc2V0SWZMYXRlc3QocmVzdWx0LCBjdXJDb3VudGVyKSB7XG4gICAgICAgIGNvbnN0IG9sZFN0YXRlID0gdGhpcy5nZXQoKTtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZTtcbiAgICAgICAgaWYgKGN1ckNvdW50ZXIgPiB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSkge1xuICAgICAgICAgICAgc3dpdGNoIChyZXN1bHQuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm9rXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0F2YWlsYWJsZSB8fCB0aGlzLl9pc1JlamVjdGVkIHx8IHRoaXMuX21vc3RSZWNlbnRPa1ZhbHVlICE9PSByZXN1bHQuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGFzdFN1Y2Nlc3NmdWxVcGRhdGUgPSBjdXJDb3VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNSZWplY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9zdFJlY2VudE9rVmFsdWUgPSByZXN1bHQuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdGlvbkVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuZ2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE9rVmFsdWU6IG9sZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwiZXJyb3JcIjoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IGN1ckNvdW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzUmVqZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3Rpb25FcnJvciA9IHJlc3VsdC5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fd2FpdGluZ1JlamVjdEZ1bmN0aW9ucy5mb3JFYWNoKChyZWplY3QpID0+IHJlamVjdChyZXN1bHQuZXJyb3IpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogdGhpcy5nZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZFN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE9rVmFsdWU6IG9sZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHNldCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9zZXRJZkxhdGVzdChSZXN1bHQub2sodmFsdWUpLCArK3RoaXMuX3VwZGF0ZUNvdW50ZXIpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlcikge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHVwZGF0ZXIodGhpcy5fbW9zdFJlY2VudE9rVmFsdWUpO1xuICAgICAgICB0aGlzLnNldCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgYXN5bmMgc2V0QXN5bmMocHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgc3RvcmVMb2NrLndpdGhSZWFkTG9jayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJDb3VudGVyID0gKyt0aGlzLl91cGRhdGVDb3VudGVyO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUmVzdWx0LmZyb21Qcm9taXNlKHByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NldElmTGF0ZXN0KHJlc3VsdCwgY3VyQ291bnRlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRVbmF2YWlsYWJsZSgpIHtcbiAgICAgICAgdGhpcy5fbGFzdFN1Y2Nlc3NmdWxVcGRhdGUgPSArK3RoaXMuX3VwZGF0ZUNvdW50ZXI7XG4gICAgICAgIHRoaXMuX2lzQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2lzUmVqZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcmVqZWN0aW9uRXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHNldFJlamVjdGVkKGVycm9yKSB7XG4gICAgICAgIHRoaXMuX3NldElmTGF0ZXN0KFJlc3VsdC5lcnJvcihlcnJvciksICsrdGhpcy5fdXBkYXRlQ291bnRlcik7XG4gICAgfVxuICAgIG1hcChtYXBwZXIpIHtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBuZXcgQXN5bmNTdG9yZSgpO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgc3RvcmUuc2V0KG1hcHBlcih2YWx1ZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgIH1cbiAgICBvbkNoYW5nZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5vblN0YXRlQ2hhbmdlKCh7IHN0YXRlLCBsYXN0T2tWYWx1ZSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RhdGUuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhzdGF0ZS5kYXRhLCBsYXN0T2tWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvblN0YXRlQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSBnZW5lcmF0ZVV1aWQoKTtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLnNldCh1dWlkLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrcy5kZWxldGUodXVpZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBvbmNlQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHsgdW5zdWJzY3JpYmUgfSA9IHRoaXMub25DaGFuZ2UoKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHVuc3Vic2NyaWJlIH07XG4gICAgfVxuICAgIG9uY2VTdGF0ZUNoYW5nZShjYWxsYmFjaykge1xuICAgICAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSB0aGlzLm9uU3RhdGVDaGFuZ2UoKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHVuc3Vic2NyaWJlIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/strings.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deindent: () => (/* binding */ deindent),\n/* harmony export */   deindentTemplate: () => (/* binding */ deindentTemplate),\n/* harmony export */   escapeTemplateLiteral: () => (/* binding */ escapeTemplateLiteral),\n/* harmony export */   extractScopes: () => (/* binding */ extractScopes),\n/* harmony export */   getWhitespacePrefix: () => (/* binding */ getWhitespacePrefix),\n/* harmony export */   getWhitespaceSuffix: () => (/* binding */ getWhitespaceSuffix),\n/* harmony export */   mergeScopeStrings: () => (/* binding */ mergeScopeStrings),\n/* harmony export */   nicify: () => (/* binding */ nicify),\n/* harmony export */   replaceAll: () => (/* binding */ replaceAll),\n/* harmony export */   stringCompare: () => (/* binding */ stringCompare),\n/* harmony export */   templateIdentity: () => (/* binding */ templateIdentity),\n/* harmony export */   trimEmptyLinesEnd: () => (/* binding */ trimEmptyLinesEnd),\n/* harmony export */   trimEmptyLinesStart: () => (/* binding */ trimEmptyLinesStart),\n/* harmony export */   trimLines: () => (/* binding */ trimLines),\n/* harmony export */   typedCapitalize: () => (/* binding */ typedCapitalize),\n/* harmony export */   typedToLowercase: () => (/* binding */ typedToLowercase),\n/* harmony export */   typedToUppercase: () => (/* binding */ typedToUppercase)\n/* harmony export */ });\n/* harmony import */ var _arrays__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrays */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/arrays.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./objects */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n\n\n\nfunction typedToLowercase(s) {\n    if (typeof s !== \"string\")\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Expected a string for typedToLowercase\", { s });\n    return s.toLowerCase();\n}\n undefined;\nfunction typedToUppercase(s) {\n    if (typeof s !== \"string\")\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Expected a string for typedToUppercase\", { s });\n    return s.toUpperCase();\n}\n undefined;\nfunction typedCapitalize(s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\n undefined;\n/**\n * Compares two strings in a way that is not dependent on the current locale.\n */\nfunction stringCompare(a, b) {\n    const cmp = (a, b) => a < b ? -1 : a > b ? 1 : 0;\n    return cmp(a.toUpperCase(), b.toUpperCase()) || cmp(b, a);\n}\n undefined;\n/**\n * Returns all whitespace character at the start of the string.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction getWhitespacePrefix(s) {\n    return s.substring(0, s.length - s.trimStart().length);\n}\n undefined;\n/**\n * Returns all whitespace character at the end of the string.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction getWhitespaceSuffix(s) {\n    return s.substring(s.trimEnd().length);\n}\n undefined;\n/**\n * Returns a string with all empty or whitespace-only lines at the start removed.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction trimEmptyLinesStart(s) {\n    const lines = s.split(\"\\n\");\n    const firstNonEmptyLineIndex = lines.findIndex((line) => line.trim() !== \"\");\n    // If all lines are empty or whitespace-only, return an empty string\n    if (firstNonEmptyLineIndex === -1)\n        return \"\";\n    return lines.slice(firstNonEmptyLineIndex).join(\"\\n\");\n}\n undefined;\n/**\n * Returns a string with all empty or whitespace-only lines at the end removed.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction trimEmptyLinesEnd(s) {\n    const lines = s.split(\"\\n\");\n    const lastNonEmptyLineIndex = (0,_arrays__WEBPACK_IMPORTED_MODULE_0__.findLastIndex)(lines, (line) => line.trim() !== \"\");\n    return lines.slice(0, lastNonEmptyLineIndex + 1).join(\"\\n\");\n}\n undefined;\n/**\n * Returns a string with all empty or whitespace-only lines trimmed at the start and end.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction trimLines(s) {\n    return trimEmptyLinesEnd(trimEmptyLinesStart(s));\n}\n undefined;\n/**\n * A template literal tag that returns the same string as the template literal without a tag.\n *\n * Useful for implementing your own template literal tags.\n */\nfunction templateIdentity(strings, ...values) {\n    if (values.length !== strings.length - 1)\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Invalid number of values; must be one less than strings\", { strings, values });\n    return strings.reduce((result, str, i) => result + str + (values[i] ?? ''), '');\n}\n undefined;\nfunction deindent(strings, ...values) {\n    if (typeof strings === \"string\")\n        return deindent([strings]);\n    return templateIdentity(...deindentTemplate(strings, ...values));\n}\nfunction deindentTemplate(strings, ...values) {\n    if (values.length !== strings.length - 1)\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Invalid number of values; must be one less than strings\", { strings, values });\n    const trimmedStrings = [...strings];\n    trimmedStrings[0] = trimEmptyLinesStart(trimmedStrings[0] + \"+\").slice(0, -1);\n    trimmedStrings[trimmedStrings.length - 1] = trimEmptyLinesEnd(\"+\" + trimmedStrings[trimmedStrings.length - 1]).slice(1);\n    const indentation = trimmedStrings\n        .join(\"${SOME_VALUE}\")\n        .split(\"\\n\")\n        .filter((line) => line.trim() !== \"\")\n        .map((line) => getWhitespacePrefix(line).length)\n        .reduce((min, current) => Math.min(min, current), Infinity);\n    const deindentedStrings = trimmedStrings\n        .map((string, stringIndex) => {\n        return string\n            .split(\"\\n\")\n            .map((line, lineIndex) => stringIndex !== 0 && lineIndex === 0 ? line : line.substring(indentation))\n            .join(\"\\n\");\n    });\n    const indentedValues = values.map((value, i) => {\n        const firstLineIndentation = getWhitespacePrefix(deindentedStrings[i].split(\"\\n\").at(-1));\n        return `${value}`.replaceAll(\"\\n\", `\\n${firstLineIndentation}`);\n    });\n    return [deindentedStrings, ...indentedValues];\n}\n undefined;\nfunction extractScopes(scope, removeDuplicates = true) {\n    // TODO what is this for? can we move this into the OAuth code in the backend?\n    const trimmedString = scope.trim();\n    const scopesArray = trimmedString.split(/\\s+/);\n    const filtered = scopesArray.filter(scope => scope.length > 0);\n    return removeDuplicates ? [...new Set(filtered)] : filtered;\n}\n undefined;\nfunction mergeScopeStrings(...scopes) {\n    // TODO what is this for? can we move this into the OAuth code in the backend?\n    const allScope = scopes.map((s) => extractScopes(s)).flat().join(\" \");\n    return extractScopes(allScope).join(\" \");\n}\n undefined;\nfunction escapeTemplateLiteral(s) {\n    return s.replaceAll(\"`\", \"\\\\`\").replaceAll(\"\\\\\", \"\\\\\\\\\").replaceAll(\"$\", \"\\\\$\");\n}\n undefined;\n/**\n * Some classes have different constructor names in different environments (eg. `Headers` is sometimes called `_Headers`,\n * so we create an object of overrides to handle these cases.\n */\nconst nicifiableClassNameOverrides = new Map(Object.entries({\n    Headers,\n}).map(([k, v]) => [v, k]));\nfunction nicify(value, options = {}) {\n    const fullOptions = {\n        maxDepth: 5,\n        currentIndent: \"\",\n        lineIndent: \"  \",\n        multiline: true,\n        refs: new Map(),\n        path: \"value\",\n        parent: null,\n        overrides: () => null,\n        keyInParent: null,\n        hideFields: [],\n        ...(0,_objects__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)(options),\n    };\n    const { maxDepth, currentIndent, lineIndent, multiline, refs, path, overrides, hideFields, } = fullOptions;\n    const nl = `\\n${currentIndent}`;\n    const overrideResult = overrides(value, options);\n    if (overrideResult !== null)\n        return overrideResult;\n    if ([\"function\", \"object\", \"symbol\"].includes(typeof value) && value !== null) {\n        if (refs.has(value)) {\n            return `Ref<${refs.get(value)}>`;\n        }\n        refs.set(value, path);\n    }\n    const newOptions = {\n        maxDepth: maxDepth - 1,\n        currentIndent,\n        lineIndent,\n        multiline,\n        refs,\n        path: path + \"->[unknown property]\",\n        overrides,\n        parent: { value, options: fullOptions },\n        keyInParent: null,\n        hideFields: [],\n    };\n    const nestedNicify = (newValue, newPath, keyInParent, options = {}) => {\n        return nicify(newValue, {\n            ...newOptions,\n            path: newPath,\n            currentIndent: currentIndent + lineIndent,\n            keyInParent,\n            ...options,\n        });\n    };\n    switch (typeof value) {\n        case \"boolean\":\n        case \"number\": {\n            return JSON.stringify(value);\n        }\n        case \"string\": {\n            const isDeindentable = (v) => deindent(v) === v && v.includes(\"\\n\");\n            const wrapInDeindent = (v) => deindent `\n        deindent\\`\n        ${currentIndent + lineIndent}${escapeTemplateLiteral(v).replaceAll(\"\\n\", nl + lineIndent)}\n        ${currentIndent}\\`\n      `;\n            if (isDeindentable(value)) {\n                return wrapInDeindent(value);\n            }\n            else if (value.endsWith(\"\\n\") && isDeindentable(value.slice(0, -1))) {\n                return wrapInDeindent(value.slice(0, -1)) + ' + \"\\\\n\"';\n            }\n            else {\n                return JSON.stringify(value);\n            }\n        }\n        case \"undefined\": {\n            return \"undefined\";\n        }\n        case \"symbol\": {\n            return value.toString();\n        }\n        case \"bigint\": {\n            return `${value}n`;\n        }\n        case \"function\": {\n            if (value.name)\n                return `function ${value.name}(...) { ... }`;\n            return `(...) => { ... }`;\n        }\n        case \"object\": {\n            if (value === null)\n                return \"null\";\n            if (Array.isArray(value)) {\n                const extraLines = getNicifiedObjectExtraLines(value);\n                const resValueLength = value.length + extraLines.length;\n                if (maxDepth <= 0 && resValueLength === 0)\n                    return \"[...]\";\n                const resValues = value.map((v, i) => nestedNicify(v, `${path}[${i}]`, i));\n                resValues.push(...extraLines);\n                if (resValues.length !== resValueLength)\n                    throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"nicify of object: resValues.length !== resValueLength\", { value, resValues, resValueLength });\n                const shouldIndent = resValues.length > 4 || resValues.some(x => (resValues.length > 1 && x.length > 4) || x.includes(\"\\n\"));\n                if (shouldIndent) {\n                    return `[${nl}${resValues.map(x => `${lineIndent}${x},${nl}`).join(\"\")}]`;\n                }\n                else {\n                    return `[${resValues.join(\", \")}]`;\n                }\n            }\n            if (value instanceof URL) {\n                return `URL(${nestedNicify(value.toString(), `${path}.toString()`, null)})`;\n            }\n            if (ArrayBuffer.isView(value)) {\n                return `${value.constructor.name}([${value.toString()}])`;\n            }\n            if (value instanceof Error) {\n                let stack = value.stack ?? \"\";\n                const toString = value.toString();\n                if (!stack.startsWith(toString))\n                    stack = `${toString}\\n${stack}`; // some browsers don't include the error message in the stack, some do\n                stack = stack.trimEnd();\n                stack = stack.replace(/\\n\\s+/g, `\\n${lineIndent}${lineIndent}`);\n                stack = stack.replace(\"\\n\", `\\n${lineIndent}Stack:\\n`);\n                if (Object.keys(value).length > 0) {\n                    stack += `\\n${lineIndent}Extra properties: ${nestedNicify(Object.fromEntries(Object.entries(value)), path, null)}`;\n                }\n                if (value.cause) {\n                    stack += `\\n${lineIndent}Cause:\\n${lineIndent}${lineIndent}${nestedNicify(value.cause, path, null, { currentIndent: currentIndent + lineIndent + lineIndent })}`;\n                }\n                stack = stack.replaceAll(\"\\n\", `\\n${currentIndent}`);\n                return stack;\n            }\n            const constructorName = [null, Object.prototype].includes(Object.getPrototypeOf(value)) ? null : (nicifiableClassNameOverrides.get(value.constructor) ?? value.constructor.name);\n            const constructorString = constructorName ? `${constructorName} ` : \"\";\n            const entries = getNicifiableEntries(value).filter(([k]) => !hideFields.includes(k));\n            const extraLines = [\n                ...getNicifiedObjectExtraLines(value),\n                ...hideFields.length > 0 ? [`<some fields may have been hidden>`] : [],\n            ];\n            const resValueLength = entries.length + extraLines.length;\n            if (resValueLength === 0)\n                return `${constructorString}{}`;\n            if (maxDepth <= 0)\n                return `${constructorString}{ ... }`;\n            const resValues = entries.map(([k, v], keyIndex) => {\n                const keyNicified = nestedNicify(k, `Object.keys(${path})[${keyIndex}]`, null);\n                const keyInObjectLiteral = typeof k === \"string\" ? nicifyPropertyString(k) : `[${keyNicified}]`;\n                if (typeof v === \"function\" && v.name === k) {\n                    return `${keyInObjectLiteral}(...): { ... }`;\n                }\n                else {\n                    return `${keyInObjectLiteral}: ${nestedNicify(v, `${path}[${keyNicified}]`, k)}`;\n                }\n            });\n            resValues.push(...extraLines);\n            if (resValues.length !== resValueLength)\n                throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"nicify of object: resValues.length !== resValueLength\", { value, resValues, resValueLength });\n            const shouldIndent = resValues.length > 1 || resValues.some(x => x.includes(\"\\n\"));\n            if (resValues.length === 0)\n                return `${constructorString}{}`;\n            if (shouldIndent) {\n                return `${constructorString}{${nl}${resValues.map(x => `${lineIndent}${x},${nl}`).join(\"\")}}`;\n            }\n            else {\n                return `${constructorString}{ ${resValues.join(\", \")} }`;\n            }\n        }\n        default: {\n            return `${typeof value}<${value}>`;\n        }\n    }\n}\nfunction replaceAll(input, searchValue, replaceValue) {\n    if (searchValue === \"\")\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"replaceAll: searchValue is empty\");\n    return input.split(searchValue).join(replaceValue);\n}\n undefined;\nfunction nicifyPropertyString(str) {\n    return JSON.stringify(str);\n}\n undefined;\nfunction getNicifiableKeys(value) {\n    const overridden = (\"getNicifiableKeys\" in value ? value.getNicifiableKeys?.bind(value) : null)?.();\n    if (overridden != null)\n        return overridden;\n    const keys = Object.keys(value).sort();\n    return (0,_arrays__WEBPACK_IMPORTED_MODULE_0__.unique)(keys);\n}\n undefined;\nfunction getNicifiableEntries(value) {\n    const recordLikes = [Headers];\n    function isRecordLike(value) {\n        return recordLikes.some(x => value instanceof x);\n    }\n    if (isRecordLike(value)) {\n        return [...value.entries()].sort(([a], [b]) => stringCompare(`${a}`, `${b}`));\n    }\n    const keys = getNicifiableKeys(value);\n    return keys.map((k) => [k, value[k]]);\n}\nfunction getNicifiedObjectExtraLines(value) {\n    return (\"getNicifiedObjectExtraLines\" in value ? value.getNicifiedObjectExtraLines : null)?.() ?? [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9zdHJpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlEO0FBQ0Y7QUFDSDtBQUNyQztBQUNQO0FBQ0Esa0JBQWtCLHdEQUFtQiw2Q0FBNkMsR0FBRztBQUNyRjtBQUNBO0FBQ0EsVUFTRTtBQUNLO0FBQ1A7QUFDQSxrQkFBa0Isd0RBQW1CLDZDQUE2QyxHQUFHO0FBQ3JGO0FBQ0E7QUFDQSxVQVNFO0FBQ0s7QUFDUDtBQUNBO0FBQ0EsVUFRRTtBQUNGO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsVUFzQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsVUFTRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxVQVNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQVlFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxrQ0FBa0Msc0RBQWE7QUFDL0M7QUFDQTtBQUNBLFVBWUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsVUFXRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esa0JBQWtCLHdEQUFtQiw0QkFBNEIsa0NBQWtDLGlCQUFpQjtBQUNwSDtBQUNBO0FBQ0EsVUFlRTtBQUNLO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esa0JBQWtCLHdEQUFtQiw0QkFBNEIsa0NBQWtDLGlCQUFpQjtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixXQUFXO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTSx3QkFBd0IscUJBQXFCO0FBQ3JFLEtBQUs7QUFDTDtBQUNBO0FBQ0EsVUFpREU7QUFDSztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBaUJFO0FBQ0s7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBZUU7QUFDSztBQUNQO0FBQ0E7QUFDQSxVQW9DRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDTSxtQ0FBbUM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseURBQWU7QUFDMUI7QUFDQSxZQUFZLHFGQUFxRjtBQUNqRyxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGdCQUFnQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZCQUE2QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSxzRUFBc0U7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwyQkFBMkIsRUFBRTtBQUN2QyxVQUFVLGNBQWM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE1BQU07QUFDNUI7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFdBQVcsUUFBUSxLQUFLO0FBQzNELCtCQUErQixLQUFLO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxLQUFLLEdBQUcsRUFBRTtBQUNuRjtBQUNBO0FBQ0EsOEJBQThCLHdEQUFtQiw0REFBNEQsa0NBQWtDO0FBQy9JO0FBQ0E7QUFDQSwrQkFBK0IsR0FBRyxFQUFFLHNCQUFzQixXQUFXLEVBQUUsRUFBRSxHQUFHLEdBQUcsWUFBWTtBQUMzRjtBQUNBO0FBQ0EsK0JBQStCLHFCQUFxQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDLEtBQUssb0JBQW9CO0FBQ3pGO0FBQ0E7QUFDQSwwQkFBMEIsdUJBQXVCLElBQUksaUJBQWlCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsU0FBUyxJQUFJLE1BQU0sR0FBRztBQUNyRDtBQUNBLHFEQUFxRCxXQUFXLEVBQUUsV0FBVztBQUM3RSxpREFBaUQsV0FBVztBQUM1RDtBQUNBLGtDQUFrQyxXQUFXLG9CQUFvQixvRUFBb0U7QUFDckk7QUFDQTtBQUNBLGtDQUFrQyxXQUFXLFVBQVUsV0FBVyxFQUFFLFdBQVcsRUFBRSx3Q0FBd0Msd0RBQXdELEVBQUU7QUFDbkw7QUFDQSxvREFBb0QsY0FBYztBQUNsRTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsaUJBQWlCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9CQUFvQjtBQUM5QztBQUNBLDBCQUEwQixvQkFBb0IsS0FBSztBQUNuRDtBQUNBLG1FQUFtRSxLQUFLLElBQUksU0FBUztBQUNyRixpR0FBaUcsWUFBWTtBQUM3RztBQUNBLDhCQUE4QixtQkFBbUIsU0FBUyxLQUFLO0FBQy9EO0FBQ0E7QUFDQSw4QkFBOEIsbUJBQW1CLElBQUksbUJBQW1CLEtBQUssR0FBRyxZQUFZLE9BQU87QUFDbkc7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLDBCQUEwQix3REFBbUIsNERBQTRELGtDQUFrQztBQUMzSTtBQUNBO0FBQ0EsMEJBQTBCLG9CQUFvQjtBQUM5QztBQUNBLDBCQUEwQixtQkFBbUIsRUFBRSxHQUFHLEVBQUUsc0JBQXNCLFdBQVcsRUFBRSxFQUFFLEdBQUcsR0FBRyxhQUFhO0FBQzVHO0FBQ0E7QUFDQSwwQkFBMEIsb0JBQW9CLEVBQUUsdUJBQXVCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixhQUFhLEdBQUcsTUFBTTtBQUM1QztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esa0JBQWtCLHdEQUFtQjtBQUNyQztBQUNBO0FBQ0EsVUFTRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLFVBaUJFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0NBQU07QUFDakI7QUFDQSxVQWNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLEVBQUUsTUFBTSxFQUFFO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcdXRpbHNcXHN0cmluZ3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZmluZExhc3RJbmRleCwgdW5pcXVlIH0gZnJvbSBcIi4vYXJyYXlzXCI7XG5pbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yIH0gZnJvbSBcIi4vZXJyb3JzXCI7XG5pbXBvcnQgeyBmaWx0ZXJVbmRlZmluZWQgfSBmcm9tIFwiLi9vYmplY3RzXCI7XG5leHBvcnQgZnVuY3Rpb24gdHlwZWRUb0xvd2VyY2FzZShzKSB7XG4gICAgaWYgKHR5cGVvZiBzICE9PSBcInN0cmluZ1wiKVxuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkV4cGVjdGVkIGEgc3RyaW5nIGZvciB0eXBlZFRvTG93ZXJjYXNlXCIsIHsgcyB9KTtcbiAgICByZXR1cm4gcy50b0xvd2VyQ2FzZSgpO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwidHlwZWRUb0xvd2VyY2FzZVwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIGV4cGVjdCh0eXBlZFRvTG93ZXJjYXNlKFwiXCIpKS50b0JlKFwiXCIpO1xuICAgIGV4cGVjdCh0eXBlZFRvTG93ZXJjYXNlKFwiSEVMTE9cIikpLnRvQmUoXCJoZWxsb1wiKTtcbiAgICBleHBlY3QodHlwZWRUb0xvd2VyY2FzZShcIkhlbGxvIFdvcmxkXCIpKS50b0JlKFwiaGVsbG8gd29ybGRcIik7XG4gICAgZXhwZWN0KHR5cGVkVG9Mb3dlcmNhc2UoXCJoZWxsb1wiKSkudG9CZShcImhlbGxvXCIpO1xuICAgIGV4cGVjdCh0eXBlZFRvTG93ZXJjYXNlKFwiMTIzXCIpKS50b0JlKFwiMTIzXCIpO1xuICAgIGV4cGVjdCh0eXBlZFRvTG93ZXJjYXNlKFwiTUlYRUQxMjNjYXNlXCIpKS50b0JlKFwibWl4ZWQxMjNjYXNlXCIpO1xuICAgIGV4cGVjdCh0eXBlZFRvTG93ZXJjYXNlKFwiU3BlY2lhbEBDaGFycyFcIikpLnRvQmUoXCJzcGVjaWFsQGNoYXJzIVwiKTtcbiAgICBleHBlY3QoKCkgPT4gdHlwZWRUb0xvd2VyY2FzZSgxMjMpKS50b1Rocm93KFwiRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIHR5cGVkVG9Mb3dlcmNhc2VcIik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB0eXBlZFRvVXBwZXJjYXNlKHMpIHtcbiAgICBpZiAodHlwZW9mIHMgIT09IFwic3RyaW5nXCIpXG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIHR5cGVkVG9VcHBlcmNhc2VcIiwgeyBzIH0pO1xuICAgIHJldHVybiBzLnRvVXBwZXJDYXNlKCk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJ0eXBlZFRvVXBwZXJjYXNlXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KHR5cGVkVG9VcHBlcmNhc2UoXCJcIikpLnRvQmUoXCJcIik7XG4gICAgZXhwZWN0KHR5cGVkVG9VcHBlcmNhc2UoXCJoZWxsb1wiKSkudG9CZShcIkhFTExPXCIpO1xuICAgIGV4cGVjdCh0eXBlZFRvVXBwZXJjYXNlKFwiSGVsbG8gV29ybGRcIikpLnRvQmUoXCJIRUxMTyBXT1JMRFwiKTtcbiAgICBleHBlY3QodHlwZWRUb1VwcGVyY2FzZShcIkhFTExPXCIpKS50b0JlKFwiSEVMTE9cIik7XG4gICAgZXhwZWN0KHR5cGVkVG9VcHBlcmNhc2UoXCIxMjNcIikpLnRvQmUoXCIxMjNcIik7XG4gICAgZXhwZWN0KHR5cGVkVG9VcHBlcmNhc2UoXCJtaXhlZDEyM0Nhc2VcIikpLnRvQmUoXCJNSVhFRDEyM0NBU0VcIik7XG4gICAgZXhwZWN0KHR5cGVkVG9VcHBlcmNhc2UoXCJzcGVjaWFsQGNoYXJzIVwiKSkudG9CZShcIlNQRUNJQUxAQ0hBUlMhXCIpO1xuICAgIGV4cGVjdCgoKSA9PiB0eXBlZFRvVXBwZXJjYXNlKDEyMykpLnRvVGhyb3coXCJFeHBlY3RlZCBhIHN0cmluZyBmb3IgdHlwZWRUb1VwcGVyY2FzZVwiKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHR5cGVkQ2FwaXRhbGl6ZShzKSB7XG4gICAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwidHlwZWRDYXBpdGFsaXplXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KHR5cGVkQ2FwaXRhbGl6ZShcIlwiKSkudG9CZShcIlwiKTtcbiAgICBleHBlY3QodHlwZWRDYXBpdGFsaXplKFwiaGVsbG9cIikpLnRvQmUoXCJIZWxsb1wiKTtcbiAgICBleHBlY3QodHlwZWRDYXBpdGFsaXplKFwiaGVsbG8gd29ybGRcIikpLnRvQmUoXCJIZWxsbyB3b3JsZFwiKTtcbiAgICBleHBlY3QodHlwZWRDYXBpdGFsaXplKFwiSEVMTE9cIikpLnRvQmUoXCJIRUxMT1wiKTtcbiAgICBleHBlY3QodHlwZWRDYXBpdGFsaXplKFwiMTIzdGVzdFwiKSkudG9CZShcIjEyM3Rlc3RcIik7XG4gICAgZXhwZWN0KHR5cGVkQ2FwaXRhbGl6ZShcImFscmVhZHkgQ2FwaXRhbGl6ZWRcIikpLnRvQmUoXCJBbHJlYWR5IENhcGl0YWxpemVkXCIpO1xuICAgIGV4cGVjdCh0eXBlZENhcGl0YWxpemUoXCJoXCIpKS50b0JlKFwiSFwiKTtcbn0pO1xuLyoqXG4gKiBDb21wYXJlcyB0d28gc3RyaW5ncyBpbiBhIHdheSB0aGF0IGlzIG5vdCBkZXBlbmRlbnQgb24gdGhlIGN1cnJlbnQgbG9jYWxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nQ29tcGFyZShhLCBiKSB7XG4gICAgY29uc3QgY21wID0gKGEsIGIpID0+IGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwO1xuICAgIHJldHVybiBjbXAoYS50b1VwcGVyQ2FzZSgpLCBiLnRvVXBwZXJDYXNlKCkpIHx8IGNtcChiLCBhKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInN0cmluZ0NvbXBhcmVcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBFcXVhbCBzdHJpbmdzXG4gICAgZXhwZWN0KHN0cmluZ0NvbXBhcmUoXCJhXCIsIFwiYVwiKSkudG9CZSgwKTtcbiAgICBleHBlY3Qoc3RyaW5nQ29tcGFyZShcIlwiLCBcIlwiKSkudG9CZSgwKTtcbiAgICAvLyBDYXNlIGNvbXBhcmlzb24gLSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBOT1QgY2FzZS1pbnNlbnNpdGl2ZVxuICAgIC8vIEl0IGNvbXBhcmVzIHVwcGVyY2FzZSB2ZXJzaW9ucyBmaXJzdCwgdGhlbiBvcmlnaW5hbCBzdHJpbmdzXG4gICAgZXhwZWN0KHN0cmluZ0NvbXBhcmUoXCJhXCIsIFwiQVwiKSkudG9CZSgtMSk7IC8vIGxvd2VyY2FzZSBjb21lcyBhZnRlciB1cHBlcmNhc2VcbiAgICBleHBlY3Qoc3RyaW5nQ29tcGFyZShcIkFcIiwgXCJhXCIpKS50b0JlKDEpOyAvLyB1cHBlcmNhc2UgY29tZXMgYmVmb3JlIGxvd2VyY2FzZVxuICAgIGV4cGVjdChzdHJpbmdDb21wYXJlKFwiYWJjXCIsIFwiQUJDXCIpKS50b0JlKC0xKTtcbiAgICBleHBlY3Qoc3RyaW5nQ29tcGFyZShcIkFCQ1wiLCBcImFiY1wiKSkudG9CZSgxKTtcbiAgICAvLyBEaWZmZXJlbnQgc3RyaW5nc1xuICAgIGV4cGVjdChzdHJpbmdDb21wYXJlKFwiYVwiLCBcImJcIikpLnRvQmUoLTEpO1xuICAgIGV4cGVjdChzdHJpbmdDb21wYXJlKFwiYlwiLCBcImFcIikpLnRvQmUoMSk7XG4gICAgLy8gU3RyaW5ncyB3aXRoIGRpZmZlcmVudCBsZW5ndGhzXG4gICAgZXhwZWN0KHN0cmluZ0NvbXBhcmUoXCJhYmNcIiwgXCJhYmNkXCIpKS50b0JlKC0xKTtcbiAgICBleHBlY3Qoc3RyaW5nQ29tcGFyZShcImFiY2RcIiwgXCJhYmNcIikpLnRvQmUoMSk7XG4gICAgLy8gU3RyaW5ncyB3aXRoIG51bWJlcnNcbiAgICBleHBlY3Qoc3RyaW5nQ29tcGFyZShcImExXCIsIFwiYTJcIikpLnRvQmUoLTEpO1xuICAgIGV4cGVjdChzdHJpbmdDb21wYXJlKFwiYTEwXCIsIFwiYTJcIikpLnRvQmUoLTEpO1xuICAgIC8vIFN0cmluZ3Mgd2l0aCBzcGVjaWFsIGNoYXJhY3RlcnNcbiAgICBleHBlY3Qoc3RyaW5nQ29tcGFyZShcImFcIiwgXCJhIVwiKSkudG9CZSgtMSk7XG4gICAgZXhwZWN0KHN0cmluZ0NvbXBhcmUoXCJhIVwiLCBcImFcIikpLnRvQmUoMSk7XG59KTtcbi8qKlxuICogUmV0dXJucyBhbGwgd2hpdGVzcGFjZSBjaGFyYWN0ZXIgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcuXG4gKlxuICogVXNlcyB0aGUgc2FtZSBkZWZpbml0aW9uIGZvciB3aGl0ZXNwYWNlIGFzIGBTdHJpbmcucHJvdG90eXBlLnRyaW0oKWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaGl0ZXNwYWNlUHJlZml4KHMpIHtcbiAgICByZXR1cm4gcy5zdWJzdHJpbmcoMCwgcy5sZW5ndGggLSBzLnRyaW1TdGFydCgpLmxlbmd0aCk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJnZXRXaGl0ZXNwYWNlUHJlZml4XCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KGdldFdoaXRlc3BhY2VQcmVmaXgoXCJcIikpLnRvQmUoXCJcIik7XG4gICAgZXhwZWN0KGdldFdoaXRlc3BhY2VQcmVmaXgoXCJoZWxsb1wiKSkudG9CZShcIlwiKTtcbiAgICBleHBlY3QoZ2V0V2hpdGVzcGFjZVByZWZpeChcIiBoZWxsb1wiKSkudG9CZShcIiBcIik7XG4gICAgZXhwZWN0KGdldFdoaXRlc3BhY2VQcmVmaXgoXCIgIGhlbGxvXCIpKS50b0JlKFwiICBcIik7XG4gICAgZXhwZWN0KGdldFdoaXRlc3BhY2VQcmVmaXgoXCJcXHRoZWxsb1wiKSkudG9CZShcIlxcdFwiKTtcbiAgICBleHBlY3QoZ2V0V2hpdGVzcGFjZVByZWZpeChcIlxcbiBoZWxsb1wiKSkudG9CZShcIlxcbiBcIik7XG4gICAgZXhwZWN0KGdldFdoaXRlc3BhY2VQcmVmaXgoXCIgICBcIikpLnRvQmUoXCIgICBcIik7XG4gICAgZXhwZWN0KGdldFdoaXRlc3BhY2VQcmVmaXgoXCIgXFx0XFxuXFxyXCIpKS50b0JlKFwiIFxcdFxcblxcclwiKTtcbn0pO1xuLyoqXG4gKiBSZXR1cm5zIGFsbCB3aGl0ZXNwYWNlIGNoYXJhY3RlciBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcuXG4gKlxuICogVXNlcyB0aGUgc2FtZSBkZWZpbml0aW9uIGZvciB3aGl0ZXNwYWNlIGFzIGBTdHJpbmcucHJvdG90eXBlLnRyaW0oKWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaGl0ZXNwYWNlU3VmZml4KHMpIHtcbiAgICByZXR1cm4gcy5zdWJzdHJpbmcocy50cmltRW5kKCkubGVuZ3RoKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImdldFdoaXRlc3BhY2VTdWZmaXhcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBleHBlY3QoZ2V0V2hpdGVzcGFjZVN1ZmZpeChcIlwiKSkudG9CZShcIlwiKTtcbiAgICBleHBlY3QoZ2V0V2hpdGVzcGFjZVN1ZmZpeChcImhlbGxvXCIpKS50b0JlKFwiXCIpO1xuICAgIGV4cGVjdChnZXRXaGl0ZXNwYWNlU3VmZml4KFwiaGVsbG8gXCIpKS50b0JlKFwiIFwiKTtcbiAgICBleHBlY3QoZ2V0V2hpdGVzcGFjZVN1ZmZpeChcImhlbGxvICBcIikpLnRvQmUoXCIgIFwiKTtcbiAgICBleHBlY3QoZ2V0V2hpdGVzcGFjZVN1ZmZpeChcImhlbGxvXFx0XCIpKS50b0JlKFwiXFx0XCIpO1xuICAgIGV4cGVjdChnZXRXaGl0ZXNwYWNlU3VmZml4KFwiaGVsbG8gXFxuXCIpKS50b0JlKFwiIFxcblwiKTtcbiAgICBleHBlY3QoZ2V0V2hpdGVzcGFjZVN1ZmZpeChcIiAgIFwiKSkudG9CZShcIiAgIFwiKTtcbiAgICBleHBlY3QoZ2V0V2hpdGVzcGFjZVN1ZmZpeChcIiBcXHRcXG5cXHJcIikpLnRvQmUoXCIgXFx0XFxuXFxyXCIpO1xufSk7XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgd2l0aCBhbGwgZW1wdHkgb3Igd2hpdGVzcGFjZS1vbmx5IGxpbmVzIGF0IHRoZSBzdGFydCByZW1vdmVkLlxuICpcbiAqIFVzZXMgdGhlIHNhbWUgZGVmaW5pdGlvbiBmb3Igd2hpdGVzcGFjZSBhcyBgU3RyaW5nLnByb3RvdHlwZS50cmltKClgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJpbUVtcHR5TGluZXNTdGFydChzKSB7XG4gICAgY29uc3QgbGluZXMgPSBzLnNwbGl0KFwiXFxuXCIpO1xuICAgIGNvbnN0IGZpcnN0Tm9uRW1wdHlMaW5lSW5kZXggPSBsaW5lcy5maW5kSW5kZXgoKGxpbmUpID0+IGxpbmUudHJpbSgpICE9PSBcIlwiKTtcbiAgICAvLyBJZiBhbGwgbGluZXMgYXJlIGVtcHR5IG9yIHdoaXRlc3BhY2Utb25seSwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZ1xuICAgIGlmIChmaXJzdE5vbkVtcHR5TGluZUluZGV4ID09PSAtMSlcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgcmV0dXJuIGxpbmVzLnNsaWNlKGZpcnN0Tm9uRW1wdHlMaW5lSW5kZXgpLmpvaW4oXCJcXG5cIik7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJ0cmltRW1wdHlMaW5lc1N0YXJ0XCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KHRyaW1FbXB0eUxpbmVzU3RhcnQoXCJcIikpLnRvQmUoXCJcIik7XG4gICAgZXhwZWN0KHRyaW1FbXB0eUxpbmVzU3RhcnQoXCJoZWxsb1wiKSkudG9CZShcImhlbGxvXCIpO1xuICAgIGV4cGVjdCh0cmltRW1wdHlMaW5lc1N0YXJ0KFwiXFxuaGVsbG9cIikpLnRvQmUoXCJoZWxsb1wiKTtcbiAgICBleHBlY3QodHJpbUVtcHR5TGluZXNTdGFydChcIlxcblxcbmhlbGxvXCIpKS50b0JlKFwiaGVsbG9cIik7XG4gICAgZXhwZWN0KHRyaW1FbXB0eUxpbmVzU3RhcnQoXCIgIFxcblxcdFxcbmhlbGxvXCIpKS50b0JlKFwiaGVsbG9cIik7XG4gICAgZXhwZWN0KHRyaW1FbXB0eUxpbmVzU3RhcnQoXCJcXG5cXG5oZWxsb1xcbndvcmxkXCIpKS50b0JlKFwiaGVsbG9cXG53b3JsZFwiKTtcbiAgICBleHBlY3QodHJpbUVtcHR5TGluZXNTdGFydChcImhlbGxvXFxuXFxud29ybGRcIikpLnRvQmUoXCJoZWxsb1xcblxcbndvcmxkXCIpO1xuICAgIGV4cGVjdCh0cmltRW1wdHlMaW5lc1N0YXJ0KFwiaGVsbG9cXG53b3JsZFxcblwiKSkudG9CZShcImhlbGxvXFxud29ybGRcXG5cIik7XG4gICAgZXhwZWN0KHRyaW1FbXB0eUxpbmVzU3RhcnQoXCJcXG4gIFxcblxcbmhlbGxvXFxuICBcXG53b3JsZFwiKSkudG9CZShcImhlbGxvXFxuICBcXG53b3JsZFwiKTtcbiAgICAvLyBFZGdlIGNhc2U6IGFsbCBsaW5lcyBhcmUgZW1wdHlcbiAgICBleHBlY3QodHJpbUVtcHR5TGluZXNTdGFydChcIlxcblxcbiAgXFxuXFx0XCIpKS50b0JlKFwiXCIpO1xufSk7XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgd2l0aCBhbGwgZW1wdHkgb3Igd2hpdGVzcGFjZS1vbmx5IGxpbmVzIGF0IHRoZSBlbmQgcmVtb3ZlZC5cbiAqXG4gKiBVc2VzIHRoZSBzYW1lIGRlZmluaXRpb24gZm9yIHdoaXRlc3BhY2UgYXMgYFN0cmluZy5wcm90b3R5cGUudHJpbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyaW1FbXB0eUxpbmVzRW5kKHMpIHtcbiAgICBjb25zdCBsaW5lcyA9IHMuc3BsaXQoXCJcXG5cIik7XG4gICAgY29uc3QgbGFzdE5vbkVtcHR5TGluZUluZGV4ID0gZmluZExhc3RJbmRleChsaW5lcywgKGxpbmUpID0+IGxpbmUudHJpbSgpICE9PSBcIlwiKTtcbiAgICByZXR1cm4gbGluZXMuc2xpY2UoMCwgbGFzdE5vbkVtcHR5TGluZUluZGV4ICsgMSkuam9pbihcIlxcblwiKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInRyaW1FbXB0eUxpbmVzRW5kXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KHRyaW1FbXB0eUxpbmVzRW5kKFwiXCIpKS50b0JlKFwiXCIpO1xuICAgIGV4cGVjdCh0cmltRW1wdHlMaW5lc0VuZChcImhlbGxvXCIpKS50b0JlKFwiaGVsbG9cIik7XG4gICAgZXhwZWN0KHRyaW1FbXB0eUxpbmVzRW5kKFwiaGVsbG9cXG5cIikpLnRvQmUoXCJoZWxsb1wiKTtcbiAgICBleHBlY3QodHJpbUVtcHR5TGluZXNFbmQoXCJoZWxsb1xcblxcblwiKSkudG9CZShcImhlbGxvXCIpO1xuICAgIGV4cGVjdCh0cmltRW1wdHlMaW5lc0VuZChcImhlbGxvXFxuICBcXG5cXHRcIikpLnRvQmUoXCJoZWxsb1wiKTtcbiAgICBleHBlY3QodHJpbUVtcHR5TGluZXNFbmQoXCJoZWxsb1xcbndvcmxkXFxuXFxuXCIpKS50b0JlKFwiaGVsbG9cXG53b3JsZFwiKTtcbiAgICBleHBlY3QodHJpbUVtcHR5TGluZXNFbmQoXCJoZWxsb1xcblxcbndvcmxkXCIpKS50b0JlKFwiaGVsbG9cXG5cXG53b3JsZFwiKTtcbiAgICBleHBlY3QodHJpbUVtcHR5TGluZXNFbmQoXCJcXG5oZWxsb1xcbndvcmxkXCIpKS50b0JlKFwiXFxuaGVsbG9cXG53b3JsZFwiKTtcbiAgICBleHBlY3QodHJpbUVtcHR5TGluZXNFbmQoXCJoZWxsb1xcbiAgXFxud29ybGRcXG5cXG4gIFwiKSkudG9CZShcImhlbGxvXFxuICBcXG53b3JsZFwiKTtcbiAgICAvLyBFZGdlIGNhc2U6IGFsbCBsaW5lcyBhcmUgZW1wdHlcbiAgICBleHBlY3QodHJpbUVtcHR5TGluZXNFbmQoXCJcXG5cXG4gIFxcblxcdFwiKSkudG9CZShcIlwiKTtcbn0pO1xuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHdpdGggYWxsIGVtcHR5IG9yIHdoaXRlc3BhY2Utb25seSBsaW5lcyB0cmltbWVkIGF0IHRoZSBzdGFydCBhbmQgZW5kLlxuICpcbiAqIFVzZXMgdGhlIHNhbWUgZGVmaW5pdGlvbiBmb3Igd2hpdGVzcGFjZSBhcyBgU3RyaW5nLnByb3RvdHlwZS50cmltKClgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJpbUxpbmVzKHMpIHtcbiAgICByZXR1cm4gdHJpbUVtcHR5TGluZXNFbmQodHJpbUVtcHR5TGluZXNTdGFydChzKSk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJ0cmltTGluZXNcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBleHBlY3QodHJpbUxpbmVzKFwiXCIpKS50b0JlKFwiXCIpO1xuICAgIGV4cGVjdCh0cmltTGluZXMoXCIgXCIpKS50b0JlKFwiXCIpO1xuICAgIGV4cGVjdCh0cmltTGluZXMoXCIgXFxuIFwiKSkudG9CZShcIlwiKTtcbiAgICBleHBlY3QodHJpbUxpbmVzKFwiIGFiYyBcIikpLnRvQmUoXCIgYWJjIFwiKTtcbiAgICBleHBlY3QodHJpbUxpbmVzKFwiXFxuICBcXG5MaW5lMVxcbkxpbmUyXFxuIFxcblwiKSkudG9CZShcIkxpbmUxXFxuTGluZTJcIik7XG4gICAgZXhwZWN0KHRyaW1MaW5lcyhcIkxpbmUxXFxuICAgXFxuTGluZTJcIikpLnRvQmUoXCJMaW5lMVxcbiAgIFxcbkxpbmUyXCIpO1xuICAgIGV4cGVjdCh0cmltTGluZXMoXCIgXFxuICAgIFxcblxcdFwiKSkudG9CZShcIlwiKTtcbiAgICBleHBlY3QodHJpbUxpbmVzKFwiICAgSGVsbG8gV29ybGRcIikpLnRvQmUoXCIgICBIZWxsbyBXb3JsZFwiKTtcbiAgICBleHBlY3QodHJpbUxpbmVzKFwiXFxuXCIpKS50b0JlKFwiXCIpO1xuICAgIGV4cGVjdCh0cmltTGluZXMoXCJcXHQgXFxuXFx0XFx0TGluZTEgXFxuIFxcbkxpbmUyXFx0XFx0XFxuXFx0ICBcIikpLnRvQmUoXCJcXHRcXHRMaW5lMSBcXG4gXFxuTGluZTJcXHRcXHRcIik7XG59KTtcbi8qKlxuICogQSB0ZW1wbGF0ZSBsaXRlcmFsIHRhZyB0aGF0IHJldHVybnMgdGhlIHNhbWUgc3RyaW5nIGFzIHRoZSB0ZW1wbGF0ZSBsaXRlcmFsIHdpdGhvdXQgYSB0YWcuXG4gKlxuICogVXNlZnVsIGZvciBpbXBsZW1lbnRpbmcgeW91ciBvd24gdGVtcGxhdGUgbGl0ZXJhbCB0YWdzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVJZGVudGl0eShzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgICBpZiAodmFsdWVzLmxlbmd0aCAhPT0gc3RyaW5ncy5sZW5ndGggLSAxKVxuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgbnVtYmVyIG9mIHZhbHVlczsgbXVzdCBiZSBvbmUgbGVzcyB0aGFuIHN0cmluZ3NcIiwgeyBzdHJpbmdzLCB2YWx1ZXMgfSk7XG4gICAgcmV0dXJuIHN0cmluZ3MucmVkdWNlKChyZXN1bHQsIHN0ciwgaSkgPT4gcmVzdWx0ICsgc3RyICsgKHZhbHVlc1tpXSA/PyAnJyksICcnKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInRlbXBsYXRlSWRlbnRpdHlcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICBleHBlY3QodGVtcGxhdGVJZGVudGl0eSBgSGVsbG8gV29ybGRgKS50b0JlKFwiSGVsbG8gV29ybGRcIik7XG4gICAgZXhwZWN0KHRlbXBsYXRlSWRlbnRpdHkgYCR7XCJIZWxsb1wifWApLnRvQmUoXCJIZWxsb1wiKTtcbiAgICBjb25zdCBncmVldGluZyA9IFwiSGVsbG9cIjtcbiAgICBjb25zdCBzdWJqZWN0ID0gXCJXb3JsZFwiO1xuICAgIGV4cGVjdCh0ZW1wbGF0ZUlkZW50aXR5IGAke2dyZWV0aW5nfSwgJHtzdWJqZWN0fSFgKS50b0JlKFwiSGVsbG8sIFdvcmxkIVwiKTtcbiAgICBleHBlY3QodGVtcGxhdGVJZGVudGl0eSBgJHtcIkFcIn0ke1wiQlwifSR7XCJDXCJ9YCkudG9CZShcIkFCQ1wiKTtcbiAgICBleHBlY3QodGVtcGxhdGVJZGVudGl0eSBgU3RhcnQke1wiXCJ9TWlkZGxlJHtcIlwifUVuZGApLnRvQmUoXCJTdGFydE1pZGRsZUVuZFwiKTtcbiAgICBleHBlY3QodGVtcGxhdGVJZGVudGl0eSBgYCkudG9CZShcIlwiKTtcbiAgICBleHBlY3QodGVtcGxhdGVJZGVudGl0eSBgTGluZTFcbkxpbmUyYCkudG9CZShcIkxpbmUxXFxuTGluZTJcIik7XG4gICAgZXhwZWN0KHRlbXBsYXRlSWRlbnRpdHkoW1wiYSBcIiwgXCIgc2NpZW50aWZpYyBcIiwgXCJndW5cIl0sIFwiY2VydGFpblwiLCBcInJhaWxcIikpLnRvQmUoXCJhIGNlcnRhaW4gc2NpZW50aWZpYyByYWlsZ3VuXCIpO1xuICAgIGV4cGVjdCh0ZW1wbGF0ZUlkZW50aXR5KFtcIm9ubHkgb25lIHBhcnRcIl0pKS50b0JlKFwib25seSBvbmUgcGFydFwiKTtcbiAgICBleHBlY3QoKCkgPT4gdGVtcGxhdGVJZGVudGl0eShbXCJhIFwiLCBcImJcIiwgXCJjXCJdLCBcIm9ubHkgb25lXCIpKS50b1Rocm93KFwiSW52YWxpZCBudW1iZXIgb2YgdmFsdWVzXCIpO1xuICAgIGV4cGVjdCgoKSA9PiB0ZW1wbGF0ZUlkZW50aXR5KFtcImFcIiwgXCJiXCJdLCBcInhcIiwgXCJ5XCIpKS50b1Rocm93KFwiSW52YWxpZCBudW1iZXIgb2YgdmFsdWVzXCIpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZGVpbmRlbnQoc3RyaW5ncywgLi4udmFsdWVzKSB7XG4gICAgaWYgKHR5cGVvZiBzdHJpbmdzID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gZGVpbmRlbnQoW3N0cmluZ3NdKTtcbiAgICByZXR1cm4gdGVtcGxhdGVJZGVudGl0eSguLi5kZWluZGVudFRlbXBsYXRlKHN0cmluZ3MsIC4uLnZhbHVlcykpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlaW5kZW50VGVtcGxhdGUoc3RyaW5ncywgLi4udmFsdWVzKSB7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggIT09IHN0cmluZ3MubGVuZ3RoIC0gMSlcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIG51bWJlciBvZiB2YWx1ZXM7IG11c3QgYmUgb25lIGxlc3MgdGhhbiBzdHJpbmdzXCIsIHsgc3RyaW5ncywgdmFsdWVzIH0pO1xuICAgIGNvbnN0IHRyaW1tZWRTdHJpbmdzID0gWy4uLnN0cmluZ3NdO1xuICAgIHRyaW1tZWRTdHJpbmdzWzBdID0gdHJpbUVtcHR5TGluZXNTdGFydCh0cmltbWVkU3RyaW5nc1swXSArIFwiK1wiKS5zbGljZSgwLCAtMSk7XG4gICAgdHJpbW1lZFN0cmluZ3NbdHJpbW1lZFN0cmluZ3MubGVuZ3RoIC0gMV0gPSB0cmltRW1wdHlMaW5lc0VuZChcIitcIiArIHRyaW1tZWRTdHJpbmdzW3RyaW1tZWRTdHJpbmdzLmxlbmd0aCAtIDFdKS5zbGljZSgxKTtcbiAgICBjb25zdCBpbmRlbnRhdGlvbiA9IHRyaW1tZWRTdHJpbmdzXG4gICAgICAgIC5qb2luKFwiJHtTT01FX1ZBTFVFfVwiKVxuICAgICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgICAgLmZpbHRlcigobGluZSkgPT4gbGluZS50cmltKCkgIT09IFwiXCIpXG4gICAgICAgIC5tYXAoKGxpbmUpID0+IGdldFdoaXRlc3BhY2VQcmVmaXgobGluZSkubGVuZ3RoKVxuICAgICAgICAucmVkdWNlKChtaW4sIGN1cnJlbnQpID0+IE1hdGgubWluKG1pbiwgY3VycmVudCksIEluZmluaXR5KTtcbiAgICBjb25zdCBkZWluZGVudGVkU3RyaW5ncyA9IHRyaW1tZWRTdHJpbmdzXG4gICAgICAgIC5tYXAoKHN0cmluZywgc3RyaW5nSW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ1xuICAgICAgICAgICAgLnNwbGl0KFwiXFxuXCIpXG4gICAgICAgICAgICAubWFwKChsaW5lLCBsaW5lSW5kZXgpID0+IHN0cmluZ0luZGV4ICE9PSAwICYmIGxpbmVJbmRleCA9PT0gMCA/IGxpbmUgOiBsaW5lLnN1YnN0cmluZyhpbmRlbnRhdGlvbikpXG4gICAgICAgICAgICAuam9pbihcIlxcblwiKTtcbiAgICB9KTtcbiAgICBjb25zdCBpbmRlbnRlZFZhbHVlcyA9IHZhbHVlcy5tYXAoKHZhbHVlLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpcnN0TGluZUluZGVudGF0aW9uID0gZ2V0V2hpdGVzcGFjZVByZWZpeChkZWluZGVudGVkU3RyaW5nc1tpXS5zcGxpdChcIlxcblwiKS5hdCgtMSkpO1xuICAgICAgICByZXR1cm4gYCR7dmFsdWV9YC5yZXBsYWNlQWxsKFwiXFxuXCIsIGBcXG4ke2ZpcnN0TGluZUluZGVudGF0aW9ufWApO1xuICAgIH0pO1xuICAgIHJldHVybiBbZGVpbmRlbnRlZFN0cmluZ3MsIC4uLmluZGVudGVkVmFsdWVzXTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImRlaW5kZW50XCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIHN0cmluZyBpbnB1dFxuICAgIGV4cGVjdChkZWluZGVudChcIiAgaGVsbG9cIikpLnRvQmUoXCJoZWxsb1wiKTtcbiAgICBleHBlY3QoZGVpbmRlbnQoXCIgIGhlbGxvXFxuICB3b3JsZFwiKSkudG9CZShcImhlbGxvXFxud29ybGRcIik7XG4gICAgZXhwZWN0KGRlaW5kZW50KFwiICBoZWxsb1xcbiAgICB3b3JsZFwiKSkudG9CZShcImhlbGxvXFxuICB3b3JsZFwiKTtcbiAgICBleHBlY3QoZGVpbmRlbnQoXCJcXG4gIGhlbGxvXFxuICB3b3JsZFxcblwiKSkudG9CZShcImhlbGxvXFxud29ybGRcIik7XG4gICAgLy8gVGVzdCB3aXRoIGVtcHR5IGlucHV0XG4gICAgZXhwZWN0KGRlaW5kZW50KFwiXCIpKS50b0JlKFwiXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCB0ZW1wbGF0ZSBsaXRlcmFsXG4gICAgZXhwZWN0KGRlaW5kZW50IGBcbiAgICBoZWxsb1xuICAgIHdvcmxkXG4gIGApLnRvQmUoXCJoZWxsb1xcbndvcmxkXCIpO1xuICAgIGV4cGVjdChkZWluZGVudCBgXG4gICAgaGVsbG9cbiAgICAgIHdvcmxkXG4gIGApLnRvQmUoXCJoZWxsb1xcbiAgd29ybGRcIik7XG4gICAgLy8gVGVzdCB3aXRoIHZhbHVlc1xuICAgIGNvbnN0IHZhbHVlID0gXCJ0ZXN0XCI7XG4gICAgZXhwZWN0KGRlaW5kZW50IGBcbiAgICBoZWxsbyAke3ZhbHVlfVxuICAgIHdvcmxkXG4gIGApLnRvQmUoYGhlbGxvICR7dmFsdWV9XFxud29ybGRgKTtcbiAgICAvLyBUZXN0IHdpdGggbXVsdGlsaW5lIHZhbHVlc1xuICAgIGV4cGVjdChkZWluZGVudCBgXG4gICAgaGVsbG9cbiAgICAgIHRvICR7XCJsaW5lMVxcbiAgbGluZTJcIn1cbiAgICB3b3JsZFxuICBgKS50b0JlKGBoZWxsb1xcbiAgdG8gbGluZTFcXG4gICAgbGluZTJcXG53b3JsZGApO1xuICAgIC8vIExlYWRpbmcgd2hpdGVzcGFjZSB2YWx1ZXNcbiAgICBleHBlY3QoZGVpbmRlbnQgYFxuICAgICR7XCIgIFwifUFcbiAgICAke1wiICBcIn1CXG4gICAgJHtcIiAgXCJ9Q1xuICBgKS50b0JlKGAgIEFcXG4gIEJcXG4gIENgKTtcbiAgICAvLyBUcmFpbGluZyB3aGl0ZXNwYWNlcyAobm90ZTogdGhlcmUgYXJlIHR3byB3aGl0ZXNwYWNlcyBlYWNoIGFmdGVyIEEgYW5kIGFmdGVyIEMpXG4gICAgZXhwZWN0KGRlaW5kZW50IGBcbiAgICBBICBcbiAgICBCICAke1wiICBcIn1cbiAgICBDICBcbiAgYCkudG9CZShgQSAgXFxuQiAgICBcXG5DICBgKTtcbiAgICAvLyBUZXN0IHdpdGggbWl4ZWQgaW5kZW50YXRpb25cbiAgICBleHBlY3QoZGVpbmRlbnQgYFxuICAgIGhlbGxvXG4gICAgICB3b3JsZFxuICAgICAgICAhXG4gIGApLnRvQmUoXCJoZWxsb1xcbiAgd29ybGRcXG4gICAgIVwiKTtcbiAgICAvLyBUZXN0IGVycm9yIGNhc2VzXG4gICAgZXhwZWN0KCgpID0+IGRlaW5kZW50KFtcImFcIiwgXCJiXCIsIFwiY1wiXSwgXCJ0b29cIiwgXCJtYW55XCIsIFwidmFsdWVzXCIpKS50b1Rocm93KFwiSW52YWxpZCBudW1iZXIgb2YgdmFsdWVzXCIpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFNjb3BlcyhzY29wZSwgcmVtb3ZlRHVwbGljYXRlcyA9IHRydWUpIHtcbiAgICAvLyBUT0RPIHdoYXQgaXMgdGhpcyBmb3I/IGNhbiB3ZSBtb3ZlIHRoaXMgaW50byB0aGUgT0F1dGggY29kZSBpbiB0aGUgYmFja2VuZD9cbiAgICBjb25zdCB0cmltbWVkU3RyaW5nID0gc2NvcGUudHJpbSgpO1xuICAgIGNvbnN0IHNjb3Blc0FycmF5ID0gdHJpbW1lZFN0cmluZy5zcGxpdCgvXFxzKy8pO1xuICAgIGNvbnN0IGZpbHRlcmVkID0gc2NvcGVzQXJyYXkuZmlsdGVyKHNjb3BlID0+IHNjb3BlLmxlbmd0aCA+IDApO1xuICAgIHJldHVybiByZW1vdmVEdXBsaWNhdGVzID8gWy4uLm5ldyBTZXQoZmlsdGVyZWQpXSA6IGZpbHRlcmVkO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiZXh0cmFjdFNjb3Blc1wiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBlbXB0eSBzdHJpbmdcbiAgICBleHBlY3QoZXh0cmFjdFNjb3BlcyhcIlwiKSkudG9FcXVhbChbXSk7XG4gICAgLy8gVGVzdCB3aXRoIHNpbmdsZSBzY29wZVxuICAgIGV4cGVjdChleHRyYWN0U2NvcGVzKFwicmVhZFwiKSkudG9FcXVhbChbXCJyZWFkXCJdKTtcbiAgICAvLyBUZXN0IHdpdGggbXVsdGlwbGUgc2NvcGVzXG4gICAgZXhwZWN0KGV4dHJhY3RTY29wZXMoXCJyZWFkIHdyaXRlXCIpKS50b0VxdWFsKFtcInJlYWRcIiwgXCJ3cml0ZVwiXSk7XG4gICAgLy8gVGVzdCB3aXRoIGV4dHJhIHdoaXRlc3BhY2VcbiAgICBleHBlY3QoZXh0cmFjdFNjb3BlcyhcIiAgcmVhZCAgd3JpdGUgIFwiKSkudG9FcXVhbChbXCJyZWFkXCIsIFwid3JpdGVcIl0pO1xuICAgIC8vIFRlc3Qgd2l0aCBuZXdsaW5lcyBhbmQgdGFic1xuICAgIGV4cGVjdChleHRyYWN0U2NvcGVzKFwicmVhZFxcbndyaXRlXFx0ZGVsZXRlXCIpKS50b0VxdWFsKFtcInJlYWRcIiwgXCJ3cml0ZVwiLCBcImRlbGV0ZVwiXSk7XG4gICAgLy8gVGVzdCB3aXRoIGR1cGxpY2F0ZXMgKGRlZmF1bHQgYmVoYXZpb3IpXG4gICAgZXhwZWN0KGV4dHJhY3RTY29wZXMoXCJyZWFkIHdyaXRlIHJlYWRcIikpLnRvRXF1YWwoW1wicmVhZFwiLCBcIndyaXRlXCJdKTtcbiAgICAvLyBUZXN0IHdpdGggZHVwbGljYXRlcyAoZXhwbGljaXRseSBzZXQgdG8gcmVtb3ZlKVxuICAgIGV4cGVjdChleHRyYWN0U2NvcGVzKFwicmVhZCB3cml0ZSByZWFkXCIsIHRydWUpKS50b0VxdWFsKFtcInJlYWRcIiwgXCJ3cml0ZVwiXSk7XG4gICAgLy8gVGVzdCB3aXRoIGR1cGxpY2F0ZXMgKGV4cGxpY2l0bHkgc2V0IHRvIGtlZXApXG4gICAgZXhwZWN0KGV4dHJhY3RTY29wZXMoXCJyZWFkIHdyaXRlIHJlYWRcIiwgZmFsc2UpKS50b0VxdWFsKFtcInJlYWRcIiwgXCJ3cml0ZVwiLCBcInJlYWRcIl0pO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VTY29wZVN0cmluZ3MoLi4uc2NvcGVzKSB7XG4gICAgLy8gVE9ETyB3aGF0IGlzIHRoaXMgZm9yPyBjYW4gd2UgbW92ZSB0aGlzIGludG8gdGhlIE9BdXRoIGNvZGUgaW4gdGhlIGJhY2tlbmQ/XG4gICAgY29uc3QgYWxsU2NvcGUgPSBzY29wZXMubWFwKChzKSA9PiBleHRyYWN0U2NvcGVzKHMpKS5mbGF0KCkuam9pbihcIiBcIik7XG4gICAgcmV0dXJuIGV4dHJhY3RTY29wZXMoYWxsU2NvcGUpLmpvaW4oXCIgXCIpO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwibWVyZ2VTY29wZVN0cmluZ3NcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggZW1wdHkgaW5wdXRcbiAgICBleHBlY3QobWVyZ2VTY29wZVN0cmluZ3MoKSkudG9CZShcIlwiKTtcbiAgICAvLyBUZXN0IHdpdGggc2luZ2xlIHNjb3BlIHN0cmluZ1xuICAgIGV4cGVjdChtZXJnZVNjb3BlU3RyaW5ncyhcInJlYWQgd3JpdGVcIikpLnRvQmUoXCJyZWFkIHdyaXRlXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBtdWx0aXBsZSBzY29wZSBzdHJpbmdzXG4gICAgZXhwZWN0KG1lcmdlU2NvcGVTdHJpbmdzKFwicmVhZFwiLCBcIndyaXRlXCIpKS50b0JlKFwicmVhZCB3cml0ZVwiKTtcbiAgICAvLyBUZXN0IHdpdGggb3ZlcmxhcHBpbmcgc2NvcGVzXG4gICAgZXhwZWN0KG1lcmdlU2NvcGVTdHJpbmdzKFwicmVhZCB3cml0ZVwiLCBcIndyaXRlIGRlbGV0ZVwiKSkudG9CZShcInJlYWQgd3JpdGUgZGVsZXRlXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBleHRyYSB3aGl0ZXNwYWNlXG4gICAgZXhwZWN0KG1lcmdlU2NvcGVTdHJpbmdzKFwiICByZWFkICB3cml0ZSAgXCIsIFwiICBkZWxldGUgIFwiKSkudG9CZShcInJlYWQgd3JpdGUgZGVsZXRlXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBkdXBsaWNhdGVzIGFjcm9zcyBzdHJpbmdzXG4gICAgZXhwZWN0KG1lcmdlU2NvcGVTdHJpbmdzKFwicmVhZCB3cml0ZVwiLCBcIndyaXRlIGRlbGV0ZVwiLCBcInJlYWRcIikpLnRvQmUoXCJyZWFkIHdyaXRlIGRlbGV0ZVwiKTtcbiAgICAvLyBUZXN0IHdpdGggZW1wdHkgc3RyaW5nc1xuICAgIGV4cGVjdChtZXJnZVNjb3BlU3RyaW5ncyhcInJlYWQgd3JpdGVcIiwgXCJcIiwgXCJkZWxldGVcIikpLnRvQmUoXCJyZWFkIHdyaXRlIGRlbGV0ZVwiKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVRlbXBsYXRlTGl0ZXJhbChzKSB7XG4gICAgcmV0dXJuIHMucmVwbGFjZUFsbChcImBcIiwgXCJcXFxcYFwiKS5yZXBsYWNlQWxsKFwiXFxcXFwiLCBcIlxcXFxcXFxcXCIpLnJlcGxhY2VBbGwoXCIkXCIsIFwiXFxcXCRcIik7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJlc2NhcGVUZW1wbGF0ZUxpdGVyYWxcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggZW1wdHkgc3RyaW5nXG4gICAgZXhwZWN0KGVzY2FwZVRlbXBsYXRlTGl0ZXJhbChcIlwiKSkudG9CZShcIlwiKTtcbiAgICAvLyBUZXN0IHdpdGggbm9ybWFsIHN0cmluZyAobm8gc3BlY2lhbCBjaGFyYWN0ZXJzKVxuICAgIGV4cGVjdChlc2NhcGVUZW1wbGF0ZUxpdGVyYWwoXCJoZWxsbyB3b3JsZFwiKSkudG9CZShcImhlbGxvIHdvcmxkXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBiYWNrdGlja1xuICAgIGNvbnN0IGlucHV0MSA9IFwiaGVsbG8gYHdvcmxkYFwiO1xuICAgIGNvbnN0IG91dHB1dDEgPSBlc2NhcGVUZW1wbGF0ZUxpdGVyYWwoaW5wdXQxKTtcbiAgICAvLyBWZXJpZnkgYmFja3RpY2tzIGFyZSBlc2NhcGVkXG4gICAgZXhwZWN0KG91dHB1dDEuaW5jbHVkZXMoXCJcXFxcYFwiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3Qob3V0cHV0MSkubm90LnRvQmUoaW5wdXQxKTtcbiAgICAvLyBUZXN0IHdpdGggYmFja3NsYXNoXG4gICAgY29uc3QgaW5wdXQyID0gXCJoZWxsbyBcXFxcd29ybGRcIjtcbiAgICBjb25zdCBvdXRwdXQyID0gZXNjYXBlVGVtcGxhdGVMaXRlcmFsKGlucHV0Mik7XG4gICAgLy8gVmVyaWZ5IGJhY2tzbGFzaGVzIGFyZSBlc2NhcGVkXG4gICAgZXhwZWN0KG91dHB1dDIuaW5jbHVkZXMoXCJcXFxcXFxcXFwiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3Qob3V0cHV0Mikubm90LnRvQmUoaW5wdXQyKTtcbiAgICAvLyBUZXN0IHdpdGggZG9sbGFyIHNpZ25cbiAgICBjb25zdCBpbnB1dDMgPSBcImhlbGxvICR3b3JsZFwiO1xuICAgIGNvbnN0IG91dHB1dDMgPSBlc2NhcGVUZW1wbGF0ZUxpdGVyYWwoaW5wdXQzKTtcbiAgICAvLyBWZXJpZnkgZG9sbGFyIHNpZ25zIGFyZSBlc2NhcGVkXG4gICAgZXhwZWN0KG91dHB1dDMuaW5jbHVkZXMoXCJcXFxcJFwiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3Qob3V0cHV0Mykubm90LnRvQmUoaW5wdXQzKTtcbiAgICAvLyBUZXN0IHdpdGggbXVsdGlwbGUgc3BlY2lhbCBjaGFyYWN0ZXJzXG4gICAgY29uc3QgaW5wdXQ0ID0gXCJgaGVsbG9gICR3b3JsZFxcXFxcIjtcbiAgICBjb25zdCBvdXRwdXQ0ID0gZXNjYXBlVGVtcGxhdGVMaXRlcmFsKGlucHV0NCk7XG4gICAgLy8gVmVyaWZ5IGFsbCBzcGVjaWFsIGNoYXJhY3RlcnMgYXJlIGVzY2FwZWRcbiAgICBleHBlY3Qob3V0cHV0NC5pbmNsdWRlcyhcIlxcXFxgXCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChvdXRwdXQ0LmluY2x1ZGVzKFwiXFxcXCRcIikpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KG91dHB1dDQuaW5jbHVkZXMoXCJcXFxcXFxcXFwiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3Qob3V0cHV0NCkubm90LnRvQmUoaW5wdXQ0KTtcbiAgICAvLyBUZXN0IHdpdGggYWxyZWFkeSBlc2NhcGVkIGNoYXJhY3RlcnNcbiAgICBjb25zdCBpbnB1dDUgPSBcIlxcXFxgaGVsbG9cXFxcYFwiO1xuICAgIGNvbnN0IG91dHB1dDUgPSBlc2NhcGVUZW1wbGF0ZUxpdGVyYWwoaW5wdXQ1KTtcbiAgICAvLyBWZXJpZnkgYWxyZWFkeSBlc2NhcGVkIGNoYXJhY3RlcnMgYXJlIHByb3Blcmx5IGVzY2FwZWRcbiAgICBleHBlY3Qob3V0cHV0NSkubm90LnRvQmUoaW5wdXQ1KTtcbn0pO1xuLyoqXG4gKiBTb21lIGNsYXNzZXMgaGF2ZSBkaWZmZXJlbnQgY29uc3RydWN0b3IgbmFtZXMgaW4gZGlmZmVyZW50IGVudmlyb25tZW50cyAoZWcuIGBIZWFkZXJzYCBpcyBzb21ldGltZXMgY2FsbGVkIGBfSGVhZGVyc2AsXG4gKiBzbyB3ZSBjcmVhdGUgYW4gb2JqZWN0IG9mIG92ZXJyaWRlcyB0byBoYW5kbGUgdGhlc2UgY2FzZXMuXG4gKi9cbmNvbnN0IG5pY2lmaWFibGVDbGFzc05hbWVPdmVycmlkZXMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHtcbiAgICBIZWFkZXJzLFxufSkubWFwKChbaywgdl0pID0+IFt2LCBrXSkpO1xuZXhwb3J0IGZ1bmN0aW9uIG5pY2lmeSh2YWx1ZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZnVsbE9wdGlvbnMgPSB7XG4gICAgICAgIG1heERlcHRoOiA1LFxuICAgICAgICBjdXJyZW50SW5kZW50OiBcIlwiLFxuICAgICAgICBsaW5lSW5kZW50OiBcIiAgXCIsXG4gICAgICAgIG11bHRpbGluZTogdHJ1ZSxcbiAgICAgICAgcmVmczogbmV3IE1hcCgpLFxuICAgICAgICBwYXRoOiBcInZhbHVlXCIsXG4gICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgb3ZlcnJpZGVzOiAoKSA9PiBudWxsLFxuICAgICAgICBrZXlJblBhcmVudDogbnVsbCxcbiAgICAgICAgaGlkZUZpZWxkczogW10sXG4gICAgICAgIC4uLmZpbHRlclVuZGVmaW5lZChvcHRpb25zKSxcbiAgICB9O1xuICAgIGNvbnN0IHsgbWF4RGVwdGgsIGN1cnJlbnRJbmRlbnQsIGxpbmVJbmRlbnQsIG11bHRpbGluZSwgcmVmcywgcGF0aCwgb3ZlcnJpZGVzLCBoaWRlRmllbGRzLCB9ID0gZnVsbE9wdGlvbnM7XG4gICAgY29uc3QgbmwgPSBgXFxuJHtjdXJyZW50SW5kZW50fWA7XG4gICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSBvdmVycmlkZXModmFsdWUsIG9wdGlvbnMpO1xuICAgIGlmIChvdmVycmlkZVJlc3VsdCAhPT0gbnVsbClcbiAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgIGlmIChbXCJmdW5jdGlvblwiLCBcIm9iamVjdFwiLCBcInN5bWJvbFwiXS5pbmNsdWRlcyh0eXBlb2YgdmFsdWUpICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIGlmIChyZWZzLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBgUmVmPCR7cmVmcy5nZXQodmFsdWUpfT5gO1xuICAgICAgICB9XG4gICAgICAgIHJlZnMuc2V0KHZhbHVlLCBwYXRoKTtcbiAgICB9XG4gICAgY29uc3QgbmV3T3B0aW9ucyA9IHtcbiAgICAgICAgbWF4RGVwdGg6IG1heERlcHRoIC0gMSxcbiAgICAgICAgY3VycmVudEluZGVudCxcbiAgICAgICAgbGluZUluZGVudCxcbiAgICAgICAgbXVsdGlsaW5lLFxuICAgICAgICByZWZzLFxuICAgICAgICBwYXRoOiBwYXRoICsgXCItPlt1bmtub3duIHByb3BlcnR5XVwiLFxuICAgICAgICBvdmVycmlkZXMsXG4gICAgICAgIHBhcmVudDogeyB2YWx1ZSwgb3B0aW9uczogZnVsbE9wdGlvbnMgfSxcbiAgICAgICAga2V5SW5QYXJlbnQ6IG51bGwsXG4gICAgICAgIGhpZGVGaWVsZHM6IFtdLFxuICAgIH07XG4gICAgY29uc3QgbmVzdGVkTmljaWZ5ID0gKG5ld1ZhbHVlLCBuZXdQYXRoLCBrZXlJblBhcmVudCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgICAgIHJldHVybiBuaWNpZnkobmV3VmFsdWUsIHtcbiAgICAgICAgICAgIC4uLm5ld09wdGlvbnMsXG4gICAgICAgICAgICBwYXRoOiBuZXdQYXRoLFxuICAgICAgICAgICAgY3VycmVudEluZGVudDogY3VycmVudEluZGVudCArIGxpbmVJbmRlbnQsXG4gICAgICAgICAgICBrZXlJblBhcmVudCxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOiB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjoge1xuICAgICAgICAgICAgY29uc3QgaXNEZWluZGVudGFibGUgPSAodikgPT4gZGVpbmRlbnQodikgPT09IHYgJiYgdi5pbmNsdWRlcyhcIlxcblwiKTtcbiAgICAgICAgICAgIGNvbnN0IHdyYXBJbkRlaW5kZW50ID0gKHYpID0+IGRlaW5kZW50IGBcbiAgICAgICAgZGVpbmRlbnRcXGBcbiAgICAgICAgJHtjdXJyZW50SW5kZW50ICsgbGluZUluZGVudH0ke2VzY2FwZVRlbXBsYXRlTGl0ZXJhbCh2KS5yZXBsYWNlQWxsKFwiXFxuXCIsIG5sICsgbGluZUluZGVudCl9XG4gICAgICAgICR7Y3VycmVudEluZGVudH1cXGBcbiAgICAgIGA7XG4gICAgICAgICAgICBpZiAoaXNEZWluZGVudGFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBJbkRlaW5kZW50KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlLmVuZHNXaXRoKFwiXFxuXCIpICYmIGlzRGVpbmRlbnRhYmxlKHZhbHVlLnNsaWNlKDAsIC0xKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcEluRGVpbmRlbnQodmFsdWUuc2xpY2UoMCwgLTEpKSArICcgKyBcIlxcXFxuXCInO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjoge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dmFsdWV9bmA7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5uYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiBgZnVuY3Rpb24gJHt2YWx1ZS5uYW1lfSguLi4pIHsgLi4uIH1gO1xuICAgICAgICAgICAgcmV0dXJuIGAoLi4uKSA9PiB7IC4uLiB9YDtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJudWxsXCI7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHRyYUxpbmVzID0gZ2V0TmljaWZpZWRPYmplY3RFeHRyYUxpbmVzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNWYWx1ZUxlbmd0aCA9IHZhbHVlLmxlbmd0aCArIGV4dHJhTGluZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChtYXhEZXB0aCA8PSAwICYmIHJlc1ZhbHVlTGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJbLi4uXVwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc1ZhbHVlcyA9IHZhbHVlLm1hcCgodiwgaSkgPT4gbmVzdGVkTmljaWZ5KHYsIGAke3BhdGh9WyR7aX1dYCwgaSkpO1xuICAgICAgICAgICAgICAgIHJlc1ZhbHVlcy5wdXNoKC4uLmV4dHJhTGluZXMpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJuaWNpZnkgb2Ygb2JqZWN0OiByZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aFwiLCB7IHZhbHVlLCByZXNWYWx1ZXMsIHJlc1ZhbHVlTGVuZ3RoIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZEluZGVudCA9IHJlc1ZhbHVlcy5sZW5ndGggPiA0IHx8IHJlc1ZhbHVlcy5zb21lKHggPT4gKHJlc1ZhbHVlcy5sZW5ndGggPiAxICYmIHgubGVuZ3RoID4gNCkgfHwgeC5pbmNsdWRlcyhcIlxcblwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZEluZGVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFske25sfSR7cmVzVmFsdWVzLm1hcCh4ID0+IGAke2xpbmVJbmRlbnR9JHt4fSwke25sfWApLmpvaW4oXCJcIil9XWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFske3Jlc1ZhbHVlcy5qb2luKFwiLCBcIil9XWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBVUkwoJHtuZXN0ZWROaWNpZnkodmFsdWUudG9TdHJpbmcoKSwgYCR7cGF0aH0udG9TdHJpbmcoKWAsIG51bGwpfSlgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dmFsdWUuY29uc3RydWN0b3IubmFtZX0oWyR7dmFsdWUudG9TdHJpbmcoKX1dKWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIGxldCBzdGFjayA9IHZhbHVlLnN0YWNrID8/IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9TdHJpbmcgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmICghc3RhY2suc3RhcnRzV2l0aCh0b1N0cmluZykpXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrID0gYCR7dG9TdHJpbmd9XFxuJHtzdGFja31gOyAvLyBzb21lIGJyb3dzZXJzIGRvbid0IGluY2x1ZGUgdGhlIGVycm9yIG1lc3NhZ2UgaW4gdGhlIHN0YWNrLCBzb21lIGRvXG4gICAgICAgICAgICAgICAgc3RhY2sgPSBzdGFjay50cmltRW5kKCk7XG4gICAgICAgICAgICAgICAgc3RhY2sgPSBzdGFjay5yZXBsYWNlKC9cXG5cXHMrL2csIGBcXG4ke2xpbmVJbmRlbnR9JHtsaW5lSW5kZW50fWApO1xuICAgICAgICAgICAgICAgIHN0YWNrID0gc3RhY2sucmVwbGFjZShcIlxcblwiLCBgXFxuJHtsaW5lSW5kZW50fVN0YWNrOlxcbmApO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjayArPSBgXFxuJHtsaW5lSW5kZW50fUV4dHJhIHByb3BlcnRpZXM6ICR7bmVzdGVkTmljaWZ5KE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyh2YWx1ZSkpLCBwYXRoLCBudWxsKX1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuY2F1c2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sgKz0gYFxcbiR7bGluZUluZGVudH1DYXVzZTpcXG4ke2xpbmVJbmRlbnR9JHtsaW5lSW5kZW50fSR7bmVzdGVkTmljaWZ5KHZhbHVlLmNhdXNlLCBwYXRoLCBudWxsLCB7IGN1cnJlbnRJbmRlbnQ6IGN1cnJlbnRJbmRlbnQgKyBsaW5lSW5kZW50ICsgbGluZUluZGVudCB9KX1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGFjayA9IHN0YWNrLnJlcGxhY2VBbGwoXCJcXG5cIiwgYFxcbiR7Y3VycmVudEluZGVudH1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb25zdHJ1Y3Rvck5hbWUgPSBbbnVsbCwgT2JqZWN0LnByb3RvdHlwZV0uaW5jbHVkZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSkgPyBudWxsIDogKG5pY2lmaWFibGVDbGFzc05hbWVPdmVycmlkZXMuZ2V0KHZhbHVlLmNvbnN0cnVjdG9yKSA/PyB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN0cnVjdG9yU3RyaW5nID0gY29uc3RydWN0b3JOYW1lID8gYCR7Y29uc3RydWN0b3JOYW1lfSBgIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGVudHJpZXMgPSBnZXROaWNpZmlhYmxlRW50cmllcyh2YWx1ZSkuZmlsdGVyKChba10pID0+ICFoaWRlRmllbGRzLmluY2x1ZGVzKGspKTtcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhTGluZXMgPSBbXG4gICAgICAgICAgICAgICAgLi4uZ2V0TmljaWZpZWRPYmplY3RFeHRyYUxpbmVzKHZhbHVlKSxcbiAgICAgICAgICAgICAgICAuLi5oaWRlRmllbGRzLmxlbmd0aCA+IDAgPyBbYDxzb21lIGZpZWxkcyBtYXkgaGF2ZSBiZWVuIGhpZGRlbj5gXSA6IFtdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbnN0IHJlc1ZhbHVlTGVuZ3RoID0gZW50cmllcy5sZW5ndGggKyBleHRyYUxpbmVzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChyZXNWYWx1ZUxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7Y29uc3RydWN0b3JTdHJpbmd9e31gO1xuICAgICAgICAgICAgaWYgKG1heERlcHRoIDw9IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2NvbnN0cnVjdG9yU3RyaW5nfXsgLi4uIH1gO1xuICAgICAgICAgICAgY29uc3QgcmVzVmFsdWVzID0gZW50cmllcy5tYXAoKFtrLCB2XSwga2V5SW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlOaWNpZmllZCA9IG5lc3RlZE5pY2lmeShrLCBgT2JqZWN0LmtleXMoJHtwYXRofSlbJHtrZXlJbmRleH1dYCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5SW5PYmplY3RMaXRlcmFsID0gdHlwZW9mIGsgPT09IFwic3RyaW5nXCIgPyBuaWNpZnlQcm9wZXJ0eVN0cmluZyhrKSA6IGBbJHtrZXlOaWNpZmllZH1dYDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwiZnVuY3Rpb25cIiAmJiB2Lm5hbWUgPT09IGspIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2tleUluT2JqZWN0TGl0ZXJhbH0oLi4uKTogeyAuLi4gfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7a2V5SW5PYmplY3RMaXRlcmFsfTogJHtuZXN0ZWROaWNpZnkodiwgYCR7cGF0aH1bJHtrZXlOaWNpZmllZH1dYCwgayl9YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc1ZhbHVlcy5wdXNoKC4uLmV4dHJhTGluZXMpO1xuICAgICAgICAgICAgaWYgKHJlc1ZhbHVlcy5sZW5ndGggIT09IHJlc1ZhbHVlTGVuZ3RoKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwibmljaWZ5IG9mIG9iamVjdDogcmVzVmFsdWVzLmxlbmd0aCAhPT0gcmVzVmFsdWVMZW5ndGhcIiwgeyB2YWx1ZSwgcmVzVmFsdWVzLCByZXNWYWx1ZUxlbmd0aCB9KTtcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZEluZGVudCA9IHJlc1ZhbHVlcy5sZW5ndGggPiAxIHx8IHJlc1ZhbHVlcy5zb21lKHggPT4geC5pbmNsdWRlcyhcIlxcblwiKSk7XG4gICAgICAgICAgICBpZiAocmVzVmFsdWVzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7Y29uc3RydWN0b3JTdHJpbmd9e31gO1xuICAgICAgICAgICAgaWYgKHNob3VsZEluZGVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtjb25zdHJ1Y3RvclN0cmluZ317JHtubH0ke3Jlc1ZhbHVlcy5tYXAoeCA9PiBgJHtsaW5lSW5kZW50fSR7eH0sJHtubH1gKS5qb2luKFwiXCIpfX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2NvbnN0cnVjdG9yU3RyaW5nfXsgJHtyZXNWYWx1ZXMuam9pbihcIiwgXCIpfSB9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dHlwZW9mIHZhbHVlfTwke3ZhbHVlfT5gO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VBbGwoaW5wdXQsIHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpIHtcbiAgICBpZiAoc2VhcmNoVmFsdWUgPT09IFwiXCIpXG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwicmVwbGFjZUFsbDogc2VhcmNoVmFsdWUgaXMgZW1wdHlcIik7XG4gICAgcmV0dXJuIGlucHV0LnNwbGl0KHNlYXJjaFZhbHVlKS5qb2luKHJlcGxhY2VWYWx1ZSk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJyZXBsYWNlQWxsXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgZXhwZWN0KHJlcGxhY2VBbGwoXCJoZWxsbyB3b3JsZFwiLCBcIm9cIiwgXCJ4XCIpKS50b0JlKFwiaGVsbHggd3hybGRcIik7XG4gICAgZXhwZWN0KHJlcGxhY2VBbGwoXCJhYWFcIiwgXCJhXCIsIFwiYlwiKSkudG9CZShcImJiYlwiKTtcbiAgICBleHBlY3QocmVwbGFjZUFsbChcIlwiLCBcImFcIiwgXCJiXCIpKS50b0JlKFwiXCIpO1xuICAgIGV4cGVjdChyZXBsYWNlQWxsKFwiYWJjXCIsIFwiYlwiLCBcIlwiKSkudG9CZShcImFjXCIpO1xuICAgIGV4cGVjdChyZXBsYWNlQWxsKFwidGVzdC50ZXN0LnRlc3RcIiwgXCIuXCIsIFwiX1wiKSkudG9CZShcInRlc3RfdGVzdF90ZXN0XCIpO1xuICAgIGV4cGVjdChyZXBsYWNlQWxsKFwiYS5iKmNcIiwgXCIuXCIsIFwieFwiKSkudG9CZShcImF4YipjXCIpO1xuICAgIGV4cGVjdChyZXBsYWNlQWxsKFwiYSpiKmNcIiwgXCIqXCIsIFwieFwiKSkudG9CZShcImF4YnhjXCIpO1xuICAgIGV4cGVjdChyZXBsYWNlQWxsKFwiaGVsbG8gaGVsbG9cIiwgXCJoZWxsb1wiLCBcImhpXCIpKS50b0JlKFwiaGkgaGlcIik7XG59KTtcbmZ1bmN0aW9uIG5pY2lmeVByb3BlcnR5U3RyaW5nKHN0cikge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIpO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwibmljaWZ5UHJvcGVydHlTdHJpbmdcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHZhbGlkIGlkZW50aWZpZXJzXG4gICAgZXhwZWN0KG5pY2lmeVByb3BlcnR5U3RyaW5nKFwidmFsaWROYW1lXCIpKS50b0JlKCdcInZhbGlkTmFtZVwiJyk7XG4gICAgZXhwZWN0KG5pY2lmeVByb3BlcnR5U3RyaW5nKFwiX3ZhbGlkTmFtZVwiKSkudG9CZSgnXCJfdmFsaWROYW1lXCInKTtcbiAgICBleHBlY3QobmljaWZ5UHJvcGVydHlTdHJpbmcoXCJ2YWxpZDEyM05hbWVcIikpLnRvQmUoJ1widmFsaWQxMjNOYW1lXCInKTtcbiAgICAvLyBUZXN0IGludmFsaWQgaWRlbnRpZmllcnNcbiAgICBleHBlY3QobmljaWZ5UHJvcGVydHlTdHJpbmcoXCIxMjNpbnZhbGlkXCIpKS50b0JlKCdcIjEyM2ludmFsaWRcIicpO1xuICAgIGV4cGVjdChuaWNpZnlQcm9wZXJ0eVN0cmluZyhcImludmFsaWQtbmFtZVwiKSkudG9CZSgnXCJpbnZhbGlkLW5hbWVcIicpO1xuICAgIGV4cGVjdChuaWNpZnlQcm9wZXJ0eVN0cmluZyhcImludmFsaWQgc3BhY2VcIikpLnRvQmUoJ1wiaW52YWxpZCBzcGFjZVwiJyk7XG4gICAgZXhwZWN0KG5pY2lmeVByb3BlcnR5U3RyaW5nKFwiJGludmFsaWRcIikpLnRvQmUoJ1wiJGludmFsaWRcIicpO1xuICAgIGV4cGVjdChuaWNpZnlQcm9wZXJ0eVN0cmluZyhcIlwiKSkudG9CZSgnXCJcIicpO1xuICAgIC8vIFRlc3Qgd2l0aCBzcGVjaWFsIGNoYXJhY3RlcnNcbiAgICBleHBlY3QobmljaWZ5UHJvcGVydHlTdHJpbmcoXCJwcm9wZXJ0eSFcIikpLnRvQmUoJ1wicHJvcGVydHkhXCInKTtcbiAgICBleHBlY3QobmljaWZ5UHJvcGVydHlTdHJpbmcoXCJwcm9wZXJ0eS5uYW1lXCIpKS50b0JlKCdcInByb3BlcnR5Lm5hbWVcIicpO1xuICAgIC8vIFRlc3Qgd2l0aCBlc2NhcGVkIGNoYXJhY3RlcnNcbiAgICBleHBlY3QobmljaWZ5UHJvcGVydHlTdHJpbmcoXCJcXFxcXCIpKS50b0JlKCdcIlxcXFxcXFxcXCInKTtcbiAgICBleHBlY3QobmljaWZ5UHJvcGVydHlTdHJpbmcoJ1wiJykpLnRvQmUoJ1wiXFxcXFwiXCInKTtcbn0pO1xuZnVuY3Rpb24gZ2V0TmljaWZpYWJsZUtleXModmFsdWUpIHtcbiAgICBjb25zdCBvdmVycmlkZGVuID0gKFwiZ2V0TmljaWZpYWJsZUtleXNcIiBpbiB2YWx1ZSA/IHZhbHVlLmdldE5pY2lmaWFibGVLZXlzPy5iaW5kKHZhbHVlKSA6IG51bGwpPy4oKTtcbiAgICBpZiAob3ZlcnJpZGRlbiAhPSBudWxsKVxuICAgICAgICByZXR1cm4gb3ZlcnJpZGRlbjtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpLnNvcnQoKTtcbiAgICByZXR1cm4gdW5pcXVlKGtleXMpO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiZ2V0TmljaWZpYWJsZUtleXNcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHJlZ3VsYXIgb2JqZWN0XG4gICAgZXhwZWN0KGdldE5pY2lmaWFibGVLZXlzKHsgYjogMSwgYTogMiwgYzogMyB9KSkudG9FcXVhbChbXCJhXCIsIFwiYlwiLCBcImNcIl0pO1xuICAgIC8vIFRlc3QgZW1wdHkgb2JqZWN0XG4gICAgZXhwZWN0KGdldE5pY2lmaWFibGVLZXlzKHt9KSkudG9FcXVhbChbXSk7XG4gICAgLy8gVGVzdCBvYmplY3Qgd2l0aCBjdXN0b20gZ2V0TmljaWZpYWJsZUtleXNcbiAgICBjb25zdCBjdXN0b21PYmplY3QgPSB7XG4gICAgICAgIGE6IDEsXG4gICAgICAgIGI6IDIsXG4gICAgICAgIGdldE5pY2lmaWFibGVLZXlzKCkge1xuICAgICAgICAgICAgcmV0dXJuIFtcImN1c3RvbUtleTFcIiwgXCJjdXN0b21LZXkyXCJdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBleHBlY3QoZ2V0TmljaWZpYWJsZUtleXMoY3VzdG9tT2JqZWN0KSkudG9FcXVhbChbXCJjdXN0b21LZXkxXCIsIFwiY3VzdG9tS2V5MlwiXSk7XG59KTtcbmZ1bmN0aW9uIGdldE5pY2lmaWFibGVFbnRyaWVzKHZhbHVlKSB7XG4gICAgY29uc3QgcmVjb3JkTGlrZXMgPSBbSGVhZGVyc107XG4gICAgZnVuY3Rpb24gaXNSZWNvcmRMaWtlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWNvcmRMaWtlcy5zb21lKHggPT4gdmFsdWUgaW5zdGFuY2VvZiB4KTtcbiAgICB9XG4gICAgaWYgKGlzUmVjb3JkTGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIFsuLi52YWx1ZS5lbnRyaWVzKCldLnNvcnQoKFthXSwgW2JdKSA9PiBzdHJpbmdDb21wYXJlKGAke2F9YCwgYCR7Yn1gKSk7XG4gICAgfVxuICAgIGNvbnN0IGtleXMgPSBnZXROaWNpZmlhYmxlS2V5cyh2YWx1ZSk7XG4gICAgcmV0dXJuIGtleXMubWFwKChrKSA9PiBbaywgdmFsdWVba11dKTtcbn1cbmZ1bmN0aW9uIGdldE5pY2lmaWVkT2JqZWN0RXh0cmFMaW5lcyh2YWx1ZSkge1xuICAgIHJldHVybiAoXCJnZXROaWNpZmllZE9iamVjdEV4dHJhTGluZXNcIiBpbiB2YWx1ZSA/IHZhbHVlLmdldE5pY2lmaWVkT2JqZWN0RXh0cmFMaW5lcyA6IG51bGwpPy4oKSA/PyBbXTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/urls.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/urls.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUrlIfValid: () => (/* binding */ createUrlIfValid),\n/* harmony export */   getRelativePart: () => (/* binding */ getRelativePart),\n/* harmony export */   isLocalhost: () => (/* binding */ isLocalhost),\n/* harmony export */   isRelative: () => (/* binding */ isRelative),\n/* harmony export */   isValidHostname: () => (/* binding */ isValidHostname),\n/* harmony export */   isValidUrl: () => (/* binding */ isValidUrl),\n/* harmony export */   url: () => (/* binding */ url),\n/* harmony export */   urlString: () => (/* binding */ urlString)\n/* harmony export */ });\n/* harmony import */ var _crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\nfunction createUrlIfValid(...args) {\n    try {\n        return new URL(...args);\n    }\n    catch (e) {\n        return null;\n    }\n}\n undefined;\nfunction isValidUrl(url) {\n    return !!createUrlIfValid(url);\n}\n undefined;\nfunction isValidHostname(hostname) {\n    const url = createUrlIfValid(`https://${hostname}`);\n    if (!url)\n        return false;\n    return url.hostname === hostname;\n}\n undefined;\nfunction isLocalhost(urlOrString) {\n    const url = createUrlIfValid(urlOrString);\n    if (!url)\n        return false;\n    if (url.hostname === \"localhost\" || url.hostname.endsWith(\".localhost\"))\n        return true;\n    if (url.hostname.match(/^127\\.\\d+\\.\\d+\\.\\d+$/))\n        return true;\n    return false;\n}\n undefined;\nfunction isRelative(url) {\n    const randomDomain = `${(0,_crypto__WEBPACK_IMPORTED_MODULE_0__.generateSecureRandomString)()}.stack-auth.example.com`;\n    const u = createUrlIfValid(url, `https://${randomDomain}`);\n    if (!u)\n        return false;\n    if (u.host !== randomDomain)\n        return false;\n    if (u.protocol !== \"https:\")\n        return false;\n    return true;\n}\n undefined;\nfunction getRelativePart(url) {\n    return url.pathname + url.search + url.hash;\n}\n undefined;\n/**\n * A template literal tag that returns a URL.\n *\n * Any values passed are encoded.\n */\nfunction url(strings, ...values) {\n    return new URL(urlString(strings, ...values));\n}\n undefined;\n/**\n * A template literal tag that returns a URL string.\n *\n * Any values passed are encoded.\n */\nfunction urlString(strings, ...values) {\n    return (0,_strings__WEBPACK_IMPORTED_MODULE_1__.templateIdentity)(strings, ...values.map(encodeURIComponent));\n}\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy91cmxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDVDtBQUN0QztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFTRTtBQUNLO0FBQ1A7QUFDQTtBQUNBLFVBU0U7QUFDSztBQUNQLDRDQUE0QyxTQUFTO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFXRTtBQUNLO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFpQkU7QUFDSztBQUNQLDRCQUE0QixtRUFBMEIsR0FBRztBQUN6RCwrQ0FBK0MsYUFBYTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFlRTtBQUNLO0FBQ1A7QUFDQTtBQUNBLFVBV0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsVUFvQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLDBEQUFnQjtBQUMzQjtBQUNBLFVBZUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2stc2hhcmVkXFxkaXN0XFx1dGlsc1xcdXJscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuL2NyeXB0b1wiO1xuaW1wb3J0IHsgdGVtcGxhdGVJZGVudGl0eSB9IGZyb20gXCIuL3N0cmluZ3NcIjtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVVcmxJZlZhbGlkKC4uLmFyZ3MpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IFVSTCguLi5hcmdzKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiY3JlYXRlVXJsSWZWYWxpZFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCB2YWxpZCBVUkxzXG4gICAgZXhwZWN0KGNyZWF0ZVVybElmVmFsaWQoXCJodHRwczovL2V4YW1wbGUuY29tXCIpKS50b0JlSW5zdGFuY2VPZihVUkwpO1xuICAgIGV4cGVjdChjcmVhdGVVcmxJZlZhbGlkKFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9wYXRoP3F1ZXJ5PXZhbHVlI2hhc2hcIikpLnRvQmVJbnN0YW5jZU9mKFVSTCk7XG4gICAgZXhwZWN0KGNyZWF0ZVVybElmVmFsaWQoXCIvcGF0aFwiLCBcImh0dHBzOi8vZXhhbXBsZS5jb21cIikpLnRvQmVJbnN0YW5jZU9mKFVSTCk7XG4gICAgLy8gVGVzdCB3aXRoIGludmFsaWQgVVJMc1xuICAgIGV4cGVjdChjcmVhdGVVcmxJZlZhbGlkKFwiXCIpKS50b0JlTnVsbCgpO1xuICAgIGV4cGVjdChjcmVhdGVVcmxJZlZhbGlkKFwibm90IGEgdXJsXCIpKS50b0JlTnVsbCgpO1xuICAgIGV4cGVjdChjcmVhdGVVcmxJZlZhbGlkKFwiaHR0cDovL1wiKSkudG9CZU51bGwoKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRVcmwodXJsKSB7XG4gICAgcmV0dXJuICEhY3JlYXRlVXJsSWZWYWxpZCh1cmwpO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiaXNWYWxpZFVybFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCB2YWxpZCBVUkxzXG4gICAgZXhwZWN0KGlzVmFsaWRVcmwoXCJodHRwczovL2V4YW1wbGUuY29tXCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc1ZhbGlkVXJsKFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc1ZhbGlkVXJsKFwiZnRwOi8vZXhhbXBsZS5jb21cIikpLnRvQmUodHJ1ZSk7XG4gICAgLy8gVGVzdCB3aXRoIGludmFsaWQgVVJMc1xuICAgIGV4cGVjdChpc1ZhbGlkVXJsKFwiXCIpKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoaXNWYWxpZFVybChcIm5vdCBhIHVybFwiKSkudG9CZShmYWxzZSk7XG4gICAgZXhwZWN0KGlzVmFsaWRVcmwoXCJodHRwOi8vXCIpKS50b0JlKGZhbHNlKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRIb3N0bmFtZShob3N0bmFtZSkge1xuICAgIGNvbnN0IHVybCA9IGNyZWF0ZVVybElmVmFsaWQoYGh0dHBzOi8vJHtob3N0bmFtZX1gKTtcbiAgICBpZiAoIXVybClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB1cmwuaG9zdG5hbWUgPT09IGhvc3RuYW1lO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiaXNWYWxpZEhvc3RuYW1lXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gVGVzdCB3aXRoIHZhbGlkIGhvc3RuYW1lc1xuICAgIGV4cGVjdChpc1ZhbGlkSG9zdG5hbWUoXCJleGFtcGxlLmNvbVwiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoaXNWYWxpZEhvc3RuYW1lKFwibG9jYWxob3N0XCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc1ZhbGlkSG9zdG5hbWUoXCJzdWIuZG9tYWluLmV4YW1wbGUuY29tXCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc1ZhbGlkSG9zdG5hbWUoXCIxMjcuMC4wLjFcIikpLnRvQmUodHJ1ZSk7XG4gICAgLy8gVGVzdCB3aXRoIGludmFsaWQgaG9zdG5hbWVzXG4gICAgZXhwZWN0KGlzVmFsaWRIb3N0bmFtZShcIlwiKSkudG9CZShmYWxzZSk7XG4gICAgZXhwZWN0KGlzVmFsaWRIb3N0bmFtZShcImV4YW1wbGUuY29tL3BhdGhcIikpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChpc1ZhbGlkSG9zdG5hbWUoXCJodHRwczovL2V4YW1wbGUuY29tXCIpKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoaXNWYWxpZEhvc3RuYW1lKFwiZXhhbXBsZSBjb21cIikpLnRvQmUoZmFsc2UpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gaXNMb2NhbGhvc3QodXJsT3JTdHJpbmcpIHtcbiAgICBjb25zdCB1cmwgPSBjcmVhdGVVcmxJZlZhbGlkKHVybE9yU3RyaW5nKTtcbiAgICBpZiAoIXVybClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh1cmwuaG9zdG5hbWUgPT09IFwibG9jYWxob3N0XCIgfHwgdXJsLmhvc3RuYW1lLmVuZHNXaXRoKFwiLmxvY2FsaG9zdFwiKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKHVybC5ob3N0bmFtZS5tYXRjaCgvXjEyN1xcLlxcZCtcXC5cXGQrXFwuXFxkKyQvKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuaW1wb3J0Lm1ldGEudml0ZXN0Py50ZXN0KFwiaXNMb2NhbGhvc3RcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggbG9jYWxob3N0IFVSTHNcbiAgICBleHBlY3QoaXNMb2NhbGhvc3QoXCJodHRwOi8vbG9jYWxob3N0XCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc0xvY2FsaG9zdChcImh0dHBzOi8vbG9jYWxob3N0OjgwODBcIikpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGlzTG9jYWxob3N0KFwiaHR0cDovL3N1Yi5sb2NhbGhvc3RcIikpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGlzTG9jYWxob3N0KFwiaHR0cDovLzEyNy4wLjAuMVwiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoaXNMb2NhbGhvc3QoXCJodHRwOi8vMTI3LjEuMi4zXCIpKS50b0JlKHRydWUpO1xuICAgIC8vIFRlc3Qgd2l0aCBub24tbG9jYWxob3N0IFVSTHNcbiAgICBleHBlY3QoaXNMb2NhbGhvc3QoXCJodHRwczovL2V4YW1wbGUuY29tXCIpKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoaXNMb2NhbGhvc3QoXCJodHRwOi8vMTkyLjE2OC4xLjFcIikpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChpc0xvY2FsaG9zdChcImh0dHA6Ly8xMC4wLjAuMVwiKSkudG9CZShmYWxzZSk7XG4gICAgLy8gVGVzdCB3aXRoIFVSTCBvYmplY3RzXG4gICAgZXhwZWN0KGlzTG9jYWxob3N0KG5ldyBVUkwoXCJodHRwOi8vbG9jYWxob3N0XCIpKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoaXNMb2NhbGhvc3QobmV3IFVSTChcImh0dHBzOi8vZXhhbXBsZS5jb21cIikpKS50b0JlKGZhbHNlKTtcbiAgICAvLyBUZXN0IHdpdGggaW52YWxpZCBVUkxzXG4gICAgZXhwZWN0KGlzTG9jYWxob3N0KFwibm90IGEgdXJsXCIpKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoaXNMb2NhbGhvc3QoXCJcIikpLnRvQmUoZmFsc2UpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gaXNSZWxhdGl2ZSh1cmwpIHtcbiAgICBjb25zdCByYW5kb21Eb21haW4gPSBgJHtnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZygpfS5zdGFjay1hdXRoLmV4YW1wbGUuY29tYDtcbiAgICBjb25zdCB1ID0gY3JlYXRlVXJsSWZWYWxpZCh1cmwsIGBodHRwczovLyR7cmFuZG9tRG9tYWlufWApO1xuICAgIGlmICghdSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh1Lmhvc3QgIT09IHJhbmRvbURvbWFpbilcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh1LnByb3RvY29sICE9PSBcImh0dHBzOlwiKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJpc1JlbGF0aXZlXCIsICh7IGV4cGVjdCB9KSA9PiB7XG4gICAgLy8gV2UgY2FuJ3QgZWFzaWx5IG1vY2sgZ2VuZXJhdGVTZWN1cmVSYW5kb21TdHJpbmcgaW4gdGhpcyBjb250ZXh0XG4gICAgLy8gYnV0IHdlIGNhbiBzdGlsbCB0ZXN0IHRoZSBmdW5jdGlvbidzIGJlaGF2aW9yXG4gICAgLy8gVGVzdCB3aXRoIHJlbGF0aXZlIFVSTHNcbiAgICBleHBlY3QoaXNSZWxhdGl2ZShcIi9cIikpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGlzUmVsYXRpdmUoXCIvcGF0aFwiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoaXNSZWxhdGl2ZShcIi9wYXRoP3F1ZXJ5PXZhbHVlI2hhc2hcIikpLnRvQmUodHJ1ZSk7XG4gICAgLy8gVGVzdCB3aXRoIGFic29sdXRlIFVSTHNcbiAgICBleHBlY3QoaXNSZWxhdGl2ZShcImh0dHBzOi8vZXhhbXBsZS5jb21cIikpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChpc1JlbGF0aXZlKFwiaHR0cDovL2V4YW1wbGUuY29tXCIpKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoaXNSZWxhdGl2ZShcIi8vZXhhbXBsZS5jb21cIikpLnRvQmUoZmFsc2UpO1xuICAgIC8vIE5vdGU6IFRoZSBpbXBsZW1lbnRhdGlvbiB0cmVhdHMgZW1wdHkgc3RyaW5ncyBhbmQgaW52YWxpZCBVUkxzIGFzIHJlbGF0aXZlXG4gICAgLy8gVGhpcyBpcyBiZWNhdXNlIHRoZXkgY2FuIGJlIHJlc29sdmVkIGFnYWluc3QgYSBiYXNlIFVSTFxuICAgIGV4cGVjdChpc1JlbGF0aXZlKFwiXCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc1JlbGF0aXZlKFwibm90IGEgdXJsXCIpKS50b0JlKHRydWUpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVsYXRpdmVQYXJ0KHVybCkge1xuICAgIHJldHVybiB1cmwucGF0aG5hbWUgKyB1cmwuc2VhcmNoICsgdXJsLmhhc2g7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJnZXRSZWxhdGl2ZVBhcnRcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggdmFyaW91cyBVUkxzXG4gICAgZXhwZWN0KGdldFJlbGF0aXZlUGFydChuZXcgVVJMKFwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiKSkpLnRvQmUoXCIvXCIpO1xuICAgIGV4cGVjdChnZXRSZWxhdGl2ZVBhcnQobmV3IFVSTChcImh0dHBzOi8vZXhhbXBsZS5jb20vcGF0aFwiKSkpLnRvQmUoXCIvcGF0aFwiKTtcbiAgICBleHBlY3QoZ2V0UmVsYXRpdmVQYXJ0KG5ldyBVUkwoXCJodHRwczovL2V4YW1wbGUuY29tL3BhdGg/cXVlcnk9dmFsdWVcIikpKS50b0JlKFwiL3BhdGg/cXVlcnk9dmFsdWVcIik7XG4gICAgZXhwZWN0KGdldFJlbGF0aXZlUGFydChuZXcgVVJMKFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9wYXRoI2hhc2hcIikpKS50b0JlKFwiL3BhdGgjaGFzaFwiKTtcbiAgICBleHBlY3QoZ2V0UmVsYXRpdmVQYXJ0KG5ldyBVUkwoXCJodHRwczovL2V4YW1wbGUuY29tL3BhdGg/cXVlcnk9dmFsdWUjaGFzaFwiKSkpLnRvQmUoXCIvcGF0aD9xdWVyeT12YWx1ZSNoYXNoXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBkaWZmZXJlbnQgZG9tYWlucyBidXQgc2FtZSBwYXRoc1xuICAgIGNvbnN0IHVybDEgPSBuZXcgVVJMKFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9wYXRoP3F1ZXJ5PXZhbHVlI2hhc2hcIik7XG4gICAgY29uc3QgdXJsMiA9IG5ldyBVUkwoXCJodHRwczovL2RpZmZlcmVudC5jb20vcGF0aD9xdWVyeT12YWx1ZSNoYXNoXCIpO1xuICAgIGV4cGVjdChnZXRSZWxhdGl2ZVBhcnQodXJsMSkpLnRvQmUoZ2V0UmVsYXRpdmVQYXJ0KHVybDIpKTtcbn0pO1xuLyoqXG4gKiBBIHRlbXBsYXRlIGxpdGVyYWwgdGFnIHRoYXQgcmV0dXJucyBhIFVSTC5cbiAqXG4gKiBBbnkgdmFsdWVzIHBhc3NlZCBhcmUgZW5jb2RlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVybChzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgICByZXR1cm4gbmV3IFVSTCh1cmxTdHJpbmcoc3RyaW5ncywgLi4udmFsdWVzKSk7XG59XG5pbXBvcnQubWV0YS52aXRlc3Q/LnRlc3QoXCJ1cmxcIiwgKHsgZXhwZWN0IH0pID0+IHtcbiAgICAvLyBUZXN0IHdpdGggbm8gaW50ZXJwb2xhdGlvblxuICAgIGV4cGVjdCh1cmwgYGh0dHBzOi8vZXhhbXBsZS5jb21gKS50b0JlSW5zdGFuY2VPZihVUkwpO1xuICAgIGV4cGVjdCh1cmwgYGh0dHBzOi8vZXhhbXBsZS5jb21gLmhyZWYpLnRvQmUoXCJodHRwczovL2V4YW1wbGUuY29tL1wiKTtcbiAgICAvLyBUZXN0IHdpdGggc3RyaW5nIGludGVycG9sYXRpb25cbiAgICBleHBlY3QodXJsIGBodHRwczovL2V4YW1wbGUuY29tLyR7XCJwYXRoXCJ9YCkudG9CZUluc3RhbmNlT2YoVVJMKTtcbiAgICBleHBlY3QodXJsIGBodHRwczovL2V4YW1wbGUuY29tLyR7XCJwYXRoXCJ9YC5wYXRobmFtZSkudG9CZShcIi9wYXRoXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBudW1iZXIgaW50ZXJwb2xhdGlvblxuICAgIGV4cGVjdCh1cmwgYGh0dHBzOi8vZXhhbXBsZS5jb20vJHs0Mn1gKS50b0JlSW5zdGFuY2VPZihVUkwpO1xuICAgIGV4cGVjdCh1cmwgYGh0dHBzOi8vZXhhbXBsZS5jb20vJHs0Mn1gLnBhdGhuYW1lKS50b0JlKFwiLzQyXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBib29sZWFuIGludGVycG9sYXRpb25cbiAgICBleHBlY3QodXJsIGBodHRwczovL2V4YW1wbGUuY29tLyR7dHJ1ZX1gKS50b0JlSW5zdGFuY2VPZihVUkwpO1xuICAgIGV4cGVjdCh1cmwgYGh0dHBzOi8vZXhhbXBsZS5jb20vJHt0cnVlfWAucGF0aG5hbWUpLnRvQmUoXCIvdHJ1ZVwiKTtcbiAgICAvLyBUZXN0IHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzIGluIGludGVycG9sYXRpb25cbiAgICBleHBlY3QodXJsIGBodHRwczovL2V4YW1wbGUuY29tLyR7XCJwYXRoIHdpdGggc3BhY2VzXCJ9YCkudG9CZUluc3RhbmNlT2YoVVJMKTtcbiAgICBleHBlY3QodXJsIGBodHRwczovL2V4YW1wbGUuY29tLyR7XCJwYXRoIHdpdGggc3BhY2VzXCJ9YC5wYXRobmFtZSkudG9CZShcIi9wYXRoJTIwd2l0aCUyMHNwYWNlc1wiKTtcbiAgICAvLyBUZXN0IHdpdGggbXVsdGlwbGUgaW50ZXJwb2xhdGlvbnNcbiAgICBleHBlY3QodXJsIGBodHRwczovL2V4YW1wbGUuY29tLyR7XCJwYXRoXCJ9P3F1ZXJ5PSR7XCJ2YWx1ZVwifWApLnRvQmVJbnN0YW5jZU9mKFVSTCk7XG4gICAgZXhwZWN0KHVybCBgaHR0cHM6Ly9leGFtcGxlLmNvbS8ke1wicGF0aFwifT9xdWVyeT0ke1widmFsdWVcIn1gLnBhdGhuYW1lKS50b0JlKFwiL3BhdGhcIik7XG4gICAgZXhwZWN0KHVybCBgaHR0cHM6Ly9leGFtcGxlLmNvbS8ke1wicGF0aFwifT9xdWVyeT0ke1widmFsdWVcIn1gLnNlYXJjaCkudG9CZShcIj9xdWVyeT12YWx1ZVwiKTtcbn0pO1xuLyoqXG4gKiBBIHRlbXBsYXRlIGxpdGVyYWwgdGFnIHRoYXQgcmV0dXJucyBhIFVSTCBzdHJpbmcuXG4gKlxuICogQW55IHZhbHVlcyBwYXNzZWQgYXJlIGVuY29kZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cmxTdHJpbmcoc3RyaW5ncywgLi4udmFsdWVzKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlSWRlbnRpdHkoc3RyaW5ncywgLi4udmFsdWVzLm1hcChlbmNvZGVVUklDb21wb25lbnQpKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcInVybFN0cmluZ1wiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCBubyBpbnRlcnBvbGF0aW9uXG4gICAgZXhwZWN0KHVybFN0cmluZyBgaHR0cHM6Ly9leGFtcGxlLmNvbWApLnRvQmUoXCJodHRwczovL2V4YW1wbGUuY29tXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBzdHJpbmcgaW50ZXJwb2xhdGlvblxuICAgIGV4cGVjdCh1cmxTdHJpbmcgYGh0dHBzOi8vZXhhbXBsZS5jb20vJHtcInBhdGhcIn1gKS50b0JlKFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9wYXRoXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBudW1iZXIgaW50ZXJwb2xhdGlvblxuICAgIGV4cGVjdCh1cmxTdHJpbmcgYGh0dHBzOi8vZXhhbXBsZS5jb20vJHs0Mn1gKS50b0JlKFwiaHR0cHM6Ly9leGFtcGxlLmNvbS80MlwiKTtcbiAgICAvLyBUZXN0IHdpdGggYm9vbGVhbiBpbnRlcnBvbGF0aW9uXG4gICAgZXhwZWN0KHVybFN0cmluZyBgaHR0cHM6Ly9leGFtcGxlLmNvbS8ke3RydWV9YCkudG9CZShcImh0dHBzOi8vZXhhbXBsZS5jb20vdHJ1ZVwiKTtcbiAgICAvLyBUZXN0IHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzIGluIGludGVycG9sYXRpb25cbiAgICBleHBlY3QodXJsU3RyaW5nIGBodHRwczovL2V4YW1wbGUuY29tLyR7XCJwYXRoIHdpdGggc3BhY2VzXCJ9YCkudG9CZShcImh0dHBzOi8vZXhhbXBsZS5jb20vcGF0aCUyMHdpdGglMjBzcGFjZXNcIik7XG4gICAgZXhwZWN0KHVybFN0cmluZyBgaHR0cHM6Ly9leGFtcGxlLmNvbS8ke1wiPyY9XCJ9YCkudG9CZShcImh0dHBzOi8vZXhhbXBsZS5jb20vJTNGJTI2JTNEXCIpO1xuICAgIC8vIFRlc3Qgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uc1xuICAgIGV4cGVjdCh1cmxTdHJpbmcgYGh0dHBzOi8vZXhhbXBsZS5jb20vJHtcInBhdGhcIn0/cXVlcnk9JHtcInZhbHVlXCJ9YCkudG9CZShcImh0dHBzOi8vZXhhbXBsZS5jb20vcGF0aD9xdWVyeT12YWx1ZVwiKTtcbiAgICBleHBlY3QodXJsU3RyaW5nIGBodHRwczovL2V4YW1wbGUuY29tLyR7XCJwYXRoXCJ9P3F1ZXJ5PSR7XCJ2YWx1ZSB3aXRoIHNwYWNlc1wifWApLnRvQmUoXCJodHRwczovL2V4YW1wbGUuY29tL3BhdGg/cXVlcnk9dmFsdWUlMjB3aXRoJTIwc3BhY2VzXCIpO1xufSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/urls.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/uuids.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateUuid: () => (/* binding */ generateUuid),\n/* harmony export */   isUuid: () => (/* binding */ isUuid)\n/* harmony export */ });\n/* harmony import */ var _crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js\");\n\nfunction generateUuid() {\n    // crypto.randomUuid is not supported in all browsers, so this is a polyfill\n    return \"10000000-1000-4000-8000-100000000000\".replace(/[018]/g, c => (+c ^ (0,_crypto__WEBPACK_IMPORTED_MODULE_0__.generateRandomValues)(new Uint8Array(1))[0] & 15 >> +c / 4).toString(16));\n}\n undefined;\nfunction isUuid(str) {\n    return /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(str);\n}\n undefined;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy91dWlkcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0Q7QUFDekM7QUFDUDtBQUNBLCtFQUErRSw2REFBb0I7QUFDbkc7QUFDQSxVQVdFO0FBQ0s7QUFDUCxzQkFBc0IsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLFVBQVUsR0FBRztBQUNoRjtBQUNBLFVBaUJFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrLXNoYXJlZFxcZGlzdFxcdXRpbHNcXHV1aWRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlUmFuZG9tVmFsdWVzIH0gZnJvbSBcIi4vY3J5cHRvXCI7XG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVVdWlkKCkge1xuICAgIC8vIGNyeXB0by5yYW5kb21VdWlkIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYWxsIGJyb3dzZXJzLCBzbyB0aGlzIGlzIGEgcG9seWZpbGxcbiAgICByZXR1cm4gXCIxMDAwMDAwMC0xMDAwLTQwMDAtODAwMC0xMDAwMDAwMDAwMDBcIi5yZXBsYWNlKC9bMDE4XS9nLCBjID0+ICgrYyBeIGdlbmVyYXRlUmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmIDE1ID4+ICtjIC8gNCkudG9TdHJpbmcoMTYpKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImdlbmVyYXRlVXVpZFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3QgdGhhdCB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIHZhbGlkIFVVSURcbiAgICBjb25zdCB1dWlkID0gZ2VuZXJhdGVVdWlkKCk7XG4gICAgZXhwZWN0KHV1aWQpLnRvTWF0Y2goL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS00WzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9JC8pO1xuICAgIC8vIFRlc3QgdGhhdCBtdWx0aXBsZSBjYWxscyBnZW5lcmF0ZSBkaWZmZXJlbnQgVVVJRHNcbiAgICBjb25zdCB1dWlkMiA9IGdlbmVyYXRlVXVpZCgpO1xuICAgIGV4cGVjdCh1dWlkKS5ub3QudG9CZSh1dWlkMik7XG4gICAgLy8gVGVzdCB0aGF0IHRoZSBVVUlEIGlzIHZlcnNpb24gNCAocmFuZG9tKVxuICAgIGV4cGVjdCh1dWlkLmNoYXJBdCgxNCkpLnRvQmUoJzQnKTtcbiAgICAvLyBUZXN0IHRoYXQgdGhlIFVVSUQgaGFzIHRoZSBjb3JyZWN0IHZhcmlhbnQgKDgsIDksIGEsIG9yIGIgaW4gcG9zaXRpb24gMTkpXG4gICAgZXhwZWN0KCc4OWFiJykudG9Db250YWluKHV1aWQuY2hhckF0KDE5KSk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpc1V1aWQoc3RyKSB7XG4gICAgcmV0dXJuIC9eWzAtOWEtZl17OH0tWzAtOWEtZl17NH0tNFswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfSQvLnRlc3Qoc3RyKTtcbn1cbmltcG9ydC5tZXRhLnZpdGVzdD8udGVzdChcImlzVXVpZFwiLCAoeyBleHBlY3QgfSkgPT4ge1xuICAgIC8vIFRlc3Qgd2l0aCB2YWxpZCBVVUlEc1xuICAgIGV4cGVjdChpc1V1aWQoXCIxMjNlNDU2Ny1lODliLTQyZDMtYTQ1Ni00MjY2MTQxNzQwMDBcIikpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGlzVXVpZChcIjEyM2U0NTY3LWU4OWItNDJkMy04NDU2LTQyNjYxNDE3NDAwMFwiKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoaXNVdWlkKFwiMTIzZTQ1NjctZTg5Yi00MmQzLTk0NTYtNDI2NjE0MTc0MDAwXCIpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpc1V1aWQoXCIxMjNlNDU2Ny1lODliLTQyZDMtYTQ1Ni00MjY2MTQxNzQwMDBcIikpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGlzVXVpZChcIjEyM2U0NTY3LWU4OWItNDJkMy1iNDU2LTQyNjYxNDE3NDAwMFwiKSkudG9CZSh0cnVlKTtcbiAgICAvLyBUZXN0IHdpdGggaW52YWxpZCBVVUlEc1xuICAgIGV4cGVjdChpc1V1aWQoXCJcIikpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChpc1V1aWQoXCJub3QtYS11dWlkXCIpKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoaXNVdWlkKFwiMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwXCIpKS50b0JlKGZhbHNlKTsgLy8gV3JvbmcgdmVyc2lvbiAobm90IDQpXG4gICAgZXhwZWN0KGlzVXVpZChcIjEyM2U0NTY3LWU4OWItNDJkMy1jNDU2LTQyNjYxNDE3NDAwMFwiKSkudG9CZShmYWxzZSk7IC8vIFdyb25nIHZhcmlhbnQgKG5vdCA4LCA5LCBhLCBvciBiKVxuICAgIGV4cGVjdChpc1V1aWQoXCIxMjNlNDU2Ny1lODliLTQyZDMtYTQ1Ni00MjY2MTQxNzQwMFwiKSkudG9CZShmYWxzZSk7IC8vIFRvbyBzaG9ydFxuICAgIGV4cGVjdChpc1V1aWQoXCIxMjNlNDU2Ny1lODliLTQyZDMtYTQ1Ni00MjY2MTQxNzQwMDAwXCIpKS50b0JlKGZhbHNlKTsgLy8gVG9vIGxvbmdcbiAgICBleHBlY3QoaXNVdWlkKFwiMTIzZTQ1NjctZTg5Yi00MmQzLWE0NTZfNDI2NjE0MTc0MDAwXCIpKS50b0JlKGZhbHNlKTsgLy8gV3JvbmcgZm9ybWF0ICh1bmRlcnNjb3JlIGluc3RlYWQgb2YgZGFzaClcbiAgICAvLyBUZXN0IHdpdGggdXBwZXJjYXNlIGxldHRlcnMgKHNob3VsZCBmYWlsIGFzIFVVSUQgc2hvdWxkIGJlIGxvd2VyY2FzZSlcbiAgICBleHBlY3QoaXNVdWlkKFwiMTIzRTQ1NjctRTg5Qi00MkQzLUE0NTYtNDI2NjE0MTc0MDAwXCIpKS50b0JlKGZhbHNlKTtcbn0pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/auth.js":
/*!*************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/auth.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addNewOAuthProviderOrScope: () => (/* binding */ addNewOAuthProviderOrScope),\n/* harmony export */   callOAuthCallback: () => (/* binding */ callOAuthCallback),\n/* harmony export */   signInWithOAuth: () => (/* binding */ signInWithOAuth)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/index.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/promises */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_strings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/strings */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n/* harmony import */ var _utils_url__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/url */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/utils/url.js\");\n/* harmony import */ var _cookie__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cookie */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/cookie.js\");\n// src/lib/auth.ts\n\n\n\n\n\n\n\nasync function signInWithOAuth(iface, options) {\n  const { codeChallenge, state } = await (0,_cookie__WEBPACK_IMPORTED_MODULE_5__.saveVerifierAndState)();\n  const location = await iface.getOAuthUrl({\n    provider: options.provider,\n    redirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_6__.constructRedirectUrl)(options.redirectUrl, \"redirectUrl\"),\n    errorRedirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_6__.constructRedirectUrl)(options.errorRedirectUrl, \"errorRedirectUrl\"),\n    codeChallenge,\n    state,\n    type: \"authenticate\",\n    providerScope: options.providerScope\n  });\n  window.location.assign(location);\n  await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_2__.neverResolve)();\n}\nasync function addNewOAuthProviderOrScope(iface, options, session) {\n  const { codeChallenge, state } = await (0,_cookie__WEBPACK_IMPORTED_MODULE_5__.saveVerifierAndState)();\n  const location = await iface.getOAuthUrl({\n    provider: options.provider,\n    redirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_6__.constructRedirectUrl)(options.redirectUrl, \"redirectUrl\"),\n    errorRedirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_6__.constructRedirectUrl)(options.errorRedirectUrl, \"errorRedirectUrl\"),\n    afterCallbackRedirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_6__.constructRedirectUrl)(window.location.href, \"afterCallbackRedirectUrl\"),\n    codeChallenge,\n    state,\n    type: \"link\",\n    session,\n    providerScope: options.providerScope\n  });\n  window.location.assign(location);\n  await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_2__.neverResolve)();\n}\nfunction consumeOAuthCallbackQueryParams() {\n  const requiredParams = [\"code\", \"state\"];\n  const originalUrl = new URL(window.location.href);\n  for (const param of requiredParams) {\n    if (!originalUrl.searchParams.has(param)) {\n      console.warn(new Error(`Missing required query parameter on OAuth callback: ${param}. Maybe you opened or reloaded the oauth-callback page from your history?`));\n      return null;\n    }\n  }\n  const expectedState = originalUrl.searchParams.get(\"state\") ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__.throwErr)(\"This should never happen; isn't state required above?\");\n  const cookieResult = (0,_cookie__WEBPACK_IMPORTED_MODULE_5__.consumeVerifierAndStateCookie)(expectedState);\n  if (!cookieResult) {\n    console.warn((0,_stackframe_stack_shared_dist_utils_strings__WEBPACK_IMPORTED_MODULE_4__.deindent)`\n      Stack found an outer OAuth callback state in the query parameters, but not in cookies.\n      \n      This could have multiple reasons:\n        - The cookie expired, because the OAuth flow took too long.\n        - The user's browser deleted the cookie, either manually or because of a very strict cookie policy.\n        - The cookie was already consumed by this page, and the user already logged in.\n        - You are using another OAuth client library with the same callback URL as Stack.\n        - The user opened the OAuth callback page from their history.\n\n      Either way, it is probably safe to ignore this warning unless you are debugging an OAuth issue.\n    `);\n    return null;\n  }\n  const newUrl = new URL(originalUrl);\n  for (const param of requiredParams) {\n    newUrl.searchParams.delete(param);\n  }\n  window.history.replaceState({}, \"\", newUrl.toString());\n  return {\n    originalUrl,\n    codeVerifier: cookieResult.codeVerifier,\n    state: expectedState\n  };\n}\nasync function callOAuthCallback(iface, redirectUrl) {\n  const consumed = consumeOAuthCallbackQueryParams();\n  if (!consumed) return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.ok(void 0);\n  try {\n    return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.ok(await iface.callOAuthCallback({\n      oauthParams: consumed.originalUrl.searchParams,\n      redirectUri: (0,_utils_url__WEBPACK_IMPORTED_MODULE_6__.constructRedirectUrl)(redirectUrl, \"redirectUri\"),\n      codeVerifier: consumed.codeVerifier,\n      state: consumed.state\n    }));\n  } catch (e) {\n    if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__.KnownError) {\n      throw e;\n    }\n    throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Error signing in during OAuth callback. Please try again.\", { cause: e });\n  }\n}\n\n//# sourceMappingURL=auth.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvYXV0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDc0Q7QUFDcUM7QUFDZjtBQUNQO0FBQ0U7QUFDbkI7QUFDMkI7QUFDL0U7QUFDQSxVQUFVLHVCQUF1QixRQUFRLDZEQUFvQjtBQUM3RDtBQUNBO0FBQ0EsaUJBQWlCLGdFQUFvQjtBQUNyQyxzQkFBc0IsZ0VBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsUUFBUSwwRkFBWTtBQUNwQjtBQUNBO0FBQ0EsVUFBVSx1QkFBdUIsUUFBUSw2REFBb0I7QUFDN0Q7QUFDQTtBQUNBLGlCQUFpQixnRUFBb0I7QUFDckMsc0JBQXNCLGdFQUFvQjtBQUMxQyw4QkFBOEIsZ0VBQW9CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxRQUFRLDBGQUFZO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRixNQUFNO0FBQzFGO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxvRkFBUSw0QkFBNEI7QUFDckcsdUJBQXVCLHNFQUE2QjtBQUNwRDtBQUNBLGlCQUFpQixxRkFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrRUFBTTtBQUM5QjtBQUNBLFdBQVcsK0VBQU07QUFDakI7QUFDQSxtQkFBbUIsZ0VBQW9CO0FBQ3ZDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLHFCQUFxQixnRUFBVTtBQUMvQjtBQUNBO0FBQ0EsY0FBYywyRkFBbUIsZ0VBQWdFLFVBQVU7QUFDM0c7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2tcXGRpc3RcXGVzbVxcbGliXFxhdXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvYXV0aC50c1xuaW1wb3J0IHsgS25vd25FcnJvciB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWRcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IsIHRocm93RXJyIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2Vycm9yc1wiO1xuaW1wb3J0IHsgbmV2ZXJSZXNvbHZlIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3Byb21pc2VzXCI7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvcmVzdWx0c1wiO1xuaW1wb3J0IHsgZGVpbmRlbnQgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvc3RyaW5nc1wiO1xuaW1wb3J0IHsgY29uc3RydWN0UmVkaXJlY3RVcmwgfSBmcm9tIFwiLi4vdXRpbHMvdXJsXCI7XG5pbXBvcnQgeyBjb25zdW1lVmVyaWZpZXJBbmRTdGF0ZUNvb2tpZSwgc2F2ZVZlcmlmaWVyQW5kU3RhdGUgfSBmcm9tIFwiLi9jb29raWVcIjtcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhPQXV0aChpZmFjZSwgb3B0aW9ucykge1xuICBjb25zdCB7IGNvZGVDaGFsbGVuZ2UsIHN0YXRlIH0gPSBhd2FpdCBzYXZlVmVyaWZpZXJBbmRTdGF0ZSgpO1xuICBjb25zdCBsb2NhdGlvbiA9IGF3YWl0IGlmYWNlLmdldE9BdXRoVXJsKHtcbiAgICBwcm92aWRlcjogb3B0aW9ucy5wcm92aWRlcixcbiAgICByZWRpcmVjdFVybDogY29uc3RydWN0UmVkaXJlY3RVcmwob3B0aW9ucy5yZWRpcmVjdFVybCwgXCJyZWRpcmVjdFVybFwiKSxcbiAgICBlcnJvclJlZGlyZWN0VXJsOiBjb25zdHJ1Y3RSZWRpcmVjdFVybChvcHRpb25zLmVycm9yUmVkaXJlY3RVcmwsIFwiZXJyb3JSZWRpcmVjdFVybFwiKSxcbiAgICBjb2RlQ2hhbGxlbmdlLFxuICAgIHN0YXRlLFxuICAgIHR5cGU6IFwiYXV0aGVudGljYXRlXCIsXG4gICAgcHJvdmlkZXJTY29wZTogb3B0aW9ucy5wcm92aWRlclNjb3BlXG4gIH0pO1xuICB3aW5kb3cubG9jYXRpb24uYXNzaWduKGxvY2F0aW9uKTtcbiAgYXdhaXQgbmV2ZXJSZXNvbHZlKCk7XG59XG5hc3luYyBmdW5jdGlvbiBhZGROZXdPQXV0aFByb3ZpZGVyT3JTY29wZShpZmFjZSwgb3B0aW9ucywgc2Vzc2lvbikge1xuICBjb25zdCB7IGNvZGVDaGFsbGVuZ2UsIHN0YXRlIH0gPSBhd2FpdCBzYXZlVmVyaWZpZXJBbmRTdGF0ZSgpO1xuICBjb25zdCBsb2NhdGlvbiA9IGF3YWl0IGlmYWNlLmdldE9BdXRoVXJsKHtcbiAgICBwcm92aWRlcjogb3B0aW9ucy5wcm92aWRlcixcbiAgICByZWRpcmVjdFVybDogY29uc3RydWN0UmVkaXJlY3RVcmwob3B0aW9ucy5yZWRpcmVjdFVybCwgXCJyZWRpcmVjdFVybFwiKSxcbiAgICBlcnJvclJlZGlyZWN0VXJsOiBjb25zdHJ1Y3RSZWRpcmVjdFVybChvcHRpb25zLmVycm9yUmVkaXJlY3RVcmwsIFwiZXJyb3JSZWRpcmVjdFVybFwiKSxcbiAgICBhZnRlckNhbGxiYWNrUmVkaXJlY3RVcmw6IGNvbnN0cnVjdFJlZGlyZWN0VXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmLCBcImFmdGVyQ2FsbGJhY2tSZWRpcmVjdFVybFwiKSxcbiAgICBjb2RlQ2hhbGxlbmdlLFxuICAgIHN0YXRlLFxuICAgIHR5cGU6IFwibGlua1wiLFxuICAgIHNlc3Npb24sXG4gICAgcHJvdmlkZXJTY29wZTogb3B0aW9ucy5wcm92aWRlclNjb3BlXG4gIH0pO1xuICB3aW5kb3cubG9jYXRpb24uYXNzaWduKGxvY2F0aW9uKTtcbiAgYXdhaXQgbmV2ZXJSZXNvbHZlKCk7XG59XG5mdW5jdGlvbiBjb25zdW1lT0F1dGhDYWxsYmFja1F1ZXJ5UGFyYW1zKCkge1xuICBjb25zdCByZXF1aXJlZFBhcmFtcyA9IFtcImNvZGVcIiwgXCJzdGF0ZVwiXTtcbiAgY29uc3Qgb3JpZ2luYWxVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgZm9yIChjb25zdCBwYXJhbSBvZiByZXF1aXJlZFBhcmFtcykge1xuICAgIGlmICghb3JpZ2luYWxVcmwuc2VhcmNoUGFyYW1zLmhhcyhwYXJhbSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoYE1pc3NpbmcgcmVxdWlyZWQgcXVlcnkgcGFyYW1ldGVyIG9uIE9BdXRoIGNhbGxiYWNrOiAke3BhcmFtfS4gTWF5YmUgeW91IG9wZW5lZCBvciByZWxvYWRlZCB0aGUgb2F1dGgtY2FsbGJhY2sgcGFnZSBmcm9tIHlvdXIgaGlzdG9yeT9gKSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgY29uc3QgZXhwZWN0ZWRTdGF0ZSA9IG9yaWdpbmFsVXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJzdGF0ZVwiKSA/PyB0aHJvd0VycihcIlRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbjsgaXNuJ3Qgc3RhdGUgcmVxdWlyZWQgYWJvdmU/XCIpO1xuICBjb25zdCBjb29raWVSZXN1bHQgPSBjb25zdW1lVmVyaWZpZXJBbmRTdGF0ZUNvb2tpZShleHBlY3RlZFN0YXRlKTtcbiAgaWYgKCFjb29raWVSZXN1bHQpIHtcbiAgICBjb25zb2xlLndhcm4oZGVpbmRlbnRgXG4gICAgICBTdGFjayBmb3VuZCBhbiBvdXRlciBPQXV0aCBjYWxsYmFjayBzdGF0ZSBpbiB0aGUgcXVlcnkgcGFyYW1ldGVycywgYnV0IG5vdCBpbiBjb29raWVzLlxuICAgICAgXG4gICAgICBUaGlzIGNvdWxkIGhhdmUgbXVsdGlwbGUgcmVhc29uczpcbiAgICAgICAgLSBUaGUgY29va2llIGV4cGlyZWQsIGJlY2F1c2UgdGhlIE9BdXRoIGZsb3cgdG9vayB0b28gbG9uZy5cbiAgICAgICAgLSBUaGUgdXNlcidzIGJyb3dzZXIgZGVsZXRlZCB0aGUgY29va2llLCBlaXRoZXIgbWFudWFsbHkgb3IgYmVjYXVzZSBvZiBhIHZlcnkgc3RyaWN0IGNvb2tpZSBwb2xpY3kuXG4gICAgICAgIC0gVGhlIGNvb2tpZSB3YXMgYWxyZWFkeSBjb25zdW1lZCBieSB0aGlzIHBhZ2UsIGFuZCB0aGUgdXNlciBhbHJlYWR5IGxvZ2dlZCBpbi5cbiAgICAgICAgLSBZb3UgYXJlIHVzaW5nIGFub3RoZXIgT0F1dGggY2xpZW50IGxpYnJhcnkgd2l0aCB0aGUgc2FtZSBjYWxsYmFjayBVUkwgYXMgU3RhY2suXG4gICAgICAgIC0gVGhlIHVzZXIgb3BlbmVkIHRoZSBPQXV0aCBjYWxsYmFjayBwYWdlIGZyb20gdGhlaXIgaGlzdG9yeS5cblxuICAgICAgRWl0aGVyIHdheSwgaXQgaXMgcHJvYmFibHkgc2FmZSB0byBpZ25vcmUgdGhpcyB3YXJuaW5nIHVubGVzcyB5b3UgYXJlIGRlYnVnZ2luZyBhbiBPQXV0aCBpc3N1ZS5cbiAgICBgKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBuZXdVcmwgPSBuZXcgVVJMKG9yaWdpbmFsVXJsKTtcbiAgZm9yIChjb25zdCBwYXJhbSBvZiByZXF1aXJlZFBhcmFtcykge1xuICAgIG5ld1VybC5zZWFyY2hQYXJhbXMuZGVsZXRlKHBhcmFtKTtcbiAgfVxuICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIG5ld1VybC50b1N0cmluZygpKTtcbiAgcmV0dXJuIHtcbiAgICBvcmlnaW5hbFVybCxcbiAgICBjb2RlVmVyaWZpZXI6IGNvb2tpZVJlc3VsdC5jb2RlVmVyaWZpZXIsXG4gICAgc3RhdGU6IGV4cGVjdGVkU3RhdGVcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNhbGxPQXV0aENhbGxiYWNrKGlmYWNlLCByZWRpcmVjdFVybCkge1xuICBjb25zdCBjb25zdW1lZCA9IGNvbnN1bWVPQXV0aENhbGxiYWNrUXVlcnlQYXJhbXMoKTtcbiAgaWYgKCFjb25zdW1lZCkgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICB0cnkge1xuICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgaWZhY2UuY2FsbE9BdXRoQ2FsbGJhY2soe1xuICAgICAgb2F1dGhQYXJhbXM6IGNvbnN1bWVkLm9yaWdpbmFsVXJsLnNlYXJjaFBhcmFtcyxcbiAgICAgIHJlZGlyZWN0VXJpOiBjb25zdHJ1Y3RSZWRpcmVjdFVybChyZWRpcmVjdFVybCwgXCJyZWRpcmVjdFVyaVwiKSxcbiAgICAgIGNvZGVWZXJpZmllcjogY29uc3VtZWQuY29kZVZlcmlmaWVyLFxuICAgICAgc3RhdGU6IGNvbnN1bWVkLnN0YXRlXG4gICAgfSkpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBLbm93bkVycm9yKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkVycm9yIHNpZ25pbmcgaW4gZHVyaW5nIE9BdXRoIGNhbGxiYWNrLiBQbGVhc2UgdHJ5IGFnYWluLlwiLCB7IGNhdXNlOiBlIH0pO1xuICB9XG59XG5leHBvcnQge1xuICBhZGROZXdPQXV0aFByb3ZpZGVyT3JTY29wZSxcbiAgY2FsbE9BdXRoQ2FsbGJhY2ssXG4gIHNpZ25JbldpdGhPQXV0aFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1dGguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/auth.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/cookie.js":
/*!***************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/cookie.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   consumeVerifierAndStateCookie: () => (/* binding */ consumeVerifierAndStateCookie),\n/* harmony export */   createBrowserCookieHelper: () => (/* binding */ createBrowserCookieHelper),\n/* harmony export */   createCookieHelper: () => (/* binding */ createCookieHelper),\n/* harmony export */   createPlaceholderCookieHelper: () => (/* binding */ createPlaceholderCookieHelper),\n/* harmony export */   deleteCookie: () => (/* binding */ deleteCookie),\n/* harmony export */   deleteCookieClient: () => (/* binding */ deleteCookieClient),\n/* harmony export */   getCookie: () => (/* binding */ getCookie),\n/* harmony export */   getCookieClient: () => (/* binding */ getCookieClient),\n/* harmony export */   saveVerifierAndState: () => (/* binding */ saveVerifierAndState),\n/* harmony export */   setCookie: () => (/* binding */ setCookie),\n/* harmony export */   setCookieClient: () => (/* binding */ setCookieClient),\n/* harmony export */   setOrDeleteCookie: () => (/* binding */ setOrDeleteCookie),\n/* harmony export */   setOrDeleteCookieClient: () => (/* binding */ setOrDeleteCookieClient)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_sc_force_react_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-sc/force-react-server */ \"(app-pages-browser)/./node_modules/@stackframe/stack-sc/dist/index.react-server.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/env */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/env.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js-cookie */ \"(app-pages-browser)/./node_modules/js-cookie/dist/js.cookie.mjs\");\n// src/lib/cookie.ts\n\n\n\n\n\n// ../../node_modules/.pnpm/oauth4webapi@2.10.4/node_modules/oauth4webapi/build/index.js\nvar USER_AGENT;\nif (typeof navigator === \"undefined\" || !navigator.userAgent?.startsWith?.(\"Mozilla/5.0 \")) {\n  const NAME = \"oauth4webapi\";\n  const VERSION = \"v2.10.4\";\n  USER_AGENT = `${NAME}/${VERSION}`;\n}\nvar clockSkew = Symbol();\nvar clockTolerance = Symbol();\nvar customFetch = Symbol();\nvar useMtlsAlias = Symbol();\nvar encoder = new TextEncoder();\nvar decoder = new TextDecoder();\nfunction buf(input) {\n  if (typeof input === \"string\") {\n    return encoder.encode(input);\n  }\n  return decoder.decode(input);\n}\nvar CHUNK_SIZE = 32768;\nfunction encodeBase64Url(input) {\n  if (input instanceof ArrayBuffer) {\n    input = new Uint8Array(input);\n  }\n  const arr = [];\n  for (let i = 0; i < input.byteLength; i += CHUNK_SIZE) {\n    arr.push(String.fromCharCode.apply(null, input.subarray(i, i + CHUNK_SIZE)));\n  }\n  return btoa(arr.join(\"\")).replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n}\nfunction decodeBase64Url(input) {\n  try {\n    const binary = atob(input.replace(/-/g, \"+\").replace(/_/g, \"/\").replace(/\\s/g, \"\"));\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n      bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n  } catch (cause) {\n    throw new OPE(\"The input to be decoded is not correctly encoded.\", { cause });\n  }\n}\nfunction b64u(input) {\n  if (typeof input === \"string\") {\n    return decodeBase64Url(input);\n  }\n  return encodeBase64Url(input);\n}\nvar LRU = class {\n  constructor(maxSize) {\n    this.cache = /* @__PURE__ */ new Map();\n    this._cache = /* @__PURE__ */ new Map();\n    this.maxSize = maxSize;\n  }\n  get(key) {\n    let v = this.cache.get(key);\n    if (v) {\n      return v;\n    }\n    if (v = this._cache.get(key)) {\n      this.update(key, v);\n      return v;\n    }\n    return void 0;\n  }\n  has(key) {\n    return this.cache.has(key) || this._cache.has(key);\n  }\n  set(key, value) {\n    if (this.cache.has(key)) {\n      this.cache.set(key, value);\n    } else {\n      this.update(key, value);\n    }\n    return this;\n  }\n  delete(key) {\n    if (this.cache.has(key)) {\n      return this.cache.delete(key);\n    }\n    if (this._cache.has(key)) {\n      return this._cache.delete(key);\n    }\n    return false;\n  }\n  update(key, value) {\n    this.cache.set(key, value);\n    if (this.cache.size >= this.maxSize) {\n      this._cache = this.cache;\n      this.cache = /* @__PURE__ */ new Map();\n    }\n  }\n};\nvar OperationProcessingError = class extends Error {\n  constructor(message, options) {\n    super(message, options);\n    this.name = this.constructor.name;\n    Error.captureStackTrace?.(this, this.constructor);\n  }\n};\nvar OPE = OperationProcessingError;\nvar dpopNonces = new LRU(100);\nfunction validateString(input) {\n  return typeof input === \"string\" && input.length !== 0;\n}\nfunction randomBytes() {\n  return b64u(crypto.getRandomValues(new Uint8Array(32)));\n}\nfunction generateRandomCodeVerifier() {\n  return randomBytes();\n}\nfunction generateRandomState() {\n  return randomBytes();\n}\nasync function calculatePKCECodeChallenge(codeVerifier) {\n  if (!validateString(codeVerifier)) {\n    throw new TypeError('\"codeVerifier\" must be a non-empty string');\n  }\n  return b64u(await crypto.subtle.digest(\"SHA-256\", buf(codeVerifier)));\n}\nvar skipSubjectCheck = Symbol();\nvar expectNoNonce = Symbol();\nvar skipAuthTimeCheck = Symbol();\nvar noSignatureCheck = Symbol();\nvar skipStateCheck = Symbol();\nvar expectNoState = Symbol();\n\n// src/lib/cookie.ts\nfunction ensureClient() {\n  if (!(0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_1__.isBrowserLike)()) {\n    throw new Error(\"cookieClient functions can only be called in a browser environment, yet window is undefined\");\n  }\n}\nasync function createPlaceholderCookieHelper() {\n  function throwError() {\n    throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"Throwing cookie helper is just a placeholder. This should never be called\");\n  }\n  return {\n    get: throwError,\n    set: throwError,\n    setOrDelete: throwError,\n    delete: throwError\n  };\n}\nasync function createCookieHelper() {\n  if ((0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_1__.isBrowserLike)()) {\n    return createBrowserCookieHelper();\n  } else {\n    return createNextCookieHelper(\n      await (0,_stackframe_stack_sc_force_react_server__WEBPACK_IMPORTED_MODULE_0__.cookies)(),\n      await (0,_stackframe_stack_sc_force_react_server__WEBPACK_IMPORTED_MODULE_0__.headers)()\n    );\n  }\n}\nfunction createBrowserCookieHelper() {\n  return {\n    get: getCookieClient,\n    set: setCookieClient,\n    setOrDelete: setOrDeleteCookieClient,\n    delete: deleteCookieClient\n  };\n}\nfunction handleCookieError(e, options) {\n  if (e instanceof Error && e.message.includes(\"Cookies can only be modified in\")) {\n    if (options.noOpIfServerComponent) {\n    } else {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"Attempted to set cookie in server component. Pass { noOpIfServerComponent: true } in the options of Stack's cookie functions if this is intentional and you want to ignore this error. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options\");\n    }\n  } else {\n    throw e;\n  }\n}\nfunction createNextCookieHelper(rscCookiesAwaited, rscHeadersAwaited) {\n  const cookieHelper = {\n    get: (name) => {\n      try {\n        rscCookiesAwaited.set(\"stack-is-https\", \"true\", { secure: true });\n      } catch (e) {\n        if (typeof e === \"object\" && e !== null && \"message\" in e && typeof e.message === \"string\" && e.message.includes(\"Cookies can only be modified in a Server Action or Route Handler\")) {\n        } else {\n          throw e;\n        }\n      }\n      return rscCookiesAwaited.get(name)?.value ?? null;\n    },\n    set: (name, value, options) => {\n      let isSecureCookie = !!rscCookiesAwaited.get(\"stack-is-https\");\n      if (rscHeadersAwaited.get(\"x-forwarded-proto\") === \"https\") {\n        isSecureCookie = true;\n      }\n      try {\n        rscCookiesAwaited.set(name, value, {\n          secure: isSecureCookie,\n          maxAge: options.maxAge\n        });\n      } catch (e) {\n        handleCookieError(e, options);\n      }\n    },\n    setOrDelete(name, value, options = {}) {\n      if (value === null) {\n        this.delete(name, options);\n      } else {\n        this.set(name, value, options);\n      }\n    },\n    delete(name, options = {}) {\n      try {\n        rscCookiesAwaited.delete(name);\n      } catch (e) {\n        handleCookieError(e, options);\n      }\n    }\n  };\n  return cookieHelper;\n}\nfunction getCookieClient(name) {\n  ensureClient();\n  js_cookie__WEBPACK_IMPORTED_MODULE_3__[\"default\"].set(\"stack-is-https\", \"true\", { secure: true });\n  return js_cookie__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(name) ?? null;\n}\nasync function getCookie(name) {\n  const cookieHelper = await createCookieHelper();\n  return cookieHelper.get(name);\n}\nfunction setOrDeleteCookieClient(name, value, options = {}) {\n  ensureClient();\n  if (value === null) {\n    deleteCookieClient(name, options);\n  } else {\n    setCookieClient(name, value, options);\n  }\n}\nasync function setOrDeleteCookie(name, value, options = {}) {\n  const cookieHelper = await createCookieHelper();\n  cookieHelper.setOrDelete(name, value, options);\n}\nfunction deleteCookieClient(name, options = {}) {\n  ensureClient();\n  js_cookie__WEBPACK_IMPORTED_MODULE_3__[\"default\"].remove(name);\n}\nasync function deleteCookie(name, options = {}) {\n  const cookieHelper = await createCookieHelper();\n  cookieHelper.delete(name, options);\n}\nfunction setCookieClient(name, value, options = {}) {\n  ensureClient();\n  js_cookie__WEBPACK_IMPORTED_MODULE_3__[\"default\"].set(name, value, {\n    expires: options.maxAge === void 0 ? void 0 : new Date(Date.now() + options.maxAge * 1e3)\n  });\n}\nasync function setCookie(name, value, options = {}) {\n  const cookieHelper = await createCookieHelper();\n  cookieHelper.set(name, value, options);\n}\nasync function saveVerifierAndState() {\n  const codeVerifier = generateRandomCodeVerifier();\n  const codeChallenge = await calculatePKCECodeChallenge(codeVerifier);\n  const state = generateRandomState();\n  await setCookie(\"stack-oauth-outer-\" + state, codeVerifier, { maxAge: 60 * 60 });\n  return {\n    codeChallenge,\n    state\n  };\n}\nfunction consumeVerifierAndStateCookie(state) {\n  ensureClient();\n  const cookieName = \"stack-oauth-outer-\" + state;\n  const codeVerifier = getCookieClient(cookieName);\n  if (!codeVerifier) {\n    return null;\n  }\n  deleteCookieClient(cookieName);\n  return {\n    codeVerifier\n  };\n}\n\n//# sourceMappingURL=cookie.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvY29va2llLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDdUc7QUFDL0I7QUFDUztBQUNqRDs7QUFFaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixLQUFLLEdBQUcsUUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHlFQUF5RSxPQUFPO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTyxzRkFBYTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywyRkFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxzRkFBYTtBQUNuQjtBQUNBLElBQUk7QUFDSjtBQUNBLFlBQVksZ0ZBQVU7QUFDdEIsWUFBWSxnRkFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLGdCQUFnQiwyRkFBbUIsc0RBQXNELDhCQUE4QjtBQUN2SDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxjQUFjO0FBQ3hFLFFBQVE7QUFDUjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxpREFBTyxpQ0FBaUMsY0FBYztBQUN4RCxTQUFTLGlEQUFPO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSxFQUFFLGlEQUFPO0FBQ1Q7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0EsRUFBRSxpREFBTztBQUNUO0FBQ0EsR0FBRztBQUNIO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLGlCQUFpQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZUU7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFja1xcZGlzdFxcZXNtXFxsaWJcXGNvb2tpZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL2Nvb2tpZS50c1xuaW1wb3J0IHsgY29va2llcyBhcyByc2NDb29raWVzLCBoZWFkZXJzIGFzIHJzY0hlYWRlcnMgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2MvZm9yY2UtcmVhY3Qtc2VydmVyXCI7XG5pbXBvcnQgeyBpc0Jyb3dzZXJMaWtlIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2VudlwiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9lcnJvcnNcIjtcbmltcG9ydCBDb29raWVzIGZyb20gXCJqcy1jb29raWVcIjtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL29hdXRoNHdlYmFwaUAyLjEwLjQvbm9kZV9tb2R1bGVzL29hdXRoNHdlYmFwaS9idWlsZC9pbmRleC5qc1xudmFyIFVTRVJfQUdFTlQ7XG5pZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhbmF2aWdhdG9yLnVzZXJBZ2VudD8uc3RhcnRzV2l0aD8uKFwiTW96aWxsYS81LjAgXCIpKSB7XG4gIGNvbnN0IE5BTUUgPSBcIm9hdXRoNHdlYmFwaVwiO1xuICBjb25zdCBWRVJTSU9OID0gXCJ2Mi4xMC40XCI7XG4gIFVTRVJfQUdFTlQgPSBgJHtOQU1FfS8ke1ZFUlNJT059YDtcbn1cbnZhciBjbG9ja1NrZXcgPSBTeW1ib2woKTtcbnZhciBjbG9ja1RvbGVyYW5jZSA9IFN5bWJvbCgpO1xudmFyIGN1c3RvbUZldGNoID0gU3ltYm9sKCk7XG52YXIgdXNlTXRsc0FsaWFzID0gU3ltYm9sKCk7XG52YXIgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xudmFyIGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbmZ1bmN0aW9uIGJ1ZihpbnB1dCkge1xuICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGVuY29kZXIuZW5jb2RlKGlucHV0KTtcbiAgfVxuICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoaW5wdXQpO1xufVxudmFyIENIVU5LX1NJWkUgPSAzMjc2ODtcbmZ1bmN0aW9uIGVuY29kZUJhc2U2NFVybChpbnB1dCkge1xuICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIGlucHV0ID0gbmV3IFVpbnQ4QXJyYXkoaW5wdXQpO1xuICB9XG4gIGNvbnN0IGFyciA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0LmJ5dGVMZW5ndGg7IGkgKz0gQ0hVTktfU0laRSkge1xuICAgIGFyci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgaW5wdXQuc3ViYXJyYXkoaSwgaSArIENIVU5LX1NJWkUpKSk7XG4gIH1cbiAgcmV0dXJuIGJ0b2EoYXJyLmpvaW4oXCJcIikpLnJlcGxhY2UoLz0vZywgXCJcIikucmVwbGFjZSgvXFwrL2csIFwiLVwiKS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpO1xufVxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0VXJsKGlucHV0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYmluYXJ5ID0gYXRvYihpbnB1dC5yZXBsYWNlKC8tL2csIFwiK1wiKS5yZXBsYWNlKC9fL2csIFwiL1wiKS5yZXBsYWNlKC9cXHMvZywgXCJcIikpO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5Lmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGJ5dGVzW2ldID0gYmluYXJ5LmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcztcbiAgfSBjYXRjaCAoY2F1c2UpIHtcbiAgICB0aHJvdyBuZXcgT1BFKFwiVGhlIGlucHV0IHRvIGJlIGRlY29kZWQgaXMgbm90IGNvcnJlY3RseSBlbmNvZGVkLlwiLCB7IGNhdXNlIH0pO1xuICB9XG59XG5mdW5jdGlvbiBiNjR1KGlucHV0KSB7XG4gIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZGVjb2RlQmFzZTY0VXJsKGlucHV0KTtcbiAgfVxuICByZXR1cm4gZW5jb2RlQmFzZTY0VXJsKGlucHV0KTtcbn1cbnZhciBMUlUgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1heFNpemUpIHtcbiAgICB0aGlzLmNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLl9jYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy5tYXhTaXplID0gbWF4U2l6ZTtcbiAgfVxuICBnZXQoa2V5KSB7XG4gICAgbGV0IHYgPSB0aGlzLmNhY2hlLmdldChrZXkpO1xuICAgIGlmICh2KSB7XG4gICAgICByZXR1cm4gdjtcbiAgICB9XG4gICAgaWYgKHYgPSB0aGlzLl9jYWNoZS5nZXQoa2V5KSkge1xuICAgICAgdGhpcy51cGRhdGUoa2V5LCB2KTtcbiAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIGhhcyhrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5oYXMoa2V5KSB8fCB0aGlzLl9jYWNoZS5oYXMoa2V5KTtcbiAgfVxuICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgIGlmICh0aGlzLmNhY2hlLmhhcyhrZXkpKSB7XG4gICAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGUoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGRlbGV0ZShrZXkpIHtcbiAgICBpZiAodGhpcy5jYWNoZS5oYXMoa2V5KSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9jYWNoZS5oYXMoa2V5KSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdXBkYXRlKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgICBpZiAodGhpcy5jYWNoZS5zaXplID49IHRoaXMubWF4U2l6ZSkge1xuICAgICAgdGhpcy5fY2FjaGUgPSB0aGlzLmNhY2hlO1xuICAgICAgdGhpcy5jYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgfVxuICB9XG59O1xudmFyIE9wZXJhdGlvblByb2Nlc3NpbmdFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlPy4odGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbn07XG52YXIgT1BFID0gT3BlcmF0aW9uUHJvY2Vzc2luZ0Vycm9yO1xudmFyIGRwb3BOb25jZXMgPSBuZXcgTFJVKDEwMCk7XG5mdW5jdGlvbiB2YWxpZGF0ZVN0cmluZyhpbnB1dCkge1xuICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiICYmIGlucHV0Lmxlbmd0aCAhPT0gMDtcbn1cbmZ1bmN0aW9uIHJhbmRvbUJ5dGVzKCkge1xuICByZXR1cm4gYjY0dShjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDMyKSkpO1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21Db2RlVmVyaWZpZXIoKSB7XG4gIHJldHVybiByYW5kb21CeXRlcygpO1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21TdGF0ZSgpIHtcbiAgcmV0dXJuIHJhbmRvbUJ5dGVzKCk7XG59XG5hc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVQS0NFQ29kZUNoYWxsZW5nZShjb2RlVmVyaWZpZXIpIHtcbiAgaWYgKCF2YWxpZGF0ZVN0cmluZyhjb2RlVmVyaWZpZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJjb2RlVmVyaWZpZXJcIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICB9XG4gIHJldHVybiBiNjR1KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KFwiU0hBLTI1NlwiLCBidWYoY29kZVZlcmlmaWVyKSkpO1xufVxudmFyIHNraXBTdWJqZWN0Q2hlY2sgPSBTeW1ib2woKTtcbnZhciBleHBlY3ROb05vbmNlID0gU3ltYm9sKCk7XG52YXIgc2tpcEF1dGhUaW1lQ2hlY2sgPSBTeW1ib2woKTtcbnZhciBub1NpZ25hdHVyZUNoZWNrID0gU3ltYm9sKCk7XG52YXIgc2tpcFN0YXRlQ2hlY2sgPSBTeW1ib2woKTtcbnZhciBleHBlY3ROb1N0YXRlID0gU3ltYm9sKCk7XG5cbi8vIHNyYy9saWIvY29va2llLnRzXG5mdW5jdGlvbiBlbnN1cmVDbGllbnQoKSB7XG4gIGlmICghaXNCcm93c2VyTGlrZSgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiY29va2llQ2xpZW50IGZ1bmN0aW9ucyBjYW4gb25seSBiZSBjYWxsZWQgaW4gYSBicm93c2VyIGVudmlyb25tZW50LCB5ZXQgd2luZG93IGlzIHVuZGVmaW5lZFwiKTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUGxhY2Vob2xkZXJDb29raWVIZWxwZXIoKSB7XG4gIGZ1bmN0aW9uIHRocm93RXJyb3IoKSB7XG4gICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJUaHJvd2luZyBjb29raWUgaGVscGVyIGlzIGp1c3QgYSBwbGFjZWhvbGRlci4gVGhpcyBzaG91bGQgbmV2ZXIgYmUgY2FsbGVkXCIpO1xuICB9XG4gIHJldHVybiB7XG4gICAgZ2V0OiB0aHJvd0Vycm9yLFxuICAgIHNldDogdGhyb3dFcnJvcixcbiAgICBzZXRPckRlbGV0ZTogdGhyb3dFcnJvcixcbiAgICBkZWxldGU6IHRocm93RXJyb3JcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNvb2tpZUhlbHBlcigpIHtcbiAgaWYgKGlzQnJvd3Nlckxpa2UoKSkge1xuICAgIHJldHVybiBjcmVhdGVCcm93c2VyQ29va2llSGVscGVyKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNyZWF0ZU5leHRDb29raWVIZWxwZXIoXG4gICAgICBhd2FpdCByc2NDb29raWVzKCksXG4gICAgICBhd2FpdCByc2NIZWFkZXJzKClcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiBjcmVhdGVCcm93c2VyQ29va2llSGVscGVyKCkge1xuICByZXR1cm4ge1xuICAgIGdldDogZ2V0Q29va2llQ2xpZW50LFxuICAgIHNldDogc2V0Q29va2llQ2xpZW50LFxuICAgIHNldE9yRGVsZXRlOiBzZXRPckRlbGV0ZUNvb2tpZUNsaWVudCxcbiAgICBkZWxldGU6IGRlbGV0ZUNvb2tpZUNsaWVudFxuICB9O1xufVxuZnVuY3Rpb24gaGFuZGxlQ29va2llRXJyb3IoZSwgb3B0aW9ucykge1xuICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZS5pbmNsdWRlcyhcIkNvb2tpZXMgY2FuIG9ubHkgYmUgbW9kaWZpZWQgaW5cIikpIHtcbiAgICBpZiAob3B0aW9ucy5ub09wSWZTZXJ2ZXJDb21wb25lbnQpIHtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJBdHRlbXB0ZWQgdG8gc2V0IGNvb2tpZSBpbiBzZXJ2ZXIgY29tcG9uZW50LiBQYXNzIHsgbm9PcElmU2VydmVyQ29tcG9uZW50OiB0cnVlIH0gaW4gdGhlIG9wdGlvbnMgb2YgU3RhY2sncyBjb29raWUgZnVuY3Rpb25zIGlmIHRoaXMgaXMgaW50ZW50aW9uYWwgYW5kIHlvdSB3YW50IHRvIGlnbm9yZSB0aGlzIGVycm9yLiBSZWFkIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9hcGktcmVmZXJlbmNlL2Z1bmN0aW9ucy9jb29raWVzI29wdGlvbnNcIik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IGU7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZU5leHRDb29raWVIZWxwZXIocnNjQ29va2llc0F3YWl0ZWQsIHJzY0hlYWRlcnNBd2FpdGVkKSB7XG4gIGNvbnN0IGNvb2tpZUhlbHBlciA9IHtcbiAgICBnZXQ6IChuYW1lKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICByc2NDb29raWVzQXdhaXRlZC5zZXQoXCJzdGFjay1pcy1odHRwc1wiLCBcInRydWVcIiwgeyBzZWN1cmU6IHRydWUgfSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiBlICE9PSBudWxsICYmIFwibWVzc2FnZVwiIGluIGUgJiYgdHlwZW9mIGUubWVzc2FnZSA9PT0gXCJzdHJpbmdcIiAmJiBlLm1lc3NhZ2UuaW5jbHVkZXMoXCJDb29raWVzIGNhbiBvbmx5IGJlIG1vZGlmaWVkIGluIGEgU2VydmVyIEFjdGlvbiBvciBSb3V0ZSBIYW5kbGVyXCIpKSB7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJzY0Nvb2tpZXNBd2FpdGVkLmdldChuYW1lKT8udmFsdWUgPz8gbnVsbDtcbiAgICB9LFxuICAgIHNldDogKG5hbWUsIHZhbHVlLCBvcHRpb25zKSA9PiB7XG4gICAgICBsZXQgaXNTZWN1cmVDb29raWUgPSAhIXJzY0Nvb2tpZXNBd2FpdGVkLmdldChcInN0YWNrLWlzLWh0dHBzXCIpO1xuICAgICAgaWYgKHJzY0hlYWRlcnNBd2FpdGVkLmdldChcIngtZm9yd2FyZGVkLXByb3RvXCIpID09PSBcImh0dHBzXCIpIHtcbiAgICAgICAgaXNTZWN1cmVDb29raWUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgcnNjQ29va2llc0F3YWl0ZWQuc2V0KG5hbWUsIHZhbHVlLCB7XG4gICAgICAgICAgc2VjdXJlOiBpc1NlY3VyZUNvb2tpZSxcbiAgICAgICAgICBtYXhBZ2U6IG9wdGlvbnMubWF4QWdlXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBoYW5kbGVDb29raWVFcnJvcihlLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNldE9yRGVsZXRlKG5hbWUsIHZhbHVlLCBvcHRpb25zID0ge30pIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLmRlbGV0ZShuYW1lLCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGRlbGV0ZShuYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJzY0Nvb2tpZXNBd2FpdGVkLmRlbGV0ZShuYW1lKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaGFuZGxlQ29va2llRXJyb3IoZSwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByZXR1cm4gY29va2llSGVscGVyO1xufVxuZnVuY3Rpb24gZ2V0Q29va2llQ2xpZW50KG5hbWUpIHtcbiAgZW5zdXJlQ2xpZW50KCk7XG4gIENvb2tpZXMuc2V0KFwic3RhY2staXMtaHR0cHNcIiwgXCJ0cnVlXCIsIHsgc2VjdXJlOiB0cnVlIH0pO1xuICByZXR1cm4gQ29va2llcy5nZXQobmFtZSkgPz8gbnVsbDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XG4gIGNvbnN0IGNvb2tpZUhlbHBlciA9IGF3YWl0IGNyZWF0ZUNvb2tpZUhlbHBlcigpO1xuICByZXR1cm4gY29va2llSGVscGVyLmdldChuYW1lKTtcbn1cbmZ1bmN0aW9uIHNldE9yRGVsZXRlQ29va2llQ2xpZW50KG5hbWUsIHZhbHVlLCBvcHRpb25zID0ge30pIHtcbiAgZW5zdXJlQ2xpZW50KCk7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgIGRlbGV0ZUNvb2tpZUNsaWVudChuYW1lLCBvcHRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICBzZXRDb29raWVDbGllbnQobmFtZSwgdmFsdWUsIG9wdGlvbnMpO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBzZXRPckRlbGV0ZUNvb2tpZShuYW1lLCB2YWx1ZSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGNvb2tpZUhlbHBlciA9IGF3YWl0IGNyZWF0ZUNvb2tpZUhlbHBlcigpO1xuICBjb29raWVIZWxwZXIuc2V0T3JEZWxldGUobmFtZSwgdmFsdWUsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gZGVsZXRlQ29va2llQ2xpZW50KG5hbWUsIG9wdGlvbnMgPSB7fSkge1xuICBlbnN1cmVDbGllbnQoKTtcbiAgQ29va2llcy5yZW1vdmUobmFtZSk7XG59XG5hc3luYyBmdW5jdGlvbiBkZWxldGVDb29raWUobmFtZSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGNvb2tpZUhlbHBlciA9IGF3YWl0IGNyZWF0ZUNvb2tpZUhlbHBlcigpO1xuICBjb29raWVIZWxwZXIuZGVsZXRlKG5hbWUsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gc2V0Q29va2llQ2xpZW50KG5hbWUsIHZhbHVlLCBvcHRpb25zID0ge30pIHtcbiAgZW5zdXJlQ2xpZW50KCk7XG4gIENvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCB7XG4gICAgZXhwaXJlczogb3B0aW9ucy5tYXhBZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5ldyBEYXRlKERhdGUubm93KCkgKyBvcHRpb25zLm1heEFnZSAqIDFlMylcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBzZXRDb29raWUobmFtZSwgdmFsdWUsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBjb29raWVIZWxwZXIgPSBhd2FpdCBjcmVhdGVDb29raWVIZWxwZXIoKTtcbiAgY29va2llSGVscGVyLnNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucyk7XG59XG5hc3luYyBmdW5jdGlvbiBzYXZlVmVyaWZpZXJBbmRTdGF0ZSgpIHtcbiAgY29uc3QgY29kZVZlcmlmaWVyID0gZ2VuZXJhdGVSYW5kb21Db2RlVmVyaWZpZXIoKTtcbiAgY29uc3QgY29kZUNoYWxsZW5nZSA9IGF3YWl0IGNhbGN1bGF0ZVBLQ0VDb2RlQ2hhbGxlbmdlKGNvZGVWZXJpZmllcik7XG4gIGNvbnN0IHN0YXRlID0gZ2VuZXJhdGVSYW5kb21TdGF0ZSgpO1xuICBhd2FpdCBzZXRDb29raWUoXCJzdGFjay1vYXV0aC1vdXRlci1cIiArIHN0YXRlLCBjb2RlVmVyaWZpZXIsIHsgbWF4QWdlOiA2MCAqIDYwIH0pO1xuICByZXR1cm4ge1xuICAgIGNvZGVDaGFsbGVuZ2UsXG4gICAgc3RhdGVcbiAgfTtcbn1cbmZ1bmN0aW9uIGNvbnN1bWVWZXJpZmllckFuZFN0YXRlQ29va2llKHN0YXRlKSB7XG4gIGVuc3VyZUNsaWVudCgpO1xuICBjb25zdCBjb29raWVOYW1lID0gXCJzdGFjay1vYXV0aC1vdXRlci1cIiArIHN0YXRlO1xuICBjb25zdCBjb2RlVmVyaWZpZXIgPSBnZXRDb29raWVDbGllbnQoY29va2llTmFtZSk7XG4gIGlmICghY29kZVZlcmlmaWVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgZGVsZXRlQ29va2llQ2xpZW50KGNvb2tpZU5hbWUpO1xuICByZXR1cm4ge1xuICAgIGNvZGVWZXJpZmllclxuICB9O1xufVxuZXhwb3J0IHtcbiAgY29uc3VtZVZlcmlmaWVyQW5kU3RhdGVDb29raWUsXG4gIGNyZWF0ZUJyb3dzZXJDb29raWVIZWxwZXIsXG4gIGNyZWF0ZUNvb2tpZUhlbHBlcixcbiAgY3JlYXRlUGxhY2Vob2xkZXJDb29raWVIZWxwZXIsXG4gIGRlbGV0ZUNvb2tpZSxcbiAgZGVsZXRlQ29va2llQ2xpZW50LFxuICBnZXRDb29raWUsXG4gIGdldENvb2tpZUNsaWVudCxcbiAgc2F2ZVZlcmlmaWVyQW5kU3RhdGUsXG4gIHNldENvb2tpZSxcbiAgc2V0Q29va2llQ2xpZW50LFxuICBzZXRPckRlbGV0ZUNvb2tpZSxcbiAgc2V0T3JEZWxldGVDb29raWVDbGllbnRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb29raWUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/cookie.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/hooks.js":
/*!**************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/hooks.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useStackApp: () => (/* binding */ useStackApp),\n/* harmony export */   useUser: () => (/* binding */ useUser)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _providers_stack_provider_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../providers/stack-provider-client */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/providers/stack-provider-client.js\");\n// src/lib/hooks.tsx\n\n\nfunction useUser(options = {}) {\n  const stackApp = useStackApp(options);\n  if (options.projectIdMustMatch && stackApp.projectId !== options.projectIdMustMatch) {\n    throw new Error(\"Unexpected project ID in useStackApp: \" + stackApp.projectId);\n  }\n  if (options.projectIdMustMatch === \"internal\") {\n    return stackApp.useUser(options);\n  } else {\n    return stackApp.useUser(options);\n  }\n}\nfunction useStackApp(options = {}) {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_providers_stack_provider_client__WEBPACK_IMPORTED_MODULE_1__.StackContext);\n  if (context === null) {\n    throw new Error(\"useStackApp must be used within a StackProvider\");\n  }\n  const stackApp = context.app;\n  if (options.projectIdMustMatch && stackApp.projectId !== options.projectIdMustMatch) {\n    throw new Error(\"Unexpected project ID in useStackApp: \" + stackApp.projectId);\n  }\n  return stackApp;\n}\n\n//# sourceMappingURL=hooks.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvaG9va3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNtQztBQUMrQjtBQUNsRSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyxrQkFBa0IsaURBQVUsQ0FBQywwRUFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrXFxkaXN0XFxlc21cXGxpYlxcaG9va3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9ob29rcy50c3hcbmltcG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFN0YWNrQ29udGV4dCB9IGZyb20gXCIuLi9wcm92aWRlcnMvc3RhY2stcHJvdmlkZXItY2xpZW50XCI7XG5mdW5jdGlvbiB1c2VVc2VyKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBzdGFja0FwcCA9IHVzZVN0YWNrQXBwKG9wdGlvbnMpO1xuICBpZiAob3B0aW9ucy5wcm9qZWN0SWRNdXN0TWF0Y2ggJiYgc3RhY2tBcHAucHJvamVjdElkICE9PSBvcHRpb25zLnByb2plY3RJZE11c3RNYXRjaCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgcHJvamVjdCBJRCBpbiB1c2VTdGFja0FwcDogXCIgKyBzdGFja0FwcC5wcm9qZWN0SWQpO1xuICB9XG4gIGlmIChvcHRpb25zLnByb2plY3RJZE11c3RNYXRjaCA9PT0gXCJpbnRlcm5hbFwiKSB7XG4gICAgcmV0dXJuIHN0YWNrQXBwLnVzZVVzZXIob3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHN0YWNrQXBwLnVzZVVzZXIob3B0aW9ucyk7XG4gIH1cbn1cbmZ1bmN0aW9uIHVzZVN0YWNrQXBwKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChTdGFja0NvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZVN0YWNrQXBwIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBTdGFja1Byb3ZpZGVyXCIpO1xuICB9XG4gIGNvbnN0IHN0YWNrQXBwID0gY29udGV4dC5hcHA7XG4gIGlmIChvcHRpb25zLnByb2plY3RJZE11c3RNYXRjaCAmJiBzdGFja0FwcC5wcm9qZWN0SWQgIT09IG9wdGlvbnMucHJvamVjdElkTXVzdE1hdGNoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBwcm9qZWN0IElEIGluIHVzZVN0YWNrQXBwOiBcIiArIHN0YWNrQXBwLnByb2plY3RJZCk7XG4gIH1cbiAgcmV0dXJuIHN0YWNrQXBwO1xufVxuZXhwb3J0IHtcbiAgdXNlU3RhY2tBcHAsXG4gIHVzZVVzZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ob29rcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/hooks.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/api-keys/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/api-keys/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiKeyCreationOptionsToCrud: () => (/* binding */ apiKeyCreationOptionsToCrud),\n/* harmony export */   apiKeyUpdateOptionsToCrud: () => (/* binding */ apiKeyUpdateOptionsToCrud)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/objects */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n// src/lib/stack-app/api-keys/index.ts\n\nasync function apiKeyCreationOptionsToCrud(type, userIdOrTeamId, options) {\n  return {\n    description: options.description,\n    expires_at_millis: options.expiresAt == null ? options.expiresAt : options.expiresAt.getTime(),\n    is_public: options.isPublic,\n    ...type === \"user\" ? { user_id: userIdOrTeamId } : { team_id: userIdOrTeamId }\n  };\n}\nasync function apiKeyUpdateOptionsToCrud(type, options) {\n  return (0,_stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_0__.filterUndefined)({\n    description: options.description,\n    expires_at_millis: options.expiresAt == null ? options.expiresAt : options.expiresAt.getTime(),\n    revoked: options.revoked\n  });\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2FwaS1rZXlzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQzhFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMEJBQTBCLElBQUk7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsU0FBUyw0RkFBZTtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFJRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrXFxkaXN0XFxlc21cXGxpYlxcc3RhY2stYXBwXFxhcGkta2V5c1xcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9zdGFjay1hcHAvYXBpLWtleXMvaW5kZXgudHNcbmltcG9ydCB7IGZpbHRlclVuZGVmaW5lZCB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9vYmplY3RzXCI7XG5hc3luYyBmdW5jdGlvbiBhcGlLZXlDcmVhdGlvbk9wdGlvbnNUb0NydWQodHlwZSwgdXNlcklkT3JUZWFtSWQsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbixcbiAgICBleHBpcmVzX2F0X21pbGxpczogb3B0aW9ucy5leHBpcmVzQXQgPT0gbnVsbCA/IG9wdGlvbnMuZXhwaXJlc0F0IDogb3B0aW9ucy5leHBpcmVzQXQuZ2V0VGltZSgpLFxuICAgIGlzX3B1YmxpYzogb3B0aW9ucy5pc1B1YmxpYyxcbiAgICAuLi50eXBlID09PSBcInVzZXJcIiA/IHsgdXNlcl9pZDogdXNlcklkT3JUZWFtSWQgfSA6IHsgdGVhbV9pZDogdXNlcklkT3JUZWFtSWQgfVxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gYXBpS2V5VXBkYXRlT3B0aW9uc1RvQ3J1ZCh0eXBlLCBvcHRpb25zKSB7XG4gIHJldHVybiBmaWx0ZXJVbmRlZmluZWQoe1xuICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgIGV4cGlyZXNfYXRfbWlsbGlzOiBvcHRpb25zLmV4cGlyZXNBdCA9PSBudWxsID8gb3B0aW9ucy5leHBpcmVzQXQgOiBvcHRpb25zLmV4cGlyZXNBdC5nZXRUaW1lKCksXG4gICAgcmV2b2tlZDogb3B0aW9ucy5yZXZva2VkXG4gIH0pO1xufVxuZXhwb3J0IHtcbiAgYXBpS2V5Q3JlYXRpb25PcHRpb25zVG9DcnVkLFxuICBhcGlLZXlVcGRhdGVPcHRpb25zVG9DcnVkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/api-keys/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/admin-app-impl.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/admin-app-impl.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _StackAdminAppImplIncomplete: () => (/* binding */ _StackAdminAppImplIncomplete)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/index.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_helpers_production_mode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stackframe/stack-shared/dist/helpers/production-mode */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/helpers/production-mode.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/objects */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../common */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/common.js\");\n/* harmony import */ var _email_templates__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../email-templates */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/email-templates/index.js\");\n/* harmony import */ var _internal_api_keys__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../internal-api-keys */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/internal-api-keys/index.js\");\n/* harmony import */ var _permissions__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../permissions */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/permissions/index.js\");\n/* harmony import */ var _projects__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../projects */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/projects/index.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./common */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/common.js\");\n/* harmony import */ var _server_app_impl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./server-app-impl */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/server-app-impl.js\");\n// src/lib/stack-app/apps/implementations/admin-app-impl.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar _StackAdminAppImplIncomplete = class extends _server_app_impl__WEBPACK_IMPORTED_MODULE_6__._StackServerAppImplIncomplete {\n  constructor(options) {\n    super({\n      interface: new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__.StackAdminInterface({\n        getBaseUrl: () => (0,_common__WEBPACK_IMPORTED_MODULE_7__.getBaseUrl)(options.baseUrl),\n        projectId: options.projectId ?? (0,_common__WEBPACK_IMPORTED_MODULE_7__.getDefaultProjectId)(),\n        extraRequestHeaders: options.extraRequestHeaders ?? {},\n        clientVersion: _common__WEBPACK_IMPORTED_MODULE_7__.clientVersion,\n        ...\"projectOwnerSession\" in options ? {\n          projectOwnerSession: options.projectOwnerSession\n        } : {\n          publishableClientKey: options.publishableClientKey ?? (0,_common__WEBPACK_IMPORTED_MODULE_7__.getDefaultPublishableClientKey)(),\n          secretServerKey: options.secretServerKey ?? (0,_common__WEBPACK_IMPORTED_MODULE_7__.getDefaultSecretServerKey)(),\n          superSecretAdminKey: options.superSecretAdminKey ?? (0,_common__WEBPACK_IMPORTED_MODULE_7__.getDefaultSuperSecretAdminKey)()\n        }\n      }),\n      baseUrl: options.baseUrl,\n      extraRequestHeaders: options.extraRequestHeaders,\n      projectId: options.projectId,\n      tokenStore: options.tokenStore,\n      urls: options.urls,\n      oauthScopesOnSignIn: options.oauthScopesOnSignIn,\n      redirectMethod: options.redirectMethod\n    });\n    this._adminProjectCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async () => {\n      return await this._interface.getProject();\n    });\n    this._internalApiKeysCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async () => {\n      const res = await this._interface.listInternalApiKeys();\n      return res;\n    });\n    this._adminEmailTemplatesCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async () => {\n      return await this._interface.listEmailTemplates();\n    });\n    this._adminTeamPermissionDefinitionsCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async () => {\n      return await this._interface.listTeamPermissionDefinitions();\n    });\n    this._adminProjectPermissionDefinitionsCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async () => {\n      return await this._interface.listProjectPermissionDefinitions();\n    });\n    this._svixTokenCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async () => {\n      return await this._interface.getSvixToken();\n    });\n    this._metricsCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async () => {\n      return await this._interface.getMetrics();\n    });\n  }\n  _adminOwnedProjectFromCrud(data, onRefresh) {\n    if (this._tokenStoreInit !== null) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"Owned apps must always have tokenStore === null \\u2014 did you not create this project with app._createOwnedApp()?\");\n      ;\n    }\n    return {\n      ...this._adminProjectFromCrud(data, onRefresh),\n      app: this\n    };\n  }\n  _adminProjectFromCrud(data, onRefresh) {\n    if (data.id !== this.projectId) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(`The project ID of the provided project JSON (${data.id}) does not match the project ID of the app (${this.projectId})!`);\n    }\n    const app = this;\n    return {\n      id: data.id,\n      displayName: data.display_name,\n      description: data.description,\n      createdAt: new Date(data.created_at_millis),\n      userCount: data.user_count,\n      isProductionMode: data.is_production_mode,\n      config: {\n        id: data.config.id,\n        signUpEnabled: data.config.sign_up_enabled,\n        credentialEnabled: data.config.credential_enabled,\n        magicLinkEnabled: data.config.magic_link_enabled,\n        passkeyEnabled: data.config.passkey_enabled,\n        clientTeamCreationEnabled: data.config.client_team_creation_enabled,\n        clientUserDeletionEnabled: data.config.client_user_deletion_enabled,\n        allowLocalhost: data.config.allow_localhost,\n        oauthAccountMergeStrategy: data.config.oauth_account_merge_strategy,\n        allowUserApiKeys: data.config.allow_user_api_keys,\n        allowTeamApiKeys: data.config.allow_team_api_keys,\n        oauthProviders: data.config.oauth_providers.map((p) => p.type === \"shared\" ? {\n          id: p.id,\n          enabled: p.enabled,\n          type: \"shared\"\n        } : {\n          id: p.id,\n          enabled: p.enabled,\n          type: \"standard\",\n          clientId: p.client_id ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(\"Client ID is missing\"),\n          clientSecret: p.client_secret ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(\"Client secret is missing\"),\n          facebookConfigId: p.facebook_config_id,\n          microsoftTenantId: p.microsoft_tenant_id\n        }),\n        emailConfig: data.config.email_config.type === \"shared\" ? {\n          type: \"shared\"\n        } : {\n          type: \"standard\",\n          host: data.config.email_config.host ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(\"Email host is missing\"),\n          port: data.config.email_config.port ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(\"Email port is missing\"),\n          username: data.config.email_config.username ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(\"Email username is missing\"),\n          password: data.config.email_config.password ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(\"Email password is missing\"),\n          senderName: data.config.email_config.sender_name ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(\"Email sender name is missing\"),\n          senderEmail: data.config.email_config.sender_email ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(\"Email sender email is missing\")\n        },\n        domains: data.config.domains.map((d) => ({\n          domain: d.domain,\n          handlerPath: d.handler_path\n        })),\n        createTeamOnSignUp: data.config.create_team_on_sign_up,\n        teamCreatorDefaultPermissions: data.config.team_creator_default_permissions,\n        teamMemberDefaultPermissions: data.config.team_member_default_permissions,\n        userDefaultPermissions: data.config.user_default_permissions\n      },\n      async update(update) {\n        await app._interface.updateProject((0,_projects__WEBPACK_IMPORTED_MODULE_8__.adminProjectUpdateOptionsToCrud)(update));\n        await onRefresh();\n      },\n      async delete() {\n        await app._interface.deleteProject();\n      },\n      async getProductionModeErrors() {\n        return (0,_stackframe_stack_shared_dist_helpers_production_mode__WEBPACK_IMPORTED_MODULE_1__.getProductionModeErrors)(data);\n      },\n      useProductionModeErrors() {\n        return (0,_stackframe_stack_shared_dist_helpers_production_mode__WEBPACK_IMPORTED_MODULE_1__.getProductionModeErrors)(data);\n      }\n    };\n  }\n  _adminEmailTemplateFromCrud(data) {\n    return {\n      type: data.type,\n      subject: data.subject,\n      content: data.content,\n      isDefault: data.is_default\n    };\n  }\n  async getProject() {\n    return this._adminProjectFromCrud(\n      _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._adminProjectCache.getOrWait([], \"write-only\")),\n      () => this._refreshProject()\n    );\n  }\n  useProject() {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._adminProjectCache, [], \"useProjectAdmin()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => this._adminProjectFromCrud(\n      crud,\n      () => this._refreshProject()\n    ), [crud]);\n  }\n  _createInternalApiKeyBaseFromCrud(data) {\n    const app = this;\n    return {\n      id: data.id,\n      description: data.description,\n      expiresAt: new Date(data.expires_at_millis),\n      manuallyRevokedAt: data.manually_revoked_at_millis ? new Date(data.manually_revoked_at_millis) : null,\n      createdAt: new Date(data.created_at_millis),\n      isValid() {\n        return this.whyInvalid() === null;\n      },\n      whyInvalid() {\n        if (this.expiresAt.getTime() < Date.now()) return \"expired\";\n        if (this.manuallyRevokedAt) return \"manually-revoked\";\n        return null;\n      },\n      async revoke() {\n        const res = await app._interface.revokeInternalApiKeyById(data.id);\n        await app._refreshInternalApiKeys();\n        return res;\n      }\n    };\n  }\n  _createInternalApiKeyFromCrud(data) {\n    return {\n      ...this._createInternalApiKeyBaseFromCrud(data),\n      publishableClientKey: data.publishable_client_key ? { lastFour: data.publishable_client_key.last_four } : null,\n      secretServerKey: data.secret_server_key ? { lastFour: data.secret_server_key.last_four } : null,\n      superSecretAdminKey: data.super_secret_admin_key ? { lastFour: data.super_secret_admin_key.last_four } : null\n    };\n  }\n  _createInternalApiKeyFirstViewFromCrud(data) {\n    return {\n      ...this._createInternalApiKeyBaseFromCrud(data),\n      publishableClientKey: data.publishable_client_key,\n      secretServerKey: data.secret_server_key,\n      superSecretAdminKey: data.super_secret_admin_key\n    };\n  }\n  async listInternalApiKeys() {\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._internalApiKeysCache.getOrWait([], \"write-only\"));\n    return crud.map((j) => this._createInternalApiKeyFromCrud(j));\n  }\n  useInternalApiKeys() {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._internalApiKeysCache, [], \"useInternalApiKeys()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n      return crud.map((j) => this._createInternalApiKeyFromCrud(j));\n    }, [crud]);\n  }\n  async createInternalApiKey(options) {\n    const crud = await this._interface.createInternalApiKey((0,_internal_api_keys__WEBPACK_IMPORTED_MODULE_9__.internalApiKeyCreateOptionsToCrud)(options));\n    await this._refreshInternalApiKeys();\n    return this._createInternalApiKeyFirstViewFromCrud(crud);\n  }\n  useEmailTemplates() {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._adminEmailTemplatesCache, [], \"useEmailTemplates()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n      return crud.map((j) => this._adminEmailTemplateFromCrud(j));\n    }, [crud]);\n  }\n  async listEmailTemplates() {\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._adminEmailTemplatesCache.getOrWait([], \"write-only\"));\n    return crud.map((j) => this._adminEmailTemplateFromCrud(j));\n  }\n  async updateEmailTemplate(type, data) {\n    await this._interface.updateEmailTemplate(type, (0,_email_templates__WEBPACK_IMPORTED_MODULE_10__.adminEmailTemplateUpdateOptionsToCrud)(data));\n    await this._adminEmailTemplatesCache.refresh([]);\n  }\n  async resetEmailTemplate(type) {\n    await this._interface.resetEmailTemplate(type);\n    await this._adminEmailTemplatesCache.refresh([]);\n  }\n  async createTeamPermissionDefinition(data) {\n    const crud = await this._interface.createTeamPermissionDefinition((0,_permissions__WEBPACK_IMPORTED_MODULE_11__.adminTeamPermissionDefinitionCreateOptionsToCrud)(data));\n    await this._adminTeamPermissionDefinitionsCache.refresh([]);\n    return this._serverTeamPermissionDefinitionFromCrud(crud);\n  }\n  async updateTeamPermissionDefinition(permissionId, data) {\n    await this._interface.updateTeamPermissionDefinition(permissionId, (0,_permissions__WEBPACK_IMPORTED_MODULE_11__.adminTeamPermissionDefinitionUpdateOptionsToCrud)(data));\n    await this._adminTeamPermissionDefinitionsCache.refresh([]);\n  }\n  async deleteTeamPermissionDefinition(permissionId) {\n    await this._interface.deleteTeamPermissionDefinition(permissionId);\n    await this._adminTeamPermissionDefinitionsCache.refresh([]);\n  }\n  async listTeamPermissionDefinitions() {\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._adminTeamPermissionDefinitionsCache.getOrWait([], \"write-only\"));\n    return crud.map((p) => this._serverTeamPermissionDefinitionFromCrud(p));\n  }\n  useTeamPermissionDefinitions() {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._adminTeamPermissionDefinitionsCache, [], \"usePermissions()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n      return crud.map((p) => this._serverTeamPermissionDefinitionFromCrud(p));\n    }, [crud]);\n  }\n  async createProjectPermissionDefinition(data) {\n    const crud = await this._interface.createProjectPermissionDefinition((0,_permissions__WEBPACK_IMPORTED_MODULE_11__.adminProjectPermissionDefinitionCreateOptionsToCrud)(data));\n    await this._adminProjectPermissionDefinitionsCache.refresh([]);\n    return this._serverProjectPermissionDefinitionFromCrud(crud);\n  }\n  async updateProjectPermissionDefinition(permissionId, data) {\n    await this._interface.updateProjectPermissionDefinition(permissionId, (0,_permissions__WEBPACK_IMPORTED_MODULE_11__.adminProjectPermissionDefinitionUpdateOptionsToCrud)(data));\n    await this._adminProjectPermissionDefinitionsCache.refresh([]);\n  }\n  async deleteProjectPermissionDefinition(permissionId) {\n    await this._interface.deleteProjectPermissionDefinition(permissionId);\n    await this._adminProjectPermissionDefinitionsCache.refresh([]);\n  }\n  async listProjectPermissionDefinitions() {\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._adminProjectPermissionDefinitionsCache.getOrWait([], \"write-only\"));\n    return crud.map((p) => this._serverProjectPermissionDefinitionFromCrud(p));\n  }\n  useProjectPermissionDefinitions() {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._adminProjectPermissionDefinitionsCache, [], \"useProjectPermissions()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n      return crud.map((p) => this._serverProjectPermissionDefinitionFromCrud(p));\n    }, [crud]);\n  }\n  useSvixToken() {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._svixTokenCache, [], \"useSvixToken()\");\n    return crud.token;\n  }\n  async _refreshProject() {\n    await Promise.all([\n      super._refreshProject(),\n      this._adminProjectCache.refresh([])\n    ]);\n  }\n  async _refreshInternalApiKeys() {\n    await this._internalApiKeysCache.refresh([]);\n  }\n  get [_common__WEBPACK_IMPORTED_MODULE_12__.stackAppInternalsSymbol]() {\n    return {\n      ...super[_common__WEBPACK_IMPORTED_MODULE_12__.stackAppInternalsSymbol],\n      useMetrics: () => {\n        return (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._metricsCache, [], \"useMetrics()\");\n      }\n    };\n  }\n  async sendTestEmail(options) {\n    const response = await this._interface.sendTestEmail({\n      recipient_email: options.recipientEmail,\n      email_config: {\n        ...(0,_stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_3__.pick)(options.emailConfig, [\"host\", \"port\", \"username\", \"password\"]),\n        sender_email: options.emailConfig.senderEmail,\n        sender_name: options.emailConfig.senderName\n      }\n    });\n    if (response.success) {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.ok(void 0);\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.error({ errorMessage: response.error_message ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(\"Email test error not specified\") });\n    }\n  }\n  async listSentEmails() {\n    const response = await this._interface.listSentEmails();\n    return response.items.map((email) => ({\n      id: email.id,\n      to: email.to ?? [],\n      subject: email.subject,\n      recipient: email.to?.[0] ?? \"\",\n      sentAt: new Date(email.sent_at_millis),\n      error: email.error\n    }));\n  }\n};\n\n//# sourceMappingURL=admin-app-impl.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2FwcHMvaW1wbGVtZW50YXRpb25zL2FkbWluLWFwcC1pbXBsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQytEO0FBQ2lDO0FBQ0w7QUFDeEI7QUFDRTtBQUNyQztBQUN1QjtBQUN1QjtBQUNGO0FBQ3FLO0FBQ2hMO0FBQ2dIO0FBQy9HO0FBQ3pCO0FBQ3pDLGlEQUFpRCwyRUFBNkI7QUFDOUU7QUFDQTtBQUNBLHFCQUFxQix5RUFBbUI7QUFDeEMsMEJBQTBCLG1EQUFVO0FBQ3BDLHdDQUF3Qyw0REFBbUI7QUFDM0QsOERBQThEO0FBQzlELHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsVUFBVTtBQUNWLGdFQUFnRSx1RUFBOEI7QUFDOUYsc0RBQXNELGtFQUF5QjtBQUMvRSw4REFBOEQsc0VBQTZCO0FBQzNGO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDhCQUE4QixvREFBVztBQUN6QztBQUNBLEtBQUs7QUFDTCxpQ0FBaUMsb0RBQVc7QUFDNUM7QUFDQTtBQUNBLEtBQUs7QUFDTCxxQ0FBcUMsb0RBQVc7QUFDaEQ7QUFDQSxLQUFLO0FBQ0wsZ0RBQWdELG9EQUFXO0FBQzNEO0FBQ0EsS0FBSztBQUNMLG1EQUFtRCxvREFBVztBQUM5RDtBQUNBLEtBQUs7QUFDTCwyQkFBMkIsb0RBQVc7QUFDdEM7QUFDQSxLQUFLO0FBQ0wseUJBQXlCLG9EQUFXO0FBQ3BDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyRkFBbUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDJGQUFtQixpREFBaUQsUUFBUSw4Q0FBOEMsZUFBZTtBQUN6SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsb0ZBQVE7QUFDM0MsMkNBQTJDLG9GQUFRO0FBQ25EO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLGlEQUFpRCxvRkFBUTtBQUN6RCxpREFBaUQsb0ZBQVE7QUFDekQseURBQXlELG9GQUFRO0FBQ2pFLHlEQUF5RCxvRkFBUTtBQUNqRSw4REFBOEQsb0ZBQVE7QUFDdEUsZ0VBQWdFLG9GQUFRO0FBQ3hFLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwyQ0FBMkMsMEVBQStCO0FBQzFFO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxlQUFlLDhHQUF1QjtBQUN0QyxPQUFPO0FBQ1A7QUFDQSxlQUFlLDhHQUF1QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sK0VBQU07QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzREFBYTtBQUM5QixXQUFXLDhDQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsa0RBQWtEO0FBQzlHLGtEQUFrRCw2Q0FBNkM7QUFDL0YsMkRBQTJELGtEQUFrRDtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtFQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzREFBYTtBQUM5QixXQUFXLDhDQUFPO0FBQ2xCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw0REFBNEQscUZBQWlDO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNEQUFhO0FBQzlCLFdBQVcsOENBQU87QUFDbEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGlCQUFpQiwrRUFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsd0ZBQXFDO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLCtGQUFnRDtBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSwrRkFBZ0Q7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0VBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNEQUFhO0FBQzlCLFdBQVcsOENBQU87QUFDbEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlFQUF5RSxrR0FBbUQ7QUFDNUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsa0dBQW1EO0FBQzdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtFQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzREFBYTtBQUM5QixXQUFXLDhDQUFPO0FBQ2xCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sNkRBQXVCO0FBQzlCO0FBQ0EsZUFBZSw2REFBdUI7QUFDdEM7QUFDQSxlQUFlLHNEQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpRkFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWEsK0VBQU07QUFDbkIsTUFBTTtBQUNOLGFBQWEsK0VBQU0sU0FBUyx3Q0FBd0Msb0ZBQVEsb0NBQW9DO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2tcXGRpc3RcXGVzbVxcbGliXFxzdGFjay1hcHBcXGFwcHNcXGltcGxlbWVudGF0aW9uc1xcYWRtaW4tYXBwLWltcGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9zdGFjay1hcHAvYXBwcy9pbXBsZW1lbnRhdGlvbnMvYWRtaW4tYXBwLWltcGwudHNcbmltcG9ydCB7IFN0YWNrQWRtaW5JbnRlcmZhY2UgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkXCI7XG5pbXBvcnQgeyBnZXRQcm9kdWN0aW9uTW9kZUVycm9ycyB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9oZWxwZXJzL3Byb2R1Y3Rpb24tbW9kZVwiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgeyBwaWNrIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL29iamVjdHNcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9yZXN1bHRzXCI7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBzdGFja0FwcEludGVybmFsc1N5bWJvbCB9IGZyb20gXCIuLi8uLi9jb21tb25cIjtcbmltcG9ydCB7IGFkbWluRW1haWxUZW1wbGF0ZVVwZGF0ZU9wdGlvbnNUb0NydWQgfSBmcm9tIFwiLi4vLi4vZW1haWwtdGVtcGxhdGVzXCI7XG5pbXBvcnQgeyBpbnRlcm5hbEFwaUtleUNyZWF0ZU9wdGlvbnNUb0NydWQgfSBmcm9tIFwiLi4vLi4vaW50ZXJuYWwtYXBpLWtleXNcIjtcbmltcG9ydCB7IGFkbWluUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uQ3JlYXRlT3B0aW9uc1RvQ3J1ZCwgYWRtaW5Qcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb25VcGRhdGVPcHRpb25zVG9DcnVkLCBhZG1pblRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbkNyZWF0ZU9wdGlvbnNUb0NydWQsIGFkbWluVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uVXBkYXRlT3B0aW9uc1RvQ3J1ZCB9IGZyb20gXCIuLi8uLi9wZXJtaXNzaW9uc1wiO1xuaW1wb3J0IHsgYWRtaW5Qcm9qZWN0VXBkYXRlT3B0aW9uc1RvQ3J1ZCB9IGZyb20gXCIuLi8uLi9wcm9qZWN0c1wiO1xuaW1wb3J0IHsgY2xpZW50VmVyc2lvbiwgY3JlYXRlQ2FjaGUsIGdldEJhc2VVcmwsIGdldERlZmF1bHRQcm9qZWN0SWQsIGdldERlZmF1bHRQdWJsaXNoYWJsZUNsaWVudEtleSwgZ2V0RGVmYXVsdFNlY3JldFNlcnZlcktleSwgZ2V0RGVmYXVsdFN1cGVyU2VjcmV0QWRtaW5LZXkgfSBmcm9tIFwiLi9jb21tb25cIjtcbmltcG9ydCB7IF9TdGFja1NlcnZlckFwcEltcGxJbmNvbXBsZXRlIH0gZnJvbSBcIi4vc2VydmVyLWFwcC1pbXBsXCI7XG5pbXBvcnQgeyB1c2VBc3luY0NhY2hlIH0gZnJvbSBcIi4vY29tbW9uXCI7XG52YXIgX1N0YWNrQWRtaW5BcHBJbXBsSW5jb21wbGV0ZSA9IGNsYXNzIGV4dGVuZHMgX1N0YWNrU2VydmVyQXBwSW1wbEluY29tcGxldGUge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoe1xuICAgICAgaW50ZXJmYWNlOiBuZXcgU3RhY2tBZG1pbkludGVyZmFjZSh7XG4gICAgICAgIGdldEJhc2VVcmw6ICgpID0+IGdldEJhc2VVcmwob3B0aW9ucy5iYXNlVXJsKSxcbiAgICAgICAgcHJvamVjdElkOiBvcHRpb25zLnByb2plY3RJZCA/PyBnZXREZWZhdWx0UHJvamVjdElkKCksXG4gICAgICAgIGV4dHJhUmVxdWVzdEhlYWRlcnM6IG9wdGlvbnMuZXh0cmFSZXF1ZXN0SGVhZGVycyA/PyB7fSxcbiAgICAgICAgY2xpZW50VmVyc2lvbixcbiAgICAgICAgLi4uXCJwcm9qZWN0T3duZXJTZXNzaW9uXCIgaW4gb3B0aW9ucyA/IHtcbiAgICAgICAgICBwcm9qZWN0T3duZXJTZXNzaW9uOiBvcHRpb25zLnByb2plY3RPd25lclNlc3Npb25cbiAgICAgICAgfSA6IHtcbiAgICAgICAgICBwdWJsaXNoYWJsZUNsaWVudEtleTogb3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleSA/PyBnZXREZWZhdWx0UHVibGlzaGFibGVDbGllbnRLZXkoKSxcbiAgICAgICAgICBzZWNyZXRTZXJ2ZXJLZXk6IG9wdGlvbnMuc2VjcmV0U2VydmVyS2V5ID8/IGdldERlZmF1bHRTZWNyZXRTZXJ2ZXJLZXkoKSxcbiAgICAgICAgICBzdXBlclNlY3JldEFkbWluS2V5OiBvcHRpb25zLnN1cGVyU2VjcmV0QWRtaW5LZXkgPz8gZ2V0RGVmYXVsdFN1cGVyU2VjcmV0QWRtaW5LZXkoKVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIGJhc2VVcmw6IG9wdGlvbnMuYmFzZVVybCxcbiAgICAgIGV4dHJhUmVxdWVzdEhlYWRlcnM6IG9wdGlvbnMuZXh0cmFSZXF1ZXN0SGVhZGVycyxcbiAgICAgIHByb2plY3RJZDogb3B0aW9ucy5wcm9qZWN0SWQsXG4gICAgICB0b2tlblN0b3JlOiBvcHRpb25zLnRva2VuU3RvcmUsXG4gICAgICB1cmxzOiBvcHRpb25zLnVybHMsXG4gICAgICBvYXV0aFNjb3Blc09uU2lnbkluOiBvcHRpb25zLm9hdXRoU2NvcGVzT25TaWduSW4sXG4gICAgICByZWRpcmVjdE1ldGhvZDogb3B0aW9ucy5yZWRpcmVjdE1ldGhvZFxuICAgIH0pO1xuICAgIHRoaXMuX2FkbWluUHJvamVjdENhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5nZXRQcm9qZWN0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5faW50ZXJuYWxBcGlLZXlzQ2FjaGUgPSBjcmVhdGVDYWNoZShhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdEludGVybmFsQXBpS2V5cygpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9KTtcbiAgICB0aGlzLl9hZG1pbkVtYWlsVGVtcGxhdGVzQ2FjaGUgPSBjcmVhdGVDYWNoZShhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmxpc3RFbWFpbFRlbXBsYXRlcygpO1xuICAgIH0pO1xuICAgIHRoaXMuX2FkbWluVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uc0NhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0VGVhbVBlcm1pc3Npb25EZWZpbml0aW9ucygpO1xuICAgIH0pO1xuICAgIHRoaXMuX2FkbWluUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uc0NhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0UHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9ucygpO1xuICAgIH0pO1xuICAgIHRoaXMuX3N2aXhUb2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5nZXRTdml4VG9rZW4oKTtcbiAgICB9KTtcbiAgICB0aGlzLl9tZXRyaWNzQ2FjaGUgPSBjcmVhdGVDYWNoZShhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmdldE1ldHJpY3MoKTtcbiAgICB9KTtcbiAgfVxuICBfYWRtaW5Pd25lZFByb2plY3RGcm9tQ3J1ZChkYXRhLCBvblJlZnJlc2gpIHtcbiAgICBpZiAodGhpcy5fdG9rZW5TdG9yZUluaXQgIT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiT3duZWQgYXBwcyBtdXN0IGFsd2F5cyBoYXZlIHRva2VuU3RvcmUgPT09IG51bGwgXFx1MjAxNCBkaWQgeW91IG5vdCBjcmVhdGUgdGhpcyBwcm9qZWN0IHdpdGggYXBwLl9jcmVhdGVPd25lZEFwcCgpP1wiKTtcbiAgICAgIDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMuX2FkbWluUHJvamVjdEZyb21DcnVkKGRhdGEsIG9uUmVmcmVzaCksXG4gICAgICBhcHA6IHRoaXNcbiAgICB9O1xuICB9XG4gIF9hZG1pblByb2plY3RGcm9tQ3J1ZChkYXRhLCBvblJlZnJlc2gpIHtcbiAgICBpZiAoZGF0YS5pZCAhPT0gdGhpcy5wcm9qZWN0SWQpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBUaGUgcHJvamVjdCBJRCBvZiB0aGUgcHJvdmlkZWQgcHJvamVjdCBKU09OICgke2RhdGEuaWR9KSBkb2VzIG5vdCBtYXRjaCB0aGUgcHJvamVjdCBJRCBvZiB0aGUgYXBwICgke3RoaXMucHJvamVjdElkfSkhYCk7XG4gICAgfVxuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgZGlzcGxheU5hbWU6IGRhdGEuZGlzcGxheV9uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRhdGEuY3JlYXRlZF9hdF9taWxsaXMpLFxuICAgICAgdXNlckNvdW50OiBkYXRhLnVzZXJfY291bnQsXG4gICAgICBpc1Byb2R1Y3Rpb25Nb2RlOiBkYXRhLmlzX3Byb2R1Y3Rpb25fbW9kZSxcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBpZDogZGF0YS5jb25maWcuaWQsXG4gICAgICAgIHNpZ25VcEVuYWJsZWQ6IGRhdGEuY29uZmlnLnNpZ25fdXBfZW5hYmxlZCxcbiAgICAgICAgY3JlZGVudGlhbEVuYWJsZWQ6IGRhdGEuY29uZmlnLmNyZWRlbnRpYWxfZW5hYmxlZCxcbiAgICAgICAgbWFnaWNMaW5rRW5hYmxlZDogZGF0YS5jb25maWcubWFnaWNfbGlua19lbmFibGVkLFxuICAgICAgICBwYXNza2V5RW5hYmxlZDogZGF0YS5jb25maWcucGFzc2tleV9lbmFibGVkLFxuICAgICAgICBjbGllbnRUZWFtQ3JlYXRpb25FbmFibGVkOiBkYXRhLmNvbmZpZy5jbGllbnRfdGVhbV9jcmVhdGlvbl9lbmFibGVkLFxuICAgICAgICBjbGllbnRVc2VyRGVsZXRpb25FbmFibGVkOiBkYXRhLmNvbmZpZy5jbGllbnRfdXNlcl9kZWxldGlvbl9lbmFibGVkLFxuICAgICAgICBhbGxvd0xvY2FsaG9zdDogZGF0YS5jb25maWcuYWxsb3dfbG9jYWxob3N0LFxuICAgICAgICBvYXV0aEFjY291bnRNZXJnZVN0cmF0ZWd5OiBkYXRhLmNvbmZpZy5vYXV0aF9hY2NvdW50X21lcmdlX3N0cmF0ZWd5LFxuICAgICAgICBhbGxvd1VzZXJBcGlLZXlzOiBkYXRhLmNvbmZpZy5hbGxvd191c2VyX2FwaV9rZXlzLFxuICAgICAgICBhbGxvd1RlYW1BcGlLZXlzOiBkYXRhLmNvbmZpZy5hbGxvd190ZWFtX2FwaV9rZXlzLFxuICAgICAgICBvYXV0aFByb3ZpZGVyczogZGF0YS5jb25maWcub2F1dGhfcHJvdmlkZXJzLm1hcCgocCkgPT4gcC50eXBlID09PSBcInNoYXJlZFwiID8ge1xuICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgIGVuYWJsZWQ6IHAuZW5hYmxlZCxcbiAgICAgICAgICB0eXBlOiBcInNoYXJlZFwiXG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgaWQ6IHAuaWQsXG4gICAgICAgICAgZW5hYmxlZDogcC5lbmFibGVkLFxuICAgICAgICAgIHR5cGU6IFwic3RhbmRhcmRcIixcbiAgICAgICAgICBjbGllbnRJZDogcC5jbGllbnRfaWQgPz8gdGhyb3dFcnIoXCJDbGllbnQgSUQgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IHAuY2xpZW50X3NlY3JldCA/PyB0aHJvd0VycihcIkNsaWVudCBzZWNyZXQgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBmYWNlYm9va0NvbmZpZ0lkOiBwLmZhY2Vib29rX2NvbmZpZ19pZCxcbiAgICAgICAgICBtaWNyb3NvZnRUZW5hbnRJZDogcC5taWNyb3NvZnRfdGVuYW50X2lkXG4gICAgICAgIH0pLFxuICAgICAgICBlbWFpbENvbmZpZzogZGF0YS5jb25maWcuZW1haWxfY29uZmlnLnR5cGUgPT09IFwic2hhcmVkXCIgPyB7XG4gICAgICAgICAgdHlwZTogXCJzaGFyZWRcIlxuICAgICAgICB9IDoge1xuICAgICAgICAgIHR5cGU6IFwic3RhbmRhcmRcIixcbiAgICAgICAgICBob3N0OiBkYXRhLmNvbmZpZy5lbWFpbF9jb25maWcuaG9zdCA/PyB0aHJvd0VycihcIkVtYWlsIGhvc3QgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBwb3J0OiBkYXRhLmNvbmZpZy5lbWFpbF9jb25maWcucG9ydCA/PyB0aHJvd0VycihcIkVtYWlsIHBvcnQgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICB1c2VybmFtZTogZGF0YS5jb25maWcuZW1haWxfY29uZmlnLnVzZXJuYW1lID8/IHRocm93RXJyKFwiRW1haWwgdXNlcm5hbWUgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBwYXNzd29yZDogZGF0YS5jb25maWcuZW1haWxfY29uZmlnLnBhc3N3b3JkID8/IHRocm93RXJyKFwiRW1haWwgcGFzc3dvcmQgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBzZW5kZXJOYW1lOiBkYXRhLmNvbmZpZy5lbWFpbF9jb25maWcuc2VuZGVyX25hbWUgPz8gdGhyb3dFcnIoXCJFbWFpbCBzZW5kZXIgbmFtZSBpcyBtaXNzaW5nXCIpLFxuICAgICAgICAgIHNlbmRlckVtYWlsOiBkYXRhLmNvbmZpZy5lbWFpbF9jb25maWcuc2VuZGVyX2VtYWlsID8/IHRocm93RXJyKFwiRW1haWwgc2VuZGVyIGVtYWlsIGlzIG1pc3NpbmdcIilcbiAgICAgICAgfSxcbiAgICAgICAgZG9tYWluczogZGF0YS5jb25maWcuZG9tYWlucy5tYXAoKGQpID0+ICh7XG4gICAgICAgICAgZG9tYWluOiBkLmRvbWFpbixcbiAgICAgICAgICBoYW5kbGVyUGF0aDogZC5oYW5kbGVyX3BhdGhcbiAgICAgICAgfSkpLFxuICAgICAgICBjcmVhdGVUZWFtT25TaWduVXA6IGRhdGEuY29uZmlnLmNyZWF0ZV90ZWFtX29uX3NpZ25fdXAsXG4gICAgICAgIHRlYW1DcmVhdG9yRGVmYXVsdFBlcm1pc3Npb25zOiBkYXRhLmNvbmZpZy50ZWFtX2NyZWF0b3JfZGVmYXVsdF9wZXJtaXNzaW9ucyxcbiAgICAgICAgdGVhbU1lbWJlckRlZmF1bHRQZXJtaXNzaW9uczogZGF0YS5jb25maWcudGVhbV9tZW1iZXJfZGVmYXVsdF9wZXJtaXNzaW9ucyxcbiAgICAgICAgdXNlckRlZmF1bHRQZXJtaXNzaW9uczogZGF0YS5jb25maWcudXNlcl9kZWZhdWx0X3Blcm1pc3Npb25zXG4gICAgICB9LFxuICAgICAgYXN5bmMgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBhd2FpdCBhcHAuX2ludGVyZmFjZS51cGRhdGVQcm9qZWN0KGFkbWluUHJvamVjdFVwZGF0ZU9wdGlvbnNUb0NydWQodXBkYXRlKSk7XG4gICAgICAgIGF3YWl0IG9uUmVmcmVzaCgpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGRlbGV0ZSgpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UuZGVsZXRlUHJvamVjdCgpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldFByb2R1Y3Rpb25Nb2RlRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gZ2V0UHJvZHVjdGlvbk1vZGVFcnJvcnMoZGF0YSk7XG4gICAgICB9LFxuICAgICAgdXNlUHJvZHVjdGlvbk1vZGVFcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiBnZXRQcm9kdWN0aW9uTW9kZUVycm9ycyhkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9hZG1pbkVtYWlsVGVtcGxhdGVGcm9tQ3J1ZChkYXRhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IGRhdGEudHlwZSxcbiAgICAgIHN1YmplY3Q6IGRhdGEuc3ViamVjdCxcbiAgICAgIGNvbnRlbnQ6IGRhdGEuY29udGVudCxcbiAgICAgIGlzRGVmYXVsdDogZGF0YS5pc19kZWZhdWx0XG4gICAgfTtcbiAgfVxuICBhc3luYyBnZXRQcm9qZWN0KCkge1xuICAgIHJldHVybiB0aGlzLl9hZG1pblByb2plY3RGcm9tQ3J1ZChcbiAgICAgIFJlc3VsdC5vclRocm93KGF3YWl0IHRoaXMuX2FkbWluUHJvamVjdENhY2hlLmdldE9yV2FpdChbXSwgXCJ3cml0ZS1vbmx5XCIpKSxcbiAgICAgICgpID0+IHRoaXMuX3JlZnJlc2hQcm9qZWN0KClcbiAgICApO1xuICB9XG4gIHVzZVByb2plY3QoKSB7XG4gICAgY29uc3QgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fYWRtaW5Qcm9qZWN0Q2FjaGUsIFtdLCBcInVzZVByb2plY3RBZG1pbigpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHRoaXMuX2FkbWluUHJvamVjdEZyb21DcnVkKFxuICAgICAgY3J1ZCxcbiAgICAgICgpID0+IHRoaXMuX3JlZnJlc2hQcm9qZWN0KClcbiAgICApLCBbY3J1ZF0pO1xuICB9XG4gIF9jcmVhdGVJbnRlcm5hbEFwaUtleUJhc2VGcm9tQ3J1ZChkYXRhKSB7XG4gICAgY29uc3QgYXBwID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoZGF0YS5leHBpcmVzX2F0X21pbGxpcyksXG4gICAgICBtYW51YWxseVJldm9rZWRBdDogZGF0YS5tYW51YWxseV9yZXZva2VkX2F0X21pbGxpcyA/IG5ldyBEYXRlKGRhdGEubWFudWFsbHlfcmV2b2tlZF9hdF9taWxsaXMpIDogbnVsbCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoZGF0YS5jcmVhdGVkX2F0X21pbGxpcyksXG4gICAgICBpc1ZhbGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aHlJbnZhbGlkKCkgPT09IG51bGw7XG4gICAgICB9LFxuICAgICAgd2h5SW52YWxpZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwaXJlc0F0LmdldFRpbWUoKSA8IERhdGUubm93KCkpIHJldHVybiBcImV4cGlyZWRcIjtcbiAgICAgICAgaWYgKHRoaXMubWFudWFsbHlSZXZva2VkQXQpIHJldHVybiBcIm1hbnVhbGx5LXJldm9rZWRcIjtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9LFxuICAgICAgYXN5bmMgcmV2b2tlKCkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5yZXZva2VJbnRlcm5hbEFwaUtleUJ5SWQoZGF0YS5pZCk7XG4gICAgICAgIGF3YWl0IGFwcC5fcmVmcmVzaEludGVybmFsQXBpS2V5cygpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgX2NyZWF0ZUludGVybmFsQXBpS2V5RnJvbUNydWQoZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLl9jcmVhdGVJbnRlcm5hbEFwaUtleUJhc2VGcm9tQ3J1ZChkYXRhKSxcbiAgICAgIHB1Ymxpc2hhYmxlQ2xpZW50S2V5OiBkYXRhLnB1Ymxpc2hhYmxlX2NsaWVudF9rZXkgPyB7IGxhc3RGb3VyOiBkYXRhLnB1Ymxpc2hhYmxlX2NsaWVudF9rZXkubGFzdF9mb3VyIH0gOiBudWxsLFxuICAgICAgc2VjcmV0U2VydmVyS2V5OiBkYXRhLnNlY3JldF9zZXJ2ZXJfa2V5ID8geyBsYXN0Rm91cjogZGF0YS5zZWNyZXRfc2VydmVyX2tleS5sYXN0X2ZvdXIgfSA6IG51bGwsXG4gICAgICBzdXBlclNlY3JldEFkbWluS2V5OiBkYXRhLnN1cGVyX3NlY3JldF9hZG1pbl9rZXkgPyB7IGxhc3RGb3VyOiBkYXRhLnN1cGVyX3NlY3JldF9hZG1pbl9rZXkubGFzdF9mb3VyIH0gOiBudWxsXG4gICAgfTtcbiAgfVxuICBfY3JlYXRlSW50ZXJuYWxBcGlLZXlGaXJzdFZpZXdGcm9tQ3J1ZChkYXRhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMuX2NyZWF0ZUludGVybmFsQXBpS2V5QmFzZUZyb21DcnVkKGRhdGEpLFxuICAgICAgcHVibGlzaGFibGVDbGllbnRLZXk6IGRhdGEucHVibGlzaGFibGVfY2xpZW50X2tleSxcbiAgICAgIHNlY3JldFNlcnZlcktleTogZGF0YS5zZWNyZXRfc2VydmVyX2tleSxcbiAgICAgIHN1cGVyU2VjcmV0QWRtaW5LZXk6IGRhdGEuc3VwZXJfc2VjcmV0X2FkbWluX2tleVxuICAgIH07XG4gIH1cbiAgYXN5bmMgbGlzdEludGVybmFsQXBpS2V5cygpIHtcbiAgICBjb25zdCBjcnVkID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgdGhpcy5faW50ZXJuYWxBcGlLZXlzQ2FjaGUuZ2V0T3JXYWl0KFtdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgIHJldHVybiBjcnVkLm1hcCgoaikgPT4gdGhpcy5fY3JlYXRlSW50ZXJuYWxBcGlLZXlGcm9tQ3J1ZChqKSk7XG4gIH1cbiAgdXNlSW50ZXJuYWxBcGlLZXlzKCkge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX2ludGVybmFsQXBpS2V5c0NhY2hlLCBbXSwgXCJ1c2VJbnRlcm5hbEFwaUtleXMoKVwiKTtcbiAgICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gY3J1ZC5tYXAoKGopID0+IHRoaXMuX2NyZWF0ZUludGVybmFsQXBpS2V5RnJvbUNydWQoaikpO1xuICAgIH0sIFtjcnVkXSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlSW50ZXJuYWxBcGlLZXkob3B0aW9ucykge1xuICAgIGNvbnN0IGNydWQgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuY3JlYXRlSW50ZXJuYWxBcGlLZXkoaW50ZXJuYWxBcGlLZXlDcmVhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpKTtcbiAgICBhd2FpdCB0aGlzLl9yZWZyZXNoSW50ZXJuYWxBcGlLZXlzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUludGVybmFsQXBpS2V5Rmlyc3RWaWV3RnJvbUNydWQoY3J1ZCk7XG4gIH1cbiAgdXNlRW1haWxUZW1wbGF0ZXMoKSB7XG4gICAgY29uc3QgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fYWRtaW5FbWFpbFRlbXBsYXRlc0NhY2hlLCBbXSwgXCJ1c2VFbWFpbFRlbXBsYXRlcygpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBjcnVkLm1hcCgoaikgPT4gdGhpcy5fYWRtaW5FbWFpbFRlbXBsYXRlRnJvbUNydWQoaikpO1xuICAgIH0sIFtjcnVkXSk7XG4gIH1cbiAgYXN5bmMgbGlzdEVtYWlsVGVtcGxhdGVzKCkge1xuICAgIGNvbnN0IGNydWQgPSBSZXN1bHQub3JUaHJvdyhhd2FpdCB0aGlzLl9hZG1pbkVtYWlsVGVtcGxhdGVzQ2FjaGUuZ2V0T3JXYWl0KFtdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgIHJldHVybiBjcnVkLm1hcCgoaikgPT4gdGhpcy5fYWRtaW5FbWFpbFRlbXBsYXRlRnJvbUNydWQoaikpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUVtYWlsVGVtcGxhdGUodHlwZSwgZGF0YSkge1xuICAgIGF3YWl0IHRoaXMuX2ludGVyZmFjZS51cGRhdGVFbWFpbFRlbXBsYXRlKHR5cGUsIGFkbWluRW1haWxUZW1wbGF0ZVVwZGF0ZU9wdGlvbnNUb0NydWQoZGF0YSkpO1xuICAgIGF3YWl0IHRoaXMuX2FkbWluRW1haWxUZW1wbGF0ZXNDYWNoZS5yZWZyZXNoKFtdKTtcbiAgfVxuICBhc3luYyByZXNldEVtYWlsVGVtcGxhdGUodHlwZSkge1xuICAgIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5yZXNldEVtYWlsVGVtcGxhdGUodHlwZSk7XG4gICAgYXdhaXQgdGhpcy5fYWRtaW5FbWFpbFRlbXBsYXRlc0NhY2hlLnJlZnJlc2goW10pO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbihkYXRhKSB7XG4gICAgY29uc3QgY3J1ZCA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5jcmVhdGVUZWFtUGVybWlzc2lvbkRlZmluaXRpb24oYWRtaW5UZWFtUGVybWlzc2lvbkRlZmluaXRpb25DcmVhdGVPcHRpb25zVG9DcnVkKGRhdGEpKTtcbiAgICBhd2FpdCB0aGlzLl9hZG1pblRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbnNDYWNoZS5yZWZyZXNoKFtdKTtcbiAgICByZXR1cm4gdGhpcy5fc2VydmVyVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uRnJvbUNydWQoY3J1ZCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCwgZGF0YSkge1xuICAgIGF3YWl0IHRoaXMuX2ludGVyZmFjZS51cGRhdGVUZWFtUGVybWlzc2lvbkRlZmluaXRpb24ocGVybWlzc2lvbklkLCBhZG1pblRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvblVwZGF0ZU9wdGlvbnNUb0NydWQoZGF0YSkpO1xuICAgIGF3YWl0IHRoaXMuX2FkbWluVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uc0NhY2hlLnJlZnJlc2goW10pO1xuICB9XG4gIGFzeW5jIGRlbGV0ZVRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbihwZXJtaXNzaW9uSWQpIHtcbiAgICBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuZGVsZXRlVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCk7XG4gICAgYXdhaXQgdGhpcy5fYWRtaW5UZWFtUGVybWlzc2lvbkRlZmluaXRpb25zQ2FjaGUucmVmcmVzaChbXSk7XG4gIH1cbiAgYXN5bmMgbGlzdFRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbnMoKSB7XG4gICAgY29uc3QgY3J1ZCA9IFJlc3VsdC5vclRocm93KGF3YWl0IHRoaXMuX2FkbWluVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uc0NhY2hlLmdldE9yV2FpdChbXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICByZXR1cm4gY3J1ZC5tYXAoKHApID0+IHRoaXMuX3NlcnZlclRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbkZyb21DcnVkKHApKTtcbiAgfVxuICB1c2VUZWFtUGVybWlzc2lvbkRlZmluaXRpb25zKCkge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX2FkbWluVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uc0NhY2hlLCBbXSwgXCJ1c2VQZXJtaXNzaW9ucygpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBjcnVkLm1hcCgocCkgPT4gdGhpcy5fc2VydmVyVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uRnJvbUNydWQocCkpO1xuICAgIH0sIFtjcnVkXSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uKGRhdGEpIHtcbiAgICBjb25zdCBjcnVkID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmNyZWF0ZVByb2plY3RQZXJtaXNzaW9uRGVmaW5pdGlvbihhZG1pblByb2plY3RQZXJtaXNzaW9uRGVmaW5pdGlvbkNyZWF0ZU9wdGlvbnNUb0NydWQoZGF0YSkpO1xuICAgIGF3YWl0IHRoaXMuX2FkbWluUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uc0NhY2hlLnJlZnJlc2goW10pO1xuICAgIHJldHVybiB0aGlzLl9zZXJ2ZXJQcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb25Gcm9tQ3J1ZChjcnVkKTtcbiAgfVxuICBhc3luYyB1cGRhdGVQcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb24ocGVybWlzc2lvbklkLCBkYXRhKSB7XG4gICAgYXdhaXQgdGhpcy5faW50ZXJmYWNlLnVwZGF0ZVByb2plY3RQZXJtaXNzaW9uRGVmaW5pdGlvbihwZXJtaXNzaW9uSWQsIGFkbWluUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uVXBkYXRlT3B0aW9uc1RvQ3J1ZChkYXRhKSk7XG4gICAgYXdhaXQgdGhpcy5fYWRtaW5Qcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb25zQ2FjaGUucmVmcmVzaChbXSk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCkge1xuICAgIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5kZWxldGVQcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb24ocGVybWlzc2lvbklkKTtcbiAgICBhd2FpdCB0aGlzLl9hZG1pblByb2plY3RQZXJtaXNzaW9uRGVmaW5pdGlvbnNDYWNoZS5yZWZyZXNoKFtdKTtcbiAgfVxuICBhc3luYyBsaXN0UHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9ucygpIHtcbiAgICBjb25zdCBjcnVkID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgdGhpcy5fYWRtaW5Qcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb25zQ2FjaGUuZ2V0T3JXYWl0KFtdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgIHJldHVybiBjcnVkLm1hcCgocCkgPT4gdGhpcy5fc2VydmVyUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uRnJvbUNydWQocCkpO1xuICB9XG4gIHVzZVByb2plY3RQZXJtaXNzaW9uRGVmaW5pdGlvbnMoKSB7XG4gICAgY29uc3QgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fYWRtaW5Qcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb25zQ2FjaGUsIFtdLCBcInVzZVByb2plY3RQZXJtaXNzaW9ucygpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBjcnVkLm1hcCgocCkgPT4gdGhpcy5fc2VydmVyUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uRnJvbUNydWQocCkpO1xuICAgIH0sIFtjcnVkXSk7XG4gIH1cbiAgdXNlU3ZpeFRva2VuKCkge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX3N2aXhUb2tlbkNhY2hlLCBbXSwgXCJ1c2VTdml4VG9rZW4oKVwiKTtcbiAgICByZXR1cm4gY3J1ZC50b2tlbjtcbiAgfVxuICBhc3luYyBfcmVmcmVzaFByb2plY3QoKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgc3VwZXIuX3JlZnJlc2hQcm9qZWN0KCksXG4gICAgICB0aGlzLl9hZG1pblByb2plY3RDYWNoZS5yZWZyZXNoKFtdKVxuICAgIF0pO1xuICB9XG4gIGFzeW5jIF9yZWZyZXNoSW50ZXJuYWxBcGlLZXlzKCkge1xuICAgIGF3YWl0IHRoaXMuX2ludGVybmFsQXBpS2V5c0NhY2hlLnJlZnJlc2goW10pO1xuICB9XG4gIGdldCBbc3RhY2tBcHBJbnRlcm5hbHNTeW1ib2xdKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdXBlcltzdGFja0FwcEludGVybmFsc1N5bWJvbF0sXG4gICAgICB1c2VNZXRyaWNzOiAoKSA9PiB7XG4gICAgICAgIHJldHVybiB1c2VBc3luY0NhY2hlKHRoaXMuX21ldHJpY3NDYWNoZSwgW10sIFwidXNlTWV0cmljcygpXCIpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2VuZFRlc3RFbWFpbChvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2Uuc2VuZFRlc3RFbWFpbCh7XG4gICAgICByZWNpcGllbnRfZW1haWw6IG9wdGlvbnMucmVjaXBpZW50RW1haWwsXG4gICAgICBlbWFpbF9jb25maWc6IHtcbiAgICAgICAgLi4ucGljayhvcHRpb25zLmVtYWlsQ29uZmlnLCBbXCJob3N0XCIsIFwicG9ydFwiLCBcInVzZXJuYW1lXCIsIFwicGFzc3dvcmRcIl0pLFxuICAgICAgICBzZW5kZXJfZW1haWw6IG9wdGlvbnMuZW1haWxDb25maWcuc2VuZGVyRW1haWwsXG4gICAgICAgIHNlbmRlcl9uYW1lOiBvcHRpb25zLmVtYWlsQ29uZmlnLnNlbmRlck5hbWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHsgZXJyb3JNZXNzYWdlOiByZXNwb25zZS5lcnJvcl9tZXNzYWdlID8/IHRocm93RXJyKFwiRW1haWwgdGVzdCBlcnJvciBub3Qgc3BlY2lmaWVkXCIpIH0pO1xuICAgIH1cbiAgfVxuICBhc3luYyBsaXN0U2VudEVtYWlscygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0U2VudEVtYWlscygpO1xuICAgIHJldHVybiByZXNwb25zZS5pdGVtcy5tYXAoKGVtYWlsKSA9PiAoe1xuICAgICAgaWQ6IGVtYWlsLmlkLFxuICAgICAgdG86IGVtYWlsLnRvID8/IFtdLFxuICAgICAgc3ViamVjdDogZW1haWwuc3ViamVjdCxcbiAgICAgIHJlY2lwaWVudDogZW1haWwudG8/LlswXSA/PyBcIlwiLFxuICAgICAgc2VudEF0OiBuZXcgRGF0ZShlbWFpbC5zZW50X2F0X21pbGxpcyksXG4gICAgICBlcnJvcjogZW1haWwuZXJyb3JcbiAgICB9KSk7XG4gIH1cbn07XG5leHBvcnQge1xuICBfU3RhY2tBZG1pbkFwcEltcGxJbmNvbXBsZXRlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRtaW4tYXBwLWltcGwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/admin-app-impl.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/client-app-impl.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/client-app-impl.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _StackClientAppImplIncomplete: () => (/* binding */ _StackClientAppImplIncomplete)\n/* harmony export */ });\n/* harmony import */ var _simplewebauthn_browser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @simplewebauthn/browser */ \"(app-pages-browser)/./node_modules/@simplewebauthn/browser/dist/bundle/index.js\");\n/* harmony import */ var _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stackframe/stack-shared */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/index.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_sessions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stackframe/stack-shared/dist/sessions */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/sessions.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_compile_time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/compile-time */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/compile-time.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/env */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/env.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_maps__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/maps */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/objects */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/promises */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/react */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/react.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/stores */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_strings__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/strings */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_urls__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/urls */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/urls.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_uuids__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/uuids */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! cookie */ \"(app-pages-browser)/./node_modules/cookie/index.js\");\n/* harmony import */ var _utils_url__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../utils/url */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/utils/url.js\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../auth */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/auth.js\");\n/* harmony import */ var _cookie__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../cookie */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/cookie.js\");\n/* harmony import */ var _api_keys__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../api-keys */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/api-keys/index.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../common */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/common.js\");\n/* harmony import */ var _contact_channels__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../contact-channels */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/contact-channels/index.js\");\n/* harmony import */ var _projects__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../projects */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/projects/index.js\");\n/* harmony import */ var _teams__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../teams */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/teams/index.js\");\n/* harmony import */ var _users__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../users */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/users/index.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./common */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/common.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _stackframe_stack_sc__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @stackframe/stack-sc */ \"(app-pages-browser)/./node_modules/@stackframe/stack-sc/dist/index.default.js\");\n// src/lib/stack-app/apps/implementations/client-app-impl.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar isReactServer2 = false;\nisReactServer2 = _stackframe_stack_sc__WEBPACK_IMPORTED_MODULE_18__.isReactServer;\nvar NextNavigation = (0,_stackframe_stack_shared_dist_utils_compile_time__WEBPACK_IMPORTED_MODULE_3__.scrambleDuringCompileTime)(next_navigation__WEBPACK_IMPORTED_MODULE_16__);\nvar allClientApps = /* @__PURE__ */ new Map();\nvar __StackClientAppImplIncomplete = class __StackClientAppImplIncomplete {\n  constructor(_options) {\n    this._options = _options;\n    this._uniqueIdentifier = void 0;\n    this.__DEMO_ENABLE_SLIGHT_FETCH_DELAY = false;\n    this._ownedAdminApps = new _stackframe_stack_shared_dist_utils_maps__WEBPACK_IMPORTED_MODULE_6__.DependenciesMap();\n    this._currentUserCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(async (session) => {\n      if (this.__DEMO_ENABLE_SLIGHT_FETCH_DELAY) {\n        await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_8__.wait)(2e3);\n      }\n      if (session.isKnownToBeInvalid()) {\n        return null;\n      }\n      return await this._interface.getClientUserByToken(session);\n    });\n    this._currentProjectCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCache)(async () => {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await this._interface.getClientProject());\n    });\n    this._ownedProjectsCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(async (session) => {\n      return await this._interface.listProjects(session);\n    });\n    this._currentUserPermissionsCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(async (session, [teamId, recursive]) => {\n      return await this._interface.listCurrentUserTeamPermissions({ teamId, recursive }, session);\n    });\n    this._currentUserProjectPermissionsCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(async (session, [recursive]) => {\n      return await this._interface.listCurrentUserProjectPermissions({ recursive }, session);\n    });\n    this._currentUserTeamsCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(async (session) => {\n      return await this._interface.listCurrentUserTeams(session);\n    });\n    this._currentUserOAuthConnectionAccessTokensCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(\n      async (session, [providerId, scope]) => {\n        try {\n          const result = await this._interface.createProviderAccessToken(providerId, scope || \"\", session);\n          return { accessToken: result.access_token };\n        } catch (err) {\n          if (!(err instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.OAuthConnectionDoesNotHaveRequiredScope || err instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.OAuthConnectionNotConnectedToUser)) {\n            throw err;\n          }\n        }\n        return null;\n      }\n    );\n    this._currentUserOAuthConnectionCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(\n      async (session, [providerId, scope, redirect]) => {\n        return await this._getUserOAuthConnectionCacheFn({\n          getUser: async () => _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await this._currentUserCache.getOrWait([session], \"write-only\")),\n          getOrWaitOAuthToken: async () => _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await this._currentUserOAuthConnectionAccessTokensCache.getOrWait([session, providerId, scope || \"\"], \"write-only\")),\n          useOAuthToken: () => (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(this._currentUserOAuthConnectionAccessTokensCache, [session, providerId, scope || \"\"], \"useOAuthToken\"),\n          providerId,\n          scope,\n          redirect,\n          session\n        });\n      }\n    );\n    this._teamMemberProfilesCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(\n      async (session, [teamId]) => {\n        return await this._interface.listTeamMemberProfiles({ teamId }, session);\n      }\n    );\n    this._teamInvitationsCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(\n      async (session, [teamId]) => {\n        return await this._interface.listTeamInvitations({ teamId }, session);\n      }\n    );\n    this._currentUserTeamProfileCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(\n      async (session, [teamId]) => {\n        return await this._interface.getTeamMemberProfile({ teamId, userId: \"me\" }, session);\n      }\n    );\n    this._clientContactChannelsCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(\n      async (session) => {\n        return await this._interface.listClientContactChannels(session);\n      }\n    );\n    this._userApiKeysCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(\n      async (session) => {\n        const results = await this._interface.listProjectApiKeys({ user_id: \"me\" }, session, \"client\");\n        return results;\n      }\n    );\n    this._teamApiKeysCache = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createCacheBySession)(\n      async (session, [teamId]) => {\n        const results = await this._interface.listProjectApiKeys({ team_id: teamId }, session, \"client\");\n        return results;\n      }\n    );\n    this._anonymousSignUpInProgress = null;\n    this._memoryTokenStore = (0,_common__WEBPACK_IMPORTED_MODULE_19__.createEmptyTokenStore)();\n    this._nextServerCookiesTokenStores = /* @__PURE__ */ new WeakMap();\n    this._requestTokenStores = /* @__PURE__ */ new WeakMap();\n    this._storedBrowserCookieTokenStore = null;\n    /**\n     * A map from token stores and session keys to sessions.\n     *\n     * This isn't just a map from session keys to sessions for two reasons:\n     *\n     * - So we can garbage-collect Session objects when the token store is garbage-collected\n     * - So different token stores are separated and don't leak information between each other, eg. if the same user sends two requests to the same server they should get a different session object\n     */\n    this._sessionsByTokenStoreAndSessionKey = /* @__PURE__ */ new WeakMap();\n    if (!__StackClientAppImplIncomplete.LazyStackAdminAppImpl.value) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"Admin app implementation not initialized. Did you import the _StackClientApp from stack-app/apps/implementations/index.ts? You can't import it directly from ./apps/implementations/client-app-impl.ts as that causes a circular dependency (see the comment at _LazyStackAdminAppImpl for more details).\");\n    }\n    if (\"interface\" in _options) {\n      this._interface = _options.interface;\n    } else {\n      this._interface = new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.StackClientInterface({\n        getBaseUrl: () => (0,_common__WEBPACK_IMPORTED_MODULE_19__.getBaseUrl)(_options.baseUrl),\n        extraRequestHeaders: _options.extraRequestHeaders ?? (0,_common__WEBPACK_IMPORTED_MODULE_19__.getDefaultExtraRequestHeaders)(),\n        projectId: _options.projectId ?? (0,_common__WEBPACK_IMPORTED_MODULE_19__.getDefaultProjectId)(),\n        clientVersion: _common__WEBPACK_IMPORTED_MODULE_19__.clientVersion,\n        publishableClientKey: _options.publishableClientKey ?? (0,_common__WEBPACK_IMPORTED_MODULE_19__.getDefaultPublishableClientKey)(),\n        prepareRequest: async () => {\n          await (0,_stackframe_stack_sc__WEBPACK_IMPORTED_MODULE_18__.cookies)?.();\n        }\n      });\n    }\n    this._tokenStoreInit = _options.tokenStore;\n    this._redirectMethod = _options.redirectMethod || \"none\";\n    this._redirectMethod = _options.redirectMethod || \"nextjs\";\n    this._urlOptions = _options.urls ?? {};\n    this._oauthScopesOnSignIn = _options.oauthScopesOnSignIn ?? {};\n    if (_options.uniqueIdentifier) {\n      this._uniqueIdentifier = _options.uniqueIdentifier;\n      this._initUniqueIdentifier();\n    }\n  }\n  async _createCookieHelper() {\n    if (this._tokenStoreInit === \"nextjs-cookie\" || this._tokenStoreInit === \"cookie\") {\n      return await (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.createCookieHelper)();\n    } else {\n      return await (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.createPlaceholderCookieHelper)();\n    }\n  }\n  async _getUserOAuthConnectionCacheFn(options) {\n    const user = await options.getUser();\n    let hasConnection = true;\n    if (!user || !user.oauth_providers.find((p) => p.id === options.providerId)) {\n      hasConnection = false;\n    }\n    const token = await options.getOrWaitOAuthToken();\n    if (!token) {\n      hasConnection = false;\n    }\n    if (!hasConnection && options.redirect) {\n      if (!options.session) {\n        throw new Error((0,_stackframe_stack_shared_dist_utils_strings__WEBPACK_IMPORTED_MODULE_12__.deindent)`\n          Cannot add new scopes to a user that is not a CurrentUser. Please ensure that you are calling this function on a CurrentUser object, or remove the 'or: redirect' option.\n\n          Often, you can solve this by calling this function in the browser instead, or by removing the 'or: redirect' option and dealing with the case where the user doesn't have enough permissions.\n        `);\n      }\n      await (0,_auth__WEBPACK_IMPORTED_MODULE_21__.addNewOAuthProviderOrScope)(\n        this._interface,\n        {\n          provider: options.providerId,\n          redirectUrl: this.urls.oauthCallback,\n          errorRedirectUrl: this.urls.error,\n          providerScope: (0,_stackframe_stack_shared_dist_utils_strings__WEBPACK_IMPORTED_MODULE_12__.mergeScopeStrings)(options.scope || \"\", (this._oauthScopesOnSignIn[options.providerId] ?? []).join(\" \"))\n        },\n        options.session\n      );\n      return await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_8__.neverResolve)();\n    } else if (!hasConnection) {\n      return null;\n    }\n    return {\n      id: options.providerId,\n      async getAccessToken() {\n        const result = await options.getOrWaitOAuthToken();\n        if (!result) {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"No access token available\");\n        }\n        return result;\n      },\n      useAccessToken() {\n        const result = options.useOAuthToken();\n        if (!result) {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"No access token available\");\n        }\n        return result;\n      }\n    };\n  }\n  _initUniqueIdentifier() {\n    if (!this._uniqueIdentifier) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"Unique identifier not initialized\");\n    }\n    if (allClientApps.has(this._uniqueIdentifier)) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"A Stack client app with the same unique identifier already exists\");\n    }\n    allClientApps.set(this._uniqueIdentifier, [this._options.checkString ?? \"default check string\", this]);\n  }\n  /**\n   * Cloudflare workers does not allow use of randomness on the global scope (on which the Stack app is probably\n   * initialized). For that reason, we generate the unique identifier lazily when it is first needed instead of in the\n   * constructor.\n   */\n  _getUniqueIdentifier() {\n    if (!this._uniqueIdentifier) {\n      this._uniqueIdentifier = (0,_stackframe_stack_shared_dist_utils_uuids__WEBPACK_IMPORTED_MODULE_14__.generateUuid)();\n      this._initUniqueIdentifier();\n    }\n    return this._uniqueIdentifier;\n  }\n  async _checkFeatureSupport(name, options) {\n    return await this._interface.checkFeatureSupport({ ...options, name });\n  }\n  _useCheckFeatureSupport(name, options) {\n    (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_8__.runAsynchronously)(this._checkFeatureSupport(name, options));\n    throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(`${name} is not currently supported. Please reach out to Stack support for more information.`);\n  }\n  get _refreshTokenCookieName() {\n    return `stack-refresh-${this.projectId}`;\n  }\n  _getTokensFromCookies(cookies2) {\n    const refreshToken = cookies2.refreshTokenCookie;\n    const accessTokenObject = cookies2.accessTokenCookie?.startsWith('[\"') ? JSON.parse(cookies2.accessTokenCookie) : null;\n    const accessToken = accessTokenObject && refreshToken === accessTokenObject[0] ? accessTokenObject[1] : null;\n    return {\n      refreshToken,\n      accessToken\n    };\n  }\n  get _accessTokenCookieName() {\n    return `stack-access`;\n  }\n  _getBrowserCookieTokenStore() {\n    if (!(0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_4__.isBrowserLike)()) {\n      throw new Error(\"Cannot use cookie token store on the server!\");\n    }\n    if (this._storedBrowserCookieTokenStore === null) {\n      const getCurrentValue = (old) => {\n        const tokens = this._getTokensFromCookies({\n          refreshTokenCookie: (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.getCookieClient)(this._refreshTokenCookieName) ?? (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.getCookieClient)(\"stack-refresh\"),\n          // keep old cookie name for backwards-compatibility\n          accessTokenCookie: (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.getCookieClient)(this._accessTokenCookieName)\n        });\n        return {\n          refreshToken: tokens.refreshToken,\n          accessToken: tokens.accessToken ?? (old?.refreshToken === tokens.refreshToken ? old.accessToken : null)\n        };\n      };\n      this._storedBrowserCookieTokenStore = new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_11__.Store(getCurrentValue(null));\n      let hasSucceededInWriting = true;\n      setInterval(() => {\n        if (hasSucceededInWriting) {\n          const oldValue = this._storedBrowserCookieTokenStore.get();\n          const currentValue = getCurrentValue(oldValue);\n          if (!(0,_stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_7__.deepPlainEquals)(currentValue, oldValue)) {\n            this._storedBrowserCookieTokenStore.set(currentValue);\n          }\n        }\n      }, 100);\n      this._storedBrowserCookieTokenStore.onChange((value) => {\n        try {\n          (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.setOrDeleteCookieClient)(this._refreshTokenCookieName, value.refreshToken, { maxAge: 60 * 60 * 24 * 365 });\n          (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.setOrDeleteCookieClient)(this._accessTokenCookieName, value.accessToken ? JSON.stringify([value.refreshToken, value.accessToken]) : null, { maxAge: 60 * 60 * 24 });\n          (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.deleteCookieClient)(\"stack-refresh\");\n          hasSucceededInWriting = true;\n        } catch (e) {\n          if (!(0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_4__.isBrowserLike)()) {\n            hasSucceededInWriting = false;\n          } else {\n            throw e;\n          }\n        }\n      });\n    }\n    return this._storedBrowserCookieTokenStore;\n  }\n  _getOrCreateTokenStore(cookieHelper, overrideTokenStoreInit) {\n    const tokenStoreInit = overrideTokenStoreInit === void 0 ? this._tokenStoreInit : overrideTokenStoreInit;\n    switch (tokenStoreInit) {\n      case \"cookie\": {\n        return this._getBrowserCookieTokenStore();\n      }\n      case \"nextjs-cookie\": {\n        if ((0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_4__.isBrowserLike)()) {\n          return this._getBrowserCookieTokenStore();\n        } else {\n          const tokens = this._getTokensFromCookies({\n            refreshTokenCookie: cookieHelper.get(this._refreshTokenCookieName) ?? cookieHelper.get(\"stack-refresh\"),\n            // keep old cookie name for backwards-compatibility\n            accessTokenCookie: cookieHelper.get(this._accessTokenCookieName)\n          });\n          const store = new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_11__.Store(tokens);\n          store.onChange((value) => {\n            (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_8__.runAsynchronously)(async () => {\n              await Promise.all([\n                (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.setOrDeleteCookie)(this._refreshTokenCookieName, value.refreshToken, { maxAge: 60 * 60 * 24 * 365, noOpIfServerComponent: true }),\n                (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.setOrDeleteCookie)(this._accessTokenCookieName, value.accessToken ? JSON.stringify([value.refreshToken, value.accessToken]) : null, { maxAge: 60 * 60 * 24, noOpIfServerComponent: true })\n              ]);\n            });\n          });\n          return store;\n        }\n      }\n      case \"memory\": {\n        return this._memoryTokenStore;\n      }\n      default: {\n        if (tokenStoreInit === null) {\n          return (0,_common__WEBPACK_IMPORTED_MODULE_19__.createEmptyTokenStore)();\n        } else if (typeof tokenStoreInit === \"object\" && \"headers\" in tokenStoreInit) {\n          if (this._requestTokenStores.has(tokenStoreInit)) return this._requestTokenStores.get(tokenStoreInit);\n          const stackAuthHeader = tokenStoreInit.headers.get(\"x-stack-auth\");\n          if (stackAuthHeader) {\n            let parsed2;\n            try {\n              parsed2 = JSON.parse(stackAuthHeader);\n              if (typeof parsed2 !== \"object\") throw new Error(\"x-stack-auth header must be a JSON object\");\n              if (parsed2 === null) throw new Error(\"x-stack-auth header must not be null\");\n            } catch (e) {\n              throw new Error(`Invalid x-stack-auth header: ${stackAuthHeader}`, { cause: e });\n            }\n            return this._getOrCreateTokenStore(cookieHelper, {\n              accessToken: parsed2.accessToken ?? null,\n              refreshToken: parsed2.refreshToken ?? null\n            });\n          }\n          const cookieHeader = tokenStoreInit.headers.get(\"cookie\");\n          const parsed = cookie__WEBPACK_IMPORTED_MODULE_15__.parse(cookieHeader || \"\");\n          const res = new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_11__.Store({\n            refreshToken: parsed[this._refreshTokenCookieName] || parsed[\"stack-refresh\"] || null,\n            // keep old cookie name for backwards-compatibility\n            accessToken: parsed[this._accessTokenCookieName] || null\n          });\n          this._requestTokenStores.set(tokenStoreInit, res);\n          return res;\n        } else if (\"accessToken\" in tokenStoreInit || \"refreshToken\" in tokenStoreInit) {\n          return new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_11__.Store({\n            refreshToken: tokenStoreInit.refreshToken,\n            accessToken: tokenStoreInit.accessToken\n          });\n        }\n        throw new Error(`Invalid token store ${tokenStoreInit}`);\n      }\n    }\n  }\n  _useTokenStore(overrideTokenStoreInit) {\n    (0,_stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_9__.suspendIfSsr)();\n    const cookieHelper = (0,_cookie__WEBPACK_IMPORTED_MODULE_20__.createBrowserCookieHelper)();\n    const tokenStore = this._getOrCreateTokenStore(cookieHelper, overrideTokenStoreInit);\n    return tokenStore;\n  }\n  _getSessionFromTokenStore(tokenStore) {\n    const tokenObj = tokenStore.get();\n    const sessionKey = _stackframe_stack_shared_dist_sessions__WEBPACK_IMPORTED_MODULE_2__.InternalSession.calculateSessionKey(tokenObj);\n    const existing = sessionKey ? this._sessionsByTokenStoreAndSessionKey.get(tokenStore)?.get(sessionKey) : null;\n    if (existing) return existing;\n    const session = this._interface.createSession({\n      refreshToken: tokenObj.refreshToken,\n      accessToken: tokenObj.accessToken\n    });\n    session.onAccessTokenChange((newAccessToken) => {\n      tokenStore.update((old) => ({\n        ...old,\n        accessToken: newAccessToken?.token ?? null\n      }));\n    });\n    session.onInvalidate(() => {\n      tokenStore.update((old) => ({\n        ...old,\n        accessToken: null,\n        refreshToken: null\n      }));\n    });\n    let sessionsBySessionKey = this._sessionsByTokenStoreAndSessionKey.get(tokenStore) ?? /* @__PURE__ */ new Map();\n    this._sessionsByTokenStoreAndSessionKey.set(tokenStore, sessionsBySessionKey);\n    sessionsBySessionKey.set(sessionKey, session);\n    return session;\n  }\n  async _getSession(overrideTokenStoreInit) {\n    const tokenStore = this._getOrCreateTokenStore(await this._createCookieHelper(), overrideTokenStoreInit);\n    return this._getSessionFromTokenStore(tokenStore);\n  }\n  _useSession(overrideTokenStoreInit) {\n    const tokenStore = this._useTokenStore(overrideTokenStoreInit);\n    const subscribe = (0,react__WEBPACK_IMPORTED_MODULE_17__.useCallback)((cb) => {\n      const { unsubscribe } = tokenStore.onChange(() => {\n        cb();\n      });\n      return unsubscribe;\n    }, [tokenStore]);\n    const getSnapshot = (0,react__WEBPACK_IMPORTED_MODULE_17__.useCallback)(() => this._getSessionFromTokenStore(tokenStore), [tokenStore]);\n    return react__WEBPACK_IMPORTED_MODULE_17___default().useSyncExternalStore(subscribe, getSnapshot, getSnapshot);\n  }\n  async _signInToAccountWithTokens(tokens) {\n    if (!(\"accessToken\" in tokens) || !(\"refreshToken\" in tokens)) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"Invalid tokens object; can't sign in with this\", { tokens });\n    }\n    const tokenStore = this._getOrCreateTokenStore(await this._createCookieHelper());\n    tokenStore.set(tokens);\n  }\n  _hasPersistentTokenStore(overrideTokenStoreInit) {\n    return (overrideTokenStoreInit !== void 0 ? overrideTokenStoreInit : this._tokenStoreInit) !== null;\n  }\n  _ensurePersistentTokenStore(overrideTokenStoreInit) {\n    if (!this._hasPersistentTokenStore(overrideTokenStoreInit)) {\n      throw new Error(\"Cannot call this function on a Stack app without a persistent token store. Make sure the tokenStore option on the constructor is set to a non-null value when initializing Stack.\\n\\nStack uses token stores to access access tokens of the current user. For example, on web frontends it is commonly the string value 'cookies' for cookie storage.\");\n    }\n  }\n  _isInternalProject() {\n    return this.projectId === \"internal\";\n  }\n  _ensureInternalProject() {\n    if (!this._isInternalProject()) {\n      throw new Error(\"Cannot call this function on a Stack app with a project ID other than 'internal'.\");\n    }\n  }\n  _clientProjectFromCrud(crud) {\n    return {\n      id: crud.id,\n      displayName: crud.display_name,\n      config: {\n        signUpEnabled: crud.config.sign_up_enabled,\n        credentialEnabled: crud.config.credential_enabled,\n        magicLinkEnabled: crud.config.magic_link_enabled,\n        passkeyEnabled: crud.config.passkey_enabled,\n        clientTeamCreationEnabled: crud.config.client_team_creation_enabled,\n        clientUserDeletionEnabled: crud.config.client_user_deletion_enabled,\n        allowTeamApiKeys: crud.config.allow_team_api_keys,\n        allowUserApiKeys: crud.config.allow_user_api_keys,\n        oauthProviders: crud.config.enabled_oauth_providers.map((p) => ({\n          id: p.id\n        }))\n      }\n    };\n  }\n  _clientPermissionFromCrud(crud) {\n    return {\n      id: crud.id\n    };\n  }\n  _clientTeamUserFromCrud(crud) {\n    return {\n      id: crud.user_id,\n      teamProfile: {\n        displayName: crud.display_name,\n        profileImageUrl: crud.profile_image_url\n      }\n    };\n  }\n  _clientTeamInvitationFromCrud(session, crud) {\n    return {\n      id: crud.id,\n      recipientEmail: crud.recipient_email,\n      expiresAt: new Date(crud.expires_at_millis),\n      revoke: async () => {\n        await this._interface.revokeTeamInvitation(crud.id, crud.team_id, session);\n        await this._teamInvitationsCache.refresh([session, crud.team_id]);\n      }\n    };\n  }\n  _baseApiKeyFromCrud(crud) {\n    return {\n      id: crud.id,\n      description: crud.description,\n      expiresAt: crud.expires_at_millis ? new Date(crud.expires_at_millis) : void 0,\n      manuallyRevokedAt: crud.manually_revoked_at_millis ? new Date(crud.manually_revoked_at_millis) : null,\n      createdAt: new Date(crud.created_at_millis),\n      ...crud.type === \"team\" ? { type: \"team\", teamId: crud.team_id } : { type: \"user\", userId: crud.user_id },\n      value: typeof crud.value === \"string\" ? crud.value : {\n        lastFour: crud.value.last_four\n      },\n      isValid: function() {\n        return this.whyInvalid() === null;\n      },\n      whyInvalid: function() {\n        if (this.manuallyRevokedAt) {\n          return \"manually-revoked\";\n        }\n        if (this.expiresAt && this.expiresAt < /* @__PURE__ */ new Date()) {\n          return \"expired\";\n        }\n        return null;\n      }\n    };\n  }\n  _clientApiKeyFromCrud(session, crud) {\n    return {\n      ...this._baseApiKeyFromCrud(crud),\n      async revoke() {\n        await this.update({ revoked: true });\n      },\n      update: async (options) => {\n        await this._interface.updateProjectApiKey(crud.type === \"team\" ? { team_id: crud.team_id } : { user_id: crud.user_id }, crud.id, options, session, \"client\");\n        if (crud.type === \"team\") {\n          await this._teamApiKeysCache.refresh([session, crud.team_id]);\n        } else {\n          await this._userApiKeysCache.refresh([session]);\n        }\n      }\n    };\n  }\n  _clientTeamFromCrud(crud, session) {\n    const app = this;\n    return {\n      id: crud.id,\n      displayName: crud.display_name,\n      profileImageUrl: crud.profile_image_url,\n      clientMetadata: crud.client_metadata,\n      clientReadOnlyMetadata: crud.client_read_only_metadata,\n      async inviteUser(options) {\n        await app._interface.sendTeamInvitation({\n          teamId: crud.id,\n          email: options.email,\n          session,\n          callbackUrl: options.callbackUrl ?? (0,_utils_url__WEBPACK_IMPORTED_MODULE_22__.constructRedirectUrl)(app.urls.teamInvitation, \"callbackUrl\")\n        });\n        await app._teamInvitationsCache.refresh([session, crud.id]);\n      },\n      async listUsers() {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await app._teamMemberProfilesCache.getOrWait([session, crud.id], \"write-only\"));\n        return result.map((crud2) => app._clientTeamUserFromCrud(crud2));\n      },\n      useUsers() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._teamMemberProfilesCache, [session, crud.id], \"team.useUsers()\");\n        return result.map((crud2) => app._clientTeamUserFromCrud(crud2));\n      },\n      async listInvitations() {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await app._teamInvitationsCache.getOrWait([session, crud.id], \"write-only\"));\n        return result.map((crud2) => app._clientTeamInvitationFromCrud(session, crud2));\n      },\n      useInvitations() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._teamInvitationsCache, [session, crud.id], \"team.useInvitations()\");\n        return result.map((crud2) => app._clientTeamInvitationFromCrud(session, crud2));\n      },\n      async update(data) {\n        await app._interface.updateTeam({ data: (0,_teams__WEBPACK_IMPORTED_MODULE_23__.teamUpdateOptionsToCrud)(data), teamId: crud.id }, session);\n        await app._currentUserTeamsCache.refresh([session]);\n      },\n      async delete() {\n        await app._interface.deleteTeam(crud.id, session);\n        await app._currentUserTeamsCache.refresh([session]);\n      },\n      useApiKeys() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._teamApiKeysCache, [session, crud.id], \"team.useApiKeys()\");\n        return result.map((crud2) => app._clientApiKeyFromCrud(session, crud2));\n      },\n      async listApiKeys() {\n        const results = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await app._teamApiKeysCache.getOrWait([session, crud.id], \"write-only\"));\n        return results.map((crud2) => app._clientApiKeyFromCrud(session, crud2));\n      },\n      async createApiKey(options) {\n        const result = await app._interface.createProjectApiKey(\n          await (0,_api_keys__WEBPACK_IMPORTED_MODULE_24__.apiKeyCreationOptionsToCrud)(\"team\", crud.id, options),\n          session,\n          \"client\"\n        );\n        await app._teamApiKeysCache.refresh([session, crud.id]);\n        return app._clientApiKeyFromCrud(session, result);\n      }\n    };\n  }\n  _clientContactChannelFromCrud(crud, session) {\n    const app = this;\n    return {\n      id: crud.id,\n      value: crud.value,\n      type: crud.type,\n      isVerified: crud.is_verified,\n      isPrimary: crud.is_primary,\n      usedForAuth: crud.used_for_auth,\n      async sendVerificationEmail(options) {\n        await app._interface.sendCurrentUserContactChannelVerificationEmail(\n          crud.id,\n          options?.callbackUrl || (0,_utils_url__WEBPACK_IMPORTED_MODULE_22__.constructRedirectUrl)(app.urls.emailVerification, \"callbackUrl\"),\n          session\n        );\n      },\n      async update(data) {\n        await app._interface.updateClientContactChannel(crud.id, (0,_contact_channels__WEBPACK_IMPORTED_MODULE_25__.contactChannelUpdateOptionsToCrud)(data), session);\n        await app._clientContactChannelsCache.refresh([session]);\n      },\n      async delete() {\n        await app._interface.deleteClientContactChannel(crud.id, session);\n        await app._clientContactChannelsCache.refresh([session]);\n      }\n    };\n  }\n  _createAuth(session) {\n    const app = this;\n    return {\n      _internalSession: session,\n      currentSession: {\n        async getTokens() {\n          const tokens = await session.getOrFetchLikelyValidTokens(2e4);\n          return {\n            accessToken: tokens?.accessToken.token ?? null,\n            refreshToken: tokens?.refreshToken?.token ?? null\n          };\n        }\n      },\n      async getAuthHeaders() {\n        return {\n          \"x-stack-auth\": JSON.stringify(await this.getAuthJson())\n        };\n      },\n      async getAuthJson() {\n        const tokens = await this.currentSession.getTokens();\n        return tokens;\n      },\n      async registerPasskey(options) {\n        const hostname = (await app._getCurrentUrl())?.hostname;\n        if (!hostname) {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"hostname must be provided if the Stack App does not have a redirect method\");\n        }\n        const initiationResult = await app._interface.initiatePasskeyRegistration({}, session);\n        if (initiationResult.status !== \"ok\") {\n          return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasskeyRegistrationFailed(\"Failed to get initiation options for passkey registration\"));\n        }\n        const { options_json, code } = initiationResult.data;\n        if (options_json.rp.id !== \"THIS_VALUE_WILL_BE_REPLACED.example.com\") {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(`Expected returned RP ID from server to equal sentinel, but found ${options_json.rp.id}`);\n        }\n        options_json.rp.id = hostname;\n        let attResp;\n        try {\n          attResp = await (0,_simplewebauthn_browser__WEBPACK_IMPORTED_MODULE_0__.startRegistration)({ optionsJSON: options_json });\n        } catch (error) {\n          if (error instanceof _simplewebauthn_browser__WEBPACK_IMPORTED_MODULE_0__.WebAuthnError) {\n            return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasskeyWebAuthnError(error.message, error.name));\n          } else {\n            (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.captureError)(\"passkey-registration-failed\", error);\n            return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasskeyRegistrationFailed(\"Failed to start passkey registration due to unknown error\"));\n          }\n        }\n        const registrationResult = await app._interface.registerPasskey({ credential: attResp, code }, session);\n        await app._refreshUser(session);\n        return registrationResult;\n      },\n      signOut(options) {\n        return app._signOut(session, options);\n      }\n    };\n  }\n  _editableTeamProfileFromCrud(crud, session) {\n    const app = this;\n    return {\n      displayName: crud.display_name,\n      profileImageUrl: crud.profile_image_url,\n      async update(update) {\n        await app._interface.updateTeamMemberProfile({\n          teamId: crud.team_id,\n          userId: crud.user_id,\n          profile: {\n            display_name: update.displayName,\n            profile_image_url: update.profileImageUrl\n          }\n        }, session);\n        await app._currentUserTeamProfileCache.refresh([session, crud.team_id]);\n      }\n    };\n  }\n  _createBaseUser(crud) {\n    return {\n      id: crud.id,\n      displayName: crud.display_name,\n      primaryEmail: crud.primary_email,\n      primaryEmailVerified: crud.primary_email_verified,\n      profileImageUrl: crud.profile_image_url,\n      signedUpAt: new Date(crud.signed_up_at_millis),\n      clientMetadata: crud.client_metadata,\n      clientReadOnlyMetadata: crud.client_read_only_metadata,\n      hasPassword: crud.has_password,\n      emailAuthEnabled: crud.auth_with_email,\n      otpAuthEnabled: crud.otp_auth_enabled,\n      oauthProviders: crud.oauth_providers,\n      passkeyAuthEnabled: crud.passkey_auth_enabled,\n      isMultiFactorRequired: crud.requires_totp_mfa,\n      isAnonymous: crud.is_anonymous,\n      toClientJson() {\n        return crud;\n      }\n    };\n  }\n  _createUserExtraFromCurrent(crud, session) {\n    const app = this;\n    async function getConnectedAccount(id, options) {\n      const scopeString = options?.scopes?.join(\" \");\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await app._currentUserOAuthConnectionCache.getOrWait([session, id, scopeString || \"\", options?.or === \"redirect\"], \"write-only\"));\n    }\n    function useConnectedAccount(id, options) {\n      const scopeString = options?.scopes?.join(\" \");\n      return (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._currentUserOAuthConnectionCache, [session, id, scopeString || \"\", options?.or === \"redirect\"], \"user.useConnectedAccount()\");\n    }\n    return {\n      async getActiveSessions() {\n        const sessions = await app._interface.listSessions(session);\n        return sessions.items.map((crud2) => app._clientSessionFromCrud(crud2));\n      },\n      async revokeSession(sessionId) {\n        await app._interface.deleteSession(sessionId, session);\n      },\n      setDisplayName(displayName) {\n        return this.update({ displayName });\n      },\n      setClientMetadata(metadata) {\n        return this.update({ clientMetadata: metadata });\n      },\n      async setSelectedTeam(team) {\n        await this.update({ selectedTeamId: team?.id ?? null });\n      },\n      getConnectedAccount,\n      useConnectedAccount,\n      // THIS_LINE_PLATFORM react-like\n      async getTeam(teamId) {\n        const teams = await this.listTeams();\n        return teams.find((t) => t.id === teamId) ?? null;\n      },\n      useTeam(teamId) {\n        const teams = this.useTeams();\n        return (0,react__WEBPACK_IMPORTED_MODULE_17__.useMemo)(() => {\n          return teams.find((t) => t.id === teamId) ?? null;\n        }, [teams, teamId]);\n      },\n      async listTeams() {\n        const teams = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await app._currentUserTeamsCache.getOrWait([session], \"write-only\"));\n        return teams.map((crud2) => app._clientTeamFromCrud(crud2, session));\n      },\n      useTeams() {\n        const teams = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._currentUserTeamsCache, [session], \"user.useTeams()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_17__.useMemo)(() => teams.map((crud2) => app._clientTeamFromCrud(crud2, session)), [teams]);\n      },\n      async createTeam(data) {\n        const crud2 = await app._interface.createClientTeam((0,_teams__WEBPACK_IMPORTED_MODULE_23__.teamCreateOptionsToCrud)(data, \"me\"), session);\n        await app._currentUserTeamsCache.refresh([session]);\n        await this.update({ selectedTeamId: crud2.id });\n        return app._clientTeamFromCrud(crud2, session);\n      },\n      async leaveTeam(team) {\n        await app._interface.leaveTeam(team.id, session);\n      },\n      async listPermissions(scopeOrOptions, options) {\n        if (scopeOrOptions && \"id\" in scopeOrOptions) {\n          const scope = scopeOrOptions;\n          const recursive = options?.recursive ?? true;\n          const permissions = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await app._currentUserPermissionsCache.getOrWait([session, scope.id, recursive], \"write-only\"));\n          return permissions.map((crud2) => app._clientPermissionFromCrud(crud2));\n        } else {\n          const opts = scopeOrOptions;\n          const recursive = opts?.recursive ?? true;\n          const permissions = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await app._currentUserProjectPermissionsCache.getOrWait([session, recursive], \"write-only\"));\n          return permissions.map((crud2) => app._clientPermissionFromCrud(crud2));\n        }\n      },\n      usePermissions(scopeOrOptions, options) {\n        if (scopeOrOptions && \"id\" in scopeOrOptions) {\n          const scope = scopeOrOptions;\n          const recursive = options?.recursive ?? true;\n          const permissions = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._currentUserPermissionsCache, [session, scope.id, recursive], \"user.usePermissions()\");\n          return (0,react__WEBPACK_IMPORTED_MODULE_17__.useMemo)(() => permissions.map((crud2) => app._clientPermissionFromCrud(crud2)), [permissions]);\n        } else {\n          const opts = scopeOrOptions;\n          const recursive = opts?.recursive ?? true;\n          const permissions = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._currentUserProjectPermissionsCache, [session, recursive], \"user.usePermissions()\");\n          return (0,react__WEBPACK_IMPORTED_MODULE_17__.useMemo)(() => permissions.map((crud2) => app._clientPermissionFromCrud(crud2)), [permissions]);\n        }\n      },\n      usePermission(scopeOrPermissionId, permissionId) {\n        if (scopeOrPermissionId && typeof scopeOrPermissionId !== \"string\") {\n          const scope = scopeOrPermissionId;\n          const permissions = this.usePermissions(scope);\n          return (0,react__WEBPACK_IMPORTED_MODULE_17__.useMemo)(() => permissions.find((p) => p.id === permissionId) ?? null, [permissions, permissionId]);\n        } else {\n          const pid = scopeOrPermissionId;\n          const permissions = this.usePermissions();\n          return (0,react__WEBPACK_IMPORTED_MODULE_17__.useMemo)(() => permissions.find((p) => p.id === pid) ?? null, [permissions, pid]);\n        }\n      },\n      async getPermission(scopeOrPermissionId, permissionId) {\n        if (scopeOrPermissionId && typeof scopeOrPermissionId !== \"string\") {\n          const scope = scopeOrPermissionId;\n          const permissions = await this.listPermissions(scope);\n          return permissions.find((p) => p.id === permissionId) ?? null;\n        } else {\n          const pid = scopeOrPermissionId;\n          const permissions = await this.listPermissions();\n          return permissions.find((p) => p.id === pid) ?? null;\n        }\n      },\n      async hasPermission(scopeOrPermissionId, permissionId) {\n        if (scopeOrPermissionId && typeof scopeOrPermissionId !== \"string\") {\n          const scope = scopeOrPermissionId;\n          return await this.getPermission(scope, permissionId) !== null;\n        } else {\n          const pid = scopeOrPermissionId;\n          return await this.getPermission(pid) !== null;\n        }\n      },\n      async update(update) {\n        return await app._updateClientUser(update, session);\n      },\n      async sendVerificationEmail(options) {\n        if (!crud.primary_email) {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"User does not have a primary email\");\n        }\n        return await app._interface.sendVerificationEmail(\n          crud.primary_email,\n          options?.callbackUrl ?? (0,_utils_url__WEBPACK_IMPORTED_MODULE_22__.constructRedirectUrl)(app.urls.emailVerification, \"callbackUrl\"),\n          session\n        );\n      },\n      async updatePassword(options) {\n        const result = await app._interface.updatePassword(options, session);\n        await app._currentUserCache.refresh([session]);\n        return result;\n      },\n      async setPassword(options) {\n        const result = await app._interface.setPassword(options, session);\n        await app._currentUserCache.refresh([session]);\n        return result;\n      },\n      selectedTeam: crud.selected_team && this._clientTeamFromCrud(crud.selected_team, session),\n      async getTeamProfile(team) {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await app._currentUserTeamProfileCache.getOrWait([session, team.id], \"write-only\"));\n        return app._editableTeamProfileFromCrud(result, session);\n      },\n      useTeamProfile(team) {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._currentUserTeamProfileCache, [session, team.id], \"user.useTeamProfile()\");\n        return app._editableTeamProfileFromCrud(result, session);\n      },\n      async delete() {\n        await app._interface.deleteCurrentUser(session);\n        session.markInvalid();\n      },\n      async listContactChannels() {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await app._clientContactChannelsCache.getOrWait([session], \"write-only\"));\n        return result.map((crud2) => app._clientContactChannelFromCrud(crud2, session));\n      },\n      useContactChannels() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._clientContactChannelsCache, [session], \"user.useContactChannels()\");\n        return result.map((crud2) => app._clientContactChannelFromCrud(crud2, session));\n      },\n      async createContactChannel(data) {\n        const crud2 = await app._interface.createClientContactChannel((0,_contact_channels__WEBPACK_IMPORTED_MODULE_25__.contactChannelCreateOptionsToCrud)(\"me\", data), session);\n        await app._clientContactChannelsCache.refresh([session]);\n        return app._clientContactChannelFromCrud(crud2, session);\n      },\n      useApiKeys() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(app._userApiKeysCache, [session], \"user.useApiKeys()\");\n        return result.map((crud2) => app._clientApiKeyFromCrud(session, crud2));\n      },\n      async listApiKeys() {\n        const results = await app._interface.listProjectApiKeys({ user_id: \"me\" }, session, \"client\");\n        return results.map((crud2) => app._clientApiKeyFromCrud(session, crud2));\n      },\n      async createApiKey(options) {\n        const result = await app._interface.createProjectApiKey(\n          await (0,_api_keys__WEBPACK_IMPORTED_MODULE_24__.apiKeyCreationOptionsToCrud)(\"user\", \"me\", options),\n          session,\n          \"client\"\n        );\n        await app._userApiKeysCache.refresh([session]);\n        return app._clientApiKeyFromCrud(session, result);\n      }\n    };\n  }\n  _createInternalUserExtra(session) {\n    const app = this;\n    this._ensureInternalProject();\n    return {\n      createProject(newProject) {\n        return app._createProject(session, newProject);\n      },\n      listOwnedProjects() {\n        return app._listOwnedProjects(session);\n      },\n      useOwnedProjects() {\n        return app._useOwnedProjects(session);\n      }\n    };\n  }\n  _currentUserFromCrud(crud, session) {\n    const currentUser = {\n      ...this._createBaseUser(crud),\n      ...this._createAuth(session),\n      ...this._createUserExtraFromCurrent(crud, session),\n      ...this._isInternalProject() ? this._createInternalUserExtra(session) : {}\n    };\n    Object.freeze(currentUser);\n    return currentUser;\n  }\n  _clientSessionFromCrud(crud) {\n    return {\n      id: crud.id,\n      userId: crud.user_id,\n      createdAt: new Date(crud.created_at),\n      isImpersonation: crud.is_impersonation,\n      lastUsedAt: crud.last_used_at ? new Date(crud.last_used_at) : void 0,\n      isCurrentSession: crud.is_current_session ?? false,\n      geoInfo: crud.last_used_at_end_user_ip_info\n    };\n  }\n  _getOwnedAdminApp(forProjectId, session) {\n    if (!this._ownedAdminApps.has([session, forProjectId])) {\n      this._ownedAdminApps.set([session, forProjectId], new __StackClientAppImplIncomplete.LazyStackAdminAppImpl.value({\n        baseUrl: this._interface.options.getBaseUrl(),\n        projectId: forProjectId,\n        tokenStore: null,\n        projectOwnerSession: session,\n        noAutomaticPrefetch: true\n      }));\n    }\n    return this._ownedAdminApps.get([session, forProjectId]);\n  }\n  get projectId() {\n    return this._interface.projectId;\n  }\n  async _isTrusted(url) {\n    return (0,_stackframe_stack_shared_dist_utils_urls__WEBPACK_IMPORTED_MODULE_13__.isRelative)(url);\n  }\n  get urls() {\n    return (0,_common__WEBPACK_IMPORTED_MODULE_19__.getUrls)(this._urlOptions);\n  }\n  async _getCurrentUrl() {\n    if (this._redirectMethod === \"none\") {\n      return null;\n    }\n    return new URL(window.location.href);\n  }\n  async _redirectTo(options) {\n    if (this._redirectMethod === \"none\") {\n      return;\n    } else if (isReactServer2 && this._redirectMethod === \"nextjs\") {\n      NextNavigation.redirect(options.url.toString(), options.replace ? NextNavigation.RedirectType.replace : NextNavigation.RedirectType.push);\n    } else if (typeof this._redirectMethod === \"object\" && this._redirectMethod.navigate) {\n      this._redirectMethod.navigate(options.url.toString());\n    } else {\n      if (options.replace) {\n        window.location.replace(options.url);\n      } else {\n        window.location.assign(options.url);\n      }\n    }\n    await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_8__.wait)(2e3);\n  }\n  useNavigate() {\n    if (typeof this._redirectMethod === \"object\") {\n      return this._redirectMethod.useNavigate();\n    } else if (this._redirectMethod === \"window\") {\n      return (to) => window.location.assign(to);\n    } else if (this._redirectMethod === \"nextjs\") {\n      const router = NextNavigation.useRouter();\n      return (to) => router.push(to);\n    } else {\n      return (to) => {\n      };\n    }\n  }\n  async _redirectIfTrusted(url, options) {\n    if (!await this._isTrusted(url)) {\n      throw new Error(`Redirect URL ${url} is not trusted; should be relative.`);\n    }\n    return await this._redirectTo({ url, ...options });\n  }\n  async _redirectToHandler(handlerName, options) {\n    let url = this.urls[handlerName];\n    if (!url) {\n      throw new Error(`No URL for handler name ${handlerName}`);\n    }\n    if (!options?.noRedirectBack) {\n      if (handlerName === \"afterSignIn\" || handlerName === \"afterSignUp\") {\n        if (isReactServer2 || typeof window === \"undefined\") {\n          try {\n            await this._checkFeatureSupport(\"rsc-handler-\" + handlerName, {});\n          } catch (e) {\n          }\n        } else {\n          const queryParams = new URLSearchParams(window.location.search);\n          url = queryParams.get(\"after_auth_return_to\") || url;\n        }\n      } else if (handlerName === \"signIn\" || handlerName === \"signUp\") {\n        if (isReactServer2 || typeof window === \"undefined\") {\n          try {\n            await this._checkFeatureSupport(\"rsc-handler-\" + handlerName, {});\n          } catch (e) {\n          }\n        } else {\n          const currentUrl = new URL(window.location.href);\n          const nextUrl = new URL(url, currentUrl);\n          if (currentUrl.searchParams.has(\"after_auth_return_to\")) {\n            nextUrl.searchParams.set(\"after_auth_return_to\", currentUrl.searchParams.get(\"after_auth_return_to\"));\n          } else if (currentUrl.protocol === nextUrl.protocol && currentUrl.host === nextUrl.host) {\n            nextUrl.searchParams.set(\"after_auth_return_to\", (0,_stackframe_stack_shared_dist_utils_urls__WEBPACK_IMPORTED_MODULE_13__.getRelativePart)(currentUrl));\n          }\n          url = (0,_stackframe_stack_shared_dist_utils_urls__WEBPACK_IMPORTED_MODULE_13__.getRelativePart)(nextUrl);\n        }\n      }\n    }\n    await this._redirectIfTrusted(url, options);\n  }\n  async redirectToSignIn(options) {\n    return await this._redirectToHandler(\"signIn\", options);\n  }\n  async redirectToSignUp(options) {\n    return await this._redirectToHandler(\"signUp\", options);\n  }\n  async redirectToSignOut(options) {\n    return await this._redirectToHandler(\"signOut\", options);\n  }\n  async redirectToEmailVerification(options) {\n    return await this._redirectToHandler(\"emailVerification\", options);\n  }\n  async redirectToPasswordReset(options) {\n    return await this._redirectToHandler(\"passwordReset\", options);\n  }\n  async redirectToForgotPassword(options) {\n    return await this._redirectToHandler(\"forgotPassword\", options);\n  }\n  async redirectToHome(options) {\n    return await this._redirectToHandler(\"home\", options);\n  }\n  async redirectToOAuthCallback(options) {\n    return await this._redirectToHandler(\"oauthCallback\", options);\n  }\n  async redirectToMagicLinkCallback(options) {\n    return await this._redirectToHandler(\"magicLinkCallback\", options);\n  }\n  async redirectToAfterSignIn(options) {\n    return await this._redirectToHandler(\"afterSignIn\", options);\n  }\n  async redirectToAfterSignUp(options) {\n    return await this._redirectToHandler(\"afterSignUp\", options);\n  }\n  async redirectToAfterSignOut(options) {\n    return await this._redirectToHandler(\"afterSignOut\", options);\n  }\n  async redirectToAccountSettings(options) {\n    return await this._redirectToHandler(\"accountSettings\", options);\n  }\n  async redirectToError(options) {\n    return await this._redirectToHandler(\"error\", options);\n  }\n  async redirectToTeamInvitation(options) {\n    return await this._redirectToHandler(\"teamInvitation\", options);\n  }\n  async sendForgotPasswordEmail(email, options) {\n    return await this._interface.sendForgotPasswordEmail(email, options?.callbackUrl ?? (0,_utils_url__WEBPACK_IMPORTED_MODULE_22__.constructRedirectUrl)(this.urls.passwordReset, \"callbackUrl\"));\n  }\n  async sendMagicLinkEmail(email, options) {\n    return await this._interface.sendMagicLinkEmail(email, options?.callbackUrl ?? (0,_utils_url__WEBPACK_IMPORTED_MODULE_22__.constructRedirectUrl)(this.urls.magicLinkCallback, \"callbackUrl\"));\n  }\n  async resetPassword(options) {\n    return await this._interface.resetPassword(options);\n  }\n  async verifyPasswordResetCode(code) {\n    return await this._interface.verifyPasswordResetCode(code);\n  }\n  async verifyTeamInvitationCode(code) {\n    return await this._interface.acceptTeamInvitation({\n      type: \"check\",\n      code,\n      session: await this._getSession()\n    });\n  }\n  async acceptTeamInvitation(code) {\n    const result = await this._interface.acceptTeamInvitation({\n      type: \"use\",\n      code,\n      session: await this._getSession()\n    });\n    if (result.status === \"ok\") {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.ok(void 0);\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(result.error);\n    }\n  }\n  async getTeamInvitationDetails(code) {\n    const result = await this._interface.acceptTeamInvitation({\n      type: \"details\",\n      code,\n      session: await this._getSession()\n    });\n    if (result.status === \"ok\") {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.ok({ teamDisplayName: result.data.team_display_name });\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(result.error);\n    }\n  }\n  async verifyEmail(code) {\n    const result = await this._interface.verifyEmail(code);\n    await this._currentUserCache.refresh([await this._getSession()]);\n    await this._clientContactChannelsCache.refresh([await this._getSession()]);\n    return result;\n  }\n  async getUser(options) {\n    this._ensurePersistentTokenStore(options?.tokenStore);\n    const session = await this._getSession(options?.tokenStore);\n    let crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await this._currentUserCache.getOrWait([session], \"write-only\"));\n    if (crud?.is_anonymous && options?.or !== \"anonymous\" && options?.or !== \"anonymous-if-exists\") {\n      crud = null;\n    }\n    if (crud === null) {\n      switch (options?.or) {\n        case \"redirect\": {\n          await this.redirectToSignIn({ replace: true });\n          break;\n        }\n        case \"throw\": {\n          throw new Error(\"User is not signed in but getUser was called with { or: 'throw' }\");\n        }\n        case \"anonymous\": {\n          const tokens = await this._signUpAnonymously();\n          return await this.getUser({ tokenStore: tokens, or: \"anonymous-if-exists\" }) ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.throwErr)(\"Something went wrong while signing up anonymously\");\n        }\n        case void 0:\n        case \"anonymous-if-exists\":\n        case \"return-null\": {\n          return null;\n        }\n      }\n    }\n    return crud && this._currentUserFromCrud(crud, session);\n  }\n  useUser(options) {\n    this._ensurePersistentTokenStore(options?.tokenStore);\n    const session = this._useSession(options?.tokenStore);\n    let crud = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(this._currentUserCache, [session], \"useUser()\");\n    if (crud?.is_anonymous && options?.or !== \"anonymous\" && options?.or !== \"anonymous-if-exists\") {\n      crud = null;\n    }\n    if (crud === null) {\n      switch (options?.or) {\n        case \"redirect\": {\n          (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_8__.runAsynchronously)(this.redirectToSignIn({ replace: true }));\n          (0,_stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_9__.suspend)();\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"suspend should never return\");\n        }\n        case \"throw\": {\n          throw new Error(\"User is not signed in but useUser was called with { or: 'throw' }\");\n        }\n        case \"anonymous\": {\n          (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_8__.runAsynchronously)(async () => {\n            await this._signUpAnonymously();\n            if (typeof window !== \"undefined\") {\n              window.location.reload();\n            }\n          });\n          (0,_stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_9__.suspend)();\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"suspend should never return\");\n        }\n        case void 0:\n        case \"anonymous-if-exists\":\n        case \"return-null\": {\n        }\n      }\n    }\n    return (0,react__WEBPACK_IMPORTED_MODULE_17__.useMemo)(() => {\n      return crud && this._currentUserFromCrud(crud, session);\n    }, [crud, session, options?.or]);\n  }\n  async _updateClientUser(update, session) {\n    const res = await this._interface.updateClientUser((0,_users__WEBPACK_IMPORTED_MODULE_26__.userUpdateOptionsToCrud)(update), session);\n    await this._refreshUser(session);\n    return res;\n  }\n  async signInWithOAuth(provider) {\n    if (typeof window === \"undefined\") {\n      throw new Error(\"signInWithOAuth can currently only be called in a browser environment\");\n    }\n    this._ensurePersistentTokenStore();\n    await (0,_auth__WEBPACK_IMPORTED_MODULE_21__.signInWithOAuth)(\n      this._interface,\n      {\n        provider,\n        redirectUrl: this.urls.oauthCallback,\n        errorRedirectUrl: this.urls.error,\n        providerScope: this._oauthScopesOnSignIn[provider]?.join(\" \")\n      }\n    );\n  }\n  /**\n   * @deprecated\n   * TODO remove\n   */\n  async _experimentalMfa(error, session) {\n    const otp = prompt(\"Please enter the six-digit TOTP code from your authenticator app.\");\n    if (!otp) {\n      throw new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidTotpCode();\n    }\n    return await this._interface.totpMfa(\n      error.details?.attempt_code ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.throwErr)(\"attempt code missing\"),\n      otp,\n      session\n    );\n  }\n  /**\n   * @deprecated\n   * TODO remove\n   */\n  async _catchMfaRequiredError(callback) {\n    try {\n      return await callback();\n    } catch (e) {\n      if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.MultiFactorAuthenticationRequired) {\n        return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.ok(await this._experimentalMfa(e, await this._getSession()));\n      }\n      throw e;\n    }\n  }\n  async signInWithCredential(options) {\n    this._ensurePersistentTokenStore();\n    const session = await this._getSession();\n    let result;\n    try {\n      result = await this._catchMfaRequiredError(async () => {\n        return await this._interface.signInWithCredential(options.email, options.password, session);\n      });\n    } catch (e) {\n      if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidTotpCode) {\n        return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(e);\n      }\n      throw e;\n    }\n    if (result.status === \"ok\") {\n      await this._signInToAccountWithTokens(result.data);\n      if (!options.noRedirect) {\n        await this.redirectToAfterSignIn({ replace: true });\n      }\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.ok(void 0);\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(result.error);\n    }\n  }\n  async signUpWithCredential(options) {\n    this._ensurePersistentTokenStore();\n    const session = await this._getSession();\n    const emailVerificationRedirectUrl = options.verificationCallbackUrl ?? (0,_utils_url__WEBPACK_IMPORTED_MODULE_22__.constructRedirectUrl)(this.urls.emailVerification, \"verificationCallbackUrl\");\n    const result = await this._interface.signUpWithCredential(\n      options.email,\n      options.password,\n      emailVerificationRedirectUrl,\n      session\n    );\n    if (result.status === \"ok\") {\n      await this._signInToAccountWithTokens(result.data);\n      if (!options.noRedirect) {\n        await this.redirectToAfterSignUp({ replace: true });\n      }\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.ok(void 0);\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(result.error);\n    }\n  }\n  async _signUpAnonymously() {\n    this._ensurePersistentTokenStore();\n    if (!this._anonymousSignUpInProgress) {\n      this._anonymousSignUpInProgress = (async () => {\n        this._ensurePersistentTokenStore();\n        const session = await this._getSession();\n        const result = await this._interface.signUpAnonymously(session);\n        if (result.status === \"ok\") {\n          await this._signInToAccountWithTokens(result.data);\n        } else {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"signUpAnonymously() should never return an error\");\n        }\n        this._anonymousSignUpInProgress = null;\n        return result.data;\n      })();\n    }\n    return await this._anonymousSignUpInProgress;\n  }\n  async signInWithMagicLink(code, options) {\n    this._ensurePersistentTokenStore();\n    let result;\n    try {\n      result = await this._catchMfaRequiredError(async () => {\n        return await this._interface.signInWithMagicLink(code);\n      });\n    } catch (e) {\n      if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidTotpCode) {\n        return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(e);\n      }\n      throw e;\n    }\n    if (result.status === \"ok\") {\n      await this._signInToAccountWithTokens(result.data);\n      if (!options?.noRedirect) {\n        if (result.data.newUser) {\n          await this.redirectToAfterSignUp({ replace: true });\n        } else {\n          await this.redirectToAfterSignIn({ replace: true });\n        }\n      }\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.ok(void 0);\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(result.error);\n    }\n  }\n  async signInWithPasskey() {\n    this._ensurePersistentTokenStore();\n    const session = await this._getSession();\n    let result;\n    try {\n      result = await this._catchMfaRequiredError(async () => {\n        const initiationResult = await this._interface.initiatePasskeyAuthentication({}, session);\n        if (initiationResult.status !== \"ok\") {\n          return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasskeyAuthenticationFailed(\"Failed to get initiation options for passkey authentication\"));\n        }\n        const { options_json, code } = initiationResult.data;\n        if (options_json.rpId !== \"THIS_VALUE_WILL_BE_REPLACED.example.com\") {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(`Expected returned RP ID from server to equal sentinel, but found ${options_json.rpId}`);\n        }\n        options_json.rpId = window.location.hostname;\n        const authentication_response = await (0,_simplewebauthn_browser__WEBPACK_IMPORTED_MODULE_0__.startAuthentication)({ optionsJSON: options_json });\n        return await this._interface.signInWithPasskey({ authentication_response, code });\n      });\n    } catch (error) {\n      if (error instanceof _simplewebauthn_browser__WEBPACK_IMPORTED_MODULE_0__.WebAuthnError) {\n        return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasskeyWebAuthnError(error.message, error.name));\n      } else {\n        return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasskeyAuthenticationFailed(\"Failed to sign in with passkey\"));\n      }\n    }\n    if (result.status === \"ok\") {\n      await this._signInToAccountWithTokens(result.data);\n      await this.redirectToAfterSignIn({ replace: true });\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.ok(void 0);\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.error(result.error);\n    }\n  }\n  async callOAuthCallback() {\n    if (typeof window === \"undefined\") {\n      throw new Error(\"callOAuthCallback can currently only be called in a browser environment\");\n    }\n    this._ensurePersistentTokenStore();\n    let result;\n    try {\n      result = await this._catchMfaRequiredError(async () => {\n        return await (0,_auth__WEBPACK_IMPORTED_MODULE_21__.callOAuthCallback)(this._interface, this.urls.oauthCallback);\n      });\n    } catch (e) {\n      if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidTotpCode) {\n        alert(\"Invalid TOTP code. Please try signing in again.\");\n        return false;\n      } else {\n        throw e;\n      }\n    }\n    if (result.status === \"ok\" && result.data) {\n      await this._signInToAccountWithTokens(result.data);\n      if (\"afterCallbackRedirectUrl\" in result.data && result.data.afterCallbackRedirectUrl) {\n        await this._redirectTo({ url: result.data.afterCallbackRedirectUrl, replace: true });\n        return true;\n      } else if (result.data.newUser) {\n        await this.redirectToAfterSignUp({ replace: true });\n        return true;\n      } else {\n        await this.redirectToAfterSignIn({ replace: true });\n        return true;\n      }\n    }\n    return false;\n  }\n  async _signOut(session, options) {\n    await _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_11__.storeLock.withWriteLock(async () => {\n      await this._interface.signOut(session);\n      if (options?.redirectUrl) {\n        await this._redirectTo({ url: options.redirectUrl, replace: true });\n      } else {\n        await this.redirectToAfterSignOut();\n      }\n    });\n  }\n  async signOut(options) {\n    const user = await this.getUser();\n    if (user) {\n      await user.signOut(options);\n    }\n  }\n  async getProject() {\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await this._currentProjectCache.getOrWait([], \"write-only\"));\n    return this._clientProjectFromCrud(crud);\n  }\n  useProject() {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(this._currentProjectCache, [], \"useProject()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_17__.useMemo)(() => this._clientProjectFromCrud(crud), [crud]);\n  }\n  async _listOwnedProjects(session) {\n    this._ensureInternalProject();\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.orThrow(await this._ownedProjectsCache.getOrWait([session], \"write-only\"));\n    return crud.map((j) => this._getOwnedAdminApp(j.id, session)._adminOwnedProjectFromCrud(\n      j,\n      () => this._refreshOwnedProjects(session)\n    ));\n  }\n  _useOwnedProjects(session) {\n    this._ensureInternalProject();\n    const projects = (0,_common__WEBPACK_IMPORTED_MODULE_19__.useAsyncCache)(this._ownedProjectsCache, [session], \"useOwnedProjects()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_17__.useMemo)(() => projects.map((j) => this._getOwnedAdminApp(j.id, session)._adminOwnedProjectFromCrud(\n      j,\n      () => this._refreshOwnedProjects(session)\n    )), [projects]);\n  }\n  async _createProject(session, newProject) {\n    this._ensureInternalProject();\n    const crud = await this._interface.createProject((0,_projects__WEBPACK_IMPORTED_MODULE_27__.adminProjectCreateOptionsToCrud)(newProject), session);\n    const res = this._getOwnedAdminApp(crud.id, session)._adminOwnedProjectFromCrud(\n      crud,\n      () => this._refreshOwnedProjects(session)\n    );\n    await this._refreshOwnedProjects(session);\n    return res;\n  }\n  async _refreshUser(session) {\n    await this._refreshSession(session);\n  }\n  async _refreshSession(session) {\n    await this._currentUserCache.refresh([session]);\n  }\n  async _refreshUsers() {\n  }\n  async _refreshProject() {\n    await this._currentProjectCache.refresh([]);\n  }\n  async _refreshOwnedProjects(session) {\n    await this._ownedProjectsCache.refresh([session]);\n  }\n  static get [_common__WEBPACK_IMPORTED_MODULE_28__.stackAppInternalsSymbol]() {\n    return {\n      fromClientJson: (json) => {\n        const providedCheckString = JSON.stringify((0,_stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_7__.omit)(json, [\n          /* none currently */\n        ]));\n        const existing = allClientApps.get(json.uniqueIdentifier);\n        if (existing) {\n          const [existingCheckString, clientApp] = existing;\n          if (existingCheckString !== providedCheckString) {\n            throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"The provided app JSON does not match the configuration of the existing client app with the same unique identifier\", { providedObj: json, existingString: existingCheckString });\n          }\n          return clientApp;\n        }\n        return new __StackClientAppImplIncomplete({\n          ...json,\n          checkString: providedCheckString\n        });\n      }\n    };\n  }\n  get [_common__WEBPACK_IMPORTED_MODULE_28__.stackAppInternalsSymbol]() {\n    return {\n      toClientJson: () => {\n        if (!(\"publishableClientKey\" in this._interface.options)) {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"Cannot serialize to JSON from an application without a publishable client key\");\n        }\n        if (typeof this._redirectMethod !== \"string\") {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_5__.StackAssertionError(\"Cannot serialize to JSON from an application with a non-string redirect method\");\n        }\n        return {\n          baseUrl: this._options.baseUrl,\n          projectId: this.projectId,\n          publishableClientKey: this._interface.options.publishableClientKey,\n          tokenStore: this._tokenStoreInit,\n          urls: this._urlOptions,\n          oauthScopesOnSignIn: this._oauthScopesOnSignIn,\n          uniqueIdentifier: this._getUniqueIdentifier(),\n          redirectMethod: this._redirectMethod,\n          extraRequestHeaders: this._options.extraRequestHeaders\n        };\n      },\n      setCurrentUser: (userJsonPromise) => {\n        (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_8__.runAsynchronously)(async () => {\n          await this._currentUserCache.forceSetCachedValueAsync([await this._getSession()], _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_10__.Result.fromPromise(userJsonPromise));\n        });\n      },\n      sendRequest: async (path, requestOptions, requestType = \"client\") => {\n        return await this._interface.sendClientRequest(path, requestOptions, await this._getSession(), requestType);\n      }\n    };\n  }\n};\n/**\n * There is a circular dependency between the admin app and the client app, as the former inherits from the latter and\n * the latter needs to use the former when creating a new instance of an internal project.\n *\n * To break it, we set the admin app here lazily instead of importing it directly. This variable is set by ./index.ts,\n * which imports both this file and ./admin-app-impl.ts.\n */\n__StackClientAppImplIncomplete.LazyStackAdminAppImpl = { value: void 0 };\nvar _StackClientAppImplIncomplete = __StackClientAppImplIncomplete;\n\n//# sourceMappingURL=client-app-impl.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2FwcHMvaW1wbGVtZW50YXRpb25zL2NsaWVudC1hcHAtaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDZ0c7QUFDbkI7QUFDSjtBQUNvQjtBQUNyQjtBQUNpQztBQUM5QjtBQUNTO0FBQ2lCO0FBQ25CO0FBQ2I7QUFDUztBQUNZO0FBQ0g7QUFDZDtBQUN4QztBQUM0QjtBQUNrQztBQUNpRztBQUNuSTtBQUNOO0FBQ3VEO0FBQzdDO0FBQ2M7QUFDekI7QUFDc0o7QUFDL0k7QUFDVDtBQUNYO0FBQ0U7QUFDSTtBQUMvQztBQUNBLGlCQUFpQixnRUFBZ0I7QUFDakMscUJBQXFCLDJHQUF5QixDQUFDLDZDQUF5QjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscUZBQWU7QUFDOUMsNkJBQTZCLDhEQUFvQjtBQUNqRDtBQUNBLGNBQWMsa0ZBQUk7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxnQ0FBZ0MscURBQVc7QUFDM0MsYUFBYSxnRkFBTTtBQUNuQixLQUFLO0FBQ0wsK0JBQStCLDhEQUFvQjtBQUNuRDtBQUNBLEtBQUs7QUFDTCx3Q0FBd0MsOERBQW9CO0FBQzVELG9FQUFvRSxtQkFBbUI7QUFDdkYsS0FBSztBQUNMLCtDQUErQyw4REFBb0I7QUFDbkUsdUVBQXVFLFdBQVc7QUFDbEYsS0FBSztBQUNMLGtDQUFrQyw4REFBb0I7QUFDdEQ7QUFDQSxLQUFLO0FBQ0wsd0RBQXdELDhEQUFvQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsVUFBVTtBQUNWLCtCQUErQixpRUFBVywyREFBMkQsaUVBQVc7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDhEQUFvQjtBQUNoRTtBQUNBO0FBQ0EsK0JBQStCLGdGQUFNO0FBQ3JDLDJDQUEyQyxnRkFBTTtBQUNqRCwrQkFBK0IsdURBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9DQUFvQyw4REFBb0I7QUFDeEQ7QUFDQSw4REFBOEQsUUFBUTtBQUN0RTtBQUNBO0FBQ0EsaUNBQWlDLDhEQUFvQjtBQUNyRDtBQUNBLDJEQUEyRCxRQUFRO0FBQ25FO0FBQ0E7QUFDQSx3Q0FBd0MsOERBQW9CO0FBQzVEO0FBQ0EsNERBQTRELHNCQUFzQjtBQUNsRjtBQUNBO0FBQ0EsdUNBQXVDLDhEQUFvQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw4REFBb0I7QUFDakQ7QUFDQSxtRUFBbUUsZUFBZTtBQUNsRjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOERBQW9CO0FBQ2pEO0FBQ0EsbUVBQW1FLGlCQUFpQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwrREFBcUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkZBQW1CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTiw0QkFBNEIsMEVBQW9CO0FBQ2hELDBCQUEwQixvREFBVTtBQUNwQyw2REFBNkQsdUVBQTZCO0FBQzFGLHlDQUF5Qyw2REFBbUI7QUFDNUQscUJBQXFCO0FBQ3JCLCtEQUErRCx3RUFBOEI7QUFDN0Y7QUFDQSxnQkFBZ0IsOERBQU87QUFDdkI7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNERBQWtCO0FBQ3JDLE1BQU07QUFDTixtQkFBbUIsdUVBQTZCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0ZBQVE7QUFDaEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrRUFBMEI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwrRkFBaUI7QUFDMUMsU0FBUztBQUNUO0FBQ0E7QUFDQSxtQkFBbUIsMEZBQVk7QUFDL0IsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJGQUFtQjtBQUN2QztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwyRkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkZBQW1CO0FBQ25DO0FBQ0E7QUFDQSxnQkFBZ0IsMkZBQW1CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHdGQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsa0JBQWtCO0FBQ3pFO0FBQ0E7QUFDQSxJQUFJLCtGQUFpQjtBQUNyQixjQUFjLDJGQUFtQixJQUFJLE1BQU07QUFDM0M7QUFDQTtBQUNBLDRCQUE0QixlQUFlO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNGQUFhO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIseURBQWUsa0NBQWtDLHlEQUFlO0FBQzlGO0FBQ0EsNkJBQTZCLHlEQUFlO0FBQzVDLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDhFQUFLO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDRGQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsVUFBVSxpRUFBdUIscURBQXFELDRCQUE0QjtBQUNsSCxVQUFVLGlFQUF1QixvSEFBb0gsc0JBQXNCO0FBQzNLLFVBQVUsNERBQWtCO0FBQzVCO0FBQ0EsVUFBVTtBQUNWLGVBQWUsc0ZBQWE7QUFDNUI7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzRkFBYTtBQUN6QjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCw0QkFBNEIsOEVBQUs7QUFDakM7QUFDQSxZQUFZLCtGQUFpQjtBQUM3QjtBQUNBLGdCQUFnQiwyREFBaUIscURBQXFELHlEQUF5RDtBQUMvSSxnQkFBZ0IsMkRBQWlCLG9IQUFvSCxtREFBbUQ7QUFDeE07QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQXFCO0FBQ3RDLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLDhEQUE4RCxnQkFBZ0IsS0FBSyxVQUFVO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx5QkFBeUIsMENBQVk7QUFDckMsMEJBQTBCLDhFQUFLO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsVUFBVTtBQUNWLHFCQUFxQiw4RUFBSztBQUMxQjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsK0NBQStDLGVBQWU7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVGQUFZO0FBQ2hCLHlCQUF5QixtRUFBeUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtRkFBZTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG1EQUFXO0FBQ2pDLGNBQWMsY0FBYztBQUM1QjtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTCx3QkFBd0IsbURBQVc7QUFDbkMsV0FBVyxrRUFBMEI7QUFDckM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDJGQUFtQix5QkFBeUIsNEJBQTRCLFFBQVE7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHFDQUFxQyxJQUFJLG9DQUFvQztBQUMvRztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGVBQWU7QUFDM0MsT0FBTztBQUNQO0FBQ0EsMkVBQTJFLHdCQUF3QixJQUFJLHVCQUF1QjtBQUM5SDtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxpRUFBb0I7QUFDbEUsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLGdGQUFNO0FBQzdCO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLHVEQUFhO0FBQ3BDO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLGdGQUFNO0FBQzdCO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLHVEQUFhO0FBQ3BDO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMENBQTBDLE1BQU0sZ0VBQXVCLHlCQUF5QjtBQUNoRztBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsdURBQWE7QUFDcEM7QUFDQSxPQUFPO0FBQ1A7QUFDQSx3QkFBd0IsZ0ZBQU07QUFDOUI7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGdCQUFnQix1RUFBMkI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxpRUFBb0I7QUFDdEQ7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLGlFQUFpRSxxRkFBaUM7QUFDbEc7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkZBQW1CO0FBQ3ZDO0FBQ0Esb0ZBQW9GO0FBQ3BGO0FBQ0EsaUJBQWlCLGdGQUFNLFdBQVcsaUVBQVc7QUFDN0M7QUFDQSxnQkFBZ0IscUJBQXFCO0FBQ3JDO0FBQ0Esb0JBQW9CLDJGQUFtQixxRUFBcUUsbUJBQW1CO0FBQy9IO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBFQUFpQixHQUFHLDJCQUEyQjtBQUN6RSxVQUFVO0FBQ1YsK0JBQStCLGtFQUFhO0FBQzVDLG1CQUFtQixnRkFBTSxXQUFXLGlFQUFXO0FBQy9DLFlBQVk7QUFDWixZQUFZLHdGQUFZO0FBQ3hCLG1CQUFtQixnRkFBTSxXQUFXLGlFQUFXO0FBQy9DO0FBQ0E7QUFDQSwwRUFBMEUsMkJBQTJCO0FBQ3JHO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0ZBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0EsYUFBYSx1REFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSw2QkFBNkIsYUFBYTtBQUMxQyxPQUFPO0FBQ1A7QUFDQSw2QkFBNkIsMEJBQTBCO0FBQ3ZELE9BQU87QUFDUDtBQUNBLDRCQUE0QixrQ0FBa0M7QUFDOUQsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsZUFBZSwrQ0FBTztBQUN0QjtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxzQkFBc0IsZ0ZBQU07QUFDNUI7QUFDQSxPQUFPO0FBQ1A7QUFDQSxzQkFBc0IsdURBQWE7QUFDbkMsZUFBZSwrQ0FBTztBQUN0QixPQUFPO0FBQ1A7QUFDQSw0REFBNEQsZ0VBQXVCO0FBQ25GO0FBQ0EsNEJBQTRCLDBCQUEwQjtBQUN0RDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGdGQUFNO0FBQ3BDO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSw4QkFBOEIsZ0ZBQU07QUFDcEM7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix1REFBYTtBQUMzQyxpQkFBaUIsK0NBQU87QUFDeEIsVUFBVTtBQUNWO0FBQ0E7QUFDQSw4QkFBOEIsdURBQWE7QUFDM0MsaUJBQWlCLCtDQUFPO0FBQ3hCO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtDQUFPO0FBQ3hCLFVBQVU7QUFDVjtBQUNBO0FBQ0EsaUJBQWlCLCtDQUFPO0FBQ3hCO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLG9CQUFvQiwyRkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlFQUFvQjtBQUN0RDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSx1QkFBdUIsZ0ZBQU07QUFDN0I7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsdURBQWE7QUFDcEM7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLGdGQUFNO0FBQzdCO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLHVEQUFhO0FBQ3BDO0FBQ0EsT0FBTztBQUNQO0FBQ0Esc0VBQXNFLHFGQUFpQztBQUN2RztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLHVEQUFhO0FBQ3BDO0FBQ0EsT0FBTztBQUNQO0FBQ0Esa0VBQWtFLGVBQWU7QUFDakY7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGdCQUFnQix1RUFBMkI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxRkFBVTtBQUNyQjtBQUNBO0FBQ0EsV0FBVyxpREFBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFVBQVUsa0ZBQUk7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxLQUFLLGdCQUFnQjtBQUMzRDtBQUNBLG9DQUFvQyxpQkFBaUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsWUFBWTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFO0FBQzVFLFlBQVk7QUFDWjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLDRFQUE0RTtBQUM1RSxZQUFZO0FBQ1o7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1osNkRBQTZELDBGQUFlO0FBQzVFO0FBQ0EsZ0JBQWdCLDBGQUFlO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdGQUF3RixpRUFBb0I7QUFDNUc7QUFDQTtBQUNBLG1GQUFtRixpRUFBb0I7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWEsZ0ZBQU07QUFDbkIsTUFBTTtBQUNOLGFBQWEsZ0ZBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxhQUFhLGdGQUFNLE1BQU0sZ0RBQWdEO0FBQ3pFLE1BQU07QUFDTixhQUFhLGdGQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdGQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxlQUFlO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSxhQUFhO0FBQzVGO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywrQ0FBK0MsS0FBSyxvRkFBUTtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdURBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrRkFBaUIseUJBQXlCLGVBQWU7QUFDbkUsVUFBVSxrRkFBTztBQUNqQixvQkFBb0IsMkZBQW1CO0FBQ3ZDO0FBQ0E7QUFDQSwrRUFBK0UsYUFBYTtBQUM1RjtBQUNBO0FBQ0EsVUFBVSwrRkFBaUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsVUFBVSxrRkFBTztBQUNqQixvQkFBb0IsMkZBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBTztBQUNsQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsdURBQXVELGdFQUF1QjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx1REFBZTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixpRUFBVztBQUMzQjtBQUNBO0FBQ0EscUNBQXFDLG9GQUFRO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sdUJBQXVCLGlFQUFXO0FBQ2xDLGVBQWUsZ0ZBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ04sdUJBQXVCLGlFQUFXO0FBQ2xDLGVBQWUsZ0ZBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGVBQWU7QUFDMUQ7QUFDQSxhQUFhLGdGQUFNO0FBQ25CLE1BQU07QUFDTixhQUFhLGdGQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsaUVBQW9CO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxlQUFlO0FBQzFEO0FBQ0EsYUFBYSxnRkFBTTtBQUNuQixNQUFNO0FBQ04sYUFBYSxnRkFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLG9CQUFvQiwyRkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ04sdUJBQXVCLGlFQUFXO0FBQ2xDLGVBQWUsZ0ZBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsZUFBZTtBQUM1RCxVQUFVO0FBQ1YsNkNBQTZDLGVBQWU7QUFDNUQ7QUFDQTtBQUNBLGFBQWEsZ0ZBQU07QUFDbkIsTUFBTTtBQUNOLGFBQWEsZ0ZBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RjtBQUN2RjtBQUNBLGlCQUFpQixnRkFBTSxXQUFXLGlFQUFXO0FBQzdDO0FBQ0EsZ0JBQWdCLHFCQUFxQjtBQUNyQztBQUNBLG9CQUFvQiwyRkFBbUIscUVBQXFFLGtCQUFrQjtBQUM5SDtBQUNBO0FBQ0EsOENBQThDLDRFQUFtQixHQUFHLDJCQUEyQjtBQUMvRix5REFBeUQsK0JBQStCO0FBQ3hGLE9BQU87QUFDUCxNQUFNO0FBQ04sMkJBQTJCLGtFQUFhO0FBQ3hDLGVBQWUsZ0ZBQU0sV0FBVyxpRUFBVztBQUMzQyxRQUFRO0FBQ1IsZUFBZSxnRkFBTSxXQUFXLGlFQUFXO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGVBQWU7QUFDeEQsYUFBYSxnRkFBTTtBQUNuQixNQUFNO0FBQ04sYUFBYSxnRkFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5REFBaUI7QUFDdEMsT0FBTztBQUNQLE1BQU07QUFDTix1QkFBdUIsaUVBQVc7QUFDbEM7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMERBQTBEO0FBQzNGO0FBQ0EsUUFBUTtBQUNSLDJDQUEyQyxlQUFlO0FBQzFEO0FBQ0EsUUFBUTtBQUNSLDJDQUEyQyxlQUFlO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsa0ZBQVM7QUFDbkI7QUFDQTtBQUNBLGlDQUFpQyx5Q0FBeUM7QUFDMUUsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnRkFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdURBQWE7QUFDOUIsV0FBVywrQ0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0ZBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsdURBQWE7QUFDbEMsV0FBVywrQ0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsMkVBQStCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkRBQXVCO0FBQ3JDO0FBQ0E7QUFDQSxtREFBbUQsaUZBQUk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDJGQUFtQix3SEFBd0gsd0RBQXdEO0FBQ3pOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPLDZEQUF1QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkZBQW1CO0FBQ3ZDO0FBQ0E7QUFDQSxvQkFBb0IsMkZBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLFFBQVEsK0ZBQWlCO0FBQ3pCLDRGQUE0RixnRkFBTTtBQUNsRyxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFja1xcZGlzdFxcZXNtXFxsaWJcXHN0YWNrLWFwcFxcYXBwc1xcaW1wbGVtZW50YXRpb25zXFxjbGllbnQtYXBwLWltcGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9zdGFjay1hcHAvYXBwcy9pbXBsZW1lbnRhdGlvbnMvY2xpZW50LWFwcC1pbXBsLnRzXG5pbXBvcnQgeyBXZWJBdXRobkVycm9yLCBzdGFydEF1dGhlbnRpY2F0aW9uLCBzdGFydFJlZ2lzdHJhdGlvbiB9IGZyb20gXCJAc2ltcGxld2ViYXV0aG4vYnJvd3NlclwiO1xuaW1wb3J0IHsgS25vd25FcnJvcnMsIFN0YWNrQ2xpZW50SW50ZXJmYWNlIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZFwiO1xuaW1wb3J0IHsgSW50ZXJuYWxTZXNzaW9uIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3Nlc3Npb25zXCI7XG5pbXBvcnQgeyBzY3JhbWJsZUR1cmluZ0NvbXBpbGVUaW1lIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2NvbXBpbGUtdGltZVwiO1xuaW1wb3J0IHsgaXNCcm93c2VyTGlrZSB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9lbnZcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IsIGNhcHR1cmVFcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgeyBEZXBlbmRlbmNpZXNNYXAgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvbWFwc1wiO1xuaW1wb3J0IHsgZGVlcFBsYWluRXF1YWxzLCBvbWl0IH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL29iamVjdHNcIjtcbmltcG9ydCB7IG5ldmVyUmVzb2x2ZSwgcnVuQXN5bmNocm9ub3VzbHksIHdhaXQgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IHN1c3BlbmQsIHN1c3BlbmRJZlNzciB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9yZWFjdFwiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3Jlc3VsdHNcIjtcbmltcG9ydCB7IFN0b3JlLCBzdG9yZUxvY2sgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvc3RvcmVzXCI7XG5pbXBvcnQgeyBkZWluZGVudCwgbWVyZ2VTY29wZVN0cmluZ3MgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvc3RyaW5nc1wiO1xuaW1wb3J0IHsgZ2V0UmVsYXRpdmVQYXJ0LCBpc1JlbGF0aXZlIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3VybHNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVXVpZCB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy91dWlkc1wiO1xuaW1wb3J0ICogYXMgY29va2llIGZyb20gXCJjb29raWVcIjtcbmltcG9ydCB7IGNvbnN0cnVjdFJlZGlyZWN0VXJsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3V0aWxzL3VybFwiO1xuaW1wb3J0IHsgYWRkTmV3T0F1dGhQcm92aWRlck9yU2NvcGUsIGNhbGxPQXV0aENhbGxiYWNrLCBzaWduSW5XaXRoT0F1dGggfSBmcm9tIFwiLi4vLi4vLi4vYXV0aFwiO1xuaW1wb3J0IHsgY3JlYXRlQnJvd3NlckNvb2tpZUhlbHBlciwgY3JlYXRlQ29va2llSGVscGVyLCBjcmVhdGVQbGFjZWhvbGRlckNvb2tpZUhlbHBlciwgZGVsZXRlQ29va2llQ2xpZW50LCBnZXRDb29raWVDbGllbnQsIHNldE9yRGVsZXRlQ29va2llLCBzZXRPckRlbGV0ZUNvb2tpZUNsaWVudCB9IGZyb20gXCIuLi8uLi8uLi9jb29raWVcIjtcbmltcG9ydCB7IGFwaUtleUNyZWF0aW9uT3B0aW9uc1RvQ3J1ZCB9IGZyb20gXCIuLi8uLi9hcGkta2V5c1wiO1xuaW1wb3J0IHsgc3RhY2tBcHBJbnRlcm5hbHNTeW1ib2wgfSBmcm9tIFwiLi4vLi4vY29tbW9uXCI7XG5pbXBvcnQgeyBjb250YWN0Q2hhbm5lbENyZWF0ZU9wdGlvbnNUb0NydWQsIGNvbnRhY3RDaGFubmVsVXBkYXRlT3B0aW9uc1RvQ3J1ZCB9IGZyb20gXCIuLi8uLi9jb250YWN0LWNoYW5uZWxzXCI7XG5pbXBvcnQgeyBhZG1pblByb2plY3RDcmVhdGVPcHRpb25zVG9DcnVkIH0gZnJvbSBcIi4uLy4uL3Byb2plY3RzXCI7XG5pbXBvcnQgeyB0ZWFtQ3JlYXRlT3B0aW9uc1RvQ3J1ZCwgdGVhbVVwZGF0ZU9wdGlvbnNUb0NydWQgfSBmcm9tIFwiLi4vLi4vdGVhbXNcIjtcbmltcG9ydCB7IHVzZXJVcGRhdGVPcHRpb25zVG9DcnVkIH0gZnJvbSBcIi4uLy4uL3VzZXJzXCI7XG5pbXBvcnQgeyBjbGllbnRWZXJzaW9uLCBjcmVhdGVDYWNoZSwgY3JlYXRlQ2FjaGVCeVNlc3Npb24sIGNyZWF0ZUVtcHR5VG9rZW5TdG9yZSwgZ2V0QmFzZVVybCwgZ2V0RGVmYXVsdEV4dHJhUmVxdWVzdEhlYWRlcnMsIGdldERlZmF1bHRQcm9qZWN0SWQsIGdldERlZmF1bHRQdWJsaXNoYWJsZUNsaWVudEtleSwgZ2V0VXJscyB9IGZyb20gXCIuL2NvbW1vblwiO1xuaW1wb3J0ICogYXMgTmV4dE5hdmlnYXRpb25VbnNjcmFtYmxlZCBmcm9tIFwibmV4dC9uYXZpZ2F0aW9uXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUFzeW5jQ2FjaGUgfSBmcm9tIFwiLi9jb21tb25cIjtcbmltcG9ydCAqIGFzIHNjIGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zY1wiO1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zY1wiO1xudmFyIGlzUmVhY3RTZXJ2ZXIyID0gZmFsc2U7XG5pc1JlYWN0U2VydmVyMiA9IHNjLmlzUmVhY3RTZXJ2ZXI7XG52YXIgTmV4dE5hdmlnYXRpb24gPSBzY3JhbWJsZUR1cmluZ0NvbXBpbGVUaW1lKE5leHROYXZpZ2F0aW9uVW5zY3JhbWJsZWQpO1xudmFyIGFsbENsaWVudEFwcHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xudmFyIF9fU3RhY2tDbGllbnRBcHBJbXBsSW5jb21wbGV0ZSA9IGNsYXNzIF9fU3RhY2tDbGllbnRBcHBJbXBsSW5jb21wbGV0ZSB7XG4gIGNvbnN0cnVjdG9yKF9vcHRpb25zKSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IF9vcHRpb25zO1xuICAgIHRoaXMuX3VuaXF1ZUlkZW50aWZpZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5fX0RFTU9fRU5BQkxFX1NMSUdIVF9GRVRDSF9ERUxBWSA9IGZhbHNlO1xuICAgIHRoaXMuX293bmVkQWRtaW5BcHBzID0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICAgIHRoaXMuX2N1cnJlbnRVc2VyQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihhc3luYyAoc2Vzc2lvbikgPT4ge1xuICAgICAgaWYgKHRoaXMuX19ERU1PX0VOQUJMRV9TTElHSFRfRkVUQ0hfREVMQVkpIHtcbiAgICAgICAgYXdhaXQgd2FpdCgyZTMpO1xuICAgICAgfVxuICAgICAgaWYgKHNlc3Npb24uaXNLbm93blRvQmVJbnZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmdldENsaWVudFVzZXJCeVRva2VuKHNlc3Npb24pO1xuICAgIH0pO1xuICAgIHRoaXMuX2N1cnJlbnRQcm9qZWN0Q2FjaGUgPSBjcmVhdGVDYWNoZShhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9yVGhyb3coYXdhaXQgdGhpcy5faW50ZXJmYWNlLmdldENsaWVudFByb2plY3QoKSk7XG4gICAgfSk7XG4gICAgdGhpcy5fb3duZWRQcm9qZWN0c0NhY2hlID0gY3JlYXRlQ2FjaGVCeVNlc3Npb24oYXN5bmMgKHNlc3Npb24pID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFByb2plY3RzKHNlc3Npb24pO1xuICAgIH0pO1xuICAgIHRoaXMuX2N1cnJlbnRVc2VyUGVybWlzc2lvbnNDYWNoZSA9IGNyZWF0ZUNhY2hlQnlTZXNzaW9uKGFzeW5jIChzZXNzaW9uLCBbdGVhbUlkLCByZWN1cnNpdmVdKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmxpc3RDdXJyZW50VXNlclRlYW1QZXJtaXNzaW9ucyh7IHRlYW1JZCwgcmVjdXJzaXZlIH0sIHNlc3Npb24pO1xuICAgIH0pO1xuICAgIHRoaXMuX2N1cnJlbnRVc2VyUHJvamVjdFBlcm1pc3Npb25zQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihhc3luYyAoc2Vzc2lvbiwgW3JlY3Vyc2l2ZV0pID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdEN1cnJlbnRVc2VyUHJvamVjdFBlcm1pc3Npb25zKHsgcmVjdXJzaXZlIH0sIHNlc3Npb24pO1xuICAgIH0pO1xuICAgIHRoaXMuX2N1cnJlbnRVc2VyVGVhbXNDYWNoZSA9IGNyZWF0ZUNhY2hlQnlTZXNzaW9uKGFzeW5jIChzZXNzaW9uKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmxpc3RDdXJyZW50VXNlclRlYW1zKHNlc3Npb24pO1xuICAgIH0pO1xuICAgIHRoaXMuX2N1cnJlbnRVc2VyT0F1dGhDb25uZWN0aW9uQWNjZXNzVG9rZW5zQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihcbiAgICAgIGFzeW5jIChzZXNzaW9uLCBbcHJvdmlkZXJJZCwgc2NvcGVdKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmNyZWF0ZVByb3ZpZGVyQWNjZXNzVG9rZW4ocHJvdmlkZXJJZCwgc2NvcGUgfHwgXCJcIiwgc2Vzc2lvbik7XG4gICAgICAgICAgcmV0dXJuIHsgYWNjZXNzVG9rZW46IHJlc3VsdC5hY2Nlc3NfdG9rZW4gfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgS25vd25FcnJvcnMuT0F1dGhDb25uZWN0aW9uRG9lc05vdEhhdmVSZXF1aXJlZFNjb3BlIHx8IGVyciBpbnN0YW5jZW9mIEtub3duRXJyb3JzLk9BdXRoQ29ubmVjdGlvbk5vdENvbm5lY3RlZFRvVXNlcikpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLl9jdXJyZW50VXNlck9BdXRoQ29ubmVjdGlvbkNhY2hlID0gY3JlYXRlQ2FjaGVCeVNlc3Npb24oXG4gICAgICBhc3luYyAoc2Vzc2lvbiwgW3Byb3ZpZGVySWQsIHNjb3BlLCByZWRpcmVjdF0pID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2dldFVzZXJPQXV0aENvbm5lY3Rpb25DYWNoZUZuKHtcbiAgICAgICAgICBnZXRVc2VyOiBhc3luYyAoKSA9PiBSZXN1bHQub3JUaHJvdyhhd2FpdCB0aGlzLl9jdXJyZW50VXNlckNhY2hlLmdldE9yV2FpdChbc2Vzc2lvbl0sIFwid3JpdGUtb25seVwiKSksXG4gICAgICAgICAgZ2V0T3JXYWl0T0F1dGhUb2tlbjogYXN5bmMgKCkgPT4gUmVzdWx0Lm9yVGhyb3coYXdhaXQgdGhpcy5fY3VycmVudFVzZXJPQXV0aENvbm5lY3Rpb25BY2Nlc3NUb2tlbnNDYWNoZS5nZXRPcldhaXQoW3Nlc3Npb24sIHByb3ZpZGVySWQsIHNjb3BlIHx8IFwiXCJdLCBcIndyaXRlLW9ubHlcIikpLFxuICAgICAgICAgIHVzZU9BdXRoVG9rZW46ICgpID0+IHVzZUFzeW5jQ2FjaGUodGhpcy5fY3VycmVudFVzZXJPQXV0aENvbm5lY3Rpb25BY2Nlc3NUb2tlbnNDYWNoZSwgW3Nlc3Npb24sIHByb3ZpZGVySWQsIHNjb3BlIHx8IFwiXCJdLCBcInVzZU9BdXRoVG9rZW5cIiksXG4gICAgICAgICAgcHJvdmlkZXJJZCxcbiAgICAgICAgICBzY29wZSxcbiAgICAgICAgICByZWRpcmVjdCxcbiAgICAgICAgICBzZXNzaW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5fdGVhbU1lbWJlclByb2ZpbGVzQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihcbiAgICAgIGFzeW5jIChzZXNzaW9uLCBbdGVhbUlkXSkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmxpc3RUZWFtTWVtYmVyUHJvZmlsZXMoeyB0ZWFtSWQgfSwgc2Vzc2lvbik7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLl90ZWFtSW52aXRhdGlvbnNDYWNoZSA9IGNyZWF0ZUNhY2hlQnlTZXNzaW9uKFxuICAgICAgYXN5bmMgKHNlc3Npb24sIFt0ZWFtSWRdKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFRlYW1JbnZpdGF0aW9ucyh7IHRlYW1JZCB9LCBzZXNzaW9uKTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX2N1cnJlbnRVc2VyVGVhbVByb2ZpbGVDYWNoZSA9IGNyZWF0ZUNhY2hlQnlTZXNzaW9uKFxuICAgICAgYXN5bmMgKHNlc3Npb24sIFt0ZWFtSWRdKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuZ2V0VGVhbU1lbWJlclByb2ZpbGUoeyB0ZWFtSWQsIHVzZXJJZDogXCJtZVwiIH0sIHNlc3Npb24pO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5fY2xpZW50Q29udGFjdENoYW5uZWxzQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihcbiAgICAgIGFzeW5jIChzZXNzaW9uKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdENsaWVudENvbnRhY3RDaGFubmVscyhzZXNzaW9uKTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX3VzZXJBcGlLZXlzQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihcbiAgICAgIGFzeW5jIChzZXNzaW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFByb2plY3RBcGlLZXlzKHsgdXNlcl9pZDogXCJtZVwiIH0sIHNlc3Npb24sIFwiY2xpZW50XCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX3RlYW1BcGlLZXlzQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihcbiAgICAgIGFzeW5jIChzZXNzaW9uLCBbdGVhbUlkXSkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmxpc3RQcm9qZWN0QXBpS2V5cyh7IHRlYW1faWQ6IHRlYW1JZCB9LCBzZXNzaW9uLCBcImNsaWVudFwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLl9hbm9ueW1vdXNTaWduVXBJblByb2dyZXNzID0gbnVsbDtcbiAgICB0aGlzLl9tZW1vcnlUb2tlblN0b3JlID0gY3JlYXRlRW1wdHlUb2tlblN0b3JlKCk7XG4gICAgdGhpcy5fbmV4dFNlcnZlckNvb2tpZXNUb2tlblN0b3JlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgIHRoaXMuX3JlcXVlc3RUb2tlblN0b3JlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgIHRoaXMuX3N0b3JlZEJyb3dzZXJDb29raWVUb2tlblN0b3JlID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBBIG1hcCBmcm9tIHRva2VuIHN0b3JlcyBhbmQgc2Vzc2lvbiBrZXlzIHRvIHNlc3Npb25zLlxuICAgICAqXG4gICAgICogVGhpcyBpc24ndCBqdXN0IGEgbWFwIGZyb20gc2Vzc2lvbiBrZXlzIHRvIHNlc3Npb25zIGZvciB0d28gcmVhc29uczpcbiAgICAgKlxuICAgICAqIC0gU28gd2UgY2FuIGdhcmJhZ2UtY29sbGVjdCBTZXNzaW9uIG9iamVjdHMgd2hlbiB0aGUgdG9rZW4gc3RvcmUgaXMgZ2FyYmFnZS1jb2xsZWN0ZWRcbiAgICAgKiAtIFNvIGRpZmZlcmVudCB0b2tlbiBzdG9yZXMgYXJlIHNlcGFyYXRlZCBhbmQgZG9uJ3QgbGVhayBpbmZvcm1hdGlvbiBiZXR3ZWVuIGVhY2ggb3RoZXIsIGVnLiBpZiB0aGUgc2FtZSB1c2VyIHNlbmRzIHR3byByZXF1ZXN0cyB0byB0aGUgc2FtZSBzZXJ2ZXIgdGhleSBzaG91bGQgZ2V0IGEgZGlmZmVyZW50IHNlc3Npb24gb2JqZWN0XG4gICAgICovXG4gICAgdGhpcy5fc2Vzc2lvbnNCeVRva2VuU3RvcmVBbmRTZXNzaW9uS2V5ID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG4gICAgaWYgKCFfX1N0YWNrQ2xpZW50QXBwSW1wbEluY29tcGxldGUuTGF6eVN0YWNrQWRtaW5BcHBJbXBsLnZhbHVlKSB7XG4gICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkFkbWluIGFwcCBpbXBsZW1lbnRhdGlvbiBub3QgaW5pdGlhbGl6ZWQuIERpZCB5b3UgaW1wb3J0IHRoZSBfU3RhY2tDbGllbnRBcHAgZnJvbSBzdGFjay1hcHAvYXBwcy9pbXBsZW1lbnRhdGlvbnMvaW5kZXgudHM/IFlvdSBjYW4ndCBpbXBvcnQgaXQgZGlyZWN0bHkgZnJvbSAuL2FwcHMvaW1wbGVtZW50YXRpb25zL2NsaWVudC1hcHAtaW1wbC50cyBhcyB0aGF0IGNhdXNlcyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgKHNlZSB0aGUgY29tbWVudCBhdCBfTGF6eVN0YWNrQWRtaW5BcHBJbXBsIGZvciBtb3JlIGRldGFpbHMpLlwiKTtcbiAgICB9XG4gICAgaWYgKFwiaW50ZXJmYWNlXCIgaW4gX29wdGlvbnMpIHtcbiAgICAgIHRoaXMuX2ludGVyZmFjZSA9IF9vcHRpb25zLmludGVyZmFjZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faW50ZXJmYWNlID0gbmV3IFN0YWNrQ2xpZW50SW50ZXJmYWNlKHtcbiAgICAgICAgZ2V0QmFzZVVybDogKCkgPT4gZ2V0QmFzZVVybChfb3B0aW9ucy5iYXNlVXJsKSxcbiAgICAgICAgZXh0cmFSZXF1ZXN0SGVhZGVyczogX29wdGlvbnMuZXh0cmFSZXF1ZXN0SGVhZGVycyA/PyBnZXREZWZhdWx0RXh0cmFSZXF1ZXN0SGVhZGVycygpLFxuICAgICAgICBwcm9qZWN0SWQ6IF9vcHRpb25zLnByb2plY3RJZCA/PyBnZXREZWZhdWx0UHJvamVjdElkKCksXG4gICAgICAgIGNsaWVudFZlcnNpb24sXG4gICAgICAgIHB1Ymxpc2hhYmxlQ2xpZW50S2V5OiBfb3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleSA/PyBnZXREZWZhdWx0UHVibGlzaGFibGVDbGllbnRLZXkoKSxcbiAgICAgICAgcHJlcGFyZVJlcXVlc3Q6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBjb29raWVzPy4oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuX3Rva2VuU3RvcmVJbml0ID0gX29wdGlvbnMudG9rZW5TdG9yZTtcbiAgICB0aGlzLl9yZWRpcmVjdE1ldGhvZCA9IF9vcHRpb25zLnJlZGlyZWN0TWV0aG9kIHx8IFwibm9uZVwiO1xuICAgIHRoaXMuX3JlZGlyZWN0TWV0aG9kID0gX29wdGlvbnMucmVkaXJlY3RNZXRob2QgfHwgXCJuZXh0anNcIjtcbiAgICB0aGlzLl91cmxPcHRpb25zID0gX29wdGlvbnMudXJscyA/PyB7fTtcbiAgICB0aGlzLl9vYXV0aFNjb3Blc09uU2lnbkluID0gX29wdGlvbnMub2F1dGhTY29wZXNPblNpZ25JbiA/PyB7fTtcbiAgICBpZiAoX29wdGlvbnMudW5pcXVlSWRlbnRpZmllcikge1xuICAgICAgdGhpcy5fdW5pcXVlSWRlbnRpZmllciA9IF9vcHRpb25zLnVuaXF1ZUlkZW50aWZpZXI7XG4gICAgICB0aGlzLl9pbml0VW5pcXVlSWRlbnRpZmllcigpO1xuICAgIH1cbiAgfVxuICBhc3luYyBfY3JlYXRlQ29va2llSGVscGVyKCkge1xuICAgIGlmICh0aGlzLl90b2tlblN0b3JlSW5pdCA9PT0gXCJuZXh0anMtY29va2llXCIgfHwgdGhpcy5fdG9rZW5TdG9yZUluaXQgPT09IFwiY29va2llXCIpIHtcbiAgICAgIHJldHVybiBhd2FpdCBjcmVhdGVDb29raWVIZWxwZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZVBsYWNlaG9sZGVyQ29va2llSGVscGVyKCk7XG4gICAgfVxuICB9XG4gIGFzeW5jIF9nZXRVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGVGbihvcHRpb25zKSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IG9wdGlvbnMuZ2V0VXNlcigpO1xuICAgIGxldCBoYXNDb25uZWN0aW9uID0gdHJ1ZTtcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIub2F1dGhfcHJvdmlkZXJzLmZpbmQoKHApID0+IHAuaWQgPT09IG9wdGlvbnMucHJvdmlkZXJJZCkpIHtcbiAgICAgIGhhc0Nvbm5lY3Rpb24gPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBvcHRpb25zLmdldE9yV2FpdE9BdXRoVG9rZW4oKTtcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICBoYXNDb25uZWN0aW9uID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICghaGFzQ29ubmVjdGlvbiAmJiBvcHRpb25zLnJlZGlyZWN0KSB7XG4gICAgICBpZiAoIW9wdGlvbnMuc2Vzc2lvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGVpbmRlbnRgXG4gICAgICAgICAgQ2Fubm90IGFkZCBuZXcgc2NvcGVzIHRvIGEgdXNlciB0aGF0IGlzIG5vdCBhIEN1cnJlbnRVc2VyLiBQbGVhc2UgZW5zdXJlIHRoYXQgeW91IGFyZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gb24gYSBDdXJyZW50VXNlciBvYmplY3QsIG9yIHJlbW92ZSB0aGUgJ29yOiByZWRpcmVjdCcgb3B0aW9uLlxuXG4gICAgICAgICAgT2Z0ZW4sIHlvdSBjYW4gc29sdmUgdGhpcyBieSBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gaW4gdGhlIGJyb3dzZXIgaW5zdGVhZCwgb3IgYnkgcmVtb3ZpbmcgdGhlICdvcjogcmVkaXJlY3QnIG9wdGlvbiBhbmQgZGVhbGluZyB3aXRoIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGRvZXNuJ3QgaGF2ZSBlbm91Z2ggcGVybWlzc2lvbnMuXG4gICAgICAgIGApO1xuICAgICAgfVxuICAgICAgYXdhaXQgYWRkTmV3T0F1dGhQcm92aWRlck9yU2NvcGUoXG4gICAgICAgIHRoaXMuX2ludGVyZmFjZSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGVyOiBvcHRpb25zLnByb3ZpZGVySWQsXG4gICAgICAgICAgcmVkaXJlY3RVcmw6IHRoaXMudXJscy5vYXV0aENhbGxiYWNrLFxuICAgICAgICAgIGVycm9yUmVkaXJlY3RVcmw6IHRoaXMudXJscy5lcnJvcixcbiAgICAgICAgICBwcm92aWRlclNjb3BlOiBtZXJnZVNjb3BlU3RyaW5ncyhvcHRpb25zLnNjb3BlIHx8IFwiXCIsICh0aGlzLl9vYXV0aFNjb3Blc09uU2lnbkluW29wdGlvbnMucHJvdmlkZXJJZF0gPz8gW10pLmpvaW4oXCIgXCIpKVxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zLnNlc3Npb25cbiAgICAgICk7XG4gICAgICByZXR1cm4gYXdhaXQgbmV2ZXJSZXNvbHZlKCk7XG4gICAgfSBlbHNlIGlmICghaGFzQ29ubmVjdGlvbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBpZDogb3B0aW9ucy5wcm92aWRlcklkLFxuICAgICAgYXN5bmMgZ2V0QWNjZXNzVG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wdGlvbnMuZ2V0T3JXYWl0T0F1dGhUb2tlbigpO1xuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiTm8gYWNjZXNzIHRva2VuIGF2YWlsYWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIHVzZUFjY2Vzc1Rva2VuKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb25zLnVzZU9BdXRoVG9rZW4oKTtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIk5vIGFjY2VzcyB0b2tlbiBhdmFpbGFibGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9pbml0VW5pcXVlSWRlbnRpZmllcigpIHtcbiAgICBpZiAoIXRoaXMuX3VuaXF1ZUlkZW50aWZpZXIpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5pcXVlIGlkZW50aWZpZXIgbm90IGluaXRpYWxpemVkXCIpO1xuICAgIH1cbiAgICBpZiAoYWxsQ2xpZW50QXBwcy5oYXModGhpcy5fdW5pcXVlSWRlbnRpZmllcikpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiQSBTdGFjayBjbGllbnQgYXBwIHdpdGggdGhlIHNhbWUgdW5pcXVlIGlkZW50aWZpZXIgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgfVxuICAgIGFsbENsaWVudEFwcHMuc2V0KHRoaXMuX3VuaXF1ZUlkZW50aWZpZXIsIFt0aGlzLl9vcHRpb25zLmNoZWNrU3RyaW5nID8/IFwiZGVmYXVsdCBjaGVjayBzdHJpbmdcIiwgdGhpc10pO1xuICB9XG4gIC8qKlxuICAgKiBDbG91ZGZsYXJlIHdvcmtlcnMgZG9lcyBub3QgYWxsb3cgdXNlIG9mIHJhbmRvbW5lc3Mgb24gdGhlIGdsb2JhbCBzY29wZSAob24gd2hpY2ggdGhlIFN0YWNrIGFwcCBpcyBwcm9iYWJseVxuICAgKiBpbml0aWFsaXplZCkuIEZvciB0aGF0IHJlYXNvbiwgd2UgZ2VuZXJhdGUgdGhlIHVuaXF1ZSBpZGVudGlmaWVyIGxhemlseSB3aGVuIGl0IGlzIGZpcnN0IG5lZWRlZCBpbnN0ZWFkIG9mIGluIHRoZVxuICAgKiBjb25zdHJ1Y3Rvci5cbiAgICovXG4gIF9nZXRVbmlxdWVJZGVudGlmaWVyKCkge1xuICAgIGlmICghdGhpcy5fdW5pcXVlSWRlbnRpZmllcikge1xuICAgICAgdGhpcy5fdW5pcXVlSWRlbnRpZmllciA9IGdlbmVyYXRlVXVpZCgpO1xuICAgICAgdGhpcy5faW5pdFVuaXF1ZUlkZW50aWZpZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3VuaXF1ZUlkZW50aWZpZXI7XG4gIH1cbiAgYXN5bmMgX2NoZWNrRmVhdHVyZVN1cHBvcnQobmFtZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuY2hlY2tGZWF0dXJlU3VwcG9ydCh7IC4uLm9wdGlvbnMsIG5hbWUgfSk7XG4gIH1cbiAgX3VzZUNoZWNrRmVhdHVyZVN1cHBvcnQobmFtZSwgb3B0aW9ucykge1xuICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMuX2NoZWNrRmVhdHVyZVN1cHBvcnQobmFtZSwgb3B0aW9ucykpO1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGAke25hbWV9IGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkLiBQbGVhc2UgcmVhY2ggb3V0IHRvIFN0YWNrIHN1cHBvcnQgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCk7XG4gIH1cbiAgZ2V0IF9yZWZyZXNoVG9rZW5Db29raWVOYW1lKCkge1xuICAgIHJldHVybiBgc3RhY2stcmVmcmVzaC0ke3RoaXMucHJvamVjdElkfWA7XG4gIH1cbiAgX2dldFRva2Vuc0Zyb21Db29raWVzKGNvb2tpZXMyKSB7XG4gICAgY29uc3QgcmVmcmVzaFRva2VuID0gY29va2llczIucmVmcmVzaFRva2VuQ29va2llO1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuT2JqZWN0ID0gY29va2llczIuYWNjZXNzVG9rZW5Db29raWU/LnN0YXJ0c1dpdGgoJ1tcIicpID8gSlNPTi5wYXJzZShjb29raWVzMi5hY2Nlc3NUb2tlbkNvb2tpZSkgOiBudWxsO1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW5PYmplY3QgJiYgcmVmcmVzaFRva2VuID09PSBhY2Nlc3NUb2tlbk9iamVjdFswXSA/IGFjY2Vzc1Rva2VuT2JqZWN0WzFdIDogbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgYWNjZXNzVG9rZW5cbiAgICB9O1xuICB9XG4gIGdldCBfYWNjZXNzVG9rZW5Db29raWVOYW1lKCkge1xuICAgIHJldHVybiBgc3RhY2stYWNjZXNzYDtcbiAgfVxuICBfZ2V0QnJvd3NlckNvb2tpZVRva2VuU3RvcmUoKSB7XG4gICAgaWYgKCFpc0Jyb3dzZXJMaWtlKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgY29va2llIHRva2VuIHN0b3JlIG9uIHRoZSBzZXJ2ZXIhXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3RvcmVkQnJvd3NlckNvb2tpZVRva2VuU3RvcmUgPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGdldEN1cnJlbnRWYWx1ZSA9IChvbGQpID0+IHtcbiAgICAgICAgY29uc3QgdG9rZW5zID0gdGhpcy5fZ2V0VG9rZW5zRnJvbUNvb2tpZXMoe1xuICAgICAgICAgIHJlZnJlc2hUb2tlbkNvb2tpZTogZ2V0Q29va2llQ2xpZW50KHRoaXMuX3JlZnJlc2hUb2tlbkNvb2tpZU5hbWUpID8/IGdldENvb2tpZUNsaWVudChcInN0YWNrLXJlZnJlc2hcIiksXG4gICAgICAgICAgLy8ga2VlcCBvbGQgY29va2llIG5hbWUgZm9yIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5XG4gICAgICAgICAgYWNjZXNzVG9rZW5Db29raWU6IGdldENvb2tpZUNsaWVudCh0aGlzLl9hY2Nlc3NUb2tlbkNvb2tpZU5hbWUpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlZnJlc2hUb2tlbjogdG9rZW5zLnJlZnJlc2hUb2tlbixcbiAgICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2Vzc1Rva2VuID8/IChvbGQ/LnJlZnJlc2hUb2tlbiA9PT0gdG9rZW5zLnJlZnJlc2hUb2tlbiA/IG9sZC5hY2Nlc3NUb2tlbiA6IG51bGwpXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgdGhpcy5fc3RvcmVkQnJvd3NlckNvb2tpZVRva2VuU3RvcmUgPSBuZXcgU3RvcmUoZ2V0Q3VycmVudFZhbHVlKG51bGwpKTtcbiAgICAgIGxldCBoYXNTdWNjZWVkZWRJbldyaXRpbmcgPSB0cnVlO1xuICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAoaGFzU3VjY2VlZGVkSW5Xcml0aW5nKSB7XG4gICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9zdG9yZWRCcm93c2VyQ29va2llVG9rZW5TdG9yZS5nZXQoKTtcbiAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUob2xkVmFsdWUpO1xuICAgICAgICAgIGlmICghZGVlcFBsYWluRXF1YWxzKGN1cnJlbnRWYWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9yZWRCcm93c2VyQ29va2llVG9rZW5TdG9yZS5zZXQoY3VycmVudFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMCk7XG4gICAgICB0aGlzLl9zdG9yZWRCcm93c2VyQ29va2llVG9rZW5TdG9yZS5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzZXRPckRlbGV0ZUNvb2tpZUNsaWVudCh0aGlzLl9yZWZyZXNoVG9rZW5Db29raWVOYW1lLCB2YWx1ZS5yZWZyZXNoVG9rZW4sIHsgbWF4QWdlOiA2MCAqIDYwICogMjQgKiAzNjUgfSk7XG4gICAgICAgICAgc2V0T3JEZWxldGVDb29raWVDbGllbnQodGhpcy5fYWNjZXNzVG9rZW5Db29raWVOYW1lLCB2YWx1ZS5hY2Nlc3NUb2tlbiA/IEpTT04uc3RyaW5naWZ5KFt2YWx1ZS5yZWZyZXNoVG9rZW4sIHZhbHVlLmFjY2Vzc1Rva2VuXSkgOiBudWxsLCB7IG1heEFnZTogNjAgKiA2MCAqIDI0IH0pO1xuICAgICAgICAgIGRlbGV0ZUNvb2tpZUNsaWVudChcInN0YWNrLXJlZnJlc2hcIik7XG4gICAgICAgICAgaGFzU3VjY2VlZGVkSW5Xcml0aW5nID0gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmICghaXNCcm93c2VyTGlrZSgpKSB7XG4gICAgICAgICAgICBoYXNTdWNjZWVkZWRJbldyaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc3RvcmVkQnJvd3NlckNvb2tpZVRva2VuU3RvcmU7XG4gIH1cbiAgX2dldE9yQ3JlYXRlVG9rZW5TdG9yZShjb29raWVIZWxwZXIsIG92ZXJyaWRlVG9rZW5TdG9yZUluaXQpIHtcbiAgICBjb25zdCB0b2tlblN0b3JlSW5pdCA9IG92ZXJyaWRlVG9rZW5TdG9yZUluaXQgPT09IHZvaWQgMCA/IHRoaXMuX3Rva2VuU3RvcmVJbml0IDogb3ZlcnJpZGVUb2tlblN0b3JlSW5pdDtcbiAgICBzd2l0Y2ggKHRva2VuU3RvcmVJbml0KSB7XG4gICAgICBjYXNlIFwiY29va2llXCI6IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldEJyb3dzZXJDb29raWVUb2tlblN0b3JlKCk7XG4gICAgICB9XG4gICAgICBjYXNlIFwibmV4dGpzLWNvb2tpZVwiOiB7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJMaWtlKCkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0QnJvd3NlckNvb2tpZVRva2VuU3RvcmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB0b2tlbnMgPSB0aGlzLl9nZXRUb2tlbnNGcm9tQ29va2llcyh7XG4gICAgICAgICAgICByZWZyZXNoVG9rZW5Db29raWU6IGNvb2tpZUhlbHBlci5nZXQodGhpcy5fcmVmcmVzaFRva2VuQ29va2llTmFtZSkgPz8gY29va2llSGVscGVyLmdldChcInN0YWNrLXJlZnJlc2hcIiksXG4gICAgICAgICAgICAvLyBrZWVwIG9sZCBjb29raWUgbmFtZSBmb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuQ29va2llOiBjb29raWVIZWxwZXIuZ2V0KHRoaXMuX2FjY2Vzc1Rva2VuQ29va2llTmFtZSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBzdG9yZSA9IG5ldyBTdG9yZSh0b2tlbnMpO1xuICAgICAgICAgIHN0b3JlLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgcnVuQXN5bmNocm9ub3VzbHkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgc2V0T3JEZWxldGVDb29raWUodGhpcy5fcmVmcmVzaFRva2VuQ29va2llTmFtZSwgdmFsdWUucmVmcmVzaFRva2VuLCB7IG1heEFnZTogNjAgKiA2MCAqIDI0ICogMzY1LCBub09wSWZTZXJ2ZXJDb21wb25lbnQ6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgc2V0T3JEZWxldGVDb29raWUodGhpcy5fYWNjZXNzVG9rZW5Db29raWVOYW1lLCB2YWx1ZS5hY2Nlc3NUb2tlbiA/IEpTT04uc3RyaW5naWZ5KFt2YWx1ZS5yZWZyZXNoVG9rZW4sIHZhbHVlLmFjY2Vzc1Rva2VuXSkgOiBudWxsLCB7IG1heEFnZTogNjAgKiA2MCAqIDI0LCBub09wSWZTZXJ2ZXJDb21wb25lbnQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhc2UgXCJtZW1vcnlcIjoge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWVtb3J5VG9rZW5TdG9yZTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgaWYgKHRva2VuU3RvcmVJbml0ID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVtcHR5VG9rZW5TdG9yZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0b2tlblN0b3JlSW5pdCA9PT0gXCJvYmplY3RcIiAmJiBcImhlYWRlcnNcIiBpbiB0b2tlblN0b3JlSW5pdCkge1xuICAgICAgICAgIGlmICh0aGlzLl9yZXF1ZXN0VG9rZW5TdG9yZXMuaGFzKHRva2VuU3RvcmVJbml0KSkgcmV0dXJuIHRoaXMuX3JlcXVlc3RUb2tlblN0b3Jlcy5nZXQodG9rZW5TdG9yZUluaXQpO1xuICAgICAgICAgIGNvbnN0IHN0YWNrQXV0aEhlYWRlciA9IHRva2VuU3RvcmVJbml0LmhlYWRlcnMuZ2V0KFwieC1zdGFjay1hdXRoXCIpO1xuICAgICAgICAgIGlmIChzdGFja0F1dGhIZWFkZXIpIHtcbiAgICAgICAgICAgIGxldCBwYXJzZWQyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcGFyc2VkMiA9IEpTT04ucGFyc2Uoc3RhY2tBdXRoSGVhZGVyKTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJzZWQyICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJ4LXN0YWNrLWF1dGggaGVhZGVyIG11c3QgYmUgYSBKU09OIG9iamVjdFwiKTtcbiAgICAgICAgICAgICAgaWYgKHBhcnNlZDIgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcihcIngtc3RhY2stYXV0aCBoZWFkZXIgbXVzdCBub3QgYmUgbnVsbFwiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHgtc3RhY2stYXV0aCBoZWFkZXI6ICR7c3RhY2tBdXRoSGVhZGVyfWAsIHsgY2F1c2U6IGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0T3JDcmVhdGVUb2tlblN0b3JlKGNvb2tpZUhlbHBlciwge1xuICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogcGFyc2VkMi5hY2Nlc3NUb2tlbiA/PyBudWxsLFxuICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IHBhcnNlZDIucmVmcmVzaFRva2VuID8/IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjb29raWVIZWFkZXIgPSB0b2tlblN0b3JlSW5pdC5oZWFkZXJzLmdldChcImNvb2tpZVwiKTtcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBjb29raWUucGFyc2UoY29va2llSGVhZGVyIHx8IFwiXCIpO1xuICAgICAgICAgIGNvbnN0IHJlcyA9IG5ldyBTdG9yZSh7XG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHBhcnNlZFt0aGlzLl9yZWZyZXNoVG9rZW5Db29raWVOYW1lXSB8fCBwYXJzZWRbXCJzdGFjay1yZWZyZXNoXCJdIHx8IG51bGwsXG4gICAgICAgICAgICAvLyBrZWVwIG9sZCBjb29raWUgbmFtZSBmb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBwYXJzZWRbdGhpcy5fYWNjZXNzVG9rZW5Db29raWVOYW1lXSB8fCBudWxsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fcmVxdWVzdFRva2VuU3RvcmVzLnNldCh0b2tlblN0b3JlSW5pdCwgcmVzKTtcbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9IGVsc2UgaWYgKFwiYWNjZXNzVG9rZW5cIiBpbiB0b2tlblN0b3JlSW5pdCB8fCBcInJlZnJlc2hUb2tlblwiIGluIHRva2VuU3RvcmVJbml0KSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBTdG9yZSh7XG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHRva2VuU3RvcmVJbml0LnJlZnJlc2hUb2tlbixcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0b2tlblN0b3JlSW5pdC5hY2Nlc3NUb2tlblxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0b2tlbiBzdG9yZSAke3Rva2VuU3RvcmVJbml0fWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBfdXNlVG9rZW5TdG9yZShvdmVycmlkZVRva2VuU3RvcmVJbml0KSB7XG4gICAgc3VzcGVuZElmU3NyKCk7XG4gICAgY29uc3QgY29va2llSGVscGVyID0gY3JlYXRlQnJvd3NlckNvb2tpZUhlbHBlcigpO1xuICAgIGNvbnN0IHRva2VuU3RvcmUgPSB0aGlzLl9nZXRPckNyZWF0ZVRva2VuU3RvcmUoY29va2llSGVscGVyLCBvdmVycmlkZVRva2VuU3RvcmVJbml0KTtcbiAgICByZXR1cm4gdG9rZW5TdG9yZTtcbiAgfVxuICBfZ2V0U2Vzc2lvbkZyb21Ub2tlblN0b3JlKHRva2VuU3RvcmUpIHtcbiAgICBjb25zdCB0b2tlbk9iaiA9IHRva2VuU3RvcmUuZ2V0KCk7XG4gICAgY29uc3Qgc2Vzc2lvbktleSA9IEludGVybmFsU2Vzc2lvbi5jYWxjdWxhdGVTZXNzaW9uS2V5KHRva2VuT2JqKTtcbiAgICBjb25zdCBleGlzdGluZyA9IHNlc3Npb25LZXkgPyB0aGlzLl9zZXNzaW9uc0J5VG9rZW5TdG9yZUFuZFNlc3Npb25LZXkuZ2V0KHRva2VuU3RvcmUpPy5nZXQoc2Vzc2lvbktleSkgOiBudWxsO1xuICAgIGlmIChleGlzdGluZykgcmV0dXJuIGV4aXN0aW5nO1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLl9pbnRlcmZhY2UuY3JlYXRlU2Vzc2lvbih7XG4gICAgICByZWZyZXNoVG9rZW46IHRva2VuT2JqLnJlZnJlc2hUb2tlbixcbiAgICAgIGFjY2Vzc1Rva2VuOiB0b2tlbk9iai5hY2Nlc3NUb2tlblxuICAgIH0pO1xuICAgIHNlc3Npb24ub25BY2Nlc3NUb2tlbkNoYW5nZSgobmV3QWNjZXNzVG9rZW4pID0+IHtcbiAgICAgIHRva2VuU3RvcmUudXBkYXRlKChvbGQpID0+ICh7XG4gICAgICAgIC4uLm9sZCxcbiAgICAgICAgYWNjZXNzVG9rZW46IG5ld0FjY2Vzc1Rva2VuPy50b2tlbiA/PyBudWxsXG4gICAgICB9KSk7XG4gICAgfSk7XG4gICAgc2Vzc2lvbi5vbkludmFsaWRhdGUoKCkgPT4ge1xuICAgICAgdG9rZW5TdG9yZS51cGRhdGUoKG9sZCkgPT4gKHtcbiAgICAgICAgLi4ub2xkLFxuICAgICAgICBhY2Nlc3NUb2tlbjogbnVsbCxcbiAgICAgICAgcmVmcmVzaFRva2VuOiBudWxsXG4gICAgICB9KSk7XG4gICAgfSk7XG4gICAgbGV0IHNlc3Npb25zQnlTZXNzaW9uS2V5ID0gdGhpcy5fc2Vzc2lvbnNCeVRva2VuU3RvcmVBbmRTZXNzaW9uS2V5LmdldCh0b2tlblN0b3JlKSA/PyAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIHRoaXMuX3Nlc3Npb25zQnlUb2tlblN0b3JlQW5kU2Vzc2lvbktleS5zZXQodG9rZW5TdG9yZSwgc2Vzc2lvbnNCeVNlc3Npb25LZXkpO1xuICAgIHNlc3Npb25zQnlTZXNzaW9uS2V5LnNldChzZXNzaW9uS2V5LCBzZXNzaW9uKTtcbiAgICByZXR1cm4gc2Vzc2lvbjtcbiAgfVxuICBhc3luYyBfZ2V0U2Vzc2lvbihvdmVycmlkZVRva2VuU3RvcmVJbml0KSB7XG4gICAgY29uc3QgdG9rZW5TdG9yZSA9IHRoaXMuX2dldE9yQ3JlYXRlVG9rZW5TdG9yZShhd2FpdCB0aGlzLl9jcmVhdGVDb29raWVIZWxwZXIoKSwgb3ZlcnJpZGVUb2tlblN0b3JlSW5pdCk7XG4gICAgcmV0dXJuIHRoaXMuX2dldFNlc3Npb25Gcm9tVG9rZW5TdG9yZSh0b2tlblN0b3JlKTtcbiAgfVxuICBfdXNlU2Vzc2lvbihvdmVycmlkZVRva2VuU3RvcmVJbml0KSB7XG4gICAgY29uc3QgdG9rZW5TdG9yZSA9IHRoaXMuX3VzZVRva2VuU3RvcmUob3ZlcnJpZGVUb2tlblN0b3JlSW5pdCk7XG4gICAgY29uc3Qgc3Vic2NyaWJlID0gdXNlQ2FsbGJhY2soKGNiKSA9PiB7XG4gICAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSB0b2tlblN0b3JlLm9uQ2hhbmdlKCgpID0+IHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICAgIH0sIFt0b2tlblN0b3JlXSk7XG4gICAgY29uc3QgZ2V0U25hcHNob3QgPSB1c2VDYWxsYmFjaygoKSA9PiB0aGlzLl9nZXRTZXNzaW9uRnJvbVRva2VuU3RvcmUodG9rZW5TdG9yZSksIFt0b2tlblN0b3JlXSk7XG4gICAgcmV0dXJuIFJlYWN0LnVzZVN5bmNFeHRlcm5hbFN0b3JlKHN1YnNjcmliZSwgZ2V0U25hcHNob3QsIGdldFNuYXBzaG90KTtcbiAgfVxuICBhc3luYyBfc2lnbkluVG9BY2NvdW50V2l0aFRva2Vucyh0b2tlbnMpIHtcbiAgICBpZiAoIShcImFjY2Vzc1Rva2VuXCIgaW4gdG9rZW5zKSB8fCAhKFwicmVmcmVzaFRva2VuXCIgaW4gdG9rZW5zKSkge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIHRva2VucyBvYmplY3Q7IGNhbid0IHNpZ24gaW4gd2l0aCB0aGlzXCIsIHsgdG9rZW5zIH0pO1xuICAgIH1cbiAgICBjb25zdCB0b2tlblN0b3JlID0gdGhpcy5fZ2V0T3JDcmVhdGVUb2tlblN0b3JlKGF3YWl0IHRoaXMuX2NyZWF0ZUNvb2tpZUhlbHBlcigpKTtcbiAgICB0b2tlblN0b3JlLnNldCh0b2tlbnMpO1xuICB9XG4gIF9oYXNQZXJzaXN0ZW50VG9rZW5TdG9yZShvdmVycmlkZVRva2VuU3RvcmVJbml0KSB7XG4gICAgcmV0dXJuIChvdmVycmlkZVRva2VuU3RvcmVJbml0ICE9PSB2b2lkIDAgPyBvdmVycmlkZVRva2VuU3RvcmVJbml0IDogdGhpcy5fdG9rZW5TdG9yZUluaXQpICE9PSBudWxsO1xuICB9XG4gIF9lbnN1cmVQZXJzaXN0ZW50VG9rZW5TdG9yZShvdmVycmlkZVRva2VuU3RvcmVJbml0KSB7XG4gICAgaWYgKCF0aGlzLl9oYXNQZXJzaXN0ZW50VG9rZW5TdG9yZShvdmVycmlkZVRva2VuU3RvcmVJbml0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNhbGwgdGhpcyBmdW5jdGlvbiBvbiBhIFN0YWNrIGFwcCB3aXRob3V0IGEgcGVyc2lzdGVudCB0b2tlbiBzdG9yZS4gTWFrZSBzdXJlIHRoZSB0b2tlblN0b3JlIG9wdGlvbiBvbiB0aGUgY29uc3RydWN0b3IgaXMgc2V0IHRvIGEgbm9uLW51bGwgdmFsdWUgd2hlbiBpbml0aWFsaXppbmcgU3RhY2suXFxuXFxuU3RhY2sgdXNlcyB0b2tlbiBzdG9yZXMgdG8gYWNjZXNzIGFjY2VzcyB0b2tlbnMgb2YgdGhlIGN1cnJlbnQgdXNlci4gRm9yIGV4YW1wbGUsIG9uIHdlYiBmcm9udGVuZHMgaXQgaXMgY29tbW9ubHkgdGhlIHN0cmluZyB2YWx1ZSAnY29va2llcycgZm9yIGNvb2tpZSBzdG9yYWdlLlwiKTtcbiAgICB9XG4gIH1cbiAgX2lzSW50ZXJuYWxQcm9qZWN0KCkge1xuICAgIHJldHVybiB0aGlzLnByb2plY3RJZCA9PT0gXCJpbnRlcm5hbFwiO1xuICB9XG4gIF9lbnN1cmVJbnRlcm5hbFByb2plY3QoKSB7XG4gICAgaWYgKCF0aGlzLl9pc0ludGVybmFsUHJvamVjdCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY2FsbCB0aGlzIGZ1bmN0aW9uIG9uIGEgU3RhY2sgYXBwIHdpdGggYSBwcm9qZWN0IElEIG90aGVyIHRoYW4gJ2ludGVybmFsJy5cIik7XG4gICAgfVxuICB9XG4gIF9jbGllbnRQcm9qZWN0RnJvbUNydWQoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZCxcbiAgICAgIGRpc3BsYXlOYW1lOiBjcnVkLmRpc3BsYXlfbmFtZSxcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBzaWduVXBFbmFibGVkOiBjcnVkLmNvbmZpZy5zaWduX3VwX2VuYWJsZWQsXG4gICAgICAgIGNyZWRlbnRpYWxFbmFibGVkOiBjcnVkLmNvbmZpZy5jcmVkZW50aWFsX2VuYWJsZWQsXG4gICAgICAgIG1hZ2ljTGlua0VuYWJsZWQ6IGNydWQuY29uZmlnLm1hZ2ljX2xpbmtfZW5hYmxlZCxcbiAgICAgICAgcGFzc2tleUVuYWJsZWQ6IGNydWQuY29uZmlnLnBhc3NrZXlfZW5hYmxlZCxcbiAgICAgICAgY2xpZW50VGVhbUNyZWF0aW9uRW5hYmxlZDogY3J1ZC5jb25maWcuY2xpZW50X3RlYW1fY3JlYXRpb25fZW5hYmxlZCxcbiAgICAgICAgY2xpZW50VXNlckRlbGV0aW9uRW5hYmxlZDogY3J1ZC5jb25maWcuY2xpZW50X3VzZXJfZGVsZXRpb25fZW5hYmxlZCxcbiAgICAgICAgYWxsb3dUZWFtQXBpS2V5czogY3J1ZC5jb25maWcuYWxsb3dfdGVhbV9hcGlfa2V5cyxcbiAgICAgICAgYWxsb3dVc2VyQXBpS2V5czogY3J1ZC5jb25maWcuYWxsb3dfdXNlcl9hcGlfa2V5cyxcbiAgICAgICAgb2F1dGhQcm92aWRlcnM6IGNydWQuY29uZmlnLmVuYWJsZWRfb2F1dGhfcHJvdmlkZXJzLm1hcCgocCkgPT4gKHtcbiAgICAgICAgICBpZDogcC5pZFxuICAgICAgICB9KSlcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jbGllbnRQZXJtaXNzaW9uRnJvbUNydWQoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZFxuICAgIH07XG4gIH1cbiAgX2NsaWVudFRlYW1Vc2VyRnJvbUNydWQoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC51c2VyX2lkLFxuICAgICAgdGVhbVByb2ZpbGU6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6IGNydWQuZGlzcGxheV9uYW1lLFxuICAgICAgICBwcm9maWxlSW1hZ2VVcmw6IGNydWQucHJvZmlsZV9pbWFnZV91cmxcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jbGllbnRUZWFtSW52aXRhdGlvbkZyb21DcnVkKHNlc3Npb24sIGNydWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGNydWQuaWQsXG4gICAgICByZWNpcGllbnRFbWFpbDogY3J1ZC5yZWNpcGllbnRfZW1haWwsXG4gICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKGNydWQuZXhwaXJlc19hdF9taWxsaXMpLFxuICAgICAgcmV2b2tlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5yZXZva2VUZWFtSW52aXRhdGlvbihjcnVkLmlkLCBjcnVkLnRlYW1faWQsIHNlc3Npb24pO1xuICAgICAgICBhd2FpdCB0aGlzLl90ZWFtSW52aXRhdGlvbnNDYWNoZS5yZWZyZXNoKFtzZXNzaW9uLCBjcnVkLnRlYW1faWRdKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9iYXNlQXBpS2V5RnJvbUNydWQoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZCxcbiAgICAgIGRlc2NyaXB0aW9uOiBjcnVkLmRlc2NyaXB0aW9uLFxuICAgICAgZXhwaXJlc0F0OiBjcnVkLmV4cGlyZXNfYXRfbWlsbGlzID8gbmV3IERhdGUoY3J1ZC5leHBpcmVzX2F0X21pbGxpcykgOiB2b2lkIDAsXG4gICAgICBtYW51YWxseVJldm9rZWRBdDogY3J1ZC5tYW51YWxseV9yZXZva2VkX2F0X21pbGxpcyA/IG5ldyBEYXRlKGNydWQubWFudWFsbHlfcmV2b2tlZF9hdF9taWxsaXMpIDogbnVsbCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoY3J1ZC5jcmVhdGVkX2F0X21pbGxpcyksXG4gICAgICAuLi5jcnVkLnR5cGUgPT09IFwidGVhbVwiID8geyB0eXBlOiBcInRlYW1cIiwgdGVhbUlkOiBjcnVkLnRlYW1faWQgfSA6IHsgdHlwZTogXCJ1c2VyXCIsIHVzZXJJZDogY3J1ZC51c2VyX2lkIH0sXG4gICAgICB2YWx1ZTogdHlwZW9mIGNydWQudmFsdWUgPT09IFwic3RyaW5nXCIgPyBjcnVkLnZhbHVlIDoge1xuICAgICAgICBsYXN0Rm91cjogY3J1ZC52YWx1ZS5sYXN0X2ZvdXJcbiAgICAgIH0sXG4gICAgICBpc1ZhbGlkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2h5SW52YWxpZCgpID09PSBudWxsO1xuICAgICAgfSxcbiAgICAgIHdoeUludmFsaWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5tYW51YWxseVJldm9rZWRBdCkge1xuICAgICAgICAgIHJldHVybiBcIm1hbnVhbGx5LXJldm9rZWRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leHBpcmVzQXQgJiYgdGhpcy5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgICAgICAgIHJldHVybiBcImV4cGlyZWRcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jbGllbnRBcGlLZXlGcm9tQ3J1ZChzZXNzaW9uLCBjcnVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMuX2Jhc2VBcGlLZXlGcm9tQ3J1ZChjcnVkKSxcbiAgICAgIGFzeW5jIHJldm9rZSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyByZXZva2VkOiB0cnVlIH0pO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZTogYXN5bmMgKG9wdGlvbnMpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5faW50ZXJmYWNlLnVwZGF0ZVByb2plY3RBcGlLZXkoY3J1ZC50eXBlID09PSBcInRlYW1cIiA/IHsgdGVhbV9pZDogY3J1ZC50ZWFtX2lkIH0gOiB7IHVzZXJfaWQ6IGNydWQudXNlcl9pZCB9LCBjcnVkLmlkLCBvcHRpb25zLCBzZXNzaW9uLCBcImNsaWVudFwiKTtcbiAgICAgICAgaWYgKGNydWQudHlwZSA9PT0gXCJ0ZWFtXCIpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLl90ZWFtQXBpS2V5c0NhY2hlLnJlZnJlc2goW3Nlc3Npb24sIGNydWQudGVhbV9pZF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuX3VzZXJBcGlLZXlzQ2FjaGUucmVmcmVzaChbc2Vzc2lvbl0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfY2xpZW50VGVhbUZyb21DcnVkKGNydWQsIHNlc3Npb24pIHtcbiAgICBjb25zdCBhcHAgPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZCxcbiAgICAgIGRpc3BsYXlOYW1lOiBjcnVkLmRpc3BsYXlfbmFtZSxcbiAgICAgIHByb2ZpbGVJbWFnZVVybDogY3J1ZC5wcm9maWxlX2ltYWdlX3VybCxcbiAgICAgIGNsaWVudE1ldGFkYXRhOiBjcnVkLmNsaWVudF9tZXRhZGF0YSxcbiAgICAgIGNsaWVudFJlYWRPbmx5TWV0YWRhdGE6IGNydWQuY2xpZW50X3JlYWRfb25seV9tZXRhZGF0YSxcbiAgICAgIGFzeW5jIGludml0ZVVzZXIob3B0aW9ucykge1xuICAgICAgICBhd2FpdCBhcHAuX2ludGVyZmFjZS5zZW5kVGVhbUludml0YXRpb24oe1xuICAgICAgICAgIHRlYW1JZDogY3J1ZC5pZCxcbiAgICAgICAgICBlbWFpbDogb3B0aW9ucy5lbWFpbCxcbiAgICAgICAgICBzZXNzaW9uLFxuICAgICAgICAgIGNhbGxiYWNrVXJsOiBvcHRpb25zLmNhbGxiYWNrVXJsID8/IGNvbnN0cnVjdFJlZGlyZWN0VXJsKGFwcC51cmxzLnRlYW1JbnZpdGF0aW9uLCBcImNhbGxiYWNrVXJsXCIpXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBhcHAuX3RlYW1JbnZpdGF0aW9uc0NhY2hlLnJlZnJlc2goW3Nlc3Npb24sIGNydWQuaWRdKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBsaXN0VXNlcnMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlc3VsdC5vclRocm93KGF3YWl0IGFwcC5fdGVhbU1lbWJlclByb2ZpbGVzQ2FjaGUuZ2V0T3JXYWl0KFtzZXNzaW9uLCBjcnVkLmlkXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5tYXAoKGNydWQyKSA9PiBhcHAuX2NsaWVudFRlYW1Vc2VyRnJvbUNydWQoY3J1ZDIpKTtcbiAgICAgIH0sXG4gICAgICB1c2VVc2VycygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdXNlQXN5bmNDYWNoZShhcHAuX3RlYW1NZW1iZXJQcm9maWxlc0NhY2hlLCBbc2Vzc2lvbiwgY3J1ZC5pZF0sIFwidGVhbS51c2VVc2VycygpXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50VGVhbVVzZXJGcm9tQ3J1ZChjcnVkMikpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGxpc3RJbnZpdGF0aW9ucygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgYXBwLl90ZWFtSW52aXRhdGlvbnNDYWNoZS5nZXRPcldhaXQoW3Nlc3Npb24sIGNydWQuaWRdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50VGVhbUludml0YXRpb25Gcm9tQ3J1ZChzZXNzaW9uLCBjcnVkMikpO1xuICAgICAgfSxcbiAgICAgIHVzZUludml0YXRpb25zKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB1c2VBc3luY0NhY2hlKGFwcC5fdGVhbUludml0YXRpb25zQ2FjaGUsIFtzZXNzaW9uLCBjcnVkLmlkXSwgXCJ0ZWFtLnVzZUludml0YXRpb25zKClcIik7XG4gICAgICAgIHJldHVybiByZXN1bHQubWFwKChjcnVkMikgPT4gYXBwLl9jbGllbnRUZWFtSW52aXRhdGlvbkZyb21DcnVkKHNlc3Npb24sIGNydWQyKSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdXBkYXRlKGRhdGEpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UudXBkYXRlVGVhbSh7IGRhdGE6IHRlYW1VcGRhdGVPcHRpb25zVG9DcnVkKGRhdGEpLCB0ZWFtSWQ6IGNydWQuaWQgfSwgc2Vzc2lvbik7XG4gICAgICAgIGF3YWl0IGFwcC5fY3VycmVudFVzZXJUZWFtc0NhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBkZWxldGUoKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLmRlbGV0ZVRlYW0oY3J1ZC5pZCwgc2Vzc2lvbik7XG4gICAgICAgIGF3YWl0IGFwcC5fY3VycmVudFVzZXJUZWFtc0NhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgICAgIH0sXG4gICAgICB1c2VBcGlLZXlzKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB1c2VBc3luY0NhY2hlKGFwcC5fdGVhbUFwaUtleXNDYWNoZSwgW3Nlc3Npb24sIGNydWQuaWRdLCBcInRlYW0udXNlQXBpS2V5cygpXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50QXBpS2V5RnJvbUNydWQoc2Vzc2lvbiwgY3J1ZDIpKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBsaXN0QXBpS2V5cygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IFJlc3VsdC5vclRocm93KGF3YWl0IGFwcC5fdGVhbUFwaUtleXNDYWNoZS5nZXRPcldhaXQoW3Nlc3Npb24sIGNydWQuaWRdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cy5tYXAoKGNydWQyKSA9PiBhcHAuX2NsaWVudEFwaUtleUZyb21DcnVkKHNlc3Npb24sIGNydWQyKSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgY3JlYXRlQXBpS2V5KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBwLl9pbnRlcmZhY2UuY3JlYXRlUHJvamVjdEFwaUtleShcbiAgICAgICAgICBhd2FpdCBhcGlLZXlDcmVhdGlvbk9wdGlvbnNUb0NydWQoXCJ0ZWFtXCIsIGNydWQuaWQsIG9wdGlvbnMpLFxuICAgICAgICAgIHNlc3Npb24sXG4gICAgICAgICAgXCJjbGllbnRcIlxuICAgICAgICApO1xuICAgICAgICBhd2FpdCBhcHAuX3RlYW1BcGlLZXlzQ2FjaGUucmVmcmVzaChbc2Vzc2lvbiwgY3J1ZC5pZF0pO1xuICAgICAgICByZXR1cm4gYXBwLl9jbGllbnRBcGlLZXlGcm9tQ3J1ZChzZXNzaW9uLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgX2NsaWVudENvbnRhY3RDaGFubmVsRnJvbUNydWQoY3J1ZCwgc2Vzc2lvbikge1xuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBjcnVkLmlkLFxuICAgICAgdmFsdWU6IGNydWQudmFsdWUsXG4gICAgICB0eXBlOiBjcnVkLnR5cGUsXG4gICAgICBpc1ZlcmlmaWVkOiBjcnVkLmlzX3ZlcmlmaWVkLFxuICAgICAgaXNQcmltYXJ5OiBjcnVkLmlzX3ByaW1hcnksXG4gICAgICB1c2VkRm9yQXV0aDogY3J1ZC51c2VkX2Zvcl9hdXRoLFxuICAgICAgYXN5bmMgc2VuZFZlcmlmaWNhdGlvbkVtYWlsKG9wdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2Uuc2VuZEN1cnJlbnRVc2VyQ29udGFjdENoYW5uZWxWZXJpZmljYXRpb25FbWFpbChcbiAgICAgICAgICBjcnVkLmlkLFxuICAgICAgICAgIG9wdGlvbnM/LmNhbGxiYWNrVXJsIHx8IGNvbnN0cnVjdFJlZGlyZWN0VXJsKGFwcC51cmxzLmVtYWlsVmVyaWZpY2F0aW9uLCBcImNhbGxiYWNrVXJsXCIpLFxuICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyB1cGRhdGUoZGF0YSkge1xuICAgICAgICBhd2FpdCBhcHAuX2ludGVyZmFjZS51cGRhdGVDbGllbnRDb250YWN0Q2hhbm5lbChjcnVkLmlkLCBjb250YWN0Q2hhbm5lbFVwZGF0ZU9wdGlvbnNUb0NydWQoZGF0YSksIHNlc3Npb24pO1xuICAgICAgICBhd2FpdCBhcHAuX2NsaWVudENvbnRhY3RDaGFubmVsc0NhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBkZWxldGUoKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLmRlbGV0ZUNsaWVudENvbnRhY3RDaGFubmVsKGNydWQuaWQsIHNlc3Npb24pO1xuICAgICAgICBhd2FpdCBhcHAuX2NsaWVudENvbnRhY3RDaGFubmVsc0NhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jcmVhdGVBdXRoKHNlc3Npb24pIHtcbiAgICBjb25zdCBhcHAgPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICBfaW50ZXJuYWxTZXNzaW9uOiBzZXNzaW9uLFxuICAgICAgY3VycmVudFNlc3Npb246IHtcbiAgICAgICAgYXN5bmMgZ2V0VG9rZW5zKCkge1xuICAgICAgICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IHNlc3Npb24uZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zKDJlNCk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0b2tlbnM/LmFjY2Vzc1Rva2VuLnRva2VuID8/IG51bGwsXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHRva2Vucz8ucmVmcmVzaFRva2VuPy50b2tlbiA/PyBudWxsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldEF1dGhIZWFkZXJzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIFwieC1zdGFjay1hdXRoXCI6IEpTT04uc3RyaW5naWZ5KGF3YWl0IHRoaXMuZ2V0QXV0aEpzb24oKSlcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRBdXRoSnNvbigpIHtcbiAgICAgICAgY29uc3QgdG9rZW5zID0gYXdhaXQgdGhpcy5jdXJyZW50U2Vzc2lvbi5nZXRUb2tlbnMoKTtcbiAgICAgICAgcmV0dXJuIHRva2VucztcbiAgICAgIH0sXG4gICAgICBhc3luYyByZWdpc3RlclBhc3NrZXkob3B0aW9ucykge1xuICAgICAgICBjb25zdCBob3N0bmFtZSA9IChhd2FpdCBhcHAuX2dldEN1cnJlbnRVcmwoKSk/Lmhvc3RuYW1lO1xuICAgICAgICBpZiAoIWhvc3RuYW1lKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJob3N0bmFtZSBtdXN0IGJlIHByb3ZpZGVkIGlmIHRoZSBTdGFjayBBcHAgZG9lcyBub3QgaGF2ZSBhIHJlZGlyZWN0IG1ldGhvZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbml0aWF0aW9uUmVzdWx0ID0gYXdhaXQgYXBwLl9pbnRlcmZhY2UuaW5pdGlhdGVQYXNza2V5UmVnaXN0cmF0aW9uKHt9LCBzZXNzaW9uKTtcbiAgICAgICAgaWYgKGluaXRpYXRpb25SZXN1bHQuc3RhdHVzICE9PSBcIm9rXCIpIHtcbiAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKG5ldyBLbm93bkVycm9ycy5QYXNza2V5UmVnaXN0cmF0aW9uRmFpbGVkKFwiRmFpbGVkIHRvIGdldCBpbml0aWF0aW9uIG9wdGlvbnMgZm9yIHBhc3NrZXkgcmVnaXN0cmF0aW9uXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG9wdGlvbnNfanNvbiwgY29kZSB9ID0gaW5pdGlhdGlvblJlc3VsdC5kYXRhO1xuICAgICAgICBpZiAob3B0aW9uc19qc29uLnJwLmlkICE9PSBcIlRISVNfVkFMVUVfV0lMTF9CRV9SRVBMQUNFRC5leGFtcGxlLmNvbVwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYEV4cGVjdGVkIHJldHVybmVkIFJQIElEIGZyb20gc2VydmVyIHRvIGVxdWFsIHNlbnRpbmVsLCBidXQgZm91bmQgJHtvcHRpb25zX2pzb24ucnAuaWR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9uc19qc29uLnJwLmlkID0gaG9zdG5hbWU7XG4gICAgICAgIGxldCBhdHRSZXNwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF0dFJlc3AgPSBhd2FpdCBzdGFydFJlZ2lzdHJhdGlvbih7IG9wdGlvbnNKU09OOiBvcHRpb25zX2pzb24gfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgV2ViQXV0aG5FcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihuZXcgS25vd25FcnJvcnMuUGFzc2tleVdlYkF1dGhuRXJyb3IoZXJyb3IubWVzc2FnZSwgZXJyb3IubmFtZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYXB0dXJlRXJyb3IoXCJwYXNza2V5LXJlZ2lzdHJhdGlvbi1mYWlsZWRcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihuZXcgS25vd25FcnJvcnMuUGFzc2tleVJlZ2lzdHJhdGlvbkZhaWxlZChcIkZhaWxlZCB0byBzdGFydCBwYXNza2V5IHJlZ2lzdHJhdGlvbiBkdWUgdG8gdW5rbm93biBlcnJvclwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvblJlc3VsdCA9IGF3YWl0IGFwcC5faW50ZXJmYWNlLnJlZ2lzdGVyUGFzc2tleSh7IGNyZWRlbnRpYWw6IGF0dFJlc3AsIGNvZGUgfSwgc2Vzc2lvbik7XG4gICAgICAgIGF3YWl0IGFwcC5fcmVmcmVzaFVzZXIoc2Vzc2lvbik7XG4gICAgICAgIHJldHVybiByZWdpc3RyYXRpb25SZXN1bHQ7XG4gICAgICB9LFxuICAgICAgc2lnbk91dChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBhcHAuX3NpZ25PdXQoc2Vzc2lvbiwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfZWRpdGFibGVUZWFtUHJvZmlsZUZyb21DcnVkKGNydWQsIHNlc3Npb24pIHtcbiAgICBjb25zdCBhcHAgPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwbGF5TmFtZTogY3J1ZC5kaXNwbGF5X25hbWUsXG4gICAgICBwcm9maWxlSW1hZ2VVcmw6IGNydWQucHJvZmlsZV9pbWFnZV91cmwsXG4gICAgICBhc3luYyB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLnVwZGF0ZVRlYW1NZW1iZXJQcm9maWxlKHtcbiAgICAgICAgICB0ZWFtSWQ6IGNydWQudGVhbV9pZCxcbiAgICAgICAgICB1c2VySWQ6IGNydWQudXNlcl9pZCxcbiAgICAgICAgICBwcm9maWxlOiB7XG4gICAgICAgICAgICBkaXNwbGF5X25hbWU6IHVwZGF0ZS5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHByb2ZpbGVfaW1hZ2VfdXJsOiB1cGRhdGUucHJvZmlsZUltYWdlVXJsXG4gICAgICAgICAgfVxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICAgICAgYXdhaXQgYXBwLl9jdXJyZW50VXNlclRlYW1Qcm9maWxlQ2FjaGUucmVmcmVzaChbc2Vzc2lvbiwgY3J1ZC50ZWFtX2lkXSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfY3JlYXRlQmFzZVVzZXIoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZCxcbiAgICAgIGRpc3BsYXlOYW1lOiBjcnVkLmRpc3BsYXlfbmFtZSxcbiAgICAgIHByaW1hcnlFbWFpbDogY3J1ZC5wcmltYXJ5X2VtYWlsLFxuICAgICAgcHJpbWFyeUVtYWlsVmVyaWZpZWQ6IGNydWQucHJpbWFyeV9lbWFpbF92ZXJpZmllZCxcbiAgICAgIHByb2ZpbGVJbWFnZVVybDogY3J1ZC5wcm9maWxlX2ltYWdlX3VybCxcbiAgICAgIHNpZ25lZFVwQXQ6IG5ldyBEYXRlKGNydWQuc2lnbmVkX3VwX2F0X21pbGxpcyksXG4gICAgICBjbGllbnRNZXRhZGF0YTogY3J1ZC5jbGllbnRfbWV0YWRhdGEsXG4gICAgICBjbGllbnRSZWFkT25seU1ldGFkYXRhOiBjcnVkLmNsaWVudF9yZWFkX29ubHlfbWV0YWRhdGEsXG4gICAgICBoYXNQYXNzd29yZDogY3J1ZC5oYXNfcGFzc3dvcmQsXG4gICAgICBlbWFpbEF1dGhFbmFibGVkOiBjcnVkLmF1dGhfd2l0aF9lbWFpbCxcbiAgICAgIG90cEF1dGhFbmFibGVkOiBjcnVkLm90cF9hdXRoX2VuYWJsZWQsXG4gICAgICBvYXV0aFByb3ZpZGVyczogY3J1ZC5vYXV0aF9wcm92aWRlcnMsXG4gICAgICBwYXNza2V5QXV0aEVuYWJsZWQ6IGNydWQucGFzc2tleV9hdXRoX2VuYWJsZWQsXG4gICAgICBpc011bHRpRmFjdG9yUmVxdWlyZWQ6IGNydWQucmVxdWlyZXNfdG90cF9tZmEsXG4gICAgICBpc0Fub255bW91czogY3J1ZC5pc19hbm9ueW1vdXMsXG4gICAgICB0b0NsaWVudEpzb24oKSB7XG4gICAgICAgIHJldHVybiBjcnVkO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgX2NyZWF0ZVVzZXJFeHRyYUZyb21DdXJyZW50KGNydWQsIHNlc3Npb24pIHtcbiAgICBjb25zdCBhcHAgPSB0aGlzO1xuICAgIGFzeW5jIGZ1bmN0aW9uIGdldENvbm5lY3RlZEFjY291bnQoaWQsIG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IHNjb3BlU3RyaW5nID0gb3B0aW9ucz8uc2NvcGVzPy5qb2luKFwiIFwiKTtcbiAgICAgIHJldHVybiBSZXN1bHQub3JUaHJvdyhhd2FpdCBhcHAuX2N1cnJlbnRVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGUuZ2V0T3JXYWl0KFtzZXNzaW9uLCBpZCwgc2NvcGVTdHJpbmcgfHwgXCJcIiwgb3B0aW9ucz8ub3IgPT09IFwicmVkaXJlY3RcIl0sIFwid3JpdGUtb25seVwiKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVzZUNvbm5lY3RlZEFjY291bnQoaWQsIG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IHNjb3BlU3RyaW5nID0gb3B0aW9ucz8uc2NvcGVzPy5qb2luKFwiIFwiKTtcbiAgICAgIHJldHVybiB1c2VBc3luY0NhY2hlKGFwcC5fY3VycmVudFVzZXJPQXV0aENvbm5lY3Rpb25DYWNoZSwgW3Nlc3Npb24sIGlkLCBzY29wZVN0cmluZyB8fCBcIlwiLCBvcHRpb25zPy5vciA9PT0gXCJyZWRpcmVjdFwiXSwgXCJ1c2VyLnVzZUNvbm5lY3RlZEFjY291bnQoKVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFzeW5jIGdldEFjdGl2ZVNlc3Npb25zKCkge1xuICAgICAgICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IGFwcC5faW50ZXJmYWNlLmxpc3RTZXNzaW9ucyhzZXNzaW9uKTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb25zLml0ZW1zLm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50U2Vzc2lvbkZyb21DcnVkKGNydWQyKSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgcmV2b2tlU2Vzc2lvbihzZXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UuZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQsIHNlc3Npb24pO1xuICAgICAgfSxcbiAgICAgIHNldERpc3BsYXlOYW1lKGRpc3BsYXlOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZSh7IGRpc3BsYXlOYW1lIH0pO1xuICAgICAgfSxcbiAgICAgIHNldENsaWVudE1ldGFkYXRhKG1ldGFkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZSh7IGNsaWVudE1ldGFkYXRhOiBtZXRhZGF0YSB9KTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBzZXRTZWxlY3RlZFRlYW0odGVhbSkge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IHNlbGVjdGVkVGVhbUlkOiB0ZWFtPy5pZCA/PyBudWxsIH0pO1xuICAgICAgfSxcbiAgICAgIGdldENvbm5lY3RlZEFjY291bnQsXG4gICAgICB1c2VDb25uZWN0ZWRBY2NvdW50LFxuICAgICAgLy8gVEhJU19MSU5FX1BMQVRGT1JNIHJlYWN0LWxpa2VcbiAgICAgIGFzeW5jIGdldFRlYW0odGVhbUlkKSB7XG4gICAgICAgIGNvbnN0IHRlYW1zID0gYXdhaXQgdGhpcy5saXN0VGVhbXMoKTtcbiAgICAgICAgcmV0dXJuIHRlYW1zLmZpbmQoKHQpID0+IHQuaWQgPT09IHRlYW1JZCkgPz8gbnVsbDtcbiAgICAgIH0sXG4gICAgICB1c2VUZWFtKHRlYW1JZCkge1xuICAgICAgICBjb25zdCB0ZWFtcyA9IHRoaXMudXNlVGVhbXMoKTtcbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0ZWFtcy5maW5kKCh0KSA9PiB0LmlkID09PSB0ZWFtSWQpID8/IG51bGw7XG4gICAgICAgIH0sIFt0ZWFtcywgdGVhbUlkXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGlzdFRlYW1zKCkge1xuICAgICAgICBjb25zdCB0ZWFtcyA9IFJlc3VsdC5vclRocm93KGF3YWl0IGFwcC5fY3VycmVudFVzZXJUZWFtc0NhY2hlLmdldE9yV2FpdChbc2Vzc2lvbl0sIFwid3JpdGUtb25seVwiKSk7XG4gICAgICAgIHJldHVybiB0ZWFtcy5tYXAoKGNydWQyKSA9PiBhcHAuX2NsaWVudFRlYW1Gcm9tQ3J1ZChjcnVkMiwgc2Vzc2lvbikpO1xuICAgICAgfSxcbiAgICAgIHVzZVRlYW1zKCkge1xuICAgICAgICBjb25zdCB0ZWFtcyA9IHVzZUFzeW5jQ2FjaGUoYXBwLl9jdXJyZW50VXNlclRlYW1zQ2FjaGUsIFtzZXNzaW9uXSwgXCJ1c2VyLnVzZVRlYW1zKClcIik7XG4gICAgICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHRlYW1zLm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50VGVhbUZyb21DcnVkKGNydWQyLCBzZXNzaW9uKSksIFt0ZWFtc10pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGNyZWF0ZVRlYW0oZGF0YSkge1xuICAgICAgICBjb25zdCBjcnVkMiA9IGF3YWl0IGFwcC5faW50ZXJmYWNlLmNyZWF0ZUNsaWVudFRlYW0odGVhbUNyZWF0ZU9wdGlvbnNUb0NydWQoZGF0YSwgXCJtZVwiKSwgc2Vzc2lvbik7XG4gICAgICAgIGF3YWl0IGFwcC5fY3VycmVudFVzZXJUZWFtc0NhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyBzZWxlY3RlZFRlYW1JZDogY3J1ZDIuaWQgfSk7XG4gICAgICAgIHJldHVybiBhcHAuX2NsaWVudFRlYW1Gcm9tQ3J1ZChjcnVkMiwgc2Vzc2lvbik7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGVhdmVUZWFtKHRlYW0pIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UubGVhdmVUZWFtKHRlYW0uaWQsIHNlc3Npb24pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGxpc3RQZXJtaXNzaW9ucyhzY29wZU9yT3B0aW9ucywgb3B0aW9ucykge1xuICAgICAgICBpZiAoc2NvcGVPck9wdGlvbnMgJiYgXCJpZFwiIGluIHNjb3BlT3JPcHRpb25zKSB7XG4gICAgICAgICAgY29uc3Qgc2NvcGUgPSBzY29wZU9yT3B0aW9ucztcbiAgICAgICAgICBjb25zdCByZWN1cnNpdmUgPSBvcHRpb25zPy5yZWN1cnNpdmUgPz8gdHJ1ZTtcbiAgICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IFJlc3VsdC5vclRocm93KGF3YWl0IGFwcC5fY3VycmVudFVzZXJQZXJtaXNzaW9uc0NhY2hlLmdldE9yV2FpdChbc2Vzc2lvbiwgc2NvcGUuaWQsIHJlY3Vyc2l2ZV0sIFwid3JpdGUtb25seVwiKSk7XG4gICAgICAgICAgcmV0dXJuIHBlcm1pc3Npb25zLm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50UGVybWlzc2lvbkZyb21DcnVkKGNydWQyKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3B0cyA9IHNjb3BlT3JPcHRpb25zO1xuICAgICAgICAgIGNvbnN0IHJlY3Vyc2l2ZSA9IG9wdHM/LnJlY3Vyc2l2ZSA/PyB0cnVlO1xuICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgYXBwLl9jdXJyZW50VXNlclByb2plY3RQZXJtaXNzaW9uc0NhY2hlLmdldE9yV2FpdChbc2Vzc2lvbiwgcmVjdXJzaXZlXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICAgICAgICByZXR1cm4gcGVybWlzc2lvbnMubWFwKChjcnVkMikgPT4gYXBwLl9jbGllbnRQZXJtaXNzaW9uRnJvbUNydWQoY3J1ZDIpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVzZVBlcm1pc3Npb25zKHNjb3BlT3JPcHRpb25zLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChzY29wZU9yT3B0aW9ucyAmJiBcImlkXCIgaW4gc2NvcGVPck9wdGlvbnMpIHtcbiAgICAgICAgICBjb25zdCBzY29wZSA9IHNjb3BlT3JPcHRpb25zO1xuICAgICAgICAgIGNvbnN0IHJlY3Vyc2l2ZSA9IG9wdGlvbnM/LnJlY3Vyc2l2ZSA/PyB0cnVlO1xuICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gdXNlQXN5bmNDYWNoZShhcHAuX2N1cnJlbnRVc2VyUGVybWlzc2lvbnNDYWNoZSwgW3Nlc3Npb24sIHNjb3BlLmlkLCByZWN1cnNpdmVdLCBcInVzZXIudXNlUGVybWlzc2lvbnMoKVwiKTtcbiAgICAgICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiBwZXJtaXNzaW9ucy5tYXAoKGNydWQyKSA9PiBhcHAuX2NsaWVudFBlcm1pc3Npb25Gcm9tQ3J1ZChjcnVkMikpLCBbcGVybWlzc2lvbnNdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcHRzID0gc2NvcGVPck9wdGlvbnM7XG4gICAgICAgICAgY29uc3QgcmVjdXJzaXZlID0gb3B0cz8ucmVjdXJzaXZlID8/IHRydWU7XG4gICAgICAgICAgY29uc3QgcGVybWlzc2lvbnMgPSB1c2VBc3luY0NhY2hlKGFwcC5fY3VycmVudFVzZXJQcm9qZWN0UGVybWlzc2lvbnNDYWNoZSwgW3Nlc3Npb24sIHJlY3Vyc2l2ZV0sIFwidXNlci51c2VQZXJtaXNzaW9ucygpXCIpO1xuICAgICAgICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHBlcm1pc3Npb25zLm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50UGVybWlzc2lvbkZyb21DcnVkKGNydWQyKSksIFtwZXJtaXNzaW9uc10pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXNlUGVybWlzc2lvbihzY29wZU9yUGVybWlzc2lvbklkLCBwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgaWYgKHNjb3BlT3JQZXJtaXNzaW9uSWQgJiYgdHlwZW9mIHNjb3BlT3JQZXJtaXNzaW9uSWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBjb25zdCBzY29wZSA9IHNjb3BlT3JQZXJtaXNzaW9uSWQ7XG4gICAgICAgICAgY29uc3QgcGVybWlzc2lvbnMgPSB0aGlzLnVzZVBlcm1pc3Npb25zKHNjb3BlKTtcbiAgICAgICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiBwZXJtaXNzaW9ucy5maW5kKChwKSA9PiBwLmlkID09PSBwZXJtaXNzaW9uSWQpID8/IG51bGwsIFtwZXJtaXNzaW9ucywgcGVybWlzc2lvbklkXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgcGlkID0gc2NvcGVPclBlcm1pc3Npb25JZDtcbiAgICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IHRoaXMudXNlUGVybWlzc2lvbnMoKTtcbiAgICAgICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiBwZXJtaXNzaW9ucy5maW5kKChwKSA9PiBwLmlkID09PSBwaWQpID8/IG51bGwsIFtwZXJtaXNzaW9ucywgcGlkXSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRQZXJtaXNzaW9uKHNjb3BlT3JQZXJtaXNzaW9uSWQsIHBlcm1pc3Npb25JZCkge1xuICAgICAgICBpZiAoc2NvcGVPclBlcm1pc3Npb25JZCAmJiB0eXBlb2Ygc2NvcGVPclBlcm1pc3Npb25JZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHNjb3BlID0gc2NvcGVPclBlcm1pc3Npb25JZDtcbiAgICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IGF3YWl0IHRoaXMubGlzdFBlcm1pc3Npb25zKHNjb3BlKTtcbiAgICAgICAgICByZXR1cm4gcGVybWlzc2lvbnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcGVybWlzc2lvbklkKSA/PyBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHBpZCA9IHNjb3BlT3JQZXJtaXNzaW9uSWQ7XG4gICAgICAgICAgY29uc3QgcGVybWlzc2lvbnMgPSBhd2FpdCB0aGlzLmxpc3RQZXJtaXNzaW9ucygpO1xuICAgICAgICAgIHJldHVybiBwZXJtaXNzaW9ucy5maW5kKChwKSA9PiBwLmlkID09PSBwaWQpID8/IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyBoYXNQZXJtaXNzaW9uKHNjb3BlT3JQZXJtaXNzaW9uSWQsIHBlcm1pc3Npb25JZCkge1xuICAgICAgICBpZiAoc2NvcGVPclBlcm1pc3Npb25JZCAmJiB0eXBlb2Ygc2NvcGVPclBlcm1pc3Npb25JZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHNjb3BlID0gc2NvcGVPclBlcm1pc3Npb25JZDtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRQZXJtaXNzaW9uKHNjb3BlLCBwZXJtaXNzaW9uSWQpICE9PSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHBpZCA9IHNjb3BlT3JQZXJtaXNzaW9uSWQ7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0UGVybWlzc2lvbihwaWQpICE9PSBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgYXBwLl91cGRhdGVDbGllbnRVc2VyKHVwZGF0ZSwgc2Vzc2lvbik7XG4gICAgICB9LFxuICAgICAgYXN5bmMgc2VuZFZlcmlmaWNhdGlvbkVtYWlsKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFjcnVkLnByaW1hcnlfZW1haWwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlVzZXIgZG9lcyBub3QgaGF2ZSBhIHByaW1hcnkgZW1haWxcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IGFwcC5faW50ZXJmYWNlLnNlbmRWZXJpZmljYXRpb25FbWFpbChcbiAgICAgICAgICBjcnVkLnByaW1hcnlfZW1haWwsXG4gICAgICAgICAgb3B0aW9ucz8uY2FsbGJhY2tVcmwgPz8gY29uc3RydWN0UmVkaXJlY3RVcmwoYXBwLnVybHMuZW1haWxWZXJpZmljYXRpb24sIFwiY2FsbGJhY2tVcmxcIiksXG4gICAgICAgICAgc2Vzc2lvblxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHVwZGF0ZVBhc3N3b3JkKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBwLl9pbnRlcmZhY2UudXBkYXRlUGFzc3dvcmQob3B0aW9ucywgc2Vzc2lvbik7XG4gICAgICAgIGF3YWl0IGFwcC5fY3VycmVudFVzZXJDYWNoZS5yZWZyZXNoKFtzZXNzaW9uXSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgICAgYXN5bmMgc2V0UGFzc3dvcmQob3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5zZXRQYXNzd29yZChvcHRpb25zLCBzZXNzaW9uKTtcbiAgICAgICAgYXdhaXQgYXBwLl9jdXJyZW50VXNlckNhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBzZWxlY3RlZFRlYW06IGNydWQuc2VsZWN0ZWRfdGVhbSAmJiB0aGlzLl9jbGllbnRUZWFtRnJvbUNydWQoY3J1ZC5zZWxlY3RlZF90ZWFtLCBzZXNzaW9uKSxcbiAgICAgIGFzeW5jIGdldFRlYW1Qcm9maWxlKHRlYW0pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgYXBwLl9jdXJyZW50VXNlclRlYW1Qcm9maWxlQ2FjaGUuZ2V0T3JXYWl0KFtzZXNzaW9uLCB0ZWFtLmlkXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICAgICAgcmV0dXJuIGFwcC5fZWRpdGFibGVUZWFtUHJvZmlsZUZyb21DcnVkKHJlc3VsdCwgc2Vzc2lvbik7XG4gICAgICB9LFxuICAgICAgdXNlVGVhbVByb2ZpbGUodGVhbSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB1c2VBc3luY0NhY2hlKGFwcC5fY3VycmVudFVzZXJUZWFtUHJvZmlsZUNhY2hlLCBbc2Vzc2lvbiwgdGVhbS5pZF0sIFwidXNlci51c2VUZWFtUHJvZmlsZSgpXCIpO1xuICAgICAgICByZXR1cm4gYXBwLl9lZGl0YWJsZVRlYW1Qcm9maWxlRnJvbUNydWQocmVzdWx0LCBzZXNzaW9uKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBkZWxldGUoKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLmRlbGV0ZUN1cnJlbnRVc2VyKHNlc3Npb24pO1xuICAgICAgICBzZXNzaW9uLm1hcmtJbnZhbGlkKCk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGlzdENvbnRhY3RDaGFubmVscygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgYXBwLl9jbGllbnRDb250YWN0Q2hhbm5lbHNDYWNoZS5nZXRPcldhaXQoW3Nlc3Npb25dLCBcIndyaXRlLW9ubHlcIikpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50Q29udGFjdENoYW5uZWxGcm9tQ3J1ZChjcnVkMiwgc2Vzc2lvbikpO1xuICAgICAgfSxcbiAgICAgIHVzZUNvbnRhY3RDaGFubmVscygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdXNlQXN5bmNDYWNoZShhcHAuX2NsaWVudENvbnRhY3RDaGFubmVsc0NhY2hlLCBbc2Vzc2lvbl0sIFwidXNlci51c2VDb250YWN0Q2hhbm5lbHMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5tYXAoKGNydWQyKSA9PiBhcHAuX2NsaWVudENvbnRhY3RDaGFubmVsRnJvbUNydWQoY3J1ZDIsIHNlc3Npb24pKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBjcmVhdGVDb250YWN0Q2hhbm5lbChkYXRhKSB7XG4gICAgICAgIGNvbnN0IGNydWQyID0gYXdhaXQgYXBwLl9pbnRlcmZhY2UuY3JlYXRlQ2xpZW50Q29udGFjdENoYW5uZWwoY29udGFjdENoYW5uZWxDcmVhdGVPcHRpb25zVG9DcnVkKFwibWVcIiwgZGF0YSksIHNlc3Npb24pO1xuICAgICAgICBhd2FpdCBhcHAuX2NsaWVudENvbnRhY3RDaGFubmVsc0NhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgICAgICAgcmV0dXJuIGFwcC5fY2xpZW50Q29udGFjdENoYW5uZWxGcm9tQ3J1ZChjcnVkMiwgc2Vzc2lvbik7XG4gICAgICB9LFxuICAgICAgdXNlQXBpS2V5cygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdXNlQXN5bmNDYWNoZShhcHAuX3VzZXJBcGlLZXlzQ2FjaGUsIFtzZXNzaW9uXSwgXCJ1c2VyLnVzZUFwaUtleXMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5tYXAoKGNydWQyKSA9PiBhcHAuX2NsaWVudEFwaUtleUZyb21DcnVkKHNlc3Npb24sIGNydWQyKSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGlzdEFwaUtleXMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5saXN0UHJvamVjdEFwaUtleXMoeyB1c2VyX2lkOiBcIm1lXCIgfSwgc2Vzc2lvbiwgXCJjbGllbnRcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRzLm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50QXBpS2V5RnJvbUNydWQoc2Vzc2lvbiwgY3J1ZDIpKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBjcmVhdGVBcGlLZXkob3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5jcmVhdGVQcm9qZWN0QXBpS2V5KFxuICAgICAgICAgIGF3YWl0IGFwaUtleUNyZWF0aW9uT3B0aW9uc1RvQ3J1ZChcInVzZXJcIiwgXCJtZVwiLCBvcHRpb25zKSxcbiAgICAgICAgICBzZXNzaW9uLFxuICAgICAgICAgIFwiY2xpZW50XCJcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgYXBwLl91c2VyQXBpS2V5c0NhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgICAgICAgcmV0dXJuIGFwcC5fY2xpZW50QXBpS2V5RnJvbUNydWQoc2Vzc2lvbiwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jcmVhdGVJbnRlcm5hbFVzZXJFeHRyYShzZXNzaW9uKSB7XG4gICAgY29uc3QgYXBwID0gdGhpcztcbiAgICB0aGlzLl9lbnN1cmVJbnRlcm5hbFByb2plY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlUHJvamVjdChuZXdQcm9qZWN0KSB7XG4gICAgICAgIHJldHVybiBhcHAuX2NyZWF0ZVByb2plY3Qoc2Vzc2lvbiwgbmV3UHJvamVjdCk7XG4gICAgICB9LFxuICAgICAgbGlzdE93bmVkUHJvamVjdHMoKSB7XG4gICAgICAgIHJldHVybiBhcHAuX2xpc3RPd25lZFByb2plY3RzKHNlc3Npb24pO1xuICAgICAgfSxcbiAgICAgIHVzZU93bmVkUHJvamVjdHMoKSB7XG4gICAgICAgIHJldHVybiBhcHAuX3VzZU93bmVkUHJvamVjdHMoc2Vzc2lvbik7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfY3VycmVudFVzZXJGcm9tQ3J1ZChjcnVkLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB7XG4gICAgICAuLi50aGlzLl9jcmVhdGVCYXNlVXNlcihjcnVkKSxcbiAgICAgIC4uLnRoaXMuX2NyZWF0ZUF1dGgoc2Vzc2lvbiksXG4gICAgICAuLi50aGlzLl9jcmVhdGVVc2VyRXh0cmFGcm9tQ3VycmVudChjcnVkLCBzZXNzaW9uKSxcbiAgICAgIC4uLnRoaXMuX2lzSW50ZXJuYWxQcm9qZWN0KCkgPyB0aGlzLl9jcmVhdGVJbnRlcm5hbFVzZXJFeHRyYShzZXNzaW9uKSA6IHt9XG4gICAgfTtcbiAgICBPYmplY3QuZnJlZXplKGN1cnJlbnRVc2VyKTtcbiAgICByZXR1cm4gY3VycmVudFVzZXI7XG4gIH1cbiAgX2NsaWVudFNlc3Npb25Gcm9tQ3J1ZChjcnVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBjcnVkLmlkLFxuICAgICAgdXNlcklkOiBjcnVkLnVzZXJfaWQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGNydWQuY3JlYXRlZF9hdCksXG4gICAgICBpc0ltcGVyc29uYXRpb246IGNydWQuaXNfaW1wZXJzb25hdGlvbixcbiAgICAgIGxhc3RVc2VkQXQ6IGNydWQubGFzdF91c2VkX2F0ID8gbmV3IERhdGUoY3J1ZC5sYXN0X3VzZWRfYXQpIDogdm9pZCAwLFxuICAgICAgaXNDdXJyZW50U2Vzc2lvbjogY3J1ZC5pc19jdXJyZW50X3Nlc3Npb24gPz8gZmFsc2UsXG4gICAgICBnZW9JbmZvOiBjcnVkLmxhc3RfdXNlZF9hdF9lbmRfdXNlcl9pcF9pbmZvXG4gICAgfTtcbiAgfVxuICBfZ2V0T3duZWRBZG1pbkFwcChmb3JQcm9qZWN0SWQsIHNlc3Npb24pIHtcbiAgICBpZiAoIXRoaXMuX293bmVkQWRtaW5BcHBzLmhhcyhbc2Vzc2lvbiwgZm9yUHJvamVjdElkXSkpIHtcbiAgICAgIHRoaXMuX293bmVkQWRtaW5BcHBzLnNldChbc2Vzc2lvbiwgZm9yUHJvamVjdElkXSwgbmV3IF9fU3RhY2tDbGllbnRBcHBJbXBsSW5jb21wbGV0ZS5MYXp5U3RhY2tBZG1pbkFwcEltcGwudmFsdWUoe1xuICAgICAgICBiYXNlVXJsOiB0aGlzLl9pbnRlcmZhY2Uub3B0aW9ucy5nZXRCYXNlVXJsKCksXG4gICAgICAgIHByb2plY3RJZDogZm9yUHJvamVjdElkLFxuICAgICAgICB0b2tlblN0b3JlOiBudWxsLFxuICAgICAgICBwcm9qZWN0T3duZXJTZXNzaW9uOiBzZXNzaW9uLFxuICAgICAgICBub0F1dG9tYXRpY1ByZWZldGNoOiB0cnVlXG4gICAgICB9KSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9vd25lZEFkbWluQXBwcy5nZXQoW3Nlc3Npb24sIGZvclByb2plY3RJZF0pO1xuICB9XG4gIGdldCBwcm9qZWN0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyZmFjZS5wcm9qZWN0SWQ7XG4gIH1cbiAgYXN5bmMgX2lzVHJ1c3RlZCh1cmwpIHtcbiAgICByZXR1cm4gaXNSZWxhdGl2ZSh1cmwpO1xuICB9XG4gIGdldCB1cmxzKCkge1xuICAgIHJldHVybiBnZXRVcmxzKHRoaXMuX3VybE9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIF9nZXRDdXJyZW50VXJsKCkge1xuICAgIGlmICh0aGlzLl9yZWRpcmVjdE1ldGhvZCA9PT0gXCJub25lXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gIH1cbiAgYXN5bmMgX3JlZGlyZWN0VG8ob3B0aW9ucykge1xuICAgIGlmICh0aGlzLl9yZWRpcmVjdE1ldGhvZCA9PT0gXCJub25lXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGlzUmVhY3RTZXJ2ZXIyICYmIHRoaXMuX3JlZGlyZWN0TWV0aG9kID09PSBcIm5leHRqc1wiKSB7XG4gICAgICBOZXh0TmF2aWdhdGlvbi5yZWRpcmVjdChvcHRpb25zLnVybC50b1N0cmluZygpLCBvcHRpb25zLnJlcGxhY2UgPyBOZXh0TmF2aWdhdGlvbi5SZWRpcmVjdFR5cGUucmVwbGFjZSA6IE5leHROYXZpZ2F0aW9uLlJlZGlyZWN0VHlwZS5wdXNoKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLl9yZWRpcmVjdE1ldGhvZCA9PT0gXCJvYmplY3RcIiAmJiB0aGlzLl9yZWRpcmVjdE1ldGhvZC5uYXZpZ2F0ZSkge1xuICAgICAgdGhpcy5fcmVkaXJlY3RNZXRob2QubmF2aWdhdGUob3B0aW9ucy51cmwudG9TdHJpbmcoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2Uob3B0aW9ucy51cmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihvcHRpb25zLnVybCk7XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHdhaXQoMmUzKTtcbiAgfVxuICB1c2VOYXZpZ2F0ZSgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX3JlZGlyZWN0TWV0aG9kID09PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVkaXJlY3RNZXRob2QudXNlTmF2aWdhdGUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3JlZGlyZWN0TWV0aG9kID09PSBcIndpbmRvd1wiKSB7XG4gICAgICByZXR1cm4gKHRvKSA9PiB3aW5kb3cubG9jYXRpb24uYXNzaWduKHRvKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3JlZGlyZWN0TWV0aG9kID09PSBcIm5leHRqc1wiKSB7XG4gICAgICBjb25zdCByb3V0ZXIgPSBOZXh0TmF2aWdhdGlvbi51c2VSb3V0ZXIoKTtcbiAgICAgIHJldHVybiAodG8pID0+IHJvdXRlci5wdXNoKHRvKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICh0bykgPT4ge1xuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX3JlZGlyZWN0SWZUcnVzdGVkKHVybCwgb3B0aW9ucykge1xuICAgIGlmICghYXdhaXQgdGhpcy5faXNUcnVzdGVkKHVybCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUmVkaXJlY3QgVVJMICR7dXJsfSBpcyBub3QgdHJ1c3RlZDsgc2hvdWxkIGJlIHJlbGF0aXZlLmApO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUbyh7IHVybCwgLi4ub3B0aW9ucyB9KTtcbiAgfVxuICBhc3luYyBfcmVkaXJlY3RUb0hhbmRsZXIoaGFuZGxlck5hbWUsIG9wdGlvbnMpIHtcbiAgICBsZXQgdXJsID0gdGhpcy51cmxzW2hhbmRsZXJOYW1lXTtcbiAgICBpZiAoIXVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBVUkwgZm9yIGhhbmRsZXIgbmFtZSAke2hhbmRsZXJOYW1lfWApO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnM/Lm5vUmVkaXJlY3RCYWNrKSB7XG4gICAgICBpZiAoaGFuZGxlck5hbWUgPT09IFwiYWZ0ZXJTaWduSW5cIiB8fCBoYW5kbGVyTmFtZSA9PT0gXCJhZnRlclNpZ25VcFwiKSB7XG4gICAgICAgIGlmIChpc1JlYWN0U2VydmVyMiB8fCB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NoZWNrRmVhdHVyZVN1cHBvcnQoXCJyc2MtaGFuZGxlci1cIiArIGhhbmRsZXJOYW1lLCB7fSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgICAgICAgdXJsID0gcXVlcnlQYXJhbXMuZ2V0KFwiYWZ0ZXJfYXV0aF9yZXR1cm5fdG9cIikgfHwgdXJsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGhhbmRsZXJOYW1lID09PSBcInNpZ25JblwiIHx8IGhhbmRsZXJOYW1lID09PSBcInNpZ25VcFwiKSB7XG4gICAgICAgIGlmIChpc1JlYWN0U2VydmVyMiB8fCB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NoZWNrRmVhdHVyZVN1cHBvcnQoXCJyc2MtaGFuZGxlci1cIiArIGhhbmRsZXJOYW1lLCB7fSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50VXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICAgICAgY29uc3QgbmV4dFVybCA9IG5ldyBVUkwodXJsLCBjdXJyZW50VXJsKTtcbiAgICAgICAgICBpZiAoY3VycmVudFVybC5zZWFyY2hQYXJhbXMuaGFzKFwiYWZ0ZXJfYXV0aF9yZXR1cm5fdG9cIikpIHtcbiAgICAgICAgICAgIG5leHRVcmwuc2VhcmNoUGFyYW1zLnNldChcImFmdGVyX2F1dGhfcmV0dXJuX3RvXCIsIGN1cnJlbnRVcmwuc2VhcmNoUGFyYW1zLmdldChcImFmdGVyX2F1dGhfcmV0dXJuX3RvXCIpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRVcmwucHJvdG9jb2wgPT09IG5leHRVcmwucHJvdG9jb2wgJiYgY3VycmVudFVybC5ob3N0ID09PSBuZXh0VXJsLmhvc3QpIHtcbiAgICAgICAgICAgIG5leHRVcmwuc2VhcmNoUGFyYW1zLnNldChcImFmdGVyX2F1dGhfcmV0dXJuX3RvXCIsIGdldFJlbGF0aXZlUGFydChjdXJyZW50VXJsKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHVybCA9IGdldFJlbGF0aXZlUGFydChuZXh0VXJsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLl9yZWRpcmVjdElmVHJ1c3RlZCh1cmwsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9TaWduSW4ob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcInNpZ25JblwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvU2lnblVwKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJzaWduVXBcIiwgb3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgcmVkaXJlY3RUb1NpZ25PdXQob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcInNpZ25PdXRcIiwgb3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgcmVkaXJlY3RUb0VtYWlsVmVyaWZpY2F0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJlbWFpbFZlcmlmaWNhdGlvblwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvUGFzc3dvcmRSZXNldChvcHRpb25zKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlZGlyZWN0VG9IYW5kbGVyKFwicGFzc3dvcmRSZXNldFwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvRm9yZ290UGFzc3dvcmQob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcImZvcmdvdFBhc3N3b3JkXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9Ib21lKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJob21lXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9PQXV0aENhbGxiYWNrKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJvYXV0aENhbGxiYWNrXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9NYWdpY0xpbmtDYWxsYmFjayhvcHRpb25zKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlZGlyZWN0VG9IYW5kbGVyKFwibWFnaWNMaW5rQ2FsbGJhY2tcIiwgb3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgcmVkaXJlY3RUb0FmdGVyU2lnbkluKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJhZnRlclNpZ25JblwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvQWZ0ZXJTaWduVXAob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcImFmdGVyU2lnblVwXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9BZnRlclNpZ25PdXQob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcImFmdGVyU2lnbk91dFwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvQWNjb3VudFNldHRpbmdzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJhY2NvdW50U2V0dGluZ3NcIiwgb3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgcmVkaXJlY3RUb0Vycm9yKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJlcnJvclwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvVGVhbUludml0YXRpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcInRlYW1JbnZpdGF0aW9uXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHNlbmRGb3Jnb3RQYXNzd29yZEVtYWlsKGVtYWlsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5zZW5kRm9yZ290UGFzc3dvcmRFbWFpbChlbWFpbCwgb3B0aW9ucz8uY2FsbGJhY2tVcmwgPz8gY29uc3RydWN0UmVkaXJlY3RVcmwodGhpcy51cmxzLnBhc3N3b3JkUmVzZXQsIFwiY2FsbGJhY2tVcmxcIikpO1xuICB9XG4gIGFzeW5jIHNlbmRNYWdpY0xpbmtFbWFpbChlbWFpbCwgb3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2Uuc2VuZE1hZ2ljTGlua0VtYWlsKGVtYWlsLCBvcHRpb25zPy5jYWxsYmFja1VybCA/PyBjb25zdHJ1Y3RSZWRpcmVjdFVybCh0aGlzLnVybHMubWFnaWNMaW5rQ2FsbGJhY2ssIFwiY2FsbGJhY2tVcmxcIikpO1xuICB9XG4gIGFzeW5jIHJlc2V0UGFzc3dvcmQob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UucmVzZXRQYXNzd29yZChvcHRpb25zKTtcbiAgfVxuICBhc3luYyB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShjb2RlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS52ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShjb2RlKTtcbiAgfVxuICBhc3luYyB2ZXJpZnlUZWFtSW52aXRhdGlvbkNvZGUoY29kZSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuYWNjZXB0VGVhbUludml0YXRpb24oe1xuICAgICAgdHlwZTogXCJjaGVja1wiLFxuICAgICAgY29kZSxcbiAgICAgIHNlc3Npb246IGF3YWl0IHRoaXMuX2dldFNlc3Npb24oKVxuICAgIH0pO1xuICB9XG4gIGFzeW5jIGFjY2VwdFRlYW1JbnZpdGF0aW9uKGNvZGUpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuYWNjZXB0VGVhbUludml0YXRpb24oe1xuICAgICAgdHlwZTogXCJ1c2VcIixcbiAgICAgIGNvZGUsXG4gICAgICBzZXNzaW9uOiBhd2FpdCB0aGlzLl9nZXRTZXNzaW9uKClcbiAgICB9KTtcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0VGVhbUludml0YXRpb25EZXRhaWxzKGNvZGUpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuYWNjZXB0VGVhbUludml0YXRpb24oe1xuICAgICAgdHlwZTogXCJkZXRhaWxzXCIsXG4gICAgICBjb2RlLFxuICAgICAgc2Vzc2lvbjogYXdhaXQgdGhpcy5fZ2V0U2Vzc2lvbigpXG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayh7IHRlYW1EaXNwbGF5TmFtZTogcmVzdWx0LmRhdGEudGVhbV9kaXNwbGF5X25hbWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgdmVyaWZ5RW1haWwoY29kZSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS52ZXJpZnlFbWFpbChjb2RlKTtcbiAgICBhd2FpdCB0aGlzLl9jdXJyZW50VXNlckNhY2hlLnJlZnJlc2goW2F3YWl0IHRoaXMuX2dldFNlc3Npb24oKV0pO1xuICAgIGF3YWl0IHRoaXMuX2NsaWVudENvbnRhY3RDaGFubmVsc0NhY2hlLnJlZnJlc2goW2F3YWl0IHRoaXMuX2dldFNlc3Npb24oKV0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgYXN5bmMgZ2V0VXNlcihvcHRpb25zKSB7XG4gICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUob3B0aW9ucz8udG9rZW5TdG9yZSk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuX2dldFNlc3Npb24ob3B0aW9ucz8udG9rZW5TdG9yZSk7XG4gICAgbGV0IGNydWQgPSBSZXN1bHQub3JUaHJvdyhhd2FpdCB0aGlzLl9jdXJyZW50VXNlckNhY2hlLmdldE9yV2FpdChbc2Vzc2lvbl0sIFwid3JpdGUtb25seVwiKSk7XG4gICAgaWYgKGNydWQ/LmlzX2Fub255bW91cyAmJiBvcHRpb25zPy5vciAhPT0gXCJhbm9ueW1vdXNcIiAmJiBvcHRpb25zPy5vciAhPT0gXCJhbm9ueW1vdXMtaWYtZXhpc3RzXCIpIHtcbiAgICAgIGNydWQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoY3J1ZCA9PT0gbnVsbCkge1xuICAgICAgc3dpdGNoIChvcHRpb25zPy5vcikge1xuICAgICAgICBjYXNlIFwicmVkaXJlY3RcIjoge1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RUb1NpZ25Jbih7IHJlcGxhY2U6IHRydWUgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInRocm93XCI6IHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIGlzIG5vdCBzaWduZWQgaW4gYnV0IGdldFVzZXIgd2FzIGNhbGxlZCB3aXRoIHsgb3I6ICd0aHJvdycgfVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiYW5vbnltb3VzXCI6IHtcbiAgICAgICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCB0aGlzLl9zaWduVXBBbm9ueW1vdXNseSgpO1xuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFVzZXIoeyB0b2tlblN0b3JlOiB0b2tlbnMsIG9yOiBcImFub255bW91cy1pZi1leGlzdHNcIiB9KSA/PyB0aHJvd0VycihcIlNvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIHNpZ25pbmcgdXAgYW5vbnltb3VzbHlcIik7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSB2b2lkIDA6XG4gICAgICAgIGNhc2UgXCJhbm9ueW1vdXMtaWYtZXhpc3RzXCI6XG4gICAgICAgIGNhc2UgXCJyZXR1cm4tbnVsbFwiOiB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNydWQgJiYgdGhpcy5fY3VycmVudFVzZXJGcm9tQ3J1ZChjcnVkLCBzZXNzaW9uKTtcbiAgfVxuICB1c2VVc2VyKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9lbnN1cmVQZXJzaXN0ZW50VG9rZW5TdG9yZShvcHRpb25zPy50b2tlblN0b3JlKTtcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5fdXNlU2Vzc2lvbihvcHRpb25zPy50b2tlblN0b3JlKTtcbiAgICBsZXQgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fY3VycmVudFVzZXJDYWNoZSwgW3Nlc3Npb25dLCBcInVzZVVzZXIoKVwiKTtcbiAgICBpZiAoY3J1ZD8uaXNfYW5vbnltb3VzICYmIG9wdGlvbnM/Lm9yICE9PSBcImFub255bW91c1wiICYmIG9wdGlvbnM/Lm9yICE9PSBcImFub255bW91cy1pZi1leGlzdHNcIikge1xuICAgICAgY3J1ZCA9IG51bGw7XG4gICAgfVxuICAgIGlmIChjcnVkID09PSBudWxsKSB7XG4gICAgICBzd2l0Y2ggKG9wdGlvbnM/Lm9yKSB7XG4gICAgICAgIGNhc2UgXCJyZWRpcmVjdFwiOiB7XG4gICAgICAgICAgcnVuQXN5bmNocm9ub3VzbHkodGhpcy5yZWRpcmVjdFRvU2lnbkluKHsgcmVwbGFjZTogdHJ1ZSB9KSk7XG4gICAgICAgICAgc3VzcGVuZCgpO1xuICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwic3VzcGVuZCBzaG91bGQgbmV2ZXIgcmV0dXJuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ0aHJvd1wiOiB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBpcyBub3Qgc2lnbmVkIGluIGJ1dCB1c2VVc2VyIHdhcyBjYWxsZWQgd2l0aCB7IG9yOiAndGhyb3cnIH1cIik7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImFub255bW91c1wiOiB7XG4gICAgICAgICAgcnVuQXN5bmNocm9ub3VzbHkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2lnblVwQW5vbnltb3VzbHkoKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdXNwZW5kKCk7XG4gICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJzdXNwZW5kIHNob3VsZCBuZXZlciByZXR1cm5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSB2b2lkIDA6XG4gICAgICAgIGNhc2UgXCJhbm9ueW1vdXMtaWYtZXhpc3RzXCI6XG4gICAgICAgIGNhc2UgXCJyZXR1cm4tbnVsbFwiOiB7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgcmV0dXJuIGNydWQgJiYgdGhpcy5fY3VycmVudFVzZXJGcm9tQ3J1ZChjcnVkLCBzZXNzaW9uKTtcbiAgICB9LCBbY3J1ZCwgc2Vzc2lvbiwgb3B0aW9ucz8ub3JdKTtcbiAgfVxuICBhc3luYyBfdXBkYXRlQ2xpZW50VXNlcih1cGRhdGUsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UudXBkYXRlQ2xpZW50VXNlcih1c2VyVXBkYXRlT3B0aW9uc1RvQ3J1ZCh1cGRhdGUpLCBzZXNzaW9uKTtcbiAgICBhd2FpdCB0aGlzLl9yZWZyZXNoVXNlcihzZXNzaW9uKTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIGFzeW5jIHNpZ25JbldpdGhPQXV0aChwcm92aWRlcikge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzaWduSW5XaXRoT0F1dGggY2FuIGN1cnJlbnRseSBvbmx5IGJlIGNhbGxlZCBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG4gICAgfVxuICAgIHRoaXMuX2Vuc3VyZVBlcnNpc3RlbnRUb2tlblN0b3JlKCk7XG4gICAgYXdhaXQgc2lnbkluV2l0aE9BdXRoKFxuICAgICAgdGhpcy5faW50ZXJmYWNlLFxuICAgICAge1xuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgcmVkaXJlY3RVcmw6IHRoaXMudXJscy5vYXV0aENhbGxiYWNrLFxuICAgICAgICBlcnJvclJlZGlyZWN0VXJsOiB0aGlzLnVybHMuZXJyb3IsXG4gICAgICAgIHByb3ZpZGVyU2NvcGU6IHRoaXMuX29hdXRoU2NvcGVzT25TaWduSW5bcHJvdmlkZXJdPy5qb2luKFwiIFwiKVxuICAgICAgfVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIFRPRE8gcmVtb3ZlXG4gICAqL1xuICBhc3luYyBfZXhwZXJpbWVudGFsTWZhKGVycm9yLCBzZXNzaW9uKSB7XG4gICAgY29uc3Qgb3RwID0gcHJvbXB0KFwiUGxlYXNlIGVudGVyIHRoZSBzaXgtZGlnaXQgVE9UUCBjb2RlIGZyb20geW91ciBhdXRoZW50aWNhdG9yIGFwcC5cIik7XG4gICAgaWYgKCFvdHApIHtcbiAgICAgIHRocm93IG5ldyBLbm93bkVycm9ycy5JbnZhbGlkVG90cENvZGUoKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS50b3RwTWZhKFxuICAgICAgZXJyb3IuZGV0YWlscz8uYXR0ZW1wdF9jb2RlID8/IHRocm93RXJyKFwiYXR0ZW1wdCBjb2RlIG1pc3NpbmdcIiksXG4gICAgICBvdHAsXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogVE9ETyByZW1vdmVcbiAgICovXG4gIGFzeW5jIF9jYXRjaE1mYVJlcXVpcmVkRXJyb3IoY2FsbGJhY2spIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5NdWx0aUZhY3RvckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQpIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCB0aGlzLl9leHBlcmltZW50YWxNZmEoZSwgYXdhaXQgdGhpcy5fZ2V0U2Vzc2lvbigpKSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuICBhc3luYyBzaWduSW5XaXRoQ3JlZGVudGlhbChvcHRpb25zKSB7XG4gICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUoKTtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5fZ2V0U2Vzc2lvbigpO1xuICAgIGxldCByZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX2NhdGNoTWZhUmVxdWlyZWRFcnJvcihhc3luYyAoKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2Uuc2lnbkluV2l0aENyZWRlbnRpYWwob3B0aW9ucy5lbWFpbCwgb3B0aW9ucy5wYXNzd29yZCwgc2Vzc2lvbik7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEtub3duRXJyb3JzLkludmFsaWRUb3RwQ29kZSkge1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgYXdhaXQgdGhpcy5fc2lnbkluVG9BY2NvdW50V2l0aFRva2VucyhyZXN1bHQuZGF0YSk7XG4gICAgICBpZiAoIW9wdGlvbnMubm9SZWRpcmVjdCkge1xuICAgICAgICBhd2FpdCB0aGlzLnJlZGlyZWN0VG9BZnRlclNpZ25Jbih7IHJlcGxhY2U6IHRydWUgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2lnblVwV2l0aENyZWRlbnRpYWwob3B0aW9ucykge1xuICAgIHRoaXMuX2Vuc3VyZVBlcnNpc3RlbnRUb2tlblN0b3JlKCk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuX2dldFNlc3Npb24oKTtcbiAgICBjb25zdCBlbWFpbFZlcmlmaWNhdGlvblJlZGlyZWN0VXJsID0gb3B0aW9ucy52ZXJpZmljYXRpb25DYWxsYmFja1VybCA/PyBjb25zdHJ1Y3RSZWRpcmVjdFVybCh0aGlzLnVybHMuZW1haWxWZXJpZmljYXRpb24sIFwidmVyaWZpY2F0aW9uQ2FsbGJhY2tVcmxcIik7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLnNpZ25VcFdpdGhDcmVkZW50aWFsKFxuICAgICAgb3B0aW9ucy5lbWFpbCxcbiAgICAgIG9wdGlvbnMucGFzc3dvcmQsXG4gICAgICBlbWFpbFZlcmlmaWNhdGlvblJlZGlyZWN0VXJsLFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgYXdhaXQgdGhpcy5fc2lnbkluVG9BY2NvdW50V2l0aFRva2VucyhyZXN1bHQuZGF0YSk7XG4gICAgICBpZiAoIW9wdGlvbnMubm9SZWRpcmVjdCkge1xuICAgICAgICBhd2FpdCB0aGlzLnJlZGlyZWN0VG9BZnRlclNpZ25VcCh7IHJlcGxhY2U6IHRydWUgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX3NpZ25VcEFub255bW91c2x5KCkge1xuICAgIHRoaXMuX2Vuc3VyZVBlcnNpc3RlbnRUb2tlblN0b3JlKCk7XG4gICAgaWYgKCF0aGlzLl9hbm9ueW1vdXNTaWduVXBJblByb2dyZXNzKSB7XG4gICAgICB0aGlzLl9hbm9ueW1vdXNTaWduVXBJblByb2dyZXNzID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUoKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuX2dldFNlc3Npb24oKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLnNpZ25VcEFub255bW91c2x5KHNlc3Npb24pO1xuICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5fc2lnbkluVG9BY2NvdW50V2l0aFRva2VucyhyZXN1bHQuZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJzaWduVXBBbm9ueW1vdXNseSgpIHNob3VsZCBuZXZlciByZXR1cm4gYW4gZXJyb3JcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYW5vbnltb3VzU2lnblVwSW5Qcm9ncmVzcyA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgIH0pKCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLl9hbm9ueW1vdXNTaWduVXBJblByb2dyZXNzO1xuICB9XG4gIGFzeW5jIHNpZ25JbldpdGhNYWdpY0xpbmsoY29kZSwgb3B0aW9ucykge1xuICAgIHRoaXMuX2Vuc3VyZVBlcnNpc3RlbnRUb2tlblN0b3JlKCk7XG4gICAgbGV0IHJlc3VsdDtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fY2F0Y2hNZmFSZXF1aXJlZEVycm9yKGFzeW5jICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5zaWduSW5XaXRoTWFnaWNMaW5rKGNvZGUpO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5JbnZhbGlkVG90cENvZGUpIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihlKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgIGF3YWl0IHRoaXMuX3NpZ25JblRvQWNjb3VudFdpdGhUb2tlbnMocmVzdWx0LmRhdGEpO1xuICAgICAgaWYgKCFvcHRpb25zPy5ub1JlZGlyZWN0KSB7XG4gICAgICAgIGlmIChyZXN1bHQuZGF0YS5uZXdVc2VyKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFRvQWZ0ZXJTaWduVXAoeyByZXBsYWNlOiB0cnVlIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RUb0FmdGVyU2lnbkluKHsgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlc3VsdC5lcnJvcik7XG4gICAgfVxuICB9XG4gIGFzeW5jIHNpZ25JbldpdGhQYXNza2V5KCkge1xuICAgIHRoaXMuX2Vuc3VyZVBlcnNpc3RlbnRUb2tlblN0b3JlKCk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuX2dldFNlc3Npb24oKTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9jYXRjaE1mYVJlcXVpcmVkRXJyb3IoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBpbml0aWF0aW9uUmVzdWx0ID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmluaXRpYXRlUGFzc2tleUF1dGhlbnRpY2F0aW9uKHt9LCBzZXNzaW9uKTtcbiAgICAgICAgaWYgKGluaXRpYXRpb25SZXN1bHQuc3RhdHVzICE9PSBcIm9rXCIpIHtcbiAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKG5ldyBLbm93bkVycm9ycy5QYXNza2V5QXV0aGVudGljYXRpb25GYWlsZWQoXCJGYWlsZWQgdG8gZ2V0IGluaXRpYXRpb24gb3B0aW9ucyBmb3IgcGFzc2tleSBhdXRoZW50aWNhdGlvblwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBvcHRpb25zX2pzb24sIGNvZGUgfSA9IGluaXRpYXRpb25SZXN1bHQuZGF0YTtcbiAgICAgICAgaWYgKG9wdGlvbnNfanNvbi5ycElkICE9PSBcIlRISVNfVkFMVUVfV0lMTF9CRV9SRVBMQUNFRC5leGFtcGxlLmNvbVwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYEV4cGVjdGVkIHJldHVybmVkIFJQIElEIGZyb20gc2VydmVyIHRvIGVxdWFsIHNlbnRpbmVsLCBidXQgZm91bmQgJHtvcHRpb25zX2pzb24ucnBJZH1gKTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zX2pzb24ucnBJZCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTtcbiAgICAgICAgY29uc3QgYXV0aGVudGljYXRpb25fcmVzcG9uc2UgPSBhd2FpdCBzdGFydEF1dGhlbnRpY2F0aW9uKHsgb3B0aW9uc0pTT046IG9wdGlvbnNfanNvbiB9KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5zaWduSW5XaXRoUGFzc2tleSh7IGF1dGhlbnRpY2F0aW9uX3Jlc3BvbnNlLCBjb2RlIH0pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFdlYkF1dGhuRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihuZXcgS25vd25FcnJvcnMuUGFzc2tleVdlYkF1dGhuRXJyb3IoZXJyb3IubWVzc2FnZSwgZXJyb3IubmFtZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihuZXcgS25vd25FcnJvcnMuUGFzc2tleUF1dGhlbnRpY2F0aW9uRmFpbGVkKFwiRmFpbGVkIHRvIHNpZ24gaW4gd2l0aCBwYXNza2V5XCIpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgYXdhaXQgdGhpcy5fc2lnbkluVG9BY2NvdW50V2l0aFRva2VucyhyZXN1bHQuZGF0YSk7XG4gICAgICBhd2FpdCB0aGlzLnJlZGlyZWN0VG9BZnRlclNpZ25Jbih7IHJlcGxhY2U6IHRydWUgfSk7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgY2FsbE9BdXRoQ2FsbGJhY2soKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbGxPQXV0aENhbGxiYWNrIGNhbiBjdXJyZW50bHkgb25seSBiZSBjYWxsZWQgaW4gYSBicm93c2VyIGVudmlyb25tZW50XCIpO1xuICAgIH1cbiAgICB0aGlzLl9lbnN1cmVQZXJzaXN0ZW50VG9rZW5TdG9yZSgpO1xuICAgIGxldCByZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX2NhdGNoTWZhUmVxdWlyZWRFcnJvcihhc3luYyAoKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjYWxsT0F1dGhDYWxsYmFjayh0aGlzLl9pbnRlcmZhY2UsIHRoaXMudXJscy5vYXV0aENhbGxiYWNrKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgS25vd25FcnJvcnMuSW52YWxpZFRvdHBDb2RlKSB7XG4gICAgICAgIGFsZXJ0KFwiSW52YWxpZCBUT1RQIGNvZGUuIFBsZWFzZSB0cnkgc2lnbmluZyBpbiBhZ2Fpbi5cIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcIm9rXCIgJiYgcmVzdWx0LmRhdGEpIHtcbiAgICAgIGF3YWl0IHRoaXMuX3NpZ25JblRvQWNjb3VudFdpdGhUb2tlbnMocmVzdWx0LmRhdGEpO1xuICAgICAgaWYgKFwiYWZ0ZXJDYWxsYmFja1JlZGlyZWN0VXJsXCIgaW4gcmVzdWx0LmRhdGEgJiYgcmVzdWx0LmRhdGEuYWZ0ZXJDYWxsYmFja1JlZGlyZWN0VXJsKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX3JlZGlyZWN0VG8oeyB1cmw6IHJlc3VsdC5kYXRhLmFmdGVyQ2FsbGJhY2tSZWRpcmVjdFVybCwgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdC5kYXRhLm5ld1VzZXIpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFRvQWZ0ZXJTaWduVXAoeyByZXBsYWNlOiB0cnVlIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RUb0FmdGVyU2lnbkluKHsgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBhc3luYyBfc2lnbk91dChzZXNzaW9uLCBvcHRpb25zKSB7XG4gICAgYXdhaXQgc3RvcmVMb2NrLndpdGhXcml0ZUxvY2soYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5faW50ZXJmYWNlLnNpZ25PdXQoc2Vzc2lvbik7XG4gICAgICBpZiAob3B0aW9ucz8ucmVkaXJlY3RVcmwpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fcmVkaXJlY3RUbyh7IHVybDogb3B0aW9ucy5yZWRpcmVjdFVybCwgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RUb0FmdGVyU2lnbk91dCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHNpZ25PdXQob3B0aW9ucykge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmdldFVzZXIoKTtcbiAgICBpZiAodXNlcikge1xuICAgICAgYXdhaXQgdXNlci5zaWduT3V0KG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuICBhc3luYyBnZXRQcm9qZWN0KCkge1xuICAgIGNvbnN0IGNydWQgPSBSZXN1bHQub3JUaHJvdyhhd2FpdCB0aGlzLl9jdXJyZW50UHJvamVjdENhY2hlLmdldE9yV2FpdChbXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50UHJvamVjdEZyb21DcnVkKGNydWQpO1xuICB9XG4gIHVzZVByb2plY3QoKSB7XG4gICAgY29uc3QgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fY3VycmVudFByb2plY3RDYWNoZSwgW10sIFwidXNlUHJvamVjdCgpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHRoaXMuX2NsaWVudFByb2plY3RGcm9tQ3J1ZChjcnVkKSwgW2NydWRdKTtcbiAgfVxuICBhc3luYyBfbGlzdE93bmVkUHJvamVjdHMoc2Vzc2lvbikge1xuICAgIHRoaXMuX2Vuc3VyZUludGVybmFsUHJvamVjdCgpO1xuICAgIGNvbnN0IGNydWQgPSBSZXN1bHQub3JUaHJvdyhhd2FpdCB0aGlzLl9vd25lZFByb2plY3RzQ2FjaGUuZ2V0T3JXYWl0KFtzZXNzaW9uXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICByZXR1cm4gY3J1ZC5tYXAoKGopID0+IHRoaXMuX2dldE93bmVkQWRtaW5BcHAoai5pZCwgc2Vzc2lvbikuX2FkbWluT3duZWRQcm9qZWN0RnJvbUNydWQoXG4gICAgICBqLFxuICAgICAgKCkgPT4gdGhpcy5fcmVmcmVzaE93bmVkUHJvamVjdHMoc2Vzc2lvbilcbiAgICApKTtcbiAgfVxuICBfdXNlT3duZWRQcm9qZWN0cyhzZXNzaW9uKSB7XG4gICAgdGhpcy5fZW5zdXJlSW50ZXJuYWxQcm9qZWN0KCk7XG4gICAgY29uc3QgcHJvamVjdHMgPSB1c2VBc3luY0NhY2hlKHRoaXMuX293bmVkUHJvamVjdHNDYWNoZSwgW3Nlc3Npb25dLCBcInVzZU93bmVkUHJvamVjdHMoKVwiKTtcbiAgICByZXR1cm4gdXNlTWVtbygoKSA9PiBwcm9qZWN0cy5tYXAoKGopID0+IHRoaXMuX2dldE93bmVkQWRtaW5BcHAoai5pZCwgc2Vzc2lvbikuX2FkbWluT3duZWRQcm9qZWN0RnJvbUNydWQoXG4gICAgICBqLFxuICAgICAgKCkgPT4gdGhpcy5fcmVmcmVzaE93bmVkUHJvamVjdHMoc2Vzc2lvbilcbiAgICApKSwgW3Byb2plY3RzXSk7XG4gIH1cbiAgYXN5bmMgX2NyZWF0ZVByb2plY3Qoc2Vzc2lvbiwgbmV3UHJvamVjdCkge1xuICAgIHRoaXMuX2Vuc3VyZUludGVybmFsUHJvamVjdCgpO1xuICAgIGNvbnN0IGNydWQgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuY3JlYXRlUHJvamVjdChhZG1pblByb2plY3RDcmVhdGVPcHRpb25zVG9DcnVkKG5ld1Byb2plY3QpLCBzZXNzaW9uKTtcbiAgICBjb25zdCByZXMgPSB0aGlzLl9nZXRPd25lZEFkbWluQXBwKGNydWQuaWQsIHNlc3Npb24pLl9hZG1pbk93bmVkUHJvamVjdEZyb21DcnVkKFxuICAgICAgY3J1ZCxcbiAgICAgICgpID0+IHRoaXMuX3JlZnJlc2hPd25lZFByb2plY3RzKHNlc3Npb24pXG4gICAgKTtcbiAgICBhd2FpdCB0aGlzLl9yZWZyZXNoT3duZWRQcm9qZWN0cyhzZXNzaW9uKTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIGFzeW5jIF9yZWZyZXNoVXNlcihzZXNzaW9uKSB7XG4gICAgYXdhaXQgdGhpcy5fcmVmcmVzaFNlc3Npb24oc2Vzc2lvbik7XG4gIH1cbiAgYXN5bmMgX3JlZnJlc2hTZXNzaW9uKHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLl9jdXJyZW50VXNlckNhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgfVxuICBhc3luYyBfcmVmcmVzaFVzZXJzKCkge1xuICB9XG4gIGFzeW5jIF9yZWZyZXNoUHJvamVjdCgpIHtcbiAgICBhd2FpdCB0aGlzLl9jdXJyZW50UHJvamVjdENhY2hlLnJlZnJlc2goW10pO1xuICB9XG4gIGFzeW5jIF9yZWZyZXNoT3duZWRQcm9qZWN0cyhzZXNzaW9uKSB7XG4gICAgYXdhaXQgdGhpcy5fb3duZWRQcm9qZWN0c0NhY2hlLnJlZnJlc2goW3Nlc3Npb25dKTtcbiAgfVxuICBzdGF0aWMgZ2V0IFtzdGFja0FwcEludGVybmFsc1N5bWJvbF0oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZyb21DbGllbnRKc29uOiAoanNvbikgPT4ge1xuICAgICAgICBjb25zdCBwcm92aWRlZENoZWNrU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkob21pdChqc29uLCBbXG4gICAgICAgICAgLyogbm9uZSBjdXJyZW50bHkgKi9cbiAgICAgICAgXSkpO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGFsbENsaWVudEFwcHMuZ2V0KGpzb24udW5pcXVlSWRlbnRpZmllcik7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgIGNvbnN0IFtleGlzdGluZ0NoZWNrU3RyaW5nLCBjbGllbnRBcHBdID0gZXhpc3Rpbmc7XG4gICAgICAgICAgaWYgKGV4aXN0aW5nQ2hlY2tTdHJpbmcgIT09IHByb3ZpZGVkQ2hlY2tTdHJpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVGhlIHByb3ZpZGVkIGFwcCBKU09OIGRvZXMgbm90IG1hdGNoIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBleGlzdGluZyBjbGllbnQgYXBwIHdpdGggdGhlIHNhbWUgdW5pcXVlIGlkZW50aWZpZXJcIiwgeyBwcm92aWRlZE9iajoganNvbiwgZXhpc3RpbmdTdHJpbmc6IGV4aXN0aW5nQ2hlY2tTdHJpbmcgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjbGllbnRBcHA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1N0YWNrQ2xpZW50QXBwSW1wbEluY29tcGxldGUoe1xuICAgICAgICAgIC4uLmpzb24sXG4gICAgICAgICAgY2hlY2tTdHJpbmc6IHByb3ZpZGVkQ2hlY2tTdHJpbmdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBnZXQgW3N0YWNrQXBwSW50ZXJuYWxzU3ltYm9sXSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG9DbGllbnRKc29uOiAoKSA9PiB7XG4gICAgICAgIGlmICghKFwicHVibGlzaGFibGVDbGllbnRLZXlcIiBpbiB0aGlzLl9pbnRlcmZhY2Uub3B0aW9ucykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkNhbm5vdCBzZXJpYWxpemUgdG8gSlNPTiBmcm9tIGFuIGFwcGxpY2F0aW9uIHdpdGhvdXQgYSBwdWJsaXNoYWJsZSBjbGllbnQga2V5XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fcmVkaXJlY3RNZXRob2QgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkNhbm5vdCBzZXJpYWxpemUgdG8gSlNPTiBmcm9tIGFuIGFwcGxpY2F0aW9uIHdpdGggYSBub24tc3RyaW5nIHJlZGlyZWN0IG1ldGhvZFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGJhc2VVcmw6IHRoaXMuX29wdGlvbnMuYmFzZVVybCxcbiAgICAgICAgICBwcm9qZWN0SWQ6IHRoaXMucHJvamVjdElkLFxuICAgICAgICAgIHB1Ymxpc2hhYmxlQ2xpZW50S2V5OiB0aGlzLl9pbnRlcmZhY2Uub3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleSxcbiAgICAgICAgICB0b2tlblN0b3JlOiB0aGlzLl90b2tlblN0b3JlSW5pdCxcbiAgICAgICAgICB1cmxzOiB0aGlzLl91cmxPcHRpb25zLFxuICAgICAgICAgIG9hdXRoU2NvcGVzT25TaWduSW46IHRoaXMuX29hdXRoU2NvcGVzT25TaWduSW4sXG4gICAgICAgICAgdW5pcXVlSWRlbnRpZmllcjogdGhpcy5fZ2V0VW5pcXVlSWRlbnRpZmllcigpLFxuICAgICAgICAgIHJlZGlyZWN0TWV0aG9kOiB0aGlzLl9yZWRpcmVjdE1ldGhvZCxcbiAgICAgICAgICBleHRyYVJlcXVlc3RIZWFkZXJzOiB0aGlzLl9vcHRpb25zLmV4dHJhUmVxdWVzdEhlYWRlcnNcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBzZXRDdXJyZW50VXNlcjogKHVzZXJKc29uUHJvbWlzZSkgPT4ge1xuICAgICAgICBydW5Bc3luY2hyb25vdXNseShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5fY3VycmVudFVzZXJDYWNoZS5mb3JjZVNldENhY2hlZFZhbHVlQXN5bmMoW2F3YWl0IHRoaXMuX2dldFNlc3Npb24oKV0sIFJlc3VsdC5mcm9tUHJvbWlzZSh1c2VySnNvblByb21pc2UpKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgc2VuZFJlcXVlc3Q6IGFzeW5jIChwYXRoLCByZXF1ZXN0T3B0aW9ucywgcmVxdWVzdFR5cGUgPSBcImNsaWVudFwiKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2Uuc2VuZENsaWVudFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMsIGF3YWl0IHRoaXMuX2dldFNlc3Npb24oKSwgcmVxdWVzdFR5cGUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG4vKipcbiAqIFRoZXJlIGlzIGEgY2lyY3VsYXIgZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBhZG1pbiBhcHAgYW5kIHRoZSBjbGllbnQgYXBwLCBhcyB0aGUgZm9ybWVyIGluaGVyaXRzIGZyb20gdGhlIGxhdHRlciBhbmRcbiAqIHRoZSBsYXR0ZXIgbmVlZHMgdG8gdXNlIHRoZSBmb3JtZXIgd2hlbiBjcmVhdGluZyBhIG5ldyBpbnN0YW5jZSBvZiBhbiBpbnRlcm5hbCBwcm9qZWN0LlxuICpcbiAqIFRvIGJyZWFrIGl0LCB3ZSBzZXQgdGhlIGFkbWluIGFwcCBoZXJlIGxhemlseSBpbnN0ZWFkIG9mIGltcG9ydGluZyBpdCBkaXJlY3RseS4gVGhpcyB2YXJpYWJsZSBpcyBzZXQgYnkgLi9pbmRleC50cyxcbiAqIHdoaWNoIGltcG9ydHMgYm90aCB0aGlzIGZpbGUgYW5kIC4vYWRtaW4tYXBwLWltcGwudHMuXG4gKi9cbl9fU3RhY2tDbGllbnRBcHBJbXBsSW5jb21wbGV0ZS5MYXp5U3RhY2tBZG1pbkFwcEltcGwgPSB7IHZhbHVlOiB2b2lkIDAgfTtcbnZhciBfU3RhY2tDbGllbnRBcHBJbXBsSW5jb21wbGV0ZSA9IF9fU3RhY2tDbGllbnRBcHBJbXBsSW5jb21wbGV0ZTtcbmV4cG9ydCB7XG4gIF9TdGFja0NsaWVudEFwcEltcGxJbmNvbXBsZXRlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50LWFwcC1pbXBsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/client-app-impl.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/common.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/common.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientVersion: () => (/* binding */ clientVersion),\n/* harmony export */   createCache: () => (/* binding */ createCache),\n/* harmony export */   createCacheBySession: () => (/* binding */ createCacheBySession),\n/* harmony export */   createEmptyTokenStore: () => (/* binding */ createEmptyTokenStore),\n/* harmony export */   getBaseUrl: () => (/* binding */ getBaseUrl),\n/* harmony export */   getDefaultExtraRequestHeaders: () => (/* binding */ getDefaultExtraRequestHeaders),\n/* harmony export */   getDefaultProjectId: () => (/* binding */ getDefaultProjectId),\n/* harmony export */   getDefaultPublishableClientKey: () => (/* binding */ getDefaultPublishableClientKey),\n/* harmony export */   getDefaultSecretServerKey: () => (/* binding */ getDefaultSecretServerKey),\n/* harmony export */   getDefaultSuperSecretAdminKey: () => (/* binding */ getDefaultSuperSecretAdminKey),\n/* harmony export */   getUrls: () => (/* binding */ getUrls),\n/* harmony export */   useAsyncCache: () => (/* binding */ useAsyncCache)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared_dist_utils_caches__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/caches */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/caches.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/env */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/env.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/objects */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/react */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/react.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/stores */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n// src/lib/stack-app/apps/implementations/common.ts\n\n\n\n\n\n\n\n\nvar clientVersion = \"js @stackframe/stack@2.8.3\";\nif (clientVersion.startsWith(\"STACK_COMPILE_TIME\")) {\n  throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"Client version was not replaced. Something went wrong during build!\");\n}\nvar createCache = (fetcher) => {\n  return new _stackframe_stack_shared_dist_utils_caches__WEBPACK_IMPORTED_MODULE_0__.AsyncCache(\n    async (dependencies) => await _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_5__.Result.fromThrowingAsync(async () => await fetcher(dependencies)),\n    {}\n  );\n};\nvar createCacheBySession = (fetcher) => {\n  return new _stackframe_stack_shared_dist_utils_caches__WEBPACK_IMPORTED_MODULE_0__.AsyncCache(\n    async ([session, ...extraDependencies]) => await _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_5__.Result.fromThrowingAsync(async () => await fetcher(session, extraDependencies)),\n    {\n      onSubscribe: ([session], refresh) => {\n        const handler = session.onInvalidate(() => refresh());\n        return () => handler.unsubscribe();\n      }\n    }\n  );\n};\nfunction getUrls(partial) {\n  const handler = partial.handler ?? \"/handler\";\n  const home = partial.home ?? \"/\";\n  const afterSignIn = partial.afterSignIn ?? home;\n  return {\n    handler,\n    signIn: `${handler}/sign-in`,\n    afterSignIn: home,\n    signUp: `${handler}/sign-up`,\n    afterSignUp: afterSignIn,\n    signOut: `${handler}/sign-out`,\n    afterSignOut: home,\n    emailVerification: `${handler}/email-verification`,\n    passwordReset: `${handler}/password-reset`,\n    forgotPassword: `${handler}/forgot-password`,\n    oauthCallback: `${handler}/oauth-callback`,\n    magicLinkCallback: `${handler}/magic-link-callback`,\n    home,\n    accountSettings: `${handler}/account-settings`,\n    error: `${handler}/error`,\n    teamInvitation: `${handler}/team-invitation`,\n    ...(0,_stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)(partial)\n  };\n}\nfunction getDefaultProjectId() {\n  return \"c96ba5de-bb2a-43b9-9283-7d0b5d7762c9\" || 0;\n}\nfunction getDefaultPublishableClientKey() {\n  return \"pck_0b4d3xze5mgp06cgr16xe761fge2j7xhfwsheya2mxt1g\" || 0;\n}\nfunction getDefaultSecretServerKey() {\n  return process.env.STACK_SECRET_SERVER_KEY || (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(new Error(\"No secret server key provided. Please copy your key from the Stack dashboard and put it in the STACK_SECRET_SERVER_KEY environment variable.\"));\n}\nfunction getDefaultSuperSecretAdminKey() {\n  return process.env.STACK_SUPER_SECRET_ADMIN_KEY || (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(new Error(\"No super secret admin key provided. Please copy your key from the Stack dashboard and put it in the STACK_SUPER_SECRET_ADMIN_KEY environment variable.\"));\n}\nfunction getDefaultExtraRequestHeaders() {\n  return JSON.parse(process.env.NEXT_PUBLIC_STACK_EXTRA_REQUEST_HEADERS || \"{}\");\n}\nfunction getBaseUrl(userSpecifiedBaseUrl) {\n  let url;\n  if (userSpecifiedBaseUrl) {\n    if (typeof userSpecifiedBaseUrl === \"string\") {\n      url = userSpecifiedBaseUrl;\n    } else {\n      if ((0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_1__.isBrowserLike)()) {\n        url = userSpecifiedBaseUrl.browser;\n      } else {\n        url = userSpecifiedBaseUrl.server;\n      }\n    }\n  } else {\n    if ((0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_1__.isBrowserLike)()) {\n      url = process.env.NEXT_PUBLIC_BROWSER_STACK_API_URL;\n    } else {\n      url = process.env.NEXT_PUBLIC_SERVER_STACK_API_URL;\n    }\n    url = url || process.env.NEXT_PUBLIC_STACK_API_URL || process.env.NEXT_PUBLIC_STACK_URL || defaultBaseUrl;\n  }\n  return url.endsWith(\"/\") ? url.slice(0, -1) : url;\n}\nvar defaultBaseUrl = \"https://api.stack-auth.com\";\nfunction createEmptyTokenStore() {\n  return new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_6__.Store({\n    refreshToken: null,\n    accessToken: null\n  });\n}\nvar cachePromiseByHookId = /* @__PURE__ */ new Map();\nfunction useAsyncCache(cache, dependencies, caller) {\n  (0,_stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_4__.suspendIfSsr)(caller);\n  const id = react__WEBPACK_IMPORTED_MODULE_7___default().useId();\n  const subscribe = (0,react__WEBPACK_IMPORTED_MODULE_7__.useCallback)((cb) => {\n    const { unsubscribe } = cache.onStateChange(dependencies, () => {\n      cachePromiseByHookId.delete(id);\n      cb();\n    });\n    return unsubscribe;\n  }, [cache, ...dependencies]);\n  const getSnapshot = (0,react__WEBPACK_IMPORTED_MODULE_7__.useCallback)(() => {\n    if (!cachePromiseByHookId.has(id)) {\n      cachePromiseByHookId.set(id, cache.getOrWait(dependencies, \"read-write\"));\n    }\n    return cachePromiseByHookId.get(id);\n  }, [cache, ...dependencies]);\n  const promise = react__WEBPACK_IMPORTED_MODULE_7___default().useSyncExternalStore(\n    subscribe,\n    getSnapshot,\n    () => (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.throwErr)(new Error(\"getServerSnapshot should never be called in useAsyncCache because we restrict to CSR earlier\"))\n  );\n  const result = react__WEBPACK_IMPORTED_MODULE_7___default().use(promise);\n  if (result.status === \"error\") {\n    const error = result.error;\n    if (error instanceof Error && !error.__stackHasConcatenatedStacktraces) {\n      (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_2__.concatStacktraces)(error, new Error());\n      error.__stackHasConcatenatedStacktraces = true;\n    }\n    throw error;\n  }\n  return result.data;\n}\n\n//# sourceMappingURL=common.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2FwcHMvaW1wbGVtZW50YXRpb25zL2NvbW1vbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDd0U7QUFDQTtBQUNzQztBQUNoQztBQUNMO0FBQ0o7QUFDRjtBQUN4QjtBQUMzQztBQUNBO0FBQ0EsWUFBWSwyRkFBbUI7QUFDL0I7QUFDQTtBQUNBLGFBQWEsa0ZBQVU7QUFDdkIsa0NBQWtDLCtFQUFNO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxrRkFBVTtBQUN2QixxREFBcUQsK0VBQU07QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0EsMEJBQTBCLFFBQVE7QUFDbEMsc0JBQXNCLFFBQVE7QUFDOUIsdUJBQXVCLFFBQVE7QUFDL0Isc0JBQXNCLFFBQVE7QUFDOUIsMEJBQTBCLFFBQVE7QUFDbEM7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQyxjQUFjLFFBQVE7QUFDdEIsdUJBQXVCLFFBQVE7QUFDL0IsT0FBTyw0RkFBZTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNDQUF3QyxJQUFJLENBQWdQO0FBQ3JTO0FBQ0E7QUFDQSxTQUFTLG1EQUFvRCxJQUFJLENBQXNUO0FBQ3ZYO0FBQ0E7QUFDQSxTQUFTLE9BQU8sZ0NBQWdDLG9GQUFRO0FBQ3hEO0FBQ0E7QUFDQSxTQUFTLE9BQU8scUNBQXFDLG9GQUFRO0FBQzdEO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTyxtREFBbUQ7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLFVBQVUsc0ZBQWE7QUFDdkI7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFFBQVEsc0ZBQWE7QUFDckIsWUFBWSxPQUFPO0FBQ25CLE1BQU07QUFDTixZQUFZLE9BQU87QUFDbkI7QUFDQSxpQkFBaUIsT0FBTyxrQ0FBa0MsT0FBTztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw2RUFBSztBQUNsQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUUsdUZBQVk7QUFDZCxhQUFhLGtEQUFXO0FBQ3hCLG9CQUFvQixrREFBVztBQUMvQixZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSCxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0JBQWtCLGlFQUEwQjtBQUM1QztBQUNBO0FBQ0EsVUFBVSxvRkFBUTtBQUNsQjtBQUNBLGlCQUFpQixnREFBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQSxNQUFNLDZGQUFpQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrXFxkaXN0XFxlc21cXGxpYlxcc3RhY2stYXBwXFxhcHBzXFxpbXBsZW1lbnRhdGlvbnNcXGNvbW1vbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL3N0YWNrLWFwcC9hcHBzL2ltcGxlbWVudGF0aW9ucy9jb21tb24udHNcbmltcG9ydCB7IEFzeW5jQ2FjaGUgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvY2FjaGVzXCI7XG5pbXBvcnQgeyBpc0Jyb3dzZXJMaWtlIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2VudlwiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgY29uY2F0U3RhY2t0cmFjZXMsIHRocm93RXJyIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2Vycm9yc1wiO1xuaW1wb3J0IHsgZmlsdGVyVW5kZWZpbmVkIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL29iamVjdHNcIjtcbmltcG9ydCB7IHN1c3BlbmRJZlNzciB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9yZWFjdFwiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3Jlc3VsdHNcIjtcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3N0b3Jlc1wiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgY2xpZW50VmVyc2lvbiA9IFwianMgQHN0YWNrZnJhbWUvc3RhY2tAMi44LjNcIjtcbmlmIChjbGllbnRWZXJzaW9uLnN0YXJ0c1dpdGgoXCJTVEFDS19DT01QSUxFX1RJTUVcIikpIHtcbiAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJDbGllbnQgdmVyc2lvbiB3YXMgbm90IHJlcGxhY2VkLiBTb21ldGhpbmcgd2VudCB3cm9uZyBkdXJpbmcgYnVpbGQhXCIpO1xufVxudmFyIGNyZWF0ZUNhY2hlID0gKGZldGNoZXIpID0+IHtcbiAgcmV0dXJuIG5ldyBBc3luY0NhY2hlKFxuICAgIGFzeW5jIChkZXBlbmRlbmNpZXMpID0+IGF3YWl0IFJlc3VsdC5mcm9tVGhyb3dpbmdBc3luYyhhc3luYyAoKSA9PiBhd2FpdCBmZXRjaGVyKGRlcGVuZGVuY2llcykpLFxuICAgIHt9XG4gICk7XG59O1xudmFyIGNyZWF0ZUNhY2hlQnlTZXNzaW9uID0gKGZldGNoZXIpID0+IHtcbiAgcmV0dXJuIG5ldyBBc3luY0NhY2hlKFxuICAgIGFzeW5jIChbc2Vzc2lvbiwgLi4uZXh0cmFEZXBlbmRlbmNpZXNdKSA9PiBhd2FpdCBSZXN1bHQuZnJvbVRocm93aW5nQXN5bmMoYXN5bmMgKCkgPT4gYXdhaXQgZmV0Y2hlcihzZXNzaW9uLCBleHRyYURlcGVuZGVuY2llcykpLFxuICAgIHtcbiAgICAgIG9uU3Vic2NyaWJlOiAoW3Nlc3Npb25dLCByZWZyZXNoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSBzZXNzaW9uLm9uSW52YWxpZGF0ZSgoKSA9PiByZWZyZXNoKCkpO1xuICAgICAgICByZXR1cm4gKCkgPT4gaGFuZGxlci51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn07XG5mdW5jdGlvbiBnZXRVcmxzKHBhcnRpYWwpIHtcbiAgY29uc3QgaGFuZGxlciA9IHBhcnRpYWwuaGFuZGxlciA/PyBcIi9oYW5kbGVyXCI7XG4gIGNvbnN0IGhvbWUgPSBwYXJ0aWFsLmhvbWUgPz8gXCIvXCI7XG4gIGNvbnN0IGFmdGVyU2lnbkluID0gcGFydGlhbC5hZnRlclNpZ25JbiA/PyBob21lO1xuICByZXR1cm4ge1xuICAgIGhhbmRsZXIsXG4gICAgc2lnbkluOiBgJHtoYW5kbGVyfS9zaWduLWluYCxcbiAgICBhZnRlclNpZ25JbjogaG9tZSxcbiAgICBzaWduVXA6IGAke2hhbmRsZXJ9L3NpZ24tdXBgLFxuICAgIGFmdGVyU2lnblVwOiBhZnRlclNpZ25JbixcbiAgICBzaWduT3V0OiBgJHtoYW5kbGVyfS9zaWduLW91dGAsXG4gICAgYWZ0ZXJTaWduT3V0OiBob21lLFxuICAgIGVtYWlsVmVyaWZpY2F0aW9uOiBgJHtoYW5kbGVyfS9lbWFpbC12ZXJpZmljYXRpb25gLFxuICAgIHBhc3N3b3JkUmVzZXQ6IGAke2hhbmRsZXJ9L3Bhc3N3b3JkLXJlc2V0YCxcbiAgICBmb3Jnb3RQYXNzd29yZDogYCR7aGFuZGxlcn0vZm9yZ290LXBhc3N3b3JkYCxcbiAgICBvYXV0aENhbGxiYWNrOiBgJHtoYW5kbGVyfS9vYXV0aC1jYWxsYmFja2AsXG4gICAgbWFnaWNMaW5rQ2FsbGJhY2s6IGAke2hhbmRsZXJ9L21hZ2ljLWxpbmstY2FsbGJhY2tgLFxuICAgIGhvbWUsXG4gICAgYWNjb3VudFNldHRpbmdzOiBgJHtoYW5kbGVyfS9hY2NvdW50LXNldHRpbmdzYCxcbiAgICBlcnJvcjogYCR7aGFuZGxlcn0vZXJyb3JgLFxuICAgIHRlYW1JbnZpdGF0aW9uOiBgJHtoYW5kbGVyfS90ZWFtLWludml0YXRpb25gLFxuICAgIC4uLmZpbHRlclVuZGVmaW5lZChwYXJ0aWFsKVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFByb2plY3RJZCgpIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NUQUNLX1BST0pFQ1RfSUQgfHwgdGhyb3dFcnIobmV3IEVycm9yKFwiV2VsY29tZSB0byBTdGFjayBBdXRoISBJdCBzZWVtcyB0aGF0IHlvdSBoYXZlbid0IHByb3ZpZGVkIGEgcHJvamVjdCBJRC4gUGxlYXNlIGNyZWF0ZSBhIHByb2plY3Qgb24gdGhlIFN0YWNrIGRhc2hib2FyZCBhdCBodHRwczovL2FwcC5zdGFjay1hdXRoLmNvbSBhbmQgcHV0IGl0IGluIHRoZSBORVhUX1BVQkxJQ19TVEFDS19QUk9KRUNUX0lEIGVudmlyb25tZW50IHZhcmlhYmxlLlwiKSk7XG59XG5mdW5jdGlvbiBnZXREZWZhdWx0UHVibGlzaGFibGVDbGllbnRLZXkoKSB7XG4gIHJldHVybiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVEFDS19QVUJMSVNIQUJMRV9DTElFTlRfS0VZIHx8IHRocm93RXJyKG5ldyBFcnJvcihcIldlbGNvbWUgdG8gU3RhY2sgQXV0aCEgSXQgc2VlbXMgdGhhdCB5b3UgaGF2ZW4ndCBwcm92aWRlZCBhIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkuIFBsZWFzZSBjcmVhdGUgYW4gQVBJIGtleSBmb3IgeW91ciBwcm9qZWN0IG9uIHRoZSBTdGFjayBkYXNoYm9hcmQgYXQgaHR0cHM6Ly9hcHAuc3RhY2stYXV0aC5jb20gYW5kIGNvcHkgeW91ciBwdWJsaXNoYWJsZSBjbGllbnQga2V5IGludG8gdGhlIE5FWFRfUFVCTElDX1NUQUNLX1BVQkxJU0hBQkxFX0NMSUVOVF9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUuXCIpKTtcbn1cbmZ1bmN0aW9uIGdldERlZmF1bHRTZWNyZXRTZXJ2ZXJLZXkoKSB7XG4gIHJldHVybiBwcm9jZXNzLmVudi5TVEFDS19TRUNSRVRfU0VSVkVSX0tFWSB8fCB0aHJvd0VycihuZXcgRXJyb3IoXCJObyBzZWNyZXQgc2VydmVyIGtleSBwcm92aWRlZC4gUGxlYXNlIGNvcHkgeW91ciBrZXkgZnJvbSB0aGUgU3RhY2sgZGFzaGJvYXJkIGFuZCBwdXQgaXQgaW4gdGhlIFNUQUNLX1NFQ1JFVF9TRVJWRVJfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlLlwiKSk7XG59XG5mdW5jdGlvbiBnZXREZWZhdWx0U3VwZXJTZWNyZXRBZG1pbktleSgpIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52LlNUQUNLX1NVUEVSX1NFQ1JFVF9BRE1JTl9LRVkgfHwgdGhyb3dFcnIobmV3IEVycm9yKFwiTm8gc3VwZXIgc2VjcmV0IGFkbWluIGtleSBwcm92aWRlZC4gUGxlYXNlIGNvcHkgeW91ciBrZXkgZnJvbSB0aGUgU3RhY2sgZGFzaGJvYXJkIGFuZCBwdXQgaXQgaW4gdGhlIFNUQUNLX1NVUEVSX1NFQ1JFVF9BRE1JTl9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUuXCIpKTtcbn1cbmZ1bmN0aW9uIGdldERlZmF1bHRFeHRyYVJlcXVlc3RIZWFkZXJzKCkge1xuICByZXR1cm4gSlNPTi5wYXJzZShwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVEFDS19FWFRSQV9SRVFVRVNUX0hFQURFUlMgfHwgXCJ7fVwiKTtcbn1cbmZ1bmN0aW9uIGdldEJhc2VVcmwodXNlclNwZWNpZmllZEJhc2VVcmwpIHtcbiAgbGV0IHVybDtcbiAgaWYgKHVzZXJTcGVjaWZpZWRCYXNlVXJsKSB7XG4gICAgaWYgKHR5cGVvZiB1c2VyU3BlY2lmaWVkQmFzZVVybCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdXJsID0gdXNlclNwZWNpZmllZEJhc2VVcmw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc0Jyb3dzZXJMaWtlKCkpIHtcbiAgICAgICAgdXJsID0gdXNlclNwZWNpZmllZEJhc2VVcmwuYnJvd3NlcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVybCA9IHVzZXJTcGVjaWZpZWRCYXNlVXJsLnNlcnZlcjtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGlzQnJvd3Nlckxpa2UoKSkge1xuICAgICAgdXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQlJPV1NFUl9TVEFDS19BUElfVVJMO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TRVJWRVJfU1RBQ0tfQVBJX1VSTDtcbiAgICB9XG4gICAgdXJsID0gdXJsIHx8IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NUQUNLX0FQSV9VUkwgfHwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1RBQ0tfVVJMIHx8IGRlZmF1bHRCYXNlVXJsO1xuICB9XG4gIHJldHVybiB1cmwuZW5kc1dpdGgoXCIvXCIpID8gdXJsLnNsaWNlKDAsIC0xKSA6IHVybDtcbn1cbnZhciBkZWZhdWx0QmFzZVVybCA9IFwiaHR0cHM6Ly9hcGkuc3RhY2stYXV0aC5jb21cIjtcbmZ1bmN0aW9uIGNyZWF0ZUVtcHR5VG9rZW5TdG9yZSgpIHtcbiAgcmV0dXJuIG5ldyBTdG9yZSh7XG4gICAgcmVmcmVzaFRva2VuOiBudWxsLFxuICAgIGFjY2Vzc1Rva2VuOiBudWxsXG4gIH0pO1xufVxudmFyIGNhY2hlUHJvbWlzZUJ5SG9va0lkID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmZ1bmN0aW9uIHVzZUFzeW5jQ2FjaGUoY2FjaGUsIGRlcGVuZGVuY2llcywgY2FsbGVyKSB7XG4gIHN1c3BlbmRJZlNzcihjYWxsZXIpO1xuICBjb25zdCBpZCA9IFJlYWN0LnVzZUlkKCk7XG4gIGNvbnN0IHN1YnNjcmliZSA9IHVzZUNhbGxiYWNrKChjYikgPT4ge1xuICAgIGNvbnN0IHsgdW5zdWJzY3JpYmUgfSA9IGNhY2hlLm9uU3RhdGVDaGFuZ2UoZGVwZW5kZW5jaWVzLCAoKSA9PiB7XG4gICAgICBjYWNoZVByb21pc2VCeUhvb2tJZC5kZWxldGUoaWQpO1xuICAgICAgY2IoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0sIFtjYWNoZSwgLi4uZGVwZW5kZW5jaWVzXSk7XG4gIGNvbnN0IGdldFNuYXBzaG90ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghY2FjaGVQcm9taXNlQnlIb29rSWQuaGFzKGlkKSkge1xuICAgICAgY2FjaGVQcm9taXNlQnlIb29rSWQuc2V0KGlkLCBjYWNoZS5nZXRPcldhaXQoZGVwZW5kZW5jaWVzLCBcInJlYWQtd3JpdGVcIikpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVQcm9taXNlQnlIb29rSWQuZ2V0KGlkKTtcbiAgfSwgW2NhY2hlLCAuLi5kZXBlbmRlbmNpZXNdKTtcbiAgY29uc3QgcHJvbWlzZSA9IFJlYWN0LnVzZVN5bmNFeHRlcm5hbFN0b3JlKFxuICAgIHN1YnNjcmliZSxcbiAgICBnZXRTbmFwc2hvdCxcbiAgICAoKSA9PiB0aHJvd0VycihuZXcgRXJyb3IoXCJnZXRTZXJ2ZXJTbmFwc2hvdCBzaG91bGQgbmV2ZXIgYmUgY2FsbGVkIGluIHVzZUFzeW5jQ2FjaGUgYmVjYXVzZSB3ZSByZXN0cmljdCB0byBDU1IgZWFybGllclwiKSlcbiAgKTtcbiAgY29uc3QgcmVzdWx0ID0gUmVhY3QudXNlKHByb21pc2UpO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgY29uc3QgZXJyb3IgPSByZXN1bHQuZXJyb3I7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgIWVycm9yLl9fc3RhY2tIYXNDb25jYXRlbmF0ZWRTdGFja3RyYWNlcykge1xuICAgICAgY29uY2F0U3RhY2t0cmFjZXMoZXJyb3IsIG5ldyBFcnJvcigpKTtcbiAgICAgIGVycm9yLl9fc3RhY2tIYXNDb25jYXRlbmF0ZWRTdGFja3RyYWNlcyA9IHRydWU7XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiByZXN1bHQuZGF0YTtcbn1cbmV4cG9ydCB7XG4gIGNsaWVudFZlcnNpb24sXG4gIGNyZWF0ZUNhY2hlLFxuICBjcmVhdGVDYWNoZUJ5U2Vzc2lvbixcbiAgY3JlYXRlRW1wdHlUb2tlblN0b3JlLFxuICBnZXRCYXNlVXJsLFxuICBnZXREZWZhdWx0RXh0cmFSZXF1ZXN0SGVhZGVycyxcbiAgZ2V0RGVmYXVsdFByb2plY3RJZCxcbiAgZ2V0RGVmYXVsdFB1Ymxpc2hhYmxlQ2xpZW50S2V5LFxuICBnZXREZWZhdWx0U2VjcmV0U2VydmVyS2V5LFxuICBnZXREZWZhdWx0U3VwZXJTZWNyZXRBZG1pbktleSxcbiAgZ2V0VXJscyxcbiAgdXNlQXN5bmNDYWNoZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/common.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/index.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/index.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _StackAdminAppImpl: () => (/* binding */ _StackAdminAppImpl),\n/* harmony export */   _StackClientAppImpl: () => (/* binding */ _StackClientAppImpl),\n/* harmony export */   _StackServerAppImpl: () => (/* binding */ _StackServerAppImpl)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared_dist_utils_compile_time__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/compile-time */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/compile-time.js\");\n/* harmony import */ var _admin_app_impl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./admin-app-impl */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/admin-app-impl.js\");\n/* harmony import */ var _client_app_impl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client-app-impl */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/client-app-impl.js\");\n/* harmony import */ var _server_app_impl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./server-app-impl */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/server-app-impl.js\");\n// src/lib/stack-app/apps/implementations/index.ts\n\n\n\n\nfunction complete() {\n  _client_app_impl__WEBPACK_IMPORTED_MODULE_1__._StackClientAppImplIncomplete.LazyStackAdminAppImpl.value = _admin_app_impl__WEBPACK_IMPORTED_MODULE_2__._StackAdminAppImplIncomplete;\n  return {\n    _StackAdminAppImpl: (0,_stackframe_stack_shared_dist_utils_compile_time__WEBPACK_IMPORTED_MODULE_0__.scrambleDuringCompileTime)(_admin_app_impl__WEBPACK_IMPORTED_MODULE_2__._StackAdminAppImplIncomplete),\n    _StackClientAppImpl: (0,_stackframe_stack_shared_dist_utils_compile_time__WEBPACK_IMPORTED_MODULE_0__.scrambleDuringCompileTime)(_client_app_impl__WEBPACK_IMPORTED_MODULE_1__._StackClientAppImplIncomplete),\n    _StackServerAppImpl: (0,_stackframe_stack_shared_dist_utils_compile_time__WEBPACK_IMPORTED_MODULE_0__.scrambleDuringCompileTime)(_server_app_impl__WEBPACK_IMPORTED_MODULE_3__._StackServerAppImplIncomplete)\n  };\n}\nvar {\n  _StackAdminAppImpl,\n  _StackClientAppImpl,\n  _StackServerAppImpl\n} = complete();\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2FwcHMvaW1wbGVtZW50YXRpb25zL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUM2RjtBQUM3QjtBQUNFO0FBQ0E7QUFDbEU7QUFDQSxFQUFFLDJFQUE2QiwrQkFBK0IseUVBQTRCO0FBQzFGO0FBQ0Esd0JBQXdCLDJHQUF5QixDQUFDLHlFQUE0QjtBQUM5RSx5QkFBeUIsMkdBQXlCLENBQUMsMkVBQTZCO0FBQ2hGLHlCQUF5QiwyR0FBeUIsQ0FBQywyRUFBNkI7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUtBO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2tcXGRpc3RcXGVzbVxcbGliXFxzdGFjay1hcHBcXGFwcHNcXGltcGxlbWVudGF0aW9uc1xcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9zdGFjay1hcHAvYXBwcy9pbXBsZW1lbnRhdGlvbnMvaW5kZXgudHNcbmltcG9ydCB7IHNjcmFtYmxlRHVyaW5nQ29tcGlsZVRpbWUgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvY29tcGlsZS10aW1lXCI7XG5pbXBvcnQgeyBfU3RhY2tBZG1pbkFwcEltcGxJbmNvbXBsZXRlIH0gZnJvbSBcIi4vYWRtaW4tYXBwLWltcGxcIjtcbmltcG9ydCB7IF9TdGFja0NsaWVudEFwcEltcGxJbmNvbXBsZXRlIH0gZnJvbSBcIi4vY2xpZW50LWFwcC1pbXBsXCI7XG5pbXBvcnQgeyBfU3RhY2tTZXJ2ZXJBcHBJbXBsSW5jb21wbGV0ZSB9IGZyb20gXCIuL3NlcnZlci1hcHAtaW1wbFwiO1xuZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gIF9TdGFja0NsaWVudEFwcEltcGxJbmNvbXBsZXRlLkxhenlTdGFja0FkbWluQXBwSW1wbC52YWx1ZSA9IF9TdGFja0FkbWluQXBwSW1wbEluY29tcGxldGU7XG4gIHJldHVybiB7XG4gICAgX1N0YWNrQWRtaW5BcHBJbXBsOiBzY3JhbWJsZUR1cmluZ0NvbXBpbGVUaW1lKF9TdGFja0FkbWluQXBwSW1wbEluY29tcGxldGUpLFxuICAgIF9TdGFja0NsaWVudEFwcEltcGw6IHNjcmFtYmxlRHVyaW5nQ29tcGlsZVRpbWUoX1N0YWNrQ2xpZW50QXBwSW1wbEluY29tcGxldGUpLFxuICAgIF9TdGFja1NlcnZlckFwcEltcGw6IHNjcmFtYmxlRHVyaW5nQ29tcGlsZVRpbWUoX1N0YWNrU2VydmVyQXBwSW1wbEluY29tcGxldGUpXG4gIH07XG59XG52YXIge1xuICBfU3RhY2tBZG1pbkFwcEltcGwsXG4gIF9TdGFja0NsaWVudEFwcEltcGwsXG4gIF9TdGFja1NlcnZlckFwcEltcGxcbn0gPSBjb21wbGV0ZSgpO1xuZXhwb3J0IHtcbiAgX1N0YWNrQWRtaW5BcHBJbXBsLFxuICBfU3RhY2tDbGllbnRBcHBJbXBsLFxuICBfU3RhY2tTZXJ2ZXJBcHBJbXBsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/server-app-impl.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/server-app-impl.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _StackServerAppImplIncomplete: () => (/* binding */ _StackServerAppImplIncomplete)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/index.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/promises */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/react */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/react.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/results */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _utils_url__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../utils/url */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/utils/url.js\");\n/* harmony import */ var _api_keys__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../api-keys */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/api-keys/index.js\");\n/* harmony import */ var _contact_channels__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../contact-channels */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/contact-channels/index.js\");\n/* harmony import */ var _teams__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../teams */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/teams/index.js\");\n/* harmony import */ var _users__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../users */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/users/index.js\");\n/* harmony import */ var _client_app_impl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./client-app-impl */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/client-app-impl.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./common */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/common.js\");\n// src/lib/stack-app/apps/implementations/server-app-impl.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar _StackServerAppImplIncomplete = class extends _client_app_impl__WEBPACK_IMPORTED_MODULE_6__._StackClientAppImplIncomplete {\n  constructor(options) {\n    super(\"interface\" in options ? {\n      interface: options.interface,\n      tokenStore: options.tokenStore,\n      urls: options.urls,\n      oauthScopesOnSignIn: options.oauthScopesOnSignIn\n    } : {\n      interface: new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__.StackServerInterface({\n        getBaseUrl: () => (0,_common__WEBPACK_IMPORTED_MODULE_7__.getBaseUrl)(options.baseUrl),\n        projectId: options.projectId ?? (0,_common__WEBPACK_IMPORTED_MODULE_7__.getDefaultProjectId)(),\n        extraRequestHeaders: options.extraRequestHeaders ?? {},\n        clientVersion: _common__WEBPACK_IMPORTED_MODULE_7__.clientVersion,\n        publishableClientKey: options.publishableClientKey ?? (0,_common__WEBPACK_IMPORTED_MODULE_7__.getDefaultPublishableClientKey)(),\n        secretServerKey: options.secretServerKey ?? (0,_common__WEBPACK_IMPORTED_MODULE_7__.getDefaultSecretServerKey)()\n      }),\n      baseUrl: options.baseUrl,\n      extraRequestHeaders: options.extraRequestHeaders,\n      projectId: options.projectId,\n      publishableClientKey: options.publishableClientKey,\n      tokenStore: options.tokenStore,\n      urls: options.urls,\n      oauthScopesOnSignIn: options.oauthScopesOnSignIn,\n      redirectMethod: options.redirectMethod\n    });\n    // TODO override the client user cache to use the server user cache, so we save some requests\n    this._currentServerUserCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCacheBySession)(async (session) => {\n      if (session.isKnownToBeInvalid()) {\n        return null;\n      }\n      return await this._interface.getServerUserByToken(session);\n    });\n    this._serverUsersCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async ([cursor, limit, orderBy, desc, query]) => {\n      return await this._interface.listServerUsers({ cursor, limit, orderBy, desc, query });\n    });\n    this._serverUserCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async ([userId]) => {\n      const user = await this._interface.getServerUserById(userId);\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.or(user, null);\n    });\n    this._serverTeamsCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async ([userId]) => {\n      return await this._interface.listServerTeams({ userId });\n    });\n    this._serverTeamUserPermissionsCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async ([teamId, userId, recursive]) => {\n      return await this._interface.listServerTeamPermissions({ teamId, userId, recursive }, null);\n    });\n    this._serverUserProjectPermissionsCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async ([userId, recursive]) => {\n      return await this._interface.listServerProjectPermissions({ userId, recursive }, null);\n    });\n    this._serverUserOAuthConnectionAccessTokensCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(\n      async ([userId, providerId, scope]) => {\n        try {\n          const result = await this._interface.createServerProviderAccessToken(userId, providerId, scope || \"\");\n          return { accessToken: result.access_token };\n        } catch (err) {\n          if (!(err instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.OAuthConnectionDoesNotHaveRequiredScope || err instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.OAuthConnectionNotConnectedToUser)) {\n            throw err;\n          }\n        }\n        return null;\n      }\n    );\n    this._serverUserOAuthConnectionCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(\n      async ([userId, providerId, scope, redirect]) => {\n        return await this._getUserOAuthConnectionCacheFn({\n          getUser: async () => _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._serverUserCache.getOrWait([userId], \"write-only\")),\n          getOrWaitOAuthToken: async () => _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._serverUserOAuthConnectionAccessTokensCache.getOrWait([userId, providerId, scope || \"\"], \"write-only\")),\n          useOAuthToken: () => (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._serverUserOAuthConnectionAccessTokensCache, [userId, providerId, scope || \"\"], \"user.useConnectedAccount()\"),\n          providerId,\n          scope,\n          redirect,\n          session: null\n        });\n      }\n    );\n    this._serverTeamMemberProfilesCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(\n      async ([teamId]) => {\n        return await this._interface.listServerTeamMemberProfiles({ teamId });\n      }\n    );\n    this._serverTeamInvitationsCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(\n      async ([teamId]) => {\n        return await this._interface.listServerTeamInvitations({ teamId });\n      }\n    );\n    this._serverUserTeamProfileCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(\n      async ([teamId, userId]) => {\n        return await this._interface.getServerTeamMemberProfile({ teamId, userId });\n      }\n    );\n    this._serverContactChannelsCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(\n      async ([userId]) => {\n        return await this._interface.listServerContactChannels(userId);\n      }\n    );\n    this._serverUserApiKeysCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(\n      async ([userId]) => {\n        const result = await this._interface.listProjectApiKeys({\n          user_id: userId\n        }, null, \"server\");\n        return result;\n      }\n    );\n    this._serverTeamApiKeysCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(\n      async ([teamId]) => {\n        const result = await this._interface.listProjectApiKeys({\n          team_id: teamId\n        }, null, \"server\");\n        return result;\n      }\n    );\n    this._serverCheckApiKeyCache = (0,_common__WEBPACK_IMPORTED_MODULE_7__.createCache)(async ([type, apiKey]) => {\n      const result = await this._interface.checkProjectApiKey(\n        type,\n        apiKey,\n        null,\n        \"server\"\n      );\n      return result;\n    });\n  }\n  async _updateServerUser(userId, update) {\n    const result = await this._interface.updateServerUser(userId, (0,_users__WEBPACK_IMPORTED_MODULE_8__.serverUserUpdateOptionsToCrud)(update));\n    await this._refreshUsers();\n    return result;\n  }\n  _serverEditableTeamProfileFromCrud(crud) {\n    const app = this;\n    return {\n      displayName: crud.display_name,\n      profileImageUrl: crud.profile_image_url,\n      async update(update) {\n        await app._interface.updateServerTeamMemberProfile({\n          teamId: crud.team_id,\n          userId: crud.user_id,\n          profile: {\n            display_name: update.displayName,\n            profile_image_url: update.profileImageUrl\n          }\n        });\n        await app._serverUserTeamProfileCache.refresh([crud.team_id, crud.user_id]);\n      }\n    };\n  }\n  _serverContactChannelFromCrud(userId, crud) {\n    const app = this;\n    return {\n      id: crud.id,\n      value: crud.value,\n      type: crud.type,\n      isVerified: crud.is_verified,\n      isPrimary: crud.is_primary,\n      usedForAuth: crud.used_for_auth,\n      async sendVerificationEmail(options) {\n        await app._interface.sendServerContactChannelVerificationEmail(userId, crud.id, options?.callbackUrl ?? (0,_utils_url__WEBPACK_IMPORTED_MODULE_9__.constructRedirectUrl)(app.urls.emailVerification, \"callbackUrl\"));\n      },\n      async update(data) {\n        await app._interface.updateServerContactChannel(userId, crud.id, (0,_contact_channels__WEBPACK_IMPORTED_MODULE_10__.serverContactChannelUpdateOptionsToCrud)(data));\n        await Promise.all([\n          app._serverContactChannelsCache.refresh([userId]),\n          app._serverUserCache.refresh([userId])\n        ]);\n      },\n      async delete() {\n        await app._interface.deleteServerContactChannel(userId, crud.id);\n        await Promise.all([\n          app._serverContactChannelsCache.refresh([userId]),\n          app._serverUserCache.refresh([userId])\n        ]);\n      }\n    };\n  }\n  _serverApiKeyFromCrud(crud) {\n    return {\n      ...this._baseApiKeyFromCrud(crud),\n      async revoke() {\n        await this.update({ revoked: true });\n      },\n      update: async (options) => {\n        await this._interface.updateProjectApiKey(\n          crud.type === \"team\" ? { team_id: crud.team_id } : { user_id: crud.user_id },\n          crud.id,\n          await (0,_api_keys__WEBPACK_IMPORTED_MODULE_11__.apiKeyUpdateOptionsToCrud)(crud.type, options),\n          null,\n          \"server\"\n        );\n        if (crud.type === \"team\") {\n          await this._serverTeamApiKeysCache.refresh([crud.team_id]);\n        } else {\n          await this._serverUserApiKeysCache.refresh([crud.user_id]);\n        }\n      }\n    };\n  }\n  _serverUserFromCrud(crud) {\n    const app = this;\n    async function getConnectedAccount(id, options) {\n      const scopeString = options?.scopes?.join(\" \");\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverUserOAuthConnectionCache.getOrWait([crud.id, id, scopeString || \"\", options?.or === \"redirect\"], \"write-only\"));\n    }\n    function useConnectedAccount(id, options) {\n      const scopeString = options?.scopes?.join(\" \");\n      return (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverUserOAuthConnectionCache, [crud.id, id, scopeString || \"\", options?.or === \"redirect\"], \"user.useConnectedAccount()\");\n    }\n    return {\n      ...super._createBaseUser(crud),\n      lastActiveAt: new Date(crud.last_active_at_millis),\n      serverMetadata: crud.server_metadata,\n      async setPrimaryEmail(email, options) {\n        await app._updateServerUser(crud.id, { primaryEmail: email, primaryEmailVerified: options?.verified });\n      },\n      async grantPermission(scope, permissionId) {\n        await app._interface.grantServerTeamUserPermission(scope.id, crud.id, permissionId);\n        for (const recursive of [true, false]) {\n          await app._serverTeamUserPermissionsCache.refresh([scope.id, crud.id, recursive]);\n        }\n      },\n      async revokePermission(scope, permissionId) {\n        await app._interface.revokeServerTeamUserPermission(scope.id, crud.id, permissionId);\n        for (const recursive of [true, false]) {\n          await app._serverTeamUserPermissionsCache.refresh([scope.id, crud.id, recursive]);\n        }\n      },\n      async delete() {\n        const res = await app._interface.deleteServerUser(crud.id);\n        await app._refreshUsers();\n        return res;\n      },\n      async createSession(options) {\n        const tokens = await app._interface.createServerUserSession(crud.id, options.expiresInMillis ?? 1e3 * 60 * 60 * 24 * 365, options.isImpersonation ?? false);\n        return {\n          async getTokens() {\n            return tokens;\n          }\n        };\n      },\n      async getActiveSessions() {\n        const sessions = await app._interface.listServerSessions(crud.id);\n        return sessions.map((session) => app._clientSessionFromCrud(session));\n      },\n      async revokeSession(sessionId) {\n        await app._interface.deleteServerSession(sessionId);\n      },\n      async setDisplayName(displayName) {\n        return await this.update({ displayName });\n      },\n      async setClientMetadata(metadata) {\n        return await this.update({ clientMetadata: metadata });\n      },\n      async setClientReadOnlyMetadata(metadata) {\n        return await this.update({ clientReadOnlyMetadata: metadata });\n      },\n      async setServerMetadata(metadata) {\n        return await this.update({ serverMetadata: metadata });\n      },\n      async setSelectedTeam(team) {\n        return await this.update({ selectedTeamId: team?.id ?? null });\n      },\n      getConnectedAccount,\n      useConnectedAccount,\n      // THIS_LINE_PLATFORM react-like\n      selectedTeam: crud.selected_team ? app._serverTeamFromCrud(crud.selected_team) : null,\n      async getTeam(teamId) {\n        const teams = await this.listTeams();\n        return teams.find((t) => t.id === teamId) ?? null;\n      },\n      useTeam(teamId) {\n        const teams = this.useTeams();\n        return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n          return teams.find((t) => t.id === teamId) ?? null;\n        }, [teams, teamId]);\n      },\n      async listTeams() {\n        const teams = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverTeamsCache.getOrWait([crud.id], \"write-only\"));\n        return teams.map((t) => app._serverTeamFromCrud(t));\n      },\n      useTeams() {\n        const teams = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverTeamsCache, [crud.id], \"user.useTeams()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => teams.map((t) => app._serverTeamFromCrud(t)), [teams]);\n      },\n      createTeam: async (data) => {\n        const team = await app._interface.createServerTeam((0,_teams__WEBPACK_IMPORTED_MODULE_12__.serverTeamCreateOptionsToCrud)({\n          creatorUserId: crud.id,\n          ...data\n        }));\n        await app._serverTeamsCache.refresh([void 0]);\n        await app._updateServerUser(crud.id, { selectedTeamId: team.id });\n        return app._serverTeamFromCrud(team);\n      },\n      leaveTeam: async (team) => {\n        await app._interface.leaveServerTeam({ teamId: team.id, userId: crud.id });\n      },\n      async listPermissions(scopeOrOptions, options) {\n        if (scopeOrOptions && \"id\" in scopeOrOptions) {\n          const scope = scopeOrOptions;\n          const recursive = options?.recursive ?? true;\n          const permissions = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverTeamUserPermissionsCache.getOrWait([scope.id, crud.id, recursive], \"write-only\"));\n          return permissions.map((crud2) => app._serverPermissionFromCrud(crud2));\n        } else {\n          const opts = scopeOrOptions;\n          const recursive = opts?.recursive ?? true;\n          const permissions = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverUserProjectPermissionsCache.getOrWait([crud.id, recursive], \"write-only\"));\n          return permissions.map((crud2) => app._serverPermissionFromCrud(crud2));\n        }\n      },\n      usePermissions(scopeOrOptions, options) {\n        if (scopeOrOptions && \"id\" in scopeOrOptions) {\n          const scope = scopeOrOptions;\n          const recursive = options?.recursive ?? true;\n          const permissions = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverTeamUserPermissionsCache, [scope.id, crud.id, recursive], \"user.usePermissions()\");\n          return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => permissions.map((crud2) => app._serverPermissionFromCrud(crud2)), [permissions]);\n        } else {\n          const opts = scopeOrOptions;\n          const recursive = opts?.recursive ?? true;\n          const permissions = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverUserProjectPermissionsCache, [crud.id, recursive], \"user.usePermissions()\");\n          return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => permissions.map((crud2) => app._serverPermissionFromCrud(crud2)), [permissions]);\n        }\n      },\n      async getPermission(scopeOrPermissionId, permissionId) {\n        if (scopeOrPermissionId && typeof scopeOrPermissionId !== \"string\") {\n          const scope = scopeOrPermissionId;\n          const permissions = await this.listPermissions(scope);\n          return permissions.find((p) => p.id === permissionId) ?? null;\n        } else {\n          const pid = scopeOrPermissionId;\n          const permissions = await this.listPermissions();\n          return permissions.find((p) => p.id === pid) ?? null;\n        }\n      },\n      usePermission(scopeOrPermissionId, permissionId) {\n        if (scopeOrPermissionId && typeof scopeOrPermissionId !== \"string\") {\n          const scope = scopeOrPermissionId;\n          const permissions = this.usePermissions(scope);\n          return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => permissions.find((p) => p.id === permissionId) ?? null, [permissions, permissionId]);\n        } else {\n          const pid = scopeOrPermissionId;\n          const permissions = this.usePermissions();\n          return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => permissions.find((p) => p.id === pid) ?? null, [permissions, pid]);\n        }\n      },\n      async hasPermission(scopeOrPermissionId, permissionId) {\n        if (scopeOrPermissionId && typeof scopeOrPermissionId !== \"string\") {\n          const scope = scopeOrPermissionId;\n          return await this.getPermission(scope, permissionId) !== null;\n        } else {\n          const pid = scopeOrPermissionId;\n          return await this.getPermission(pid) !== null;\n        }\n      },\n      async update(update) {\n        await app._updateServerUser(crud.id, update);\n      },\n      async sendVerificationEmail() {\n        return await app._checkFeatureSupport(\"sendVerificationEmail() on ServerUser\", {});\n      },\n      async updatePassword(options) {\n        const result = await app._interface.updatePassword(options);\n        await app._serverUserCache.refresh([crud.id]);\n        return result;\n      },\n      async setPassword(options) {\n        const result = await this.update(options);\n        await app._serverUserCache.refresh([crud.id]);\n        return result;\n      },\n      async getTeamProfile(team) {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverUserTeamProfileCache.getOrWait([team.id, crud.id], \"write-only\"));\n        return app._serverEditableTeamProfileFromCrud(result);\n      },\n      useTeamProfile(team) {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverUserTeamProfileCache, [team.id, crud.id], \"user.useTeamProfile()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => app._serverEditableTeamProfileFromCrud(result), [result]);\n      },\n      async listContactChannels() {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverContactChannelsCache.getOrWait([crud.id], \"write-only\"));\n        return result.map((data) => app._serverContactChannelFromCrud(crud.id, data));\n      },\n      useContactChannels() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverContactChannelsCache, [crud.id], \"user.useContactChannels()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => result.map((data) => app._serverContactChannelFromCrud(crud.id, data)), [result]);\n      },\n      createContactChannel: async (data) => {\n        const contactChannel = await app._interface.createServerContactChannel((0,_contact_channels__WEBPACK_IMPORTED_MODULE_10__.serverContactChannelCreateOptionsToCrud)(crud.id, data));\n        await Promise.all([\n          app._serverContactChannelsCache.refresh([crud.id]),\n          app._serverUserCache.refresh([crud.id])\n        ]);\n        return app._serverContactChannelFromCrud(crud.id, contactChannel);\n      },\n      useApiKeys() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverUserApiKeysCache, [crud.id], \"user.useApiKeys()\");\n        return result.map((apiKey) => app._serverApiKeyFromCrud(apiKey));\n      },\n      async listApiKeys() {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverUserApiKeysCache.getOrWait([crud.id], \"write-only\"));\n        return result.map((apiKey) => app._serverApiKeyFromCrud(apiKey));\n      },\n      async createApiKey(options) {\n        const result = await app._interface.createProjectApiKey(\n          await (0,_api_keys__WEBPACK_IMPORTED_MODULE_11__.apiKeyCreationOptionsToCrud)(\"user\", crud.id, options),\n          null,\n          \"server\"\n        );\n        await app._serverUserApiKeysCache.refresh([crud.id]);\n        return app._serverApiKeyFromCrud(result);\n      }\n    };\n  }\n  _serverTeamUserFromCrud(crud) {\n    return {\n      ...this._serverUserFromCrud(crud.user),\n      teamProfile: {\n        displayName: crud.display_name,\n        profileImageUrl: crud.profile_image_url\n      }\n    };\n  }\n  _serverTeamInvitationFromCrud(crud) {\n    return {\n      id: crud.id,\n      recipientEmail: crud.recipient_email,\n      expiresAt: new Date(crud.expires_at_millis),\n      revoke: async () => {\n        await this._interface.revokeServerTeamInvitation(crud.id, crud.team_id);\n      }\n    };\n  }\n  _currentUserFromCrud(crud, session) {\n    const app = this;\n    const currentUser = {\n      ...this._serverUserFromCrud(crud),\n      ...this._createAuth(session),\n      ...this._isInternalProject() ? this._createInternalUserExtra(session) : {}\n    };\n    Object.freeze(currentUser);\n    return currentUser;\n  }\n  _serverTeamFromCrud(crud) {\n    const app = this;\n    return {\n      id: crud.id,\n      displayName: crud.display_name,\n      profileImageUrl: crud.profile_image_url,\n      createdAt: new Date(crud.created_at_millis),\n      clientMetadata: crud.client_metadata,\n      clientReadOnlyMetadata: crud.client_read_only_metadata,\n      serverMetadata: crud.server_metadata,\n      async update(update) {\n        await app._interface.updateServerTeam(crud.id, (0,_teams__WEBPACK_IMPORTED_MODULE_12__.serverTeamUpdateOptionsToCrud)(update));\n        await app._serverTeamsCache.refresh([void 0]);\n      },\n      async delete() {\n        await app._interface.deleteServerTeam(crud.id);\n        await app._serverTeamsCache.refresh([void 0]);\n      },\n      async listUsers() {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverTeamMemberProfilesCache.getOrWait([crud.id], \"write-only\"));\n        return result.map((u) => app._serverTeamUserFromCrud(u));\n      },\n      useUsers() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverTeamMemberProfilesCache, [crud.id], \"team.useUsers()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => result.map((u) => app._serverTeamUserFromCrud(u)), [result]);\n      },\n      async addUser(userId) {\n        await app._interface.addServerUserToTeam({\n          teamId: crud.id,\n          userId\n        });\n        await app._serverTeamMemberProfilesCache.refresh([crud.id]);\n      },\n      async removeUser(userId) {\n        await app._interface.removeServerUserFromTeam({\n          teamId: crud.id,\n          userId\n        });\n        await app._serverTeamMemberProfilesCache.refresh([crud.id]);\n      },\n      async inviteUser(options) {\n        await app._interface.sendServerTeamInvitation({\n          teamId: crud.id,\n          email: options.email,\n          callbackUrl: options.callbackUrl ?? (0,_utils_url__WEBPACK_IMPORTED_MODULE_9__.constructRedirectUrl)(app.urls.teamInvitation, \"callbackUrl\")\n        });\n        await app._serverTeamInvitationsCache.refresh([crud.id]);\n      },\n      async listInvitations() {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverTeamInvitationsCache.getOrWait([crud.id], \"write-only\"));\n        return result.map((crud2) => app._serverTeamInvitationFromCrud(crud2));\n      },\n      useInvitations() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverTeamInvitationsCache, [crud.id], \"team.useInvitations()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => result.map((crud2) => app._serverTeamInvitationFromCrud(crud2)), [result]);\n      },\n      useApiKeys() {\n        const result = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(app._serverTeamApiKeysCache, [crud.id], \"team.useApiKeys()\");\n        return result.map((apiKey) => app._serverApiKeyFromCrud(apiKey));\n      },\n      async listApiKeys() {\n        const result = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await app._serverTeamApiKeysCache.getOrWait([crud.id], \"write-only\"));\n        return result.map((apiKey) => app._serverApiKeyFromCrud(apiKey));\n      },\n      async createApiKey(options) {\n        const result = await app._interface.createProjectApiKey(\n          await (0,_api_keys__WEBPACK_IMPORTED_MODULE_11__.apiKeyCreationOptionsToCrud)(\"team\", crud.id, options),\n          null,\n          \"server\"\n        );\n        await app._serverTeamApiKeysCache.refresh([crud.id]);\n        return app._serverApiKeyFromCrud(result);\n      }\n    };\n  }\n  async _getUserApiKey(options) {\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._serverCheckApiKeyCache.getOrWait([\"user\", options.apiKey], \"write-only\"));\n    return crud ? this._serverApiKeyFromCrud(crud) : null;\n  }\n  async _getTeamApiKey(options) {\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._serverCheckApiKeyCache.getOrWait([\"team\", options.apiKey], \"write-only\"));\n    return crud ? this._serverApiKeyFromCrud(crud) : null;\n  }\n  _useUserApiKey(options) {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._serverCheckApiKeyCache, [\"user\", options.apiKey], \"useUserApiKey()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => crud ? this._serverApiKeyFromCrud(crud) : null, [crud]);\n  }\n  _useTeamApiKey(options) {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._serverCheckApiKeyCache, [\"team\", options.apiKey], \"useTeamApiKey()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => crud ? this._serverApiKeyFromCrud(crud) : null, [crud]);\n  }\n  async _getUserByApiKey(apiKey) {\n    const apiKeyObject = await this._getUserApiKey({ apiKey });\n    if (apiKeyObject === null) {\n      return null;\n    }\n    return await this.getServerUserById(apiKeyObject.userId);\n  }\n  _useUserByApiKey(apiKey) {\n    const apiKeyObject = this._useUserApiKey({ apiKey });\n    if (apiKeyObject === null) {\n      return null;\n    }\n    return this.useUserById(apiKeyObject.userId);\n  }\n  async _getTeamByApiKey(apiKey) {\n    const apiKeyObject = await this._getTeamApiKey({ apiKey });\n    if (apiKeyObject === null) {\n      return null;\n    }\n    return await this.getTeam(apiKeyObject.teamId);\n  }\n  _useTeamByApiKey(apiKey) {\n    const apiKeyObject = this._useTeamApiKey({ apiKey });\n    if (apiKeyObject === null) {\n      return null;\n    }\n    return this.useTeam(apiKeyObject.teamId);\n  }\n  async createUser(options) {\n    const crud = await this._interface.createServerUser((0,_users__WEBPACK_IMPORTED_MODULE_8__.serverUserCreateOptionsToCrud)(options));\n    await this._refreshUsers();\n    return this._serverUserFromCrud(crud);\n  }\n  async getUser(options) {\n    if (typeof options === \"string\") {\n      return await this.getServerUserById(options);\n    } else if (typeof options === \"object\" && \"apiKey\" in options) {\n      return await this._getUserByApiKey(options.apiKey);\n    } else {\n      this._ensurePersistentTokenStore(options?.tokenStore);\n      const session = await this._getSession(options?.tokenStore);\n      let crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._currentServerUserCache.getOrWait([session], \"write-only\"));\n      if (crud?.is_anonymous && options?.or !== \"anonymous\" && options?.or !== \"anonymous-if-exists\") {\n        crud = null;\n      }\n      if (crud === null) {\n        switch (options?.or) {\n          case \"redirect\": {\n            await this.redirectToSignIn({ replace: true });\n            break;\n          }\n          case \"throw\": {\n            throw new Error(\"User is not signed in but getUser was called with { or: 'throw' }\");\n          }\n          case \"anonymous\": {\n            const tokens = await this._signUpAnonymously();\n            return await this.getUser({ tokenStore: tokens, or: \"anonymous-if-exists\" }) ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__.throwErr)(\"Something went wrong while signing up anonymously\");\n          }\n          case void 0:\n          case \"anonymous-if-exists\":\n          case \"return-null\": {\n            return null;\n          }\n        }\n      }\n      return crud && this._currentUserFromCrud(crud, session);\n    }\n  }\n  async getServerUser() {\n    console.warn(\"stackServerApp.getServerUser is deprecated; use stackServerApp.getUser instead\");\n    return await this.getUser();\n  }\n  async getServerUserById(userId) {\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._serverUserCache.getOrWait([userId], \"write-only\"));\n    return crud && this._serverUserFromCrud(crud);\n  }\n  useUser(options) {\n    if (typeof options === \"string\") {\n      return this.useUserById(options);\n    } else if (typeof options === \"object\" && \"apiKey\" in options) {\n      return this._useUserByApiKey(options.apiKey);\n    } else {\n      this._ensurePersistentTokenStore(options?.tokenStore);\n      const session = this._useSession(options?.tokenStore);\n      let crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._currentServerUserCache, [session], \"useUser()\");\n      if (crud?.is_anonymous && options?.or !== \"anonymous\" && options?.or !== \"anonymous-if-exists\") {\n        crud = null;\n      }\n      if (crud === null) {\n        switch (options?.or) {\n          case \"redirect\": {\n            (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.redirectToSignIn({ replace: true }));\n            (0,_stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_3__.suspend)();\n            throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"suspend should never return\");\n          }\n          case \"throw\": {\n            throw new Error(\"User is not signed in but useUser was called with { or: 'throw' }\");\n          }\n          case \"anonymous\": {\n            (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(async () => {\n              await this._signUpAnonymously();\n              if (typeof window !== \"undefined\") {\n                window.location.reload();\n              }\n            });\n            (0,_stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_3__.suspend)();\n            throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"suspend should never return\");\n          }\n          case void 0:\n          case \"anonymous-if-exists\":\n          case \"return-null\": {\n          }\n        }\n      }\n      return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n        return crud && this._currentUserFromCrud(crud, session);\n      }, [crud, session, options?.or]);\n    }\n  }\n  useUserById(userId) {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._serverUserCache, [userId], \"useUserById()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n      return crud && this._serverUserFromCrud(crud);\n    }, [crud]);\n  }\n  async listUsers(options) {\n    const crud = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._serverUsersCache.getOrWait([options?.cursor, options?.limit, options?.orderBy, options?.desc, options?.query], \"write-only\"));\n    const result = crud.items.map((j) => this._serverUserFromCrud(j));\n    result.nextCursor = crud.pagination?.next_cursor ?? null;\n    return result;\n  }\n  useUsers(options) {\n    const crud = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._serverUsersCache, [options?.cursor, options?.limit, options?.orderBy, options?.desc, options?.query], \"useServerUsers()\");\n    const result = crud.items.map((j) => this._serverUserFromCrud(j));\n    result.nextCursor = crud.pagination?.next_cursor ?? null;\n    return result;\n  }\n  _serverPermissionFromCrud(crud) {\n    return {\n      id: crud.id\n    };\n  }\n  _serverTeamPermissionDefinitionFromCrud(crud) {\n    return {\n      id: crud.id,\n      description: crud.description,\n      containedPermissionIds: crud.contained_permission_ids\n    };\n  }\n  _serverProjectPermissionDefinitionFromCrud(crud) {\n    return {\n      id: crud.id,\n      description: crud.description,\n      containedPermissionIds: crud.contained_permission_ids\n    };\n  }\n  async listTeams() {\n    const teams = _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_4__.Result.orThrow(await this._serverTeamsCache.getOrWait([void 0], \"write-only\"));\n    return teams.map((t) => this._serverTeamFromCrud(t));\n  }\n  async createTeam(data) {\n    const team = await this._interface.createServerTeam((0,_teams__WEBPACK_IMPORTED_MODULE_12__.serverTeamCreateOptionsToCrud)(data));\n    await this._serverTeamsCache.refresh([void 0]);\n    return this._serverTeamFromCrud(team);\n  }\n  useTeams() {\n    const teams = (0,_common__WEBPACK_IMPORTED_MODULE_7__.useAsyncCache)(this._serverTeamsCache, [void 0], \"useServerTeams()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n      return teams.map((t) => this._serverTeamFromCrud(t));\n    }, [teams]);\n  }\n  async getTeam(options) {\n    if (typeof options === \"object\" && \"apiKey\" in options) {\n      return await this._getTeamByApiKey(options.apiKey);\n    } else {\n      const teamId = options;\n      const teams = await this.listTeams();\n      return teams.find((t) => t.id === teamId) ?? null;\n    }\n  }\n  useTeam(options) {\n    if (typeof options === \"object\" && \"apiKey\" in options) {\n      return this._useTeamByApiKey(options.apiKey);\n    } else {\n      const teamId = options;\n      const teams = this.useTeams();\n      return (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n        return teams.find((t) => t.id === teamId) ?? null;\n      }, [teams, teamId]);\n    }\n  }\n  async _refreshSession(session) {\n    await Promise.all([\n      super._refreshUser(session),\n      this._currentServerUserCache.refresh([session])\n    ]);\n  }\n  async _refreshUsers() {\n    await Promise.all([\n      super._refreshUsers(),\n      this._serverUserCache.refreshWhere(() => true),\n      this._serverUsersCache.refreshWhere(() => true),\n      this._serverContactChannelsCache.refreshWhere(() => true)\n    ]);\n  }\n};\n\n//# sourceMappingURL=server-app-impl.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2FwcHMvaW1wbGVtZW50YXRpb25zL3NlcnZlci1hcHAtaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUM2RTtBQUNjO0FBQ1Y7QUFDYjtBQUNDO0FBQ3JDO0FBQzZCO0FBQzJCO0FBQ2tDO0FBQy9CO0FBQ0E7QUFDekI7QUFDc0c7QUFDL0g7QUFDekMsa0RBQWtELDJFQUE2QjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04scUJBQXFCLDBFQUFvQjtBQUN6QywwQkFBMEIsbURBQVU7QUFDcEMsd0NBQXdDLDREQUFtQjtBQUMzRCw4REFBOEQ7QUFDOUQscUJBQXFCO0FBQ3JCLDhEQUE4RCx1RUFBOEI7QUFDNUYsb0RBQW9ELGtFQUF5QjtBQUM3RSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG1DQUFtQyw2REFBb0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsNkJBQTZCLG9EQUFXO0FBQ3hDLHFEQUFxRCxxQ0FBcUM7QUFDMUYsS0FBSztBQUNMLDRCQUE0QixvREFBVztBQUN2QztBQUNBLGFBQWEsK0VBQU07QUFDbkIsS0FBSztBQUNMLDZCQUE2QixvREFBVztBQUN4QyxxREFBcUQsUUFBUTtBQUM3RCxLQUFLO0FBQ0wsMkNBQTJDLG9EQUFXO0FBQ3RELCtEQUErRCwyQkFBMkI7QUFDMUYsS0FBSztBQUNMLDhDQUE4QyxvREFBVztBQUN6RCxrRUFBa0UsbUJBQW1CO0FBQ3JGLEtBQUs7QUFDTCx1REFBdUQsb0RBQVc7QUFDbEU7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLFVBQVU7QUFDViwrQkFBK0IsaUVBQVcsMkRBQTJELGlFQUFXO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxvREFBVztBQUN0RDtBQUNBO0FBQ0EsK0JBQStCLCtFQUFNO0FBQ3JDLDJDQUEyQywrRUFBTTtBQUNqRCwrQkFBK0Isc0RBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDBDQUEwQyxvREFBVztBQUNyRDtBQUNBLG9FQUFvRSxRQUFRO0FBQzVFO0FBQ0E7QUFDQSx1Q0FBdUMsb0RBQVc7QUFDbEQ7QUFDQSxpRUFBaUUsUUFBUTtBQUN6RTtBQUNBO0FBQ0EsdUNBQXVDLG9EQUFXO0FBQ2xEO0FBQ0Esa0VBQWtFLGdCQUFnQjtBQUNsRjtBQUNBO0FBQ0EsdUNBQXVDLG9EQUFXO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG9EQUFXO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsb0RBQVc7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxvREFBVztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0VBQWtFLHFFQUE2QjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0hBQWdILGdFQUFvQjtBQUNwSSxPQUFPO0FBQ1A7QUFDQSx5RUFBeUUsMkZBQXVDO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGVBQWU7QUFDM0MsT0FBTztBQUNQO0FBQ0E7QUFDQSxtQ0FBbUMsd0JBQXdCLElBQUksdUJBQXVCO0FBQ3RGO0FBQ0EsZ0JBQWdCLHFFQUF5QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0VBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzREFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsOERBQThEO0FBQzdHLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxtQ0FBbUMsYUFBYTtBQUNoRCxPQUFPO0FBQ1A7QUFDQSxtQ0FBbUMsMEJBQTBCO0FBQzdELE9BQU87QUFDUDtBQUNBLG1DQUFtQyxrQ0FBa0M7QUFDckUsT0FBTztBQUNQO0FBQ0EsbUNBQW1DLDBCQUEwQjtBQUM3RCxPQUFPO0FBQ1A7QUFDQSxtQ0FBbUMsa0NBQWtDO0FBQ3JFLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsZUFBZSw4Q0FBTztBQUN0QjtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxzQkFBc0IsK0VBQU07QUFDNUI7QUFDQSxPQUFPO0FBQ1A7QUFDQSxzQkFBc0Isc0RBQWE7QUFDbkMsZUFBZSw4Q0FBTztBQUN0QixPQUFPO0FBQ1A7QUFDQSwyREFBMkQsc0VBQTZCO0FBQ3hGO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSwrQ0FBK0MseUJBQXlCO0FBQ3hFO0FBQ0EsT0FBTztBQUNQO0FBQ0EsK0NBQStDLGtDQUFrQztBQUNqRixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0VBQU07QUFDcEM7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLDhCQUE4QiwrRUFBTTtBQUNwQztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNEQUFhO0FBQzNDLGlCQUFpQiw4Q0FBTztBQUN4QixVQUFVO0FBQ1Y7QUFDQTtBQUNBLDhCQUE4QixzREFBYTtBQUMzQyxpQkFBaUIsOENBQU87QUFDeEI7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4Q0FBTztBQUN4QixVQUFVO0FBQ1Y7QUFDQTtBQUNBLGlCQUFpQiw4Q0FBTztBQUN4QjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLHlGQUF5RjtBQUN6RixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsK0VBQU07QUFDN0I7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsc0RBQWE7QUFDcEMsZUFBZSw4Q0FBTztBQUN0QixPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsK0VBQU07QUFDN0I7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsc0RBQWE7QUFDcEMsZUFBZSw4Q0FBTztBQUN0QixPQUFPO0FBQ1A7QUFDQSwrRUFBK0UsMkZBQXVDO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsc0RBQWE7QUFDcEM7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsK0VBQU07QUFDN0I7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGdCQUFnQix1RUFBMkI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELHNFQUE2QjtBQUNwRjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsK0VBQU07QUFDN0I7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsc0RBQWE7QUFDcEMsZUFBZSw4Q0FBTztBQUN0QixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsZ0VBQW9CO0FBQ2xFLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBLHVCQUF1QiwrRUFBTTtBQUM3QjtBQUNBLE9BQU87QUFDUDtBQUNBLHVCQUF1QixzREFBYTtBQUNwQyxlQUFlLDhDQUFPO0FBQ3RCLE9BQU87QUFDUDtBQUNBLHVCQUF1QixzREFBYTtBQUNwQztBQUNBLE9BQU87QUFDUDtBQUNBLHVCQUF1QiwrRUFBTTtBQUM3QjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsZ0JBQWdCLHVFQUEyQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0VBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtFQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzREFBYTtBQUM5QixXQUFXLDhDQUFPO0FBQ2xCO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQWE7QUFDOUIsV0FBVyw4Q0FBTztBQUNsQjtBQUNBO0FBQ0EscURBQXFELFFBQVE7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELFFBQVE7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELHFFQUE2QjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLGlCQUFpQiwrRUFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsZUFBZTtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsYUFBYTtBQUM5RjtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsK0NBQStDLEtBQUssb0ZBQVE7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwrRUFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrRkFBaUIseUJBQXlCLGVBQWU7QUFDckUsWUFBWSxrRkFBTztBQUNuQixzQkFBc0IsMkZBQW1CO0FBQ3pDO0FBQ0E7QUFDQSxpRkFBaUYsYUFBYTtBQUM5RjtBQUNBO0FBQ0EsWUFBWSwrRkFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsWUFBWSxrRkFBTztBQUNuQixzQkFBc0IsMkZBQW1CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4Q0FBTztBQUNwQjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQWE7QUFDOUIsV0FBVyw4Q0FBTztBQUNsQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUJBQWlCLCtFQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtFQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxzRUFBNkI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQWE7QUFDL0IsV0FBVyw4Q0FBTztBQUNsQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxhQUFhLDhDQUFPO0FBQ3BCO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrXFxkaXN0XFxlc21cXGxpYlxcc3RhY2stYXBwXFxhcHBzXFxpbXBsZW1lbnRhdGlvbnNcXHNlcnZlci1hcHAtaW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL3N0YWNrLWFwcC9hcHBzL2ltcGxlbWVudGF0aW9ucy9zZXJ2ZXItYXBwLWltcGwudHNcbmltcG9ydCB7IEtub3duRXJyb3JzLCBTdGFja1NlcnZlckludGVyZmFjZSB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWRcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IsIHRocm93RXJyIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2Vycm9yc1wiO1xuaW1wb3J0IHsgcnVuQXN5bmNocm9ub3VzbHkgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IHN1c3BlbmQgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvcmVhY3RcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9yZXN1bHRzXCI7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjb25zdHJ1Y3RSZWRpcmVjdFVybCB9IGZyb20gXCIuLi8uLi8uLi8uLi91dGlscy91cmxcIjtcbmltcG9ydCB7IGFwaUtleUNyZWF0aW9uT3B0aW9uc1RvQ3J1ZCwgYXBpS2V5VXBkYXRlT3B0aW9uc1RvQ3J1ZCB9IGZyb20gXCIuLi8uLi9hcGkta2V5c1wiO1xuaW1wb3J0IHsgc2VydmVyQ29udGFjdENoYW5uZWxDcmVhdGVPcHRpb25zVG9DcnVkLCBzZXJ2ZXJDb250YWN0Q2hhbm5lbFVwZGF0ZU9wdGlvbnNUb0NydWQgfSBmcm9tIFwiLi4vLi4vY29udGFjdC1jaGFubmVsc1wiO1xuaW1wb3J0IHsgc2VydmVyVGVhbUNyZWF0ZU9wdGlvbnNUb0NydWQsIHNlcnZlclRlYW1VcGRhdGVPcHRpb25zVG9DcnVkIH0gZnJvbSBcIi4uLy4uL3RlYW1zXCI7XG5pbXBvcnQgeyBzZXJ2ZXJVc2VyQ3JlYXRlT3B0aW9uc1RvQ3J1ZCwgc2VydmVyVXNlclVwZGF0ZU9wdGlvbnNUb0NydWQgfSBmcm9tIFwiLi4vLi4vdXNlcnNcIjtcbmltcG9ydCB7IF9TdGFja0NsaWVudEFwcEltcGxJbmNvbXBsZXRlIH0gZnJvbSBcIi4vY2xpZW50LWFwcC1pbXBsXCI7XG5pbXBvcnQgeyBjbGllbnRWZXJzaW9uLCBjcmVhdGVDYWNoZSwgY3JlYXRlQ2FjaGVCeVNlc3Npb24sIGdldEJhc2VVcmwsIGdldERlZmF1bHRQcm9qZWN0SWQsIGdldERlZmF1bHRQdWJsaXNoYWJsZUNsaWVudEtleSwgZ2V0RGVmYXVsdFNlY3JldFNlcnZlcktleSB9IGZyb20gXCIuL2NvbW1vblwiO1xuaW1wb3J0IHsgdXNlQXN5bmNDYWNoZSB9IGZyb20gXCIuL2NvbW1vblwiO1xudmFyIF9TdGFja1NlcnZlckFwcEltcGxJbmNvbXBsZXRlID0gY2xhc3MgZXh0ZW5kcyBfU3RhY2tDbGllbnRBcHBJbXBsSW5jb21wbGV0ZSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcihcImludGVyZmFjZVwiIGluIG9wdGlvbnMgPyB7XG4gICAgICBpbnRlcmZhY2U6IG9wdGlvbnMuaW50ZXJmYWNlLFxuICAgICAgdG9rZW5TdG9yZTogb3B0aW9ucy50b2tlblN0b3JlLFxuICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgb2F1dGhTY29wZXNPblNpZ25Jbjogb3B0aW9ucy5vYXV0aFNjb3Blc09uU2lnbkluXG4gICAgfSA6IHtcbiAgICAgIGludGVyZmFjZTogbmV3IFN0YWNrU2VydmVySW50ZXJmYWNlKHtcbiAgICAgICAgZ2V0QmFzZVVybDogKCkgPT4gZ2V0QmFzZVVybChvcHRpb25zLmJhc2VVcmwpLFxuICAgICAgICBwcm9qZWN0SWQ6IG9wdGlvbnMucHJvamVjdElkID8/IGdldERlZmF1bHRQcm9qZWN0SWQoKSxcbiAgICAgICAgZXh0cmFSZXF1ZXN0SGVhZGVyczogb3B0aW9ucy5leHRyYVJlcXVlc3RIZWFkZXJzID8/IHt9LFxuICAgICAgICBjbGllbnRWZXJzaW9uLFxuICAgICAgICBwdWJsaXNoYWJsZUNsaWVudEtleTogb3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleSA/PyBnZXREZWZhdWx0UHVibGlzaGFibGVDbGllbnRLZXkoKSxcbiAgICAgICAgc2VjcmV0U2VydmVyS2V5OiBvcHRpb25zLnNlY3JldFNlcnZlcktleSA/PyBnZXREZWZhdWx0U2VjcmV0U2VydmVyS2V5KClcbiAgICAgIH0pLFxuICAgICAgYmFzZVVybDogb3B0aW9ucy5iYXNlVXJsLFxuICAgICAgZXh0cmFSZXF1ZXN0SGVhZGVyczogb3B0aW9ucy5leHRyYVJlcXVlc3RIZWFkZXJzLFxuICAgICAgcHJvamVjdElkOiBvcHRpb25zLnByb2plY3RJZCxcbiAgICAgIHB1Ymxpc2hhYmxlQ2xpZW50S2V5OiBvcHRpb25zLnB1Ymxpc2hhYmxlQ2xpZW50S2V5LFxuICAgICAgdG9rZW5TdG9yZTogb3B0aW9ucy50b2tlblN0b3JlLFxuICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgb2F1dGhTY29wZXNPblNpZ25Jbjogb3B0aW9ucy5vYXV0aFNjb3Blc09uU2lnbkluLFxuICAgICAgcmVkaXJlY3RNZXRob2Q6IG9wdGlvbnMucmVkaXJlY3RNZXRob2RcbiAgICB9KTtcbiAgICAvLyBUT0RPIG92ZXJyaWRlIHRoZSBjbGllbnQgdXNlciBjYWNoZSB0byB1c2UgdGhlIHNlcnZlciB1c2VyIGNhY2hlLCBzbyB3ZSBzYXZlIHNvbWUgcmVxdWVzdHNcbiAgICB0aGlzLl9jdXJyZW50U2VydmVyVXNlckNhY2hlID0gY3JlYXRlQ2FjaGVCeVNlc3Npb24oYXN5bmMgKHNlc3Npb24pID0+IHtcbiAgICAgIGlmIChzZXNzaW9uLmlzS25vd25Ub0JlSW52YWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5nZXRTZXJ2ZXJVc2VyQnlUb2tlbihzZXNzaW9uKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXJ2ZXJVc2Vyc0NhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKFtjdXJzb3IsIGxpbWl0LCBvcmRlckJ5LCBkZXNjLCBxdWVyeV0pID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFNlcnZlclVzZXJzKHsgY3Vyc29yLCBsaW1pdCwgb3JkZXJCeSwgZGVzYywgcXVlcnkgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2VydmVyVXNlckNhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKFt1c2VySWRdKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmdldFNlcnZlclVzZXJCeUlkKHVzZXJJZCk7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9yKHVzZXIsIG51bGwpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NlcnZlclRlYW1zQ2FjaGUgPSBjcmVhdGVDYWNoZShhc3luYyAoW3VzZXJJZF0pID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFNlcnZlclRlYW1zKHsgdXNlcklkIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3NlcnZlclRlYW1Vc2VyUGVybWlzc2lvbnNDYWNoZSA9IGNyZWF0ZUNhY2hlKGFzeW5jIChbdGVhbUlkLCB1c2VySWQsIHJlY3Vyc2l2ZV0pID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFNlcnZlclRlYW1QZXJtaXNzaW9ucyh7IHRlYW1JZCwgdXNlcklkLCByZWN1cnNpdmUgfSwgbnVsbCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2VydmVyVXNlclByb2plY3RQZXJtaXNzaW9uc0NhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKFt1c2VySWQsIHJlY3Vyc2l2ZV0pID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFNlcnZlclByb2plY3RQZXJtaXNzaW9ucyh7IHVzZXJJZCwgcmVjdXJzaXZlIH0sIG51bGwpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NlcnZlclVzZXJPQXV0aENvbm5lY3Rpb25BY2Nlc3NUb2tlbnNDYWNoZSA9IGNyZWF0ZUNhY2hlKFxuICAgICAgYXN5bmMgKFt1c2VySWQsIHByb3ZpZGVySWQsIHNjb3BlXSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5jcmVhdGVTZXJ2ZXJQcm92aWRlckFjY2Vzc1Rva2VuKHVzZXJJZCwgcHJvdmlkZXJJZCwgc2NvcGUgfHwgXCJcIik7XG4gICAgICAgICAgcmV0dXJuIHsgYWNjZXNzVG9rZW46IHJlc3VsdC5hY2Nlc3NfdG9rZW4gfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgS25vd25FcnJvcnMuT0F1dGhDb25uZWN0aW9uRG9lc05vdEhhdmVSZXF1aXJlZFNjb3BlIHx8IGVyciBpbnN0YW5jZW9mIEtub3duRXJyb3JzLk9BdXRoQ29ubmVjdGlvbk5vdENvbm5lY3RlZFRvVXNlcikpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLl9zZXJ2ZXJVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGUgPSBjcmVhdGVDYWNoZShcbiAgICAgIGFzeW5jIChbdXNlcklkLCBwcm92aWRlcklkLCBzY29wZSwgcmVkaXJlY3RdKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9nZXRVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGVGbih7XG4gICAgICAgICAgZ2V0VXNlcjogYXN5bmMgKCkgPT4gUmVzdWx0Lm9yVGhyb3coYXdhaXQgdGhpcy5fc2VydmVyVXNlckNhY2hlLmdldE9yV2FpdChbdXNlcklkXSwgXCJ3cml0ZS1vbmx5XCIpKSxcbiAgICAgICAgICBnZXRPcldhaXRPQXV0aFRva2VuOiBhc3luYyAoKSA9PiBSZXN1bHQub3JUaHJvdyhhd2FpdCB0aGlzLl9zZXJ2ZXJVc2VyT0F1dGhDb25uZWN0aW9uQWNjZXNzVG9rZW5zQ2FjaGUuZ2V0T3JXYWl0KFt1c2VySWQsIHByb3ZpZGVySWQsIHNjb3BlIHx8IFwiXCJdLCBcIndyaXRlLW9ubHlcIikpLFxuICAgICAgICAgIHVzZU9BdXRoVG9rZW46ICgpID0+IHVzZUFzeW5jQ2FjaGUodGhpcy5fc2VydmVyVXNlck9BdXRoQ29ubmVjdGlvbkFjY2Vzc1Rva2Vuc0NhY2hlLCBbdXNlcklkLCBwcm92aWRlcklkLCBzY29wZSB8fCBcIlwiXSwgXCJ1c2VyLnVzZUNvbm5lY3RlZEFjY291bnQoKVwiKSxcbiAgICAgICAgICBwcm92aWRlcklkLFxuICAgICAgICAgIHNjb3BlLFxuICAgICAgICAgIHJlZGlyZWN0LFxuICAgICAgICAgIHNlc3Npb246IG51bGxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLl9zZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZXNDYWNoZSA9IGNyZWF0ZUNhY2hlKFxuICAgICAgYXN5bmMgKFt0ZWFtSWRdKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFNlcnZlclRlYW1NZW1iZXJQcm9maWxlcyh7IHRlYW1JZCB9KTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX3NlcnZlclRlYW1JbnZpdGF0aW9uc0NhY2hlID0gY3JlYXRlQ2FjaGUoXG4gICAgICBhc3luYyAoW3RlYW1JZF0pID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0U2VydmVyVGVhbUludml0YXRpb25zKHsgdGVhbUlkIH0pO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5fc2VydmVyVXNlclRlYW1Qcm9maWxlQ2FjaGUgPSBjcmVhdGVDYWNoZShcbiAgICAgIGFzeW5jIChbdGVhbUlkLCB1c2VySWRdKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuZ2V0U2VydmVyVGVhbU1lbWJlclByb2ZpbGUoeyB0ZWFtSWQsIHVzZXJJZCB9KTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX3NlcnZlckNvbnRhY3RDaGFubmVsc0NhY2hlID0gY3JlYXRlQ2FjaGUoXG4gICAgICBhc3luYyAoW3VzZXJJZF0pID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0U2VydmVyQ29udGFjdENoYW5uZWxzKHVzZXJJZCk7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLl9zZXJ2ZXJVc2VyQXBpS2V5c0NhY2hlID0gY3JlYXRlQ2FjaGUoXG4gICAgICBhc3luYyAoW3VzZXJJZF0pID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmxpc3RQcm9qZWN0QXBpS2V5cyh7XG4gICAgICAgICAgdXNlcl9pZDogdXNlcklkXG4gICAgICAgIH0sIG51bGwsIFwic2VydmVyXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5fc2VydmVyVGVhbUFwaUtleXNDYWNoZSA9IGNyZWF0ZUNhY2hlKFxuICAgICAgYXN5bmMgKFt0ZWFtSWRdKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0UHJvamVjdEFwaUtleXMoe1xuICAgICAgICAgIHRlYW1faWQ6IHRlYW1JZFxuICAgICAgICB9LCBudWxsLCBcInNlcnZlclwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX3NlcnZlckNoZWNrQXBpS2V5Q2FjaGUgPSBjcmVhdGVDYWNoZShhc3luYyAoW3R5cGUsIGFwaUtleV0pID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5jaGVja1Byb2plY3RBcGlLZXkoXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGFwaUtleSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgXCJzZXJ2ZXJcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgX3VwZGF0ZVNlcnZlclVzZXIodXNlcklkLCB1cGRhdGUpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UudXBkYXRlU2VydmVyVXNlcih1c2VySWQsIHNlcnZlclVzZXJVcGRhdGVPcHRpb25zVG9DcnVkKHVwZGF0ZSkpO1xuICAgIGF3YWl0IHRoaXMuX3JlZnJlc2hVc2VycygpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgX3NlcnZlckVkaXRhYmxlVGVhbVByb2ZpbGVGcm9tQ3J1ZChjcnVkKSB7XG4gICAgY29uc3QgYXBwID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcGxheU5hbWU6IGNydWQuZGlzcGxheV9uYW1lLFxuICAgICAgcHJvZmlsZUltYWdlVXJsOiBjcnVkLnByb2ZpbGVfaW1hZ2VfdXJsLFxuICAgICAgYXN5bmMgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBhd2FpdCBhcHAuX2ludGVyZmFjZS51cGRhdGVTZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZSh7XG4gICAgICAgICAgdGVhbUlkOiBjcnVkLnRlYW1faWQsXG4gICAgICAgICAgdXNlcklkOiBjcnVkLnVzZXJfaWQsXG4gICAgICAgICAgcHJvZmlsZToge1xuICAgICAgICAgICAgZGlzcGxheV9uYW1lOiB1cGRhdGUuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBwcm9maWxlX2ltYWdlX3VybDogdXBkYXRlLnByb2ZpbGVJbWFnZVVybFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGFwcC5fc2VydmVyVXNlclRlYW1Qcm9maWxlQ2FjaGUucmVmcmVzaChbY3J1ZC50ZWFtX2lkLCBjcnVkLnVzZXJfaWRdKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9zZXJ2ZXJDb250YWN0Q2hhbm5lbEZyb21DcnVkKHVzZXJJZCwgY3J1ZCkge1xuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBjcnVkLmlkLFxuICAgICAgdmFsdWU6IGNydWQudmFsdWUsXG4gICAgICB0eXBlOiBjcnVkLnR5cGUsXG4gICAgICBpc1ZlcmlmaWVkOiBjcnVkLmlzX3ZlcmlmaWVkLFxuICAgICAgaXNQcmltYXJ5OiBjcnVkLmlzX3ByaW1hcnksXG4gICAgICB1c2VkRm9yQXV0aDogY3J1ZC51c2VkX2Zvcl9hdXRoLFxuICAgICAgYXN5bmMgc2VuZFZlcmlmaWNhdGlvbkVtYWlsKG9wdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2Uuc2VuZFNlcnZlckNvbnRhY3RDaGFubmVsVmVyaWZpY2F0aW9uRW1haWwodXNlcklkLCBjcnVkLmlkLCBvcHRpb25zPy5jYWxsYmFja1VybCA/PyBjb25zdHJ1Y3RSZWRpcmVjdFVybChhcHAudXJscy5lbWFpbFZlcmlmaWNhdGlvbiwgXCJjYWxsYmFja1VybFwiKSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdXBkYXRlKGRhdGEpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UudXBkYXRlU2VydmVyQ29udGFjdENoYW5uZWwodXNlcklkLCBjcnVkLmlkLCBzZXJ2ZXJDb250YWN0Q2hhbm5lbFVwZGF0ZU9wdGlvbnNUb0NydWQoZGF0YSkpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgYXBwLl9zZXJ2ZXJDb250YWN0Q2hhbm5lbHNDYWNoZS5yZWZyZXNoKFt1c2VySWRdKSxcbiAgICAgICAgICBhcHAuX3NlcnZlclVzZXJDYWNoZS5yZWZyZXNoKFt1c2VySWRdKVxuICAgICAgICBdKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBkZWxldGUoKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLmRlbGV0ZVNlcnZlckNvbnRhY3RDaGFubmVsKHVzZXJJZCwgY3J1ZC5pZCk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBhcHAuX3NlcnZlckNvbnRhY3RDaGFubmVsc0NhY2hlLnJlZnJlc2goW3VzZXJJZF0pLFxuICAgICAgICAgIGFwcC5fc2VydmVyVXNlckNhY2hlLnJlZnJlc2goW3VzZXJJZF0pXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgX3NlcnZlckFwaUtleUZyb21DcnVkKGNydWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4udGhpcy5fYmFzZUFwaUtleUZyb21DcnVkKGNydWQpLFxuICAgICAgYXN5bmMgcmV2b2tlKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IHJldm9rZWQ6IHRydWUgfSk7XG4gICAgICB9LFxuICAgICAgdXBkYXRlOiBhc3luYyAob3B0aW9ucykgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLl9pbnRlcmZhY2UudXBkYXRlUHJvamVjdEFwaUtleShcbiAgICAgICAgICBjcnVkLnR5cGUgPT09IFwidGVhbVwiID8geyB0ZWFtX2lkOiBjcnVkLnRlYW1faWQgfSA6IHsgdXNlcl9pZDogY3J1ZC51c2VyX2lkIH0sXG4gICAgICAgICAgY3J1ZC5pZCxcbiAgICAgICAgICBhd2FpdCBhcGlLZXlVcGRhdGVPcHRpb25zVG9DcnVkKGNydWQudHlwZSwgb3B0aW9ucyksXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcInNlcnZlclwiXG4gICAgICAgICk7XG4gICAgICAgIGlmIChjcnVkLnR5cGUgPT09IFwidGVhbVwiKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5fc2VydmVyVGVhbUFwaUtleXNDYWNoZS5yZWZyZXNoKFtjcnVkLnRlYW1faWRdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLl9zZXJ2ZXJVc2VyQXBpS2V5c0NhY2hlLnJlZnJlc2goW2NydWQudXNlcl9pZF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfc2VydmVyVXNlckZyb21DcnVkKGNydWQpIHtcbiAgICBjb25zdCBhcHAgPSB0aGlzO1xuICAgIGFzeW5jIGZ1bmN0aW9uIGdldENvbm5lY3RlZEFjY291bnQoaWQsIG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IHNjb3BlU3RyaW5nID0gb3B0aW9ucz8uc2NvcGVzPy5qb2luKFwiIFwiKTtcbiAgICAgIHJldHVybiBSZXN1bHQub3JUaHJvdyhhd2FpdCBhcHAuX3NlcnZlclVzZXJPQXV0aENvbm5lY3Rpb25DYWNoZS5nZXRPcldhaXQoW2NydWQuaWQsIGlkLCBzY29wZVN0cmluZyB8fCBcIlwiLCBvcHRpb25zPy5vciA9PT0gXCJyZWRpcmVjdFwiXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXNlQ29ubmVjdGVkQWNjb3VudChpZCwgb3B0aW9ucykge1xuICAgICAgY29uc3Qgc2NvcGVTdHJpbmcgPSBvcHRpb25zPy5zY29wZXM/LmpvaW4oXCIgXCIpO1xuICAgICAgcmV0dXJuIHVzZUFzeW5jQ2FjaGUoYXBwLl9zZXJ2ZXJVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGUsIFtjcnVkLmlkLCBpZCwgc2NvcGVTdHJpbmcgfHwgXCJcIiwgb3B0aW9ucz8ub3IgPT09IFwicmVkaXJlY3RcIl0sIFwidXNlci51c2VDb25uZWN0ZWRBY2NvdW50KClcIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAuLi5zdXBlci5fY3JlYXRlQmFzZVVzZXIoY3J1ZCksXG4gICAgICBsYXN0QWN0aXZlQXQ6IG5ldyBEYXRlKGNydWQubGFzdF9hY3RpdmVfYXRfbWlsbGlzKSxcbiAgICAgIHNlcnZlck1ldGFkYXRhOiBjcnVkLnNlcnZlcl9tZXRhZGF0YSxcbiAgICAgIGFzeW5jIHNldFByaW1hcnlFbWFpbChlbWFpbCwgb3B0aW9ucykge1xuICAgICAgICBhd2FpdCBhcHAuX3VwZGF0ZVNlcnZlclVzZXIoY3J1ZC5pZCwgeyBwcmltYXJ5RW1haWw6IGVtYWlsLCBwcmltYXJ5RW1haWxWZXJpZmllZDogb3B0aW9ucz8udmVyaWZpZWQgfSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ3JhbnRQZXJtaXNzaW9uKHNjb3BlLCBwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UuZ3JhbnRTZXJ2ZXJUZWFtVXNlclBlcm1pc3Npb24oc2NvcGUuaWQsIGNydWQuaWQsIHBlcm1pc3Npb25JZCk7XG4gICAgICAgIGZvciAoY29uc3QgcmVjdXJzaXZlIG9mIFt0cnVlLCBmYWxzZV0pIHtcbiAgICAgICAgICBhd2FpdCBhcHAuX3NlcnZlclRlYW1Vc2VyUGVybWlzc2lvbnNDYWNoZS5yZWZyZXNoKFtzY29wZS5pZCwgY3J1ZC5pZCwgcmVjdXJzaXZlXSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyByZXZva2VQZXJtaXNzaW9uKHNjb3BlLCBwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UucmV2b2tlU2VydmVyVGVhbVVzZXJQZXJtaXNzaW9uKHNjb3BlLmlkLCBjcnVkLmlkLCBwZXJtaXNzaW9uSWQpO1xuICAgICAgICBmb3IgKGNvbnN0IHJlY3Vyc2l2ZSBvZiBbdHJ1ZSwgZmFsc2VdKSB7XG4gICAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJUZWFtVXNlclBlcm1pc3Npb25zQ2FjaGUucmVmcmVzaChbc2NvcGUuaWQsIGNydWQuaWQsIHJlY3Vyc2l2ZV0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgZGVsZXRlKCkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5kZWxldGVTZXJ2ZXJVc2VyKGNydWQuaWQpO1xuICAgICAgICBhd2FpdCBhcHAuX3JlZnJlc2hVc2VycygpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGNyZWF0ZVNlc3Npb24ob3B0aW9ucykge1xuICAgICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5jcmVhdGVTZXJ2ZXJVc2VyU2Vzc2lvbihjcnVkLmlkLCBvcHRpb25zLmV4cGlyZXNJbk1pbGxpcyA/PyAxZTMgKiA2MCAqIDYwICogMjQgKiAzNjUsIG9wdGlvbnMuaXNJbXBlcnNvbmF0aW9uID8/IGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBhc3luYyBnZXRUb2tlbnMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW5zO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRBY3RpdmVTZXNzaW9ucygpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5saXN0U2VydmVyU2Vzc2lvbnMoY3J1ZC5pZCk7XG4gICAgICAgIHJldHVybiBzZXNzaW9ucy5tYXAoKHNlc3Npb24pID0+IGFwcC5fY2xpZW50U2Vzc2lvbkZyb21DcnVkKHNlc3Npb24pKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyByZXZva2VTZXNzaW9uKHNlc3Npb25JZCkge1xuICAgICAgICBhd2FpdCBhcHAuX2ludGVyZmFjZS5kZWxldGVTZXJ2ZXJTZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgc2V0RGlzcGxheU5hbWUoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgZGlzcGxheU5hbWUgfSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgc2V0Q2xpZW50TWV0YWRhdGEobWV0YWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgY2xpZW50TWV0YWRhdGE6IG1ldGFkYXRhIH0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHNldENsaWVudFJlYWRPbmx5TWV0YWRhdGEobWV0YWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgY2xpZW50UmVhZE9ubHlNZXRhZGF0YTogbWV0YWRhdGEgfSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgc2V0U2VydmVyTWV0YWRhdGEobWV0YWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgc2VydmVyTWV0YWRhdGE6IG1ldGFkYXRhIH0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHNldFNlbGVjdGVkVGVhbSh0ZWFtKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7IHNlbGVjdGVkVGVhbUlkOiB0ZWFtPy5pZCA/PyBudWxsIH0pO1xuICAgICAgfSxcbiAgICAgIGdldENvbm5lY3RlZEFjY291bnQsXG4gICAgICB1c2VDb25uZWN0ZWRBY2NvdW50LFxuICAgICAgLy8gVEhJU19MSU5FX1BMQVRGT1JNIHJlYWN0LWxpa2VcbiAgICAgIHNlbGVjdGVkVGVhbTogY3J1ZC5zZWxlY3RlZF90ZWFtID8gYXBwLl9zZXJ2ZXJUZWFtRnJvbUNydWQoY3J1ZC5zZWxlY3RlZF90ZWFtKSA6IG51bGwsXG4gICAgICBhc3luYyBnZXRUZWFtKHRlYW1JZCkge1xuICAgICAgICBjb25zdCB0ZWFtcyA9IGF3YWl0IHRoaXMubGlzdFRlYW1zKCk7XG4gICAgICAgIHJldHVybiB0ZWFtcy5maW5kKCh0KSA9PiB0LmlkID09PSB0ZWFtSWQpID8/IG51bGw7XG4gICAgICB9LFxuICAgICAgdXNlVGVhbSh0ZWFtSWQpIHtcbiAgICAgICAgY29uc3QgdGVhbXMgPSB0aGlzLnVzZVRlYW1zKCk7XG4gICAgICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGVhbXMuZmluZCgodCkgPT4gdC5pZCA9PT0gdGVhbUlkKSA/PyBudWxsO1xuICAgICAgICB9LCBbdGVhbXMsIHRlYW1JZF0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGxpc3RUZWFtcygpIHtcbiAgICAgICAgY29uc3QgdGVhbXMgPSBSZXN1bHQub3JUaHJvdyhhd2FpdCBhcHAuX3NlcnZlclRlYW1zQ2FjaGUuZ2V0T3JXYWl0KFtjcnVkLmlkXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICAgICAgcmV0dXJuIHRlYW1zLm1hcCgodCkgPT4gYXBwLl9zZXJ2ZXJUZWFtRnJvbUNydWQodCkpO1xuICAgICAgfSxcbiAgICAgIHVzZVRlYW1zKCkge1xuICAgICAgICBjb25zdCB0ZWFtcyA9IHVzZUFzeW5jQ2FjaGUoYXBwLl9zZXJ2ZXJUZWFtc0NhY2hlLCBbY3J1ZC5pZF0sIFwidXNlci51c2VUZWFtcygpXCIpO1xuICAgICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiB0ZWFtcy5tYXAoKHQpID0+IGFwcC5fc2VydmVyVGVhbUZyb21DcnVkKHQpKSwgW3RlYW1zXSk7XG4gICAgICB9LFxuICAgICAgY3JlYXRlVGVhbTogYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgICAgY29uc3QgdGVhbSA9IGF3YWl0IGFwcC5faW50ZXJmYWNlLmNyZWF0ZVNlcnZlclRlYW0oc2VydmVyVGVhbUNyZWF0ZU9wdGlvbnNUb0NydWQoe1xuICAgICAgICAgIGNyZWF0b3JVc2VySWQ6IGNydWQuaWQsXG4gICAgICAgICAgLi4uZGF0YVxuICAgICAgICB9KSk7XG4gICAgICAgIGF3YWl0IGFwcC5fc2VydmVyVGVhbXNDYWNoZS5yZWZyZXNoKFt2b2lkIDBdKTtcbiAgICAgICAgYXdhaXQgYXBwLl91cGRhdGVTZXJ2ZXJVc2VyKGNydWQuaWQsIHsgc2VsZWN0ZWRUZWFtSWQ6IHRlYW0uaWQgfSk7XG4gICAgICAgIHJldHVybiBhcHAuX3NlcnZlclRlYW1Gcm9tQ3J1ZCh0ZWFtKTtcbiAgICAgIH0sXG4gICAgICBsZWF2ZVRlYW06IGFzeW5jICh0ZWFtKSA9PiB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLmxlYXZlU2VydmVyVGVhbSh7IHRlYW1JZDogdGVhbS5pZCwgdXNlcklkOiBjcnVkLmlkIH0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGxpc3RQZXJtaXNzaW9ucyhzY29wZU9yT3B0aW9ucywgb3B0aW9ucykge1xuICAgICAgICBpZiAoc2NvcGVPck9wdGlvbnMgJiYgXCJpZFwiIGluIHNjb3BlT3JPcHRpb25zKSB7XG4gICAgICAgICAgY29uc3Qgc2NvcGUgPSBzY29wZU9yT3B0aW9ucztcbiAgICAgICAgICBjb25zdCByZWN1cnNpdmUgPSBvcHRpb25zPy5yZWN1cnNpdmUgPz8gdHJ1ZTtcbiAgICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IFJlc3VsdC5vclRocm93KGF3YWl0IGFwcC5fc2VydmVyVGVhbVVzZXJQZXJtaXNzaW9uc0NhY2hlLmdldE9yV2FpdChbc2NvcGUuaWQsIGNydWQuaWQsIHJlY3Vyc2l2ZV0sIFwid3JpdGUtb25seVwiKSk7XG4gICAgICAgICAgcmV0dXJuIHBlcm1pc3Npb25zLm1hcCgoY3J1ZDIpID0+IGFwcC5fc2VydmVyUGVybWlzc2lvbkZyb21DcnVkKGNydWQyKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3B0cyA9IHNjb3BlT3JPcHRpb25zO1xuICAgICAgICAgIGNvbnN0IHJlY3Vyc2l2ZSA9IG9wdHM/LnJlY3Vyc2l2ZSA/PyB0cnVlO1xuICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgYXBwLl9zZXJ2ZXJVc2VyUHJvamVjdFBlcm1pc3Npb25zQ2FjaGUuZ2V0T3JXYWl0KFtjcnVkLmlkLCByZWN1cnNpdmVdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgICAgICAgIHJldHVybiBwZXJtaXNzaW9ucy5tYXAoKGNydWQyKSA9PiBhcHAuX3NlcnZlclBlcm1pc3Npb25Gcm9tQ3J1ZChjcnVkMikpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXNlUGVybWlzc2lvbnMoc2NvcGVPck9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHNjb3BlT3JPcHRpb25zICYmIFwiaWRcIiBpbiBzY29wZU9yT3B0aW9ucykge1xuICAgICAgICAgIGNvbnN0IHNjb3BlID0gc2NvcGVPck9wdGlvbnM7XG4gICAgICAgICAgY29uc3QgcmVjdXJzaXZlID0gb3B0aW9ucz8ucmVjdXJzaXZlID8/IHRydWU7XG4gICAgICAgICAgY29uc3QgcGVybWlzc2lvbnMgPSB1c2VBc3luY0NhY2hlKGFwcC5fc2VydmVyVGVhbVVzZXJQZXJtaXNzaW9uc0NhY2hlLCBbc2NvcGUuaWQsIGNydWQuaWQsIHJlY3Vyc2l2ZV0sIFwidXNlci51c2VQZXJtaXNzaW9ucygpXCIpO1xuICAgICAgICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHBlcm1pc3Npb25zLm1hcCgoY3J1ZDIpID0+IGFwcC5fc2VydmVyUGVybWlzc2lvbkZyb21DcnVkKGNydWQyKSksIFtwZXJtaXNzaW9uc10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9wdHMgPSBzY29wZU9yT3B0aW9ucztcbiAgICAgICAgICBjb25zdCByZWN1cnNpdmUgPSBvcHRzPy5yZWN1cnNpdmUgPz8gdHJ1ZTtcbiAgICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IHVzZUFzeW5jQ2FjaGUoYXBwLl9zZXJ2ZXJVc2VyUHJvamVjdFBlcm1pc3Npb25zQ2FjaGUsIFtjcnVkLmlkLCByZWN1cnNpdmVdLCBcInVzZXIudXNlUGVybWlzc2lvbnMoKVwiKTtcbiAgICAgICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiBwZXJtaXNzaW9ucy5tYXAoKGNydWQyKSA9PiBhcHAuX3NlcnZlclBlcm1pc3Npb25Gcm9tQ3J1ZChjcnVkMikpLCBbcGVybWlzc2lvbnNdKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldFBlcm1pc3Npb24oc2NvcGVPclBlcm1pc3Npb25JZCwgcGVybWlzc2lvbklkKSB7XG4gICAgICAgIGlmIChzY29wZU9yUGVybWlzc2lvbklkICYmIHR5cGVvZiBzY29wZU9yUGVybWlzc2lvbklkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgY29uc3Qgc2NvcGUgPSBzY29wZU9yUGVybWlzc2lvbklkO1xuICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gYXdhaXQgdGhpcy5saXN0UGVybWlzc2lvbnMoc2NvcGUpO1xuICAgICAgICAgIHJldHVybiBwZXJtaXNzaW9ucy5maW5kKChwKSA9PiBwLmlkID09PSBwZXJtaXNzaW9uSWQpID8/IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgcGlkID0gc2NvcGVPclBlcm1pc3Npb25JZDtcbiAgICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IGF3YWl0IHRoaXMubGlzdFBlcm1pc3Npb25zKCk7XG4gICAgICAgICAgcmV0dXJuIHBlcm1pc3Npb25zLmZpbmQoKHApID0+IHAuaWQgPT09IHBpZCkgPz8gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVzZVBlcm1pc3Npb24oc2NvcGVPclBlcm1pc3Npb25JZCwgcGVybWlzc2lvbklkKSB7XG4gICAgICAgIGlmIChzY29wZU9yUGVybWlzc2lvbklkICYmIHR5cGVvZiBzY29wZU9yUGVybWlzc2lvbklkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgY29uc3Qgc2NvcGUgPSBzY29wZU9yUGVybWlzc2lvbklkO1xuICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gdGhpcy51c2VQZXJtaXNzaW9ucyhzY29wZSk7XG4gICAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gcGVybWlzc2lvbnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcGVybWlzc2lvbklkKSA/PyBudWxsLCBbcGVybWlzc2lvbnMsIHBlcm1pc3Npb25JZF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHBpZCA9IHNjb3BlT3JQZXJtaXNzaW9uSWQ7XG4gICAgICAgICAgY29uc3QgcGVybWlzc2lvbnMgPSB0aGlzLnVzZVBlcm1pc3Npb25zKCk7XG4gICAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gcGVybWlzc2lvbnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcGlkKSA/PyBudWxsLCBbcGVybWlzc2lvbnMsIHBpZF0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgaGFzUGVybWlzc2lvbihzY29wZU9yUGVybWlzc2lvbklkLCBwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgaWYgKHNjb3BlT3JQZXJtaXNzaW9uSWQgJiYgdHlwZW9mIHNjb3BlT3JQZXJtaXNzaW9uSWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBjb25zdCBzY29wZSA9IHNjb3BlT3JQZXJtaXNzaW9uSWQ7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0UGVybWlzc2lvbihzY29wZSwgcGVybWlzc2lvbklkKSAhPT0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBwaWQgPSBzY29wZU9yUGVybWlzc2lvbklkO1xuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFBlcm1pc3Npb24ocGlkKSAhPT0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgYXdhaXQgYXBwLl91cGRhdGVTZXJ2ZXJVc2VyKGNydWQuaWQsIHVwZGF0ZSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgc2VuZFZlcmlmaWNhdGlvbkVtYWlsKCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgYXBwLl9jaGVja0ZlYXR1cmVTdXBwb3J0KFwic2VuZFZlcmlmaWNhdGlvbkVtYWlsKCkgb24gU2VydmVyVXNlclwiLCB7fSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdXBkYXRlUGFzc3dvcmQob3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS51cGRhdGVQYXNzd29yZChvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJVc2VyQ2FjaGUucmVmcmVzaChbY3J1ZC5pZF0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHNldFBhc3N3b3JkKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy51cGRhdGUob3B0aW9ucyk7XG4gICAgICAgIGF3YWl0IGFwcC5fc2VydmVyVXNlckNhY2hlLnJlZnJlc2goW2NydWQuaWRdKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRUZWFtUHJvZmlsZSh0ZWFtKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlc3VsdC5vclRocm93KGF3YWl0IGFwcC5fc2VydmVyVXNlclRlYW1Qcm9maWxlQ2FjaGUuZ2V0T3JXYWl0KFt0ZWFtLmlkLCBjcnVkLmlkXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICAgICAgcmV0dXJuIGFwcC5fc2VydmVyRWRpdGFibGVUZWFtUHJvZmlsZUZyb21DcnVkKHJlc3VsdCk7XG4gICAgICB9LFxuICAgICAgdXNlVGVhbVByb2ZpbGUodGVhbSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB1c2VBc3luY0NhY2hlKGFwcC5fc2VydmVyVXNlclRlYW1Qcm9maWxlQ2FjaGUsIFt0ZWFtLmlkLCBjcnVkLmlkXSwgXCJ1c2VyLnVzZVRlYW1Qcm9maWxlKClcIik7XG4gICAgICAgIHJldHVybiB1c2VNZW1vKCgpID0+IGFwcC5fc2VydmVyRWRpdGFibGVUZWFtUHJvZmlsZUZyb21DcnVkKHJlc3VsdCksIFtyZXN1bHRdKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBsaXN0Q29udGFjdENoYW5uZWxzKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBSZXN1bHQub3JUaHJvdyhhd2FpdCBhcHAuX3NlcnZlckNvbnRhY3RDaGFubmVsc0NhY2hlLmdldE9yV2FpdChbY3J1ZC5pZF0sIFwid3JpdGUtb25seVwiKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQubWFwKChkYXRhKSA9PiBhcHAuX3NlcnZlckNvbnRhY3RDaGFubmVsRnJvbUNydWQoY3J1ZC5pZCwgZGF0YSkpO1xuICAgICAgfSxcbiAgICAgIHVzZUNvbnRhY3RDaGFubmVscygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdXNlQXN5bmNDYWNoZShhcHAuX3NlcnZlckNvbnRhY3RDaGFubmVsc0NhY2hlLCBbY3J1ZC5pZF0sIFwidXNlci51c2VDb250YWN0Q2hhbm5lbHMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gcmVzdWx0Lm1hcCgoZGF0YSkgPT4gYXBwLl9zZXJ2ZXJDb250YWN0Q2hhbm5lbEZyb21DcnVkKGNydWQuaWQsIGRhdGEpKSwgW3Jlc3VsdF0pO1xuICAgICAgfSxcbiAgICAgIGNyZWF0ZUNvbnRhY3RDaGFubmVsOiBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBjb250YWN0Q2hhbm5lbCA9IGF3YWl0IGFwcC5faW50ZXJmYWNlLmNyZWF0ZVNlcnZlckNvbnRhY3RDaGFubmVsKHNlcnZlckNvbnRhY3RDaGFubmVsQ3JlYXRlT3B0aW9uc1RvQ3J1ZChjcnVkLmlkLCBkYXRhKSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBhcHAuX3NlcnZlckNvbnRhY3RDaGFubmVsc0NhY2hlLnJlZnJlc2goW2NydWQuaWRdKSxcbiAgICAgICAgICBhcHAuX3NlcnZlclVzZXJDYWNoZS5yZWZyZXNoKFtjcnVkLmlkXSlcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBhcHAuX3NlcnZlckNvbnRhY3RDaGFubmVsRnJvbUNydWQoY3J1ZC5pZCwgY29udGFjdENoYW5uZWwpO1xuICAgICAgfSxcbiAgICAgIHVzZUFwaUtleXMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHVzZUFzeW5jQ2FjaGUoYXBwLl9zZXJ2ZXJVc2VyQXBpS2V5c0NhY2hlLCBbY3J1ZC5pZF0sIFwidXNlci51c2VBcGlLZXlzKClcIik7XG4gICAgICAgIHJldHVybiByZXN1bHQubWFwKChhcGlLZXkpID0+IGFwcC5fc2VydmVyQXBpS2V5RnJvbUNydWQoYXBpS2V5KSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGlzdEFwaUtleXMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlc3VsdC5vclRocm93KGF3YWl0IGFwcC5fc2VydmVyVXNlckFwaUtleXNDYWNoZS5nZXRPcldhaXQoW2NydWQuaWRdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lm1hcCgoYXBpS2V5KSA9PiBhcHAuX3NlcnZlckFwaUtleUZyb21DcnVkKGFwaUtleSkpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGNyZWF0ZUFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwcC5faW50ZXJmYWNlLmNyZWF0ZVByb2plY3RBcGlLZXkoXG4gICAgICAgICAgYXdhaXQgYXBpS2V5Q3JlYXRpb25PcHRpb25zVG9DcnVkKFwidXNlclwiLCBjcnVkLmlkLCBvcHRpb25zKSxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwic2VydmVyXCJcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJVc2VyQXBpS2V5c0NhY2hlLnJlZnJlc2goW2NydWQuaWRdKTtcbiAgICAgICAgcmV0dXJuIGFwcC5fc2VydmVyQXBpS2V5RnJvbUNydWQocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9zZXJ2ZXJUZWFtVXNlckZyb21DcnVkKGNydWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4udGhpcy5fc2VydmVyVXNlckZyb21DcnVkKGNydWQudXNlciksXG4gICAgICB0ZWFtUHJvZmlsZToge1xuICAgICAgICBkaXNwbGF5TmFtZTogY3J1ZC5kaXNwbGF5X25hbWUsXG4gICAgICAgIHByb2ZpbGVJbWFnZVVybDogY3J1ZC5wcm9maWxlX2ltYWdlX3VybFxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgX3NlcnZlclRlYW1JbnZpdGF0aW9uRnJvbUNydWQoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZCxcbiAgICAgIHJlY2lwaWVudEVtYWlsOiBjcnVkLnJlY2lwaWVudF9lbWFpbCxcbiAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoY3J1ZC5leHBpcmVzX2F0X21pbGxpcyksXG4gICAgICByZXZva2U6IGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5faW50ZXJmYWNlLnJldm9rZVNlcnZlclRlYW1JbnZpdGF0aW9uKGNydWQuaWQsIGNydWQudGVhbV9pZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfY3VycmVudFVzZXJGcm9tQ3J1ZChjcnVkLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgYXBwID0gdGhpcztcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHtcbiAgICAgIC4uLnRoaXMuX3NlcnZlclVzZXJGcm9tQ3J1ZChjcnVkKSxcbiAgICAgIC4uLnRoaXMuX2NyZWF0ZUF1dGgoc2Vzc2lvbiksXG4gICAgICAuLi50aGlzLl9pc0ludGVybmFsUHJvamVjdCgpID8gdGhpcy5fY3JlYXRlSW50ZXJuYWxVc2VyRXh0cmEoc2Vzc2lvbikgOiB7fVxuICAgIH07XG4gICAgT2JqZWN0LmZyZWV6ZShjdXJyZW50VXNlcik7XG4gICAgcmV0dXJuIGN1cnJlbnRVc2VyO1xuICB9XG4gIF9zZXJ2ZXJUZWFtRnJvbUNydWQoY3J1ZCkge1xuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBjcnVkLmlkLFxuICAgICAgZGlzcGxheU5hbWU6IGNydWQuZGlzcGxheV9uYW1lLFxuICAgICAgcHJvZmlsZUltYWdlVXJsOiBjcnVkLnByb2ZpbGVfaW1hZ2VfdXJsLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShjcnVkLmNyZWF0ZWRfYXRfbWlsbGlzKSxcbiAgICAgIGNsaWVudE1ldGFkYXRhOiBjcnVkLmNsaWVudF9tZXRhZGF0YSxcbiAgICAgIGNsaWVudFJlYWRPbmx5TWV0YWRhdGE6IGNydWQuY2xpZW50X3JlYWRfb25seV9tZXRhZGF0YSxcbiAgICAgIHNlcnZlck1ldGFkYXRhOiBjcnVkLnNlcnZlcl9tZXRhZGF0YSxcbiAgICAgIGFzeW5jIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UudXBkYXRlU2VydmVyVGVhbShjcnVkLmlkLCBzZXJ2ZXJUZWFtVXBkYXRlT3B0aW9uc1RvQ3J1ZCh1cGRhdGUpKTtcbiAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJUZWFtc0NhY2hlLnJlZnJlc2goW3ZvaWQgMF0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGRlbGV0ZSgpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UuZGVsZXRlU2VydmVyVGVhbShjcnVkLmlkKTtcbiAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJUZWFtc0NhY2hlLnJlZnJlc2goW3ZvaWQgMF0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGxpc3RVc2VycygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgYXBwLl9zZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZXNDYWNoZS5nZXRPcldhaXQoW2NydWQuaWRdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lm1hcCgodSkgPT4gYXBwLl9zZXJ2ZXJUZWFtVXNlckZyb21DcnVkKHUpKTtcbiAgICAgIH0sXG4gICAgICB1c2VVc2VycygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdXNlQXN5bmNDYWNoZShhcHAuX3NlcnZlclRlYW1NZW1iZXJQcm9maWxlc0NhY2hlLCBbY3J1ZC5pZF0sIFwidGVhbS51c2VVc2VycygpXCIpO1xuICAgICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiByZXN1bHQubWFwKCh1KSA9PiBhcHAuX3NlcnZlclRlYW1Vc2VyRnJvbUNydWQodSkpLCBbcmVzdWx0XSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgYWRkVXNlcih1c2VySWQpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UuYWRkU2VydmVyVXNlclRvVGVhbSh7XG4gICAgICAgICAgdGVhbUlkOiBjcnVkLmlkLFxuICAgICAgICAgIHVzZXJJZFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZXNDYWNoZS5yZWZyZXNoKFtjcnVkLmlkXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgcmVtb3ZlVXNlcih1c2VySWQpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UucmVtb3ZlU2VydmVyVXNlckZyb21UZWFtKHtcbiAgICAgICAgICB0ZWFtSWQ6IGNydWQuaWQsXG4gICAgICAgICAgdXNlcklkXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBhcHAuX3NlcnZlclRlYW1NZW1iZXJQcm9maWxlc0NhY2hlLnJlZnJlc2goW2NydWQuaWRdKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBpbnZpdGVVc2VyKG9wdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2Uuc2VuZFNlcnZlclRlYW1JbnZpdGF0aW9uKHtcbiAgICAgICAgICB0ZWFtSWQ6IGNydWQuaWQsXG4gICAgICAgICAgZW1haWw6IG9wdGlvbnMuZW1haWwsXG4gICAgICAgICAgY2FsbGJhY2tVcmw6IG9wdGlvbnMuY2FsbGJhY2tVcmwgPz8gY29uc3RydWN0UmVkaXJlY3RVcmwoYXBwLnVybHMudGVhbUludml0YXRpb24sIFwiY2FsbGJhY2tVcmxcIilcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGFwcC5fc2VydmVyVGVhbUludml0YXRpb25zQ2FjaGUucmVmcmVzaChbY3J1ZC5pZF0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGxpc3RJbnZpdGF0aW9ucygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgYXBwLl9zZXJ2ZXJUZWFtSW52aXRhdGlvbnNDYWNoZS5nZXRPcldhaXQoW2NydWQuaWRdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lm1hcCgoY3J1ZDIpID0+IGFwcC5fc2VydmVyVGVhbUludml0YXRpb25Gcm9tQ3J1ZChjcnVkMikpO1xuICAgICAgfSxcbiAgICAgIHVzZUludml0YXRpb25zKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB1c2VBc3luY0NhY2hlKGFwcC5fc2VydmVyVGVhbUludml0YXRpb25zQ2FjaGUsIFtjcnVkLmlkXSwgXCJ0ZWFtLnVzZUludml0YXRpb25zKClcIik7XG4gICAgICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHJlc3VsdC5tYXAoKGNydWQyKSA9PiBhcHAuX3NlcnZlclRlYW1JbnZpdGF0aW9uRnJvbUNydWQoY3J1ZDIpKSwgW3Jlc3VsdF0pO1xuICAgICAgfSxcbiAgICAgIHVzZUFwaUtleXMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHVzZUFzeW5jQ2FjaGUoYXBwLl9zZXJ2ZXJUZWFtQXBpS2V5c0NhY2hlLCBbY3J1ZC5pZF0sIFwidGVhbS51c2VBcGlLZXlzKClcIik7XG4gICAgICAgIHJldHVybiByZXN1bHQubWFwKChhcGlLZXkpID0+IGFwcC5fc2VydmVyQXBpS2V5RnJvbUNydWQoYXBpS2V5KSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGlzdEFwaUtleXMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlc3VsdC5vclRocm93KGF3YWl0IGFwcC5fc2VydmVyVGVhbUFwaUtleXNDYWNoZS5nZXRPcldhaXQoW2NydWQuaWRdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lm1hcCgoYXBpS2V5KSA9PiBhcHAuX3NlcnZlckFwaUtleUZyb21DcnVkKGFwaUtleSkpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGNyZWF0ZUFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwcC5faW50ZXJmYWNlLmNyZWF0ZVByb2plY3RBcGlLZXkoXG4gICAgICAgICAgYXdhaXQgYXBpS2V5Q3JlYXRpb25PcHRpb25zVG9DcnVkKFwidGVhbVwiLCBjcnVkLmlkLCBvcHRpb25zKSxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwic2VydmVyXCJcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJUZWFtQXBpS2V5c0NhY2hlLnJlZnJlc2goW2NydWQuaWRdKTtcbiAgICAgICAgcmV0dXJuIGFwcC5fc2VydmVyQXBpS2V5RnJvbUNydWQocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGFzeW5jIF9nZXRVc2VyQXBpS2V5KG9wdGlvbnMpIHtcbiAgICBjb25zdCBjcnVkID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgdGhpcy5fc2VydmVyQ2hlY2tBcGlLZXlDYWNoZS5nZXRPcldhaXQoW1widXNlclwiLCBvcHRpb25zLmFwaUtleV0sIFwid3JpdGUtb25seVwiKSk7XG4gICAgcmV0dXJuIGNydWQgPyB0aGlzLl9zZXJ2ZXJBcGlLZXlGcm9tQ3J1ZChjcnVkKSA6IG51bGw7XG4gIH1cbiAgYXN5bmMgX2dldFRlYW1BcGlLZXkob3B0aW9ucykge1xuICAgIGNvbnN0IGNydWQgPSBSZXN1bHQub3JUaHJvdyhhd2FpdCB0aGlzLl9zZXJ2ZXJDaGVja0FwaUtleUNhY2hlLmdldE9yV2FpdChbXCJ0ZWFtXCIsIG9wdGlvbnMuYXBpS2V5XSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICByZXR1cm4gY3J1ZCA/IHRoaXMuX3NlcnZlckFwaUtleUZyb21DcnVkKGNydWQpIDogbnVsbDtcbiAgfVxuICBfdXNlVXNlckFwaUtleShvcHRpb25zKSB7XG4gICAgY29uc3QgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fc2VydmVyQ2hlY2tBcGlLZXlDYWNoZSwgW1widXNlclwiLCBvcHRpb25zLmFwaUtleV0sIFwidXNlVXNlckFwaUtleSgpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IGNydWQgPyB0aGlzLl9zZXJ2ZXJBcGlLZXlGcm9tQ3J1ZChjcnVkKSA6IG51bGwsIFtjcnVkXSk7XG4gIH1cbiAgX3VzZVRlYW1BcGlLZXkob3B0aW9ucykge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX3NlcnZlckNoZWNrQXBpS2V5Q2FjaGUsIFtcInRlYW1cIiwgb3B0aW9ucy5hcGlLZXldLCBcInVzZVRlYW1BcGlLZXkoKVwiKTtcbiAgICByZXR1cm4gdXNlTWVtbygoKSA9PiBjcnVkID8gdGhpcy5fc2VydmVyQXBpS2V5RnJvbUNydWQoY3J1ZCkgOiBudWxsLCBbY3J1ZF0pO1xuICB9XG4gIGFzeW5jIF9nZXRVc2VyQnlBcGlLZXkoYXBpS2V5KSB7XG4gICAgY29uc3QgYXBpS2V5T2JqZWN0ID0gYXdhaXQgdGhpcy5fZ2V0VXNlckFwaUtleSh7IGFwaUtleSB9KTtcbiAgICBpZiAoYXBpS2V5T2JqZWN0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0U2VydmVyVXNlckJ5SWQoYXBpS2V5T2JqZWN0LnVzZXJJZCk7XG4gIH1cbiAgX3VzZVVzZXJCeUFwaUtleShhcGlLZXkpIHtcbiAgICBjb25zdCBhcGlLZXlPYmplY3QgPSB0aGlzLl91c2VVc2VyQXBpS2V5KHsgYXBpS2V5IH0pO1xuICAgIGlmIChhcGlLZXlPYmplY3QgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy51c2VVc2VyQnlJZChhcGlLZXlPYmplY3QudXNlcklkKTtcbiAgfVxuICBhc3luYyBfZ2V0VGVhbUJ5QXBpS2V5KGFwaUtleSkge1xuICAgIGNvbnN0IGFwaUtleU9iamVjdCA9IGF3YWl0IHRoaXMuX2dldFRlYW1BcGlLZXkoeyBhcGlLZXkgfSk7XG4gICAgaWYgKGFwaUtleU9iamVjdCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFRlYW0oYXBpS2V5T2JqZWN0LnRlYW1JZCk7XG4gIH1cbiAgX3VzZVRlYW1CeUFwaUtleShhcGlLZXkpIHtcbiAgICBjb25zdCBhcGlLZXlPYmplY3QgPSB0aGlzLl91c2VUZWFtQXBpS2V5KHsgYXBpS2V5IH0pO1xuICAgIGlmIChhcGlLZXlPYmplY3QgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy51c2VUZWFtKGFwaUtleU9iamVjdC50ZWFtSWQpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVVzZXIob3B0aW9ucykge1xuICAgIGNvbnN0IGNydWQgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuY3JlYXRlU2VydmVyVXNlcihzZXJ2ZXJVc2VyQ3JlYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSk7XG4gICAgYXdhaXQgdGhpcy5fcmVmcmVzaFVzZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX3NlcnZlclVzZXJGcm9tQ3J1ZChjcnVkKTtcbiAgfVxuICBhc3luYyBnZXRVc2VyKG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFNlcnZlclVzZXJCeUlkKG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgJiYgXCJhcGlLZXlcIiBpbiBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5fZ2V0VXNlckJ5QXBpS2V5KG9wdGlvbnMuYXBpS2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUob3B0aW9ucz8udG9rZW5TdG9yZSk7XG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5fZ2V0U2Vzc2lvbihvcHRpb25zPy50b2tlblN0b3JlKTtcbiAgICAgIGxldCBjcnVkID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgdGhpcy5fY3VycmVudFNlcnZlclVzZXJDYWNoZS5nZXRPcldhaXQoW3Nlc3Npb25dLCBcIndyaXRlLW9ubHlcIikpO1xuICAgICAgaWYgKGNydWQ/LmlzX2Fub255bW91cyAmJiBvcHRpb25zPy5vciAhPT0gXCJhbm9ueW1vdXNcIiAmJiBvcHRpb25zPy5vciAhPT0gXCJhbm9ueW1vdXMtaWYtZXhpc3RzXCIpIHtcbiAgICAgICAgY3J1ZCA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoY3J1ZCA9PT0gbnVsbCkge1xuICAgICAgICBzd2l0Y2ggKG9wdGlvbnM/Lm9yKSB7XG4gICAgICAgICAgY2FzZSBcInJlZGlyZWN0XCI6IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RUb1NpZ25Jbih7IHJlcGxhY2U6IHRydWUgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInRocm93XCI6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgaXMgbm90IHNpZ25lZCBpbiBidXQgZ2V0VXNlciB3YXMgY2FsbGVkIHdpdGggeyBvcjogJ3Rocm93JyB9XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiYW5vbnltb3VzXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IHRoaXMuX3NpZ25VcEFub255bW91c2x5KCk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRVc2VyKHsgdG9rZW5TdG9yZTogdG9rZW5zLCBvcjogXCJhbm9ueW1vdXMtaWYtZXhpc3RzXCIgfSkgPz8gdGhyb3dFcnIoXCJTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSBzaWduaW5nIHVwIGFub255bW91c2x5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIHZvaWQgMDpcbiAgICAgICAgICBjYXNlIFwiYW5vbnltb3VzLWlmLWV4aXN0c1wiOlxuICAgICAgICAgIGNhc2UgXCJyZXR1cm4tbnVsbFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjcnVkICYmIHRoaXMuX2N1cnJlbnRVc2VyRnJvbUNydWQoY3J1ZCwgc2Vzc2lvbik7XG4gICAgfVxuICB9XG4gIGFzeW5jIGdldFNlcnZlclVzZXIoKSB7XG4gICAgY29uc29sZS53YXJuKFwic3RhY2tTZXJ2ZXJBcHAuZ2V0U2VydmVyVXNlciBpcyBkZXByZWNhdGVkOyB1c2Ugc3RhY2tTZXJ2ZXJBcHAuZ2V0VXNlciBpbnN0ZWFkXCIpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFVzZXIoKTtcbiAgfVxuICBhc3luYyBnZXRTZXJ2ZXJVc2VyQnlJZCh1c2VySWQpIHtcbiAgICBjb25zdCBjcnVkID0gUmVzdWx0Lm9yVGhyb3coYXdhaXQgdGhpcy5fc2VydmVyVXNlckNhY2hlLmdldE9yV2FpdChbdXNlcklkXSwgXCJ3cml0ZS1vbmx5XCIpKTtcbiAgICByZXR1cm4gY3J1ZCAmJiB0aGlzLl9zZXJ2ZXJVc2VyRnJvbUNydWQoY3J1ZCk7XG4gIH1cbiAgdXNlVXNlcihvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gdGhpcy51c2VVc2VyQnlJZChvcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIFwiYXBpS2V5XCIgaW4gb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuX3VzZVVzZXJCeUFwaUtleShvcHRpb25zLmFwaUtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Vuc3VyZVBlcnNpc3RlbnRUb2tlblN0b3JlKG9wdGlvbnM/LnRva2VuU3RvcmUpO1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuX3VzZVNlc3Npb24ob3B0aW9ucz8udG9rZW5TdG9yZSk7XG4gICAgICBsZXQgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fY3VycmVudFNlcnZlclVzZXJDYWNoZSwgW3Nlc3Npb25dLCBcInVzZVVzZXIoKVwiKTtcbiAgICAgIGlmIChjcnVkPy5pc19hbm9ueW1vdXMgJiYgb3B0aW9ucz8ub3IgIT09IFwiYW5vbnltb3VzXCIgJiYgb3B0aW9ucz8ub3IgIT09IFwiYW5vbnltb3VzLWlmLWV4aXN0c1wiKSB7XG4gICAgICAgIGNydWQgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGNydWQgPT09IG51bGwpIHtcbiAgICAgICAgc3dpdGNoIChvcHRpb25zPy5vcikge1xuICAgICAgICAgIGNhc2UgXCJyZWRpcmVjdFwiOiB7XG4gICAgICAgICAgICBydW5Bc3luY2hyb25vdXNseSh0aGlzLnJlZGlyZWN0VG9TaWduSW4oeyByZXBsYWNlOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHN1c3BlbmQoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwic3VzcGVuZCBzaG91bGQgbmV2ZXIgcmV0dXJuXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwidGhyb3dcIjoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBpcyBub3Qgc2lnbmVkIGluIGJ1dCB1c2VVc2VyIHdhcyBjYWxsZWQgd2l0aCB7IG9yOiAndGhyb3cnIH1cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJhbm9ueW1vdXNcIjoge1xuICAgICAgICAgICAgcnVuQXN5bmNocm9ub3VzbHkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9zaWduVXBBbm9ueW1vdXNseSgpO1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdXNwZW5kKCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcInN1c3BlbmQgc2hvdWxkIG5ldmVyIHJldHVyblwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSB2b2lkIDA6XG4gICAgICAgICAgY2FzZSBcImFub255bW91cy1pZi1leGlzdHNcIjpcbiAgICAgICAgICBjYXNlIFwicmV0dXJuLW51bGxcIjoge1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICByZXR1cm4gY3J1ZCAmJiB0aGlzLl9jdXJyZW50VXNlckZyb21DcnVkKGNydWQsIHNlc3Npb24pO1xuICAgICAgfSwgW2NydWQsIHNlc3Npb24sIG9wdGlvbnM/Lm9yXSk7XG4gICAgfVxuICB9XG4gIHVzZVVzZXJCeUlkKHVzZXJJZCkge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX3NlcnZlclVzZXJDYWNoZSwgW3VzZXJJZF0sIFwidXNlVXNlckJ5SWQoKVwiKTtcbiAgICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gY3J1ZCAmJiB0aGlzLl9zZXJ2ZXJVc2VyRnJvbUNydWQoY3J1ZCk7XG4gICAgfSwgW2NydWRdKTtcbiAgfVxuICBhc3luYyBsaXN0VXNlcnMob3B0aW9ucykge1xuICAgIGNvbnN0IGNydWQgPSBSZXN1bHQub3JUaHJvdyhhd2FpdCB0aGlzLl9zZXJ2ZXJVc2Vyc0NhY2hlLmdldE9yV2FpdChbb3B0aW9ucz8uY3Vyc29yLCBvcHRpb25zPy5saW1pdCwgb3B0aW9ucz8ub3JkZXJCeSwgb3B0aW9ucz8uZGVzYywgb3B0aW9ucz8ucXVlcnldLCBcIndyaXRlLW9ubHlcIikpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGNydWQuaXRlbXMubWFwKChqKSA9PiB0aGlzLl9zZXJ2ZXJVc2VyRnJvbUNydWQoaikpO1xuICAgIHJlc3VsdC5uZXh0Q3Vyc29yID0gY3J1ZC5wYWdpbmF0aW9uPy5uZXh0X2N1cnNvciA/PyBudWxsO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgdXNlVXNlcnMob3B0aW9ucykge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX3NlcnZlclVzZXJzQ2FjaGUsIFtvcHRpb25zPy5jdXJzb3IsIG9wdGlvbnM/LmxpbWl0LCBvcHRpb25zPy5vcmRlckJ5LCBvcHRpb25zPy5kZXNjLCBvcHRpb25zPy5xdWVyeV0sIFwidXNlU2VydmVyVXNlcnMoKVwiKTtcbiAgICBjb25zdCByZXN1bHQgPSBjcnVkLml0ZW1zLm1hcCgoaikgPT4gdGhpcy5fc2VydmVyVXNlckZyb21DcnVkKGopKTtcbiAgICByZXN1bHQubmV4dEN1cnNvciA9IGNydWQucGFnaW5hdGlvbj8ubmV4dF9jdXJzb3IgPz8gbnVsbDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIF9zZXJ2ZXJQZXJtaXNzaW9uRnJvbUNydWQoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZFxuICAgIH07XG4gIH1cbiAgX3NlcnZlclRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbkZyb21DcnVkKGNydWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGNydWQuaWQsXG4gICAgICBkZXNjcmlwdGlvbjogY3J1ZC5kZXNjcmlwdGlvbixcbiAgICAgIGNvbnRhaW5lZFBlcm1pc3Npb25JZHM6IGNydWQuY29udGFpbmVkX3Blcm1pc3Npb25faWRzXG4gICAgfTtcbiAgfVxuICBfc2VydmVyUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uRnJvbUNydWQoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZCxcbiAgICAgIGRlc2NyaXB0aW9uOiBjcnVkLmRlc2NyaXB0aW9uLFxuICAgICAgY29udGFpbmVkUGVybWlzc2lvbklkczogY3J1ZC5jb250YWluZWRfcGVybWlzc2lvbl9pZHNcbiAgICB9O1xuICB9XG4gIGFzeW5jIGxpc3RUZWFtcygpIHtcbiAgICBjb25zdCB0ZWFtcyA9IFJlc3VsdC5vclRocm93KGF3YWl0IHRoaXMuX3NlcnZlclRlYW1zQ2FjaGUuZ2V0T3JXYWl0KFt2b2lkIDBdLCBcIndyaXRlLW9ubHlcIikpO1xuICAgIHJldHVybiB0ZWFtcy5tYXAoKHQpID0+IHRoaXMuX3NlcnZlclRlYW1Gcm9tQ3J1ZCh0KSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlVGVhbShkYXRhKSB7XG4gICAgY29uc3QgdGVhbSA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5jcmVhdGVTZXJ2ZXJUZWFtKHNlcnZlclRlYW1DcmVhdGVPcHRpb25zVG9DcnVkKGRhdGEpKTtcbiAgICBhd2FpdCB0aGlzLl9zZXJ2ZXJUZWFtc0NhY2hlLnJlZnJlc2goW3ZvaWQgMF0pO1xuICAgIHJldHVybiB0aGlzLl9zZXJ2ZXJUZWFtRnJvbUNydWQodGVhbSk7XG4gIH1cbiAgdXNlVGVhbXMoKSB7XG4gICAgY29uc3QgdGVhbXMgPSB1c2VBc3luY0NhY2hlKHRoaXMuX3NlcnZlclRlYW1zQ2FjaGUsIFt2b2lkIDBdLCBcInVzZVNlcnZlclRlYW1zKClcIik7XG4gICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgcmV0dXJuIHRlYW1zLm1hcCgodCkgPT4gdGhpcy5fc2VydmVyVGVhbUZyb21DcnVkKHQpKTtcbiAgICB9LCBbdGVhbXNdKTtcbiAgfVxuICBhc3luYyBnZXRUZWFtKG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgJiYgXCJhcGlLZXlcIiBpbiBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5fZ2V0VGVhbUJ5QXBpS2V5KG9wdGlvbnMuYXBpS2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGVhbUlkID0gb3B0aW9ucztcbiAgICAgIGNvbnN0IHRlYW1zID0gYXdhaXQgdGhpcy5saXN0VGVhbXMoKTtcbiAgICAgIHJldHVybiB0ZWFtcy5maW5kKCh0KSA9PiB0LmlkID09PSB0ZWFtSWQpID8/IG51bGw7XG4gICAgfVxuICB9XG4gIHVzZVRlYW0ob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBcImFwaUtleVwiIGluIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLl91c2VUZWFtQnlBcGlLZXkob3B0aW9ucy5hcGlLZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0ZWFtSWQgPSBvcHRpb25zO1xuICAgICAgY29uc3QgdGVhbXMgPSB0aGlzLnVzZVRlYW1zKCk7XG4gICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIHJldHVybiB0ZWFtcy5maW5kKCh0KSA9PiB0LmlkID09PSB0ZWFtSWQpID8/IG51bGw7XG4gICAgICB9LCBbdGVhbXMsIHRlYW1JZF0pO1xuICAgIH1cbiAgfVxuICBhc3luYyBfcmVmcmVzaFNlc3Npb24oc2Vzc2lvbikge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHN1cGVyLl9yZWZyZXNoVXNlcihzZXNzaW9uKSxcbiAgICAgIHRoaXMuX2N1cnJlbnRTZXJ2ZXJVc2VyQ2FjaGUucmVmcmVzaChbc2Vzc2lvbl0pXG4gICAgXSk7XG4gIH1cbiAgYXN5bmMgX3JlZnJlc2hVc2VycygpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBzdXBlci5fcmVmcmVzaFVzZXJzKCksXG4gICAgICB0aGlzLl9zZXJ2ZXJVc2VyQ2FjaGUucmVmcmVzaFdoZXJlKCgpID0+IHRydWUpLFxuICAgICAgdGhpcy5fc2VydmVyVXNlcnNDYWNoZS5yZWZyZXNoV2hlcmUoKCkgPT4gdHJ1ZSksXG4gICAgICB0aGlzLl9zZXJ2ZXJDb250YWN0Q2hhbm5lbHNDYWNoZS5yZWZyZXNoV2hlcmUoKCkgPT4gdHJ1ZSlcbiAgICBdKTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIF9TdGFja1NlcnZlckFwcEltcGxJbmNvbXBsZXRlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VydmVyLWFwcC1pbXBsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/server-app-impl.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/interfaces/client-app.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/interfaces/client-app.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackClientApp: () => (/* binding */ StackClientApp)\n/* harmony export */ });\n/* harmony import */ var _implementations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../implementations */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/implementations/index.js\");\n// src/lib/stack-app/apps/interfaces/client-app.ts\n\nvar StackClientApp = _implementations__WEBPACK_IMPORTED_MODULE_0__._StackClientAppImpl;\n\n//# sourceMappingURL=client-app.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2FwcHMvaW50ZXJmYWNlcy9jbGllbnQtYXBwLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDeUQ7QUFDekQscUJBQXFCLGlFQUFtQjtBQUd0QztBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrXFxkaXN0XFxlc21cXGxpYlxcc3RhY2stYXBwXFxhcHBzXFxpbnRlcmZhY2VzXFxjbGllbnQtYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvc3RhY2stYXBwL2FwcHMvaW50ZXJmYWNlcy9jbGllbnQtYXBwLnRzXG5pbXBvcnQgeyBfU3RhY2tDbGllbnRBcHBJbXBsIH0gZnJvbSBcIi4uL2ltcGxlbWVudGF0aW9uc1wiO1xudmFyIFN0YWNrQ2xpZW50QXBwID0gX1N0YWNrQ2xpZW50QXBwSW1wbDtcbmV4cG9ydCB7XG4gIFN0YWNrQ2xpZW50QXBwXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50LWFwcC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/interfaces/client-app.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/common.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/common.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stackAppInternalsSymbol: () => (/* binding */ stackAppInternalsSymbol)\n/* harmony export */ });\n// src/lib/stack-app/common.ts\nvar stackAppInternalsSymbol = Symbol.for(\"StackAuth--DO-NOT-USE-OR-YOU-WILL-BE-FIRED--StackAppInternals\");\n\n//# sourceMappingURL=common.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2NvbW1vbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2tcXGRpc3RcXGVzbVxcbGliXFxzdGFjay1hcHBcXGNvbW1vbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL3N0YWNrLWFwcC9jb21tb24udHNcbnZhciBzdGFja0FwcEludGVybmFsc1N5bWJvbCA9IFN5bWJvbC5mb3IoXCJTdGFja0F1dGgtLURPLU5PVC1VU0UtT1ItWU9VLVdJTEwtQkUtRklSRUQtLVN0YWNrQXBwSW50ZXJuYWxzXCIpO1xuZXhwb3J0IHtcbiAgc3RhY2tBcHBJbnRlcm5hbHNTeW1ib2xcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/common.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/contact-channels/index.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/contact-channels/index.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   contactChannelCreateOptionsToCrud: () => (/* binding */ contactChannelCreateOptionsToCrud),\n/* harmony export */   contactChannelUpdateOptionsToCrud: () => (/* binding */ contactChannelUpdateOptionsToCrud),\n/* harmony export */   serverContactChannelCreateOptionsToCrud: () => (/* binding */ serverContactChannelCreateOptionsToCrud),\n/* harmony export */   serverContactChannelUpdateOptionsToCrud: () => (/* binding */ serverContactChannelUpdateOptionsToCrud)\n/* harmony export */ });\n// src/lib/stack-app/contact-channels/index.ts\nfunction contactChannelCreateOptionsToCrud(userId, options) {\n  return {\n    value: options.value,\n    type: options.type,\n    used_for_auth: options.usedForAuth,\n    is_primary: options.isPrimary,\n    user_id: userId\n  };\n}\nfunction contactChannelUpdateOptionsToCrud(options) {\n  return {\n    value: options.value,\n    used_for_auth: options.usedForAuth,\n    is_primary: options.isPrimary\n  };\n}\nfunction serverContactChannelUpdateOptionsToCrud(options) {\n  return {\n    value: options.value,\n    is_verified: options.isVerified,\n    used_for_auth: options.usedForAuth,\n    is_primary: options.isPrimary\n  };\n}\nfunction serverContactChannelCreateOptionsToCrud(userId, options) {\n  return {\n    type: options.type,\n    value: options.value,\n    is_verified: options.isVerified,\n    user_id: userId,\n    used_for_auth: options.usedForAuth,\n    is_primary: options.isPrimary\n  };\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2NvbnRhY3QtY2hhbm5lbHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrXFxkaXN0XFxlc21cXGxpYlxcc3RhY2stYXBwXFxjb250YWN0LWNoYW5uZWxzXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL3N0YWNrLWFwcC9jb250YWN0LWNoYW5uZWxzL2luZGV4LnRzXG5mdW5jdGlvbiBjb250YWN0Q2hhbm5lbENyZWF0ZU9wdGlvbnNUb0NydWQodXNlcklkLCBvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgdmFsdWU6IG9wdGlvbnMudmFsdWUsXG4gICAgdHlwZTogb3B0aW9ucy50eXBlLFxuICAgIHVzZWRfZm9yX2F1dGg6IG9wdGlvbnMudXNlZEZvckF1dGgsXG4gICAgaXNfcHJpbWFyeTogb3B0aW9ucy5pc1ByaW1hcnksXG4gICAgdXNlcl9pZDogdXNlcklkXG4gIH07XG59XG5mdW5jdGlvbiBjb250YWN0Q2hhbm5lbFVwZGF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIHZhbHVlOiBvcHRpb25zLnZhbHVlLFxuICAgIHVzZWRfZm9yX2F1dGg6IG9wdGlvbnMudXNlZEZvckF1dGgsXG4gICAgaXNfcHJpbWFyeTogb3B0aW9ucy5pc1ByaW1hcnlcbiAgfTtcbn1cbmZ1bmN0aW9uIHNlcnZlckNvbnRhY3RDaGFubmVsVXBkYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgdmFsdWU6IG9wdGlvbnMudmFsdWUsXG4gICAgaXNfdmVyaWZpZWQ6IG9wdGlvbnMuaXNWZXJpZmllZCxcbiAgICB1c2VkX2Zvcl9hdXRoOiBvcHRpb25zLnVzZWRGb3JBdXRoLFxuICAgIGlzX3ByaW1hcnk6IG9wdGlvbnMuaXNQcmltYXJ5XG4gIH07XG59XG5mdW5jdGlvbiBzZXJ2ZXJDb250YWN0Q2hhbm5lbENyZWF0ZU9wdGlvbnNUb0NydWQodXNlcklkLCBvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogb3B0aW9ucy50eXBlLFxuICAgIHZhbHVlOiBvcHRpb25zLnZhbHVlLFxuICAgIGlzX3ZlcmlmaWVkOiBvcHRpb25zLmlzVmVyaWZpZWQsXG4gICAgdXNlcl9pZDogdXNlcklkLFxuICAgIHVzZWRfZm9yX2F1dGg6IG9wdGlvbnMudXNlZEZvckF1dGgsXG4gICAgaXNfcHJpbWFyeTogb3B0aW9ucy5pc1ByaW1hcnlcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIGNvbnRhY3RDaGFubmVsQ3JlYXRlT3B0aW9uc1RvQ3J1ZCxcbiAgY29udGFjdENoYW5uZWxVcGRhdGVPcHRpb25zVG9DcnVkLFxuICBzZXJ2ZXJDb250YWN0Q2hhbm5lbENyZWF0ZU9wdGlvbnNUb0NydWQsXG4gIHNlcnZlckNvbnRhY3RDaGFubmVsVXBkYXRlT3B0aW9uc1RvQ3J1ZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/contact-channels/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/email-templates/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/email-templates/index.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminEmailTemplateUpdateOptionsToCrud: () => (/* binding */ adminEmailTemplateUpdateOptionsToCrud)\n/* harmony export */ });\n// src/lib/stack-app/email-templates/index.ts\nfunction adminEmailTemplateUpdateOptionsToCrud(options) {\n  return {\n    subject: options.subject,\n    content: options.content\n  };\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2VtYWlsLXRlbXBsYXRlcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQHN0YWNrZnJhbWVcXHN0YWNrXFxkaXN0XFxlc21cXGxpYlxcc3RhY2stYXBwXFxlbWFpbC10ZW1wbGF0ZXNcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvc3RhY2stYXBwL2VtYWlsLXRlbXBsYXRlcy9pbmRleC50c1xuZnVuY3Rpb24gYWRtaW5FbWFpbFRlbXBsYXRlVXBkYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgc3ViamVjdDogb3B0aW9ucy5zdWJqZWN0LFxuICAgIGNvbnRlbnQ6IG9wdGlvbnMuY29udGVudFxuICB9O1xufVxuZXhwb3J0IHtcbiAgYWRtaW5FbWFpbFRlbXBsYXRlVXBkYXRlT3B0aW9uc1RvQ3J1ZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/email-templates/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/internal-api-keys/index.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/internal-api-keys/index.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   internalApiKeyCreateOptionsToCrud: () => (/* binding */ internalApiKeyCreateOptionsToCrud)\n/* harmony export */ });\n// src/lib/stack-app/internal-api-keys/index.ts\nfunction internalApiKeyCreateOptionsToCrud(options) {\n  return {\n    description: options.description,\n    expires_at_millis: options.expiresAt.getTime(),\n    has_publishable_client_key: options.hasPublishableClientKey,\n    has_secret_server_key: options.hasSecretServerKey,\n    has_super_secret_admin_key: options.hasSuperSecretAdminKey\n  };\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL2ludGVybmFsLWFwaS1rZXlzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2tcXGRpc3RcXGVzbVxcbGliXFxzdGFjay1hcHBcXGludGVybmFsLWFwaS1rZXlzXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL3N0YWNrLWFwcC9pbnRlcm5hbC1hcGkta2V5cy9pbmRleC50c1xuZnVuY3Rpb24gaW50ZXJuYWxBcGlLZXlDcmVhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbixcbiAgICBleHBpcmVzX2F0X21pbGxpczogb3B0aW9ucy5leHBpcmVzQXQuZ2V0VGltZSgpLFxuICAgIGhhc19wdWJsaXNoYWJsZV9jbGllbnRfa2V5OiBvcHRpb25zLmhhc1B1Ymxpc2hhYmxlQ2xpZW50S2V5LFxuICAgIGhhc19zZWNyZXRfc2VydmVyX2tleTogb3B0aW9ucy5oYXNTZWNyZXRTZXJ2ZXJLZXksXG4gICAgaGFzX3N1cGVyX3NlY3JldF9hZG1pbl9rZXk6IG9wdGlvbnMuaGFzU3VwZXJTZWNyZXRBZG1pbktleVxuICB9O1xufVxuZXhwb3J0IHtcbiAgaW50ZXJuYWxBcGlLZXlDcmVhdGVPcHRpb25zVG9DcnVkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/internal-api-keys/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/permissions/index.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/permissions/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminProjectPermissionDefinitionCreateOptionsToCrud: () => (/* binding */ adminProjectPermissionDefinitionCreateOptionsToCrud),\n/* harmony export */   adminProjectPermissionDefinitionUpdateOptionsToCrud: () => (/* binding */ adminProjectPermissionDefinitionUpdateOptionsToCrud),\n/* harmony export */   adminTeamPermissionDefinitionCreateOptionsToCrud: () => (/* binding */ adminTeamPermissionDefinitionCreateOptionsToCrud),\n/* harmony export */   adminTeamPermissionDefinitionUpdateOptionsToCrud: () => (/* binding */ adminTeamPermissionDefinitionUpdateOptionsToCrud)\n/* harmony export */ });\n// src/lib/stack-app/permissions/index.ts\nfunction adminTeamPermissionDefinitionCreateOptionsToCrud(options) {\n  return {\n    id: options.id,\n    description: options.description,\n    contained_permission_ids: options.containedPermissionIds\n  };\n}\nfunction adminTeamPermissionDefinitionUpdateOptionsToCrud(options) {\n  return {\n    id: options.id,\n    description: options.description,\n    contained_permission_ids: options.containedPermissionIds\n  };\n}\nfunction adminProjectPermissionDefinitionCreateOptionsToCrud(options) {\n  return {\n    id: options.id,\n    description: options.description,\n    contained_permission_ids: options.containedPermissionIds\n  };\n}\nfunction adminProjectPermissionDefinitionUpdateOptionsToCrud(options) {\n  return {\n    id: options.id,\n    description: options.description,\n    contained_permission_ids: options.containedPermissionIds\n  };\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL3Blcm1pc3Npb25zL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUU7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFja1xcZGlzdFxcZXNtXFxsaWJcXHN0YWNrLWFwcFxccGVybWlzc2lvbnNcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvc3RhY2stYXBwL3Blcm1pc3Npb25zL2luZGV4LnRzXG5mdW5jdGlvbiBhZG1pblRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbkNyZWF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIGlkOiBvcHRpb25zLmlkLFxuICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgIGNvbnRhaW5lZF9wZXJtaXNzaW9uX2lkczogb3B0aW9ucy5jb250YWluZWRQZXJtaXNzaW9uSWRzXG4gIH07XG59XG5mdW5jdGlvbiBhZG1pblRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvblVwZGF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIGlkOiBvcHRpb25zLmlkLFxuICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgIGNvbnRhaW5lZF9wZXJtaXNzaW9uX2lkczogb3B0aW9ucy5jb250YWluZWRQZXJtaXNzaW9uSWRzXG4gIH07XG59XG5mdW5jdGlvbiBhZG1pblByb2plY3RQZXJtaXNzaW9uRGVmaW5pdGlvbkNyZWF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIGlkOiBvcHRpb25zLmlkLFxuICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgIGNvbnRhaW5lZF9wZXJtaXNzaW9uX2lkczogb3B0aW9ucy5jb250YWluZWRQZXJtaXNzaW9uSWRzXG4gIH07XG59XG5mdW5jdGlvbiBhZG1pblByb2plY3RQZXJtaXNzaW9uRGVmaW5pdGlvblVwZGF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIGlkOiBvcHRpb25zLmlkLFxuICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgIGNvbnRhaW5lZF9wZXJtaXNzaW9uX2lkczogb3B0aW9ucy5jb250YWluZWRQZXJtaXNzaW9uSWRzXG4gIH07XG59XG5leHBvcnQge1xuICBhZG1pblByb2plY3RQZXJtaXNzaW9uRGVmaW5pdGlvbkNyZWF0ZU9wdGlvbnNUb0NydWQsXG4gIGFkbWluUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uVXBkYXRlT3B0aW9uc1RvQ3J1ZCxcbiAgYWRtaW5UZWFtUGVybWlzc2lvbkRlZmluaXRpb25DcmVhdGVPcHRpb25zVG9DcnVkLFxuICBhZG1pblRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvblVwZGF0ZU9wdGlvbnNUb0NydWRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/permissions/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/projects/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/projects/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminProjectCreateOptionsToCrud: () => (/* binding */ adminProjectCreateOptionsToCrud),\n/* harmony export */   adminProjectUpdateOptionsToCrud: () => (/* binding */ adminProjectUpdateOptionsToCrud)\n/* harmony export */ });\n// src/lib/stack-app/projects/index.ts\nfunction adminProjectUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    description: options.description,\n    is_production_mode: options.isProductionMode,\n    config: {\n      domains: options.config?.domains?.map((d) => ({\n        domain: d.domain,\n        handler_path: d.handlerPath\n      })),\n      oauth_providers: options.config?.oauthProviders?.map((p) => ({\n        id: p.id,\n        enabled: p.enabled,\n        type: p.type,\n        ...p.type === \"standard\" && {\n          client_id: p.clientId,\n          client_secret: p.clientSecret,\n          facebook_config_id: p.facebookConfigId,\n          microsoft_tenant_id: p.microsoftTenantId\n        }\n      })),\n      email_config: options.config?.emailConfig && (options.config.emailConfig.type === \"shared\" ? {\n        type: \"shared\"\n      } : {\n        type: \"standard\",\n        host: options.config.emailConfig.host,\n        port: options.config.emailConfig.port,\n        username: options.config.emailConfig.username,\n        password: options.config.emailConfig.password,\n        sender_name: options.config.emailConfig.senderName,\n        sender_email: options.config.emailConfig.senderEmail\n      }),\n      sign_up_enabled: options.config?.signUpEnabled,\n      credential_enabled: options.config?.credentialEnabled,\n      magic_link_enabled: options.config?.magicLinkEnabled,\n      passkey_enabled: options.config?.passkeyEnabled,\n      allow_localhost: options.config?.allowLocalhost,\n      create_team_on_sign_up: options.config?.createTeamOnSignUp,\n      client_team_creation_enabled: options.config?.clientTeamCreationEnabled,\n      client_user_deletion_enabled: options.config?.clientUserDeletionEnabled,\n      team_creator_default_permissions: options.config?.teamCreatorDefaultPermissions,\n      team_member_default_permissions: options.config?.teamMemberDefaultPermissions,\n      user_default_permissions: options.config?.userDefaultPermissions,\n      oauth_account_merge_strategy: options.config?.oauthAccountMergeStrategy,\n      allow_user_api_keys: options.config?.allowUserApiKeys,\n      allow_team_api_keys: options.config?.allowTeamApiKeys\n    }\n  };\n}\nfunction adminProjectCreateOptionsToCrud(options) {\n  return {\n    ...adminProjectUpdateOptionsToCrud(options),\n    display_name: options.displayName\n  };\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL3Byb2plY3RzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFja1xcZGlzdFxcZXNtXFxsaWJcXHN0YWNrLWFwcFxccHJvamVjdHNcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvc3RhY2stYXBwL3Byb2plY3RzL2luZGV4LnRzXG5mdW5jdGlvbiBhZG1pblByb2plY3RVcGRhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBkaXNwbGF5X25hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWUsXG4gICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24sXG4gICAgaXNfcHJvZHVjdGlvbl9tb2RlOiBvcHRpb25zLmlzUHJvZHVjdGlvbk1vZGUsXG4gICAgY29uZmlnOiB7XG4gICAgICBkb21haW5zOiBvcHRpb25zLmNvbmZpZz8uZG9tYWlucz8ubWFwKChkKSA9PiAoe1xuICAgICAgICBkb21haW46IGQuZG9tYWluLFxuICAgICAgICBoYW5kbGVyX3BhdGg6IGQuaGFuZGxlclBhdGhcbiAgICAgIH0pKSxcbiAgICAgIG9hdXRoX3Byb3ZpZGVyczogb3B0aW9ucy5jb25maWc/Lm9hdXRoUHJvdmlkZXJzPy5tYXAoKHApID0+ICh7XG4gICAgICAgIGlkOiBwLmlkLFxuICAgICAgICBlbmFibGVkOiBwLmVuYWJsZWQsXG4gICAgICAgIHR5cGU6IHAudHlwZSxcbiAgICAgICAgLi4ucC50eXBlID09PSBcInN0YW5kYXJkXCIgJiYge1xuICAgICAgICAgIGNsaWVudF9pZDogcC5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRfc2VjcmV0OiBwLmNsaWVudFNlY3JldCxcbiAgICAgICAgICBmYWNlYm9va19jb25maWdfaWQ6IHAuZmFjZWJvb2tDb25maWdJZCxcbiAgICAgICAgICBtaWNyb3NvZnRfdGVuYW50X2lkOiBwLm1pY3Jvc29mdFRlbmFudElkXG4gICAgICAgIH1cbiAgICAgIH0pKSxcbiAgICAgIGVtYWlsX2NvbmZpZzogb3B0aW9ucy5jb25maWc/LmVtYWlsQ29uZmlnICYmIChvcHRpb25zLmNvbmZpZy5lbWFpbENvbmZpZy50eXBlID09PSBcInNoYXJlZFwiID8ge1xuICAgICAgICB0eXBlOiBcInNoYXJlZFwiXG4gICAgICB9IDoge1xuICAgICAgICB0eXBlOiBcInN0YW5kYXJkXCIsXG4gICAgICAgIGhvc3Q6IG9wdGlvbnMuY29uZmlnLmVtYWlsQ29uZmlnLmhvc3QsXG4gICAgICAgIHBvcnQ6IG9wdGlvbnMuY29uZmlnLmVtYWlsQ29uZmlnLnBvcnQsXG4gICAgICAgIHVzZXJuYW1lOiBvcHRpb25zLmNvbmZpZy5lbWFpbENvbmZpZy51c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQ6IG9wdGlvbnMuY29uZmlnLmVtYWlsQ29uZmlnLnBhc3N3b3JkLFxuICAgICAgICBzZW5kZXJfbmFtZTogb3B0aW9ucy5jb25maWcuZW1haWxDb25maWcuc2VuZGVyTmFtZSxcbiAgICAgICAgc2VuZGVyX2VtYWlsOiBvcHRpb25zLmNvbmZpZy5lbWFpbENvbmZpZy5zZW5kZXJFbWFpbFxuICAgICAgfSksXG4gICAgICBzaWduX3VwX2VuYWJsZWQ6IG9wdGlvbnMuY29uZmlnPy5zaWduVXBFbmFibGVkLFxuICAgICAgY3JlZGVudGlhbF9lbmFibGVkOiBvcHRpb25zLmNvbmZpZz8uY3JlZGVudGlhbEVuYWJsZWQsXG4gICAgICBtYWdpY19saW5rX2VuYWJsZWQ6IG9wdGlvbnMuY29uZmlnPy5tYWdpY0xpbmtFbmFibGVkLFxuICAgICAgcGFzc2tleV9lbmFibGVkOiBvcHRpb25zLmNvbmZpZz8ucGFzc2tleUVuYWJsZWQsXG4gICAgICBhbGxvd19sb2NhbGhvc3Q6IG9wdGlvbnMuY29uZmlnPy5hbGxvd0xvY2FsaG9zdCxcbiAgICAgIGNyZWF0ZV90ZWFtX29uX3NpZ25fdXA6IG9wdGlvbnMuY29uZmlnPy5jcmVhdGVUZWFtT25TaWduVXAsXG4gICAgICBjbGllbnRfdGVhbV9jcmVhdGlvbl9lbmFibGVkOiBvcHRpb25zLmNvbmZpZz8uY2xpZW50VGVhbUNyZWF0aW9uRW5hYmxlZCxcbiAgICAgIGNsaWVudF91c2VyX2RlbGV0aW9uX2VuYWJsZWQ6IG9wdGlvbnMuY29uZmlnPy5jbGllbnRVc2VyRGVsZXRpb25FbmFibGVkLFxuICAgICAgdGVhbV9jcmVhdG9yX2RlZmF1bHRfcGVybWlzc2lvbnM6IG9wdGlvbnMuY29uZmlnPy50ZWFtQ3JlYXRvckRlZmF1bHRQZXJtaXNzaW9ucyxcbiAgICAgIHRlYW1fbWVtYmVyX2RlZmF1bHRfcGVybWlzc2lvbnM6IG9wdGlvbnMuY29uZmlnPy50ZWFtTWVtYmVyRGVmYXVsdFBlcm1pc3Npb25zLFxuICAgICAgdXNlcl9kZWZhdWx0X3Blcm1pc3Npb25zOiBvcHRpb25zLmNvbmZpZz8udXNlckRlZmF1bHRQZXJtaXNzaW9ucyxcbiAgICAgIG9hdXRoX2FjY291bnRfbWVyZ2Vfc3RyYXRlZ3k6IG9wdGlvbnMuY29uZmlnPy5vYXV0aEFjY291bnRNZXJnZVN0cmF0ZWd5LFxuICAgICAgYWxsb3dfdXNlcl9hcGlfa2V5czogb3B0aW9ucy5jb25maWc/LmFsbG93VXNlckFwaUtleXMsXG4gICAgICBhbGxvd190ZWFtX2FwaV9rZXlzOiBvcHRpb25zLmNvbmZpZz8uYWxsb3dUZWFtQXBpS2V5c1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGFkbWluUHJvamVjdENyZWF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIC4uLmFkbWluUHJvamVjdFVwZGF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucyksXG4gICAgZGlzcGxheV9uYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gIH07XG59XG5leHBvcnQge1xuICBhZG1pblByb2plY3RDcmVhdGVPcHRpb25zVG9DcnVkLFxuICBhZG1pblByb2plY3RVcGRhdGVPcHRpb25zVG9DcnVkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/projects/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/teams/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/teams/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   serverTeamCreateOptionsToCrud: () => (/* binding */ serverTeamCreateOptionsToCrud),\n/* harmony export */   serverTeamUpdateOptionsToCrud: () => (/* binding */ serverTeamUpdateOptionsToCrud),\n/* harmony export */   teamCreateOptionsToCrud: () => (/* binding */ teamCreateOptionsToCrud),\n/* harmony export */   teamUpdateOptionsToCrud: () => (/* binding */ teamUpdateOptionsToCrud)\n/* harmony export */ });\n// src/lib/stack-app/teams/index.ts\nfunction teamUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    profile_image_url: options.profileImageUrl,\n    client_metadata: options.clientMetadata\n  };\n}\nfunction teamCreateOptionsToCrud(options, creatorUserId) {\n  return {\n    display_name: options.displayName,\n    profile_image_url: options.profileImageUrl,\n    creator_user_id: creatorUserId\n  };\n}\nfunction serverTeamCreateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    profile_image_url: options.profileImageUrl,\n    creator_user_id: options.creatorUserId\n  };\n}\nfunction serverTeamUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    profile_image_url: options.profileImageUrl,\n    client_metadata: options.clientMetadata,\n    client_read_only_metadata: options.clientReadOnlyMetadata,\n    server_metadata: options.serverMetadata\n  };\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL3RlYW1zL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1FO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAc3RhY2tmcmFtZVxcc3RhY2tcXGRpc3RcXGVzbVxcbGliXFxzdGFjay1hcHBcXHRlYW1zXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL3N0YWNrLWFwcC90ZWFtcy9pbmRleC50c1xuZnVuY3Rpb24gdGVhbVVwZGF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIGRpc3BsYXlfbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZSxcbiAgICBwcm9maWxlX2ltYWdlX3VybDogb3B0aW9ucy5wcm9maWxlSW1hZ2VVcmwsXG4gICAgY2xpZW50X21ldGFkYXRhOiBvcHRpb25zLmNsaWVudE1ldGFkYXRhXG4gIH07XG59XG5mdW5jdGlvbiB0ZWFtQ3JlYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zLCBjcmVhdG9yVXNlcklkKSB7XG4gIHJldHVybiB7XG4gICAgZGlzcGxheV9uYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lLFxuICAgIHByb2ZpbGVfaW1hZ2VfdXJsOiBvcHRpb25zLnByb2ZpbGVJbWFnZVVybCxcbiAgICBjcmVhdG9yX3VzZXJfaWQ6IGNyZWF0b3JVc2VySWRcbiAgfTtcbn1cbmZ1bmN0aW9uIHNlcnZlclRlYW1DcmVhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBkaXNwbGF5X25hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWUsXG4gICAgcHJvZmlsZV9pbWFnZV91cmw6IG9wdGlvbnMucHJvZmlsZUltYWdlVXJsLFxuICAgIGNyZWF0b3JfdXNlcl9pZDogb3B0aW9ucy5jcmVhdG9yVXNlcklkXG4gIH07XG59XG5mdW5jdGlvbiBzZXJ2ZXJUZWFtVXBkYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgZGlzcGxheV9uYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lLFxuICAgIHByb2ZpbGVfaW1hZ2VfdXJsOiBvcHRpb25zLnByb2ZpbGVJbWFnZVVybCxcbiAgICBjbGllbnRfbWV0YWRhdGE6IG9wdGlvbnMuY2xpZW50TWV0YWRhdGEsXG4gICAgY2xpZW50X3JlYWRfb25seV9tZXRhZGF0YTogb3B0aW9ucy5jbGllbnRSZWFkT25seU1ldGFkYXRhLFxuICAgIHNlcnZlcl9tZXRhZGF0YTogb3B0aW9ucy5zZXJ2ZXJNZXRhZGF0YVxuICB9O1xufVxuZXhwb3J0IHtcbiAgc2VydmVyVGVhbUNyZWF0ZU9wdGlvbnNUb0NydWQsXG4gIHNlcnZlclRlYW1VcGRhdGVPcHRpb25zVG9DcnVkLFxuICB0ZWFtQ3JlYXRlT3B0aW9uc1RvQ3J1ZCxcbiAgdGVhbVVwZGF0ZU9wdGlvbnNUb0NydWRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/teams/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/users/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app/users/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   serverUserCreateOptionsToCrud: () => (/* binding */ serverUserCreateOptionsToCrud),\n/* harmony export */   serverUserUpdateOptionsToCrud: () => (/* binding */ serverUserUpdateOptionsToCrud),\n/* harmony export */   userUpdateOptionsToCrud: () => (/* binding */ userUpdateOptionsToCrud)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared_dist_utils_bytes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/bytes */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/bytes.js\");\n// src/lib/stack-app/users/index.ts\n\nfunction userUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    client_metadata: options.clientMetadata,\n    selected_team_id: options.selectedTeamId,\n    totp_secret_base64: options.totpMultiFactorSecret != null ? (0,_stackframe_stack_shared_dist_utils_bytes__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(options.totpMultiFactorSecret) : options.totpMultiFactorSecret,\n    profile_image_url: options.profileImageUrl,\n    otp_auth_enabled: options.otpAuthEnabled,\n    passkey_auth_enabled: options.passkeyAuthEnabled\n  };\n}\nfunction serverUserUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    primary_email: options.primaryEmail,\n    client_metadata: options.clientMetadata,\n    client_read_only_metadata: options.clientReadOnlyMetadata,\n    server_metadata: options.serverMetadata,\n    selected_team_id: options.selectedTeamId,\n    primary_email_auth_enabled: options.primaryEmailAuthEnabled,\n    primary_email_verified: options.primaryEmailVerified,\n    password: options.password,\n    profile_image_url: options.profileImageUrl,\n    totp_secret_base64: options.totpMultiFactorSecret != null ? (0,_stackframe_stack_shared_dist_utils_bytes__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(options.totpMultiFactorSecret) : options.totpMultiFactorSecret\n  };\n}\nfunction serverUserCreateOptionsToCrud(options) {\n  return {\n    primary_email: options.primaryEmail,\n    password: options.password,\n    otp_auth_enabled: options.otpAuthEnabled,\n    primary_email_auth_enabled: options.primaryEmailAuthEnabled,\n    display_name: options.displayName,\n    primary_email_verified: options.primaryEmailVerified,\n    client_metadata: options.clientMetadata,\n    client_read_only_metadata: options.clientReadOnlyMetadata,\n    server_metadata: options.serverMetadata\n  };\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvc3RhY2stYXBwL3VzZXJzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUN5RTtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLHVGQUFZO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsdUZBQVk7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFja1xcZGlzdFxcZXNtXFxsaWJcXHN0YWNrLWFwcFxcdXNlcnNcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvc3RhY2stYXBwL3VzZXJzL2luZGV4LnRzXG5pbXBvcnQgeyBlbmNvZGVCYXNlNjQgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvYnl0ZXNcIjtcbmZ1bmN0aW9uIHVzZXJVcGRhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBkaXNwbGF5X25hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWUsXG4gICAgY2xpZW50X21ldGFkYXRhOiBvcHRpb25zLmNsaWVudE1ldGFkYXRhLFxuICAgIHNlbGVjdGVkX3RlYW1faWQ6IG9wdGlvbnMuc2VsZWN0ZWRUZWFtSWQsXG4gICAgdG90cF9zZWNyZXRfYmFzZTY0OiBvcHRpb25zLnRvdHBNdWx0aUZhY3RvclNlY3JldCAhPSBudWxsID8gZW5jb2RlQmFzZTY0KG9wdGlvbnMudG90cE11bHRpRmFjdG9yU2VjcmV0KSA6IG9wdGlvbnMudG90cE11bHRpRmFjdG9yU2VjcmV0LFxuICAgIHByb2ZpbGVfaW1hZ2VfdXJsOiBvcHRpb25zLnByb2ZpbGVJbWFnZVVybCxcbiAgICBvdHBfYXV0aF9lbmFibGVkOiBvcHRpb25zLm90cEF1dGhFbmFibGVkLFxuICAgIHBhc3NrZXlfYXV0aF9lbmFibGVkOiBvcHRpb25zLnBhc3NrZXlBdXRoRW5hYmxlZFxuICB9O1xufVxuZnVuY3Rpb24gc2VydmVyVXNlclVwZGF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIGRpc3BsYXlfbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZSxcbiAgICBwcmltYXJ5X2VtYWlsOiBvcHRpb25zLnByaW1hcnlFbWFpbCxcbiAgICBjbGllbnRfbWV0YWRhdGE6IG9wdGlvbnMuY2xpZW50TWV0YWRhdGEsXG4gICAgY2xpZW50X3JlYWRfb25seV9tZXRhZGF0YTogb3B0aW9ucy5jbGllbnRSZWFkT25seU1ldGFkYXRhLFxuICAgIHNlcnZlcl9tZXRhZGF0YTogb3B0aW9ucy5zZXJ2ZXJNZXRhZGF0YSxcbiAgICBzZWxlY3RlZF90ZWFtX2lkOiBvcHRpb25zLnNlbGVjdGVkVGVhbUlkLFxuICAgIHByaW1hcnlfZW1haWxfYXV0aF9lbmFibGVkOiBvcHRpb25zLnByaW1hcnlFbWFpbEF1dGhFbmFibGVkLFxuICAgIHByaW1hcnlfZW1haWxfdmVyaWZpZWQ6IG9wdGlvbnMucHJpbWFyeUVtYWlsVmVyaWZpZWQsXG4gICAgcGFzc3dvcmQ6IG9wdGlvbnMucGFzc3dvcmQsXG4gICAgcHJvZmlsZV9pbWFnZV91cmw6IG9wdGlvbnMucHJvZmlsZUltYWdlVXJsLFxuICAgIHRvdHBfc2VjcmV0X2Jhc2U2NDogb3B0aW9ucy50b3RwTXVsdGlGYWN0b3JTZWNyZXQgIT0gbnVsbCA/IGVuY29kZUJhc2U2NChvcHRpb25zLnRvdHBNdWx0aUZhY3RvclNlY3JldCkgOiBvcHRpb25zLnRvdHBNdWx0aUZhY3RvclNlY3JldFxuICB9O1xufVxuZnVuY3Rpb24gc2VydmVyVXNlckNyZWF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIHByaW1hcnlfZW1haWw6IG9wdGlvbnMucHJpbWFyeUVtYWlsLFxuICAgIHBhc3N3b3JkOiBvcHRpb25zLnBhc3N3b3JkLFxuICAgIG90cF9hdXRoX2VuYWJsZWQ6IG9wdGlvbnMub3RwQXV0aEVuYWJsZWQsXG4gICAgcHJpbWFyeV9lbWFpbF9hdXRoX2VuYWJsZWQ6IG9wdGlvbnMucHJpbWFyeUVtYWlsQXV0aEVuYWJsZWQsXG4gICAgZGlzcGxheV9uYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lLFxuICAgIHByaW1hcnlfZW1haWxfdmVyaWZpZWQ6IG9wdGlvbnMucHJpbWFyeUVtYWlsVmVyaWZpZWQsXG4gICAgY2xpZW50X21ldGFkYXRhOiBvcHRpb25zLmNsaWVudE1ldGFkYXRhLFxuICAgIGNsaWVudF9yZWFkX29ubHlfbWV0YWRhdGE6IG9wdGlvbnMuY2xpZW50UmVhZE9ubHlNZXRhZGF0YSxcbiAgICBzZXJ2ZXJfbWV0YWRhdGE6IG9wdGlvbnMuc2VydmVyTWV0YWRhdGFcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIHNlcnZlclVzZXJDcmVhdGVPcHRpb25zVG9DcnVkLFxuICBzZXJ2ZXJVc2VyVXBkYXRlT3B0aW9uc1RvQ3J1ZCxcbiAgdXNlclVwZGF0ZU9wdGlvbnNUb0NydWRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/users/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/providers/stack-provider-client.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/providers/stack-provider-client.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackContext: () => (/* binding */ StackContext),\n/* harmony export */   StackProviderClient: () => (/* binding */ StackProviderClient),\n/* harmony export */   UserSetter: () => (/* binding */ UserSetter)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared_dist_utils_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/globals */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! .. */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/hooks.js\");\n/* harmony import */ var _lib_stack_app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/stack-app */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/interfaces/client-app.js\");\n/* harmony import */ var _lib_stack_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/stack-app */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/common.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* __next_internal_client_entry_do_not_use__ StackContext,StackProviderClient,UserSetter auto */ var _s = $RefreshSig$();\n// src/providers/stack-provider-client.tsx\n\n\n\n\n\nvar StackContext = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().createContext(null);\nfunction StackProviderClient(props) {\n    const app = props.serialized ? _lib_stack_app__WEBPACK_IMPORTED_MODULE_3__.StackClientApp[_lib_stack_app__WEBPACK_IMPORTED_MODULE_4__.stackAppInternalsSymbol].fromClientJson(props.app) : props.app;\n    _stackframe_stack_shared_dist_utils_globals__WEBPACK_IMPORTED_MODULE_0__.globalVar.__STACK_AUTH__ = {\n        app\n    };\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StackContext.Provider, {\n        value: {\n            app\n        },\n        children: props.children\n    });\n}\n_c = StackProviderClient;\nfunction UserSetter(props) {\n    _s();\n    const app = (0,___WEBPACK_IMPORTED_MODULE_5__.useStackApp)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"UserSetter.useEffect\": ()=>{\n            const promise = ({\n                \"UserSetter.useEffect.promise\": async ()=>await props.userJsonPromise\n            })[\"UserSetter.useEffect.promise\"]();\n            app[_lib_stack_app__WEBPACK_IMPORTED_MODULE_4__.stackAppInternalsSymbol].setCurrentUser(promise);\n        }\n    }[\"UserSetter.useEffect\"], []);\n    return null;\n}\n_s(UserSetter, \"SvtpiKrHtw9ISKE2MIQgyXUhtRU=\", false, function() {\n    return [\n        ___WEBPACK_IMPORTED_MODULE_5__.useStackApp\n    ];\n});\n_c1 = UserSetter;\n //# sourceMappingURL=stack-provider-client.js.map\nvar _c, _c1;\n$RefreshReg$(_c, \"StackProviderClient\");\n$RefreshReg$(_c1, \"UserSetter\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9wcm92aWRlcnMvc3RhY2stcHJvdmlkZXItY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBUUEsU0FBUyxpQkFBaUI7QUFDTztBQUNMO0FBQ2lCO0FBa0J6QztBQWREO0FBRUksU0FBUyxrRkFJYjtBQUNELFFBQU0scUJBQVksSUFDZDtJQUdKLFVBQVUsaUJBQWlCLEVBQUUsNERBQUk7SUFFakMsa0ZBQ0Usa0JBQUM7UUFBQTtJQUFBO0lBSUw7UUFBQTtZQUFBO1FBQUE7UUFBQTtJQUFBO0FBRU87S0FiQyxLQUFNLE1BQU07QUFjbEIsUUFBTSxZQUFNLE1BQVk7O0lBQ3hCLFVBQVU7SUFDUixnREFBTTtnQ0FBQTtZQUNOLElBQUk7Z0RBQUEsVUFBdUIsTUFBRSxTQUFlLE9BQU87O1lBQ3JELENBQUcsQ0FBQyxDQUFDO1FBQ0w7K0JBQUEsSUFBTztJQUNUOztHQU5ROztRQUNJLDBDQUFNOzs7TUFEVixLQUFNIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxzcmNcXHByb3ZpZGVyc1xcc3RhY2stcHJvdmlkZXItY2xpZW50LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRISVMgRklMRSBJUyBBVVRPLUdFTkVSQVRFRCBGUk9NIFRFTVBMQVRFLiBETyBOT1QgRURJVCBJVCBESVJFQ1RMWVxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IEN1cnJlbnRVc2VyQ3J1ZCB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9pbnRlcmZhY2UvY3J1ZC9jdXJyZW50LXVzZXJcIjtcbmltcG9ydCB7IGdsb2JhbFZhciB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9nbG9iYWxzXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTdGFja0FwcCB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgU3RhY2tDbGllbnRBcHAsIFN0YWNrQ2xpZW50QXBwSnNvbiwgc3RhY2tBcHBJbnRlcm5hbHNTeW1ib2wgfSBmcm9tIFwiLi4vbGliL3N0YWNrLWFwcFwiO1xuXG5leHBvcnQgY29uc3QgU3RhY2tDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxudWxsIHwge1xuICBhcHA6IFN0YWNrQ2xpZW50QXBwPHRydWU+LFxufT4obnVsbCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBTdGFja1Byb3ZpZGVyQ2xpZW50KHByb3BzOiB7XG4gIGFwcDogU3RhY2tDbGllbnRBcHBKc29uPHRydWUsIHN0cmluZz4gfCBTdGFja0NsaWVudEFwcDx0cnVlPixcbiAgc2VyaWFsaXplZDogYm9vbGVhbixcbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGUsXG59KSB7XG4gIGNvbnN0IGFwcCA9IHByb3BzLnNlcmlhbGl6ZWRcbiAgICA/IFN0YWNrQ2xpZW50QXBwW3N0YWNrQXBwSW50ZXJuYWxzU3ltYm9sXS5mcm9tQ2xpZW50SnNvbihwcm9wcy5hcHAgYXMgU3RhY2tDbGllbnRBcHBKc29uPHRydWUsIHN0cmluZz4pXG4gICAgOiBwcm9wcy5hcHAgYXMgU3RhY2tDbGllbnRBcHA8dHJ1ZT47XG5cbiAgZ2xvYmFsVmFyLl9fU1RBQ0tfQVVUSF9fID0geyBhcHAgfTtcblxuICByZXR1cm4gKFxuICAgIDxTdGFja0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgYXBwIH19PlxuICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgIDwvU3RhY2tDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gVXNlclNldHRlcihwcm9wczogeyB1c2VySnNvblByb21pc2U6IFByb21pc2U8Q3VycmVudFVzZXJDcnVkWydDbGllbnQnXVsnUmVhZCddIHwgbnVsbD4gfSkge1xuICBjb25zdCBhcHAgPSB1c2VTdGFja0FwcCgpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHByb21pc2UgPSAoYXN5bmMgKCkgPT4gYXdhaXQgcHJvcHMudXNlckpzb25Qcm9taXNlKSgpOyAgLy8gdGhlcmUgaXMgYSBOZXh0LmpzIGJ1ZyB3aGVyZSBQcm9taXNlcyBwYXNzZWQgYnkgc2VydmVyIGNvbXBvbmVudHMgcmV0dXJuIGB1bmRlZmluZWRgIGFzIHRoZWlyIGB0aGVuYCB2YWx1ZSwgc28gd3JhcCBpdCBpbiBhIG5vcm1hbCBwcm9taXNlXG4gICAgYXBwW3N0YWNrQXBwSW50ZXJuYWxzU3ltYm9sXS5zZXRDdXJyZW50VXNlcihwcm9taXNlKTtcbiAgfSwgW10pO1xuICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/providers/stack-provider-client.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/utils/url.js":
/*!**************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/utils/url.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   constructRedirectUrl: () => (/* binding */ constructRedirectUrl)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/errors */ \"(app-pages-browser)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n// src/utils/url.ts\n\nfunction constructRedirectUrl(redirectUrl, callbackUrlName) {\n  if (typeof window === \"undefined\" || !window.location) {\n    throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`${callbackUrlName} option is required in a non-browser environment.`, { redirectUrl });\n  }\n  const retainedQueryParams = [\"after_auth_return_to\"];\n  const currentUrl = new URL(window.location.href);\n  const url = redirectUrl ? new URL(redirectUrl, window.location.href) : new URL(window.location.href);\n  for (const param of retainedQueryParams) {\n    if (currentUrl.searchParams.has(param)) {\n      url.searchParams.set(param, currentUrl.searchParams.get(param));\n    }\n  }\n  url.hash = \"\";\n  return url.toString();\n}\n\n//# sourceMappingURL=url.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS91dGlscy91cmwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNpRjtBQUNqRjtBQUNBO0FBQ0EsY0FBYywyRkFBbUIsSUFBSSxpQkFBaUIscURBQXFELGFBQWE7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXEBzdGFja2ZyYW1lXFxzdGFja1xcZGlzdFxcZXNtXFx1dGlsc1xcdXJsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy91cmwudHNcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZXJyb3JzXCI7XG5mdW5jdGlvbiBjb25zdHJ1Y3RSZWRpcmVjdFVybChyZWRpcmVjdFVybCwgY2FsbGJhY2tVcmxOYW1lKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICF3aW5kb3cubG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgJHtjYWxsYmFja1VybE5hbWV9IG9wdGlvbiBpcyByZXF1aXJlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50LmAsIHsgcmVkaXJlY3RVcmwgfSk7XG4gIH1cbiAgY29uc3QgcmV0YWluZWRRdWVyeVBhcmFtcyA9IFtcImFmdGVyX2F1dGhfcmV0dXJuX3RvXCJdO1xuICBjb25zdCBjdXJyZW50VXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gIGNvbnN0IHVybCA9IHJlZGlyZWN0VXJsID8gbmV3IFVSTChyZWRpcmVjdFVybCwgd2luZG93LmxvY2F0aW9uLmhyZWYpIDogbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gIGZvciAoY29uc3QgcGFyYW0gb2YgcmV0YWluZWRRdWVyeVBhcmFtcykge1xuICAgIGlmIChjdXJyZW50VXJsLnNlYXJjaFBhcmFtcy5oYXMocGFyYW0pKSB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChwYXJhbSwgY3VycmVudFVybC5zZWFyY2hQYXJhbXMuZ2V0KHBhcmFtKSk7XG4gICAgfVxuICB9XG4gIHVybC5oYXNoID0gXCJcIjtcbiAgcmV0dXJuIHVybC50b1N0cmluZygpO1xufVxuZXhwb3J0IHtcbiAgY29uc3RydWN0UmVkaXJlY3RVcmxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cmwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/utils/url.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/async-mutex/index.mjs":
/*!********************************************!*\
  !*** ./node_modules/async-mutex/index.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   E_ALREADY_LOCKED: () => (/* binding */ E_ALREADY_LOCKED),\n/* harmony export */   E_CANCELED: () => (/* binding */ E_CANCELED),\n/* harmony export */   E_TIMEOUT: () => (/* binding */ E_TIMEOUT),\n/* harmony export */   Mutex: () => (/* binding */ Mutex),\n/* harmony export */   Semaphore: () => (/* binding */ Semaphore),\n/* harmony export */   tryAcquire: () => (/* binding */ tryAcquire),\n/* harmony export */   withTimeout: () => (/* binding */ withTimeout)\n/* harmony export */ });\nconst E_TIMEOUT = new Error('timeout while waiting for mutex to become available');\nconst E_ALREADY_LOCKED = new Error('mutex already locked');\nconst E_CANCELED = new Error('request for lock canceled');\n\nvar __awaiter$2 = ( false) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Semaphore {\n    constructor(_value, _cancelError = E_CANCELED) {\n        this._value = _value;\n        this._cancelError = _cancelError;\n        this._queue = [];\n        this._weightedWaiters = [];\n    }\n    acquire(weight = 1, priority = 0) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        return new Promise((resolve, reject) => {\n            const task = { resolve, reject, weight, priority };\n            const i = findIndexFromEnd(this._queue, (other) => priority <= other.priority);\n            if (i === -1 && weight <= this._value) {\n                // Needs immediate dispatch, skip the queue\n                this._dispatchItem(task);\n            }\n            else {\n                this._queue.splice(i + 1, 0, task);\n            }\n        });\n    }\n    runExclusive(callback_1) {\n        return __awaiter$2(this, arguments, void 0, function* (callback, weight = 1, priority = 0) {\n            const [value, release] = yield this.acquire(weight, priority);\n            try {\n                return yield callback(value);\n            }\n            finally {\n                release();\n            }\n        });\n    }\n    waitForUnlock(weight = 1, priority = 0) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        if (this._couldLockImmediately(weight, priority)) {\n            return Promise.resolve();\n        }\n        else {\n            return new Promise((resolve) => {\n                if (!this._weightedWaiters[weight - 1])\n                    this._weightedWaiters[weight - 1] = [];\n                insertSorted(this._weightedWaiters[weight - 1], { resolve, priority });\n            });\n        }\n    }\n    isLocked() {\n        return this._value <= 0;\n    }\n    getValue() {\n        return this._value;\n    }\n    setValue(value) {\n        this._value = value;\n        this._dispatchQueue();\n    }\n    release(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        this._value += weight;\n        this._dispatchQueue();\n    }\n    cancel() {\n        this._queue.forEach((entry) => entry.reject(this._cancelError));\n        this._queue = [];\n    }\n    _dispatchQueue() {\n        this._drainUnlockWaiters();\n        while (this._queue.length > 0 && this._queue[0].weight <= this._value) {\n            this._dispatchItem(this._queue.shift());\n            this._drainUnlockWaiters();\n        }\n    }\n    _dispatchItem(item) {\n        const previousValue = this._value;\n        this._value -= item.weight;\n        item.resolve([previousValue, this._newReleaser(item.weight)]);\n    }\n    _newReleaser(weight) {\n        let called = false;\n        return () => {\n            if (called)\n                return;\n            called = true;\n            this.release(weight);\n        };\n    }\n    _drainUnlockWaiters() {\n        if (this._queue.length === 0) {\n            for (let weight = this._value; weight > 0; weight--) {\n                const waiters = this._weightedWaiters[weight - 1];\n                if (!waiters)\n                    continue;\n                waiters.forEach((waiter) => waiter.resolve());\n                this._weightedWaiters[weight - 1] = [];\n            }\n        }\n        else {\n            const queuedPriority = this._queue[0].priority;\n            for (let weight = this._value; weight > 0; weight--) {\n                const waiters = this._weightedWaiters[weight - 1];\n                if (!waiters)\n                    continue;\n                const i = waiters.findIndex((waiter) => waiter.priority <= queuedPriority);\n                (i === -1 ? waiters : waiters.splice(0, i))\n                    .forEach((waiter => waiter.resolve()));\n            }\n        }\n    }\n    _couldLockImmediately(weight, priority) {\n        return (this._queue.length === 0 || this._queue[0].priority < priority) &&\n            weight <= this._value;\n    }\n}\nfunction insertSorted(a, v) {\n    const i = findIndexFromEnd(a, (other) => v.priority <= other.priority);\n    a.splice(i + 1, 0, v);\n}\nfunction findIndexFromEnd(a, predicate) {\n    for (let i = a.length - 1; i >= 0; i--) {\n        if (predicate(a[i])) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nvar __awaiter$1 = ( false) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Mutex {\n    constructor(cancelError) {\n        this._semaphore = new Semaphore(1, cancelError);\n    }\n    acquire() {\n        return __awaiter$1(this, arguments, void 0, function* (priority = 0) {\n            const [, releaser] = yield this._semaphore.acquire(1, priority);\n            return releaser;\n        });\n    }\n    runExclusive(callback, priority = 0) {\n        return this._semaphore.runExclusive(() => callback(), 1, priority);\n    }\n    isLocked() {\n        return this._semaphore.isLocked();\n    }\n    waitForUnlock(priority = 0) {\n        return this._semaphore.waitForUnlock(1, priority);\n    }\n    release() {\n        if (this._semaphore.isLocked())\n            this._semaphore.release();\n    }\n    cancel() {\n        return this._semaphore.cancel();\n    }\n}\n\nvar __awaiter = ( false) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction withTimeout(sync, timeout, timeoutError = E_TIMEOUT) {\n    return {\n        acquire: (weightOrPriority, priority) => {\n            let weight;\n            if (isSemaphore(sync)) {\n                weight = weightOrPriority;\n            }\n            else {\n                weight = undefined;\n                priority = weightOrPriority;\n            }\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                let isTimeout = false;\n                const handle = setTimeout(() => {\n                    isTimeout = true;\n                    reject(timeoutError);\n                }, timeout);\n                try {\n                    const ticket = yield (isSemaphore(sync)\n                        ? sync.acquire(weight, priority)\n                        : sync.acquire(priority));\n                    if (isTimeout) {\n                        const release = Array.isArray(ticket) ? ticket[1] : ticket;\n                        release();\n                    }\n                    else {\n                        clearTimeout(handle);\n                        resolve(ticket);\n                    }\n                }\n                catch (e) {\n                    if (!isTimeout) {\n                        clearTimeout(handle);\n                        reject(e);\n                    }\n                }\n            }));\n        },\n        runExclusive(callback, weight, priority) {\n            return __awaiter(this, void 0, void 0, function* () {\n                let release = () => undefined;\n                try {\n                    const ticket = yield this.acquire(weight, priority);\n                    if (Array.isArray(ticket)) {\n                        release = ticket[1];\n                        return yield callback(ticket[0]);\n                    }\n                    else {\n                        release = ticket;\n                        return yield callback();\n                    }\n                }\n                finally {\n                    release();\n                }\n            });\n        },\n        release(weight) {\n            sync.release(weight);\n        },\n        cancel() {\n            return sync.cancel();\n        },\n        waitForUnlock: (weightOrPriority, priority) => {\n            let weight;\n            if (isSemaphore(sync)) {\n                weight = weightOrPriority;\n            }\n            else {\n                weight = undefined;\n                priority = weightOrPriority;\n            }\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => {\n                const handle = setTimeout(() => reject(timeoutError), timeout);\n                (isSemaphore(sync)\n                    ? sync.waitForUnlock(weight, priority)\n                    : sync.waitForUnlock(priority)).then(() => {\n                    clearTimeout(handle);\n                    resolve();\n                });\n            });\n        },\n        isLocked: () => sync.isLocked(),\n        getValue: () => sync.getValue(),\n        setValue: (value) => sync.setValue(value),\n    };\n}\nfunction isSemaphore(sync) {\n    return sync.getValue !== undefined;\n}\n\n// eslint-disable-next-lisne @typescript-eslint/explicit-module-boundary-types\nfunction tryAcquire(sync, alreadyAcquiredError = E_ALREADY_LOCKED) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return withTimeout(sync, 0, alreadyAcquiredError);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9hc3luYy1tdXRleC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsTUFBZ0M7QUFDbkQsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsT0FBTztBQUNyRDtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxPQUFPO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLG1CQUFtQjtBQUNyRixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxPQUFPO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixNQUFnQztBQUNuRCw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQixNQUFnQztBQUNqRCw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxPQUFPO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELE9BQU87QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFOEYiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxhc3luYy1tdXRleFxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVfVElNRU9VVCA9IG5ldyBFcnJvcigndGltZW91dCB3aGlsZSB3YWl0aW5nIGZvciBtdXRleCB0byBiZWNvbWUgYXZhaWxhYmxlJyk7XG5jb25zdCBFX0FMUkVBRFlfTE9DS0VEID0gbmV3IEVycm9yKCdtdXRleCBhbHJlYWR5IGxvY2tlZCcpO1xuY29uc3QgRV9DQU5DRUxFRCA9IG5ldyBFcnJvcigncmVxdWVzdCBmb3IgbG9jayBjYW5jZWxlZCcpO1xuXG52YXIgX19hd2FpdGVyJDIgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmNsYXNzIFNlbWFwaG9yZSB7XG4gICAgY29uc3RydWN0b3IoX3ZhbHVlLCBfY2FuY2VsRXJyb3IgPSBFX0NBTkNFTEVEKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gX3ZhbHVlO1xuICAgICAgICB0aGlzLl9jYW5jZWxFcnJvciA9IF9jYW5jZWxFcnJvcjtcbiAgICAgICAgdGhpcy5fcXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzID0gW107XG4gICAgfVxuICAgIGFjcXVpcmUod2VpZ2h0ID0gMSwgcHJpb3JpdHkgPSAwKSB7XG4gICAgICAgIGlmICh3ZWlnaHQgPD0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCB3ZWlnaHQgJHt3ZWlnaHR9OiBtdXN0IGJlIHBvc2l0aXZlYCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXNrID0geyByZXNvbHZlLCByZWplY3QsIHdlaWdodCwgcHJpb3JpdHkgfTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBmaW5kSW5kZXhGcm9tRW5kKHRoaXMuX3F1ZXVlLCAob3RoZXIpID0+IHByaW9yaXR5IDw9IG90aGVyLnByaW9yaXR5KTtcbiAgICAgICAgICAgIGlmIChpID09PSAtMSAmJiB3ZWlnaHQgPD0gdGhpcy5fdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAvLyBOZWVkcyBpbW1lZGlhdGUgZGlzcGF0Y2gsIHNraXAgdGhlIHF1ZXVlXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2hJdGVtKHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcXVldWUuc3BsaWNlKGkgKyAxLCAwLCB0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJ1bkV4Y2x1c2l2ZShjYWxsYmFja18xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIkMih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24qIChjYWxsYmFjaywgd2VpZ2h0ID0gMSwgcHJpb3JpdHkgPSAwKSB7XG4gICAgICAgICAgICBjb25zdCBbdmFsdWUsIHJlbGVhc2VdID0geWllbGQgdGhpcy5hY3F1aXJlKHdlaWdodCwgcHJpb3JpdHkpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgY2FsbGJhY2sodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgcmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgd2FpdEZvclVubG9jayh3ZWlnaHQgPSAxLCBwcmlvcml0eSA9IDApIHtcbiAgICAgICAgaWYgKHdlaWdodCA8PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgaWYgKHRoaXMuX2NvdWxkTG9ja0ltbWVkaWF0ZWx5KHdlaWdodCwgcHJpb3JpdHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdID0gW107XG4gICAgICAgICAgICAgICAgaW5zZXJ0U29ydGVkKHRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXSwgeyByZXNvbHZlLCBwcmlvcml0eSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzTG9ja2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWUgPD0gMDtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2hRdWV1ZSgpO1xuICAgIH1cbiAgICByZWxlYXNlKHdlaWdodCA9IDEpIHtcbiAgICAgICAgaWYgKHdlaWdodCA8PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgKz0gd2VpZ2h0O1xuICAgICAgICB0aGlzLl9kaXNwYXRjaFF1ZXVlKCk7XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgdGhpcy5fcXVldWUuZm9yRWFjaCgoZW50cnkpID0+IGVudHJ5LnJlamVjdCh0aGlzLl9jYW5jZWxFcnJvcikpO1xuICAgICAgICB0aGlzLl9xdWV1ZSA9IFtdO1xuICAgIH1cbiAgICBfZGlzcGF0Y2hRdWV1ZSgpIHtcbiAgICAgICAgdGhpcy5fZHJhaW5VbmxvY2tXYWl0ZXJzKCk7XG4gICAgICAgIHdoaWxlICh0aGlzLl9xdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMuX3F1ZXVlWzBdLndlaWdodCA8PSB0aGlzLl92YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2hJdGVtKHRoaXMuX3F1ZXVlLnNoaWZ0KCkpO1xuICAgICAgICAgICAgdGhpcy5fZHJhaW5VbmxvY2tXYWl0ZXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2Rpc3BhdGNoSXRlbShpdGVtKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSB0aGlzLl92YWx1ZTtcbiAgICAgICAgdGhpcy5fdmFsdWUgLT0gaXRlbS53ZWlnaHQ7XG4gICAgICAgIGl0ZW0ucmVzb2x2ZShbcHJldmlvdXNWYWx1ZSwgdGhpcy5fbmV3UmVsZWFzZXIoaXRlbS53ZWlnaHQpXSk7XG4gICAgfVxuICAgIF9uZXdSZWxlYXNlcih3ZWlnaHQpIHtcbiAgICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNhbGxlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZWxlYXNlKHdlaWdodCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIF9kcmFpblVubG9ja1dhaXRlcnMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IHdlaWdodCA9IHRoaXMuX3ZhbHVlOyB3ZWlnaHQgPiAwOyB3ZWlnaHQtLSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdhaXRlcnMgPSB0aGlzLl93ZWlnaHRlZFdhaXRlcnNbd2VpZ2h0IC0gMV07XG4gICAgICAgICAgICAgICAgaWYgKCF3YWl0ZXJzKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB3YWl0ZXJzLmZvckVhY2goKHdhaXRlcikgPT4gd2FpdGVyLnJlc29sdmUoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBxdWV1ZWRQcmlvcml0eSA9IHRoaXMuX3F1ZXVlWzBdLnByaW9yaXR5O1xuICAgICAgICAgICAgZm9yIChsZXQgd2VpZ2h0ID0gdGhpcy5fdmFsdWU7IHdlaWdodCA+IDA7IHdlaWdodC0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2FpdGVycyA9IHRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXTtcbiAgICAgICAgICAgICAgICBpZiAoIXdhaXRlcnMpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB3YWl0ZXJzLmZpbmRJbmRleCgod2FpdGVyKSA9PiB3YWl0ZXIucHJpb3JpdHkgPD0gcXVldWVkUHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIChpID09PSAtMSA/IHdhaXRlcnMgOiB3YWl0ZXJzLnNwbGljZSgwLCBpKSlcbiAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goKHdhaXRlciA9PiB3YWl0ZXIucmVzb2x2ZSgpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2NvdWxkTG9ja0ltbWVkaWF0ZWx5KHdlaWdodCwgcHJpb3JpdHkpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9xdWV1ZS5sZW5ndGggPT09IDAgfHwgdGhpcy5fcXVldWVbMF0ucHJpb3JpdHkgPCBwcmlvcml0eSkgJiZcbiAgICAgICAgICAgIHdlaWdodCA8PSB0aGlzLl92YWx1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbnNlcnRTb3J0ZWQoYSwgdikge1xuICAgIGNvbnN0IGkgPSBmaW5kSW5kZXhGcm9tRW5kKGEsIChvdGhlcikgPT4gdi5wcmlvcml0eSA8PSBvdGhlci5wcmlvcml0eSk7XG4gICAgYS5zcGxpY2UoaSArIDEsIDAsIHYpO1xufVxuZnVuY3Rpb24gZmluZEluZGV4RnJvbUVuZChhLCBwcmVkaWNhdGUpIHtcbiAgICBmb3IgKGxldCBpID0gYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAocHJlZGljYXRlKGFbaV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5cbnZhciBfX2F3YWl0ZXIkMSA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuY2xhc3MgTXV0ZXgge1xuICAgIGNvbnN0cnVjdG9yKGNhbmNlbEVycm9yKSB7XG4gICAgICAgIHRoaXMuX3NlbWFwaG9yZSA9IG5ldyBTZW1hcGhvcmUoMSwgY2FuY2VsRXJyb3IpO1xuICAgIH1cbiAgICBhY3F1aXJlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyJDEodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uKiAocHJpb3JpdHkgPSAwKSB7XG4gICAgICAgICAgICBjb25zdCBbLCByZWxlYXNlcl0gPSB5aWVsZCB0aGlzLl9zZW1hcGhvcmUuYWNxdWlyZSgxLCBwcmlvcml0eSk7XG4gICAgICAgICAgICByZXR1cm4gcmVsZWFzZXI7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBydW5FeGNsdXNpdmUoY2FsbGJhY2ssIHByaW9yaXR5ID0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VtYXBob3JlLnJ1bkV4Y2x1c2l2ZSgoKSA9PiBjYWxsYmFjaygpLCAxLCBwcmlvcml0eSk7XG4gICAgfVxuICAgIGlzTG9ja2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VtYXBob3JlLmlzTG9ja2VkKCk7XG4gICAgfVxuICAgIHdhaXRGb3JVbmxvY2socHJpb3JpdHkgPSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW1hcGhvcmUud2FpdEZvclVubG9jaygxLCBwcmlvcml0eSk7XG4gICAgfVxuICAgIHJlbGVhc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9zZW1hcGhvcmUuaXNMb2NrZWQoKSlcbiAgICAgICAgICAgIHRoaXMuX3NlbWFwaG9yZS5yZWxlYXNlKCk7XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbWFwaG9yZS5jYW5jZWwoKTtcbiAgICB9XG59XG5cbnZhciBfX2F3YWl0ZXIgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmZ1bmN0aW9uIHdpdGhUaW1lb3V0KHN5bmMsIHRpbWVvdXQsIHRpbWVvdXRFcnJvciA9IEVfVElNRU9VVCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGFjcXVpcmU6ICh3ZWlnaHRPclByaW9yaXR5LCBwcmlvcml0eSkgPT4ge1xuICAgICAgICAgICAgbGV0IHdlaWdodDtcbiAgICAgICAgICAgIGlmIChpc1NlbWFwaG9yZShzeW5jKSkge1xuICAgICAgICAgICAgICAgIHdlaWdodCA9IHdlaWdodE9yUHJpb3JpdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB3ZWlnaHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgcHJpb3JpdHkgPSB3ZWlnaHRPclByaW9yaXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdlaWdodCAhPT0gdW5kZWZpbmVkICYmIHdlaWdodCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlzVGltZW91dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpc1RpbWVvdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QodGltZW91dEVycm9yKTtcbiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aWNrZXQgPSB5aWVsZCAoaXNTZW1hcGhvcmUoc3luYylcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3luYy5hY3F1aXJlKHdlaWdodCwgcHJpb3JpdHkpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHN5bmMuYWNxdWlyZShwcmlvcml0eSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWxlYXNlID0gQXJyYXkuaXNBcnJheSh0aWNrZXQpID8gdGlja2V0WzFdIDogdGlja2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsZWFzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRpY2tldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1RpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LFxuICAgICAgICBydW5FeGNsdXNpdmUoY2FsbGJhY2ssIHdlaWdodCwgcHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlbGVhc2UgPSAoKSA9PiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlja2V0ID0geWllbGQgdGhpcy5hY3F1aXJlKHdlaWdodCwgcHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aWNrZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxlYXNlID0gdGlja2V0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIGNhbGxiYWNrKHRpY2tldFswXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxlYXNlID0gdGlja2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVsZWFzZSh3ZWlnaHQpIHtcbiAgICAgICAgICAgIHN5bmMucmVsZWFzZSh3ZWlnaHQpO1xuICAgICAgICB9LFxuICAgICAgICBjYW5jZWwoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3luYy5jYW5jZWwoKTtcbiAgICAgICAgfSxcbiAgICAgICAgd2FpdEZvclVubG9jazogKHdlaWdodE9yUHJpb3JpdHksIHByaW9yaXR5KSA9PiB7XG4gICAgICAgICAgICBsZXQgd2VpZ2h0O1xuICAgICAgICAgICAgaWYgKGlzU2VtYXBob3JlKHN5bmMpKSB7XG4gICAgICAgICAgICAgICAgd2VpZ2h0ID0gd2VpZ2h0T3JQcmlvcml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdlaWdodCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBwcmlvcml0eSA9IHdlaWdodE9yUHJpb3JpdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2VpZ2h0ICE9PSB1bmRlZmluZWQgJiYgd2VpZ2h0IDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgd2VpZ2h0ICR7d2VpZ2h0fTogbXVzdCBiZSBwb3NpdGl2ZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGUgPSBzZXRUaW1lb3V0KCgpID0+IHJlamVjdCh0aW1lb3V0RXJyb3IpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAoaXNTZW1hcGhvcmUoc3luYylcbiAgICAgICAgICAgICAgICAgICAgPyBzeW5jLndhaXRGb3JVbmxvY2sod2VpZ2h0LCBwcmlvcml0eSlcbiAgICAgICAgICAgICAgICAgICAgOiBzeW5jLndhaXRGb3JVbmxvY2socHJpb3JpdHkpKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBpc0xvY2tlZDogKCkgPT4gc3luYy5pc0xvY2tlZCgpLFxuICAgICAgICBnZXRWYWx1ZTogKCkgPT4gc3luYy5nZXRWYWx1ZSgpLFxuICAgICAgICBzZXRWYWx1ZTogKHZhbHVlKSA9PiBzeW5jLnNldFZhbHVlKHZhbHVlKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gaXNTZW1hcGhvcmUoc3luYykge1xuICAgIHJldHVybiBzeW5jLmdldFZhbHVlICE9PSB1bmRlZmluZWQ7XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGlzbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlc1xuZnVuY3Rpb24gdHJ5QWNxdWlyZShzeW5jLCBhbHJlYWR5QWNxdWlyZWRFcnJvciA9IEVfQUxSRUFEWV9MT0NLRUQpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiB3aXRoVGltZW91dChzeW5jLCAwLCBhbHJlYWR5QWNxdWlyZWRFcnJvcik7XG59XG5cbmV4cG9ydCB7IEVfQUxSRUFEWV9MT0NLRUQsIEVfQ0FOQ0VMRUQsIEVfVElNRU9VVCwgTXV0ZXgsIFNlbWFwaG9yZSwgdHJ5QWNxdWlyZSwgd2l0aFRpbWVvdXQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/async-mutex/index.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/cookie/index.js":
/*!**************************************!*\
  !*** ./node_modules/cookie/index.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n\n\n/**\n * Module exports.\n * @public\n */\n\nexports.parse = parse;\nexports.serialize = serialize;\n\n/**\n * Module variables.\n * @private\n */\n\nvar __toString = Object.prototype.toString\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(str, options) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = {}\n  var opt = options || {};\n  var dec = opt.decode || decode;\n\n  var index = 0\n  while (index < str.length) {\n    var eqIdx = str.indexOf('=', index)\n\n    // no more cookie pairs\n    if (eqIdx === -1) {\n      break\n    }\n\n    var endIdx = str.indexOf(';', index)\n\n    if (endIdx === -1) {\n      endIdx = str.length\n    } else if (endIdx < eqIdx) {\n      // backtrack on prior semicolon\n      index = str.lastIndexOf(';', eqIdx - 1) + 1\n      continue\n    }\n\n    var key = str.slice(index, eqIdx).trim()\n\n    // only assign once\n    if (undefined === obj[key]) {\n      var val = str.slice(eqIdx + 1, endIdx).trim()\n\n      // quoted values\n      if (val.charCodeAt(0) === 0x22) {\n        val = val.slice(1, -1)\n      }\n\n      obj[key] = tryDecode(val, dec);\n    }\n\n    index = endIdx + 1\n  }\n\n  return obj;\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\n\nfunction serialize(name, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  var value = enc(val);\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n\n  var str = name + '=' + value;\n\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n\n    if (isNaN(maxAge) || !isFinite(maxAge)) {\n      throw new TypeError('option maxAge is invalid')\n    }\n\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n\n    str += '; Domain=' + opt.domain;\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n\n    str += '; Path=' + opt.path;\n  }\n\n  if (opt.expires) {\n    var expires = opt.expires\n\n    if (!isDate(expires) || isNaN(expires.valueOf())) {\n      throw new TypeError('option expires is invalid');\n    }\n\n    str += '; Expires=' + expires.toUTCString()\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n\n  if (opt.secure) {\n    str += '; Secure';\n  }\n\n  if (opt.partitioned) {\n    str += '; Partitioned'\n  }\n\n  if (opt.priority) {\n    var priority = typeof opt.priority === 'string'\n      ? opt.priority.toLowerCase()\n      : opt.priority\n\n    switch (priority) {\n      case 'low':\n        str += '; Priority=Low'\n        break\n      case 'medium':\n        str += '; Priority=Medium'\n        break\n      case 'high':\n        str += '; Priority=High'\n        break\n      default:\n        throw new TypeError('option priority is invalid')\n    }\n  }\n\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string'\n      ? opt.sameSite.toLowerCase() : opt.sameSite;\n\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n\n  return str;\n}\n\n/**\n * URL-decode string value. Optimized to skip native call when no %.\n *\n * @param {string} str\n * @returns {string}\n */\n\nfunction decode (str) {\n  return str.indexOf('%') !== -1\n    ? decodeURIComponent(str)\n    : str\n}\n\n/**\n * URL-encode value.\n *\n * @param {string} val\n * @returns {string}\n */\n\nfunction encode (val) {\n  return encodeURIComponent(val)\n}\n\n/**\n * Determine if value is a Date.\n *\n * @param {*} val\n * @private\n */\n\nfunction isDate (val) {\n  return __toString.call(val) === '[object Date]' ||\n    val instanceof Date\n}\n\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\nfunction tryDecode(str, decode) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9jb29raWUvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhOztBQUViO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWE7QUFDYixpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwrQkFBK0I7O0FBRS9CO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQjtBQUM3QyxrQkFBa0I7QUFDbEI7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYztBQUNkOztBQUVBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFVBQVU7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29va2llXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGNvb2tpZVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBSb21hbiBTaHR5bG1hblxuICogQ29weXJpZ2h0KGMpIDIwMTUgRG91Z2xhcyBDaHJpc3RvcGhlciBXaWxzb25cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqIEBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gcGFyc2U7XG5leHBvcnRzLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcblxuLyoqXG4gKiBNb2R1bGUgdmFyaWFibGVzLlxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgX190b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcblxuLyoqXG4gKiBSZWdFeHAgdG8gbWF0Y2ggZmllbGQtY29udGVudCBpbiBSRkMgNzIzMCBzZWMgMy4yXG4gKlxuICogZmllbGQtY29udGVudCA9IGZpZWxkLXZjaGFyIFsgMSooIFNQIC8gSFRBQiApIGZpZWxkLXZjaGFyIF1cbiAqIGZpZWxkLXZjaGFyICAgPSBWQ0hBUiAvIG9icy10ZXh0XG4gKiBvYnMtdGV4dCAgICAgID0gJXg4MC1GRlxuICovXG5cbnZhciBmaWVsZENvbnRlbnRSZWdFeHAgPSAvXltcXHUwMDA5XFx1MDAyMC1cXHUwMDdlXFx1MDA4MC1cXHUwMGZmXSskLztcblxuLyoqXG4gKiBQYXJzZSBhIGNvb2tpZSBoZWFkZXIuXG4gKlxuICogUGFyc2UgdGhlIGdpdmVuIGNvb2tpZSBoZWFkZXIgc3RyaW5nIGludG8gYW4gb2JqZWN0XG4gKiBUaGUgb2JqZWN0IGhhcyB0aGUgdmFyaW91cyBjb29raWVzIGFzIGtleXMobmFtZXMpID0+IHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAqIEByZXR1cm4ge29iamVjdH1cbiAqIEBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIsIG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgc3RyIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuXG4gIHZhciBvYmogPSB7fVxuICB2YXIgb3B0ID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGRlYyA9IG9wdC5kZWNvZGUgfHwgZGVjb2RlO1xuXG4gIHZhciBpbmRleCA9IDBcbiAgd2hpbGUgKGluZGV4IDwgc3RyLmxlbmd0aCkge1xuICAgIHZhciBlcUlkeCA9IHN0ci5pbmRleE9mKCc9JywgaW5kZXgpXG5cbiAgICAvLyBubyBtb3JlIGNvb2tpZSBwYWlyc1xuICAgIGlmIChlcUlkeCA9PT0gLTEpIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgdmFyIGVuZElkeCA9IHN0ci5pbmRleE9mKCc7JywgaW5kZXgpXG5cbiAgICBpZiAoZW5kSWR4ID09PSAtMSkge1xuICAgICAgZW5kSWR4ID0gc3RyLmxlbmd0aFxuICAgIH0gZWxzZSBpZiAoZW5kSWR4IDwgZXFJZHgpIHtcbiAgICAgIC8vIGJhY2t0cmFjayBvbiBwcmlvciBzZW1pY29sb25cbiAgICAgIGluZGV4ID0gc3RyLmxhc3RJbmRleE9mKCc7JywgZXFJZHggLSAxKSArIDFcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgdmFyIGtleSA9IHN0ci5zbGljZShpbmRleCwgZXFJZHgpLnRyaW0oKVxuXG4gICAgLy8gb25seSBhc3NpZ24gb25jZVxuICAgIGlmICh1bmRlZmluZWQgPT09IG9ialtrZXldKSB7XG4gICAgICB2YXIgdmFsID0gc3RyLnNsaWNlKGVxSWR4ICsgMSwgZW5kSWR4KS50cmltKClcblxuICAgICAgLy8gcXVvdGVkIHZhbHVlc1xuICAgICAgaWYgKHZhbC5jaGFyQ29kZUF0KDApID09PSAweDIyKSB7XG4gICAgICAgIHZhbCA9IHZhbC5zbGljZSgxLCAtMSlcbiAgICAgIH1cblxuICAgICAgb2JqW2tleV0gPSB0cnlEZWNvZGUodmFsLCBkZWMpO1xuICAgIH1cblxuICAgIGluZGV4ID0gZW5kSWR4ICsgMVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBTZXJpYWxpemUgZGF0YSBpbnRvIGEgY29va2llIGhlYWRlci5cbiAqXG4gKiBTZXJpYWxpemUgdGhlIGEgbmFtZSB2YWx1ZSBwYWlyIGludG8gYSBjb29raWUgc3RyaW5nIHN1aXRhYmxlIGZvclxuICogaHR0cCBoZWFkZXJzLiBBbiBvcHRpb25hbCBvcHRpb25zIG9iamVjdCBzcGVjaWZpZWQgY29va2llIHBhcmFtZXRlcnMuXG4gKlxuICogc2VyaWFsaXplKCdmb28nLCAnYmFyJywgeyBodHRwT25seTogdHJ1ZSB9KVxuICogICA9PiBcImZvbz1iYXI7IGh0dHBPbmx5XCJcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHZhbFxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShuYW1lLCB2YWwsIG9wdGlvbnMpIHtcbiAgdmFyIG9wdCA9IG9wdGlvbnMgfHwge307XG4gIHZhciBlbmMgPSBvcHQuZW5jb2RlIHx8IGVuY29kZTtcblxuICBpZiAodHlwZW9mIGVuYyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbiBlbmNvZGUgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgaWYgKCFmaWVsZENvbnRlbnRSZWdFeHAudGVzdChuYW1lKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2FyZ3VtZW50IG5hbWUgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgdmFyIHZhbHVlID0gZW5jKHZhbCk7XG5cbiAgaWYgKHZhbHVlICYmICFmaWVsZENvbnRlbnRSZWdFeHAudGVzdCh2YWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhcmd1bWVudCB2YWwgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgdmFyIHN0ciA9IG5hbWUgKyAnPScgKyB2YWx1ZTtcblxuICBpZiAobnVsbCAhPSBvcHQubWF4QWdlKSB7XG4gICAgdmFyIG1heEFnZSA9IG9wdC5tYXhBZ2UgLSAwO1xuXG4gICAgaWYgKGlzTmFOKG1heEFnZSkgfHwgIWlzRmluaXRlKG1heEFnZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbiBtYXhBZ2UgaXMgaW52YWxpZCcpXG4gICAgfVxuXG4gICAgc3RyICs9ICc7IE1heC1BZ2U9JyArIE1hdGguZmxvb3IobWF4QWdlKTtcbiAgfVxuXG4gIGlmIChvcHQuZG9tYWluKSB7XG4gICAgaWYgKCFmaWVsZENvbnRlbnRSZWdFeHAudGVzdChvcHQuZG9tYWluKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uIGRvbWFpbiBpcyBpbnZhbGlkJyk7XG4gICAgfVxuXG4gICAgc3RyICs9ICc7IERvbWFpbj0nICsgb3B0LmRvbWFpbjtcbiAgfVxuXG4gIGlmIChvcHQucGF0aCkge1xuICAgIGlmICghZmllbGRDb250ZW50UmVnRXhwLnRlc3Qob3B0LnBhdGgpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb24gcGF0aCBpcyBpbnZhbGlkJyk7XG4gICAgfVxuXG4gICAgc3RyICs9ICc7IFBhdGg9JyArIG9wdC5wYXRoO1xuICB9XG5cbiAgaWYgKG9wdC5leHBpcmVzKSB7XG4gICAgdmFyIGV4cGlyZXMgPSBvcHQuZXhwaXJlc1xuXG4gICAgaWYgKCFpc0RhdGUoZXhwaXJlcykgfHwgaXNOYU4oZXhwaXJlcy52YWx1ZU9mKCkpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb24gZXhwaXJlcyBpcyBpbnZhbGlkJyk7XG4gICAgfVxuXG4gICAgc3RyICs9ICc7IEV4cGlyZXM9JyArIGV4cGlyZXMudG9VVENTdHJpbmcoKVxuICB9XG5cbiAgaWYgKG9wdC5odHRwT25seSkge1xuICAgIHN0ciArPSAnOyBIdHRwT25seSc7XG4gIH1cblxuICBpZiAob3B0LnNlY3VyZSkge1xuICAgIHN0ciArPSAnOyBTZWN1cmUnO1xuICB9XG5cbiAgaWYgKG9wdC5wYXJ0aXRpb25lZCkge1xuICAgIHN0ciArPSAnOyBQYXJ0aXRpb25lZCdcbiAgfVxuXG4gIGlmIChvcHQucHJpb3JpdHkpIHtcbiAgICB2YXIgcHJpb3JpdHkgPSB0eXBlb2Ygb3B0LnByaW9yaXR5ID09PSAnc3RyaW5nJ1xuICAgICAgPyBvcHQucHJpb3JpdHkudG9Mb3dlckNhc2UoKVxuICAgICAgOiBvcHQucHJpb3JpdHlcblxuICAgIHN3aXRjaCAocHJpb3JpdHkpIHtcbiAgICAgIGNhc2UgJ2xvdyc6XG4gICAgICAgIHN0ciArPSAnOyBQcmlvcml0eT1Mb3cnXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgICBzdHIgKz0gJzsgUHJpb3JpdHk9TWVkaXVtJ1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaGlnaCc6XG4gICAgICAgIHN0ciArPSAnOyBQcmlvcml0eT1IaWdoJ1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uIHByaW9yaXR5IGlzIGludmFsaWQnKVxuICAgIH1cbiAgfVxuXG4gIGlmIChvcHQuc2FtZVNpdGUpIHtcbiAgICB2YXIgc2FtZVNpdGUgPSB0eXBlb2Ygb3B0LnNhbWVTaXRlID09PSAnc3RyaW5nJ1xuICAgICAgPyBvcHQuc2FtZVNpdGUudG9Mb3dlckNhc2UoKSA6IG9wdC5zYW1lU2l0ZTtcblxuICAgIHN3aXRjaCAoc2FtZVNpdGUpIHtcbiAgICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgc3RyICs9ICc7IFNhbWVTaXRlPVN0cmljdCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbGF4JzpcbiAgICAgICAgc3RyICs9ICc7IFNhbWVTaXRlPUxheCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3RyaWN0JzpcbiAgICAgICAgc3RyICs9ICc7IFNhbWVTaXRlPVN0cmljdCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbm9uZSc6XG4gICAgICAgIHN0ciArPSAnOyBTYW1lU2l0ZT1Ob25lJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb24gc2FtZVNpdGUgaXMgaW52YWxpZCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdHI7XG59XG5cbi8qKlxuICogVVJMLWRlY29kZSBzdHJpbmcgdmFsdWUuIE9wdGltaXplZCB0byBza2lwIG5hdGl2ZSBjYWxsIHdoZW4gbm8gJS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGRlY29kZSAoc3RyKSB7XG4gIHJldHVybiBzdHIuaW5kZXhPZignJScpICE9PSAtMVxuICAgID8gZGVjb2RlVVJJQ29tcG9uZW50KHN0cilcbiAgICA6IHN0clxufVxuXG4vKipcbiAqIFVSTC1lbmNvZGUgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbFxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBlbmNvZGUgKHZhbCkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbClcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdmFsdWUgaXMgYSBEYXRlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGlzRGF0ZSAodmFsKSB7XG4gIHJldHVybiBfX3RvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nIHx8XG4gICAgdmFsIGluc3RhbmNlb2YgRGF0ZVxufVxuXG4vKipcbiAqIFRyeSBkZWNvZGluZyBhIHN0cmluZyB1c2luZyBhIGRlY29kaW5nIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGRlY29kZVxuICogQHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiB0cnlEZWNvZGUoc3RyLCBkZWNvZGUpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZGVjb2RlKHN0cik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/cookie/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jose/dist/browser/lib/buffer_utils.js":
/*!************************************************************!*\
  !*** ./node_modules/jose/dist/browser/lib/buffer_utils.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   concatKdf: () => (/* binding */ concatKdf),\n/* harmony export */   decoder: () => (/* binding */ decoder),\n/* harmony export */   encoder: () => (/* binding */ encoder),\n/* harmony export */   lengthAndInput: () => (/* binding */ lengthAndInput),\n/* harmony export */   p2s: () => (/* binding */ p2s),\n/* harmony export */   uint32be: () => (/* binding */ uint32be),\n/* harmony export */   uint64be: () => (/* binding */ uint64be)\n/* harmony export */ });\n/* harmony import */ var _runtime_digest_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/digest.js */ \"(app-pages-browser)/./node_modules/jose/dist/browser/runtime/digest.js\");\n\nconst encoder = new TextEncoder();\nconst decoder = new TextDecoder();\nconst MAX_INT32 = 2 ** 32;\nfunction concat(...buffers) {\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\n    const buf = new Uint8Array(size);\n    let i = 0;\n    for (const buffer of buffers) {\n        buf.set(buffer, i);\n        i += buffer.length;\n    }\n    return buf;\n}\nfunction p2s(alg, p2sInput) {\n    return concat(encoder.encode(alg), new Uint8Array([0]), p2sInput);\n}\nfunction writeUInt32BE(buf, value, offset) {\n    if (value < 0 || value >= MAX_INT32) {\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\n    }\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\n}\nfunction uint64be(value) {\n    const high = Math.floor(value / MAX_INT32);\n    const low = value % MAX_INT32;\n    const buf = new Uint8Array(8);\n    writeUInt32BE(buf, high, 0);\n    writeUInt32BE(buf, low, 4);\n    return buf;\n}\nfunction uint32be(value) {\n    const buf = new Uint8Array(4);\n    writeUInt32BE(buf, value);\n    return buf;\n}\nfunction lengthAndInput(input) {\n    return concat(uint32be(input.length), input);\n}\nasync function concatKdf(secret, bits, value) {\n    const iterations = Math.ceil((bits >> 3) / 32);\n    const res = new Uint8Array(iterations * 32);\n    for (let iter = 0; iter < iterations; iter++) {\n        const buf = new Uint8Array(4 + secret.length + value.length);\n        buf.set(uint32be(iter + 1));\n        buf.set(secret, 4);\n        buf.set(value, 4 + secret.length);\n        res.set(await (0,_runtime_digest_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('sha256', buf), iter * 32);\n    }\n    return res.slice(0, bits >> 3);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9saWIvYnVmZmVyX3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEwQztBQUNuQztBQUNBO0FBQ1A7QUFDTztBQUNQLHdDQUF3QyxRQUFRO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGNBQWMsYUFBYSxNQUFNO0FBQzNGO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBTTtBQUM1QjtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxqb3NlXFxkaXN0XFxicm93c2VyXFxsaWJcXGJ1ZmZlcl91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGlnZXN0IGZyb20gJy4uL3J1bnRpbWUvZGlnZXN0LmpzJztcbmV4cG9ydCBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5leHBvcnQgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuY29uc3QgTUFYX0lOVDMyID0gMiAqKiAzMjtcbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoLi4uYnVmZmVycykge1xuICAgIGNvbnN0IHNpemUgPSBidWZmZXJzLnJlZHVjZSgoYWNjLCB7IGxlbmd0aCB9KSA9PiBhY2MgKyBsZW5ndGgsIDApO1xuICAgIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KHNpemUpO1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7XG4gICAgICAgIGJ1Zi5zZXQoYnVmZmVyLCBpKTtcbiAgICAgICAgaSArPSBidWZmZXIubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gYnVmO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHAycyhhbGcsIHAyc0lucHV0KSB7XG4gICAgcmV0dXJuIGNvbmNhdChlbmNvZGVyLmVuY29kZShhbGcpLCBuZXcgVWludDhBcnJheShbMF0pLCBwMnNJbnB1dCk7XG59XG5mdW5jdGlvbiB3cml0ZVVJbnQzMkJFKGJ1ZiwgdmFsdWUsIG9mZnNldCkge1xuICAgIGlmICh2YWx1ZSA8IDAgfHwgdmFsdWUgPj0gTUFYX0lOVDMyKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGB2YWx1ZSBtdXN0IGJlID49IDAgYW5kIDw9ICR7TUFYX0lOVDMyIC0gMX0uIFJlY2VpdmVkICR7dmFsdWV9YCk7XG4gICAgfVxuICAgIGJ1Zi5zZXQoW3ZhbHVlID4+PiAyNCwgdmFsdWUgPj4+IDE2LCB2YWx1ZSA+Pj4gOCwgdmFsdWUgJiAweGZmXSwgb2Zmc2V0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1aW50NjRiZSh2YWx1ZSkge1xuICAgIGNvbnN0IGhpZ2ggPSBNYXRoLmZsb29yKHZhbHVlIC8gTUFYX0lOVDMyKTtcbiAgICBjb25zdCBsb3cgPSB2YWx1ZSAlIE1BWF9JTlQzMjtcbiAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheSg4KTtcbiAgICB3cml0ZVVJbnQzMkJFKGJ1ZiwgaGlnaCwgMCk7XG4gICAgd3JpdGVVSW50MzJCRShidWYsIGxvdywgNCk7XG4gICAgcmV0dXJuIGJ1Zjtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1aW50MzJiZSh2YWx1ZSkge1xuICAgIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KDQpO1xuICAgIHdyaXRlVUludDMyQkUoYnVmLCB2YWx1ZSk7XG4gICAgcmV0dXJuIGJ1Zjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGhBbmRJbnB1dChpbnB1dCkge1xuICAgIHJldHVybiBjb25jYXQodWludDMyYmUoaW5wdXQubGVuZ3RoKSwgaW5wdXQpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbmNhdEtkZihzZWNyZXQsIGJpdHMsIHZhbHVlKSB7XG4gICAgY29uc3QgaXRlcmF0aW9ucyA9IE1hdGguY2VpbCgoYml0cyA+PiAzKSAvIDMyKTtcbiAgICBjb25zdCByZXMgPSBuZXcgVWludDhBcnJheShpdGVyYXRpb25zICogMzIpO1xuICAgIGZvciAobGV0IGl0ZXIgPSAwOyBpdGVyIDwgaXRlcmF0aW9uczsgaXRlcisrKSB7XG4gICAgICAgIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KDQgKyBzZWNyZXQubGVuZ3RoICsgdmFsdWUubGVuZ3RoKTtcbiAgICAgICAgYnVmLnNldCh1aW50MzJiZShpdGVyICsgMSkpO1xuICAgICAgICBidWYuc2V0KHNlY3JldCwgNCk7XG4gICAgICAgIGJ1Zi5zZXQodmFsdWUsIDQgKyBzZWNyZXQubGVuZ3RoKTtcbiAgICAgICAgcmVzLnNldChhd2FpdCBkaWdlc3QoJ3NoYTI1NicsIGJ1ZiksIGl0ZXIgKiAzMik7XG4gICAgfVxuICAgIHJldHVybiByZXMuc2xpY2UoMCwgYml0cyA+PiAzKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jose/dist/browser/lib/buffer_utils.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jose/dist/browser/lib/is_object.js":
/*!*********************************************************!*\
  !*** ./node_modules/jose/dist/browser/lib/is_object.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isObject)\n/* harmony export */ });\nfunction isObjectLike(value) {\n    return typeof value === 'object' && value !== null;\n}\nfunction isObject(input) {\n    if (!isObjectLike(input) || Object.prototype.toString.call(input) !== '[object Object]') {\n        return false;\n    }\n    if (Object.getPrototypeOf(input) === null) {\n        return true;\n    }\n    let proto = input;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(input) === proto;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9saWIvaXNfb2JqZWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGpvc2VcXGRpc3RcXGJyb3dzZXJcXGxpYlxcaXNfb2JqZWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsO1xufVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNPYmplY3QoaW5wdXQpIHtcbiAgICBpZiAoIWlzT2JqZWN0TGlrZShpbnB1dCkgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGlucHV0KSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IHByb3RvID0gaW5wdXQ7XG4gICAgd2hpbGUgKE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykgIT09IG51bGwpIHtcbiAgICAgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKGlucHV0KSA9PT0gcHJvdG87XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jose/dist/browser/lib/is_object.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jose/dist/browser/runtime/base64url.js":
/*!*************************************************************!*\
  !*** ./node_modules/jose/dist/browser/runtime/base64url.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   decodeBase64: () => (/* binding */ decodeBase64),\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   encodeBase64: () => (/* binding */ encodeBase64)\n/* harmony export */ });\n/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/buffer_utils.js */ \"(app-pages-browser)/./node_modules/jose/dist/browser/lib/buffer_utils.js\");\n\nconst encodeBase64 = (input) => {\n    let unencoded = input;\n    if (typeof unencoded === 'string') {\n        unencoded = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.encoder.encode(unencoded);\n    }\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < unencoded.length; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, unencoded.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(''));\n};\nconst encode = (input) => {\n    return encodeBase64(input).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\nconst decodeBase64 = (encoded) => {\n    const binary = atob(encoded);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n};\nconst decode = (input) => {\n    let encoded = input;\n    if (encoded instanceof Uint8Array) {\n        encoded = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.decoder.decode(encoded);\n    }\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\n    try {\n        return decodeBase64(encoded);\n    }\n    catch {\n        throw new TypeError('The input to be decoded is not correctly encoded.');\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2Jhc2U2NHVybC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEwRDtBQUNuRDtBQUNQO0FBQ0E7QUFDQSxvQkFBb0IseURBQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxrQkFBa0IseURBQU87QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcam9zZVxcZGlzdFxcYnJvd3NlclxccnVudGltZVxcYmFzZTY0dXJsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVuY29kZXIsIGRlY29kZXIgfSBmcm9tICcuLi9saWIvYnVmZmVyX3V0aWxzLmpzJztcbmV4cG9ydCBjb25zdCBlbmNvZGVCYXNlNjQgPSAoaW5wdXQpID0+IHtcbiAgICBsZXQgdW5lbmNvZGVkID0gaW5wdXQ7XG4gICAgaWYgKHR5cGVvZiB1bmVuY29kZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHVuZW5jb2RlZCA9IGVuY29kZXIuZW5jb2RlKHVuZW5jb2RlZCk7XG4gICAgfVxuICAgIGNvbnN0IENIVU5LX1NJWkUgPSAweDgwMDA7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bmVuY29kZWQubGVuZ3RoOyBpICs9IENIVU5LX1NJWkUpIHtcbiAgICAgICAgYXJyLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1bmVuY29kZWQuc3ViYXJyYXkoaSwgaSArIENIVU5LX1NJWkUpKSk7XG4gICAgfVxuICAgIHJldHVybiBidG9hKGFyci5qb2luKCcnKSk7XG59O1xuZXhwb3J0IGNvbnN0IGVuY29kZSA9IChpbnB1dCkgPT4ge1xuICAgIHJldHVybiBlbmNvZGVCYXNlNjQoaW5wdXQpLnJlcGxhY2UoLz0vZywgJycpLnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xufTtcbmV4cG9ydCBjb25zdCBkZWNvZGVCYXNlNjQgPSAoZW5jb2RlZCkgPT4ge1xuICAgIGNvbnN0IGJpbmFyeSA9IGF0b2IoZW5jb2RlZCk7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnkubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeS5sZW5ndGg7IGkrKykge1xuICAgICAgICBieXRlc1tpXSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXM7XG59O1xuZXhwb3J0IGNvbnN0IGRlY29kZSA9IChpbnB1dCkgPT4ge1xuICAgIGxldCBlbmNvZGVkID0gaW5wdXQ7XG4gICAgaWYgKGVuY29kZWQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIGVuY29kZWQgPSBkZWNvZGVyLmRlY29kZShlbmNvZGVkKTtcbiAgICB9XG4gICAgZW5jb2RlZCA9IGVuY29kZWQucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKS5yZXBsYWNlKC9cXHMvZywgJycpO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkZWNvZGVCYXNlNjQoZW5jb2RlZCk7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGlucHV0IHRvIGJlIGRlY29kZWQgaXMgbm90IGNvcnJlY3RseSBlbmNvZGVkLicpO1xuICAgIH1cbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jose/dist/browser/runtime/base64url.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jose/dist/browser/runtime/digest.js":
/*!**********************************************************!*\
  !*** ./node_modules/jose/dist/browser/runtime/digest.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./webcrypto.js */ \"(app-pages-browser)/./node_modules/jose/dist/browser/runtime/webcrypto.js\");\n\nconst digest = async (algorithm, data) => {\n    const subtleDigest = `SHA-${algorithm.slice(-3)}`;\n    return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtle.digest(subtleDigest, data));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (digest);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2RpZ2VzdC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvQztBQUNwQztBQUNBLGdDQUFnQyxvQkFBb0I7QUFDcEQsZ0NBQWdDLHFEQUFNO0FBQ3RDO0FBQ0EsaUVBQWUsTUFBTSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcam9zZVxcZGlzdFxcYnJvd3NlclxccnVudGltZVxcZGlnZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnLi93ZWJjcnlwdG8uanMnO1xuY29uc3QgZGlnZXN0ID0gYXN5bmMgKGFsZ29yaXRobSwgZGF0YSkgPT4ge1xuICAgIGNvbnN0IHN1YnRsZURpZ2VzdCA9IGBTSEEtJHthbGdvcml0aG0uc2xpY2UoLTMpfWA7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KHN1YnRsZURpZ2VzdCwgZGF0YSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IGRpZ2VzdDtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jose/dist/browser/runtime/digest.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jose/dist/browser/runtime/webcrypto.js":
/*!*************************************************************!*\
  !*** ./node_modules/jose/dist/browser/runtime/webcrypto.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   isCryptoKey: () => (/* binding */ isCryptoKey)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (crypto);\nconst isCryptoKey = (key) => key instanceof CryptoKey;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL3dlYmNyeXB0by5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLGlFQUFlLE1BQU0sRUFBQztBQUNmIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcam9zZVxcZGlzdFxcYnJvd3NlclxccnVudGltZVxcd2ViY3J5cHRvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNyeXB0bztcbmV4cG9ydCBjb25zdCBpc0NyeXB0b0tleSA9IChrZXkpID0+IGtleSBpbnN0YW5jZW9mIENyeXB0b0tleTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jose/dist/browser/runtime/webcrypto.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jose/dist/browser/util/base64url.js":
/*!**********************************************************!*\
  !*** ./node_modules/jose/dist/browser/util/base64url.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode)\n/* harmony export */ });\n/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/base64url.js */ \"(app-pages-browser)/./node_modules/jose/dist/browser/runtime/base64url.js\");\n\nconst encode = _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode;\nconst decode = _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci91dGlsL2Jhc2U2NHVybC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFDOUMsZUFBZSx5REFBZ0I7QUFDL0IsZUFBZSx5REFBZ0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxqb3NlXFxkaXN0XFxicm93c2VyXFx1dGlsXFxiYXNlNjR1cmwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYmFzZTY0dXJsIGZyb20gJy4uL3J1bnRpbWUvYmFzZTY0dXJsLmpzJztcbmV4cG9ydCBjb25zdCBlbmNvZGUgPSBiYXNlNjR1cmwuZW5jb2RlO1xuZXhwb3J0IGNvbnN0IGRlY29kZSA9IGJhc2U2NHVybC5kZWNvZGU7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jose/dist/browser/util/base64url.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jose/dist/browser/util/decode_jwt.js":
/*!***********************************************************!*\
  !*** ./node_modules/jose/dist/browser/util/decode_jwt.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeJwt: () => (/* binding */ decodeJwt)\n/* harmony export */ });\n/* harmony import */ var _base64url_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base64url.js */ \"(app-pages-browser)/./node_modules/jose/dist/browser/util/base64url.js\");\n/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/buffer_utils.js */ \"(app-pages-browser)/./node_modules/jose/dist/browser/lib/buffer_utils.js\");\n/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/is_object.js */ \"(app-pages-browser)/./node_modules/jose/dist/browser/lib/is_object.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(app-pages-browser)/./node_modules/jose/dist/browser/util/errors.js\");\n\n\n\n\nfunction decodeJwt(jwt) {\n    if (typeof jwt !== 'string')\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTInvalid('JWTs must use Compact JWS serialization, JWT must be a string');\n    const { 1: payload, length } = jwt.split('.');\n    if (length === 5)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTInvalid('Only JWTs using Compact JWS serialization can be decoded');\n    if (length !== 3)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTInvalid('Invalid JWT');\n    if (!payload)\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTInvalid('JWTs must contain a payload');\n    let decoded;\n    try {\n        decoded = (0,_base64url_js__WEBPACK_IMPORTED_MODULE_1__.decode)(payload);\n    }\n    catch {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTInvalid('Failed to base64url decode the payload');\n    }\n    let result;\n    try {\n        result = JSON.parse(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_2__.decoder.decode(decoded));\n    }\n    catch {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTInvalid('Failed to parse the decoded payload as JSON');\n    }\n    if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(result))\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTInvalid('Invalid JWT Claims Set');\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci91dGlsL2RlY29kZV9qd3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUQ7QUFDSjtBQUNOO0FBQ0Y7QUFDbEM7QUFDUDtBQUNBLGtCQUFrQixrREFBVTtBQUM1QixZQUFZLHFCQUFxQjtBQUNqQztBQUNBLGtCQUFrQixrREFBVTtBQUM1QjtBQUNBLGtCQUFrQixrREFBVTtBQUM1QjtBQUNBLGtCQUFrQixrREFBVTtBQUM1QjtBQUNBO0FBQ0Esa0JBQWtCLHFEQUFTO0FBQzNCO0FBQ0E7QUFDQSxrQkFBa0Isa0RBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlEQUFPO0FBQ25DO0FBQ0E7QUFDQSxrQkFBa0Isa0RBQVU7QUFDNUI7QUFDQSxTQUFTLDZEQUFRO0FBQ2pCLGtCQUFrQixrREFBVTtBQUM1QjtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcam9zZVxcZGlzdFxcYnJvd3NlclxcdXRpbFxcZGVjb2RlX2p3dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWNvZGUgYXMgYmFzZTY0dXJsIH0gZnJvbSAnLi9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IHsgZGVjb2RlciB9IGZyb20gJy4uL2xpYi9idWZmZXJfdXRpbHMuanMnO1xuaW1wb3J0IGlzT2JqZWN0IGZyb20gJy4uL2xpYi9pc19vYmplY3QuanMnO1xuaW1wb3J0IHsgSldUSW52YWxpZCB9IGZyb20gJy4vZXJyb3JzLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVKd3Qoand0KSB7XG4gICAgaWYgKHR5cGVvZiBqd3QgIT09ICdzdHJpbmcnKVxuICAgICAgICB0aHJvdyBuZXcgSldUSW52YWxpZCgnSldUcyBtdXN0IHVzZSBDb21wYWN0IEpXUyBzZXJpYWxpemF0aW9uLCBKV1QgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIGNvbnN0IHsgMTogcGF5bG9hZCwgbGVuZ3RoIH0gPSBqd3Quc3BsaXQoJy4nKTtcbiAgICBpZiAobGVuZ3RoID09PSA1KVxuICAgICAgICB0aHJvdyBuZXcgSldUSW52YWxpZCgnT25seSBKV1RzIHVzaW5nIENvbXBhY3QgSldTIHNlcmlhbGl6YXRpb24gY2FuIGJlIGRlY29kZWQnKTtcbiAgICBpZiAobGVuZ3RoICE9PSAzKVxuICAgICAgICB0aHJvdyBuZXcgSldUSW52YWxpZCgnSW52YWxpZCBKV1QnKTtcbiAgICBpZiAoIXBheWxvYWQpXG4gICAgICAgIHRocm93IG5ldyBKV1RJbnZhbGlkKCdKV1RzIG11c3QgY29udGFpbiBhIHBheWxvYWQnKTtcbiAgICBsZXQgZGVjb2RlZDtcbiAgICB0cnkge1xuICAgICAgICBkZWNvZGVkID0gYmFzZTY0dXJsKHBheWxvYWQpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHRocm93IG5ldyBKV1RJbnZhbGlkKCdGYWlsZWQgdG8gYmFzZTY0dXJsIGRlY29kZSB0aGUgcGF5bG9hZCcpO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoZGVjb2Rlci5kZWNvZGUoZGVjb2RlZCkpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHRocm93IG5ldyBKV1RJbnZhbGlkKCdGYWlsZWQgdG8gcGFyc2UgdGhlIGRlY29kZWQgcGF5bG9hZCBhcyBKU09OJyk7XG4gICAgfVxuICAgIGlmICghaXNPYmplY3QocmVzdWx0KSlcbiAgICAgICAgdGhyb3cgbmV3IEpXVEludmFsaWQoJ0ludmFsaWQgSldUIENsYWltcyBTZXQnKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jose/dist/browser/util/decode_jwt.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jose/dist/browser/util/errors.js":
/*!*******************************************************!*\
  !*** ./node_modules/jose/dist/browser/util/errors.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JOSEAlgNotAllowed: () => (/* binding */ JOSEAlgNotAllowed),\n/* harmony export */   JOSEError: () => (/* binding */ JOSEError),\n/* harmony export */   JOSENotSupported: () => (/* binding */ JOSENotSupported),\n/* harmony export */   JWEDecryptionFailed: () => (/* binding */ JWEDecryptionFailed),\n/* harmony export */   JWEInvalid: () => (/* binding */ JWEInvalid),\n/* harmony export */   JWKInvalid: () => (/* binding */ JWKInvalid),\n/* harmony export */   JWKSInvalid: () => (/* binding */ JWKSInvalid),\n/* harmony export */   JWKSMultipleMatchingKeys: () => (/* binding */ JWKSMultipleMatchingKeys),\n/* harmony export */   JWKSNoMatchingKey: () => (/* binding */ JWKSNoMatchingKey),\n/* harmony export */   JWKSTimeout: () => (/* binding */ JWKSTimeout),\n/* harmony export */   JWSInvalid: () => (/* binding */ JWSInvalid),\n/* harmony export */   JWSSignatureVerificationFailed: () => (/* binding */ JWSSignatureVerificationFailed),\n/* harmony export */   JWTClaimValidationFailed: () => (/* binding */ JWTClaimValidationFailed),\n/* harmony export */   JWTExpired: () => (/* binding */ JWTExpired),\n/* harmony export */   JWTInvalid: () => (/* binding */ JWTInvalid)\n/* harmony export */ });\nclass JOSEError extends Error {\n    constructor(message, options) {\n        super(message, options);\n        this.code = 'ERR_JOSE_GENERIC';\n        this.name = this.constructor.name;\n        Error.captureStackTrace?.(this, this.constructor);\n    }\n}\nJOSEError.code = 'ERR_JOSE_GENERIC';\nclass JWTClaimValidationFailed extends JOSEError {\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nJWTClaimValidationFailed.code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\nclass JWTExpired extends JOSEError {\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.code = 'ERR_JWT_EXPIRED';\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nJWTExpired.code = 'ERR_JWT_EXPIRED';\nclass JOSEAlgNotAllowed extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_ALG_NOT_ALLOWED';\n    }\n}\nJOSEAlgNotAllowed.code = 'ERR_JOSE_ALG_NOT_ALLOWED';\nclass JOSENotSupported extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_NOT_SUPPORTED';\n    }\n}\nJOSENotSupported.code = 'ERR_JOSE_NOT_SUPPORTED';\nclass JWEDecryptionFailed extends JOSEError {\n    constructor(message = 'decryption operation failed', options) {\n        super(message, options);\n        this.code = 'ERR_JWE_DECRYPTION_FAILED';\n    }\n}\nJWEDecryptionFailed.code = 'ERR_JWE_DECRYPTION_FAILED';\nclass JWEInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWE_INVALID';\n    }\n}\nJWEInvalid.code = 'ERR_JWE_INVALID';\nclass JWSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWS_INVALID';\n    }\n}\nJWSInvalid.code = 'ERR_JWS_INVALID';\nclass JWTInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWT_INVALID';\n    }\n}\nJWTInvalid.code = 'ERR_JWT_INVALID';\nclass JWKInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWK_INVALID';\n    }\n}\nJWKInvalid.code = 'ERR_JWK_INVALID';\nclass JWKSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_INVALID';\n    }\n}\nJWKSInvalid.code = 'ERR_JWKS_INVALID';\nclass JWKSNoMatchingKey extends JOSEError {\n    constructor(message = 'no applicable key found in the JSON Web Key Set', options) {\n        super(message, options);\n        this.code = 'ERR_JWKS_NO_MATCHING_KEY';\n    }\n}\nJWKSNoMatchingKey.code = 'ERR_JWKS_NO_MATCHING_KEY';\nclass JWKSMultipleMatchingKeys extends JOSEError {\n    constructor(message = 'multiple matching keys found in the JSON Web Key Set', options) {\n        super(message, options);\n        this.code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n    }\n}\nSymbol.asyncIterator;\nJWKSMultipleMatchingKeys.code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\nclass JWKSTimeout extends JOSEError {\n    constructor(message = 'request timed out', options) {\n        super(message, options);\n        this.code = 'ERR_JWKS_TIMEOUT';\n    }\n}\nJWKSTimeout.code = 'ERR_JWKS_TIMEOUT';\nclass JWSSignatureVerificationFailed extends JOSEError {\n    constructor(message = 'signature verification failed', options) {\n        super(message, options);\n        this.code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n    }\n}\nJWSSignatureVerificationFailed.code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci91dGlsL2Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EseUJBQXlCLFNBQVMsMEJBQTBCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLHlCQUF5QixTQUFTLDBCQUEwQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcam9zZVxcZGlzdFxcYnJvd3NlclxcdXRpbFxcZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBKT1NFRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KT1NFX0dFTkVSSUMnO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlPy4odGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgfVxufVxuSk9TRUVycm9yLmNvZGUgPSAnRVJSX0pPU0VfR0VORVJJQyc7XG5leHBvcnQgY2xhc3MgSldUQ2xhaW1WYWxpZGF0aW9uRmFpbGVkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBwYXlsb2FkLCBjbGFpbSA9ICd1bnNwZWNpZmllZCcsIHJlYXNvbiA9ICd1bnNwZWNpZmllZCcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgeyBjYXVzZTogeyBjbGFpbSwgcmVhc29uLCBwYXlsb2FkIH0gfSk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSldUX0NMQUlNX1ZBTElEQVRJT05fRkFJTEVEJztcbiAgICAgICAgdGhpcy5jbGFpbSA9IGNsYWltO1xuICAgICAgICB0aGlzLnJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZDtcbiAgICB9XG59XG5KV1RDbGFpbVZhbGlkYXRpb25GYWlsZWQuY29kZSA9ICdFUlJfSldUX0NMQUlNX1ZBTElEQVRJT05fRkFJTEVEJztcbmV4cG9ydCBjbGFzcyBKV1RFeHBpcmVkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBwYXlsb2FkLCBjbGFpbSA9ICd1bnNwZWNpZmllZCcsIHJlYXNvbiA9ICd1bnNwZWNpZmllZCcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgeyBjYXVzZTogeyBjbGFpbSwgcmVhc29uLCBwYXlsb2FkIH0gfSk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSldUX0VYUElSRUQnO1xuICAgICAgICB0aGlzLmNsYWltID0gY2xhaW07XG4gICAgICAgIHRoaXMucmVhc29uID0gcmVhc29uO1xuICAgICAgICB0aGlzLnBheWxvYWQgPSBwYXlsb2FkO1xuICAgIH1cbn1cbkpXVEV4cGlyZWQuY29kZSA9ICdFUlJfSldUX0VYUElSRUQnO1xuZXhwb3J0IGNsYXNzIEpPU0VBbGdOb3RBbGxvd2VkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KT1NFX0FMR19OT1RfQUxMT1dFRCc7XG4gICAgfVxufVxuSk9TRUFsZ05vdEFsbG93ZWQuY29kZSA9ICdFUlJfSk9TRV9BTEdfTk9UX0FMTE9XRUQnO1xuZXhwb3J0IGNsYXNzIEpPU0VOb3RTdXBwb3J0ZWQgZXh0ZW5kcyBKT1NFRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmNvZGUgPSAnRVJSX0pPU0VfTk9UX1NVUFBPUlRFRCc7XG4gICAgfVxufVxuSk9TRU5vdFN1cHBvcnRlZC5jb2RlID0gJ0VSUl9KT1NFX05PVF9TVVBQT1JURUQnO1xuZXhwb3J0IGNsYXNzIEpXRURlY3J5cHRpb25GYWlsZWQgZXh0ZW5kcyBKT1NFRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnZGVjcnlwdGlvbiBvcGVyYXRpb24gZmFpbGVkJywgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV0VfREVDUllQVElPTl9GQUlMRUQnO1xuICAgIH1cbn1cbkpXRURlY3J5cHRpb25GYWlsZWQuY29kZSA9ICdFUlJfSldFX0RFQ1JZUFRJT05fRkFJTEVEJztcbmV4cG9ydCBjbGFzcyBKV0VJbnZhbGlkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV0VfSU5WQUxJRCc7XG4gICAgfVxufVxuSldFSW52YWxpZC5jb2RlID0gJ0VSUl9KV0VfSU5WQUxJRCc7XG5leHBvcnQgY2xhc3MgSldTSW52YWxpZCBleHRlbmRzIEpPU0VFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSldTX0lOVkFMSUQnO1xuICAgIH1cbn1cbkpXU0ludmFsaWQuY29kZSA9ICdFUlJfSldTX0lOVkFMSUQnO1xuZXhwb3J0IGNsYXNzIEpXVEludmFsaWQgZXh0ZW5kcyBKT1NFRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmNvZGUgPSAnRVJSX0pXVF9JTlZBTElEJztcbiAgICB9XG59XG5KV1RJbnZhbGlkLmNvZGUgPSAnRVJSX0pXVF9JTlZBTElEJztcbmV4cG9ydCBjbGFzcyBKV0tJbnZhbGlkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV0tfSU5WQUxJRCc7XG4gICAgfVxufVxuSldLSW52YWxpZC5jb2RlID0gJ0VSUl9KV0tfSU5WQUxJRCc7XG5leHBvcnQgY2xhc3MgSldLU0ludmFsaWQgZXh0ZW5kcyBKT1NFRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmNvZGUgPSAnRVJSX0pXS1NfSU5WQUxJRCc7XG4gICAgfVxufVxuSldLU0ludmFsaWQuY29kZSA9ICdFUlJfSldLU19JTlZBTElEJztcbmV4cG9ydCBjbGFzcyBKV0tTTm9NYXRjaGluZ0tleSBleHRlbmRzIEpPU0VFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdubyBhcHBsaWNhYmxlIGtleSBmb3VuZCBpbiB0aGUgSlNPTiBXZWIgS2V5IFNldCcsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSldLU19OT19NQVRDSElOR19LRVknO1xuICAgIH1cbn1cbkpXS1NOb01hdGNoaW5nS2V5LmNvZGUgPSAnRVJSX0pXS1NfTk9fTUFUQ0hJTkdfS0VZJztcbmV4cG9ydCBjbGFzcyBKV0tTTXVsdGlwbGVNYXRjaGluZ0tleXMgZXh0ZW5kcyBKT1NFRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnbXVsdGlwbGUgbWF0Y2hpbmcga2V5cyBmb3VuZCBpbiB0aGUgSlNPTiBXZWIgS2V5IFNldCcsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSldLU19NVUxUSVBMRV9NQVRDSElOR19LRVlTJztcbiAgICB9XG59XG5TeW1ib2wuYXN5bmNJdGVyYXRvcjtcbkpXS1NNdWx0aXBsZU1hdGNoaW5nS2V5cy5jb2RlID0gJ0VSUl9KV0tTX01VTFRJUExFX01BVENISU5HX0tFWVMnO1xuZXhwb3J0IGNsYXNzIEpXS1NUaW1lb3V0IGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJ3JlcXVlc3QgdGltZWQgb3V0Jywgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV0tTX1RJTUVPVVQnO1xuICAgIH1cbn1cbkpXS1NUaW1lb3V0LmNvZGUgPSAnRVJSX0pXS1NfVElNRU9VVCc7XG5leHBvcnQgY2xhc3MgSldTU2lnbmF0dXJlVmVyaWZpY2F0aW9uRmFpbGVkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJ3NpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkJywgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV1NfU0lHTkFUVVJFX1ZFUklGSUNBVElPTl9GQUlMRUQnO1xuICAgIH1cbn1cbkpXU1NpZ25hdHVyZVZlcmlmaWNhdGlvbkZhaWxlZC5jb2RlID0gJ0VSUl9KV1NfU0lHTkFUVVJFX1ZFUklGSUNBVElPTl9GQUlMRUQnO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jose/dist/browser/util/errors.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/js-cookie/dist/js.cookie.mjs":
/*!***************************************************!*\
  !*** ./node_modules/js-cookie/dist/js.cookie.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ api)\n/* harmony export */ });\n/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qcy1jb29raWUvZGlzdC9qcy5jb29raWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLEVBQUU7QUFDdEMsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwwQkFBMEI7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQ0FBa0M7O0FBRWxDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUVBQXFFO0FBQ3JFO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQSx1RUFBdUU7QUFDdkU7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSw2Q0FBNkM7QUFDN0MsT0FBTztBQUNQO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0JBQW9CLHlDQUF5QztBQUM3RCxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBOztBQUVBLG1DQUFtQyxXQUFXO0FBQzlDOztBQUUwQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGpzLWNvb2tpZVxcZGlzdFxcanMuY29va2llLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEganMtY29va2llIHYzLjAuNSB8IE1JVCAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdmFyICovXG5mdW5jdGlvbiBhc3NpZ24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRhcmdldFxufVxuLyogZXNsaW50LWVuYWJsZSBuby12YXIgKi9cblxuLyogZXNsaW50LWRpc2FibGUgbm8tdmFyICovXG52YXIgZGVmYXVsdENvbnZlcnRlciA9IHtcbiAgcmVhZDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlWzBdID09PSAnXCInKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEsIC0xKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoLyglW1xcZEEtRl17Mn0pKy9naSwgZGVjb2RlVVJJQ29tcG9uZW50KVxuICB9LFxuICB3cml0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkucmVwbGFjZShcbiAgICAgIC8lKDJbMzQ2QkZdfDNbQUMtRl18NDB8NVtCREVdfDYwfDdbQkNEXSkvZyxcbiAgICAgIGRlY29kZVVSSUNvbXBvbmVudFxuICAgIClcbiAgfVxufTtcbi8qIGVzbGludC1lbmFibGUgbm8tdmFyICovXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXZhciAqL1xuXG5mdW5jdGlvbiBpbml0IChjb252ZXJ0ZXIsIGRlZmF1bHRBdHRyaWJ1dGVzKSB7XG4gIGZ1bmN0aW9uIHNldCAobmFtZSwgdmFsdWUsIGF0dHJpYnV0ZXMpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYXR0cmlidXRlcyA9IGFzc2lnbih7fSwgZGVmYXVsdEF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMpO1xuXG4gICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLmV4cGlyZXMgPT09ICdudW1iZXInKSB7XG4gICAgICBhdHRyaWJ1dGVzLmV4cGlyZXMgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgYXR0cmlidXRlcy5leHBpcmVzICogODY0ZTUpO1xuICAgIH1cbiAgICBpZiAoYXR0cmlidXRlcy5leHBpcmVzKSB7XG4gICAgICBhdHRyaWJ1dGVzLmV4cGlyZXMgPSBhdHRyaWJ1dGVzLmV4cGlyZXMudG9VVENTdHJpbmcoKTtcbiAgICB9XG5cbiAgICBuYW1lID0gZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpXG4gICAgICAucmVwbGFjZSgvJSgyWzM0NkJdfDVFfDYwfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpXG4gICAgICAucmVwbGFjZSgvWygpXS9nLCBlc2NhcGUpO1xuXG4gICAgdmFyIHN0cmluZ2lmaWVkQXR0cmlidXRlcyA9ICcnO1xuICAgIGZvciAodmFyIGF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlcykge1xuICAgICAgaWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIHN0cmluZ2lmaWVkQXR0cmlidXRlcyArPSAnOyAnICsgYXR0cmlidXRlTmFtZTtcblxuICAgICAgaWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPT09IHRydWUpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gQ29uc2lkZXJzIFJGQyA2MjY1IHNlY3Rpb24gNS4yOlxuICAgICAgLy8gLi4uXG4gICAgICAvLyAzLiAgSWYgdGhlIHJlbWFpbmluZyB1bnBhcnNlZC1hdHRyaWJ1dGVzIGNvbnRhaW5zIGEgJXgzQiAoXCI7XCIpXG4gICAgICAvLyAgICAgY2hhcmFjdGVyOlxuICAgICAgLy8gQ29uc3VtZSB0aGUgY2hhcmFjdGVycyBvZiB0aGUgdW5wYXJzZWQtYXR0cmlidXRlcyB1cCB0byxcbiAgICAgIC8vIG5vdCBpbmNsdWRpbmcsIHRoZSBmaXJzdCAleDNCIChcIjtcIikgY2hhcmFjdGVyLlxuICAgICAgLy8gLi4uXG4gICAgICBzdHJpbmdpZmllZEF0dHJpYnV0ZXMgKz0gJz0nICsgYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXS5zcGxpdCgnOycpWzBdO1xuICAgIH1cblxuICAgIHJldHVybiAoZG9jdW1lbnQuY29va2llID1cbiAgICAgIG5hbWUgKyAnPScgKyBjb252ZXJ0ZXIud3JpdGUodmFsdWUsIG5hbWUpICsgc3RyaW5naWZpZWRBdHRyaWJ1dGVzKVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0IChuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgKGFyZ3VtZW50cy5sZW5ndGggJiYgIW5hbWUpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBUbyBwcmV2ZW50IHRoZSBmb3IgbG9vcCBpbiB0aGUgZmlyc3QgcGxhY2UgYXNzaWduIGFuIGVtcHR5IGFycmF5XG4gICAgLy8gaW4gY2FzZSB0aGVyZSBhcmUgbm8gY29va2llcyBhdCBhbGwuXG4gICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUgPyBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsgJykgOiBbXTtcbiAgICB2YXIgamFyID0ge307XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFydHMgPSBjb29raWVzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICB2YXIgdmFsdWUgPSBwYXJ0cy5zbGljZSgxKS5qb2luKCc9Jyk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBmb3VuZCA9IGRlY29kZVVSSUNvbXBvbmVudChwYXJ0c1swXSk7XG4gICAgICAgIGphcltmb3VuZF0gPSBjb252ZXJ0ZXIucmVhZCh2YWx1ZSwgZm91bmQpO1xuXG4gICAgICAgIGlmIChuYW1lID09PSBmb3VuZCkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWUgPyBqYXJbbmFtZV0gOiBqYXJcbiAgfVxuXG4gIHJldHVybiBPYmplY3QuY3JlYXRlKFxuICAgIHtcbiAgICAgIHNldCxcbiAgICAgIGdldCxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgc2V0KFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgJycsXG4gICAgICAgICAgYXNzaWduKHt9LCBhdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgICBleHBpcmVzOiAtMVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgd2l0aEF0dHJpYnV0ZXM6IGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybiBpbml0KHRoaXMuY29udmVydGVyLCBhc3NpZ24oe30sIHRoaXMuYXR0cmlidXRlcywgYXR0cmlidXRlcykpXG4gICAgICB9LFxuICAgICAgd2l0aENvbnZlcnRlcjogZnVuY3Rpb24gKGNvbnZlcnRlcikge1xuICAgICAgICByZXR1cm4gaW5pdChhc3NpZ24oe30sIHRoaXMuY29udmVydGVyLCBjb252ZXJ0ZXIpLCB0aGlzLmF0dHJpYnV0ZXMpXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBhdHRyaWJ1dGVzOiB7IHZhbHVlOiBPYmplY3QuZnJlZXplKGRlZmF1bHRBdHRyaWJ1dGVzKSB9LFxuICAgICAgY29udmVydGVyOiB7IHZhbHVlOiBPYmplY3QuZnJlZXplKGNvbnZlcnRlcikgfVxuICAgIH1cbiAgKVxufVxuXG52YXIgYXBpID0gaW5pdChkZWZhdWx0Q29udmVydGVyLCB7IHBhdGg6ICcvJyB9KTtcbi8qIGVzbGludC1lbmFibGUgbm8tdmFyICovXG5cbmV4cG9ydCB7IGFwaSBhcyBkZWZhdWx0IH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/js-cookie/dist/js.cookie.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/api/headers.js":
/*!***********************************************!*\
  !*** ./node_modules/next/dist/api/headers.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __esModule: () => (/* reexport safe */ _server_request_cookies__WEBPACK_IMPORTED_MODULE_0__.__esModule),\n/* harmony export */   cookies: () => (/* reexport safe */ _server_request_cookies__WEBPACK_IMPORTED_MODULE_0__.cookies),\n/* harmony export */   draftMode: () => (/* reexport safe */ _server_request_draft_mode__WEBPACK_IMPORTED_MODULE_2__.draftMode),\n/* harmony export */   headers: () => (/* reexport safe */ _server_request_headers__WEBPACK_IMPORTED_MODULE_1__.headers)\n/* harmony export */ });\n/* harmony import */ var _server_request_cookies__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../server/request/cookies */ \"(app-pages-browser)/./node_modules/next/dist/server/request/cookies.js\");\n/* harmony import */ var _server_request_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../server/request/headers */ \"(app-pages-browser)/./node_modules/next/dist/server/request/headers.js\");\n/* harmony import */ var _server_request_draft_mode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../server/request/draft-mode */ \"(app-pages-browser)/./node_modules/next/dist/server/request/draft-mode.js\");\n\n\n\n\n//# sourceMappingURL=headers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYXBpL2hlYWRlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEwQztBQUNBO0FBQ0c7O0FBRTdDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcYXBpXFxoZWFkZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL3NlcnZlci9yZXF1ZXN0L2Nvb2tpZXMnO1xuZXhwb3J0ICogZnJvbSAnLi4vc2VydmVyL3JlcXVlc3QvaGVhZGVycyc7XG5leHBvcnQgKiBmcm9tICcuLi9zZXJ2ZXIvcmVxdWVzdC9kcmFmdC1tb2RlJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVhZGVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/api/headers.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/api/navigation.js":
/*!**************************************************!*\
  !*** ./node_modules/next/dist/api/navigation.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _client_components_navigation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../client/components/navigation */ \"(app-pages-browser)/./node_modules/next/dist/client/components/navigation.js\");\n/* harmony import */ var _client_components_navigation__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_client_components_navigation__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _client_components_navigation__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _client_components_navigation__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n//# sourceMappingURL=navigation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYXBpL25hdmlnYXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdEOztBQUVoRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXGFwaVxcbmF2aWdhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9jbGllbnQvY29tcG9uZW50cy9uYXZpZ2F0aW9uJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmF2aWdhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/api/navigation.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5Capgau%5C%5COneDrive%5C%5CDesktop%5C%5Ceducation-website%5C%5Csrc%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5Capgau%5C%5COneDrive%5C%5CDesktop%5C%5Ceducation-website%5C%5Csrc%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(app-pages-browser)/./src/app/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtZmxpZ2h0LWNsaWVudC1lbnRyeS1sb2FkZXIuanM/bW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDYXBnYXUlNUMlNUNPbmVEcml2ZSU1QyU1Q0Rlc2t0b3AlNUMlNUNlZHVjYXRpb24td2Vic2l0ZSU1QyU1Q3NyYyU1QyU1Q2FwcCU1QyU1Q3BhZ2UudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJnNlcnZlcj1mYWxzZSEiLCJtYXBwaW5ncyI6IkFBQUEsOEpBQStHIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxhcGdhdVxcXFxPbmVEcml2ZVxcXFxEZXNrdG9wXFxcXGVkdWNhdGlvbi13ZWJzaXRlXFxcXHNyY1xcXFxhcHBcXFxccGFnZS50c3hcIik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5Capgau%5C%5COneDrive%5C%5CDesktop%5C%5Ceducation-website%5C%5Csrc%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/client/app-dir/link.js":
/*!*******************************************************!*\
  !*** ./node_modules/next/dist/client/app-dir/link.js ***!
  \*******************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/* __next_internal_client_entry_do_not_use__  cjs */ \nvar _s = $RefreshSig$();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    /**\n * A React component that extends the HTML `<a>` element to provide\n * [prefetching](https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching)\n * and client-side navigation. This is the primary way to navigate between routes in Next.js.\n *\n * @remarks\n * - Prefetching is only enabled in production.\n *\n * @see https://nextjs.org/docs/app/api-reference/components/link\n */ default: function() {\n        return LinkComponent;\n    },\n    useLinkStatus: function() {\n        return useLinkStatus;\n    }\n});\nconst _interop_require_wildcard = __webpack_require__(/*! @swc/helpers/_/_interop_require_wildcard */ \"(app-pages-browser)/./node_modules/next/node_modules/@swc/helpers/esm/_interop_require_wildcard.js\");\nconst _jsxruntime = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\nconst _react = /*#__PURE__*/ _interop_require_wildcard._(__webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"));\nconst _formaturl = __webpack_require__(/*! ../../shared/lib/router/utils/format-url */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/router/utils/format-url.js\");\nconst _approutercontextsharedruntime = __webpack_require__(/*! ../../shared/lib/app-router-context.shared-runtime */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/app-router-context.shared-runtime.js\");\nconst _routerreducertypes = __webpack_require__(/*! ../components/router-reducer/router-reducer-types */ \"(app-pages-browser)/./node_modules/next/dist/client/components/router-reducer/router-reducer-types.js\");\nconst _usemergedref = __webpack_require__(/*! ../use-merged-ref */ \"(app-pages-browser)/./node_modules/next/dist/client/use-merged-ref.js\");\nconst _utils = __webpack_require__(/*! ../../shared/lib/utils */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/utils.js\");\nconst _addbasepath = __webpack_require__(/*! ../add-base-path */ \"(app-pages-browser)/./node_modules/next/dist/client/add-base-path.js\");\nconst _warnonce = __webpack_require__(/*! ../../shared/lib/utils/warn-once */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js\");\nconst _links = __webpack_require__(/*! ../components/links */ \"(app-pages-browser)/./node_modules/next/dist/client/components/links.js\");\nconst _islocalurl = __webpack_require__(/*! ../../shared/lib/router/utils/is-local-url */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/router/utils/is-local-url.js\");\nconst _approuterinstance = __webpack_require__(/*! ../components/app-router-instance */ \"(app-pages-browser)/./node_modules/next/dist/client/components/app-router-instance.js\");\nconst _erroronce = __webpack_require__(/*! ../../shared/lib/utils/error-once */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/error-once.js\");\nfunction isModifiedEvent(event) {\n    const eventTarget = event.currentTarget;\n    const target = eventTarget.getAttribute('target');\n    return target && target !== '_self' || event.metaKey || event.ctrlKey || event.shiftKey || event.altKey || // triggers resource download\n    event.nativeEvent && event.nativeEvent.which === 2;\n}\nfunction linkClicked(e, href, as, linkInstanceRef, replace, scroll, onNavigate) {\n    const { nodeName } = e.currentTarget;\n    // anchors inside an svg have a lowercase nodeName\n    const isAnchorNodeName = nodeName.toUpperCase() === 'A';\n    if (isAnchorNodeName && isModifiedEvent(e) || e.currentTarget.hasAttribute('download')) {\n        // ignore click for browsers default behavior\n        return;\n    }\n    if (!(0, _islocalurl.isLocalURL)(href)) {\n        if (replace) {\n            // browser default behavior does not replace the history state\n            // so we need to do it manually\n            e.preventDefault();\n            location.replace(href);\n        }\n        // ignore click for browsers default behavior\n        return;\n    }\n    e.preventDefault();\n    const navigate = ()=>{\n        if (onNavigate) {\n            let isDefaultPrevented = false;\n            onNavigate({\n                preventDefault: ()=>{\n                    isDefaultPrevented = true;\n                }\n            });\n            if (isDefaultPrevented) {\n                return;\n            }\n        }\n        (0, _approuterinstance.dispatchNavigateAction)(as || href, replace ? 'replace' : 'push', scroll != null ? scroll : true, linkInstanceRef.current);\n    };\n    _react.default.startTransition(navigate);\n}\nfunction formatStringOrUrl(urlObjOrString) {\n    if (typeof urlObjOrString === 'string') {\n        return urlObjOrString;\n    }\n    return (0, _formaturl.formatUrl)(urlObjOrString);\n}\nfunction LinkComponent(props) {\n    _s();\n    const [linkStatus, setOptimisticLinkStatus] = (0, _react.useOptimistic)(_links.IDLE_LINK_STATUS);\n    let children;\n    const linkInstanceRef = (0, _react.useRef)(null);\n    const { href: hrefProp, as: asProp, children: childrenProp, prefetch: prefetchProp = null, passHref, replace, shallow, scroll, onClick, onMouseEnter: onMouseEnterProp, onTouchStart: onTouchStartProp, legacyBehavior = false, onNavigate, ref: forwardedRef, unstable_dynamicOnHover, ...restProps } = props;\n    children = childrenProp;\n    if (legacyBehavior && (typeof children === 'string' || typeof children === 'number')) {\n        children = /*#__PURE__*/ (0, _jsxruntime.jsx)(\"a\", {\n            children: children\n        });\n    }\n    const router = _react.default.useContext(_approutercontextsharedruntime.AppRouterContext);\n    const prefetchEnabled = prefetchProp !== false;\n    /**\n   * The possible states for prefetch are:\n   * - null: this is the default \"auto\" mode, where we will prefetch partially if the link is in the viewport\n   * - true: we will prefetch if the link is visible and prefetch the full page, not just partially\n   * - false: we will not prefetch if in the viewport at all\n   * - 'unstable_dynamicOnHover': this starts in \"auto\" mode, but switches to \"full\" when the link is hovered\n   */ const appPrefetchKind = prefetchProp === null ? _routerreducertypes.PrefetchKind.AUTO : _routerreducertypes.PrefetchKind.FULL;\n    if (true) {\n        function createPropError(args) {\n            return Object.defineProperty(new Error(\"Failed prop type: The prop `\" + args.key + \"` expects a \" + args.expected + \" in `<Link>`, but got `\" + args.actual + \"` instead.\" + ( true ? \"\\nOpen your browser's console to view the Component stack trace.\" : 0)), \"__NEXT_ERROR_CODE\", {\n                value: \"E319\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        // TypeScript trick for type-guarding:\n        const requiredPropsGuard = {\n            href: true\n        };\n        const requiredProps = Object.keys(requiredPropsGuard);\n        requiredProps.forEach((key)=>{\n            if (key === 'href') {\n                if (props[key] == null || typeof props[key] !== 'string' && typeof props[key] !== 'object') {\n                    throw createPropError({\n                        key,\n                        expected: '`string` or `object`',\n                        actual: props[key] === null ? 'null' : typeof props[key]\n                    });\n                }\n            } else {\n                // TypeScript trick for type-guarding:\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                const _ = key;\n            }\n        });\n        // TypeScript trick for type-guarding:\n        const optionalPropsGuard = {\n            as: true,\n            replace: true,\n            scroll: true,\n            shallow: true,\n            passHref: true,\n            prefetch: true,\n            unstable_dynamicOnHover: true,\n            onClick: true,\n            onMouseEnter: true,\n            onTouchStart: true,\n            legacyBehavior: true,\n            onNavigate: true\n        };\n        const optionalProps = Object.keys(optionalPropsGuard);\n        optionalProps.forEach((key)=>{\n            const valType = typeof props[key];\n            if (key === 'as') {\n                if (props[key] && valType !== 'string' && valType !== 'object') {\n                    throw createPropError({\n                        key,\n                        expected: '`string` or `object`',\n                        actual: valType\n                    });\n                }\n            } else if (key === 'onClick' || key === 'onMouseEnter' || key === 'onTouchStart' || key === 'onNavigate') {\n                if (props[key] && valType !== 'function') {\n                    throw createPropError({\n                        key,\n                        expected: '`function`',\n                        actual: valType\n                    });\n                }\n            } else if (key === 'replace' || key === 'scroll' || key === 'shallow' || key === 'passHref' || key === 'prefetch' || key === 'legacyBehavior' || key === 'unstable_dynamicOnHover') {\n                if (props[key] != null && valType !== 'boolean') {\n                    throw createPropError({\n                        key,\n                        expected: '`boolean`',\n                        actual: valType\n                    });\n                }\n            } else {\n                // TypeScript trick for type-guarding:\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                const _ = key;\n            }\n        });\n    }\n    if (true) {\n        if (props.locale) {\n            (0, _warnonce.warnOnce)('The `locale` prop is not supported in `next/link` while using the `app` router. Read more about app router internalization: https://nextjs.org/docs/app/building-your-application/routing/internationalization');\n        }\n        if (!asProp) {\n            let href;\n            if (typeof hrefProp === 'string') {\n                href = hrefProp;\n            } else if (typeof hrefProp === 'object' && typeof hrefProp.pathname === 'string') {\n                href = hrefProp.pathname;\n            }\n            if (href) {\n                const hasDynamicSegment = href.split('/').some((segment)=>segment.startsWith('[') && segment.endsWith(']'));\n                if (hasDynamicSegment) {\n                    throw Object.defineProperty(new Error(\"Dynamic href `\" + href + \"` found in <Link> while using the `/app` router, this is not supported. Read more: https://nextjs.org/docs/messages/app-dir-dynamic-href\"), \"__NEXT_ERROR_CODE\", {\n                        value: \"E267\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n            }\n        }\n    }\n    const { href, as } = _react.default.useMemo({\n        \"LinkComponent.useMemo\": ()=>{\n            const resolvedHref = formatStringOrUrl(hrefProp);\n            return {\n                href: resolvedHref,\n                as: asProp ? formatStringOrUrl(asProp) : resolvedHref\n            };\n        }\n    }[\"LinkComponent.useMemo\"], [\n        hrefProp,\n        asProp\n    ]);\n    // This will return the first child, if multiple are provided it will throw an error\n    let child;\n    if (legacyBehavior) {\n        if (true) {\n            if (onClick) {\n                console.warn('\"onClick\" was passed to <Link> with `href` of `' + hrefProp + '` but \"legacyBehavior\" was set. The legacy behavior requires onClick be set on the child of next/link');\n            }\n            if (onMouseEnterProp) {\n                console.warn('\"onMouseEnter\" was passed to <Link> with `href` of `' + hrefProp + '` but \"legacyBehavior\" was set. The legacy behavior requires onMouseEnter be set on the child of next/link');\n            }\n            try {\n                child = _react.default.Children.only(children);\n            } catch (err) {\n                if (!children) {\n                    throw Object.defineProperty(new Error(\"No children were passed to <Link> with `href` of `\" + hrefProp + \"` but one child is required https://nextjs.org/docs/messages/link-no-children\"), \"__NEXT_ERROR_CODE\", {\n                        value: \"E320\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                throw Object.defineProperty(new Error(\"Multiple children were passed to <Link> with `href` of `\" + hrefProp + \"` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children\" + ( true ? \" \\nOpen your browser's console to view the Component stack trace.\" : 0)), \"__NEXT_ERROR_CODE\", {\n                    value: \"E266\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n        } else {}\n    } else {\n        if (true) {\n            if ((children == null ? void 0 : children.type) === 'a') {\n                throw Object.defineProperty(new Error('Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor'), \"__NEXT_ERROR_CODE\", {\n                    value: \"E209\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n        }\n    }\n    const childRef = legacyBehavior ? child && typeof child === 'object' && child.ref : forwardedRef;\n    // Use a callback ref to attach an IntersectionObserver to the anchor tag on\n    // mount. In the future we will also use this to keep track of all the\n    // currently mounted <Link> instances, e.g. so we can re-prefetch them after\n    // a revalidation or refresh.\n    const observeLinkVisibilityOnMount = _react.default.useCallback({\n        \"LinkComponent.useCallback[observeLinkVisibilityOnMount]\": (element)=>{\n            if (router !== null) {\n                linkInstanceRef.current = (0, _links.mountLinkInstance)(element, href, router, appPrefetchKind, prefetchEnabled, setOptimisticLinkStatus);\n            }\n            return ({\n                \"LinkComponent.useCallback[observeLinkVisibilityOnMount]\": ()=>{\n                    if (linkInstanceRef.current) {\n                        (0, _links.unmountLinkForCurrentNavigation)(linkInstanceRef.current);\n                        linkInstanceRef.current = null;\n                    }\n                    (0, _links.unmountPrefetchableInstance)(element);\n                }\n            })[\"LinkComponent.useCallback[observeLinkVisibilityOnMount]\"];\n        }\n    }[\"LinkComponent.useCallback[observeLinkVisibilityOnMount]\"], [\n        prefetchEnabled,\n        href,\n        router,\n        appPrefetchKind,\n        setOptimisticLinkStatus\n    ]);\n    const mergedRef = (0, _usemergedref.useMergedRef)(observeLinkVisibilityOnMount, childRef);\n    const childProps = {\n        ref: mergedRef,\n        onClick (e) {\n            if (true) {\n                if (!e) {\n                    throw Object.defineProperty(new Error('Component rendered inside next/link has to pass click event to \"onClick\" prop.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E312\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n            }\n            if (!legacyBehavior && typeof onClick === 'function') {\n                onClick(e);\n            }\n            if (legacyBehavior && child.props && typeof child.props.onClick === 'function') {\n                child.props.onClick(e);\n            }\n            if (!router) {\n                return;\n            }\n            if (e.defaultPrevented) {\n                return;\n            }\n            linkClicked(e, href, as, linkInstanceRef, replace, scroll, onNavigate);\n        },\n        onMouseEnter (e) {\n            if (!legacyBehavior && typeof onMouseEnterProp === 'function') {\n                onMouseEnterProp(e);\n            }\n            if (legacyBehavior && child.props && typeof child.props.onMouseEnter === 'function') {\n                child.props.onMouseEnter(e);\n            }\n            if (!router) {\n                return;\n            }\n            if (!prefetchEnabled || \"development\" === 'development') {\n                return;\n            }\n            const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true;\n            (0, _links.onNavigationIntent)(e.currentTarget, upgradeToDynamicPrefetch);\n        },\n        onTouchStart:  false ? 0 : function onTouchStart(e) {\n            if (!legacyBehavior && typeof onTouchStartProp === 'function') {\n                onTouchStartProp(e);\n            }\n            if (legacyBehavior && child.props && typeof child.props.onTouchStart === 'function') {\n                child.props.onTouchStart(e);\n            }\n            if (!router) {\n                return;\n            }\n            if (!prefetchEnabled) {\n                return;\n            }\n            const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true;\n            (0, _links.onNavigationIntent)(e.currentTarget, upgradeToDynamicPrefetch);\n        }\n    };\n    // If child is an <a> tag and doesn't have a href attribute, or if the 'passHref' property is\n    // defined, we specify the current 'href', so that repetition is not needed by the user.\n    // If the url is absolute, we can bypass the logic to prepend the basePath.\n    if ((0, _utils.isAbsoluteUrl)(as)) {\n        childProps.href = as;\n    } else if (!legacyBehavior || passHref || child.type === 'a' && !('href' in child.props)) {\n        childProps.href = (0, _addbasepath.addBasePath)(as);\n    }\n    let link;\n    if (legacyBehavior) {\n        if (true) {\n            (0, _erroronce.errorOnce)('`legacyBehavior` is deprecated and will be removed in a future ' + 'release. A codemod is available to upgrade your components:\\n\\n' + 'npx @next/codemod@latest new-link .\\n\\n' + 'Learn more: https://nextjs.org/docs/app/building-your-application/upgrading/codemods#remove-a-tags-from-link-components');\n        }\n        link = /*#__PURE__*/ _react.default.cloneElement(child, childProps);\n    } else {\n        link = /*#__PURE__*/ (0, _jsxruntime.jsx)(\"a\", {\n            ...restProps,\n            ...childProps,\n            children: children\n        });\n    }\n    return /*#__PURE__*/ (0, _jsxruntime.jsx)(LinkStatusContext.Provider, {\n        value: linkStatus,\n        children: link\n    });\n}\n_s(LinkComponent, \"MNV6IdWv8Lu3MKc7Fm4v59uGRY0=\");\n_c = LinkComponent;\nconst LinkStatusContext = /*#__PURE__*/ (0, _react.createContext)(_links.IDLE_LINK_STATUS);\nconst useLinkStatus = ()=>{\n    return (0, _react.useContext)(LinkStatusContext);\n};\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n    Object.defineProperty(exports.default, '__esModule', {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=link.js.map\nvar _c;\n$RefreshReg$(_c, \"LinkComponent\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2FwcC1kaXIvbGluay5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztJQW1UQTs7Ozs7Ozs7O0NBU0MsR0FDRCxPQXlaQztlQXpadUJBOztJQStaWEMsYUFBYTtlQUFiQTs7Ozs7NkVBMXRCMkQ7dUNBRTlDOzJEQUNPO2dEQUNKOzBDQUNBO21DQUNDO3lDQUNGO3NDQUNIO21DQVNsQjt3Q0FDb0I7K0NBQ1k7dUNBQ2I7QUEwTTFCLFNBQVNDLGdCQUFnQkMsS0FBdUI7SUFDOUMsTUFBTUMsY0FBY0QsTUFBTUUsYUFBYTtJQUN2QyxNQUFNQyxTQUFTRixZQUFZRyxZQUFZLENBQUM7SUFDeEMsT0FDR0QsVUFBVUEsV0FBVyxXQUN0QkgsTUFBTUssT0FBTyxJQUNiTCxNQUFNTSxPQUFPLElBQ2JOLE1BQU1PLFFBQVEsSUFDZFAsTUFBTVEsTUFBTSxJQUFJLDZCQUE2QjtJQUM1Q1IsTUFBTVMsV0FBVyxJQUFJVCxNQUFNUyxXQUFXLENBQUNDLEtBQUssS0FBSztBQUV0RDtBQUVBLFNBQVNDLFlBQ1BDLENBQW1CLEVBQ25CQyxJQUFZLEVBQ1pDLEVBQVUsRUFDVkMsZUFBcUQsRUFDckRDLE9BQWlCLEVBQ2pCQyxNQUFnQixFQUNoQkMsVUFBbUM7SUFFbkMsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBR1AsRUFBRVYsYUFBYTtJQUVwQyxrREFBa0Q7SUFDbEQsTUFBTWtCLG1CQUFtQkQsU0FBU0UsV0FBVyxPQUFPO0lBRXBELElBQ0dELG9CQUFvQnJCLGdCQUFnQmEsTUFDckNBLEVBQUVWLGFBQWEsQ0FBQ29CLFlBQVksQ0FBQyxhQUM3QjtRQUNBLDhDQUE4QztRQUM5QztJQUNGO0lBRUEsSUFBSSxDQUFDQyxDQUFBQSxHQUFBQSxZQUFBQSxVQUFBQSxFQUFXVixPQUFPO1FBQ3JCLElBQUlHLFNBQVM7WUFDWCw4REFBOEQ7WUFDOUQsK0JBQStCO1lBQy9CSixFQUFFWSxjQUFjO1lBQ2hCQyxTQUFTVCxPQUFPLENBQUNIO1FBQ25CO1FBRUEsOENBQThDO1FBQzlDO0lBQ0Y7SUFFQUQsRUFBRVksY0FBYztJQUVoQixNQUFNRSxXQUFXO1FBQ2YsSUFBSVIsWUFBWTtZQUNkLElBQUlTLHFCQUFxQjtZQUV6QlQsV0FBVztnQkFDVE0sZ0JBQWdCO29CQUNkRyxxQkFBcUI7Z0JBQ3ZCO1lBQ0Y7WUFFQSxJQUFJQSxvQkFBb0I7Z0JBQ3RCO1lBQ0Y7UUFDRjtRQUVBQyxDQUFBQSxHQUFBQSxtQkFBQUEsc0JBQUFBLEVBQ0VkLE1BQU1ELE1BQ05HLFVBQVUsWUFBWSxRQUN0QkMsVUFBQUEsT0FBQUEsU0FBVSxNQUNWRixnQkFBZ0JjLE9BQU87SUFFM0I7SUFFQUMsT0FBQUEsT0FBSyxDQUFDQyxlQUFlLENBQUNMO0FBQ3hCO0FBRUEsU0FBU00sa0JBQWtCQyxjQUFrQztJQUMzRCxJQUFJLE9BQU9BLG1CQUFtQixVQUFVO1FBQ3RDLE9BQU9BO0lBQ1Q7SUFFQSxPQUFPQyxDQUFBQSxHQUFBQSxXQUFBQSxTQUFBQSxFQUFVRDtBQUNuQjtBQVllLHVCQUNiRSxLQUdDOztJQUVELE1BQU0sQ0FBQ0MsWUFBWUMsd0JBQXdCLEdBQUdDLENBQUFBLEdBQUFBLE9BQUFBLGFBQUFBLEVBQWNDLE9BQUFBLGdCQUFnQjtJQUU1RSxJQUFJQztJQUVKLE1BQU16QixrQkFBa0IwQixDQUFBQSxHQUFBQSxPQUFBQSxNQUFBQSxFQUE0QjtJQUVwRCxNQUFNLEVBQ0o1QixNQUFNNkIsUUFBUSxFQUNkNUIsSUFBSTZCLE1BQU0sRUFDVkgsVUFBVUksWUFBWSxFQUN0QkMsVUFBVUMsZUFBZSxJQUFJLEVBQzdCQyxRQUFRLEVBQ1IvQixPQUFPLEVBQ1BnQyxPQUFPLEVBQ1AvQixNQUFNLEVBQ05nQyxPQUFPLEVBQ1BDLGNBQWNDLGdCQUFnQixFQUM5QkMsY0FBY0MsZ0JBQWdCLEVBQzlCQyxpQkFBaUIsS0FBSyxFQUN0QnBDLFVBQVUsRUFDVnFDLEtBQUtDLFlBQVksRUFDakJDLHVCQUF1QixFQUN2QixHQUFHQyxXQUNKLEdBQUd2QjtJQUVKSyxXQUFXSTtJQUVYLElBQ0VVLGtCQUNDLFFBQU9kLGFBQWEsWUFBWSxPQUFPQSxhQUFhLFNBQU8sRUFDNUQ7UUFDQUEsV0FBQUEsV0FBQUEsR0FBVyxxQkFBQ21CLEtBQUFBO3NCQUFHbkI7O0lBQ2pCO0lBRUEsTUFBTW9CLFNBQVM5QixPQUFBQSxPQUFLLENBQUMrQixVQUFVLENBQUNDLCtCQUFBQSxnQkFBZ0I7SUFFaEQsTUFBTUMsa0JBQWtCakIsaUJBQWlCO0lBQ3pDOzs7Ozs7R0FNQyxHQUNELE1BQU1rQixrQkFDSmxCLGlCQUFpQixPQUFPbUIsb0JBQUFBLFlBQVksQ0FBQ0MsSUFBSSxHQUFHRCxvQkFBQUEsWUFBWSxDQUFDRSxJQUFJO0lBRS9ELElBQUlDLElBQW9CLEVBQW1CO1FBQ3pDLFNBQVNHLGdCQUFnQkMsSUFJeEI7WUFDQyxPQUFPLHFCQUtOLENBTE0sSUFBSUMsTUFDUixpQ0FBK0JELEtBQUtFLEdBQUcsR0FBQyxpQkFBZUYsS0FBS0csUUFBUSxHQUFDLDRCQUE0QkgsS0FBS0ksTUFBTSxHQUFDLGVBQzNHLE1BQTZCLEdBQzFCLHFFQUNBLEVBQUMsR0FKRjt1QkFBQTs0QkFBQTs4QkFBQTtZQUtQO1FBQ0Y7UUFFQSxzQ0FBc0M7UUFDdEMsTUFBTUUscUJBQXNEO1lBQzFEakUsTUFBTTtRQUNSO1FBQ0EsTUFBTWtFLGdCQUFxQ0MsT0FBT0MsSUFBSSxDQUNwREg7UUFFRkMsY0FBY0csT0FBTyxDQUFDLENBQUNSO1lBQ3JCLElBQUlBLFFBQVEsUUFBUTtnQkFDbEIsSUFDRXZDLEtBQUssQ0FBQ3VDLElBQUksSUFBSSxRQUNiLE9BQU92QyxLQUFLLENBQUN1QyxJQUFJLEtBQUssWUFBWSxPQUFPdkMsS0FBSyxDQUFDdUMsSUFBSSxLQUFLLFVBQ3pEO29CQUNBLE1BQU1ILGdCQUFnQjt3QkFDcEJHO3dCQUNBQyxVQUFVO3dCQUNWQyxRQUFRekMsS0FBSyxDQUFDdUMsSUFBSSxLQUFLLE9BQU8sU0FBUyxPQUFPdkMsS0FBSyxDQUFDdUMsSUFBSTtvQkFDMUQ7Z0JBQ0Y7WUFDRixPQUFPO2dCQUNMLHNDQUFzQztnQkFDdEMsNkRBQTZEO2dCQUM3RCxNQUFNUyxJQUFXVDtZQUNuQjtRQUNGO1FBRUEsc0NBQXNDO1FBQ3RDLE1BQU1VLHFCQUFzRDtZQUMxRHRFLElBQUk7WUFDSkUsU0FBUztZQUNUQyxRQUFRO1lBQ1IrQixTQUFTO1lBQ1RELFVBQVU7WUFDVkYsVUFBVTtZQUNWWSx5QkFBeUI7WUFDekJSLFNBQVM7WUFDVEMsY0FBYztZQUNkRSxjQUFjO1lBQ2RFLGdCQUFnQjtZQUNoQnBDLFlBQVk7UUFDZDtRQUNBLE1BQU1tRSxnQkFBcUNMLE9BQU9DLElBQUksQ0FDcERHO1FBRUZDLGNBQWNILE9BQU8sQ0FBQyxDQUFDUjtZQUNyQixNQUFNWSxVQUFVLE9BQU9uRCxLQUFLLENBQUN1QyxJQUFJO1lBRWpDLElBQUlBLFFBQVEsTUFBTTtnQkFDaEIsSUFBSXZDLEtBQUssQ0FBQ3VDLElBQUksSUFBSVksWUFBWSxZQUFZQSxZQUFZLFVBQVU7b0JBQzlELE1BQU1mLGdCQUFnQjt3QkFDcEJHO3dCQUNBQyxVQUFVO3dCQUNWQyxRQUFRVTtvQkFDVjtnQkFDRjtZQUNGLE9BQU8sSUFDTFosUUFBUSxhQUNSQSxRQUFRLGtCQUNSQSxRQUFRLGtCQUNSQSxRQUFRLGNBQ1I7Z0JBQ0EsSUFBSXZDLEtBQUssQ0FBQ3VDLElBQUksSUFBSVksWUFBWSxZQUFZO29CQUN4QyxNQUFNZixnQkFBZ0I7d0JBQ3BCRzt3QkFDQUMsVUFBVTt3QkFDVkMsUUFBUVU7b0JBQ1Y7Z0JBQ0Y7WUFDRixPQUFPLElBQ0xaLFFBQVEsYUFDUkEsUUFBUSxZQUNSQSxRQUFRLGFBQ1JBLFFBQVEsY0FDUkEsUUFBUSxjQUNSQSxRQUFRLG9CQUNSQSxRQUFRLDJCQUNSO2dCQUNBLElBQUl2QyxLQUFLLENBQUN1QyxJQUFJLElBQUksUUFBUVksWUFBWSxXQUFXO29CQUMvQyxNQUFNZixnQkFBZ0I7d0JBQ3BCRzt3QkFDQUMsVUFBVTt3QkFDVkMsUUFBUVU7b0JBQ1Y7Z0JBQ0Y7WUFDRixPQUFPO2dCQUNMLHNDQUFzQztnQkFDdEMsNkRBQTZEO2dCQUM3RCxNQUFNSCxJQUFXVDtZQUNuQjtRQUNGO0lBQ0Y7SUFFQSxJQUFJTixJQUFvQixFQUFtQjtRQUN6QyxJQUFJakMsTUFBTW9ELE1BQU0sRUFBRTtZQUNoQkMsQ0FBQUEsR0FBQUEsVUFBQUEsUUFBQUEsRUFDRTtRQUVKO1FBQ0EsSUFBSSxDQUFDN0MsUUFBUTtZQUNYLElBQUk5QjtZQUNKLElBQUksT0FBTzZCLGFBQWEsVUFBVTtnQkFDaEM3QixPQUFPNkI7WUFDVCxPQUFPLElBQ0wsT0FBT0EsYUFBYSxZQUNwQixPQUFPQSxTQUFTK0MsUUFBUSxLQUFLLFVBQzdCO2dCQUNBNUUsT0FBTzZCLFNBQVMrQyxRQUFRO1lBQzFCO1lBRUEsSUFBSTVFLE1BQU07Z0JBQ1IsTUFBTTZFLG9CQUFvQjdFLEtBQ3ZCOEUsS0FBSyxDQUFDLEtBQ05DLElBQUksQ0FBQyxDQUFDQyxVQUFZQSxRQUFRQyxVQUFVLENBQUMsUUFBUUQsUUFBUUUsUUFBUSxDQUFDO2dCQUVqRSxJQUFJTCxtQkFBbUI7b0JBQ3JCLE1BQU0scUJBRUwsQ0FGSyxJQUFJakIsTUFDUCxtQkFBaUI1RCxPQUFLLDZJQURuQjsrQkFBQTtvQ0FBQTtzQ0FBQTtvQkFFTjtnQkFDRjtZQUNGO1FBQ0Y7SUFDRjtJQUVBLE1BQU0sRUFBRUEsSUFBSSxFQUFFQyxFQUFFLEVBQUUsR0FBR2dCLE9BQUFBLE9BQUssQ0FBQ2tFLE9BQU87aUNBQUM7WUFDakMsTUFBTUMsZUFBZWpFLGtCQUFrQlU7WUFDdkMsT0FBTztnQkFDTDdCLE1BQU1vRjtnQkFDTm5GLElBQUk2QixTQUFTWCxrQkFBa0JXLFVBQVVzRDtZQUMzQztRQUNGO2dDQUFHO1FBQUN2RDtRQUFVQztLQUFPO0lBRXJCLG9GQUFvRjtJQUNwRixJQUFJdUQ7SUFDSixJQUFJNUMsZ0JBQWdCO1FBQ2xCLElBQUljLElBQW9CLEVBQW9CO1lBQzFDLElBQUluQixTQUFTO2dCQUNYa0QsUUFBUUMsSUFBSSxDQUNULG9EQUFvRDFELFdBQVM7WUFFbEU7WUFDQSxJQUFJUyxrQkFBa0I7Z0JBQ3BCZ0QsUUFBUUMsSUFBSSxDQUNULHlEQUF5RDFELFdBQVM7WUFFdkU7WUFDQSxJQUFJO2dCQUNGd0QsUUFBUXBFLE9BQUFBLE9BQUssQ0FBQ3VFLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDOUQ7WUFDOUIsRUFBRSxPQUFPK0QsS0FBSztnQkFDWixJQUFJLENBQUMvRCxVQUFVO29CQUNiLE1BQU0scUJBRUwsQ0FGSyxJQUFJaUMsTUFDUCx1REFBdUQvQixXQUFTLGtGQUQ3RDsrQkFBQTtvQ0FBQTtzQ0FBQTtvQkFFTjtnQkFDRjtnQkFDQSxNQUFNLHFCQUtMLENBTEssSUFBSStCLE1BQ1AsNkRBQTZEL0IsV0FBUyw4RkFDcEUsTUFBNkIsR0FDMUIsc0VBQ0EsRUFBQyxHQUpIOzJCQUFBO2dDQUFBO2tDQUFBO2dCQUtOO1lBQ0Y7UUFDRixPQUFPLEVBRU47SUFDSCxPQUFPO1FBQ0wsSUFBSTBCLElBQW9CLEVBQW9CO1lBQzFDLElBQUksQ0FBQzVCLFlBQUFBLE9BQUFBLEtBQUFBLElBQUFBLFNBQWtCZ0UsSUFBQUEsTUFBUyxLQUFLO2dCQUNuQyxNQUFNLHFCQUVMLENBRkssSUFBSS9CLE1BQ1Isb0tBREk7MkJBQUE7Z0NBQUE7a0NBQUE7Z0JBRU47WUFDRjtRQUNGO0lBQ0Y7SUFFQSxNQUFNZ0MsV0FBZ0JuRCxpQkFDbEI0QyxTQUFTLE9BQU9BLFVBQVUsWUFBWUEsTUFBTTNDLEdBQUcsR0FDL0NDO0lBRUosNEVBQTRFO0lBQzVFLHNFQUFzRTtJQUN0RSw0RUFBNEU7SUFDNUUsNkJBQTZCO0lBQzdCLE1BQU1rRCwrQkFBK0I1RSxPQUFBQSxPQUFLLENBQUM2RSxXQUFXO21FQUNwRCxDQUFDQztZQUNDLElBQUloRCxXQUFXLE1BQU07Z0JBQ25CN0MsZ0JBQWdCYyxPQUFPLEdBQUdnRixDQUFBQSxHQUFBQSxPQUFBQSxpQkFBQUEsRUFDeEJELFNBQ0EvRixNQUNBK0MsUUFDQUksaUJBQ0FELGlCQUNBMUI7WUFFSjtZQUVBOzJFQUFPO29CQUNMLElBQUl0QixnQkFBZ0JjLE9BQU8sRUFBRTt3QkFDM0JpRixDQUFBQSxHQUFBQSxPQUFBQSwrQkFBK0IsRUFBQy9GLGdCQUFnQmMsT0FBTzt3QkFDdkRkLGdCQUFnQmMsT0FBTyxHQUFHO29CQUM1QjtvQkFDQWtGLENBQUFBLEdBQUFBLE9BQUFBLDJCQUFBQSxFQUE0Qkg7Z0JBQzlCOztRQUNGO2tFQUNBO1FBQUM3QztRQUFpQmxEO1FBQU0rQztRQUFRSTtRQUFpQjNCO0tBQXdCO0lBRzNFLE1BQU0yRSxZQUFZQyxDQUFBQSxHQUFBQSxjQUFBQSxZQUFBQSxFQUFhUCw4QkFBOEJEO0lBRTdELE1BQU1TLGFBTUY7UUFDRjNELEtBQUt5RDtRQUNML0QsU0FBUXJDLENBQUM7WUFDUCxJQUFJd0QsSUFBb0IsRUFBbUI7Z0JBQ3pDLElBQUksQ0FBQ3hELEdBQUc7b0JBQ04sTUFBTSxxQkFFTCxDQUZLLElBQUk2RCxNQUNQLG1GQURHOytCQUFBO29DQUFBO3NDQUFBO29CQUVOO2dCQUNGO1lBQ0Y7WUFFQSxJQUFJLENBQUNuQixrQkFBa0IsT0FBT0wsWUFBWSxZQUFZO2dCQUNwREEsUUFBUXJDO1lBQ1Y7WUFFQSxJQUNFMEMsa0JBQ0E0QyxNQUFNL0QsS0FBSyxJQUNYLE9BQU8rRCxNQUFNL0QsS0FBSyxDQUFDYyxPQUFPLEtBQUssWUFDL0I7Z0JBQ0FpRCxNQUFNL0QsS0FBSyxDQUFDYyxPQUFPLENBQUNyQztZQUN0QjtZQUVBLElBQUksQ0FBQ2dELFFBQVE7Z0JBQ1g7WUFDRjtZQUVBLElBQUloRCxFQUFFdUcsZ0JBQWdCLEVBQUU7Z0JBQ3RCO1lBQ0Y7WUFFQXhHLFlBQVlDLEdBQUdDLE1BQU1DLElBQUlDLGlCQUFpQkMsU0FBU0MsUUFBUUM7UUFDN0Q7UUFDQWdDLGNBQWF0QyxDQUFDO1lBQ1osSUFBSSxDQUFDMEMsa0JBQWtCLE9BQU9ILHFCQUFxQixZQUFZO2dCQUM3REEsaUJBQWlCdkM7WUFDbkI7WUFFQSxJQUNFMEMsa0JBQ0E0QyxNQUFNL0QsS0FBSyxJQUNYLE9BQU8rRCxNQUFNL0QsS0FBSyxDQUFDZSxZQUFZLEtBQUssWUFDcEM7Z0JBQ0FnRCxNQUFNL0QsS0FBSyxDQUFDZSxZQUFZLENBQUN0QztZQUMzQjtZQUVBLElBQUksQ0FBQ2dELFFBQVE7Z0JBQ1g7WUFDRjtZQUVBLElBQUksQ0FBQ0csbUJBQW1CSyxRQUFRQyxHQUFHLENBQUNDLE1BQWEsRUFBTCxhQUFvQjtnQkFDOUQ7WUFDRjtZQUVBLE1BQU04QywyQkFBMkIzRCw0QkFBNEI7WUFDN0Q0RCxDQUFBQSxHQUFBQSxPQUFBQSxrQkFBQUEsRUFDRXpHLEVBQUVWLGFBQWEsRUFDZmtIO1FBRUo7UUFDQWhFLGNBQWNnQixNQUFzQyxHQUNoRG1ELENBQVNBLEdBQ1QsU0FBU25FLGFBQWF4QyxDQUFDO1lBQ3JCLElBQUksQ0FBQzBDLGtCQUFrQixPQUFPRCxxQkFBcUIsWUFBWTtnQkFDN0RBLGlCQUFpQnpDO1lBQ25CO1lBRUEsSUFDRTBDLGtCQUNBNEMsTUFBTS9ELEtBQUssSUFDWCxPQUFPK0QsTUFBTS9ELEtBQUssQ0FBQ2lCLFlBQVksS0FBSyxZQUNwQztnQkFDQThDLE1BQU0vRCxLQUFLLENBQUNpQixZQUFZLENBQUN4QztZQUMzQjtZQUVBLElBQUksQ0FBQ2dELFFBQVE7Z0JBQ1g7WUFDRjtZQUVBLElBQUksQ0FBQ0csaUJBQWlCO2dCQUNwQjtZQUNGO1lBRUEsTUFBTXFELDJCQUEyQjNELDRCQUE0QjtZQUM3RDRELENBQUFBLEdBQUFBLE9BQUFBLGtCQUFBQSxFQUNFekcsRUFBRVYsYUFBYSxFQUNma0g7UUFFSjtJQUNOO0lBRUEsNkZBQTZGO0lBQzdGLHdGQUF3RjtJQUN4RiwyRUFBMkU7SUFDM0UsSUFBSUksQ0FBQUEsR0FBQUEsT0FBQUEsYUFBQUEsRUFBYzFHLEtBQUs7UUFDckJvRyxXQUFXckcsSUFBSSxHQUFHQztJQUNwQixPQUFPLElBQ0wsQ0FBQ3dDLGtCQUNEUCxZQUNDbUQsTUFBTU0sSUFBSSxLQUFLLE9BQU8sQ0FBRSxXQUFVTixNQUFNL0QsS0FBQUEsR0FDekM7UUFDQStFLFdBQVdyRyxJQUFJLEdBQUc0RyxDQUFBQSxHQUFBQSxhQUFBQSxXQUFBQSxFQUFZM0c7SUFDaEM7SUFFQSxJQUFJNEc7SUFFSixJQUFJcEUsZ0JBQWdCO1FBQ2xCLElBQUljLElBQW9CLEVBQW9CO1lBQzFDdUQsQ0FBQUEsR0FBQUEsV0FBQUEsU0FBQUEsRUFDRSxvRUFDRSxvRUFDQSw0Q0FDQTtRQUVOO1FBQ0FELE9BQUFBLFdBQUFBLEdBQU81RixPQUFBQSxPQUFLLENBQUM4RixZQUFZLENBQUMxQixPQUFPZ0I7SUFDbkMsT0FBTztRQUNMUSxPQUFBQSxXQUFBQSxHQUNFLHFCQUFDL0QsS0FBQUE7WUFBRyxHQUFHRCxTQUFTO1lBQUcsR0FBR3dELFVBQVU7c0JBQzdCMUU7O0lBR1A7SUFFQSxxQkFDRSxxQkFBQ3FGLGtCQUFrQkMsUUFBUTtRQUFDQyxPQUFPM0Y7a0JBQ2hDc0Y7O0FBR1A7O0tBelp3QjdIO0FBMlp4QixNQUFNZ0ksb0JBQUFBLFdBQUFBLEdBQW9CRyxDQUFBQSxHQUFBQSxPQUFBQSxhQUFBQSxFQUV4QnpGLE9BQUFBLGdCQUFnQjtBQUVYLE1BQU16QyxnQkFBZ0I7SUFDM0IsT0FBTytELENBQUFBLEdBQUFBLE9BQUFBLFVBQUFBLEVBQVdnRTtBQUNwQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcc3JjXFxjbGllbnRcXGFwcC1kaXJcXGxpbmsudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlT3B0aW1pc3RpYywgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgdHlwZSB7IFVybE9iamVjdCB9IGZyb20gJ3VybCdcbmltcG9ydCB7IGZvcm1hdFVybCB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2Zvcm1hdC11cmwnXG5pbXBvcnQgeyBBcHBSb3V0ZXJDb250ZXh0IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi9hcHAtcm91dGVyLWNvbnRleHQuc2hhcmVkLXJ1bnRpbWUnXG5pbXBvcnQgeyBQcmVmZXRjaEtpbmQgfSBmcm9tICcuLi9jb21wb25lbnRzL3JvdXRlci1yZWR1Y2VyL3JvdXRlci1yZWR1Y2VyLXR5cGVzJ1xuaW1wb3J0IHsgdXNlTWVyZ2VkUmVmIH0gZnJvbSAnLi4vdXNlLW1lcmdlZC1yZWYnXG5pbXBvcnQgeyBpc0Fic29sdXRlVXJsIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi91dGlscydcbmltcG9ydCB7IGFkZEJhc2VQYXRoIH0gZnJvbSAnLi4vYWRkLWJhc2UtcGF0aCdcbmltcG9ydCB7IHdhcm5PbmNlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi91dGlscy93YXJuLW9uY2UnXG5pbXBvcnQgdHlwZSB7IFBFTkRJTkdfTElOS19TVEFUVVMgfSBmcm9tICcuLi9jb21wb25lbnRzL2xpbmtzJ1xuaW1wb3J0IHtcbiAgSURMRV9MSU5LX1NUQVRVUyxcbiAgbW91bnRMaW5rSW5zdGFuY2UsXG4gIG9uTmF2aWdhdGlvbkludGVudCxcbiAgdW5tb3VudExpbmtGb3JDdXJyZW50TmF2aWdhdGlvbixcbiAgdW5tb3VudFByZWZldGNoYWJsZUluc3RhbmNlLFxuICB0eXBlIExpbmtJbnN0YW5jZSxcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9saW5rcydcbmltcG9ydCB7IGlzTG9jYWxVUkwgfSBmcm9tICcuLi8uLi9zaGFyZWQvbGliL3JvdXRlci91dGlscy9pcy1sb2NhbC11cmwnXG5pbXBvcnQgeyBkaXNwYXRjaE5hdmlnYXRlQWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9hcHAtcm91dGVyLWluc3RhbmNlJ1xuaW1wb3J0IHsgZXJyb3JPbmNlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi91dGlscy9lcnJvci1vbmNlJ1xuXG50eXBlIFVybCA9IHN0cmluZyB8IFVybE9iamVjdFxudHlwZSBSZXF1aXJlZEtleXM8VD4gPSB7XG4gIFtLIGluIGtleW9mIFRdLT86IHt9IGV4dGVuZHMgUGljazxULCBLPiA/IG5ldmVyIDogS1xufVtrZXlvZiBUXVxudHlwZSBPcHRpb25hbEtleXM8VD4gPSB7XG4gIFtLIGluIGtleW9mIFRdLT86IHt9IGV4dGVuZHMgUGljazxULCBLPiA/IEsgOiBuZXZlclxufVtrZXlvZiBUXVxuXG50eXBlIE9uTmF2aWdhdGVFdmVudEhhbmRsZXIgPSAoZXZlbnQ6IHsgcHJldmVudERlZmF1bHQ6ICgpID0+IHZvaWQgfSkgPT4gdm9pZFxuXG50eXBlIEludGVybmFsTGlua1Byb3BzID0ge1xuICAvKipcbiAgICogKipSZXF1aXJlZCoqLiBUaGUgcGF0aCBvciBVUkwgdG8gbmF2aWdhdGUgdG8uIEl0IGNhbiBhbHNvIGJlIGFuIG9iamVjdCAoc2ltaWxhciB0byBgVVJMYCkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzeFxuICAgKiAvLyBOYXZpZ2F0ZSB0byAvZGFzaGJvYXJkOlxuICAgKiA8TGluayBocmVmPVwiL2Rhc2hib2FyZFwiPkRhc2hib2FyZDwvTGluaz5cbiAgICpcbiAgICogLy8gTmF2aWdhdGUgdG8gL2Fib3V0P25hbWU9dGVzdDpcbiAgICogPExpbmsgaHJlZj17eyBwYXRobmFtZTogJy9hYm91dCcsIHF1ZXJ5OiB7IG5hbWU6ICd0ZXN0JyB9IH19PlxuICAgKiAgIEFib3V0XG4gICAqIDwvTGluaz5cbiAgICogYGBgXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIC0gRm9yIGV4dGVybmFsIFVSTHMsIHVzZSBhIGZ1bGx5IHF1YWxpZmllZCBVUkwgc3VjaCBhcyBgaHR0cHM6Ly8uLi5gLlxuICAgKiAtIEluIHRoZSBBcHAgUm91dGVyLCBkeW5hbWljIHJvdXRlcyBtdXN0IG5vdCBpbmNsdWRlIGJyYWNrZXRlZCBzZWdtZW50cyBpbiBgaHJlZmAuXG4gICAqL1xuICBocmVmOiBVcmxcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdjEwLjAuMDogYGhyZWZgIHByb3BzIHBvaW50aW5nIHRvIGEgZHluYW1pYyByb3V0ZSBhcmVcbiAgICogYXV0b21hdGljYWxseSByZXNvbHZlZCBhbmQgbm8gbG9uZ2VyIHJlcXVpcmUgdGhlIGBhc2AgcHJvcC5cbiAgICovXG4gIGFzPzogVXJsXG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgdGhlIGN1cnJlbnQgYGhpc3RvcnlgIHN0YXRlIGluc3RlYWQgb2YgYWRkaW5nIGEgbmV3IFVSTCBpbnRvIHRoZSBzdGFjay5cbiAgICpcbiAgICogQGRlZmF1bHRWYWx1ZSBgZmFsc2VgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzeFxuICAgKiA8TGluayBocmVmPVwiL2Fib3V0XCIgcmVwbGFjZT5cbiAgICogICBBYm91dCAocmVwbGFjZXMgdGhlIGhpc3Rvcnkgc3RhdGUpXG4gICAqIDwvTGluaz5cbiAgICogYGBgXG4gICAqL1xuICByZXBsYWNlPzogYm9vbGVhblxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IHNjcm9sbCBiZWhhdmlvci4gSWYgYHRydWVgLCBOZXh0LmpzIGF0dGVtcHRzIHRvIG1haW50YWluXG4gICAqIHRoZSBzY3JvbGwgcG9zaXRpb24gaWYgdGhlIG5ld2x5IG5hdmlnYXRlZCBwYWdlIGlzIHN0aWxsIHZpc2libGUuIElmIG5vdCwgaXQgc2Nyb2xscyB0byB0aGUgdG9wLlxuICAgKlxuICAgKiBJZiBgZmFsc2VgLCBOZXh0LmpzIHdpbGwgbm90IG1vZGlmeSB0aGUgc2Nyb2xsIGJlaGF2aW9yIGF0IGFsbC5cbiAgICpcbiAgICogQGRlZmF1bHRWYWx1ZSBgdHJ1ZWBcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHN4XG4gICAqIDxMaW5rIGhyZWY9XCIvZGFzaGJvYXJkXCIgc2Nyb2xsPXtmYWxzZX0+XG4gICAqICAgTm8gYXV0byBzY3JvbGxcbiAgICogPC9MaW5rPlxuICAgKiBgYGBcbiAgICovXG4gIHNjcm9sbD86IGJvb2xlYW5cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBwYXRoIG9mIHRoZSBjdXJyZW50IHBhZ2Ugd2l0aG91dCByZXJ1bm5pbmcgZGF0YSBmZXRjaGluZyBtZXRob2RzXG4gICAqIGxpa2UgYGdldFN0YXRpY1Byb3BzYCwgYGdldFNlcnZlclNpZGVQcm9wc2AsIG9yIGBnZXRJbml0aWFsUHJvcHNgLlxuICAgKlxuICAgKiBAcmVtYXJrc1xuICAgKiBgc2hhbGxvd2Agb25seSBhcHBsaWVzIHRvIHRoZSBQYWdlcyBSb3V0ZXIuIEZvciB0aGUgQXBwIFJvdXRlciwgc2VlIHRoZVxuICAgKiBbZm9sbG93aW5nIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9idWlsZGluZy15b3VyLWFwcGxpY2F0aW9uL3JvdXRpbmcvbGlua2luZy1hbmQtbmF2aWdhdGluZyN1c2luZy10aGUtbmF0aXZlLWhpc3RvcnktYXBpKS5cbiAgICpcbiAgICogQGRlZmF1bHRWYWx1ZSBgZmFsc2VgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzeFxuICAgKiA8TGluayBocmVmPVwiL2Jsb2dcIiBzaGFsbG93PlxuICAgKiAgIFNoYWxsb3cgbmF2aWdhdGlvblxuICAgKiA8L0xpbms+XG4gICAqIGBgYFxuICAgKi9cbiAgc2hhbGxvdz86IGJvb2xlYW5cblxuICAvKipcbiAgICogRm9yY2VzIGBMaW5rYCB0byBwYXNzIGl0cyBgaHJlZmAgdG8gdGhlIGNoaWxkIGNvbXBvbmVudC4gVXNlZnVsIGlmIHRoZSBjaGlsZCBpcyBhIGN1c3RvbVxuICAgKiBjb21wb25lbnQgdGhhdCB3cmFwcyBhbiBgPGE+YCB0YWcsIG9yIGlmIHlvdSdyZSB1c2luZyBjZXJ0YWluIHN0eWxpbmcgbGlicmFyaWVzLlxuICAgKlxuICAgKiBAZGVmYXVsdFZhbHVlIGBmYWxzZWBcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHN4XG4gICAqIDxMaW5rIGhyZWY9XCIvZGFzaGJvYXJkXCIgcGFzc0hyZWY+XG4gICAqICAgPE15U3R5bGVkQW5jaG9yPkRhc2hib2FyZDwvTXlTdHlsZWRBbmNob3I+XG4gICAqIDwvTGluaz5cbiAgICogYGBgXG4gICAqL1xuICBwYXNzSHJlZj86IGJvb2xlYW5cblxuICAvKipcbiAgICogUHJlZmV0Y2ggdGhlIHBhZ2UgaW4gdGhlIGJhY2tncm91bmQuXG4gICAqIEFueSBgPExpbmsgLz5gIHRoYXQgaXMgaW4gdGhlIHZpZXdwb3J0IChpbml0aWFsbHkgb3IgdGhyb3VnaCBzY3JvbGwpIHdpbGwgYmUgcHJlZmV0Y2hlZC5cbiAgICogUHJlZmV0Y2ggY2FuIGJlIGRpc2FibGVkIGJ5IHBhc3NpbmcgYHByZWZldGNoPXtmYWxzZX1gLlxuICAgKlxuICAgKiBAcmVtYXJrc1xuICAgKiBQcmVmZXRjaGluZyBpcyBvbmx5IGVuYWJsZWQgaW4gcHJvZHVjdGlvbi5cbiAgICpcbiAgICogLSBJbiB0aGUgKipBcHAgUm91dGVyKio6XG4gICAqICAgLSBgbnVsbGAgKGRlZmF1bHQpOiBQcmVmZXRjaCBiZWhhdmlvciBkZXBlbmRzIG9uIHN0YXRpYyB2cyBkeW5hbWljIHJvdXRlczpcbiAgICogICAgIC0gU3RhdGljIHJvdXRlczogZnVsbHkgcHJlZmV0Y2hlZFxuICAgKiAgICAgLSBEeW5hbWljIHJvdXRlczogcGFydGlhbCBwcmVmZXRjaCB0byB0aGUgbmVhcmVzdCBzZWdtZW50IHdpdGggYSBgbG9hZGluZy5qc2BcbiAgICogICAtIGB0cnVlYDogQWx3YXlzIHByZWZldGNoIHRoZSBmdWxsIHJvdXRlIGFuZCBkYXRhLlxuICAgKiAgIC0gYGZhbHNlYDogRGlzYWJsZSBwcmVmZXRjaGluZyBvbiBib3RoIHZpZXdwb3J0IGFuZCBob3Zlci5cbiAgICogLSBJbiB0aGUgKipQYWdlcyBSb3V0ZXIqKjpcbiAgICogICAtIGB0cnVlYCAoZGVmYXVsdCk6IFByZWZldGNoZXMgdGhlIHJvdXRlIGFuZCBkYXRhIGluIHRoZSBiYWNrZ3JvdW5kIG9uIHZpZXdwb3J0IG9yIGhvdmVyLlxuICAgKiAgIC0gYGZhbHNlYDogUHJlZmV0Y2ggb25seSBvbiBob3Zlciwgbm90IG9uIHZpZXdwb3J0LlxuICAgKlxuICAgKiBAZGVmYXVsdFZhbHVlIGB0cnVlYCAoUGFnZXMgUm91dGVyKSBvciBgbnVsbGAgKEFwcCBSb3V0ZXIpXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzeFxuICAgKiA8TGluayBocmVmPVwiL2Rhc2hib2FyZFwiIHByZWZldGNoPXtmYWxzZX0+XG4gICAqICAgRGFzaGJvYXJkXG4gICAqIDwvTGluaz5cbiAgICogYGBgXG4gICAqL1xuICBwcmVmZXRjaD86IGJvb2xlYW4gfCBudWxsXG5cbiAgLyoqXG4gICAqICh1bnN0YWJsZSkgU3dpdGNoIHRvIGEgZHluYW1pYyBwcmVmZXRjaCBvbiBob3Zlci4gRWZmZWN0aXZlbHkgdGhlIHNhbWUgYXNcbiAgICogdXBkYXRpbmcgdGhlIHByZWZldGNoIHByb3AgdG8gYHRydWVgIGluIGEgbW91c2UgZXZlbnQuXG4gICAqL1xuICB1bnN0YWJsZV9keW5hbWljT25Ib3Zlcj86IGJvb2xlYW5cblxuICAvKipcbiAgICogVGhlIGFjdGl2ZSBsb2NhbGUgaXMgYXV0b21hdGljYWxseSBwcmVwZW5kZWQgaW4gdGhlIFBhZ2VzIFJvdXRlci4gYGxvY2FsZWAgYWxsb3dzIGZvciBwcm92aWRpbmdcbiAgICogYSBkaWZmZXJlbnQgbG9jYWxlLCBvciBjYW4gYmUgc2V0IHRvIGBmYWxzZWAgdG8gb3B0IG91dCBvZiBhdXRvbWF0aWMgbG9jYWxlIGJlaGF2aW9yLlxuICAgKlxuICAgKiBAcmVtYXJrc1xuICAgKiBOb3RlOiBsb2NhbGUgb25seSBhcHBsaWVzIGluIHRoZSBQYWdlcyBSb3V0ZXIgYW5kIGlzIGlnbm9yZWQgaW4gdGhlIEFwcCBSb3V0ZXIuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzeFxuICAgKiAvLyBVc2UgdGhlICdmcicgbG9jYWxlOlxuICAgKiA8TGluayBocmVmPVwiL2Fib3V0XCIgbG9jYWxlPVwiZnJcIj5cbiAgICogICBBYm91dCAoRnJlbmNoKVxuICAgKiA8L0xpbms+XG4gICAqXG4gICAqIC8vIERpc2FibGUgbG9jYWxlIHByZWZpeDpcbiAgICogPExpbmsgaHJlZj1cIi9hYm91dFwiIGxvY2FsZT17ZmFsc2V9PlxuICAgKiAgIEFib3V0IChubyBsb2NhbGUgcHJlZml4KVxuICAgKiA8L0xpbms+XG4gICAqIGBgYFxuICAgKi9cbiAgbG9jYWxlPzogc3RyaW5nIHwgZmFsc2VcblxuICAvKipcbiAgICogRW5hYmxlIGxlZ2FjeSBsaW5rIGJlaGF2aW9yLCByZXF1aXJpbmcgYW4gYDxhPmAgdGFnIHRvIHdyYXAgdGhlIGNoaWxkIGNvbnRlbnRcbiAgICogaWYgdGhlIGNoaWxkIGlzIGEgc3RyaW5nIG9yIG51bWJlci5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gdjE2XG4gICAqIEBkZWZhdWx0VmFsdWUgYGZhbHNlYFxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qcy9jb21taXQvNDg5ZTY1ZWQ5ODU0NGU2OWIwYWZkN2UwY2ZjM2Y5ZjZjMmI4MDNiN1xuICAgKi9cbiAgbGVnYWN5QmVoYXZpb3I/OiBib29sZWFuXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsIGV2ZW50IGhhbmRsZXIgZm9yIHdoZW4gdGhlIG1vdXNlIHBvaW50ZXIgaXMgbW92ZWQgb250byB0aGUgYDxMaW5rPmAuXG4gICAqL1xuICBvbk1vdXNlRW50ZXI/OiBSZWFjdC5Nb3VzZUV2ZW50SGFuZGxlcjxIVE1MQW5jaG9yRWxlbWVudD5cblxuICAvKipcbiAgICogT3B0aW9uYWwgZXZlbnQgaGFuZGxlciBmb3Igd2hlbiB0aGUgYDxMaW5rPmAgaXMgdG91Y2hlZC5cbiAgICovXG4gIG9uVG91Y2hTdGFydD86IFJlYWN0LlRvdWNoRXZlbnRIYW5kbGVyPEhUTUxBbmNob3JFbGVtZW50PlxuXG4gIC8qKlxuICAgKiBPcHRpb25hbCBldmVudCBoYW5kbGVyIGZvciB3aGVuIHRoZSBgPExpbms+YCBpcyBjbGlja2VkLlxuICAgKi9cbiAgb25DbGljaz86IFJlYWN0Lk1vdXNlRXZlbnRIYW5kbGVyPEhUTUxBbmNob3JFbGVtZW50PlxuXG4gIC8qKlxuICAgKiBPcHRpb25hbCBldmVudCBoYW5kbGVyIGZvciB3aGVuIHRoZSBgPExpbms+YCBpcyBuYXZpZ2F0ZWQuXG4gICAqL1xuICBvbk5hdmlnYXRlPzogT25OYXZpZ2F0ZUV2ZW50SGFuZGxlclxufVxuXG4vLyBUT0RPLUFQUDogSW5jbHVkZSB0aGUgZnVsbCBzZXQgb2YgQW5jaG9yIHByb3BzXG4vLyBhZGRpbmcgdGhpcyB0byB0aGUgcHVibGljbHkgZXhwb3J0ZWQgdHlwZSBjdXJyZW50bHkgYnJlYWtzIGV4aXN0aW5nIGFwcHNcblxuLy8gYFJvdXRlSW5mZXJUeXBlYCBpcyBhIHN0dWIgaGVyZSB0byBhdm9pZCBicmVha2luZyBgdHlwZWRSb3V0ZXNgIHdoZW4gdGhlIHR5cGVcbi8vIGlzbid0IGdlbmVyYXRlZCB5ZXQuIEl0IHdpbGwgYmUgcmVwbGFjZWQgd2hlbiB0aGUgd2VicGFjayBwbHVnaW4gcnVucy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbmV4cG9ydCB0eXBlIExpbmtQcm9wczxSb3V0ZUluZmVyVHlwZSA9IGFueT4gPSBJbnRlcm5hbExpbmtQcm9wc1xudHlwZSBMaW5rUHJvcHNSZXF1aXJlZCA9IFJlcXVpcmVkS2V5czxMaW5rUHJvcHM+XG50eXBlIExpbmtQcm9wc09wdGlvbmFsID0gT3B0aW9uYWxLZXlzPE9taXQ8SW50ZXJuYWxMaW5rUHJvcHMsICdsb2NhbGUnPj5cblxuZnVuY3Rpb24gaXNNb2RpZmllZEV2ZW50KGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50KTogYm9vbGVhbiB7XG4gIGNvbnN0IGV2ZW50VGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQW5jaG9yRWxlbWVudCB8IFNWR0FFbGVtZW50XG4gIGNvbnN0IHRhcmdldCA9IGV2ZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgndGFyZ2V0JylcbiAgcmV0dXJuIChcbiAgICAodGFyZ2V0ICYmIHRhcmdldCAhPT0gJ19zZWxmJykgfHxcbiAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgZXZlbnQuY3RybEtleSB8fFxuICAgIGV2ZW50LnNoaWZ0S2V5IHx8XG4gICAgZXZlbnQuYWx0S2V5IHx8IC8vIHRyaWdnZXJzIHJlc291cmNlIGRvd25sb2FkXG4gICAgKGV2ZW50Lm5hdGl2ZUV2ZW50ICYmIGV2ZW50Lm5hdGl2ZUV2ZW50LndoaWNoID09PSAyKVxuICApXG59XG5cbmZ1bmN0aW9uIGxpbmtDbGlja2VkKFxuICBlOiBSZWFjdC5Nb3VzZUV2ZW50LFxuICBocmVmOiBzdHJpbmcsXG4gIGFzOiBzdHJpbmcsXG4gIGxpbmtJbnN0YW5jZVJlZjogUmVhY3QuUmVmT2JqZWN0PExpbmtJbnN0YW5jZSB8IG51bGw+LFxuICByZXBsYWNlPzogYm9vbGVhbixcbiAgc2Nyb2xsPzogYm9vbGVhbixcbiAgb25OYXZpZ2F0ZT86IE9uTmF2aWdhdGVFdmVudEhhbmRsZXJcbik6IHZvaWQge1xuICBjb25zdCB7IG5vZGVOYW1lIH0gPSBlLmN1cnJlbnRUYXJnZXRcblxuICAvLyBhbmNob3JzIGluc2lkZSBhbiBzdmcgaGF2ZSBhIGxvd2VyY2FzZSBub2RlTmFtZVxuICBjb25zdCBpc0FuY2hvck5vZGVOYW1lID0gbm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ0EnXG5cbiAgaWYgKFxuICAgIChpc0FuY2hvck5vZGVOYW1lICYmIGlzTW9kaWZpZWRFdmVudChlKSkgfHxcbiAgICBlLmN1cnJlbnRUYXJnZXQuaGFzQXR0cmlidXRlKCdkb3dubG9hZCcpXG4gICkge1xuICAgIC8vIGlnbm9yZSBjbGljayBmb3IgYnJvd3NlcuKAmXMgZGVmYXVsdCBiZWhhdmlvclxuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKCFpc0xvY2FsVVJMKGhyZWYpKSB7XG4gICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgIC8vIGJyb3dzZXIgZGVmYXVsdCBiZWhhdmlvciBkb2VzIG5vdCByZXBsYWNlIHRoZSBoaXN0b3J5IHN0YXRlXG4gICAgICAvLyBzbyB3ZSBuZWVkIHRvIGRvIGl0IG1hbnVhbGx5XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGxvY2F0aW9uLnJlcGxhY2UoaHJlZilcbiAgICB9XG5cbiAgICAvLyBpZ25vcmUgY2xpY2sgZm9yIGJyb3dzZXLigJlzIGRlZmF1bHQgYmVoYXZpb3JcbiAgICByZXR1cm5cbiAgfVxuXG4gIGUucHJldmVudERlZmF1bHQoKVxuXG4gIGNvbnN0IG5hdmlnYXRlID0gKCkgPT4ge1xuICAgIGlmIChvbk5hdmlnYXRlKSB7XG4gICAgICBsZXQgaXNEZWZhdWx0UHJldmVudGVkID0gZmFsc2VcblxuICAgICAgb25OYXZpZ2F0ZSh7XG4gICAgICAgIHByZXZlbnREZWZhdWx0OiAoKSA9PiB7XG4gICAgICAgICAgaXNEZWZhdWx0UHJldmVudGVkID0gdHJ1ZVxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKGlzRGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNwYXRjaE5hdmlnYXRlQWN0aW9uKFxuICAgICAgYXMgfHwgaHJlZixcbiAgICAgIHJlcGxhY2UgPyAncmVwbGFjZScgOiAncHVzaCcsXG4gICAgICBzY3JvbGwgPz8gdHJ1ZSxcbiAgICAgIGxpbmtJbnN0YW5jZVJlZi5jdXJyZW50XG4gICAgKVxuICB9XG5cbiAgUmVhY3Quc3RhcnRUcmFuc2l0aW9uKG5hdmlnYXRlKVxufVxuXG5mdW5jdGlvbiBmb3JtYXRTdHJpbmdPclVybCh1cmxPYmpPclN0cmluZzogVXJsT2JqZWN0IHwgc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiB1cmxPYmpPclN0cmluZyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdXJsT2JqT3JTdHJpbmdcbiAgfVxuXG4gIHJldHVybiBmb3JtYXRVcmwodXJsT2JqT3JTdHJpbmcpXG59XG5cbi8qKlxuICogQSBSZWFjdCBjb21wb25lbnQgdGhhdCBleHRlbmRzIHRoZSBIVE1MIGA8YT5gIGVsZW1lbnQgdG8gcHJvdmlkZVxuICogW3ByZWZldGNoaW5nXShodHRwczovL25leHRqcy5vcmcvZG9jcy9hcHAvYnVpbGRpbmcteW91ci1hcHBsaWNhdGlvbi9yb3V0aW5nL2xpbmtpbmctYW5kLW5hdmlnYXRpbmcjMi1wcmVmZXRjaGluZylcbiAqIGFuZCBjbGllbnQtc2lkZSBuYXZpZ2F0aW9uLiBUaGlzIGlzIHRoZSBwcmltYXJ5IHdheSB0byBuYXZpZ2F0ZSBiZXR3ZWVuIHJvdXRlcyBpbiBOZXh0LmpzLlxuICpcbiAqIEByZW1hcmtzXG4gKiAtIFByZWZldGNoaW5nIGlzIG9ubHkgZW5hYmxlZCBpbiBwcm9kdWN0aW9uLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2FwaS1yZWZlcmVuY2UvY29tcG9uZW50cy9saW5rXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExpbmtDb21wb25lbnQoXG4gIHByb3BzOiBMaW5rUHJvcHMgJiB7XG4gICAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZVxuICAgIHJlZjogUmVhY3QuUmVmPEhUTUxBbmNob3JFbGVtZW50PlxuICB9XG4pIHtcbiAgY29uc3QgW2xpbmtTdGF0dXMsIHNldE9wdGltaXN0aWNMaW5rU3RhdHVzXSA9IHVzZU9wdGltaXN0aWMoSURMRV9MSU5LX1NUQVRVUylcblxuICBsZXQgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZVxuXG4gIGNvbnN0IGxpbmtJbnN0YW5jZVJlZiA9IHVzZVJlZjxMaW5rSW5zdGFuY2UgfCBudWxsPihudWxsKVxuXG4gIGNvbnN0IHtcbiAgICBocmVmOiBocmVmUHJvcCxcbiAgICBhczogYXNQcm9wLFxuICAgIGNoaWxkcmVuOiBjaGlsZHJlblByb3AsXG4gICAgcHJlZmV0Y2g6IHByZWZldGNoUHJvcCA9IG51bGwsXG4gICAgcGFzc0hyZWYsXG4gICAgcmVwbGFjZSxcbiAgICBzaGFsbG93LFxuICAgIHNjcm9sbCxcbiAgICBvbkNsaWNrLFxuICAgIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyUHJvcCxcbiAgICBvblRvdWNoU3RhcnQ6IG9uVG91Y2hTdGFydFByb3AsXG4gICAgbGVnYWN5QmVoYXZpb3IgPSBmYWxzZSxcbiAgICBvbk5hdmlnYXRlLFxuICAgIHJlZjogZm9yd2FyZGVkUmVmLFxuICAgIHVuc3RhYmxlX2R5bmFtaWNPbkhvdmVyLFxuICAgIC4uLnJlc3RQcm9wc1xuICB9ID0gcHJvcHNcblxuICBjaGlsZHJlbiA9IGNoaWxkcmVuUHJvcFxuXG4gIGlmIChcbiAgICBsZWdhY3lCZWhhdmlvciAmJlxuICAgICh0eXBlb2YgY2hpbGRyZW4gPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBjaGlsZHJlbiA9PT0gJ251bWJlcicpXG4gICkge1xuICAgIGNoaWxkcmVuID0gPGE+e2NoaWxkcmVufTwvYT5cbiAgfVxuXG4gIGNvbnN0IHJvdXRlciA9IFJlYWN0LnVzZUNvbnRleHQoQXBwUm91dGVyQ29udGV4dClcblxuICBjb25zdCBwcmVmZXRjaEVuYWJsZWQgPSBwcmVmZXRjaFByb3AgIT09IGZhbHNlXG4gIC8qKlxuICAgKiBUaGUgcG9zc2libGUgc3RhdGVzIGZvciBwcmVmZXRjaCBhcmU6XG4gICAqIC0gbnVsbDogdGhpcyBpcyB0aGUgZGVmYXVsdCBcImF1dG9cIiBtb2RlLCB3aGVyZSB3ZSB3aWxsIHByZWZldGNoIHBhcnRpYWxseSBpZiB0aGUgbGluayBpcyBpbiB0aGUgdmlld3BvcnRcbiAgICogLSB0cnVlOiB3ZSB3aWxsIHByZWZldGNoIGlmIHRoZSBsaW5rIGlzIHZpc2libGUgYW5kIHByZWZldGNoIHRoZSBmdWxsIHBhZ2UsIG5vdCBqdXN0IHBhcnRpYWxseVxuICAgKiAtIGZhbHNlOiB3ZSB3aWxsIG5vdCBwcmVmZXRjaCBpZiBpbiB0aGUgdmlld3BvcnQgYXQgYWxsXG4gICAqIC0gJ3Vuc3RhYmxlX2R5bmFtaWNPbkhvdmVyJzogdGhpcyBzdGFydHMgaW4gXCJhdXRvXCIgbW9kZSwgYnV0IHN3aXRjaGVzIHRvIFwiZnVsbFwiIHdoZW4gdGhlIGxpbmsgaXMgaG92ZXJlZFxuICAgKi9cbiAgY29uc3QgYXBwUHJlZmV0Y2hLaW5kID1cbiAgICBwcmVmZXRjaFByb3AgPT09IG51bGwgPyBQcmVmZXRjaEtpbmQuQVVUTyA6IFByZWZldGNoS2luZC5GVUxMXG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVQcm9wRXJyb3IoYXJnczoge1xuICAgICAga2V5OiBzdHJpbmdcbiAgICAgIGV4cGVjdGVkOiBzdHJpbmdcbiAgICAgIGFjdHVhbDogc3RyaW5nXG4gICAgfSkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcihcbiAgICAgICAgYEZhaWxlZCBwcm9wIHR5cGU6IFRoZSBwcm9wIFxcYCR7YXJncy5rZXl9XFxgIGV4cGVjdHMgYSAke2FyZ3MuZXhwZWN0ZWR9IGluIFxcYDxMaW5rPlxcYCwgYnV0IGdvdCBcXGAke2FyZ3MuYWN0dWFsfVxcYCBpbnN0ZWFkLmAgK1xuICAgICAgICAgICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyBcIlxcbk9wZW4geW91ciBicm93c2VyJ3MgY29uc29sZSB0byB2aWV3IHRoZSBDb21wb25lbnQgc3RhY2sgdHJhY2UuXCJcbiAgICAgICAgICAgIDogJycpXG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gVHlwZVNjcmlwdCB0cmljayBmb3IgdHlwZS1ndWFyZGluZzpcbiAgICBjb25zdCByZXF1aXJlZFByb3BzR3VhcmQ6IFJlY29yZDxMaW5rUHJvcHNSZXF1aXJlZCwgdHJ1ZT4gPSB7XG4gICAgICBocmVmOiB0cnVlLFxuICAgIH0gYXMgY29uc3RcbiAgICBjb25zdCByZXF1aXJlZFByb3BzOiBMaW5rUHJvcHNSZXF1aXJlZFtdID0gT2JqZWN0LmtleXMoXG4gICAgICByZXF1aXJlZFByb3BzR3VhcmRcbiAgICApIGFzIExpbmtQcm9wc1JlcXVpcmVkW11cbiAgICByZXF1aXJlZFByb3BzLmZvckVhY2goKGtleTogTGlua1Byb3BzUmVxdWlyZWQpID0+IHtcbiAgICAgIGlmIChrZXkgPT09ICdocmVmJykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJvcHNba2V5XSA9PSBudWxsIHx8XG4gICAgICAgICAgKHR5cGVvZiBwcm9wc1trZXldICE9PSAnc3RyaW5nJyAmJiB0eXBlb2YgcHJvcHNba2V5XSAhPT0gJ29iamVjdCcpXG4gICAgICAgICkge1xuICAgICAgICAgIHRocm93IGNyZWF0ZVByb3BFcnJvcih7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBleHBlY3RlZDogJ2BzdHJpbmdgIG9yIGBvYmplY3RgJyxcbiAgICAgICAgICAgIGFjdHVhbDogcHJvcHNba2V5XSA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBwcm9wc1trZXldLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFR5cGVTY3JpcHQgdHJpY2sgZm9yIHR5cGUtZ3VhcmRpbmc6XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgY29uc3QgXzogbmV2ZXIgPSBrZXlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gVHlwZVNjcmlwdCB0cmljayBmb3IgdHlwZS1ndWFyZGluZzpcbiAgICBjb25zdCBvcHRpb25hbFByb3BzR3VhcmQ6IFJlY29yZDxMaW5rUHJvcHNPcHRpb25hbCwgdHJ1ZT4gPSB7XG4gICAgICBhczogdHJ1ZSxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY3JvbGw6IHRydWUsXG4gICAgICBzaGFsbG93OiB0cnVlLFxuICAgICAgcGFzc0hyZWY6IHRydWUsXG4gICAgICBwcmVmZXRjaDogdHJ1ZSxcbiAgICAgIHVuc3RhYmxlX2R5bmFtaWNPbkhvdmVyOiB0cnVlLFxuICAgICAgb25DbGljazogdHJ1ZSxcbiAgICAgIG9uTW91c2VFbnRlcjogdHJ1ZSxcbiAgICAgIG9uVG91Y2hTdGFydDogdHJ1ZSxcbiAgICAgIGxlZ2FjeUJlaGF2aW9yOiB0cnVlLFxuICAgICAgb25OYXZpZ2F0ZTogdHJ1ZSxcbiAgICB9IGFzIGNvbnN0XG4gICAgY29uc3Qgb3B0aW9uYWxQcm9wczogTGlua1Byb3BzT3B0aW9uYWxbXSA9IE9iamVjdC5rZXlzKFxuICAgICAgb3B0aW9uYWxQcm9wc0d1YXJkXG4gICAgKSBhcyBMaW5rUHJvcHNPcHRpb25hbFtdXG4gICAgb3B0aW9uYWxQcm9wcy5mb3JFYWNoKChrZXk6IExpbmtQcm9wc09wdGlvbmFsKSA9PiB7XG4gICAgICBjb25zdCB2YWxUeXBlID0gdHlwZW9mIHByb3BzW2tleV1cblxuICAgICAgaWYgKGtleSA9PT0gJ2FzJykge1xuICAgICAgICBpZiAocHJvcHNba2V5XSAmJiB2YWxUeXBlICE9PSAnc3RyaW5nJyAmJiB2YWxUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHRocm93IGNyZWF0ZVByb3BFcnJvcih7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBleHBlY3RlZDogJ2BzdHJpbmdgIG9yIGBvYmplY3RgJyxcbiAgICAgICAgICAgIGFjdHVhbDogdmFsVHlwZSxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBrZXkgPT09ICdvbkNsaWNrJyB8fFxuICAgICAgICBrZXkgPT09ICdvbk1vdXNlRW50ZXInIHx8XG4gICAgICAgIGtleSA9PT0gJ29uVG91Y2hTdGFydCcgfHxcbiAgICAgICAga2V5ID09PSAnb25OYXZpZ2F0ZSdcbiAgICAgICkge1xuICAgICAgICBpZiAocHJvcHNba2V5XSAmJiB2YWxUeXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgY3JlYXRlUHJvcEVycm9yKHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIGV4cGVjdGVkOiAnYGZ1bmN0aW9uYCcsXG4gICAgICAgICAgICBhY3R1YWw6IHZhbFR5cGUsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAga2V5ID09PSAncmVwbGFjZScgfHxcbiAgICAgICAga2V5ID09PSAnc2Nyb2xsJyB8fFxuICAgICAgICBrZXkgPT09ICdzaGFsbG93JyB8fFxuICAgICAgICBrZXkgPT09ICdwYXNzSHJlZicgfHxcbiAgICAgICAga2V5ID09PSAncHJlZmV0Y2gnIHx8XG4gICAgICAgIGtleSA9PT0gJ2xlZ2FjeUJlaGF2aW9yJyB8fFxuICAgICAgICBrZXkgPT09ICd1bnN0YWJsZV9keW5hbWljT25Ib3ZlcidcbiAgICAgICkge1xuICAgICAgICBpZiAocHJvcHNba2V5XSAhPSBudWxsICYmIHZhbFR5cGUgIT09ICdib29sZWFuJykge1xuICAgICAgICAgIHRocm93IGNyZWF0ZVByb3BFcnJvcih7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBleHBlY3RlZDogJ2Bib29sZWFuYCcsXG4gICAgICAgICAgICBhY3R1YWw6IHZhbFR5cGUsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVHlwZVNjcmlwdCB0cmljayBmb3IgdHlwZS1ndWFyZGluZzpcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICBjb25zdCBfOiBuZXZlciA9IGtleVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChwcm9wcy5sb2NhbGUpIHtcbiAgICAgIHdhcm5PbmNlKFxuICAgICAgICAnVGhlIGBsb2NhbGVgIHByb3AgaXMgbm90IHN1cHBvcnRlZCBpbiBgbmV4dC9saW5rYCB3aGlsZSB1c2luZyB0aGUgYGFwcGAgcm91dGVyLiBSZWFkIG1vcmUgYWJvdXQgYXBwIHJvdXRlciBpbnRlcm5hbGl6YXRpb246IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9idWlsZGluZy15b3VyLWFwcGxpY2F0aW9uL3JvdXRpbmcvaW50ZXJuYXRpb25hbGl6YXRpb24nXG4gICAgICApXG4gICAgfVxuICAgIGlmICghYXNQcm9wKSB7XG4gICAgICBsZXQgaHJlZjogc3RyaW5nIHwgdW5kZWZpbmVkXG4gICAgICBpZiAodHlwZW9mIGhyZWZQcm9wID09PSAnc3RyaW5nJykge1xuICAgICAgICBocmVmID0gaHJlZlByb3BcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBocmVmUHJvcCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdHlwZW9mIGhyZWZQcm9wLnBhdGhuYW1lID09PSAnc3RyaW5nJ1xuICAgICAgKSB7XG4gICAgICAgIGhyZWYgPSBocmVmUHJvcC5wYXRobmFtZVxuICAgICAgfVxuXG4gICAgICBpZiAoaHJlZikge1xuICAgICAgICBjb25zdCBoYXNEeW5hbWljU2VnbWVudCA9IGhyZWZcbiAgICAgICAgICAuc3BsaXQoJy8nKVxuICAgICAgICAgIC5zb21lKChzZWdtZW50KSA9PiBzZWdtZW50LnN0YXJ0c1dpdGgoJ1snKSAmJiBzZWdtZW50LmVuZHNXaXRoKCddJykpXG5cbiAgICAgICAgaWYgKGhhc0R5bmFtaWNTZWdtZW50KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYER5bmFtaWMgaHJlZiBcXGAke2hyZWZ9XFxgIGZvdW5kIGluIDxMaW5rPiB3aGlsZSB1c2luZyB0aGUgXFxgL2FwcFxcYCByb3V0ZXIsIHRoaXMgaXMgbm90IHN1cHBvcnRlZC4gUmVhZCBtb3JlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9hcHAtZGlyLWR5bmFtaWMtaHJlZmBcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCB7IGhyZWYsIGFzIH0gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCByZXNvbHZlZEhyZWYgPSBmb3JtYXRTdHJpbmdPclVybChocmVmUHJvcClcbiAgICByZXR1cm4ge1xuICAgICAgaHJlZjogcmVzb2x2ZWRIcmVmLFxuICAgICAgYXM6IGFzUHJvcCA/IGZvcm1hdFN0cmluZ09yVXJsKGFzUHJvcCkgOiByZXNvbHZlZEhyZWYsXG4gICAgfVxuICB9LCBbaHJlZlByb3AsIGFzUHJvcF0pXG5cbiAgLy8gVGhpcyB3aWxsIHJldHVybiB0aGUgZmlyc3QgY2hpbGQsIGlmIG11bHRpcGxlIGFyZSBwcm92aWRlZCBpdCB3aWxsIHRocm93IGFuIGVycm9yXG4gIGxldCBjaGlsZDogYW55XG4gIGlmIChsZWdhY3lCZWhhdmlvcikge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBcIm9uQ2xpY2tcIiB3YXMgcGFzc2VkIHRvIDxMaW5rPiB3aXRoIFxcYGhyZWZcXGAgb2YgXFxgJHtocmVmUHJvcH1cXGAgYnV0IFwibGVnYWN5QmVoYXZpb3JcIiB3YXMgc2V0LiBUaGUgbGVnYWN5IGJlaGF2aW9yIHJlcXVpcmVzIG9uQ2xpY2sgYmUgc2V0IG9uIHRoZSBjaGlsZCBvZiBuZXh0L2xpbmtgXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChvbk1vdXNlRW50ZXJQcm9wKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgXCJvbk1vdXNlRW50ZXJcIiB3YXMgcGFzc2VkIHRvIDxMaW5rPiB3aXRoIFxcYGhyZWZcXGAgb2YgXFxgJHtocmVmUHJvcH1cXGAgYnV0IFwibGVnYWN5QmVoYXZpb3JcIiB3YXMgc2V0LiBUaGUgbGVnYWN5IGJlaGF2aW9yIHJlcXVpcmVzIG9uTW91c2VFbnRlciBiZSBzZXQgb24gdGhlIGNoaWxkIG9mIG5leHQvbGlua2BcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgY2hpbGQgPSBSZWFjdC5DaGlsZHJlbi5vbmx5KGNoaWxkcmVuKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghY2hpbGRyZW4pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgTm8gY2hpbGRyZW4gd2VyZSBwYXNzZWQgdG8gPExpbms+IHdpdGggXFxgaHJlZlxcYCBvZiBcXGAke2hyZWZQcm9wfVxcYCBidXQgb25lIGNoaWxkIGlzIHJlcXVpcmVkIGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL2xpbmstbm8tY2hpbGRyZW5gXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgTXVsdGlwbGUgY2hpbGRyZW4gd2VyZSBwYXNzZWQgdG8gPExpbms+IHdpdGggXFxgaHJlZlxcYCBvZiBcXGAke2hyZWZQcm9wfVxcYCBidXQgb25seSBvbmUgY2hpbGQgaXMgc3VwcG9ydGVkIGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL2xpbmstbXVsdGlwbGUtY2hpbGRyZW5gICtcbiAgICAgICAgICAgICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICA/IFwiIFxcbk9wZW4geW91ciBicm93c2VyJ3MgY29uc29sZSB0byB2aWV3IHRoZSBDb21wb25lbnQgc3RhY2sgdHJhY2UuXCJcbiAgICAgICAgICAgICAgOiAnJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZCA9IFJlYWN0LkNoaWxkcmVuLm9ubHkoY2hpbGRyZW4pXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgaWYgKChjaGlsZHJlbiBhcyBhbnkpPy50eXBlID09PSAnYScpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdJbnZhbGlkIDxMaW5rPiB3aXRoIDxhPiBjaGlsZC4gUGxlYXNlIHJlbW92ZSA8YT4gb3IgdXNlIDxMaW5rIGxlZ2FjeUJlaGF2aW9yPi5cXG5MZWFybiBtb3JlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9pbnZhbGlkLW5ldy1saW5rLXdpdGgtZXh0cmEtYW5jaG9yJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY2hpbGRSZWY6IGFueSA9IGxlZ2FjeUJlaGF2aW9yXG4gICAgPyBjaGlsZCAmJiB0eXBlb2YgY2hpbGQgPT09ICdvYmplY3QnICYmIGNoaWxkLnJlZlxuICAgIDogZm9yd2FyZGVkUmVmXG5cbiAgLy8gVXNlIGEgY2FsbGJhY2sgcmVmIHRvIGF0dGFjaCBhbiBJbnRlcnNlY3Rpb25PYnNlcnZlciB0byB0aGUgYW5jaG9yIHRhZyBvblxuICAvLyBtb3VudC4gSW4gdGhlIGZ1dHVyZSB3ZSB3aWxsIGFsc28gdXNlIHRoaXMgdG8ga2VlcCB0cmFjayBvZiBhbGwgdGhlXG4gIC8vIGN1cnJlbnRseSBtb3VudGVkIDxMaW5rPiBpbnN0YW5jZXMsIGUuZy4gc28gd2UgY2FuIHJlLXByZWZldGNoIHRoZW0gYWZ0ZXJcbiAgLy8gYSByZXZhbGlkYXRpb24gb3IgcmVmcmVzaC5cbiAgY29uc3Qgb2JzZXJ2ZUxpbmtWaXNpYmlsaXR5T25Nb3VudCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChlbGVtZW50OiBIVE1MQW5jaG9yRWxlbWVudCB8IFNWR0FFbGVtZW50KSA9PiB7XG4gICAgICBpZiAocm91dGVyICE9PSBudWxsKSB7XG4gICAgICAgIGxpbmtJbnN0YW5jZVJlZi5jdXJyZW50ID0gbW91bnRMaW5rSW5zdGFuY2UoXG4gICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICBocmVmLFxuICAgICAgICAgIHJvdXRlcixcbiAgICAgICAgICBhcHBQcmVmZXRjaEtpbmQsXG4gICAgICAgICAgcHJlZmV0Y2hFbmFibGVkLFxuICAgICAgICAgIHNldE9wdGltaXN0aWNMaW5rU3RhdHVzXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKGxpbmtJbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgdW5tb3VudExpbmtGb3JDdXJyZW50TmF2aWdhdGlvbihsaW5rSW5zdGFuY2VSZWYuY3VycmVudClcbiAgICAgICAgICBsaW5rSW5zdGFuY2VSZWYuY3VycmVudCA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICB1bm1vdW50UHJlZmV0Y2hhYmxlSW5zdGFuY2UoZWxlbWVudClcbiAgICAgIH1cbiAgICB9LFxuICAgIFtwcmVmZXRjaEVuYWJsZWQsIGhyZWYsIHJvdXRlciwgYXBwUHJlZmV0Y2hLaW5kLCBzZXRPcHRpbWlzdGljTGlua1N0YXR1c11cbiAgKVxuXG4gIGNvbnN0IG1lcmdlZFJlZiA9IHVzZU1lcmdlZFJlZihvYnNlcnZlTGlua1Zpc2liaWxpdHlPbk1vdW50LCBjaGlsZFJlZilcblxuICBjb25zdCBjaGlsZFByb3BzOiB7XG4gICAgb25Ub3VjaFN0YXJ0PzogUmVhY3QuVG91Y2hFdmVudEhhbmRsZXI8SFRNTEFuY2hvckVsZW1lbnQ+XG4gICAgb25Nb3VzZUVudGVyOiBSZWFjdC5Nb3VzZUV2ZW50SGFuZGxlcjxIVE1MQW5jaG9yRWxlbWVudD5cbiAgICBvbkNsaWNrOiBSZWFjdC5Nb3VzZUV2ZW50SGFuZGxlcjxIVE1MQW5jaG9yRWxlbWVudD5cbiAgICBocmVmPzogc3RyaW5nXG4gICAgcmVmPzogYW55XG4gIH0gPSB7XG4gICAgcmVmOiBtZXJnZWRSZWYsXG4gICAgb25DbGljayhlKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAoIWUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgQ29tcG9uZW50IHJlbmRlcmVkIGluc2lkZSBuZXh0L2xpbmsgaGFzIHRvIHBhc3MgY2xpY2sgZXZlbnQgdG8gXCJvbkNsaWNrXCIgcHJvcC5gXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghbGVnYWN5QmVoYXZpb3IgJiYgdHlwZW9mIG9uQ2xpY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb25DbGljayhlKVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGxlZ2FjeUJlaGF2aW9yICYmXG4gICAgICAgIGNoaWxkLnByb3BzICYmXG4gICAgICAgIHR5cGVvZiBjaGlsZC5wcm9wcy5vbkNsaWNrID09PSAnZnVuY3Rpb24nXG4gICAgICApIHtcbiAgICAgICAgY2hpbGQucHJvcHMub25DbGljayhlKVxuICAgICAgfVxuXG4gICAgICBpZiAoIXJvdXRlcikge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgbGlua0NsaWNrZWQoZSwgaHJlZiwgYXMsIGxpbmtJbnN0YW5jZVJlZiwgcmVwbGFjZSwgc2Nyb2xsLCBvbk5hdmlnYXRlKVxuICAgIH0sXG4gICAgb25Nb3VzZUVudGVyKGUpIHtcbiAgICAgIGlmICghbGVnYWN5QmVoYXZpb3IgJiYgdHlwZW9mIG9uTW91c2VFbnRlclByb3AgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb25Nb3VzZUVudGVyUHJvcChlKVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGxlZ2FjeUJlaGF2aW9yICYmXG4gICAgICAgIGNoaWxkLnByb3BzICYmXG4gICAgICAgIHR5cGVvZiBjaGlsZC5wcm9wcy5vbk1vdXNlRW50ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICkge1xuICAgICAgICBjaGlsZC5wcm9wcy5vbk1vdXNlRW50ZXIoZSlcbiAgICAgIH1cblxuICAgICAgaWYgKCFyb3V0ZXIpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmICghcHJlZmV0Y2hFbmFibGVkIHx8IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGdyYWRlVG9EeW5hbWljUHJlZmV0Y2ggPSB1bnN0YWJsZV9keW5hbWljT25Ib3ZlciA9PT0gdHJ1ZVxuICAgICAgb25OYXZpZ2F0aW9uSW50ZW50KFxuICAgICAgICBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEFuY2hvckVsZW1lbnQgfCBTVkdBRWxlbWVudCxcbiAgICAgICAgdXBncmFkZVRvRHluYW1pY1ByZWZldGNoXG4gICAgICApXG4gICAgfSxcbiAgICBvblRvdWNoU3RhcnQ6IHByb2Nlc3MuZW52Ll9fTkVYVF9MSU5LX05PX1RPVUNIX1NUQVJUXG4gICAgICA/IHVuZGVmaW5lZFxuICAgICAgOiBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZSkge1xuICAgICAgICAgIGlmICghbGVnYWN5QmVoYXZpb3IgJiYgdHlwZW9mIG9uVG91Y2hTdGFydFByb3AgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uVG91Y2hTdGFydFByb3AoZSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBsZWdhY3lCZWhhdmlvciAmJlxuICAgICAgICAgICAgY2hpbGQucHJvcHMgJiZcbiAgICAgICAgICAgIHR5cGVvZiBjaGlsZC5wcm9wcy5vblRvdWNoU3RhcnQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNoaWxkLnByb3BzLm9uVG91Y2hTdGFydChlKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghcm91dGVyKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXByZWZldGNoRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdXBncmFkZVRvRHluYW1pY1ByZWZldGNoID0gdW5zdGFibGVfZHluYW1pY09uSG92ZXIgPT09IHRydWVcbiAgICAgICAgICBvbk5hdmlnYXRpb25JbnRlbnQoXG4gICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEFuY2hvckVsZW1lbnQgfCBTVkdBRWxlbWVudCxcbiAgICAgICAgICAgIHVwZ3JhZGVUb0R5bmFtaWNQcmVmZXRjaFxuICAgICAgICAgIClcbiAgICAgICAgfSxcbiAgfVxuXG4gIC8vIElmIGNoaWxkIGlzIGFuIDxhPiB0YWcgYW5kIGRvZXNuJ3QgaGF2ZSBhIGhyZWYgYXR0cmlidXRlLCBvciBpZiB0aGUgJ3Bhc3NIcmVmJyBwcm9wZXJ0eSBpc1xuICAvLyBkZWZpbmVkLCB3ZSBzcGVjaWZ5IHRoZSBjdXJyZW50ICdocmVmJywgc28gdGhhdCByZXBldGl0aW9uIGlzIG5vdCBuZWVkZWQgYnkgdGhlIHVzZXIuXG4gIC8vIElmIHRoZSB1cmwgaXMgYWJzb2x1dGUsIHdlIGNhbiBieXBhc3MgdGhlIGxvZ2ljIHRvIHByZXBlbmQgdGhlIGJhc2VQYXRoLlxuICBpZiAoaXNBYnNvbHV0ZVVybChhcykpIHtcbiAgICBjaGlsZFByb3BzLmhyZWYgPSBhc1xuICB9IGVsc2UgaWYgKFxuICAgICFsZWdhY3lCZWhhdmlvciB8fFxuICAgIHBhc3NIcmVmIHx8XG4gICAgKGNoaWxkLnR5cGUgPT09ICdhJyAmJiAhKCdocmVmJyBpbiBjaGlsZC5wcm9wcykpXG4gICkge1xuICAgIGNoaWxkUHJvcHMuaHJlZiA9IGFkZEJhc2VQYXRoKGFzKVxuICB9XG5cbiAgbGV0IGxpbms6IFJlYWN0LlJlYWN0Tm9kZVxuXG4gIGlmIChsZWdhY3lCZWhhdmlvcikge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgZXJyb3JPbmNlKFxuICAgICAgICAnYGxlZ2FjeUJlaGF2aW9yYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgJyArXG4gICAgICAgICAgJ3JlbGVhc2UuIEEgY29kZW1vZCBpcyBhdmFpbGFibGUgdG8gdXBncmFkZSB5b3VyIGNvbXBvbmVudHM6XFxuXFxuJyArXG4gICAgICAgICAgJ25weCBAbmV4dC9jb2RlbW9kQGxhdGVzdCBuZXctbGluayAuXFxuXFxuJyArXG4gICAgICAgICAgJ0xlYXJuIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9idWlsZGluZy15b3VyLWFwcGxpY2F0aW9uL3VwZ3JhZGluZy9jb2RlbW9kcyNyZW1vdmUtYS10YWdzLWZyb20tbGluay1jb21wb25lbnRzJ1xuICAgICAgKVxuICAgIH1cbiAgICBsaW5rID0gUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCBjaGlsZFByb3BzKVxuICB9IGVsc2Uge1xuICAgIGxpbmsgPSAoXG4gICAgICA8YSB7Li4ucmVzdFByb3BzfSB7Li4uY2hpbGRQcm9wc30+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvYT5cbiAgICApXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxMaW5rU3RhdHVzQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17bGlua1N0YXR1c30+XG4gICAgICB7bGlua31cbiAgICA8L0xpbmtTdGF0dXNDb250ZXh0LlByb3ZpZGVyPlxuICApXG59XG5cbmNvbnN0IExpbmtTdGF0dXNDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxcbiAgdHlwZW9mIFBFTkRJTkdfTElOS19TVEFUVVMgfCB0eXBlb2YgSURMRV9MSU5LX1NUQVRVU1xuPihJRExFX0xJTktfU1RBVFVTKVxuXG5leHBvcnQgY29uc3QgdXNlTGlua1N0YXR1cyA9ICgpID0+IHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoTGlua1N0YXR1c0NvbnRleHQpXG59XG4iXSwibmFtZXMiOlsiTGlua0NvbXBvbmVudCIsInVzZUxpbmtTdGF0dXMiLCJpc01vZGlmaWVkRXZlbnQiLCJldmVudCIsImV2ZW50VGFyZ2V0IiwiY3VycmVudFRhcmdldCIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsIm1ldGFLZXkiLCJjdHJsS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJuYXRpdmVFdmVudCIsIndoaWNoIiwibGlua0NsaWNrZWQiLCJlIiwiaHJlZiIsImFzIiwibGlua0luc3RhbmNlUmVmIiwicmVwbGFjZSIsInNjcm9sbCIsIm9uTmF2aWdhdGUiLCJub2RlTmFtZSIsImlzQW5jaG9yTm9kZU5hbWUiLCJ0b1VwcGVyQ2FzZSIsImhhc0F0dHJpYnV0ZSIsImlzTG9jYWxVUkwiLCJwcmV2ZW50RGVmYXVsdCIsImxvY2F0aW9uIiwibmF2aWdhdGUiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJkaXNwYXRjaE5hdmlnYXRlQWN0aW9uIiwiY3VycmVudCIsIlJlYWN0Iiwic3RhcnRUcmFuc2l0aW9uIiwiZm9ybWF0U3RyaW5nT3JVcmwiLCJ1cmxPYmpPclN0cmluZyIsImZvcm1hdFVybCIsInByb3BzIiwibGlua1N0YXR1cyIsInNldE9wdGltaXN0aWNMaW5rU3RhdHVzIiwidXNlT3B0aW1pc3RpYyIsIklETEVfTElOS19TVEFUVVMiLCJjaGlsZHJlbiIsInVzZVJlZiIsImhyZWZQcm9wIiwiYXNQcm9wIiwiY2hpbGRyZW5Qcm9wIiwicHJlZmV0Y2giLCJwcmVmZXRjaFByb3AiLCJwYXNzSHJlZiIsInNoYWxsb3ciLCJvbkNsaWNrIiwib25Nb3VzZUVudGVyIiwib25Nb3VzZUVudGVyUHJvcCIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hTdGFydFByb3AiLCJsZWdhY3lCZWhhdmlvciIsInJlZiIsImZvcndhcmRlZFJlZiIsInVuc3RhYmxlX2R5bmFtaWNPbkhvdmVyIiwicmVzdFByb3BzIiwiYSIsInJvdXRlciIsInVzZUNvbnRleHQiLCJBcHBSb3V0ZXJDb250ZXh0IiwicHJlZmV0Y2hFbmFibGVkIiwiYXBwUHJlZmV0Y2hLaW5kIiwiUHJlZmV0Y2hLaW5kIiwiQVVUTyIsIkZVTEwiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJjcmVhdGVQcm9wRXJyb3IiLCJhcmdzIiwiRXJyb3IiLCJrZXkiLCJleHBlY3RlZCIsImFjdHVhbCIsIndpbmRvdyIsInJlcXVpcmVkUHJvcHNHdWFyZCIsInJlcXVpcmVkUHJvcHMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsIl8iLCJvcHRpb25hbFByb3BzR3VhcmQiLCJvcHRpb25hbFByb3BzIiwidmFsVHlwZSIsImxvY2FsZSIsIndhcm5PbmNlIiwicGF0aG5hbWUiLCJoYXNEeW5hbWljU2VnbWVudCIsInNwbGl0Iiwic29tZSIsInNlZ21lbnQiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJ1c2VNZW1vIiwicmVzb2x2ZWRIcmVmIiwiY2hpbGQiLCJjb25zb2xlIiwid2FybiIsIkNoaWxkcmVuIiwib25seSIsImVyciIsInR5cGUiLCJjaGlsZFJlZiIsIm9ic2VydmVMaW5rVmlzaWJpbGl0eU9uTW91bnQiLCJ1c2VDYWxsYmFjayIsImVsZW1lbnQiLCJtb3VudExpbmtJbnN0YW5jZSIsInVubW91bnRMaW5rRm9yQ3VycmVudE5hdmlnYXRpb24iLCJ1bm1vdW50UHJlZmV0Y2hhYmxlSW5zdGFuY2UiLCJtZXJnZWRSZWYiLCJ1c2VNZXJnZWRSZWYiLCJjaGlsZFByb3BzIiwiZGVmYXVsdFByZXZlbnRlZCIsInVwZ3JhZGVUb0R5bmFtaWNQcmVmZXRjaCIsIm9uTmF2aWdhdGlvbkludGVudCIsIl9fTkVYVF9MSU5LX05PX1RPVUNIX1NUQVJUIiwidW5kZWZpbmVkIiwiaXNBYnNvbHV0ZVVybCIsImFkZEJhc2VQYXRoIiwibGluayIsImVycm9yT25jZSIsImNsb25lRWxlbWVudCIsIkxpbmtTdGF0dXNDb250ZXh0IiwiUHJvdmlkZXIiLCJ2YWx1ZSIsImNyZWF0ZUNvbnRleHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/app-dir/link.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/client/components/hooks-server-context.js":
/*!**************************************************************************!*\
  !*** ./node_modules/next/dist/client/components/hooks-server-context.js ***!
  \**************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    DynamicServerError: function() {\n        return DynamicServerError;\n    },\n    isDynamicServerError: function() {\n        return isDynamicServerError;\n    }\n});\nconst DYNAMIC_ERROR_CODE = 'DYNAMIC_SERVER_USAGE';\nclass DynamicServerError extends Error {\n    constructor(description){\n        super(\"Dynamic server usage: \" + description), this.description = description, this.digest = DYNAMIC_ERROR_CODE;\n    }\n}\nfunction isDynamicServerError(err) {\n    if (typeof err !== 'object' || err === null || !('digest' in err) || typeof err.digest !== 'string') {\n        return false;\n    }\n    return err.digest === DYNAMIC_ERROR_CODE;\n}\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n    Object.defineProperty(exports.default, '__esModule', {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=hooks-server-context.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvaG9va3Mtc2VydmVyLWNvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0lBRWFBLGtCQUFrQjtlQUFsQkE7O0lBUUdDLG9CQUFvQjtlQUFwQkE7OztBQVZoQixNQUFNQyxxQkFBcUI7QUFFcEIsTUFBTUYsMkJBQTJCRztJQUd0Q0MsWUFBNEJDLFdBQW1CLENBQUU7UUFDL0MsS0FBSyxDQUFFLDJCQUF3QkEsY0FBQUEsSUFBQUEsQ0FETEEsV0FBQUEsR0FBQUEsYUFBQUEsSUFBQUEsQ0FGNUJDLE1BQUFBLEdBQW9DSjtJQUlwQztBQUNGO0FBRU8sU0FBU0QscUJBQXFCTSxHQUFZO0lBQy9DLElBQ0UsT0FBT0EsUUFBUSxZQUNmQSxRQUFRLFFBQ1IsQ0FBRSxhQUFZQSxHQUFBQSxDQUFFLElBQ2hCLE9BQU9BLElBQUlELE1BQU0sS0FBSyxVQUN0QjtRQUNBLE9BQU87SUFDVDtJQUVBLE9BQU9DLElBQUlELE1BQU0sS0FBS0o7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXHNyY1xcY2xpZW50XFxjb21wb25lbnRzXFxob29rcy1zZXJ2ZXItY29udGV4dC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEWU5BTUlDX0VSUk9SX0NPREUgPSAnRFlOQU1JQ19TRVJWRVJfVVNBR0UnXG5cbmV4cG9ydCBjbGFzcyBEeW5hbWljU2VydmVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGRpZ2VzdDogdHlwZW9mIERZTkFNSUNfRVJST1JfQ09ERSA9IERZTkFNSUNfRVJST1JfQ09ERVxuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBkZXNjcmlwdGlvbjogc3RyaW5nKSB7XG4gICAgc3VwZXIoYER5bmFtaWMgc2VydmVyIHVzYWdlOiAke2Rlc2NyaXB0aW9ufWApXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRHluYW1pY1NlcnZlckVycm9yKGVycjogdW5rbm93bik6IGVyciBpcyBEeW5hbWljU2VydmVyRXJyb3Ige1xuICBpZiAoXG4gICAgdHlwZW9mIGVyciAhPT0gJ29iamVjdCcgfHxcbiAgICBlcnIgPT09IG51bGwgfHxcbiAgICAhKCdkaWdlc3QnIGluIGVycikgfHxcbiAgICB0eXBlb2YgZXJyLmRpZ2VzdCAhPT0gJ3N0cmluZydcbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gZXJyLmRpZ2VzdCA9PT0gRFlOQU1JQ19FUlJPUl9DT0RFXG59XG4iXSwibmFtZXMiOlsiRHluYW1pY1NlcnZlckVycm9yIiwiaXNEeW5hbWljU2VydmVyRXJyb3IiLCJEWU5BTUlDX0VSUk9SX0NPREUiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwiZGVzY3JpcHRpb24iLCJkaWdlc3QiLCJlcnIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/hooks-server-context.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/client/components/static-generation-bailout.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/next/dist/client/components/static-generation-bailout.js ***!
  \*******************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    StaticGenBailoutError: function() {\n        return StaticGenBailoutError;\n    },\n    isStaticGenBailoutError: function() {\n        return isStaticGenBailoutError;\n    }\n});\nconst NEXT_STATIC_GEN_BAILOUT = 'NEXT_STATIC_GEN_BAILOUT';\nclass StaticGenBailoutError extends Error {\n    constructor(...args){\n        super(...args), this.code = NEXT_STATIC_GEN_BAILOUT;\n    }\n}\nfunction isStaticGenBailoutError(error) {\n    if (typeof error !== 'object' || error === null || !('code' in error)) {\n        return false;\n    }\n    return error.code === NEXT_STATIC_GEN_BAILOUT;\n}\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n    Object.defineProperty(exports.default, '__esModule', {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=static-generation-bailout.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvc3RhdGljLWdlbmVyYXRpb24tYmFpbG91dC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUFFYUEscUJBQXFCO2VBQXJCQTs7SUFJR0MsdUJBQXVCO2VBQXZCQTs7O0FBTmhCLE1BQU1DLDBCQUEwQjtBQUV6QixNQUFNRiw4QkFBOEJHOztRQUFwQyxxQkFDV0MsSUFBQUEsR0FBT0Y7O0FBQ3pCO0FBRU8sU0FBU0Qsd0JBQ2RJLEtBQWM7SUFFZCxJQUFJLE9BQU9BLFVBQVUsWUFBWUEsVUFBVSxRQUFRLENBQUUsV0FBVUEsS0FBQUEsQ0FBSSxFQUFJO1FBQ3JFLE9BQU87SUFDVDtJQUVBLE9BQU9BLE1BQU1ELElBQUksS0FBS0Y7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXHNyY1xcY2xpZW50XFxjb21wb25lbnRzXFxzdGF0aWMtZ2VuZXJhdGlvbi1iYWlsb3V0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE5FWFRfU1RBVElDX0dFTl9CQUlMT1VUID0gJ05FWFRfU1RBVElDX0dFTl9CQUlMT1VUJ1xuXG5leHBvcnQgY2xhc3MgU3RhdGljR2VuQmFpbG91dEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgY29kZSA9IE5FWFRfU1RBVElDX0dFTl9CQUlMT1VUXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0YXRpY0dlbkJhaWxvdXRFcnJvcihcbiAgZXJyb3I6IHVua25vd25cbik6IGVycm9yIGlzIFN0YXRpY0dlbkJhaWxvdXRFcnJvciB7XG4gIGlmICh0eXBlb2YgZXJyb3IgIT09ICdvYmplY3QnIHx8IGVycm9yID09PSBudWxsIHx8ICEoJ2NvZGUnIGluIGVycm9yKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIGVycm9yLmNvZGUgPT09IE5FWFRfU1RBVElDX0dFTl9CQUlMT1VUXG59XG4iXSwibmFtZXMiOlsiU3RhdGljR2VuQmFpbG91dEVycm9yIiwiaXNTdGF0aWNHZW5CYWlsb3V0RXJyb3IiLCJORVhUX1NUQVRJQ19HRU5fQkFJTE9VVCIsIkVycm9yIiwiY29kZSIsImVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/static-generation-bailout.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/client/use-merged-ref.js":
/*!*********************************************************!*\
  !*** ./node_modules/next/dist/client/use-merged-ref.js ***!
  \*********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"useMergedRef\", ({\n    enumerable: true,\n    get: function() {\n        return useMergedRef;\n    }\n}));\nconst _react = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\nfunction useMergedRef(refA, refB) {\n    const cleanupA = (0, _react.useRef)(null);\n    const cleanupB = (0, _react.useRef)(null);\n    // NOTE: In theory, we could skip the wrapping if only one of the refs is non-null.\n    // (this happens often if the user doesn't pass a ref to Link/Form/Image)\n    // But this can cause us to leak a cleanup-ref into user code (e.g. via `<Link legacyBehavior>`),\n    // and the user might pass that ref into ref-merging library that doesn't support cleanup refs\n    // (because it hasn't been updated for React 19)\n    // which can then cause things to blow up, because a cleanup-returning ref gets called with `null`.\n    // So in practice, it's safer to be defensive and always wrap the ref, even on React 19.\n    return (0, _react.useCallback)((current)=>{\n        if (current === null) {\n            const cleanupFnA = cleanupA.current;\n            if (cleanupFnA) {\n                cleanupA.current = null;\n                cleanupFnA();\n            }\n            const cleanupFnB = cleanupB.current;\n            if (cleanupFnB) {\n                cleanupB.current = null;\n                cleanupFnB();\n            }\n        } else {\n            if (refA) {\n                cleanupA.current = applyRef(refA, current);\n            }\n            if (refB) {\n                cleanupB.current = applyRef(refB, current);\n            }\n        }\n    }, [\n        refA,\n        refB\n    ]);\n}\nfunction applyRef(refA, current) {\n    if (typeof refA === 'function') {\n        const cleanup = refA(current);\n        if (typeof cleanup === 'function') {\n            return cleanup;\n        } else {\n            return ()=>refA(null);\n        }\n    } else {\n        refA.current = current;\n        return ()=>{\n            refA.current = null;\n        };\n    }\n}\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n    Object.defineProperty(exports.default, '__esModule', {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=use-merged-ref.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L3VzZS1tZXJnZWQtcmVmLmpzIiwibWFwcGluZ3MiOiI7Ozs7Z0RBU2dCQTs7O2VBQUFBOzs7bUNBVDhCO0FBU3ZDLFNBQVNBLGFBQ2RDLElBQW1CLEVBQ25CQyxJQUFtQjtJQUVuQixNQUFNQyxXQUFXQyxDQUFBQSxHQUFBQSxPQUFBQSxNQUFBQSxFQUE0QjtJQUM3QyxNQUFNQyxXQUFXRCxDQUFBQSxHQUFBQSxPQUFBQSxNQUFBQSxFQUE0QjtJQUU3QyxtRkFBbUY7SUFDbkYseUVBQXlFO0lBQ3pFLGlHQUFpRztJQUNqRyw4RkFBOEY7SUFDOUYsZ0RBQWdEO0lBQ2hELG1HQUFtRztJQUNuRyx3RkFBd0Y7SUFDeEYsT0FBT0UsQ0FBQUEsR0FBQUEsT0FBQUEsV0FBQUEsRUFDTCxDQUFDQztRQUNDLElBQUlBLFlBQVksTUFBTTtZQUNwQixNQUFNQyxhQUFhTCxTQUFTSSxPQUFPO1lBQ25DLElBQUlDLFlBQVk7Z0JBQ2RMLFNBQVNJLE9BQU8sR0FBRztnQkFDbkJDO1lBQ0Y7WUFDQSxNQUFNQyxhQUFhSixTQUFTRSxPQUFPO1lBQ25DLElBQUlFLFlBQVk7Z0JBQ2RKLFNBQVNFLE9BQU8sR0FBRztnQkFDbkJFO1lBQ0Y7UUFDRixPQUFPO1lBQ0wsSUFBSVIsTUFBTTtnQkFDUkUsU0FBU0ksT0FBTyxHQUFHRyxTQUFTVCxNQUFNTTtZQUNwQztZQUNBLElBQUlMLE1BQU07Z0JBQ1JHLFNBQVNFLE9BQU8sR0FBR0csU0FBU1IsTUFBTUs7WUFDcEM7UUFDRjtJQUNGLEdBQ0E7UUFBQ047UUFBTUM7S0FBSztBQUVoQjtBQUVBLFNBQVNRLFNBQ1BULElBQWdDLEVBQ2hDTSxPQUFpQjtJQUVqQixJQUFJLE9BQU9OLFNBQVMsWUFBWTtRQUM5QixNQUFNVSxVQUFVVixLQUFLTTtRQUNyQixJQUFJLE9BQU9JLFlBQVksWUFBWTtZQUNqQyxPQUFPQTtRQUNULE9BQU87WUFDTCxPQUFPLElBQU1WLEtBQUs7UUFDcEI7SUFDRixPQUFPO1FBQ0xBLEtBQUtNLE9BQU8sR0FBR0E7UUFDZixPQUFPO1lBQ0xOLEtBQUtNLE9BQU8sR0FBRztRQUNqQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxzcmNcXGNsaWVudFxcdXNlLW1lcmdlZC1yZWYudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdHlwZSBSZWYgfSBmcm9tICdyZWFjdCdcblxuLy8gVGhpcyBpcyBhIGNvbXBhdGliaWxpdHkgaG9vayB0byBzdXBwb3J0IFJlYWN0IDE4IGFuZCAxOSByZWZzLlxuLy8gSW4gMTksIGEgY2xlYW51cCBmdW5jdGlvbiBmcm9tIHJlZnMgbWF5IGJlIHJldHVybmVkLlxuLy8gSW4gMTgsIHJldHVybmluZyBhIGNsZWFudXAgZnVuY3Rpb24gY3JlYXRlcyBhIHdhcm5pbmcuXG4vLyBTaW5jZSB3ZSB0YWtlIHVzZXJzcGFjZSByZWZzLCB3ZSBkb24ndCBrbm93IGFoZWFkIG9mIHRpbWUgaWYgYSBjbGVhbnVwIGZ1bmN0aW9uIHdpbGwgYmUgcmV0dXJuZWQuXG4vLyBUaGlzIGltcGxlbWVudHMgY2xlYW51cCBmdW5jdGlvbnMgd2l0aCB0aGUgb2xkIGJlaGF2aW9yIGluIDE4LlxuLy8gV2Uga25vdyByZWZzIGFyZSBhbHdheXMgY2FsbGVkIGFsdGVybmF0aW5nIHdpdGggYG51bGxgIGFuZCB0aGVuIGBUYC5cbi8vIFNvIGEgY2FsbCB3aXRoIGBudWxsYCBtZWFucyB3ZSBuZWVkIHRvIGNhbGwgdGhlIHByZXZpb3VzIGNsZWFudXAgZnVuY3Rpb25zLlxuZXhwb3J0IGZ1bmN0aW9uIHVzZU1lcmdlZFJlZjxURWxlbWVudD4oXG4gIHJlZkE6IFJlZjxURWxlbWVudD4sXG4gIHJlZkI6IFJlZjxURWxlbWVudD5cbik6IFJlZjxURWxlbWVudD4ge1xuICBjb25zdCBjbGVhbnVwQSA9IHVzZVJlZjwoKCkgPT4gdm9pZCkgfCBudWxsPihudWxsKVxuICBjb25zdCBjbGVhbnVwQiA9IHVzZVJlZjwoKCkgPT4gdm9pZCkgfCBudWxsPihudWxsKVxuXG4gIC8vIE5PVEU6IEluIHRoZW9yeSwgd2UgY291bGQgc2tpcCB0aGUgd3JhcHBpbmcgaWYgb25seSBvbmUgb2YgdGhlIHJlZnMgaXMgbm9uLW51bGwuXG4gIC8vICh0aGlzIGhhcHBlbnMgb2Z0ZW4gaWYgdGhlIHVzZXIgZG9lc24ndCBwYXNzIGEgcmVmIHRvIExpbmsvRm9ybS9JbWFnZSlcbiAgLy8gQnV0IHRoaXMgY2FuIGNhdXNlIHVzIHRvIGxlYWsgYSBjbGVhbnVwLXJlZiBpbnRvIHVzZXIgY29kZSAoZS5nLiB2aWEgYDxMaW5rIGxlZ2FjeUJlaGF2aW9yPmApLFxuICAvLyBhbmQgdGhlIHVzZXIgbWlnaHQgcGFzcyB0aGF0IHJlZiBpbnRvIHJlZi1tZXJnaW5nIGxpYnJhcnkgdGhhdCBkb2Vzbid0IHN1cHBvcnQgY2xlYW51cCByZWZzXG4gIC8vIChiZWNhdXNlIGl0IGhhc24ndCBiZWVuIHVwZGF0ZWQgZm9yIFJlYWN0IDE5KVxuICAvLyB3aGljaCBjYW4gdGhlbiBjYXVzZSB0aGluZ3MgdG8gYmxvdyB1cCwgYmVjYXVzZSBhIGNsZWFudXAtcmV0dXJuaW5nIHJlZiBnZXRzIGNhbGxlZCB3aXRoIGBudWxsYC5cbiAgLy8gU28gaW4gcHJhY3RpY2UsIGl0J3Mgc2FmZXIgdG8gYmUgZGVmZW5zaXZlIGFuZCBhbHdheXMgd3JhcCB0aGUgcmVmLCBldmVuIG9uIFJlYWN0IDE5LlxuICByZXR1cm4gdXNlQ2FsbGJhY2soXG4gICAgKGN1cnJlbnQ6IFRFbGVtZW50IHwgbnVsbCk6IHZvaWQgPT4ge1xuICAgICAgaWYgKGN1cnJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgY2xlYW51cEZuQSA9IGNsZWFudXBBLmN1cnJlbnRcbiAgICAgICAgaWYgKGNsZWFudXBGbkEpIHtcbiAgICAgICAgICBjbGVhbnVwQS5jdXJyZW50ID0gbnVsbFxuICAgICAgICAgIGNsZWFudXBGbkEoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsZWFudXBGbkIgPSBjbGVhbnVwQi5jdXJyZW50XG4gICAgICAgIGlmIChjbGVhbnVwRm5CKSB7XG4gICAgICAgICAgY2xlYW51cEIuY3VycmVudCA9IG51bGxcbiAgICAgICAgICBjbGVhbnVwRm5CKClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHJlZkEpIHtcbiAgICAgICAgICBjbGVhbnVwQS5jdXJyZW50ID0gYXBwbHlSZWYocmVmQSwgY3VycmVudClcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVmQikge1xuICAgICAgICAgIGNsZWFudXBCLmN1cnJlbnQgPSBhcHBseVJlZihyZWZCLCBjdXJyZW50KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbcmVmQSwgcmVmQl1cbiAgKVxufVxuXG5mdW5jdGlvbiBhcHBseVJlZjxURWxlbWVudD4oXG4gIHJlZkE6IE5vbk51bGxhYmxlPFJlZjxURWxlbWVudD4+LFxuICBjdXJyZW50OiBURWxlbWVudFxuKSB7XG4gIGlmICh0eXBlb2YgcmVmQSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnN0IGNsZWFudXAgPSByZWZBKGN1cnJlbnQpXG4gICAgaWYgKHR5cGVvZiBjbGVhbnVwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gY2xlYW51cFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKCkgPT4gcmVmQShudWxsKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZWZBLmN1cnJlbnQgPSBjdXJyZW50XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlZkEuY3VycmVudCA9IG51bGxcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJ1c2VNZXJnZWRSZWYiLCJyZWZBIiwicmVmQiIsImNsZWFudXBBIiwidXNlUmVmIiwiY2xlYW51cEIiLCJ1c2VDYWxsYmFjayIsImN1cnJlbnQiLCJjbGVhbnVwRm5BIiwiY2xlYW51cEZuQiIsImFwcGx5UmVmIiwiY2xlYW51cCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/use-merged-ref.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/@edge-runtime/cookies/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/next/dist/compiled/@edge-runtime/cookies/index.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  RequestCookies: () => RequestCookies,\n  ResponseCookies: () => ResponseCookies,\n  parseCookie: () => parseCookie,\n  parseSetCookie: () => parseSetCookie,\n  stringifyCookie: () => stringifyCookie\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/serialize.ts\nfunction stringifyCookie(c) {\n  var _a;\n  const attrs = [\n    \"path\" in c && c.path && `Path=${c.path}`,\n    \"expires\" in c && (c.expires || c.expires === 0) && `Expires=${(typeof c.expires === \"number\" ? new Date(c.expires) : c.expires).toUTCString()}`,\n    \"maxAge\" in c && typeof c.maxAge === \"number\" && `Max-Age=${c.maxAge}`,\n    \"domain\" in c && c.domain && `Domain=${c.domain}`,\n    \"secure\" in c && c.secure && \"Secure\",\n    \"httpOnly\" in c && c.httpOnly && \"HttpOnly\",\n    \"sameSite\" in c && c.sameSite && `SameSite=${c.sameSite}`,\n    \"partitioned\" in c && c.partitioned && \"Partitioned\",\n    \"priority\" in c && c.priority && `Priority=${c.priority}`\n  ].filter(Boolean);\n  const stringified = `${c.name}=${encodeURIComponent((_a = c.value) != null ? _a : \"\")}`;\n  return attrs.length === 0 ? stringified : `${stringified}; ${attrs.join(\"; \")}`;\n}\nfunction parseCookie(cookie) {\n  const map = /* @__PURE__ */ new Map();\n  for (const pair of cookie.split(/; */)) {\n    if (!pair)\n      continue;\n    const splitAt = pair.indexOf(\"=\");\n    if (splitAt === -1) {\n      map.set(pair, \"true\");\n      continue;\n    }\n    const [key, value] = [pair.slice(0, splitAt), pair.slice(splitAt + 1)];\n    try {\n      map.set(key, decodeURIComponent(value != null ? value : \"true\"));\n    } catch {\n    }\n  }\n  return map;\n}\nfunction parseSetCookie(setCookie) {\n  if (!setCookie) {\n    return void 0;\n  }\n  const [[name, value], ...attributes] = parseCookie(setCookie);\n  const {\n    domain,\n    expires,\n    httponly,\n    maxage,\n    path,\n    samesite,\n    secure,\n    partitioned,\n    priority\n  } = Object.fromEntries(\n    attributes.map(([key, value2]) => [\n      key.toLowerCase().replace(/-/g, \"\"),\n      value2\n    ])\n  );\n  const cookie = {\n    name,\n    value: decodeURIComponent(value),\n    domain,\n    ...expires && { expires: new Date(expires) },\n    ...httponly && { httpOnly: true },\n    ...typeof maxage === \"string\" && { maxAge: Number(maxage) },\n    path,\n    ...samesite && { sameSite: parseSameSite(samesite) },\n    ...secure && { secure: true },\n    ...priority && { priority: parsePriority(priority) },\n    ...partitioned && { partitioned: true }\n  };\n  return compact(cookie);\n}\nfunction compact(t) {\n  const newT = {};\n  for (const key in t) {\n    if (t[key]) {\n      newT[key] = t[key];\n    }\n  }\n  return newT;\n}\nvar SAME_SITE = [\"strict\", \"lax\", \"none\"];\nfunction parseSameSite(string) {\n  string = string.toLowerCase();\n  return SAME_SITE.includes(string) ? string : void 0;\n}\nvar PRIORITY = [\"low\", \"medium\", \"high\"];\nfunction parsePriority(string) {\n  string = string.toLowerCase();\n  return PRIORITY.includes(string) ? string : void 0;\n}\nfunction splitCookiesString(cookiesString) {\n  if (!cookiesString)\n    return [];\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        lastComma = pos;\n        pos += 1;\n        skipWhitespace();\n        nextStart = pos;\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          cookiesSeparatorFound = true;\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n  return cookiesStrings;\n}\n\n// src/request-cookies.ts\nvar RequestCookies = class {\n  constructor(requestHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    this._headers = requestHeaders;\n    const header = requestHeaders.get(\"cookie\");\n    if (header) {\n      const parsed = parseCookie(header);\n      for (const [name, value] of parsed) {\n        this._parsed.set(name, { name, value });\n      }\n    }\n  }\n  [Symbol.iterator]() {\n    return this._parsed[Symbol.iterator]();\n  }\n  /**\n   * The amount of cookies received from the client\n   */\n  get size() {\n    return this._parsed.size;\n  }\n  get(...args) {\n    const name = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(name);\n  }\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed);\n    if (!args.length) {\n      return all.map(([_, value]) => value);\n    }\n    const name = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter(([n]) => n === name).map(([_, value]) => value);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  set(...args) {\n    const [name, value] = args.length === 1 ? [args[0].name, args[0].value] : args;\n    const map = this._parsed;\n    map.set(name, { name, value });\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value2]) => stringifyCookie(value2)).join(\"; \")\n    );\n    return this;\n  }\n  /**\n   * Delete the cookies matching the passed name or names in the request.\n   */\n  delete(names) {\n    const map = this._parsed;\n    const result = !Array.isArray(names) ? map.delete(names) : names.map((name) => map.delete(name));\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value]) => stringifyCookie(value)).join(\"; \")\n    );\n    return result;\n  }\n  /**\n   * Delete all the cookies in the cookies in the request.\n   */\n  clear() {\n    this.delete(Array.from(this._parsed.keys()));\n    return this;\n  }\n  /**\n   * Format the cookies in the request as a string for logging\n   */\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map((v) => `${v.name}=${encodeURIComponent(v.value)}`).join(\"; \");\n  }\n};\n\n// src/response-cookies.ts\nvar ResponseCookies = class {\n  constructor(responseHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    var _a, _b, _c;\n    this._headers = responseHeaders;\n    const setCookie = (_c = (_b = (_a = responseHeaders.getSetCookie) == null ? void 0 : _a.call(responseHeaders)) != null ? _b : responseHeaders.get(\"set-cookie\")) != null ? _c : [];\n    const cookieStrings = Array.isArray(setCookie) ? setCookie : splitCookiesString(setCookie);\n    for (const cookieString of cookieStrings) {\n      const parsed = parseSetCookie(cookieString);\n      if (parsed)\n        this._parsed.set(parsed.name, parsed);\n    }\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-get CookieStore#get} without the Promise.\n   */\n  get(...args) {\n    const key = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(key);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-getAll CookieStore#getAll} without the Promise.\n   */\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed.values());\n    if (!args.length) {\n      return all;\n    }\n    const key = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter((c) => c.name === key);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-set CookieStore#set} without the Promise.\n   */\n  set(...args) {\n    const [name, value, cookie] = args.length === 1 ? [args[0].name, args[0].value, args[0]] : args;\n    const map = this._parsed;\n    map.set(name, normalizeCookie({ name, value, ...cookie }));\n    replace(map, this._headers);\n    return this;\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-delete CookieStore#delete} without the Promise.\n   */\n  delete(...args) {\n    const [name, options] = typeof args[0] === \"string\" ? [args[0]] : [args[0].name, args[0]];\n    return this.set({ ...options, name, value: \"\", expires: /* @__PURE__ */ new Date(0) });\n  }\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map(stringifyCookie).join(\"; \");\n  }\n};\nfunction replace(bag, headers) {\n  headers.delete(\"set-cookie\");\n  for (const [, value] of bag) {\n    const serialized = stringifyCookie(value);\n    headers.append(\"set-cookie\", serialized);\n  }\n}\nfunction normalizeCookie(cookie = { name: \"\", value: \"\" }) {\n  if (typeof cookie.expires === \"number\") {\n    cookie.expires = new Date(cookie.expires);\n  }\n  if (cookie.maxAge) {\n    cookie.expires = new Date(Date.now() + cookie.maxAge * 1e3);\n  }\n  if (cookie.path === null || cookie.path === void 0) {\n    cookie.path = \"/\";\n  }\n  return cookie;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvQGVkZ2UtcnVudGltZS9jb29raWVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7O0FBRW5GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QyxtRUFBbUUsZ0ZBQWdGO0FBQ25KLGdFQUFnRSxTQUFTO0FBQ3pFLDJDQUEyQyxTQUFTO0FBQ3BEO0FBQ0E7QUFDQSxpREFBaUQsV0FBVztBQUM1RDtBQUNBLGlEQUFpRCxXQUFXO0FBQzVEO0FBQ0EseUJBQXlCLE9BQU8sR0FBRyxxREFBcUQ7QUFDeEYsK0NBQStDLGNBQWMsRUFBRSxjQUFjLEdBQUc7QUFDaEY7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw0QkFBNEI7QUFDaEQscUJBQXFCLGdCQUFnQjtBQUNyQyx1Q0FBdUMsd0JBQXdCO0FBQy9EO0FBQ0EscUJBQXFCLG1DQUFtQztBQUN4RCxtQkFBbUIsY0FBYztBQUNqQyxxQkFBcUIsbUNBQW1DO0FBQ3hELHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxhQUFhO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGFBQWE7QUFDakM7QUFDQTtBQUNBLDRFQUE0RTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaURBQWlEO0FBQzlFO0FBQ0E7QUFDQSxvREFBb0QsT0FBTyxHQUFHLDRCQUE0QixXQUFXO0FBQ3JHO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDRFQUE0RTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGtGQUFrRjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw0RUFBNEU7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msd0JBQXdCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxrRkFBa0Y7QUFDeEY7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG1FQUFtRTtBQUN6RjtBQUNBO0FBQ0EsOEJBQThCLGlEQUFpRDtBQUMvRTtBQUNBO0FBQ0EsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxxQkFBcUI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxDQU1MIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcY29tcGlsZWRcXEBlZGdlLXJ1bnRpbWVcXGNvb2tpZXNcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcblxuLy8gc3JjL2luZGV4LnRzXG52YXIgc3JjX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHNyY19leHBvcnRzLCB7XG4gIFJlcXVlc3RDb29raWVzOiAoKSA9PiBSZXF1ZXN0Q29va2llcyxcbiAgUmVzcG9uc2VDb29raWVzOiAoKSA9PiBSZXNwb25zZUNvb2tpZXMsXG4gIHBhcnNlQ29va2llOiAoKSA9PiBwYXJzZUNvb2tpZSxcbiAgcGFyc2VTZXRDb29raWU6ICgpID0+IHBhcnNlU2V0Q29va2llLFxuICBzdHJpbmdpZnlDb29raWU6ICgpID0+IHN0cmluZ2lmeUNvb2tpZVxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyhzcmNfZXhwb3J0cyk7XG5cbi8vIHNyYy9zZXJpYWxpemUudHNcbmZ1bmN0aW9uIHN0cmluZ2lmeUNvb2tpZShjKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgYXR0cnMgPSBbXG4gICAgXCJwYXRoXCIgaW4gYyAmJiBjLnBhdGggJiYgYFBhdGg9JHtjLnBhdGh9YCxcbiAgICBcImV4cGlyZXNcIiBpbiBjICYmIChjLmV4cGlyZXMgfHwgYy5leHBpcmVzID09PSAwKSAmJiBgRXhwaXJlcz0keyh0eXBlb2YgYy5leHBpcmVzID09PSBcIm51bWJlclwiID8gbmV3IERhdGUoYy5leHBpcmVzKSA6IGMuZXhwaXJlcykudG9VVENTdHJpbmcoKX1gLFxuICAgIFwibWF4QWdlXCIgaW4gYyAmJiB0eXBlb2YgYy5tYXhBZ2UgPT09IFwibnVtYmVyXCIgJiYgYE1heC1BZ2U9JHtjLm1heEFnZX1gLFxuICAgIFwiZG9tYWluXCIgaW4gYyAmJiBjLmRvbWFpbiAmJiBgRG9tYWluPSR7Yy5kb21haW59YCxcbiAgICBcInNlY3VyZVwiIGluIGMgJiYgYy5zZWN1cmUgJiYgXCJTZWN1cmVcIixcbiAgICBcImh0dHBPbmx5XCIgaW4gYyAmJiBjLmh0dHBPbmx5ICYmIFwiSHR0cE9ubHlcIixcbiAgICBcInNhbWVTaXRlXCIgaW4gYyAmJiBjLnNhbWVTaXRlICYmIGBTYW1lU2l0ZT0ke2Muc2FtZVNpdGV9YCxcbiAgICBcInBhcnRpdGlvbmVkXCIgaW4gYyAmJiBjLnBhcnRpdGlvbmVkICYmIFwiUGFydGl0aW9uZWRcIixcbiAgICBcInByaW9yaXR5XCIgaW4gYyAmJiBjLnByaW9yaXR5ICYmIGBQcmlvcml0eT0ke2MucHJpb3JpdHl9YFxuICBdLmZpbHRlcihCb29sZWFuKTtcbiAgY29uc3Qgc3RyaW5naWZpZWQgPSBgJHtjLm5hbWV9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KChfYSA9IGMudmFsdWUpICE9IG51bGwgPyBfYSA6IFwiXCIpfWA7XG4gIHJldHVybiBhdHRycy5sZW5ndGggPT09IDAgPyBzdHJpbmdpZmllZCA6IGAke3N0cmluZ2lmaWVkfTsgJHthdHRycy5qb2luKFwiOyBcIil9YDtcbn1cbmZ1bmN0aW9uIHBhcnNlQ29va2llKGNvb2tpZSkge1xuICBjb25zdCBtYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IHBhaXIgb2YgY29va2llLnNwbGl0KC87ICovKSkge1xuICAgIGlmICghcGFpcilcbiAgICAgIGNvbnRpbnVlO1xuICAgIGNvbnN0IHNwbGl0QXQgPSBwYWlyLmluZGV4T2YoXCI9XCIpO1xuICAgIGlmIChzcGxpdEF0ID09PSAtMSkge1xuICAgICAgbWFwLnNldChwYWlyLCBcInRydWVcIik7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgW2tleSwgdmFsdWVdID0gW3BhaXIuc2xpY2UoMCwgc3BsaXRBdCksIHBhaXIuc2xpY2Uoc3BsaXRBdCArIDEpXTtcbiAgICB0cnkge1xuICAgICAgbWFwLnNldChrZXksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiBcInRydWVcIikpO1xuICAgIH0gY2F0Y2gge1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWFwO1xufVxuZnVuY3Rpb24gcGFyc2VTZXRDb29raWUoc2V0Q29va2llKSB7XG4gIGlmICghc2V0Q29va2llKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICBjb25zdCBbW25hbWUsIHZhbHVlXSwgLi4uYXR0cmlidXRlc10gPSBwYXJzZUNvb2tpZShzZXRDb29raWUpO1xuICBjb25zdCB7XG4gICAgZG9tYWluLFxuICAgIGV4cGlyZXMsXG4gICAgaHR0cG9ubHksXG4gICAgbWF4YWdlLFxuICAgIHBhdGgsXG4gICAgc2FtZXNpdGUsXG4gICAgc2VjdXJlLFxuICAgIHBhcnRpdGlvbmVkLFxuICAgIHByaW9yaXR5XG4gIH0gPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgYXR0cmlidXRlcy5tYXAoKFtrZXksIHZhbHVlMl0pID0+IFtcbiAgICAgIGtleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0vZywgXCJcIiksXG4gICAgICB2YWx1ZTJcbiAgICBdKVxuICApO1xuICBjb25zdCBjb29raWUgPSB7XG4gICAgbmFtZSxcbiAgICB2YWx1ZTogZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSxcbiAgICBkb21haW4sXG4gICAgLi4uZXhwaXJlcyAmJiB7IGV4cGlyZXM6IG5ldyBEYXRlKGV4cGlyZXMpIH0sXG4gICAgLi4uaHR0cG9ubHkgJiYgeyBodHRwT25seTogdHJ1ZSB9LFxuICAgIC4uLnR5cGVvZiBtYXhhZ2UgPT09IFwic3RyaW5nXCIgJiYgeyBtYXhBZ2U6IE51bWJlcihtYXhhZ2UpIH0sXG4gICAgcGF0aCxcbiAgICAuLi5zYW1lc2l0ZSAmJiB7IHNhbWVTaXRlOiBwYXJzZVNhbWVTaXRlKHNhbWVzaXRlKSB9LFxuICAgIC4uLnNlY3VyZSAmJiB7IHNlY3VyZTogdHJ1ZSB9LFxuICAgIC4uLnByaW9yaXR5ICYmIHsgcHJpb3JpdHk6IHBhcnNlUHJpb3JpdHkocHJpb3JpdHkpIH0sXG4gICAgLi4ucGFydGl0aW9uZWQgJiYgeyBwYXJ0aXRpb25lZDogdHJ1ZSB9XG4gIH07XG4gIHJldHVybiBjb21wYWN0KGNvb2tpZSk7XG59XG5mdW5jdGlvbiBjb21wYWN0KHQpIHtcbiAgY29uc3QgbmV3VCA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiB0KSB7XG4gICAgaWYgKHRba2V5XSkge1xuICAgICAgbmV3VFtrZXldID0gdFtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3VDtcbn1cbnZhciBTQU1FX1NJVEUgPSBbXCJzdHJpY3RcIiwgXCJsYXhcIiwgXCJub25lXCJdO1xuZnVuY3Rpb24gcGFyc2VTYW1lU2l0ZShzdHJpbmcpIHtcbiAgc3RyaW5nID0gc3RyaW5nLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBTQU1FX1NJVEUuaW5jbHVkZXMoc3RyaW5nKSA/IHN0cmluZyA6IHZvaWQgMDtcbn1cbnZhciBQUklPUklUWSA9IFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl07XG5mdW5jdGlvbiBwYXJzZVByaW9yaXR5KHN0cmluZykge1xuICBzdHJpbmcgPSBzdHJpbmcudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIFBSSU9SSVRZLmluY2x1ZGVzKHN0cmluZykgPyBzdHJpbmcgOiB2b2lkIDA7XG59XG5mdW5jdGlvbiBzcGxpdENvb2tpZXNTdHJpbmcoY29va2llc1N0cmluZykge1xuICBpZiAoIWNvb2tpZXNTdHJpbmcpXG4gICAgcmV0dXJuIFtdO1xuICB2YXIgY29va2llc1N0cmluZ3MgPSBbXTtcbiAgdmFyIHBvcyA9IDA7XG4gIHZhciBzdGFydDtcbiAgdmFyIGNoO1xuICB2YXIgbGFzdENvbW1hO1xuICB2YXIgbmV4dFN0YXJ0O1xuICB2YXIgY29va2llc1NlcGFyYXRvckZvdW5kO1xuICBmdW5jdGlvbiBza2lwV2hpdGVzcGFjZSgpIHtcbiAgICB3aGlsZSAocG9zIDwgY29va2llc1N0cmluZy5sZW5ndGggJiYgL1xccy8udGVzdChjb29raWVzU3RyaW5nLmNoYXJBdChwb3MpKSkge1xuICAgICAgcG9zICs9IDE7XG4gICAgfVxuICAgIHJldHVybiBwb3MgPCBjb29raWVzU3RyaW5nLmxlbmd0aDtcbiAgfVxuICBmdW5jdGlvbiBub3RTcGVjaWFsQ2hhcigpIHtcbiAgICBjaCA9IGNvb2tpZXNTdHJpbmcuY2hhckF0KHBvcyk7XG4gICAgcmV0dXJuIGNoICE9PSBcIj1cIiAmJiBjaCAhPT0gXCI7XCIgJiYgY2ggIT09IFwiLFwiO1xuICB9XG4gIHdoaWxlIChwb3MgPCBjb29raWVzU3RyaW5nLmxlbmd0aCkge1xuICAgIHN0YXJ0ID0gcG9zO1xuICAgIGNvb2tpZXNTZXBhcmF0b3JGb3VuZCA9IGZhbHNlO1xuICAgIHdoaWxlIChza2lwV2hpdGVzcGFjZSgpKSB7XG4gICAgICBjaCA9IGNvb2tpZXNTdHJpbmcuY2hhckF0KHBvcyk7XG4gICAgICBpZiAoY2ggPT09IFwiLFwiKSB7XG4gICAgICAgIGxhc3RDb21tYSA9IHBvcztcbiAgICAgICAgcG9zICs9IDE7XG4gICAgICAgIHNraXBXaGl0ZXNwYWNlKCk7XG4gICAgICAgIG5leHRTdGFydCA9IHBvcztcbiAgICAgICAgd2hpbGUgKHBvcyA8IGNvb2tpZXNTdHJpbmcubGVuZ3RoICYmIG5vdFNwZWNpYWxDaGFyKCkpIHtcbiAgICAgICAgICBwb3MgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zIDwgY29va2llc1N0cmluZy5sZW5ndGggJiYgY29va2llc1N0cmluZy5jaGFyQXQocG9zKSA9PT0gXCI9XCIpIHtcbiAgICAgICAgICBjb29raWVzU2VwYXJhdG9yRm91bmQgPSB0cnVlO1xuICAgICAgICAgIHBvcyA9IG5leHRTdGFydDtcbiAgICAgICAgICBjb29raWVzU3RyaW5ncy5wdXNoKGNvb2tpZXNTdHJpbmcuc3Vic3RyaW5nKHN0YXJ0LCBsYXN0Q29tbWEpKTtcbiAgICAgICAgICBzdGFydCA9IHBvcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwb3MgPSBsYXN0Q29tbWEgKyAxO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb3MgKz0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFjb29raWVzU2VwYXJhdG9yRm91bmQgfHwgcG9zID49IGNvb2tpZXNTdHJpbmcubGVuZ3RoKSB7XG4gICAgICBjb29raWVzU3RyaW5ncy5wdXNoKGNvb2tpZXNTdHJpbmcuc3Vic3RyaW5nKHN0YXJ0LCBjb29raWVzU3RyaW5nLmxlbmd0aCkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY29va2llc1N0cmluZ3M7XG59XG5cbi8vIHNyYy9yZXF1ZXN0LWNvb2tpZXMudHNcbnZhciBSZXF1ZXN0Q29va2llcyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVxdWVzdEhlYWRlcnMpIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgdGhpcy5fcGFyc2VkID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLl9oZWFkZXJzID0gcmVxdWVzdEhlYWRlcnM7XG4gICAgY29uc3QgaGVhZGVyID0gcmVxdWVzdEhlYWRlcnMuZ2V0KFwiY29va2llXCIpO1xuICAgIGlmIChoZWFkZXIpIHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQ29va2llKGhlYWRlcik7XG4gICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgcGFyc2VkKSB7XG4gICAgICAgIHRoaXMuX3BhcnNlZC5zZXQobmFtZSwgeyBuYW1lLCB2YWx1ZSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlZFtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBhbW91bnQgb2YgY29va2llcyByZWNlaXZlZCBmcm9tIHRoZSBjbGllbnRcbiAgICovXG4gIGdldCBzaXplKCkge1xuICAgIHJldHVybiB0aGlzLl9wYXJzZWQuc2l6ZTtcbiAgfVxuICBnZXQoLi4uYXJncykge1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIiA/IGFyZ3NbMF0gOiBhcmdzWzBdLm5hbWU7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlZC5nZXQobmFtZSk7XG4gIH1cbiAgZ2V0QWxsKC4uLmFyZ3MpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgYWxsID0gQXJyYXkuZnJvbSh0aGlzLl9wYXJzZWQpO1xuICAgIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBhbGwubWFwKChbXywgdmFsdWVdKSA9PiB2YWx1ZSk7XG4gICAgfVxuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIiA/IGFyZ3NbMF0gOiAoX2EgPSBhcmdzWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2EubmFtZTtcbiAgICByZXR1cm4gYWxsLmZpbHRlcigoW25dKSA9PiBuID09PSBuYW1lKS5tYXAoKFtfLCB2YWx1ZV0pID0+IHZhbHVlKTtcbiAgfVxuICBoYXMobmFtZSkge1xuICAgIHJldHVybiB0aGlzLl9wYXJzZWQuaGFzKG5hbWUpO1xuICB9XG4gIHNldCguLi5hcmdzKSB7XG4gICAgY29uc3QgW25hbWUsIHZhbHVlXSA9IGFyZ3MubGVuZ3RoID09PSAxID8gW2FyZ3NbMF0ubmFtZSwgYXJnc1swXS52YWx1ZV0gOiBhcmdzO1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuX3BhcnNlZDtcbiAgICBtYXAuc2V0KG5hbWUsIHsgbmFtZSwgdmFsdWUgfSk7XG4gICAgdGhpcy5faGVhZGVycy5zZXQoXG4gICAgICBcImNvb2tpZVwiLFxuICAgICAgQXJyYXkuZnJvbShtYXApLm1hcCgoW18sIHZhbHVlMl0pID0+IHN0cmluZ2lmeUNvb2tpZSh2YWx1ZTIpKS5qb2luKFwiOyBcIilcbiAgICApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgdGhlIGNvb2tpZXMgbWF0Y2hpbmcgdGhlIHBhc3NlZCBuYW1lIG9yIG5hbWVzIGluIHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgZGVsZXRlKG5hbWVzKSB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5fcGFyc2VkO1xuICAgIGNvbnN0IHJlc3VsdCA9ICFBcnJheS5pc0FycmF5KG5hbWVzKSA/IG1hcC5kZWxldGUobmFtZXMpIDogbmFtZXMubWFwKChuYW1lKSA9PiBtYXAuZGVsZXRlKG5hbWUpKTtcbiAgICB0aGlzLl9oZWFkZXJzLnNldChcbiAgICAgIFwiY29va2llXCIsXG4gICAgICBBcnJheS5mcm9tKG1hcCkubWFwKChbXywgdmFsdWVdKSA9PiBzdHJpbmdpZnlDb29raWUodmFsdWUpKS5qb2luKFwiOyBcIilcbiAgICApO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBhbGwgdGhlIGNvb2tpZXMgaW4gdGhlIGNvb2tpZXMgaW4gdGhlIHJlcXVlc3QuXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmRlbGV0ZShBcnJheS5mcm9tKHRoaXMuX3BhcnNlZC5rZXlzKCkpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogRm9ybWF0IHRoZSBjb29raWVzIGluIHRoZSByZXF1ZXN0IGFzIGEgc3RyaW5nIGZvciBsb2dnaW5nXG4gICAqL1xuICBbU3ltYm9sLmZvcihcImVkZ2UtcnVudGltZS5pbnNwZWN0LmN1c3RvbVwiKV0oKSB7XG4gICAgcmV0dXJuIGBSZXF1ZXN0Q29va2llcyAke0pTT04uc3RyaW5naWZ5KE9iamVjdC5mcm9tRW50cmllcyh0aGlzLl9wYXJzZWQpKX1gO1xuICB9XG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBbLi4udGhpcy5fcGFyc2VkLnZhbHVlcygpXS5tYXAoKHYpID0+IGAke3YubmFtZX09JHtlbmNvZGVVUklDb21wb25lbnQodi52YWx1ZSl9YCkuam9pbihcIjsgXCIpO1xuICB9XG59O1xuXG4vLyBzcmMvcmVzcG9uc2UtY29va2llcy50c1xudmFyIFJlc3BvbnNlQ29va2llcyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzcG9uc2VIZWFkZXJzKSB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHRoaXMuX3BhcnNlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgdGhpcy5faGVhZGVycyA9IHJlc3BvbnNlSGVhZGVycztcbiAgICBjb25zdCBzZXRDb29raWUgPSAoX2MgPSAoX2IgPSAoX2EgPSByZXNwb25zZUhlYWRlcnMuZ2V0U2V0Q29va2llKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChyZXNwb25zZUhlYWRlcnMpKSAhPSBudWxsID8gX2IgOiByZXNwb25zZUhlYWRlcnMuZ2V0KFwic2V0LWNvb2tpZVwiKSkgIT0gbnVsbCA/IF9jIDogW107XG4gICAgY29uc3QgY29va2llU3RyaW5ncyA9IEFycmF5LmlzQXJyYXkoc2V0Q29va2llKSA/IHNldENvb2tpZSA6IHNwbGl0Q29va2llc1N0cmluZyhzZXRDb29raWUpO1xuICAgIGZvciAoY29uc3QgY29va2llU3RyaW5nIG9mIGNvb2tpZVN0cmluZ3MpIHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlU2V0Q29va2llKGNvb2tpZVN0cmluZyk7XG4gICAgICBpZiAocGFyc2VkKVxuICAgICAgICB0aGlzLl9wYXJzZWQuc2V0KHBhcnNlZC5uYW1lLCBwYXJzZWQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICoge0BsaW5rIGh0dHBzOi8vd2ljZy5naXRodWIuaW8vY29va2llLXN0b3JlLyNDb29raWVTdG9yZS1nZXQgQ29va2llU3RvcmUjZ2V0fSB3aXRob3V0IHRoZSBQcm9taXNlLlxuICAgKi9cbiAgZ2V0KC4uLmFyZ3MpIHtcbiAgICBjb25zdCBrZXkgPSB0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIiA/IGFyZ3NbMF0gOiBhcmdzWzBdLm5hbWU7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlZC5nZXQoa2V5KTtcbiAgfVxuICAvKipcbiAgICoge0BsaW5rIGh0dHBzOi8vd2ljZy5naXRodWIuaW8vY29va2llLXN0b3JlLyNDb29raWVTdG9yZS1nZXRBbGwgQ29va2llU3RvcmUjZ2V0QWxsfSB3aXRob3V0IHRoZSBQcm9taXNlLlxuICAgKi9cbiAgZ2V0QWxsKC4uLmFyZ3MpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgYWxsID0gQXJyYXkuZnJvbSh0aGlzLl9wYXJzZWQudmFsdWVzKCkpO1xuICAgIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBhbGw7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiID8gYXJnc1swXSA6IChfYSA9IGFyZ3NbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5uYW1lO1xuICAgIHJldHVybiBhbGwuZmlsdGVyKChjKSA9PiBjLm5hbWUgPT09IGtleSk7XG4gIH1cbiAgaGFzKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VkLmhhcyhuYW1lKTtcbiAgfVxuICAvKipcbiAgICoge0BsaW5rIGh0dHBzOi8vd2ljZy5naXRodWIuaW8vY29va2llLXN0b3JlLyNDb29raWVTdG9yZS1zZXQgQ29va2llU3RvcmUjc2V0fSB3aXRob3V0IHRoZSBQcm9taXNlLlxuICAgKi9cbiAgc2V0KC4uLmFyZ3MpIHtcbiAgICBjb25zdCBbbmFtZSwgdmFsdWUsIGNvb2tpZV0gPSBhcmdzLmxlbmd0aCA9PT0gMSA/IFthcmdzWzBdLm5hbWUsIGFyZ3NbMF0udmFsdWUsIGFyZ3NbMF1dIDogYXJncztcbiAgICBjb25zdCBtYXAgPSB0aGlzLl9wYXJzZWQ7XG4gICAgbWFwLnNldChuYW1lLCBub3JtYWxpemVDb29raWUoeyBuYW1lLCB2YWx1ZSwgLi4uY29va2llIH0pKTtcbiAgICByZXBsYWNlKG1hcCwgdGhpcy5faGVhZGVycyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIHtAbGluayBodHRwczovL3dpY2cuZ2l0aHViLmlvL2Nvb2tpZS1zdG9yZS8jQ29va2llU3RvcmUtZGVsZXRlIENvb2tpZVN0b3JlI2RlbGV0ZX0gd2l0aG91dCB0aGUgUHJvbWlzZS5cbiAgICovXG4gIGRlbGV0ZSguLi5hcmdzKSB7XG4gICAgY29uc3QgW25hbWUsIG9wdGlvbnNdID0gdHlwZW9mIGFyZ3NbMF0gPT09IFwic3RyaW5nXCIgPyBbYXJnc1swXV0gOiBbYXJnc1swXS5uYW1lLCBhcmdzWzBdXTtcbiAgICByZXR1cm4gdGhpcy5zZXQoeyAuLi5vcHRpb25zLCBuYW1lLCB2YWx1ZTogXCJcIiwgZXhwaXJlczogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKDApIH0pO1xuICB9XG4gIFtTeW1ib2wuZm9yKFwiZWRnZS1ydW50aW1lLmluc3BlY3QuY3VzdG9tXCIpXSgpIHtcbiAgICByZXR1cm4gYFJlc3BvbnNlQ29va2llcyAke0pTT04uc3RyaW5naWZ5KE9iamVjdC5mcm9tRW50cmllcyh0aGlzLl9wYXJzZWQpKX1gO1xuICB9XG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBbLi4udGhpcy5fcGFyc2VkLnZhbHVlcygpXS5tYXAoc3RyaW5naWZ5Q29va2llKS5qb2luKFwiOyBcIik7XG4gIH1cbn07XG5mdW5jdGlvbiByZXBsYWNlKGJhZywgaGVhZGVycykge1xuICBoZWFkZXJzLmRlbGV0ZShcInNldC1jb29raWVcIik7XG4gIGZvciAoY29uc3QgWywgdmFsdWVdIG9mIGJhZykge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBzdHJpbmdpZnlDb29raWUodmFsdWUpO1xuICAgIGhlYWRlcnMuYXBwZW5kKFwic2V0LWNvb2tpZVwiLCBzZXJpYWxpemVkKTtcbiAgfVxufVxuZnVuY3Rpb24gbm9ybWFsaXplQ29va2llKGNvb2tpZSA9IHsgbmFtZTogXCJcIiwgdmFsdWU6IFwiXCIgfSkge1xuICBpZiAodHlwZW9mIGNvb2tpZS5leHBpcmVzID09PSBcIm51bWJlclwiKSB7XG4gICAgY29va2llLmV4cGlyZXMgPSBuZXcgRGF0ZShjb29raWUuZXhwaXJlcyk7XG4gIH1cbiAgaWYgKGNvb2tpZS5tYXhBZ2UpIHtcbiAgICBjb29raWUuZXhwaXJlcyA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBjb29raWUubWF4QWdlICogMWUzKTtcbiAgfVxuICBpZiAoY29va2llLnBhdGggPT09IG51bGwgfHwgY29va2llLnBhdGggPT09IHZvaWQgMCkge1xuICAgIGNvb2tpZS5wYXRoID0gXCIvXCI7XG4gIH1cbiAgcmV0dXJuIGNvb2tpZTtcbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBSZXF1ZXN0Q29va2llcyxcbiAgUmVzcG9uc2VDb29raWVzLFxuICBwYXJzZUNvb2tpZSxcbiAgcGFyc2VTZXRDb29raWUsXG4gIHN0cmluZ2lmeUNvb2tpZVxufSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/@edge-runtime/cookies/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/mini-css-extract-plugin/hmr/hotModuleReplacement.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/next/dist/compiled/mini-css-extract-plugin/hmr/hotModuleReplacement.js ***!
  \*********************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("var __dirname = \"/\";\n(()=>{\"use strict\";var e={529:(e,r,t)=>{var n=t(191);var i=Object.create(null);var a=typeof document===\"undefined\";var o=Array.prototype.forEach;function debounce(e,r){var t=0;return function(){var n=this;var i=arguments;var a=function functionCall(){return e.apply(n,i)};clearTimeout(t);t=setTimeout(a,r)}}function noop(){}function getCurrentScriptUrl(e){var r=i[e];if(!r){if(document.currentScript){r=document.currentScript.src}else{var t=document.getElementsByTagName(\"script\");var a=t[t.length-1];if(a){r=a.src}}i[e]=r}return function(e){if(!r){return null}var t=r.split(/([^\\\\/]+)\\.js$/);var i=t&&t[1];if(!i){return[r.replace(\".js\",\".css\")]}if(!e){return[r.replace(\".js\",\".css\")]}return e.split(\",\").map((function(e){var t=new RegExp(\"\".concat(i,\"\\\\.js$\"),\"g\");return n(r.replace(t,\"\".concat(e.replace(/{fileName}/g,i),\".css\")))}))}}function updateCss(e,r){if(!r){if(!e.href){return}r=e.href.split(\"?\")[0]}if(!isUrlRequest(r)){return}if(e.isLoaded===false){return}if(!r||!(r.indexOf(\".css\")>-1)){return}e.visited=true;var t=e.cloneNode();t.isLoaded=false;t.addEventListener(\"load\",(function(){if(t.isLoaded){return}t.isLoaded=true;e.parentNode.removeChild(e)}));t.addEventListener(\"error\",(function(){if(t.isLoaded){return}t.isLoaded=true;e.parentNode.removeChild(e)}));t.href=\"\".concat(r,\"?\").concat(Date.now());if(e.nextSibling){e.parentNode.insertBefore(t,e.nextSibling)}else{e.parentNode.appendChild(t)}}function getReloadUrl(e,r){var t;e=n(e,{stripWWW:false});r.some((function(n){if(e.indexOf(r)>-1){t=n}}));return t}function reloadStyle(e){if(!e){return false}var r=document.querySelectorAll(\"link\");var t=false;o.call(r,(function(r){if(!r.href){return}var n=getReloadUrl(r.href,e);if(!isUrlRequest(n)){return}if(r.visited===true){return}if(n){updateCss(r,n);t=true}}));return t}function reloadAll(){var e=document.querySelectorAll(\"link\");o.call(e,(function(e){if(e.visited===true){return}updateCss(e)}))}function isUrlRequest(e){if(!/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.test(e)){return false}return true}e.exports=function(e,r){if(a){console.log(\"no window.document found, will not HMR CSS\");return noop}var t=getCurrentScriptUrl(e);function update(){var e=t(r.filename);var n=reloadStyle(e);if(r.locals){console.log(\"[HMR] Detected local css modules. Reload all css\");reloadAll();return}if(n){console.log(\"[HMR] css reload %s\",e.join(\" \"))}else{console.log(\"[HMR] Reload all css\");reloadAll()}}return debounce(update,50)}},191:e=>{function normalizeUrl(e){return e.reduce((function(e,r){switch(r){case\"..\":e.pop();break;case\".\":break;default:e.push(r)}return e}),[]).join(\"/\")}e.exports=function(e){e=e.trim();if(/^data:/i.test(e)){return e}var r=e.indexOf(\"//\")!==-1?e.split(\"//\")[0]+\"//\":\"\";var t=e.replace(new RegExp(r,\"i\"),\"\").split(\"/\");var n=t[0].toLowerCase().replace(/\\.$/,\"\");t[0]=\"\";var i=normalizeUrl(t);return r+n+i}}};var r={};function __nccwpck_require__(t){var n=r[t];if(n!==undefined){return n.exports}var i=r[t]={exports:{}};var a=true;try{e[t](i,i.exports,__nccwpck_require__);a=false}finally{if(a)delete r[t]}return i.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var t=__nccwpck_require__(529);module.exports=t})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vaG1yL2hvdE1vZHVsZVJlcGxhY2VtZW50LmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNLGFBQWEsT0FBTyxjQUFjLGFBQWEsMEJBQTBCLG9DQUFvQyw4QkFBOEIsdUJBQXVCLFFBQVEsa0JBQWtCLFdBQVcsZ0JBQWdCLDhCQUE4QixxQkFBcUIsZ0JBQWdCLG1CQUFtQixpQkFBaUIsZ0NBQWdDLFdBQVcsT0FBTywyQkFBMkIsNkJBQTZCLEtBQUssOENBQThDLG9CQUFvQixNQUFNLFNBQVMsT0FBTyxtQkFBbUIsT0FBTyxZQUFZLGdDQUFnQyxjQUFjLE9BQU8sZ0NBQWdDLE9BQU8sZ0NBQWdDLHFDQUFxQyw0Q0FBNEMsMkNBQTJDLFNBQVMsZ0JBQWdCLElBQUksd0JBQXdCLE9BQU8sWUFBWSxPQUFPLHVCQUF1QixxQkFBcUIsT0FBTyx1QkFBdUIsT0FBTyxnQ0FBZ0MsT0FBTyxlQUFlLG9CQUFvQixpQkFBaUIsc0NBQXNDLGVBQWUsT0FBTyxnQkFBZ0IsNEJBQTRCLEdBQUcsdUNBQXVDLGVBQWUsT0FBTyxnQkFBZ0IsNEJBQTRCLEdBQUcsMkNBQTJDLGtCQUFrQiwyQ0FBMkMsS0FBSyw2QkFBNkIsMkJBQTJCLE1BQU0sT0FBTyxlQUFlLEVBQUUsb0JBQW9CLG9CQUFvQixLQUFLLEdBQUcsU0FBUyx3QkFBd0IsT0FBTyxhQUFhLHdDQUF3QyxZQUFZLHNCQUFzQixZQUFZLE9BQU8sNkJBQTZCLHFCQUFxQixPQUFPLHFCQUFxQixPQUFPLE1BQU0sZUFBZSxRQUFRLEdBQUcsU0FBUyxxQkFBcUIsd0NBQXdDLHNCQUFzQixxQkFBcUIsT0FBTyxhQUFhLEdBQUcseUJBQXlCLHlDQUF5QyxhQUFhLFlBQVksd0JBQXdCLE1BQU0sMERBQTBELFlBQVksNkJBQTZCLGtCQUFrQixvQkFBb0IscUJBQXFCLGFBQWEsZ0VBQWdFLFlBQVksT0FBTyxNQUFNLCtDQUErQyxLQUFLLG9DQUFvQyxhQUFhLDRCQUE0QixTQUFTLHlCQUF5QiwrQkFBK0IsVUFBVSxpQkFBaUIsTUFBTSxjQUFjLGtCQUFrQixTQUFTLGdCQUFnQixzQkFBc0IsV0FBVyxzQkFBc0IsU0FBUyxvREFBb0QsaURBQWlELDJDQUEyQyxRQUFRLHNCQUFzQixnQkFBZ0IsU0FBUyxnQ0FBZ0MsV0FBVyxrQkFBa0IsaUJBQWlCLFlBQVksWUFBWSxXQUFXLElBQUksc0NBQXNDLFFBQVEsUUFBUSxpQkFBaUIsaUJBQWlCLG1FQUFtRSxTQUFTLEtBQUssK0JBQStCLGlCQUFpQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXGNvbXBpbGVkXFxtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxcaG1yXFxob3RNb2R1bGVSZXBsYWNlbWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoKCk9PntcInVzZSBzdHJpY3RcIjt2YXIgZT17NTI5OihlLHIsdCk9Pnt2YXIgbj10KDE5MSk7dmFyIGk9T2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgYT10eXBlb2YgZG9jdW1lbnQ9PT1cInVuZGVmaW5lZFwiO3ZhciBvPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoO2Z1bmN0aW9uIGRlYm91bmNlKGUscil7dmFyIHQ9MDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzO3ZhciBpPWFyZ3VtZW50czt2YXIgYT1mdW5jdGlvbiBmdW5jdGlvbkNhbGwoKXtyZXR1cm4gZS5hcHBseShuLGkpfTtjbGVhclRpbWVvdXQodCk7dD1zZXRUaW1lb3V0KGEscil9fWZ1bmN0aW9uIG5vb3AoKXt9ZnVuY3Rpb24gZ2V0Q3VycmVudFNjcmlwdFVybChlKXt2YXIgcj1pW2VdO2lmKCFyKXtpZihkb2N1bWVudC5jdXJyZW50U2NyaXB0KXtyPWRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjfWVsc2V7dmFyIHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7dmFyIGE9dFt0Lmxlbmd0aC0xXTtpZihhKXtyPWEuc3JjfX1pW2VdPXJ9cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKCFyKXtyZXR1cm4gbnVsbH12YXIgdD1yLnNwbGl0KC8oW15cXFxcL10rKVxcLmpzJC8pO3ZhciBpPXQmJnRbMV07aWYoIWkpe3JldHVybltyLnJlcGxhY2UoXCIuanNcIixcIi5jc3NcIildfWlmKCFlKXtyZXR1cm5bci5yZXBsYWNlKFwiLmpzXCIsXCIuY3NzXCIpXX1yZXR1cm4gZS5zcGxpdChcIixcIikubWFwKChmdW5jdGlvbihlKXt2YXIgdD1uZXcgUmVnRXhwKFwiXCIuY29uY2F0KGksXCJcXFxcLmpzJFwiKSxcImdcIik7cmV0dXJuIG4oci5yZXBsYWNlKHQsXCJcIi5jb25jYXQoZS5yZXBsYWNlKC97ZmlsZU5hbWV9L2csaSksXCIuY3NzXCIpKSl9KSl9fWZ1bmN0aW9uIHVwZGF0ZUNzcyhlLHIpe2lmKCFyKXtpZighZS5ocmVmKXtyZXR1cm59cj1lLmhyZWYuc3BsaXQoXCI/XCIpWzBdfWlmKCFpc1VybFJlcXVlc3Qocikpe3JldHVybn1pZihlLmlzTG9hZGVkPT09ZmFsc2Upe3JldHVybn1pZighcnx8IShyLmluZGV4T2YoXCIuY3NzXCIpPi0xKSl7cmV0dXJufWUudmlzaXRlZD10cnVlO3ZhciB0PWUuY2xvbmVOb2RlKCk7dC5pc0xvYWRlZD1mYWxzZTt0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsKGZ1bmN0aW9uKCl7aWYodC5pc0xvYWRlZCl7cmV0dXJufXQuaXNMb2FkZWQ9dHJ1ZTtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9KSk7dC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwoZnVuY3Rpb24oKXtpZih0LmlzTG9hZGVkKXtyZXR1cm59dC5pc0xvYWRlZD10cnVlO2UucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKX0pKTt0LmhyZWY9XCJcIi5jb25jYXQocixcIj9cIikuY29uY2F0KERhdGUubm93KCkpO2lmKGUubmV4dFNpYmxpbmcpe2UucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodCxlLm5leHRTaWJsaW5nKX1lbHNle2UucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0KX19ZnVuY3Rpb24gZ2V0UmVsb2FkVXJsKGUscil7dmFyIHQ7ZT1uKGUse3N0cmlwV1dXOmZhbHNlfSk7ci5zb21lKChmdW5jdGlvbihuKXtpZihlLmluZGV4T2Yocik+LTEpe3Q9bn19KSk7cmV0dXJuIHR9ZnVuY3Rpb24gcmVsb2FkU3R5bGUoZSl7aWYoIWUpe3JldHVybiBmYWxzZX12YXIgcj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1wiKTt2YXIgdD1mYWxzZTtvLmNhbGwociwoZnVuY3Rpb24ocil7aWYoIXIuaHJlZil7cmV0dXJufXZhciBuPWdldFJlbG9hZFVybChyLmhyZWYsZSk7aWYoIWlzVXJsUmVxdWVzdChuKSl7cmV0dXJufWlmKHIudmlzaXRlZD09PXRydWUpe3JldHVybn1pZihuKXt1cGRhdGVDc3MocixuKTt0PXRydWV9fSkpO3JldHVybiB0fWZ1bmN0aW9uIHJlbG9hZEFsbCgpe3ZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaW5rXCIpO28uY2FsbChlLChmdW5jdGlvbihlKXtpZihlLnZpc2l0ZWQ9PT10cnVlKXtyZXR1cm59dXBkYXRlQ3NzKGUpfSkpfWZ1bmN0aW9uIGlzVXJsUmVxdWVzdChlKXtpZighL15bYS16QS1aXVthLXpBLVpcXGQrXFwtLl0qOi8udGVzdChlKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfWUuZXhwb3J0cz1mdW5jdGlvbihlLHIpe2lmKGEpe2NvbnNvbGUubG9nKFwibm8gd2luZG93LmRvY3VtZW50IGZvdW5kLCB3aWxsIG5vdCBITVIgQ1NTXCIpO3JldHVybiBub29wfXZhciB0PWdldEN1cnJlbnRTY3JpcHRVcmwoZSk7ZnVuY3Rpb24gdXBkYXRlKCl7dmFyIGU9dChyLmZpbGVuYW1lKTt2YXIgbj1yZWxvYWRTdHlsZShlKTtpZihyLmxvY2Fscyl7Y29uc29sZS5sb2coXCJbSE1SXSBEZXRlY3RlZCBsb2NhbCBjc3MgbW9kdWxlcy4gUmVsb2FkIGFsbCBjc3NcIik7cmVsb2FkQWxsKCk7cmV0dXJufWlmKG4pe2NvbnNvbGUubG9nKFwiW0hNUl0gY3NzIHJlbG9hZCAlc1wiLGUuam9pbihcIiBcIikpfWVsc2V7Y29uc29sZS5sb2coXCJbSE1SXSBSZWxvYWQgYWxsIGNzc1wiKTtyZWxvYWRBbGwoKX19cmV0dXJuIGRlYm91bmNlKHVwZGF0ZSw1MCl9fSwxOTE6ZT0+e2Z1bmN0aW9uIG5vcm1hbGl6ZVVybChlKXtyZXR1cm4gZS5yZWR1Y2UoKGZ1bmN0aW9uKGUscil7c3dpdGNoKHIpe2Nhc2VcIi4uXCI6ZS5wb3AoKTticmVhaztjYXNlXCIuXCI6YnJlYWs7ZGVmYXVsdDplLnB1c2gocil9cmV0dXJuIGV9KSxbXSkuam9pbihcIi9cIil9ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2U9ZS50cmltKCk7aWYoL15kYXRhOi9pLnRlc3QoZSkpe3JldHVybiBlfXZhciByPWUuaW5kZXhPZihcIi8vXCIpIT09LTE/ZS5zcGxpdChcIi8vXCIpWzBdK1wiLy9cIjpcIlwiO3ZhciB0PWUucmVwbGFjZShuZXcgUmVnRXhwKHIsXCJpXCIpLFwiXCIpLnNwbGl0KFwiL1wiKTt2YXIgbj10WzBdLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwuJC8sXCJcIik7dFswXT1cIlwiO3ZhciBpPW5vcm1hbGl6ZVVybCh0KTtyZXR1cm4gcituK2l9fX07dmFyIHI9e307ZnVuY3Rpb24gX19uY2N3cGNrX3JlcXVpcmVfXyh0KXt2YXIgbj1yW3RdO2lmKG4hPT11bmRlZmluZWQpe3JldHVybiBuLmV4cG9ydHN9dmFyIGk9clt0XT17ZXhwb3J0czp7fX07dmFyIGE9dHJ1ZTt0cnl7ZVt0XShpLGkuZXhwb3J0cyxfX25jY3dwY2tfcmVxdWlyZV9fKTthPWZhbHNlfWZpbmFsbHl7aWYoYSlkZWxldGUgclt0XX1yZXR1cm4gaS5leHBvcnRzfWlmKHR5cGVvZiBfX25jY3dwY2tfcmVxdWlyZV9fIT09XCJ1bmRlZmluZWRcIilfX25jY3dwY2tfcmVxdWlyZV9fLmFiPV9fZGlybmFtZStcIi9cIjt2YXIgdD1fX25jY3dwY2tfcmVxdWlyZV9fKDUyOSk7bW9kdWxlLmV4cG9ydHM9dH0pKCk7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/mini-css-extract-plugin/hmr/hotModuleReplacement.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n true &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return (type.displayName || \"Context\") + \".Provider\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(\n      type,\n      key,\n      self,\n      source,\n      owner,\n      props,\n      debugStack,\n      debugTask\n    ) {\n      self = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== self ? self : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      source,\n      self,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        self,\n        source,\n        getOwner(),\n        maybeKey,\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      \"object\" === typeof node &&\n        null !== node &&\n        node.$$typeof === REACT_ELEMENT_TYPE &&\n        node._store &&\n        (node._store.validated = 1);\n    }\n    var React = __webpack_require__(/*! next/dist/compiled/react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\");\n    Symbol.for(\"react.provider\");\n    var REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      \"react-stack-bottom-frame\": function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React[\"react-stack-bottom-frame\"].bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsxDEV = function (\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      source,\n      self\n    ) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        isStaticChildren,\n        source,\n        self,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7QUFDYixLQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCwrQ0FBK0MsNkJBQTZCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0JBQWdCLGdEQUFnRDtBQUNoRSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0EsZ0NBQWdDLGtDQUFrQyxPQUFPO0FBQ3pFO0FBQ0EsZ0dBQWdHLFNBQVMsVUFBVSxzRkFBc0YsYUFBYSxVQUFVLFVBQVU7QUFDMU87QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUJBQU8sQ0FBQyxzR0FBMEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdCQUFnQjtBQUNwQixJQUFJLGNBQWM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcY29tcGlsZWRcXHJlYWN0XFxjanNcXHJlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlIFJlYWN0XG4gKiByZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WICYmXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpIHtcbiAgICAgIGlmIChudWxsID09IHR5cGUpIHJldHVybiBudWxsO1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHR5cGUpXG4gICAgICAgIHJldHVybiB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9DTElFTlRfUkVGRVJFTkNFXG4gICAgICAgICAgPyBudWxsXG4gICAgICAgICAgOiB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBudWxsO1xuICAgICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0eXBlKSByZXR1cm4gdHlwZTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFJFQUNUX0ZSQUdNRU5UX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiRnJhZ21lbnRcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9QUk9GSUxFUl9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlByb2ZpbGVyXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1RSSUNUX01PREVfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdHJpY3RNb2RlXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdXNwZW5zZVwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdXNwZW5zZUxpc3RcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9BQ1RJVklUWV9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIkFjdGl2aXR5XCI7XG4gICAgICB9XG4gICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHR5cGUpXG4gICAgICAgIHN3aXRjaCAoXG4gICAgICAgICAgKFwibnVtYmVyXCIgPT09IHR5cGVvZiB0eXBlLnRhZyAmJlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJSZWNlaXZlZCBhbiB1bmV4cGVjdGVkIG9iamVjdCBpbiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoKS4gVGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLlwiXG4gICAgICAgICAgICApLFxuICAgICAgICAgIHR5cGUuJCR0eXBlb2YpXG4gICAgICAgICkge1xuICAgICAgICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gXCJQb3J0YWxcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0NPTlRFWFRfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiAodHlwZS5kaXNwbGF5TmFtZSB8fCBcIkNvbnRleHRcIikgKyBcIi5Qcm92aWRlclwiO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OU1VNRVJfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiAodHlwZS5fY29udGV4dC5kaXNwbGF5TmFtZSB8fCBcIkNvbnRleHRcIikgKyBcIi5Db25zdW1lclwiO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRTpcbiAgICAgICAgICAgIHZhciBpbm5lclR5cGUgPSB0eXBlLnJlbmRlcjtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLmRpc3BsYXlOYW1lO1xuICAgICAgICAgICAgdHlwZSB8fFxuICAgICAgICAgICAgICAoKHR5cGUgPSBpbm5lclR5cGUuZGlzcGxheU5hbWUgfHwgaW5uZXJUeXBlLm5hbWUgfHwgXCJcIiksXG4gICAgICAgICAgICAgICh0eXBlID0gXCJcIiAhPT0gdHlwZSA/IFwiRm9yd2FyZFJlZihcIiArIHR5cGUgKyBcIilcIiA6IFwiRm9yd2FyZFJlZlwiKSk7XG4gICAgICAgICAgICByZXR1cm4gdHlwZTtcbiAgICAgICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRTpcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIChpbm5lclR5cGUgPSB0eXBlLmRpc3BsYXlOYW1lIHx8IG51bGwpLFxuICAgICAgICAgICAgICBudWxsICE9PSBpbm5lclR5cGVcbiAgICAgICAgICAgICAgICA/IGlubmVyVHlwZVxuICAgICAgICAgICAgICAgIDogZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUudHlwZSkgfHwgXCJNZW1vXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6XG4gICAgICAgICAgICBpbm5lclR5cGUgPSB0eXBlLl9wYXlsb2FkO1xuICAgICAgICAgICAgdHlwZSA9IHR5cGUuX2luaXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXR1cm4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUoaW5uZXJUeXBlKSk7XG4gICAgICAgICAgICB9IGNhdGNoICh4KSB7fVxuICAgICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gXCJcIiArIHZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGVja0tleVN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpO1xuICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gITE7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICEwO1xuICAgICAgfVxuICAgICAgaWYgKEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBjb25zb2xlO1xuICAgICAgICB2YXIgSlNDb21waWxlcl90ZW1wX2NvbnN0ID0gSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0LmVycm9yO1xuICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JGpzY29tcCQwID1cbiAgICAgICAgICAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgU3ltYm9sICYmXG4gICAgICAgICAgICBTeW1ib2wudG9TdHJpbmdUYWcgJiZcbiAgICAgICAgICAgIHZhbHVlW1N5bWJvbC50b1N0cmluZ1RhZ10pIHx8XG4gICAgICAgICAgdmFsdWUuY29uc3RydWN0b3IubmFtZSB8fFxuICAgICAgICAgIFwiT2JqZWN0XCI7XG4gICAgICAgIEpTQ29tcGlsZXJfdGVtcF9jb25zdC5jYWxsKFxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCxcbiAgICAgICAgICBcIlRoZSBwcm92aWRlZCBrZXkgaXMgYW4gdW5zdXBwb3J0ZWQgdHlwZSAlcy4gVGhpcyB2YWx1ZSBtdXN0IGJlIGNvZXJjZWQgdG8gYSBzdHJpbmcgYmVmb3JlIHVzaW5nIGl0IGhlcmUuXCIsXG4gICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JGpzY29tcCQwXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRUYXNrTmFtZSh0eXBlKSB7XG4gICAgICBpZiAodHlwZSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSkgcmV0dXJuIFwiPD5cIjtcbiAgICAgIGlmIChcbiAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHR5cGUgJiZcbiAgICAgICAgbnVsbCAhPT0gdHlwZSAmJlxuICAgICAgICB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9MQVpZX1RZUEVcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIFwiPC4uLj5cIjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpO1xuICAgICAgICByZXR1cm4gbmFtZSA/IFwiPFwiICsgbmFtZSArIFwiPlwiIDogXCI8Li4uPlwiO1xuICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICByZXR1cm4gXCI8Li4uPlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRPd25lcigpIHtcbiAgICAgIHZhciBkaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuQTtcbiAgICAgIHJldHVybiBudWxsID09PSBkaXNwYXRjaGVyID8gbnVsbCA6IGRpc3BhdGNoZXIuZ2V0T3duZXIoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVW5rbm93bk93bmVyKCkge1xuICAgICAgcmV0dXJuIEVycm9yKFwicmVhY3Qtc3RhY2stdG9wLWZyYW1lXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYXNWYWxpZEtleShjb25maWcpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgXCJrZXlcIikpIHtcbiAgICAgICAgdmFyIGdldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY29uZmlnLCBcImtleVwiKS5nZXQ7XG4gICAgICAgIGlmIChnZXR0ZXIgJiYgZ2V0dGVyLmlzUmVhY3RXYXJuaW5nKSByZXR1cm4gITE7XG4gICAgICB9XG4gICAgICByZXR1cm4gdm9pZCAwICE9PSBjb25maWcua2V5O1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpIHtcbiAgICAgIGZ1bmN0aW9uIHdhcm5BYm91dEFjY2Vzc2luZ0tleSgpIHtcbiAgICAgICAgc3BlY2lhbFByb3BLZXlXYXJuaW5nU2hvd24gfHxcbiAgICAgICAgICAoKHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duID0gITApLFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBcIiVzOiBga2V5YCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0IGluIGB1bmRlZmluZWRgIGJlaW5nIHJldHVybmVkLiBJZiB5b3UgbmVlZCB0byBhY2Nlc3MgdGhlIHNhbWUgdmFsdWUgd2l0aGluIHRoZSBjaGlsZCBjb21wb25lbnQsIHlvdSBzaG91bGQgcGFzcyBpdCBhcyBhIGRpZmZlcmVudCBwcm9wLiAoaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9zcGVjaWFsLXByb3BzKVwiLFxuICAgICAgICAgICAgZGlzcGxheU5hbWVcbiAgICAgICAgICApKTtcbiAgICAgIH1cbiAgICAgIHdhcm5BYm91dEFjY2Vzc2luZ0tleS5pc1JlYWN0V2FybmluZyA9ICEwO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3BzLCBcImtleVwiLCB7XG4gICAgICAgIGdldDogd2FybkFib3V0QWNjZXNzaW5nS2V5LFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmcoKSB7XG4gICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0aGlzLnR5cGUpO1xuICAgICAgZGlkV2FybkFib3V0RWxlbWVudFJlZltjb21wb25lbnROYW1lXSB8fFxuICAgICAgICAoKGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gPSAhMCksXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJBY2Nlc3NpbmcgZWxlbWVudC5yZWYgd2FzIHJlbW92ZWQgaW4gUmVhY3QgMTkuIHJlZiBpcyBub3cgYSByZWd1bGFyIHByb3AuIEl0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBKU1ggRWxlbWVudCB0eXBlIGluIGEgZnV0dXJlIHJlbGVhc2UuXCJcbiAgICAgICAgKSk7XG4gICAgICBjb21wb25lbnROYW1lID0gdGhpcy5wcm9wcy5yZWY7XG4gICAgICByZXR1cm4gdm9pZCAwICE9PSBjb21wb25lbnROYW1lID8gY29tcG9uZW50TmFtZSA6IG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFJlYWN0RWxlbWVudChcbiAgICAgIHR5cGUsXG4gICAgICBrZXksXG4gICAgICBzZWxmLFxuICAgICAgc291cmNlLFxuICAgICAgb3duZXIsXG4gICAgICBwcm9wcyxcbiAgICAgIGRlYnVnU3RhY2ssXG4gICAgICBkZWJ1Z1Rhc2tcbiAgICApIHtcbiAgICAgIHNlbGYgPSBwcm9wcy5yZWY7XG4gICAgICB0eXBlID0ge1xuICAgICAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgcHJvcHM6IHByb3BzLFxuICAgICAgICBfb3duZXI6IG93bmVyXG4gICAgICB9O1xuICAgICAgbnVsbCAhPT0gKHZvaWQgMCAhPT0gc2VsZiA/IHNlbGYgOiBudWxsKVxuICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcInJlZlwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgICAgIGdldDogZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmdcbiAgICAgICAgICB9KVxuICAgICAgICA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcInJlZlwiLCB7IGVudW1lcmFibGU6ICExLCB2YWx1ZTogbnVsbCB9KTtcbiAgICAgIHR5cGUuX3N0b3JlID0ge307XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZS5fc3RvcmUsIFwidmFsaWRhdGVkXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IDBcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnSW5mb1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBudWxsXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z1N0YWNrXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IGRlYnVnU3RhY2tcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnVGFza1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBkZWJ1Z1Rhc2tcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmZyZWV6ZSAmJiAoT2JqZWN0LmZyZWV6ZSh0eXBlLnByb3BzKSwgT2JqZWN0LmZyZWV6ZSh0eXBlKSk7XG4gICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG4gICAgZnVuY3Rpb24ganN4REVWSW1wbChcbiAgICAgIHR5cGUsXG4gICAgICBjb25maWcsXG4gICAgICBtYXliZUtleSxcbiAgICAgIGlzU3RhdGljQ2hpbGRyZW4sXG4gICAgICBzb3VyY2UsXG4gICAgICBzZWxmLFxuICAgICAgZGVidWdTdGFjayxcbiAgICAgIGRlYnVnVGFza1xuICAgICkge1xuICAgICAgdmFyIGNoaWxkcmVuID0gY29uZmlnLmNoaWxkcmVuO1xuICAgICAgaWYgKHZvaWQgMCAhPT0gY2hpbGRyZW4pXG4gICAgICAgIGlmIChpc1N0YXRpY0NoaWxkcmVuKVxuICAgICAgICAgIGlmIChpc0FycmF5SW1wbChjaGlsZHJlbikpIHtcbiAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4gPSAwO1xuICAgICAgICAgICAgICBpc1N0YXRpY0NoaWxkcmVuIDwgY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICBpc1N0YXRpY0NoaWxkcmVuKytcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoY2hpbGRyZW5baXNTdGF0aWNDaGlsZHJlbl0pO1xuICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZSAmJiBPYmplY3QuZnJlZXplKGNoaWxkcmVuKTtcbiAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwiUmVhY3QuanN4OiBTdGF0aWMgY2hpbGRyZW4gc2hvdWxkIGFsd2F5cyBiZSBhbiBhcnJheS4gWW91IGFyZSBsaWtlbHkgZXhwbGljaXRseSBjYWxsaW5nIFJlYWN0LmpzeHMgb3IgUmVhY3QuanN4REVWLiBVc2UgdGhlIEJhYmVsIHRyYW5zZm9ybSBpbnN0ZWFkLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICBlbHNlIHZhbGlkYXRlQ2hpbGRLZXlzKGNoaWxkcmVuKTtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgXCJrZXlcIikpIHtcbiAgICAgICAgY2hpbGRyZW4gPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZSk7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnKS5maWx0ZXIoZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICByZXR1cm4gXCJrZXlcIiAhPT0gaztcbiAgICAgICAgfSk7XG4gICAgICAgIGlzU3RhdGljQ2hpbGRyZW4gPVxuICAgICAgICAgIDAgPCBrZXlzLmxlbmd0aFxuICAgICAgICAgICAgPyBcIntrZXk6IHNvbWVLZXksIFwiICsga2V5cy5qb2luKFwiOiAuLi4sIFwiKSArIFwiOiAuLi59XCJcbiAgICAgICAgICAgIDogXCJ7a2V5OiBzb21lS2V5fVwiO1xuICAgICAgICBkaWRXYXJuQWJvdXRLZXlTcHJlYWRbY2hpbGRyZW4gKyBpc1N0YXRpY0NoaWxkcmVuXSB8fFxuICAgICAgICAgICgoa2V5cyA9XG4gICAgICAgICAgICAwIDwga2V5cy5sZW5ndGggPyBcIntcIiArIGtleXMuam9pbihcIjogLi4uLCBcIikgKyBcIjogLi4ufVwiIDogXCJ7fVwiKSxcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgJ0EgcHJvcHMgb2JqZWN0IGNvbnRhaW5pbmcgYSBcImtleVwiIHByb3AgaXMgYmVpbmcgc3ByZWFkIGludG8gSlNYOlxcbiAgbGV0IHByb3BzID0gJXM7XFxuICA8JXMgey4uLnByb3BzfSAvPlxcblJlYWN0IGtleXMgbXVzdCBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gSlNYIHdpdGhvdXQgdXNpbmcgc3ByZWFkOlxcbiAgbGV0IHByb3BzID0gJXM7XFxuICA8JXMga2V5PXtzb21lS2V5fSB7Li4ucHJvcHN9IC8+JyxcbiAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4sXG4gICAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgICAgIGtleXMsXG4gICAgICAgICAgICBjaGlsZHJlblxuICAgICAgICAgICksXG4gICAgICAgICAgKGRpZFdhcm5BYm91dEtleVNwcmVhZFtjaGlsZHJlbiArIGlzU3RhdGljQ2hpbGRyZW5dID0gITApKTtcbiAgICAgIH1cbiAgICAgIGNoaWxkcmVuID0gbnVsbDtcbiAgICAgIHZvaWQgMCAhPT0gbWF5YmVLZXkgJiZcbiAgICAgICAgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24obWF5YmVLZXkpLCAoY2hpbGRyZW4gPSBcIlwiICsgbWF5YmVLZXkpKTtcbiAgICAgIGhhc1ZhbGlkS2V5KGNvbmZpZykgJiZcbiAgICAgICAgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY29uZmlnLmtleSksIChjaGlsZHJlbiA9IFwiXCIgKyBjb25maWcua2V5KSk7XG4gICAgICBpZiAoXCJrZXlcIiBpbiBjb25maWcpIHtcbiAgICAgICAgbWF5YmVLZXkgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gY29uZmlnKVxuICAgICAgICAgIFwia2V5XCIgIT09IHByb3BOYW1lICYmIChtYXliZUtleVtwcm9wTmFtZV0gPSBjb25maWdbcHJvcE5hbWVdKTtcbiAgICAgIH0gZWxzZSBtYXliZUtleSA9IGNvbmZpZztcbiAgICAgIGNoaWxkcmVuICYmXG4gICAgICAgIGRlZmluZUtleVByb3BXYXJuaW5nR2V0dGVyKFxuICAgICAgICAgIG1heWJlS2V5LFxuICAgICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHR5cGVcbiAgICAgICAgICAgID8gdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgXCJVbmtub3duXCJcbiAgICAgICAgICAgIDogdHlwZVxuICAgICAgICApO1xuICAgICAgcmV0dXJuIFJlYWN0RWxlbWVudChcbiAgICAgICAgdHlwZSxcbiAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgIHNlbGYsXG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgZ2V0T3duZXIoKSxcbiAgICAgICAgbWF5YmVLZXksXG4gICAgICAgIGRlYnVnU3RhY2ssXG4gICAgICAgIGRlYnVnVGFza1xuICAgICAgKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdmFsaWRhdGVDaGlsZEtleXMobm9kZSkge1xuICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIG5vZGUgJiZcbiAgICAgICAgbnVsbCAhPT0gbm9kZSAmJlxuICAgICAgICBub2RlLiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEUgJiZcbiAgICAgICAgbm9kZS5fc3RvcmUgJiZcbiAgICAgICAgKG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IDEpO1xuICAgIH1cbiAgICB2YXIgUmVhY3QgPSByZXF1aXJlKFwibmV4dC9kaXN0L2NvbXBpbGVkL3JlYWN0XCIpLFxuICAgICAgUkVBQ1RfRUxFTUVOVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnRyYW5zaXRpb25hbC5lbGVtZW50XCIpLFxuICAgICAgUkVBQ1RfUE9SVEFMX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QucG9ydGFsXCIpLFxuICAgICAgUkVBQ1RfRlJBR01FTlRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5mcmFnbWVudFwiKSxcbiAgICAgIFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3RyaWN0X21vZGVcIiksXG4gICAgICBSRUFDVF9QUk9GSUxFUl9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnByb2ZpbGVyXCIpO1xuICAgIFN5bWJvbC5mb3IoXCJyZWFjdC5wcm92aWRlclwiKTtcbiAgICB2YXIgUkVBQ1RfQ09OU1VNRVJfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jb25zdW1lclwiKSxcbiAgICAgIFJFQUNUX0NPTlRFWFRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jb250ZXh0XCIpLFxuICAgICAgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5mb3J3YXJkX3JlZlwiKSxcbiAgICAgIFJFQUNUX1NVU1BFTlNFX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VcIiksXG4gICAgICBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VfbGlzdFwiKSxcbiAgICAgIFJFQUNUX01FTU9fVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vXCIpLFxuICAgICAgUkVBQ1RfTEFaWV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmxhenlcIiksXG4gICAgICBSRUFDVF9BQ1RJVklUWV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmFjdGl2aXR5XCIpLFxuICAgICAgUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jbGllbnQucmVmZXJlbmNlXCIpLFxuICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMgPVxuICAgICAgICBSZWFjdC5fX0NMSUVOVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9XQVJOX1VTRVJTX1RIRVlfQ0FOTk9UX1VQR1JBREUsXG4gICAgICBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICBpc0FycmF5SW1wbCA9IEFycmF5LmlzQXJyYXksXG4gICAgICBjcmVhdGVUYXNrID0gY29uc29sZS5jcmVhdGVUYXNrXG4gICAgICAgID8gY29uc29sZS5jcmVhdGVUYXNrXG4gICAgICAgIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfTtcbiAgICBSZWFjdCA9IHtcbiAgICAgIFwicmVhY3Qtc3RhY2stYm90dG9tLWZyYW1lXCI6IGZ1bmN0aW9uIChjYWxsU3RhY2tGb3JFcnJvcikge1xuICAgICAgICByZXR1cm4gY2FsbFN0YWNrRm9yRXJyb3IoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93bjtcbiAgICB2YXIgZGlkV2FybkFib3V0RWxlbWVudFJlZiA9IHt9O1xuICAgIHZhciB1bmtub3duT3duZXJEZWJ1Z1N0YWNrID0gUmVhY3RbXCJyZWFjdC1zdGFjay1ib3R0b20tZnJhbWVcIl0uYmluZChcbiAgICAgIFJlYWN0LFxuICAgICAgVW5rbm93bk93bmVyXG4gICAgKSgpO1xuICAgIHZhciB1bmtub3duT3duZXJEZWJ1Z1Rhc2sgPSBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKFVua25vd25Pd25lcikpO1xuICAgIHZhciBkaWRXYXJuQWJvdXRLZXlTcHJlYWQgPSB7fTtcbiAgICBleHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTtcbiAgICBleHBvcnRzLmpzeERFViA9IGZ1bmN0aW9uIChcbiAgICAgIHR5cGUsXG4gICAgICBjb25maWcsXG4gICAgICBtYXliZUtleSxcbiAgICAgIGlzU3RhdGljQ2hpbGRyZW4sXG4gICAgICBzb3VyY2UsXG4gICAgICBzZWxmXG4gICAgKSB7XG4gICAgICB2YXIgdHJhY2tBY3R1YWxPd25lciA9XG4gICAgICAgIDFlNCA+IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzKys7XG4gICAgICByZXR1cm4ganN4REVWSW1wbChcbiAgICAgICAgdHlwZSxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBtYXliZUtleSxcbiAgICAgICAgaXNTdGF0aWNDaGlsZHJlbixcbiAgICAgICAgc291cmNlLFxuICAgICAgICBzZWxmLFxuICAgICAgICB0cmFja0FjdHVhbE93bmVyXG4gICAgICAgICAgPyBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKVxuICAgICAgICAgIDogdW5rbm93bk93bmVyRGVidWdTdGFjayxcbiAgICAgICAgdHJhY2tBY3R1YWxPd25lciA/IGNyZWF0ZVRhc2soZ2V0VGFza05hbWUodHlwZSkpIDogdW5rbm93bk93bmVyRGVidWdUYXNrXG4gICAgICApO1xuICAgIH07XG4gIH0pKCk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js":
/*!******************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/jsx-dev-runtime.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/react-jsx-dev-runtime.development.js */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvanN4LWRldi1ydW50aW1lLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSw4TEFBc0U7QUFDeEUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxuZXh0XFxkaXN0XFxjb21waWxlZFxccmVhY3RcXGpzeC1kZXYtcnVudGltZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLnByb2R1Y3Rpb24uanMnKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLmRldmVsb3BtZW50LmpzJyk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/lib/metadata/metadata-constants.js":
/*!*******************************************************************!*\
  !*** ./node_modules/next/dist/lib/metadata/metadata-constants.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    METADATA_BOUNDARY_NAME: function() {\n        return METADATA_BOUNDARY_NAME;\n    },\n    OUTLET_BOUNDARY_NAME: function() {\n        return OUTLET_BOUNDARY_NAME;\n    },\n    VIEWPORT_BOUNDARY_NAME: function() {\n        return VIEWPORT_BOUNDARY_NAME;\n    }\n});\nconst METADATA_BOUNDARY_NAME = '__next_metadata_boundary__';\nconst VIEWPORT_BOUNDARY_NAME = '__next_viewport_boundary__';\nconst OUTLET_BOUNDARY_NAME = '__next_outlet_boundary__';\n\n//# sourceMappingURL=metadata-constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvbGliL21ldGFkYXRhL21ldGFkYXRhLWNvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLE1BQU0sQ0FJTDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXGxpYlxcbWV0YWRhdGFcXG1ldGFkYXRhLWNvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICAgIE1FVEFEQVRBX0JPVU5EQVJZX05BTUU6IG51bGwsXG4gICAgT1VUTEVUX0JPVU5EQVJZX05BTUU6IG51bGwsXG4gICAgVklFV1BPUlRfQk9VTkRBUllfTkFNRTogbnVsbFxufSk7XG5mdW5jdGlvbiBfZXhwb3J0KHRhcmdldCwgYWxsKSB7XG4gICAgZm9yKHZhciBuYW1lIGluIGFsbClPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogYWxsW25hbWVdXG4gICAgfSk7XG59XG5fZXhwb3J0KGV4cG9ydHMsIHtcbiAgICBNRVRBREFUQV9CT1VOREFSWV9OQU1FOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIE1FVEFEQVRBX0JPVU5EQVJZX05BTUU7XG4gICAgfSxcbiAgICBPVVRMRVRfQk9VTkRBUllfTkFNRTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBPVVRMRVRfQk9VTkRBUllfTkFNRTtcbiAgICB9LFxuICAgIFZJRVdQT1JUX0JPVU5EQVJZX05BTUU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gVklFV1BPUlRfQk9VTkRBUllfTkFNRTtcbiAgICB9XG59KTtcbmNvbnN0IE1FVEFEQVRBX0JPVU5EQVJZX05BTUUgPSAnX19uZXh0X21ldGFkYXRhX2JvdW5kYXJ5X18nO1xuY29uc3QgVklFV1BPUlRfQk9VTkRBUllfTkFNRSA9ICdfX25leHRfdmlld3BvcnRfYm91bmRhcnlfXyc7XG5jb25zdCBPVVRMRVRfQk9VTkRBUllfTkFNRSA9ICdfX25leHRfb3V0bGV0X2JvdW5kYXJ5X18nO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRhZGF0YS1jb25zdGFudHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/lib/metadata/metadata-constants.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/lib/scheduler.js":
/*!*************************************************!*\
  !*** ./node_modules/next/dist/lib/scheduler.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    atLeastOneTask: function() {\n        return atLeastOneTask;\n    },\n    scheduleImmediate: function() {\n        return scheduleImmediate;\n    },\n    scheduleOnNextTick: function() {\n        return scheduleOnNextTick;\n    },\n    waitAtLeastOneReactRenderTask: function() {\n        return waitAtLeastOneReactRenderTask;\n    }\n});\nconst scheduleOnNextTick = (cb)=>{\n    // We use Promise.resolve().then() here so that the operation is scheduled at\n    // the end of the promise job queue, we then add it to the next process tick\n    // to ensure it's evaluated afterwards.\n    //\n    // This was inspired by the implementation of the DataLoader interface: https://github.com/graphql/dataloader/blob/d336bd15282664e0be4b4a657cb796f09bafbc6b/src/index.js#L213-L255\n    //\n    Promise.resolve().then(()=>{\n        if (false) {} else {\n            process.nextTick(cb);\n        }\n    });\n};\nconst scheduleImmediate = (cb)=>{\n    if (false) {} else {\n        setImmediate(cb);\n    }\n};\nfunction atLeastOneTask() {\n    return new Promise((resolve)=>scheduleImmediate(resolve));\n}\nfunction waitAtLeastOneReactRenderTask() {\n    if (false) {} else {\n        return new Promise((r)=>setImmediate(r));\n    }\n}\n\n//# sourceMappingURL=scheduler.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvbGliL3NjaGVkdWxlci5qcyIsIm1hcHBpbmdzIjoiO0FBQWE7QUFDYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixNQUFNLENBS0w7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEtBQW1DLEVBQUUsRUFFeEMsQ0FBQztBQUNWLFlBQVksT0FBTztBQUNuQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsUUFBUSxLQUFtQyxFQUFFLEVBRXhDLENBQUM7QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsS0FBbUMsRUFBRSxFQUV4QyxDQUFDO0FBQ047QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcbGliXFxzY2hlZHVsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBhdExlYXN0T25lVGFzazogbnVsbCxcbiAgICBzY2hlZHVsZUltbWVkaWF0ZTogbnVsbCxcbiAgICBzY2hlZHVsZU9uTmV4dFRpY2s6IG51bGwsXG4gICAgd2FpdEF0TGVhc3RPbmVSZWFjdFJlbmRlclRhc2s6IG51bGxcbn0pO1xuZnVuY3Rpb24gX2V4cG9ydCh0YXJnZXQsIGFsbCkge1xuICAgIGZvcih2YXIgbmFtZSBpbiBhbGwpT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgbmFtZSwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6IGFsbFtuYW1lXVxuICAgIH0pO1xufVxuX2V4cG9ydChleHBvcnRzLCB7XG4gICAgYXRMZWFzdE9uZVRhc2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYXRMZWFzdE9uZVRhc2s7XG4gICAgfSxcbiAgICBzY2hlZHVsZUltbWVkaWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUltbWVkaWF0ZTtcbiAgICB9LFxuICAgIHNjaGVkdWxlT25OZXh0VGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZU9uTmV4dFRpY2s7XG4gICAgfSxcbiAgICB3YWl0QXRMZWFzdE9uZVJlYWN0UmVuZGVyVGFzazogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB3YWl0QXRMZWFzdE9uZVJlYWN0UmVuZGVyVGFzaztcbiAgICB9XG59KTtcbmNvbnN0IHNjaGVkdWxlT25OZXh0VGljayA9IChjYik9PntcbiAgICAvLyBXZSB1c2UgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigpIGhlcmUgc28gdGhhdCB0aGUgb3BlcmF0aW9uIGlzIHNjaGVkdWxlZCBhdFxuICAgIC8vIHRoZSBlbmQgb2YgdGhlIHByb21pc2Ugam9iIHF1ZXVlLCB3ZSB0aGVuIGFkZCBpdCB0byB0aGUgbmV4dCBwcm9jZXNzIHRpY2tcbiAgICAvLyB0byBlbnN1cmUgaXQncyBldmFsdWF0ZWQgYWZ0ZXJ3YXJkcy5cbiAgICAvL1xuICAgIC8vIFRoaXMgd2FzIGluc3BpcmVkIGJ5IHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgRGF0YUxvYWRlciBpbnRlcmZhY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaHFsL2RhdGFsb2FkZXIvYmxvYi9kMzM2YmQxNTI4MjY2NGUwYmU0YjRhNjU3Y2I3OTZmMDliYWZiYzZiL3NyYy9pbmRleC5qcyNMMjEzLUwyNTVcbiAgICAvL1xuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PntcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5FWFRfUlVOVElNRSA9PT0gJ2VkZ2UnKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soY2IpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuY29uc3Qgc2NoZWR1bGVJbW1lZGlhdGUgPSAoY2IpPT57XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5FWFRfUlVOVElNRSA9PT0gJ2VkZ2UnKSB7XG4gICAgICAgIHNldFRpbWVvdXQoY2IsIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEltbWVkaWF0ZShjYik7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGF0TGVhc3RPbmVUYXNrKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PnNjaGVkdWxlSW1tZWRpYXRlKHJlc29sdmUpKTtcbn1cbmZ1bmN0aW9uIHdhaXRBdExlYXN0T25lUmVhY3RSZW5kZXJUYXNrKCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5ORVhUX1JVTlRJTUUgPT09ICdlZGdlJykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHIpPT5zZXRUaW1lb3V0KHIsIDApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHIpPT5zZXRJbW1lZGlhdGUocikpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/lib/scheduler.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/app-render/after-task-async-storage-instance.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/next/dist/server/app-render/after-task-async-storage-instance.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"afterTaskAsyncStorageInstance\", ({\n    enumerable: true,\n    get: function() {\n        return afterTaskAsyncStorageInstance;\n    }\n}));\nconst _asynclocalstorage = __webpack_require__(/*! ./async-local-storage */ \"(app-pages-browser)/./node_modules/next/dist/server/app-render/async-local-storage.js\");\nconst afterTaskAsyncStorageInstance = (0, _asynclocalstorage.createAsyncLocalStorage)();\n\n//# sourceMappingURL=after-task-async-storage-instance.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvYWZ0ZXItdGFzay1hc3luYy1zdG9yYWdlLWluc3RhbmNlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsaUVBQWdFO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsMkJBQTJCLG1CQUFPLENBQUMsb0hBQXVCO0FBQzFEOztBQUVBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcc2VydmVyXFxhcHAtcmVuZGVyXFxhZnRlci10YXNrLWFzeW5jLXN0b3JhZ2UtaW5zdGFuY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJhZnRlclRhc2tBc3luY1N0b3JhZ2VJbnN0YW5jZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYWZ0ZXJUYXNrQXN5bmNTdG9yYWdlSW5zdGFuY2U7XG4gICAgfVxufSk7XG5jb25zdCBfYXN5bmNsb2NhbHN0b3JhZ2UgPSByZXF1aXJlKFwiLi9hc3luYy1sb2NhbC1zdG9yYWdlXCIpO1xuY29uc3QgYWZ0ZXJUYXNrQXN5bmNTdG9yYWdlSW5zdGFuY2UgPSAoMCwgX2FzeW5jbG9jYWxzdG9yYWdlLmNyZWF0ZUFzeW5jTG9jYWxTdG9yYWdlKSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZnRlci10YXNrLWFzeW5jLXN0b3JhZ2UtaW5zdGFuY2UuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/app-render/after-task-async-storage-instance.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/app-render/after-task-async-storage.external.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/next/dist/server/app-render/after-task-async-storage.external.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"afterTaskAsyncStorage\", ({\n    enumerable: true,\n    get: function() {\n        return _aftertaskasyncstorageinstance.afterTaskAsyncStorageInstance;\n    }\n}));\nconst _aftertaskasyncstorageinstance = __webpack_require__(/*! ./after-task-async-storage-instance */ \"(app-pages-browser)/./node_modules/next/dist/server/app-render/after-task-async-storage-instance.js\");\n\n//# sourceMappingURL=after-task-async-storage.external.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvYWZ0ZXItdGFzay1hc3luYy1zdG9yYWdlLmV4dGVybmFsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YseURBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsdUNBQXVDLG1CQUFPLENBQUMsZ0pBQXFDOztBQUVwRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXHNlcnZlclxcYXBwLXJlbmRlclxcYWZ0ZXItdGFzay1hc3luYy1zdG9yYWdlLmV4dGVybmFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiYWZ0ZXJUYXNrQXN5bmNTdG9yYWdlXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfYWZ0ZXJ0YXNrYXN5bmNzdG9yYWdlaW5zdGFuY2UuYWZ0ZXJUYXNrQXN5bmNTdG9yYWdlSW5zdGFuY2U7XG4gICAgfVxufSk7XG5jb25zdCBfYWZ0ZXJ0YXNrYXN5bmNzdG9yYWdlaW5zdGFuY2UgPSByZXF1aXJlKFwiLi9hZnRlci10YXNrLWFzeW5jLXN0b3JhZ2UtaW5zdGFuY2VcIik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFmdGVyLXRhc2stYXN5bmMtc3RvcmFnZS5leHRlcm5hbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/app-render/after-task-async-storage.external.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/app-render/async-local-storage.js":
/*!*************************************************************************!*\
  !*** ./node_modules/next/dist/server/app-render/async-local-storage.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    bindSnapshot: function() {\n        return bindSnapshot;\n    },\n    createAsyncLocalStorage: function() {\n        return createAsyncLocalStorage;\n    },\n    createSnapshot: function() {\n        return createSnapshot;\n    }\n});\nconst sharedAsyncLocalStorageNotAvailableError = Object.defineProperty(new Error('Invariant: AsyncLocalStorage accessed in runtime where it is not available'), \"__NEXT_ERROR_CODE\", {\n    value: \"E504\",\n    enumerable: false,\n    configurable: true\n});\nclass FakeAsyncLocalStorage {\n    disable() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    getStore() {\n        // This fake implementation of AsyncLocalStorage always returns `undefined`.\n        return undefined;\n    }\n    run() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    exit() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    enterWith() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    static bind(fn) {\n        return fn;\n    }\n}\nconst maybeGlobalAsyncLocalStorage = typeof globalThis !== 'undefined' && globalThis.AsyncLocalStorage;\nfunction createAsyncLocalStorage() {\n    if (maybeGlobalAsyncLocalStorage) {\n        return new maybeGlobalAsyncLocalStorage();\n    }\n    return new FakeAsyncLocalStorage();\n}\nfunction bindSnapshot(fn) {\n    if (maybeGlobalAsyncLocalStorage) {\n        return maybeGlobalAsyncLocalStorage.bind(fn);\n    }\n    return FakeAsyncLocalStorage.bind(fn);\n}\nfunction createSnapshot() {\n    if (maybeGlobalAsyncLocalStorage) {\n        return maybeGlobalAsyncLocalStorage.snapshot();\n    }\n    return function(fn, ...args) {\n        return fn(...args);\n    };\n}\n\n//# sourceMappingURL=async-local-storage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvYXN5bmMtbG9jYWwtc3RvcmFnZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLE1BQU0sQ0FJTDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXHNlcnZlclxcYXBwLXJlbmRlclxcYXN5bmMtbG9jYWwtc3RvcmFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICAgIGJpbmRTbmFwc2hvdDogbnVsbCxcbiAgICBjcmVhdGVBc3luY0xvY2FsU3RvcmFnZTogbnVsbCxcbiAgICBjcmVhdGVTbmFwc2hvdDogbnVsbFxufSk7XG5mdW5jdGlvbiBfZXhwb3J0KHRhcmdldCwgYWxsKSB7XG4gICAgZm9yKHZhciBuYW1lIGluIGFsbClPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogYWxsW25hbWVdXG4gICAgfSk7XG59XG5fZXhwb3J0KGV4cG9ydHMsIHtcbiAgICBiaW5kU25hcHNob3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYmluZFNuYXBzaG90O1xuICAgIH0sXG4gICAgY3JlYXRlQXN5bmNMb2NhbFN0b3JhZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQXN5bmNMb2NhbFN0b3JhZ2U7XG4gICAgfSxcbiAgICBjcmVhdGVTbmFwc2hvdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVTbmFwc2hvdDtcbiAgICB9XG59KTtcbmNvbnN0IHNoYXJlZEFzeW5jTG9jYWxTdG9yYWdlTm90QXZhaWxhYmxlRXJyb3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKCdJbnZhcmlhbnQ6IEFzeW5jTG9jYWxTdG9yYWdlIGFjY2Vzc2VkIGluIHJ1bnRpbWUgd2hlcmUgaXQgaXMgbm90IGF2YWlsYWJsZScpLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICB2YWx1ZTogXCJFNTA0XCIsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG59KTtcbmNsYXNzIEZha2VBc3luY0xvY2FsU3RvcmFnZSB7XG4gICAgZGlzYWJsZSgpIHtcbiAgICAgICAgdGhyb3cgc2hhcmVkQXN5bmNMb2NhbFN0b3JhZ2VOb3RBdmFpbGFibGVFcnJvcjtcbiAgICB9XG4gICAgZ2V0U3RvcmUoKSB7XG4gICAgICAgIC8vIFRoaXMgZmFrZSBpbXBsZW1lbnRhdGlvbiBvZiBBc3luY0xvY2FsU3RvcmFnZSBhbHdheXMgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcnVuKCkge1xuICAgICAgICB0aHJvdyBzaGFyZWRBc3luY0xvY2FsU3RvcmFnZU5vdEF2YWlsYWJsZUVycm9yO1xuICAgIH1cbiAgICBleGl0KCkge1xuICAgICAgICB0aHJvdyBzaGFyZWRBc3luY0xvY2FsU3RvcmFnZU5vdEF2YWlsYWJsZUVycm9yO1xuICAgIH1cbiAgICBlbnRlcldpdGgoKSB7XG4gICAgICAgIHRocm93IHNoYXJlZEFzeW5jTG9jYWxTdG9yYWdlTm90QXZhaWxhYmxlRXJyb3I7XG4gICAgfVxuICAgIHN0YXRpYyBiaW5kKGZuKSB7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICB9XG59XG5jb25zdCBtYXliZUdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbFRoaXMuQXN5bmNMb2NhbFN0b3JhZ2U7XG5mdW5jdGlvbiBjcmVhdGVBc3luY0xvY2FsU3RvcmFnZSgpIHtcbiAgICBpZiAobWF5YmVHbG9iYWxBc3luY0xvY2FsU3RvcmFnZSkge1xuICAgICAgICByZXR1cm4gbmV3IG1heWJlR2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBGYWtlQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbn1cbmZ1bmN0aW9uIGJpbmRTbmFwc2hvdChmbikge1xuICAgIGlmIChtYXliZUdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIHJldHVybiBtYXliZUdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlLmJpbmQoZm4pO1xuICAgIH1cbiAgICByZXR1cm4gRmFrZUFzeW5jTG9jYWxTdG9yYWdlLmJpbmQoZm4pO1xufVxuZnVuY3Rpb24gY3JlYXRlU25hcHNob3QoKSB7XG4gICAgaWYgKG1heWJlR2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG1heWJlR2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2Uuc25hcHNob3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGZuLCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiBmbiguLi5hcmdzKTtcbiAgICB9O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3luYy1sb2NhbC1zdG9yYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/app-render/async-local-storage.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/app-render/dynamic-rendering.js":
/*!***********************************************************************!*\
  !*** ./node_modules/next/dist/server/app-render/dynamic-rendering.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/**\n * The functions provided by this module are used to communicate certain properties\n * about the currently running code so that Next.js can make decisions on how to handle\n * the current execution in different rendering modes such as pre-rendering, resuming, and SSR.\n *\n * Today Next.js treats all code as potentially static. Certain APIs may only make sense when dynamically rendering.\n * Traditionally this meant deopting the entire render to dynamic however with PPR we can now deopt parts\n * of a React tree as dynamic while still keeping other parts static. There are really two different kinds of\n * Dynamic indications.\n *\n * The first is simply an intention to be dynamic. unstable_noStore is an example of this where\n * the currently executing code simply declares that the current scope is dynamic but if you use it\n * inside unstable_cache it can still be cached. This type of indication can be removed if we ever\n * make the default dynamic to begin with because the only way you would ever be static is inside\n * a cache scope which this indication does not affect.\n *\n * The second is an indication that a dynamic data source was read. This is a stronger form of dynamic\n * because it means that it is inappropriate to cache this at all. using a dynamic data source inside\n * unstable_cache should error. If you want to use some dynamic data inside unstable_cache you should\n * read that data outside the cache and pass it in as an argument to the cached function.\n */ \nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    Postpone: function() {\n        return Postpone;\n    },\n    abortAndThrowOnSynchronousRequestDataAccess: function() {\n        return abortAndThrowOnSynchronousRequestDataAccess;\n    },\n    abortOnSynchronousPlatformIOAccess: function() {\n        return abortOnSynchronousPlatformIOAccess;\n    },\n    accessedDynamicData: function() {\n        return accessedDynamicData;\n    },\n    annotateDynamicAccess: function() {\n        return annotateDynamicAccess;\n    },\n    consumeDynamicAccess: function() {\n        return consumeDynamicAccess;\n    },\n    createDynamicTrackingState: function() {\n        return createDynamicTrackingState;\n    },\n    createDynamicValidationState: function() {\n        return createDynamicValidationState;\n    },\n    createHangingInputAbortSignal: function() {\n        return createHangingInputAbortSignal;\n    },\n    createPostponedAbortSignal: function() {\n        return createPostponedAbortSignal;\n    },\n    formatDynamicAPIAccesses: function() {\n        return formatDynamicAPIAccesses;\n    },\n    getFirstDynamicReason: function() {\n        return getFirstDynamicReason;\n    },\n    isDynamicPostpone: function() {\n        return isDynamicPostpone;\n    },\n    isPrerenderInterruptedError: function() {\n        return isPrerenderInterruptedError;\n    },\n    markCurrentScopeAsDynamic: function() {\n        return markCurrentScopeAsDynamic;\n    },\n    postponeWithTracking: function() {\n        return postponeWithTracking;\n    },\n    throwIfDisallowedDynamic: function() {\n        return throwIfDisallowedDynamic;\n    },\n    throwToInterruptStaticGeneration: function() {\n        return throwToInterruptStaticGeneration;\n    },\n    trackAllowedDynamicAccess: function() {\n        return trackAllowedDynamicAccess;\n    },\n    trackDynamicDataInDynamicRender: function() {\n        return trackDynamicDataInDynamicRender;\n    },\n    trackFallbackParamAccessed: function() {\n        return trackFallbackParamAccessed;\n    },\n    trackSynchronousPlatformIOAccessInDev: function() {\n        return trackSynchronousPlatformIOAccessInDev;\n    },\n    trackSynchronousRequestDataAccessInDev: function() {\n        return trackSynchronousRequestDataAccessInDev;\n    },\n    useDynamicRouteParams: function() {\n        return useDynamicRouteParams;\n    }\n});\nconst _react = /*#__PURE__*/ _interop_require_default(__webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"));\nconst _hooksservercontext = __webpack_require__(/*! ../../client/components/hooks-server-context */ \"(app-pages-browser)/./node_modules/next/dist/client/components/hooks-server-context.js\");\nconst _staticgenerationbailout = __webpack_require__(/*! ../../client/components/static-generation-bailout */ \"(app-pages-browser)/./node_modules/next/dist/client/components/static-generation-bailout.js\");\nconst _workunitasyncstorageexternal = __webpack_require__(/*! ./work-unit-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage.external.js\");\nconst _workasyncstorageexternal = __webpack_require__(/*! ../app-render/work-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-async-storage.external.js\");\nconst _dynamicrenderingutils = __webpack_require__(/*! ../dynamic-rendering-utils */ \"(app-pages-browser)/./node_modules/next/dist/server/dynamic-rendering-utils.js\");\nconst _metadataconstants = __webpack_require__(/*! ../../lib/metadata/metadata-constants */ \"(app-pages-browser)/./node_modules/next/dist/lib/metadata/metadata-constants.js\");\nconst _scheduler = __webpack_require__(/*! ../../lib/scheduler */ \"(app-pages-browser)/./node_modules/next/dist/lib/scheduler.js\");\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\nconst hasPostpone = typeof _react.default.unstable_postpone === 'function';\nfunction createDynamicTrackingState(isDebugDynamicAccesses) {\n    return {\n        isDebugDynamicAccesses,\n        dynamicAccesses: [],\n        syncDynamicExpression: undefined,\n        syncDynamicErrorWithStack: null\n    };\n}\nfunction createDynamicValidationState() {\n    return {\n        hasSuspendedDynamic: false,\n        hasDynamicMetadata: false,\n        hasDynamicViewport: false,\n        hasSyncDynamicErrors: false,\n        dynamicErrors: []\n    };\n}\nfunction getFirstDynamicReason(trackingState) {\n    var _trackingState_dynamicAccesses_;\n    return (_trackingState_dynamicAccesses_ = trackingState.dynamicAccesses[0]) == null ? void 0 : _trackingState_dynamicAccesses_.expression;\n}\nfunction markCurrentScopeAsDynamic(store, workUnitStore, expression) {\n    if (workUnitStore) {\n        if (workUnitStore.type === 'cache' || workUnitStore.type === 'unstable-cache') {\n            // inside cache scopes marking a scope as dynamic has no effect because the outer cache scope\n            // creates a cache boundary. This is subtly different from reading a dynamic data source which is\n            // forbidden inside a cache scope.\n            return;\n        }\n    }\n    // If we're forcing dynamic rendering or we're forcing static rendering, we\n    // don't need to do anything here because the entire page is already dynamic\n    // or it's static and it should not throw or postpone here.\n    if (store.forceDynamic || store.forceStatic) return;\n    if (store.dynamicShouldError) {\n        throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${store.route} with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`${expression}\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`), \"__NEXT_ERROR_CODE\", {\n            value: \"E553\",\n            enumerable: false,\n            configurable: true\n        });\n    }\n    if (workUnitStore) {\n        if (workUnitStore.type === 'prerender-ppr') {\n            postponeWithTracking(store.route, expression, workUnitStore.dynamicTracking);\n        } else if (workUnitStore.type === 'prerender-legacy') {\n            workUnitStore.revalidate = 0;\n            // We aren't prerendering but we are generating a static page. We need to bail out of static generation\n            const err = Object.defineProperty(new _hooksservercontext.DynamicServerError(`Route ${store.route} couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`), \"__NEXT_ERROR_CODE\", {\n                value: \"E550\",\n                enumerable: false,\n                configurable: true\n            });\n            store.dynamicUsageDescription = expression;\n            store.dynamicUsageStack = err.stack;\n            throw err;\n        } else if ( true && workUnitStore && workUnitStore.type === 'request') {\n            workUnitStore.usedDynamic = true;\n        }\n    }\n}\nfunction trackFallbackParamAccessed(store, expression) {\n    const prerenderStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n    if (!prerenderStore || prerenderStore.type !== 'prerender-ppr') return;\n    postponeWithTracking(store.route, expression, prerenderStore.dynamicTracking);\n}\nfunction throwToInterruptStaticGeneration(expression, store, prerenderStore) {\n    // We aren't prerendering but we are generating a static page. We need to bail out of static generation\n    const err = Object.defineProperty(new _hooksservercontext.DynamicServerError(`Route ${store.route} couldn't be rendered statically because it used \\`${expression}\\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`), \"__NEXT_ERROR_CODE\", {\n        value: \"E558\",\n        enumerable: false,\n        configurable: true\n    });\n    prerenderStore.revalidate = 0;\n    store.dynamicUsageDescription = expression;\n    store.dynamicUsageStack = err.stack;\n    throw err;\n}\nfunction trackDynamicDataInDynamicRender(_store, workUnitStore) {\n    if (workUnitStore) {\n        if (workUnitStore.type === 'cache' || workUnitStore.type === 'unstable-cache') {\n            // inside cache scopes marking a scope as dynamic has no effect because the outer cache scope\n            // creates a cache boundary. This is subtly different from reading a dynamic data source which is\n            // forbidden inside a cache scope.\n            return;\n        }\n        if (workUnitStore.type === 'prerender' || workUnitStore.type === 'prerender-legacy') {\n            workUnitStore.revalidate = 0;\n        }\n        if ( true && workUnitStore.type === 'request') {\n            workUnitStore.usedDynamic = true;\n        }\n    }\n}\n// Despite it's name we don't actually abort unless we have a controller to call abort on\n// There are times when we let a prerender run long to discover caches where we want the semantics\n// of tracking dynamic access without terminating the prerender early\nfunction abortOnSynchronousDynamicDataAccess(route, expression, prerenderStore) {\n    const reason = `Route ${route} needs to bail out of prerendering at this point because it used ${expression}.`;\n    const error = createPrerenderInterruptedError(reason);\n    prerenderStore.controller.abort(error);\n    const dynamicTracking = prerenderStore.dynamicTracking;\n    if (dynamicTracking) {\n        dynamicTracking.dynamicAccesses.push({\n            // When we aren't debugging, we don't need to create another error for the\n            // stack trace.\n            stack: dynamicTracking.isDebugDynamicAccesses ? new Error().stack : undefined,\n            expression\n        });\n    }\n}\nfunction abortOnSynchronousPlatformIOAccess(route, expression, errorWithStack, prerenderStore) {\n    const dynamicTracking = prerenderStore.dynamicTracking;\n    if (dynamicTracking) {\n        if (dynamicTracking.syncDynamicErrorWithStack === null) {\n            dynamicTracking.syncDynamicExpression = expression;\n            dynamicTracking.syncDynamicErrorWithStack = errorWithStack;\n        }\n    }\n    abortOnSynchronousDynamicDataAccess(route, expression, prerenderStore);\n}\nfunction trackSynchronousPlatformIOAccessInDev(requestStore) {\n    // We don't actually have a controller to abort but we do the semantic equivalent by\n    // advancing the request store out of prerender mode\n    requestStore.prerenderPhase = false;\n}\nfunction abortAndThrowOnSynchronousRequestDataAccess(route, expression, errorWithStack, prerenderStore) {\n    const prerenderSignal = prerenderStore.controller.signal;\n    if (prerenderSignal.aborted === false) {\n        // TODO it would be better to move this aborted check into the callsite so we can avoid making\n        // the error object when it isn't relevant to the aborting of the prerender however\n        // since we need the throw semantics regardless of whether we abort it is easier to land\n        // this way. See how this was handled with `abortOnSynchronousPlatformIOAccess` for a closer\n        // to ideal implementation\n        const dynamicTracking = prerenderStore.dynamicTracking;\n        if (dynamicTracking) {\n            if (dynamicTracking.syncDynamicErrorWithStack === null) {\n                dynamicTracking.syncDynamicExpression = expression;\n                dynamicTracking.syncDynamicErrorWithStack = errorWithStack;\n                if (prerenderStore.validating === true) {\n                    // We always log Request Access in dev at the point of calling the function\n                    // So we mark the dynamic validation as not requiring it to be printed\n                    dynamicTracking.syncDynamicLogged = true;\n                }\n            }\n        }\n        abortOnSynchronousDynamicDataAccess(route, expression, prerenderStore);\n    }\n    throw createPrerenderInterruptedError(`Route ${route} needs to bail out of prerendering at this point because it used ${expression}.`);\n}\nconst trackSynchronousRequestDataAccessInDev = trackSynchronousPlatformIOAccessInDev;\nfunction Postpone({ reason, route }) {\n    const prerenderStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n    const dynamicTracking = prerenderStore && prerenderStore.type === 'prerender-ppr' ? prerenderStore.dynamicTracking : null;\n    postponeWithTracking(route, reason, dynamicTracking);\n}\nfunction postponeWithTracking(route, expression, dynamicTracking) {\n    assertPostpone();\n    if (dynamicTracking) {\n        dynamicTracking.dynamicAccesses.push({\n            // When we aren't debugging, we don't need to create another error for the\n            // stack trace.\n            stack: dynamicTracking.isDebugDynamicAccesses ? new Error().stack : undefined,\n            expression\n        });\n    }\n    _react.default.unstable_postpone(createPostponeReason(route, expression));\n}\nfunction createPostponeReason(route, expression) {\n    return `Route ${route} needs to bail out of prerendering at this point because it used ${expression}. ` + `React throws this special object to indicate where. It should not be caught by ` + `your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`;\n}\nfunction isDynamicPostpone(err) {\n    if (typeof err === 'object' && err !== null && typeof err.message === 'string') {\n        return isDynamicPostponeReason(err.message);\n    }\n    return false;\n}\nfunction isDynamicPostponeReason(reason) {\n    return reason.includes('needs to bail out of prerendering at this point because it used') && reason.includes('Learn more: https://nextjs.org/docs/messages/ppr-caught-error');\n}\nif (isDynamicPostponeReason(createPostponeReason('%%%', '^^^')) === false) {\n    throw Object.defineProperty(new Error('Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js'), \"__NEXT_ERROR_CODE\", {\n        value: \"E296\",\n        enumerable: false,\n        configurable: true\n    });\n}\nconst NEXT_PRERENDER_INTERRUPTED = 'NEXT_PRERENDER_INTERRUPTED';\nfunction createPrerenderInterruptedError(message) {\n    const error = Object.defineProperty(new Error(message), \"__NEXT_ERROR_CODE\", {\n        value: \"E394\",\n        enumerable: false,\n        configurable: true\n    });\n    error.digest = NEXT_PRERENDER_INTERRUPTED;\n    return error;\n}\nfunction isPrerenderInterruptedError(error) {\n    return typeof error === 'object' && error !== null && error.digest === NEXT_PRERENDER_INTERRUPTED && 'name' in error && 'message' in error && error instanceof Error;\n}\nfunction accessedDynamicData(dynamicAccesses) {\n    return dynamicAccesses.length > 0;\n}\nfunction consumeDynamicAccess(serverDynamic, clientDynamic) {\n    // We mutate because we only call this once we are no longer writing\n    // to the dynamicTrackingState and it's more efficient than creating a new\n    // array.\n    serverDynamic.dynamicAccesses.push(...clientDynamic.dynamicAccesses);\n    return serverDynamic.dynamicAccesses;\n}\nfunction formatDynamicAPIAccesses(dynamicAccesses) {\n    return dynamicAccesses.filter((access)=>typeof access.stack === 'string' && access.stack.length > 0).map(({ expression, stack })=>{\n        stack = stack.split('\\n')// Remove the \"Error: \" prefix from the first line of the stack trace as\n        // well as the first 4 lines of the stack trace which is the distance\n        // from the user code and the `new Error().stack` call.\n        .slice(4).filter((line)=>{\n            // Exclude Next.js internals from the stack trace.\n            if (line.includes('node_modules/next/')) {\n                return false;\n            }\n            // Exclude anonymous functions from the stack trace.\n            if (line.includes(' (<anonymous>)')) {\n                return false;\n            }\n            // Exclude Node.js internals from the stack trace.\n            if (line.includes(' (node:')) {\n                return false;\n            }\n            return true;\n        }).join('\\n');\n        return `Dynamic API Usage Debug - ${expression}:\\n${stack}`;\n    });\n}\nfunction assertPostpone() {\n    if (!hasPostpone) {\n        throw Object.defineProperty(new Error(`Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js`), \"__NEXT_ERROR_CODE\", {\n            value: \"E224\",\n            enumerable: false,\n            configurable: true\n        });\n    }\n}\nfunction createPostponedAbortSignal(reason) {\n    assertPostpone();\n    const controller = new AbortController();\n    // We get our hands on a postpone instance by calling postpone and catching the throw\n    try {\n        _react.default.unstable_postpone(reason);\n    } catch (x) {\n        controller.abort(x);\n    }\n    return controller.signal;\n}\nfunction createHangingInputAbortSignal(workUnitStore) {\n    const controller = new AbortController();\n    if (workUnitStore.cacheSignal) {\n        // If we have a cacheSignal it means we're in a prospective render. If the input\n        // we're waiting on is coming from another cache, we do want to wait for it so that\n        // we can resolve this cache entry too.\n        workUnitStore.cacheSignal.inputReady().then(()=>{\n            controller.abort();\n        });\n    } else {\n        // Otherwise we're in the final render and we should already have all our caches\n        // filled. We might still be waiting on some microtasks so we wait one tick before\n        // giving up. When we give up, we still want to render the content of this cache\n        // as deeply as we can so that we can suspend as deeply as possible in the tree\n        // or not at all if we don't end up waiting for the input.\n        (0, _scheduler.scheduleOnNextTick)(()=>controller.abort());\n    }\n    return controller.signal;\n}\nfunction annotateDynamicAccess(expression, prerenderStore) {\n    const dynamicTracking = prerenderStore.dynamicTracking;\n    if (dynamicTracking) {\n        dynamicTracking.dynamicAccesses.push({\n            stack: dynamicTracking.isDebugDynamicAccesses ? new Error().stack : undefined,\n            expression\n        });\n    }\n}\nfunction useDynamicRouteParams(expression) {\n    const workStore = _workasyncstorageexternal.workAsyncStorage.getStore();\n    if (workStore && workStore.isStaticGeneration && workStore.fallbackRouteParams && workStore.fallbackRouteParams.size > 0) {\n        // There are fallback route params, we should track these as dynamic\n        // accesses.\n        const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n        if (workUnitStore) {\n            // We're prerendering with dynamicIO or PPR or both\n            if (workUnitStore.type === 'prerender') {\n                // We are in a prerender with dynamicIO semantics\n                // We are going to hang here and never resolve. This will cause the currently\n                // rendering component to effectively be a dynamic hole\n                _react.default.use((0, _dynamicrenderingutils.makeHangingPromise)(workUnitStore.renderSignal, expression));\n            } else if (workUnitStore.type === 'prerender-ppr') {\n                // We're prerendering with PPR\n                postponeWithTracking(workStore.route, expression, workUnitStore.dynamicTracking);\n            } else if (workUnitStore.type === 'prerender-legacy') {\n                throwToInterruptStaticGeneration(expression, workStore, workUnitStore);\n            }\n        }\n    }\n}\nconst hasSuspenseRegex = /\\n\\s+at Suspense \\(<anonymous>\\)/;\nconst hasMetadataRegex = new RegExp(`\\\\n\\\\s+at ${_metadataconstants.METADATA_BOUNDARY_NAME}[\\\\n\\\\s]`);\nconst hasViewportRegex = new RegExp(`\\\\n\\\\s+at ${_metadataconstants.VIEWPORT_BOUNDARY_NAME}[\\\\n\\\\s]`);\nconst hasOutletRegex = new RegExp(`\\\\n\\\\s+at ${_metadataconstants.OUTLET_BOUNDARY_NAME}[\\\\n\\\\s]`);\nfunction trackAllowedDynamicAccess(route, componentStack, dynamicValidation, serverDynamic, clientDynamic) {\n    if (hasOutletRegex.test(componentStack)) {\n        // We don't need to track that this is dynamic. It is only so when something else is also dynamic.\n        return;\n    } else if (hasMetadataRegex.test(componentStack)) {\n        dynamicValidation.hasDynamicMetadata = true;\n        return;\n    } else if (hasViewportRegex.test(componentStack)) {\n        dynamicValidation.hasDynamicViewport = true;\n        return;\n    } else if (hasSuspenseRegex.test(componentStack)) {\n        dynamicValidation.hasSuspendedDynamic = true;\n        return;\n    } else if (serverDynamic.syncDynamicErrorWithStack || clientDynamic.syncDynamicErrorWithStack) {\n        dynamicValidation.hasSyncDynamicErrors = true;\n        return;\n    } else {\n        const message = `Route \"${route}\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense`;\n        const error = createErrorWithComponentStack(message, componentStack);\n        dynamicValidation.dynamicErrors.push(error);\n        return;\n    }\n}\nfunction createErrorWithComponentStack(message, componentStack) {\n    const error = Object.defineProperty(new Error(message), \"__NEXT_ERROR_CODE\", {\n        value: \"E394\",\n        enumerable: false,\n        configurable: true\n    });\n    error.stack = 'Error: ' + message + componentStack;\n    return error;\n}\nfunction throwIfDisallowedDynamic(route, dynamicValidation, serverDynamic, clientDynamic) {\n    let syncError;\n    let syncExpression;\n    let syncLogged;\n    if (serverDynamic.syncDynamicErrorWithStack) {\n        syncError = serverDynamic.syncDynamicErrorWithStack;\n        syncExpression = serverDynamic.syncDynamicExpression;\n        syncLogged = serverDynamic.syncDynamicLogged === true;\n    } else if (clientDynamic.syncDynamicErrorWithStack) {\n        syncError = clientDynamic.syncDynamicErrorWithStack;\n        syncExpression = clientDynamic.syncDynamicExpression;\n        syncLogged = clientDynamic.syncDynamicLogged === true;\n    } else {\n        syncError = null;\n        syncExpression = undefined;\n        syncLogged = false;\n    }\n    if (dynamicValidation.hasSyncDynamicErrors && syncError) {\n        if (!syncLogged) {\n            // In dev we already log errors about sync dynamic access. But during builds we need to ensure\n            // the offending sync error is logged before we exit the build\n            console.error(syncError);\n        }\n        // The actual error should have been logged when the sync access ocurred\n        throw new _staticgenerationbailout.StaticGenBailoutError();\n    }\n    const dynamicErrors = dynamicValidation.dynamicErrors;\n    if (dynamicErrors.length) {\n        for(let i = 0; i < dynamicErrors.length; i++){\n            console.error(dynamicErrors[i]);\n        }\n        throw new _staticgenerationbailout.StaticGenBailoutError();\n    }\n    if (!dynamicValidation.hasSuspendedDynamic) {\n        if (dynamicValidation.hasDynamicMetadata) {\n            if (syncError) {\n                console.error(syncError);\n                throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route \"${route}\" has a \\`generateMetadata\\` that could not finish rendering before ${syncExpression} was used. Follow the instructions in the error for this expression to resolve.`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E608\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route \"${route}\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or external data (\\`fetch(...)\\`, etc...) but the rest of the route was static or only used cached data (\\`\"use cache\"\\`). If you expected this route to be prerenderable update your \\`generateMetadata\\` to not use Request data and only use cached external data. Otherwise, add \\`await connection()\\` somewhere within this route to indicate explicitly it should not be prerendered.`), \"__NEXT_ERROR_CODE\", {\n                value: \"E534\",\n                enumerable: false,\n                configurable: true\n            });\n        } else if (dynamicValidation.hasDynamicViewport) {\n            if (syncError) {\n                console.error(syncError);\n                throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route \"${route}\" has a \\`generateViewport\\` that could not finish rendering before ${syncExpression} was used. Follow the instructions in the error for this expression to resolve.`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E573\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route \"${route}\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or external data (\\`fetch(...)\\`, etc...) but the rest of the route was static or only used cached data (\\`\"use cache\"\\`). If you expected this route to be prerenderable update your \\`generateViewport\\` to not use Request data and only use cached external data. Otherwise, add \\`await connection()\\` somewhere within this route to indicate explicitly it should not be prerendered.`), \"__NEXT_ERROR_CODE\", {\n                value: \"E590\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n    }\n}\n\n//# sourceMappingURL=dynamic-rendering.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZHluYW1pYy1yZW5kZXJpbmcuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQWlCO0FBQ2pCLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLE1BQU0sQ0F5Qkw7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxzREFBc0QsbUJBQU8sQ0FBQyxtRkFBTztBQUNyRSw0QkFBNEIsbUJBQU8sQ0FBQyw0SUFBOEM7QUFDbEYsaUNBQWlDLG1CQUFPLENBQUMsc0pBQW1EO0FBQzVGLHNDQUFzQyxtQkFBTyxDQUFDLG1JQUFvQztBQUNsRixrQ0FBa0MsbUJBQU8sQ0FBQyxxSUFBMkM7QUFDckYsK0JBQStCLG1CQUFPLENBQUMsa0hBQTRCO0FBQ25FLDJCQUEyQixtQkFBTyxDQUFDLDhIQUF1QztBQUMxRSxtQkFBbUIsbUJBQU8sQ0FBQywwRkFBcUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdHQUFnRyxhQUFhLCtFQUErRSxXQUFXO0FBQ3ZNO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0Esa0dBQWtHLGFBQWEsa0RBQWtELFdBQVc7QUFDNUs7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFVBQVUsU0FBUyxLQUFzQztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEZBQTBGLGFBQWEsb0RBQW9ELFdBQVc7QUFDdEs7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxLQUFzQztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLE9BQU8sa0VBQWtFLFdBQVc7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxPQUFPLGtFQUFrRSxXQUFXO0FBQ3ZJO0FBQ0E7QUFDQSxvQkFBb0IsZUFBZTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTyxrRUFBa0UsV0FBVztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdIQUFnSCxtQkFBbUI7QUFDbkk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCw0Q0FBNEMsV0FBVyxLQUFLLE1BQU07QUFDbEUsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDBDQUEwQztBQUMzRixpREFBaUQsMENBQTBDO0FBQzNGLCtDQUErQyx3Q0FBd0M7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTixrQ0FBa0MsTUFBTTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMEJBQTBCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5R0FBeUcsTUFBTSxzRUFBc0UsZ0JBQWdCO0FBQ3JNO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLHFHQUFxRyxNQUFNO0FBQzNHO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixVQUFVO0FBQ1Y7QUFDQTtBQUNBLHlHQUF5RyxNQUFNLHNFQUFzRSxnQkFBZ0I7QUFDck07QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EscUdBQXFHLE1BQU07QUFDM0c7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXHNlcnZlclxcYXBwLXJlbmRlclxcZHluYW1pYy1yZW5kZXJpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUgZnVuY3Rpb25zIHByb3ZpZGVkIGJ5IHRoaXMgbW9kdWxlIGFyZSB1c2VkIHRvIGNvbW11bmljYXRlIGNlcnRhaW4gcHJvcGVydGllc1xuICogYWJvdXQgdGhlIGN1cnJlbnRseSBydW5uaW5nIGNvZGUgc28gdGhhdCBOZXh0LmpzIGNhbiBtYWtlIGRlY2lzaW9ucyBvbiBob3cgdG8gaGFuZGxlXG4gKiB0aGUgY3VycmVudCBleGVjdXRpb24gaW4gZGlmZmVyZW50IHJlbmRlcmluZyBtb2RlcyBzdWNoIGFzIHByZS1yZW5kZXJpbmcsIHJlc3VtaW5nLCBhbmQgU1NSLlxuICpcbiAqIFRvZGF5IE5leHQuanMgdHJlYXRzIGFsbCBjb2RlIGFzIHBvdGVudGlhbGx5IHN0YXRpYy4gQ2VydGFpbiBBUElzIG1heSBvbmx5IG1ha2Ugc2Vuc2Ugd2hlbiBkeW5hbWljYWxseSByZW5kZXJpbmcuXG4gKiBUcmFkaXRpb25hbGx5IHRoaXMgbWVhbnQgZGVvcHRpbmcgdGhlIGVudGlyZSByZW5kZXIgdG8gZHluYW1pYyBob3dldmVyIHdpdGggUFBSIHdlIGNhbiBub3cgZGVvcHQgcGFydHNcbiAqIG9mIGEgUmVhY3QgdHJlZSBhcyBkeW5hbWljIHdoaWxlIHN0aWxsIGtlZXBpbmcgb3RoZXIgcGFydHMgc3RhdGljLiBUaGVyZSBhcmUgcmVhbGx5IHR3byBkaWZmZXJlbnQga2luZHMgb2ZcbiAqIER5bmFtaWMgaW5kaWNhdGlvbnMuXG4gKlxuICogVGhlIGZpcnN0IGlzIHNpbXBseSBhbiBpbnRlbnRpb24gdG8gYmUgZHluYW1pYy4gdW5zdGFibGVfbm9TdG9yZSBpcyBhbiBleGFtcGxlIG9mIHRoaXMgd2hlcmVcbiAqIHRoZSBjdXJyZW50bHkgZXhlY3V0aW5nIGNvZGUgc2ltcGx5IGRlY2xhcmVzIHRoYXQgdGhlIGN1cnJlbnQgc2NvcGUgaXMgZHluYW1pYyBidXQgaWYgeW91IHVzZSBpdFxuICogaW5zaWRlIHVuc3RhYmxlX2NhY2hlIGl0IGNhbiBzdGlsbCBiZSBjYWNoZWQuIFRoaXMgdHlwZSBvZiBpbmRpY2F0aW9uIGNhbiBiZSByZW1vdmVkIGlmIHdlIGV2ZXJcbiAqIG1ha2UgdGhlIGRlZmF1bHQgZHluYW1pYyB0byBiZWdpbiB3aXRoIGJlY2F1c2UgdGhlIG9ubHkgd2F5IHlvdSB3b3VsZCBldmVyIGJlIHN0YXRpYyBpcyBpbnNpZGVcbiAqIGEgY2FjaGUgc2NvcGUgd2hpY2ggdGhpcyBpbmRpY2F0aW9uIGRvZXMgbm90IGFmZmVjdC5cbiAqXG4gKiBUaGUgc2Vjb25kIGlzIGFuIGluZGljYXRpb24gdGhhdCBhIGR5bmFtaWMgZGF0YSBzb3VyY2Ugd2FzIHJlYWQuIFRoaXMgaXMgYSBzdHJvbmdlciBmb3JtIG9mIGR5bmFtaWNcbiAqIGJlY2F1c2UgaXQgbWVhbnMgdGhhdCBpdCBpcyBpbmFwcHJvcHJpYXRlIHRvIGNhY2hlIHRoaXMgYXQgYWxsLiB1c2luZyBhIGR5bmFtaWMgZGF0YSBzb3VyY2UgaW5zaWRlXG4gKiB1bnN0YWJsZV9jYWNoZSBzaG91bGQgZXJyb3IuIElmIHlvdSB3YW50IHRvIHVzZSBzb21lIGR5bmFtaWMgZGF0YSBpbnNpZGUgdW5zdGFibGVfY2FjaGUgeW91IHNob3VsZFxuICogcmVhZCB0aGF0IGRhdGEgb3V0c2lkZSB0aGUgY2FjaGUgYW5kIHBhc3MgaXQgaW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIGNhY2hlZCBmdW5jdGlvbi5cbiAqLyBcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICAgIFBvc3Rwb25lOiBudWxsLFxuICAgIGFib3J0QW5kVGhyb3dPblN5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3M6IG51bGwsXG4gICAgYWJvcnRPblN5bmNocm9ub3VzUGxhdGZvcm1JT0FjY2VzczogbnVsbCxcbiAgICBhY2Nlc3NlZER5bmFtaWNEYXRhOiBudWxsLFxuICAgIGFubm90YXRlRHluYW1pY0FjY2VzczogbnVsbCxcbiAgICBjb25zdW1lRHluYW1pY0FjY2VzczogbnVsbCxcbiAgICBjcmVhdGVEeW5hbWljVHJhY2tpbmdTdGF0ZTogbnVsbCxcbiAgICBjcmVhdGVEeW5hbWljVmFsaWRhdGlvblN0YXRlOiBudWxsLFxuICAgIGNyZWF0ZUhhbmdpbmdJbnB1dEFib3J0U2lnbmFsOiBudWxsLFxuICAgIGNyZWF0ZVBvc3Rwb25lZEFib3J0U2lnbmFsOiBudWxsLFxuICAgIGZvcm1hdER5bmFtaWNBUElBY2Nlc3NlczogbnVsbCxcbiAgICBnZXRGaXJzdER5bmFtaWNSZWFzb246IG51bGwsXG4gICAgaXNEeW5hbWljUG9zdHBvbmU6IG51bGwsXG4gICAgaXNQcmVyZW5kZXJJbnRlcnJ1cHRlZEVycm9yOiBudWxsLFxuICAgIG1hcmtDdXJyZW50U2NvcGVBc0R5bmFtaWM6IG51bGwsXG4gICAgcG9zdHBvbmVXaXRoVHJhY2tpbmc6IG51bGwsXG4gICAgdGhyb3dJZkRpc2FsbG93ZWREeW5hbWljOiBudWxsLFxuICAgIHRocm93VG9JbnRlcnJ1cHRTdGF0aWNHZW5lcmF0aW9uOiBudWxsLFxuICAgIHRyYWNrQWxsb3dlZER5bmFtaWNBY2Nlc3M6IG51bGwsXG4gICAgdHJhY2tEeW5hbWljRGF0YUluRHluYW1pY1JlbmRlcjogbnVsbCxcbiAgICB0cmFja0ZhbGxiYWNrUGFyYW1BY2Nlc3NlZDogbnVsbCxcbiAgICB0cmFja1N5bmNocm9ub3VzUGxhdGZvcm1JT0FjY2Vzc0luRGV2OiBudWxsLFxuICAgIHRyYWNrU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzc0luRGV2OiBudWxsLFxuICAgIHVzZUR5bmFtaWNSb3V0ZVBhcmFtczogbnVsbFxufSk7XG5mdW5jdGlvbiBfZXhwb3J0KHRhcmdldCwgYWxsKSB7XG4gICAgZm9yKHZhciBuYW1lIGluIGFsbClPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogYWxsW25hbWVdXG4gICAgfSk7XG59XG5fZXhwb3J0KGV4cG9ydHMsIHtcbiAgICBQb3N0cG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBQb3N0cG9uZTtcbiAgICB9LFxuICAgIGFib3J0QW5kVGhyb3dPblN5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYWJvcnRBbmRUaHJvd09uU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2VzcztcbiAgICB9LFxuICAgIGFib3J0T25TeW5jaHJvbm91c1BsYXRmb3JtSU9BY2Nlc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYWJvcnRPblN5bmNocm9ub3VzUGxhdGZvcm1JT0FjY2VzcztcbiAgICB9LFxuICAgIGFjY2Vzc2VkRHluYW1pY0RhdGE6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYWNjZXNzZWREeW5hbWljRGF0YTtcbiAgICB9LFxuICAgIGFubm90YXRlRHluYW1pY0FjY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBhbm5vdGF0ZUR5bmFtaWNBY2Nlc3M7XG4gICAgfSxcbiAgICBjb25zdW1lRHluYW1pY0FjY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25zdW1lRHluYW1pY0FjY2VzcztcbiAgICB9LFxuICAgIGNyZWF0ZUR5bmFtaWNUcmFja2luZ1N0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUR5bmFtaWNUcmFja2luZ1N0YXRlO1xuICAgIH0sXG4gICAgY3JlYXRlRHluYW1pY1ZhbGlkYXRpb25TdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVEeW5hbWljVmFsaWRhdGlvblN0YXRlO1xuICAgIH0sXG4gICAgY3JlYXRlSGFuZ2luZ0lucHV0QWJvcnRTaWduYWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlSGFuZ2luZ0lucHV0QWJvcnRTaWduYWw7XG4gICAgfSxcbiAgICBjcmVhdGVQb3N0cG9uZWRBYm9ydFNpZ25hbDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVQb3N0cG9uZWRBYm9ydFNpZ25hbDtcbiAgICB9LFxuICAgIGZvcm1hdER5bmFtaWNBUElBY2Nlc3NlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXREeW5hbWljQVBJQWNjZXNzZXM7XG4gICAgfSxcbiAgICBnZXRGaXJzdER5bmFtaWNSZWFzb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZ2V0Rmlyc3REeW5hbWljUmVhc29uO1xuICAgIH0sXG4gICAgaXNEeW5hbWljUG9zdHBvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaXNEeW5hbWljUG9zdHBvbmU7XG4gICAgfSxcbiAgICBpc1ByZXJlbmRlckludGVycnVwdGVkRXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaXNQcmVyZW5kZXJJbnRlcnJ1cHRlZEVycm9yO1xuICAgIH0sXG4gICAgbWFya0N1cnJlbnRTY29wZUFzRHluYW1pYzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBtYXJrQ3VycmVudFNjb3BlQXNEeW5hbWljO1xuICAgIH0sXG4gICAgcG9zdHBvbmVXaXRoVHJhY2tpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcG9zdHBvbmVXaXRoVHJhY2tpbmc7XG4gICAgfSxcbiAgICB0aHJvd0lmRGlzYWxsb3dlZER5bmFtaWM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhyb3dJZkRpc2FsbG93ZWREeW5hbWljO1xuICAgIH0sXG4gICAgdGhyb3dUb0ludGVycnVwdFN0YXRpY0dlbmVyYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhyb3dUb0ludGVycnVwdFN0YXRpY0dlbmVyYXRpb247XG4gICAgfSxcbiAgICB0cmFja0FsbG93ZWREeW5hbWljQWNjZXNzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRyYWNrQWxsb3dlZER5bmFtaWNBY2Nlc3M7XG4gICAgfSxcbiAgICB0cmFja0R5bmFtaWNEYXRhSW5EeW5hbWljUmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRyYWNrRHluYW1pY0RhdGFJbkR5bmFtaWNSZW5kZXI7XG4gICAgfSxcbiAgICB0cmFja0ZhbGxiYWNrUGFyYW1BY2Nlc3NlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0cmFja0ZhbGxiYWNrUGFyYW1BY2Nlc3NlZDtcbiAgICB9LFxuICAgIHRyYWNrU3luY2hyb25vdXNQbGF0Zm9ybUlPQWNjZXNzSW5EZXY6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHJhY2tTeW5jaHJvbm91c1BsYXRmb3JtSU9BY2Nlc3NJbkRldjtcbiAgICB9LFxuICAgIHRyYWNrU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzc0luRGV2OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRyYWNrU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzc0luRGV2O1xuICAgIH0sXG4gICAgdXNlRHluYW1pY1JvdXRlUGFyYW1zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHVzZUR5bmFtaWNSb3V0ZVBhcmFtcztcbiAgICB9XG59KTtcbmNvbnN0IF9yZWFjdCA9IC8qI19fUFVSRV9fKi8gX2ludGVyb3BfcmVxdWlyZV9kZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5jb25zdCBfaG9va3NzZXJ2ZXJjb250ZXh0ID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21wb25lbnRzL2hvb2tzLXNlcnZlci1jb250ZXh0XCIpO1xuY29uc3QgX3N0YXRpY2dlbmVyYXRpb25iYWlsb3V0ID0gcmVxdWlyZShcIi4uLy4uL2NsaWVudC9jb21wb25lbnRzL3N0YXRpYy1nZW5lcmF0aW9uLWJhaWxvdXRcIik7XG5jb25zdCBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbCA9IHJlcXVpcmUoXCIuL3dvcmstdW5pdC1hc3luYy1zdG9yYWdlLmV4dGVybmFsXCIpO1xuY29uc3QgX3dvcmthc3luY3N0b3JhZ2VleHRlcm5hbCA9IHJlcXVpcmUoXCIuLi9hcHAtcmVuZGVyL3dvcmstYXN5bmMtc3RvcmFnZS5leHRlcm5hbFwiKTtcbmNvbnN0IF9keW5hbWljcmVuZGVyaW5ndXRpbHMgPSByZXF1aXJlKFwiLi4vZHluYW1pYy1yZW5kZXJpbmctdXRpbHNcIik7XG5jb25zdCBfbWV0YWRhdGFjb25zdGFudHMgPSByZXF1aXJlKFwiLi4vLi4vbGliL21ldGFkYXRhL21ldGFkYXRhLWNvbnN0YW50c1wiKTtcbmNvbnN0IF9zY2hlZHVsZXIgPSByZXF1aXJlKFwiLi4vLi4vbGliL3NjaGVkdWxlclwiKTtcbmZ1bmN0aW9uIF9pbnRlcm9wX3JlcXVpcmVfZGVmYXVsdChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgICAgICBkZWZhdWx0OiBvYmpcbiAgICB9O1xufVxuY29uc3QgaGFzUG9zdHBvbmUgPSB0eXBlb2YgX3JlYWN0LmRlZmF1bHQudW5zdGFibGVfcG9zdHBvbmUgPT09ICdmdW5jdGlvbic7XG5mdW5jdGlvbiBjcmVhdGVEeW5hbWljVHJhY2tpbmdTdGF0ZShpc0RlYnVnRHluYW1pY0FjY2Vzc2VzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaXNEZWJ1Z0R5bmFtaWNBY2Nlc3NlcyxcbiAgICAgICAgZHluYW1pY0FjY2Vzc2VzOiBbXSxcbiAgICAgICAgc3luY0R5bmFtaWNFeHByZXNzaW9uOiB1bmRlZmluZWQsXG4gICAgICAgIHN5bmNEeW5hbWljRXJyb3JXaXRoU3RhY2s6IG51bGxcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlRHluYW1pY1ZhbGlkYXRpb25TdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBoYXNTdXNwZW5kZWREeW5hbWljOiBmYWxzZSxcbiAgICAgICAgaGFzRHluYW1pY01ldGFkYXRhOiBmYWxzZSxcbiAgICAgICAgaGFzRHluYW1pY1ZpZXdwb3J0OiBmYWxzZSxcbiAgICAgICAgaGFzU3luY0R5bmFtaWNFcnJvcnM6IGZhbHNlLFxuICAgICAgICBkeW5hbWljRXJyb3JzOiBbXVxuICAgIH07XG59XG5mdW5jdGlvbiBnZXRGaXJzdER5bmFtaWNSZWFzb24odHJhY2tpbmdTdGF0ZSkge1xuICAgIHZhciBfdHJhY2tpbmdTdGF0ZV9keW5hbWljQWNjZXNzZXNfO1xuICAgIHJldHVybiAoX3RyYWNraW5nU3RhdGVfZHluYW1pY0FjY2Vzc2VzXyA9IHRyYWNraW5nU3RhdGUuZHluYW1pY0FjY2Vzc2VzWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX3RyYWNraW5nU3RhdGVfZHluYW1pY0FjY2Vzc2VzXy5leHByZXNzaW9uO1xufVxuZnVuY3Rpb24gbWFya0N1cnJlbnRTY29wZUFzRHluYW1pYyhzdG9yZSwgd29ya1VuaXRTdG9yZSwgZXhwcmVzc2lvbikge1xuICAgIGlmICh3b3JrVW5pdFN0b3JlKSB7XG4gICAgICAgIGlmICh3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdjYWNoZScgfHwgd29ya1VuaXRTdG9yZS50eXBlID09PSAndW5zdGFibGUtY2FjaGUnKSB7XG4gICAgICAgICAgICAvLyBpbnNpZGUgY2FjaGUgc2NvcGVzIG1hcmtpbmcgYSBzY29wZSBhcyBkeW5hbWljIGhhcyBubyBlZmZlY3QgYmVjYXVzZSB0aGUgb3V0ZXIgY2FjaGUgc2NvcGVcbiAgICAgICAgICAgIC8vIGNyZWF0ZXMgYSBjYWNoZSBib3VuZGFyeS4gVGhpcyBpcyBzdWJ0bHkgZGlmZmVyZW50IGZyb20gcmVhZGluZyBhIGR5bmFtaWMgZGF0YSBzb3VyY2Ugd2hpY2ggaXNcbiAgICAgICAgICAgIC8vIGZvcmJpZGRlbiBpbnNpZGUgYSBjYWNoZSBzY29wZS5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBJZiB3ZSdyZSBmb3JjaW5nIGR5bmFtaWMgcmVuZGVyaW5nIG9yIHdlJ3JlIGZvcmNpbmcgc3RhdGljIHJlbmRlcmluZywgd2VcbiAgICAvLyBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nIGhlcmUgYmVjYXVzZSB0aGUgZW50aXJlIHBhZ2UgaXMgYWxyZWFkeSBkeW5hbWljXG4gICAgLy8gb3IgaXQncyBzdGF0aWMgYW5kIGl0IHNob3VsZCBub3QgdGhyb3cgb3IgcG9zdHBvbmUgaGVyZS5cbiAgICBpZiAoc3RvcmUuZm9yY2VEeW5hbWljIHx8IHN0b3JlLmZvcmNlU3RhdGljKSByZXR1cm47XG4gICAgaWYgKHN0b3JlLmR5bmFtaWNTaG91bGRFcnJvcikge1xuICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IF9zdGF0aWNnZW5lcmF0aW9uYmFpbG91dC5TdGF0aWNHZW5CYWlsb3V0RXJyb3IoYFJvdXRlICR7c3RvcmUucm91dGV9IHdpdGggXFxgZHluYW1pYyA9IFwiZXJyb3JcIlxcYCBjb3VsZG4ndCBiZSByZW5kZXJlZCBzdGF0aWNhbGx5IGJlY2F1c2UgaXQgdXNlZCBcXGAke2V4cHJlc3Npb259XFxgLiBTZWUgbW9yZSBpbmZvIGhlcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9idWlsZGluZy15b3VyLWFwcGxpY2F0aW9uL3JlbmRlcmluZy9zdGF0aWMtYW5kLWR5bmFtaWMjZHluYW1pYy1yZW5kZXJpbmdgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICB2YWx1ZTogXCJFNTUzXCIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHdvcmtVbml0U3RvcmUpIHtcbiAgICAgICAgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3ByZXJlbmRlci1wcHInKSB7XG4gICAgICAgICAgICBwb3N0cG9uZVdpdGhUcmFja2luZyhzdG9yZS5yb3V0ZSwgZXhwcmVzc2lvbiwgd29ya1VuaXRTdG9yZS5keW5hbWljVHJhY2tpbmcpO1xuICAgICAgICB9IGVsc2UgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3ByZXJlbmRlci1sZWdhY3knKSB7XG4gICAgICAgICAgICB3b3JrVW5pdFN0b3JlLnJldmFsaWRhdGUgPSAwO1xuICAgICAgICAgICAgLy8gV2UgYXJlbid0IHByZXJlbmRlcmluZyBidXQgd2UgYXJlIGdlbmVyYXRpbmcgYSBzdGF0aWMgcGFnZS4gV2UgbmVlZCB0byBiYWlsIG91dCBvZiBzdGF0aWMgZ2VuZXJhdGlvblxuICAgICAgICAgICAgY29uc3QgZXJyID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBfaG9va3NzZXJ2ZXJjb250ZXh0LkR5bmFtaWNTZXJ2ZXJFcnJvcihgUm91dGUgJHtzdG9yZS5yb3V0ZX0gY291bGRuJ3QgYmUgcmVuZGVyZWQgc3RhdGljYWxseSBiZWNhdXNlIGl0IHVzZWQgJHtleHByZXNzaW9ufS4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9keW5hbWljLXNlcnZlci1lcnJvcmApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNTUwXCIsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0b3JlLmR5bmFtaWNVc2FnZURlc2NyaXB0aW9uID0gZXhwcmVzc2lvbjtcbiAgICAgICAgICAgIHN0b3JlLmR5bmFtaWNVc2FnZVN0YWNrID0gZXJyLnN0YWNrO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHdvcmtVbml0U3RvcmUgJiYgd29ya1VuaXRTdG9yZS50eXBlID09PSAncmVxdWVzdCcpIHtcbiAgICAgICAgICAgIHdvcmtVbml0U3RvcmUudXNlZER5bmFtaWMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJhY2tGYWxsYmFja1BhcmFtQWNjZXNzZWQoc3RvcmUsIGV4cHJlc3Npb24pIHtcbiAgICBjb25zdCBwcmVyZW5kZXJTdG9yZSA9IF93b3JrdW5pdGFzeW5jc3RvcmFnZWV4dGVybmFsLndvcmtVbml0QXN5bmNTdG9yYWdlLmdldFN0b3JlKCk7XG4gICAgaWYgKCFwcmVyZW5kZXJTdG9yZSB8fCBwcmVyZW5kZXJTdG9yZS50eXBlICE9PSAncHJlcmVuZGVyLXBwcicpIHJldHVybjtcbiAgICBwb3N0cG9uZVdpdGhUcmFja2luZyhzdG9yZS5yb3V0ZSwgZXhwcmVzc2lvbiwgcHJlcmVuZGVyU3RvcmUuZHluYW1pY1RyYWNraW5nKTtcbn1cbmZ1bmN0aW9uIHRocm93VG9JbnRlcnJ1cHRTdGF0aWNHZW5lcmF0aW9uKGV4cHJlc3Npb24sIHN0b3JlLCBwcmVyZW5kZXJTdG9yZSkge1xuICAgIC8vIFdlIGFyZW4ndCBwcmVyZW5kZXJpbmcgYnV0IHdlIGFyZSBnZW5lcmF0aW5nIGEgc3RhdGljIHBhZ2UuIFdlIG5lZWQgdG8gYmFpbCBvdXQgb2Ygc3RhdGljIGdlbmVyYXRpb25cbiAgICBjb25zdCBlcnIgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IF9ob29rc3NlcnZlcmNvbnRleHQuRHluYW1pY1NlcnZlckVycm9yKGBSb3V0ZSAke3N0b3JlLnJvdXRlfSBjb3VsZG4ndCBiZSByZW5kZXJlZCBzdGF0aWNhbGx5IGJlY2F1c2UgaXQgdXNlZCBcXGAke2V4cHJlc3Npb259XFxgLiBTZWUgbW9yZSBpbmZvIGhlcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL2R5bmFtaWMtc2VydmVyLWVycm9yYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICB2YWx1ZTogXCJFNTU4XCIsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBwcmVyZW5kZXJTdG9yZS5yZXZhbGlkYXRlID0gMDtcbiAgICBzdG9yZS5keW5hbWljVXNhZ2VEZXNjcmlwdGlvbiA9IGV4cHJlc3Npb247XG4gICAgc3RvcmUuZHluYW1pY1VzYWdlU3RhY2sgPSBlcnIuc3RhY2s7XG4gICAgdGhyb3cgZXJyO1xufVxuZnVuY3Rpb24gdHJhY2tEeW5hbWljRGF0YUluRHluYW1pY1JlbmRlcihfc3RvcmUsIHdvcmtVbml0U3RvcmUpIHtcbiAgICBpZiAod29ya1VuaXRTdG9yZSkge1xuICAgICAgICBpZiAod29ya1VuaXRTdG9yZS50eXBlID09PSAnY2FjaGUnIHx8IHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3Vuc3RhYmxlLWNhY2hlJykge1xuICAgICAgICAgICAgLy8gaW5zaWRlIGNhY2hlIHNjb3BlcyBtYXJraW5nIGEgc2NvcGUgYXMgZHluYW1pYyBoYXMgbm8gZWZmZWN0IGJlY2F1c2UgdGhlIG91dGVyIGNhY2hlIHNjb3BlXG4gICAgICAgICAgICAvLyBjcmVhdGVzIGEgY2FjaGUgYm91bmRhcnkuIFRoaXMgaXMgc3VidGx5IGRpZmZlcmVudCBmcm9tIHJlYWRpbmcgYSBkeW5hbWljIGRhdGEgc291cmNlIHdoaWNoIGlzXG4gICAgICAgICAgICAvLyBmb3JiaWRkZW4gaW5zaWRlIGEgY2FjaGUgc2NvcGUuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3ByZXJlbmRlcicgfHwgd29ya1VuaXRTdG9yZS50eXBlID09PSAncHJlcmVuZGVyLWxlZ2FjeScpIHtcbiAgICAgICAgICAgIHdvcmtVbml0U3RvcmUucmV2YWxpZGF0ZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3JlcXVlc3QnKSB7XG4gICAgICAgICAgICB3b3JrVW5pdFN0b3JlLnVzZWREeW5hbWljID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIERlc3BpdGUgaXQncyBuYW1lIHdlIGRvbid0IGFjdHVhbGx5IGFib3J0IHVubGVzcyB3ZSBoYXZlIGEgY29udHJvbGxlciB0byBjYWxsIGFib3J0IG9uXG4vLyBUaGVyZSBhcmUgdGltZXMgd2hlbiB3ZSBsZXQgYSBwcmVyZW5kZXIgcnVuIGxvbmcgdG8gZGlzY292ZXIgY2FjaGVzIHdoZXJlIHdlIHdhbnQgdGhlIHNlbWFudGljc1xuLy8gb2YgdHJhY2tpbmcgZHluYW1pYyBhY2Nlc3Mgd2l0aG91dCB0ZXJtaW5hdGluZyB0aGUgcHJlcmVuZGVyIGVhcmx5XG5mdW5jdGlvbiBhYm9ydE9uU3luY2hyb25vdXNEeW5hbWljRGF0YUFjY2Vzcyhyb3V0ZSwgZXhwcmVzc2lvbiwgcHJlcmVuZGVyU3RvcmUpIHtcbiAgICBjb25zdCByZWFzb24gPSBgUm91dGUgJHtyb3V0ZX0gbmVlZHMgdG8gYmFpbCBvdXQgb2YgcHJlcmVuZGVyaW5nIGF0IHRoaXMgcG9pbnQgYmVjYXVzZSBpdCB1c2VkICR7ZXhwcmVzc2lvbn0uYDtcbiAgICBjb25zdCBlcnJvciA9IGNyZWF0ZVByZXJlbmRlckludGVycnVwdGVkRXJyb3IocmVhc29uKTtcbiAgICBwcmVyZW5kZXJTdG9yZS5jb250cm9sbGVyLmFib3J0KGVycm9yKTtcbiAgICBjb25zdCBkeW5hbWljVHJhY2tpbmcgPSBwcmVyZW5kZXJTdG9yZS5keW5hbWljVHJhY2tpbmc7XG4gICAgaWYgKGR5bmFtaWNUcmFja2luZykge1xuICAgICAgICBkeW5hbWljVHJhY2tpbmcuZHluYW1pY0FjY2Vzc2VzLnB1c2goe1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmVuJ3QgZGVidWdnaW5nLCB3ZSBkb24ndCBuZWVkIHRvIGNyZWF0ZSBhbm90aGVyIGVycm9yIGZvciB0aGVcbiAgICAgICAgICAgIC8vIHN0YWNrIHRyYWNlLlxuICAgICAgICAgICAgc3RhY2s6IGR5bmFtaWNUcmFja2luZy5pc0RlYnVnRHluYW1pY0FjY2Vzc2VzID8gbmV3IEVycm9yKCkuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBleHByZXNzaW9uXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFib3J0T25TeW5jaHJvbm91c1BsYXRmb3JtSU9BY2Nlc3Mocm91dGUsIGV4cHJlc3Npb24sIGVycm9yV2l0aFN0YWNrLCBwcmVyZW5kZXJTdG9yZSkge1xuICAgIGNvbnN0IGR5bmFtaWNUcmFja2luZyA9IHByZXJlbmRlclN0b3JlLmR5bmFtaWNUcmFja2luZztcbiAgICBpZiAoZHluYW1pY1RyYWNraW5nKSB7XG4gICAgICAgIGlmIChkeW5hbWljVHJhY2tpbmcuc3luY0R5bmFtaWNFcnJvcldpdGhTdGFjayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZHluYW1pY1RyYWNraW5nLnN5bmNEeW5hbWljRXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgICAgICAgICBkeW5hbWljVHJhY2tpbmcuc3luY0R5bmFtaWNFcnJvcldpdGhTdGFjayA9IGVycm9yV2l0aFN0YWNrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFib3J0T25TeW5jaHJvbm91c0R5bmFtaWNEYXRhQWNjZXNzKHJvdXRlLCBleHByZXNzaW9uLCBwcmVyZW5kZXJTdG9yZSk7XG59XG5mdW5jdGlvbiB0cmFja1N5bmNocm9ub3VzUGxhdGZvcm1JT0FjY2Vzc0luRGV2KHJlcXVlc3RTdG9yZSkge1xuICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGhhdmUgYSBjb250cm9sbGVyIHRvIGFib3J0IGJ1dCB3ZSBkbyB0aGUgc2VtYW50aWMgZXF1aXZhbGVudCBieVxuICAgIC8vIGFkdmFuY2luZyB0aGUgcmVxdWVzdCBzdG9yZSBvdXQgb2YgcHJlcmVuZGVyIG1vZGVcbiAgICByZXF1ZXN0U3RvcmUucHJlcmVuZGVyUGhhc2UgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIGFib3J0QW5kVGhyb3dPblN5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3Mocm91dGUsIGV4cHJlc3Npb24sIGVycm9yV2l0aFN0YWNrLCBwcmVyZW5kZXJTdG9yZSkge1xuICAgIGNvbnN0IHByZXJlbmRlclNpZ25hbCA9IHByZXJlbmRlclN0b3JlLmNvbnRyb2xsZXIuc2lnbmFsO1xuICAgIGlmIChwcmVyZW5kZXJTaWduYWwuYWJvcnRlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gVE9ETyBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gbW92ZSB0aGlzIGFib3J0ZWQgY2hlY2sgaW50byB0aGUgY2FsbHNpdGUgc28gd2UgY2FuIGF2b2lkIG1ha2luZ1xuICAgICAgICAvLyB0aGUgZXJyb3Igb2JqZWN0IHdoZW4gaXQgaXNuJ3QgcmVsZXZhbnQgdG8gdGhlIGFib3J0aW5nIG9mIHRoZSBwcmVyZW5kZXIgaG93ZXZlclxuICAgICAgICAvLyBzaW5jZSB3ZSBuZWVkIHRoZSB0aHJvdyBzZW1hbnRpY3MgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHdlIGFib3J0IGl0IGlzIGVhc2llciB0byBsYW5kXG4gICAgICAgIC8vIHRoaXMgd2F5LiBTZWUgaG93IHRoaXMgd2FzIGhhbmRsZWQgd2l0aCBgYWJvcnRPblN5bmNocm9ub3VzUGxhdGZvcm1JT0FjY2Vzc2AgZm9yIGEgY2xvc2VyXG4gICAgICAgIC8vIHRvIGlkZWFsIGltcGxlbWVudGF0aW9uXG4gICAgICAgIGNvbnN0IGR5bmFtaWNUcmFja2luZyA9IHByZXJlbmRlclN0b3JlLmR5bmFtaWNUcmFja2luZztcbiAgICAgICAgaWYgKGR5bmFtaWNUcmFja2luZykge1xuICAgICAgICAgICAgaWYgKGR5bmFtaWNUcmFja2luZy5zeW5jRHluYW1pY0Vycm9yV2l0aFN0YWNrID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZHluYW1pY1RyYWNraW5nLnN5bmNEeW5hbWljRXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgZHluYW1pY1RyYWNraW5nLnN5bmNEeW5hbWljRXJyb3JXaXRoU3RhY2sgPSBlcnJvcldpdGhTdGFjaztcbiAgICAgICAgICAgICAgICBpZiAocHJlcmVuZGVyU3RvcmUudmFsaWRhdGluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBhbHdheXMgbG9nIFJlcXVlc3QgQWNjZXNzIGluIGRldiBhdCB0aGUgcG9pbnQgb2YgY2FsbGluZyB0aGUgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gU28gd2UgbWFyayB0aGUgZHluYW1pYyB2YWxpZGF0aW9uIGFzIG5vdCByZXF1aXJpbmcgaXQgdG8gYmUgcHJpbnRlZFxuICAgICAgICAgICAgICAgICAgICBkeW5hbWljVHJhY2tpbmcuc3luY0R5bmFtaWNMb2dnZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhYm9ydE9uU3luY2hyb25vdXNEeW5hbWljRGF0YUFjY2Vzcyhyb3V0ZSwgZXhwcmVzc2lvbiwgcHJlcmVuZGVyU3RvcmUpO1xuICAgIH1cbiAgICB0aHJvdyBjcmVhdGVQcmVyZW5kZXJJbnRlcnJ1cHRlZEVycm9yKGBSb3V0ZSAke3JvdXRlfSBuZWVkcyB0byBiYWlsIG91dCBvZiBwcmVyZW5kZXJpbmcgYXQgdGhpcyBwb2ludCBiZWNhdXNlIGl0IHVzZWQgJHtleHByZXNzaW9ufS5gKTtcbn1cbmNvbnN0IHRyYWNrU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzc0luRGV2ID0gdHJhY2tTeW5jaHJvbm91c1BsYXRmb3JtSU9BY2Nlc3NJbkRldjtcbmZ1bmN0aW9uIFBvc3Rwb25lKHsgcmVhc29uLCByb3V0ZSB9KSB7XG4gICAgY29uc3QgcHJlcmVuZGVyU3RvcmUgPSBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbC53b3JrVW5pdEFzeW5jU3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgIGNvbnN0IGR5bmFtaWNUcmFja2luZyA9IHByZXJlbmRlclN0b3JlICYmIHByZXJlbmRlclN0b3JlLnR5cGUgPT09ICdwcmVyZW5kZXItcHByJyA/IHByZXJlbmRlclN0b3JlLmR5bmFtaWNUcmFja2luZyA6IG51bGw7XG4gICAgcG9zdHBvbmVXaXRoVHJhY2tpbmcocm91dGUsIHJlYXNvbiwgZHluYW1pY1RyYWNraW5nKTtcbn1cbmZ1bmN0aW9uIHBvc3Rwb25lV2l0aFRyYWNraW5nKHJvdXRlLCBleHByZXNzaW9uLCBkeW5hbWljVHJhY2tpbmcpIHtcbiAgICBhc3NlcnRQb3N0cG9uZSgpO1xuICAgIGlmIChkeW5hbWljVHJhY2tpbmcpIHtcbiAgICAgICAgZHluYW1pY1RyYWNraW5nLmR5bmFtaWNBY2Nlc3Nlcy5wdXNoKHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlbid0IGRlYnVnZ2luZywgd2UgZG9uJ3QgbmVlZCB0byBjcmVhdGUgYW5vdGhlciBlcnJvciBmb3IgdGhlXG4gICAgICAgICAgICAvLyBzdGFjayB0cmFjZS5cbiAgICAgICAgICAgIHN0YWNrOiBkeW5hbWljVHJhY2tpbmcuaXNEZWJ1Z0R5bmFtaWNBY2Nlc3NlcyA/IG5ldyBFcnJvcigpLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZXhwcmVzc2lvblxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlYWN0LmRlZmF1bHQudW5zdGFibGVfcG9zdHBvbmUoY3JlYXRlUG9zdHBvbmVSZWFzb24ocm91dGUsIGV4cHJlc3Npb24pKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBvc3Rwb25lUmVhc29uKHJvdXRlLCBleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGBSb3V0ZSAke3JvdXRlfSBuZWVkcyB0byBiYWlsIG91dCBvZiBwcmVyZW5kZXJpbmcgYXQgdGhpcyBwb2ludCBiZWNhdXNlIGl0IHVzZWQgJHtleHByZXNzaW9ufS4gYCArIGBSZWFjdCB0aHJvd3MgdGhpcyBzcGVjaWFsIG9iamVjdCB0byBpbmRpY2F0ZSB3aGVyZS4gSXQgc2hvdWxkIG5vdCBiZSBjYXVnaHQgYnkgYCArIGB5b3VyIG93biB0cnkvY2F0Y2guIExlYXJuIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL3Bwci1jYXVnaHQtZXJyb3JgO1xufVxuZnVuY3Rpb24gaXNEeW5hbWljUG9zdHBvbmUoZXJyKSB7XG4gICAgaWYgKHR5cGVvZiBlcnIgPT09ICdvYmplY3QnICYmIGVyciAhPT0gbnVsbCAmJiB0eXBlb2YgZXJyLm1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBpc0R5bmFtaWNQb3N0cG9uZVJlYXNvbihlcnIubWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzRHluYW1pY1Bvc3Rwb25lUmVhc29uKHJlYXNvbikge1xuICAgIHJldHVybiByZWFzb24uaW5jbHVkZXMoJ25lZWRzIHRvIGJhaWwgb3V0IG9mIHByZXJlbmRlcmluZyBhdCB0aGlzIHBvaW50IGJlY2F1c2UgaXQgdXNlZCcpICYmIHJlYXNvbi5pbmNsdWRlcygnTGVhcm4gbW9yZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvbWVzc2FnZXMvcHByLWNhdWdodC1lcnJvcicpO1xufVxuaWYgKGlzRHluYW1pY1Bvc3Rwb25lUmVhc29uKGNyZWF0ZVBvc3Rwb25lUmVhc29uKCclJSUnLCAnXl5eJykpID09PSBmYWxzZSkge1xuICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoJ0ludmFyaWFudDogaXNEeW5hbWljUG9zdHBvbmUgbWlzaWRlbnRpZmllZCBhIHBvc3Rwb25lIHJlYXNvbi4gVGhpcyBpcyBhIGJ1ZyBpbiBOZXh0LmpzJyksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICB2YWx1ZTogXCJFMjk2XCIsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbn1cbmNvbnN0IE5FWFRfUFJFUkVOREVSX0lOVEVSUlVQVEVEID0gJ05FWFRfUFJFUkVOREVSX0lOVEVSUlVQVEVEJztcbmZ1bmN0aW9uIGNyZWF0ZVByZXJlbmRlckludGVycnVwdGVkRXJyb3IobWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihtZXNzYWdlKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgIHZhbHVlOiBcIkUzOTRcIixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIGVycm9yLmRpZ2VzdCA9IE5FWFRfUFJFUkVOREVSX0lOVEVSUlVQVEVEO1xuICAgIHJldHVybiBlcnJvcjtcbn1cbmZ1bmN0aW9uIGlzUHJlcmVuZGVySW50ZXJydXB0ZWRFcnJvcihlcnJvcikge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmIGVycm9yLmRpZ2VzdCA9PT0gTkVYVF9QUkVSRU5ERVJfSU5URVJSVVBURUQgJiYgJ25hbWUnIGluIGVycm9yICYmICdtZXNzYWdlJyBpbiBlcnJvciAmJiBlcnJvciBpbnN0YW5jZW9mIEVycm9yO1xufVxuZnVuY3Rpb24gYWNjZXNzZWREeW5hbWljRGF0YShkeW5hbWljQWNjZXNzZXMpIHtcbiAgICByZXR1cm4gZHluYW1pY0FjY2Vzc2VzLmxlbmd0aCA+IDA7XG59XG5mdW5jdGlvbiBjb25zdW1lRHluYW1pY0FjY2VzcyhzZXJ2ZXJEeW5hbWljLCBjbGllbnREeW5hbWljKSB7XG4gICAgLy8gV2UgbXV0YXRlIGJlY2F1c2Ugd2Ugb25seSBjYWxsIHRoaXMgb25jZSB3ZSBhcmUgbm8gbG9uZ2VyIHdyaXRpbmdcbiAgICAvLyB0byB0aGUgZHluYW1pY1RyYWNraW5nU3RhdGUgYW5kIGl0J3MgbW9yZSBlZmZpY2llbnQgdGhhbiBjcmVhdGluZyBhIG5ld1xuICAgIC8vIGFycmF5LlxuICAgIHNlcnZlckR5bmFtaWMuZHluYW1pY0FjY2Vzc2VzLnB1c2goLi4uY2xpZW50RHluYW1pYy5keW5hbWljQWNjZXNzZXMpO1xuICAgIHJldHVybiBzZXJ2ZXJEeW5hbWljLmR5bmFtaWNBY2Nlc3Nlcztcbn1cbmZ1bmN0aW9uIGZvcm1hdER5bmFtaWNBUElBY2Nlc3NlcyhkeW5hbWljQWNjZXNzZXMpIHtcbiAgICByZXR1cm4gZHluYW1pY0FjY2Vzc2VzLmZpbHRlcigoYWNjZXNzKT0+dHlwZW9mIGFjY2Vzcy5zdGFjayA9PT0gJ3N0cmluZycgJiYgYWNjZXNzLnN0YWNrLmxlbmd0aCA+IDApLm1hcCgoeyBleHByZXNzaW9uLCBzdGFjayB9KT0+e1xuICAgICAgICBzdGFjayA9IHN0YWNrLnNwbGl0KCdcXG4nKS8vIFJlbW92ZSB0aGUgXCJFcnJvcjogXCIgcHJlZml4IGZyb20gdGhlIGZpcnN0IGxpbmUgb2YgdGhlIHN0YWNrIHRyYWNlIGFzXG4gICAgICAgIC8vIHdlbGwgYXMgdGhlIGZpcnN0IDQgbGluZXMgb2YgdGhlIHN0YWNrIHRyYWNlIHdoaWNoIGlzIHRoZSBkaXN0YW5jZVxuICAgICAgICAvLyBmcm9tIHRoZSB1c2VyIGNvZGUgYW5kIHRoZSBgbmV3IEVycm9yKCkuc3RhY2tgIGNhbGwuXG4gICAgICAgIC5zbGljZSg0KS5maWx0ZXIoKGxpbmUpPT57XG4gICAgICAgICAgICAvLyBFeGNsdWRlIE5leHQuanMgaW50ZXJuYWxzIGZyb20gdGhlIHN0YWNrIHRyYWNlLlxuICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy9uZXh0LycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRXhjbHVkZSBhbm9ueW1vdXMgZnVuY3Rpb25zIGZyb20gdGhlIHN0YWNrIHRyYWNlLlxuICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJyAoPGFub255bW91cz4pJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBFeGNsdWRlIE5vZGUuanMgaW50ZXJuYWxzIGZyb20gdGhlIHN0YWNrIHRyYWNlLlxuICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJyAobm9kZTonKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgcmV0dXJuIGBEeW5hbWljIEFQSSBVc2FnZSBEZWJ1ZyAtICR7ZXhwcmVzc2lvbn06XFxuJHtzdGFja31gO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gYXNzZXJ0UG9zdHBvbmUoKSB7XG4gICAgaWYgKCFoYXNQb3N0cG9uZSkge1xuICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQ6IFJlYWN0LnVuc3RhYmxlX3Bvc3Rwb25lIGlzIG5vdCBkZWZpbmVkLiBUaGlzIHN1Z2dlc3RzIHRoZSB3cm9uZyB2ZXJzaW9uIG9mIFJlYWN0IHdhcyBsb2FkZWQuIFRoaXMgaXMgYSBidWcgaW4gTmV4dC5qc2ApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBcIkUyMjRcIixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVBvc3Rwb25lZEFib3J0U2lnbmFsKHJlYXNvbikge1xuICAgIGFzc2VydFBvc3Rwb25lKCk7XG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAvLyBXZSBnZXQgb3VyIGhhbmRzIG9uIGEgcG9zdHBvbmUgaW5zdGFuY2UgYnkgY2FsbGluZyBwb3N0cG9uZSBhbmQgY2F0Y2hpbmcgdGhlIHRocm93XG4gICAgdHJ5IHtcbiAgICAgICAgX3JlYWN0LmRlZmF1bHQudW5zdGFibGVfcG9zdHBvbmUocmVhc29uKTtcbiAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoeCk7XG4gICAgfVxuICAgIHJldHVybiBjb250cm9sbGVyLnNpZ25hbDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUhhbmdpbmdJbnB1dEFib3J0U2lnbmFsKHdvcmtVbml0U3RvcmUpIHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGlmICh3b3JrVW5pdFN0b3JlLmNhY2hlU2lnbmFsKSB7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBjYWNoZVNpZ25hbCBpdCBtZWFucyB3ZSdyZSBpbiBhIHByb3NwZWN0aXZlIHJlbmRlci4gSWYgdGhlIGlucHV0XG4gICAgICAgIC8vIHdlJ3JlIHdhaXRpbmcgb24gaXMgY29taW5nIGZyb20gYW5vdGhlciBjYWNoZSwgd2UgZG8gd2FudCB0byB3YWl0IGZvciBpdCBzbyB0aGF0XG4gICAgICAgIC8vIHdlIGNhbiByZXNvbHZlIHRoaXMgY2FjaGUgZW50cnkgdG9vLlxuICAgICAgICB3b3JrVW5pdFN0b3JlLmNhY2hlU2lnbmFsLmlucHV0UmVhZHkoKS50aGVuKCgpPT57XG4gICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSB3ZSdyZSBpbiB0aGUgZmluYWwgcmVuZGVyIGFuZCB3ZSBzaG91bGQgYWxyZWFkeSBoYXZlIGFsbCBvdXIgY2FjaGVzXG4gICAgICAgIC8vIGZpbGxlZC4gV2UgbWlnaHQgc3RpbGwgYmUgd2FpdGluZyBvbiBzb21lIG1pY3JvdGFza3Mgc28gd2Ugd2FpdCBvbmUgdGljayBiZWZvcmVcbiAgICAgICAgLy8gZ2l2aW5nIHVwLiBXaGVuIHdlIGdpdmUgdXAsIHdlIHN0aWxsIHdhbnQgdG8gcmVuZGVyIHRoZSBjb250ZW50IG9mIHRoaXMgY2FjaGVcbiAgICAgICAgLy8gYXMgZGVlcGx5IGFzIHdlIGNhbiBzbyB0aGF0IHdlIGNhbiBzdXNwZW5kIGFzIGRlZXBseSBhcyBwb3NzaWJsZSBpbiB0aGUgdHJlZVxuICAgICAgICAvLyBvciBub3QgYXQgYWxsIGlmIHdlIGRvbid0IGVuZCB1cCB3YWl0aW5nIGZvciB0aGUgaW5wdXQuXG4gICAgICAgICgwLCBfc2NoZWR1bGVyLnNjaGVkdWxlT25OZXh0VGljaykoKCk9PmNvbnRyb2xsZXIuYWJvcnQoKSk7XG4gICAgfVxuICAgIHJldHVybiBjb250cm9sbGVyLnNpZ25hbDtcbn1cbmZ1bmN0aW9uIGFubm90YXRlRHluYW1pY0FjY2VzcyhleHByZXNzaW9uLCBwcmVyZW5kZXJTdG9yZSkge1xuICAgIGNvbnN0IGR5bmFtaWNUcmFja2luZyA9IHByZXJlbmRlclN0b3JlLmR5bmFtaWNUcmFja2luZztcbiAgICBpZiAoZHluYW1pY1RyYWNraW5nKSB7XG4gICAgICAgIGR5bmFtaWNUcmFja2luZy5keW5hbWljQWNjZXNzZXMucHVzaCh7XG4gICAgICAgICAgICBzdGFjazogZHluYW1pY1RyYWNraW5nLmlzRGVidWdEeW5hbWljQWNjZXNzZXMgPyBuZXcgRXJyb3IoKS5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGV4cHJlc3Npb25cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gdXNlRHluYW1pY1JvdXRlUGFyYW1zKGV4cHJlc3Npb24pIHtcbiAgICBjb25zdCB3b3JrU3RvcmUgPSBfd29ya2FzeW5jc3RvcmFnZWV4dGVybmFsLndvcmtBc3luY1N0b3JhZ2UuZ2V0U3RvcmUoKTtcbiAgICBpZiAod29ya1N0b3JlICYmIHdvcmtTdG9yZS5pc1N0YXRpY0dlbmVyYXRpb24gJiYgd29ya1N0b3JlLmZhbGxiYWNrUm91dGVQYXJhbXMgJiYgd29ya1N0b3JlLmZhbGxiYWNrUm91dGVQYXJhbXMuc2l6ZSA+IDApIHtcbiAgICAgICAgLy8gVGhlcmUgYXJlIGZhbGxiYWNrIHJvdXRlIHBhcmFtcywgd2Ugc2hvdWxkIHRyYWNrIHRoZXNlIGFzIGR5bmFtaWNcbiAgICAgICAgLy8gYWNjZXNzZXMuXG4gICAgICAgIGNvbnN0IHdvcmtVbml0U3RvcmUgPSBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbC53b3JrVW5pdEFzeW5jU3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgICAgICBpZiAod29ya1VuaXRTdG9yZSkge1xuICAgICAgICAgICAgLy8gV2UncmUgcHJlcmVuZGVyaW5nIHdpdGggZHluYW1pY0lPIG9yIFBQUiBvciBib3RoXG4gICAgICAgICAgICBpZiAod29ya1VuaXRTdG9yZS50eXBlID09PSAncHJlcmVuZGVyJykge1xuICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBpbiBhIHByZXJlbmRlciB3aXRoIGR5bmFtaWNJTyBzZW1hbnRpY3NcbiAgICAgICAgICAgICAgICAvLyBXZSBhcmUgZ29pbmcgdG8gaGFuZyBoZXJlIGFuZCBuZXZlciByZXNvbHZlLiBUaGlzIHdpbGwgY2F1c2UgdGhlIGN1cnJlbnRseVxuICAgICAgICAgICAgICAgIC8vIHJlbmRlcmluZyBjb21wb25lbnQgdG8gZWZmZWN0aXZlbHkgYmUgYSBkeW5hbWljIGhvbGVcbiAgICAgICAgICAgICAgICBfcmVhY3QuZGVmYXVsdC51c2UoKDAsIF9keW5hbWljcmVuZGVyaW5ndXRpbHMubWFrZUhhbmdpbmdQcm9taXNlKSh3b3JrVW5pdFN0b3JlLnJlbmRlclNpZ25hbCwgZXhwcmVzc2lvbikpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdwcmVyZW5kZXItcHByJykge1xuICAgICAgICAgICAgICAgIC8vIFdlJ3JlIHByZXJlbmRlcmluZyB3aXRoIFBQUlxuICAgICAgICAgICAgICAgIHBvc3Rwb25lV2l0aFRyYWNraW5nKHdvcmtTdG9yZS5yb3V0ZSwgZXhwcmVzc2lvbiwgd29ya1VuaXRTdG9yZS5keW5hbWljVHJhY2tpbmcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdwcmVyZW5kZXItbGVnYWN5Jykge1xuICAgICAgICAgICAgICAgIHRocm93VG9JbnRlcnJ1cHRTdGF0aWNHZW5lcmF0aW9uKGV4cHJlc3Npb24sIHdvcmtTdG9yZSwgd29ya1VuaXRTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBoYXNTdXNwZW5zZVJlZ2V4ID0gL1xcblxccythdCBTdXNwZW5zZSBcXCg8YW5vbnltb3VzPlxcKS87XG5jb25zdCBoYXNNZXRhZGF0YVJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXG5cXFxccythdCAke19tZXRhZGF0YWNvbnN0YW50cy5NRVRBREFUQV9CT1VOREFSWV9OQU1FfVtcXFxcblxcXFxzXWApO1xuY29uc3QgaGFzVmlld3BvcnRSZWdleCA9IG5ldyBSZWdFeHAoYFxcXFxuXFxcXHMrYXQgJHtfbWV0YWRhdGFjb25zdGFudHMuVklFV1BPUlRfQk9VTkRBUllfTkFNRX1bXFxcXG5cXFxcc11gKTtcbmNvbnN0IGhhc091dGxldFJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXG5cXFxccythdCAke19tZXRhZGF0YWNvbnN0YW50cy5PVVRMRVRfQk9VTkRBUllfTkFNRX1bXFxcXG5cXFxcc11gKTtcbmZ1bmN0aW9uIHRyYWNrQWxsb3dlZER5bmFtaWNBY2Nlc3Mocm91dGUsIGNvbXBvbmVudFN0YWNrLCBkeW5hbWljVmFsaWRhdGlvbiwgc2VydmVyRHluYW1pYywgY2xpZW50RHluYW1pYykge1xuICAgIGlmIChoYXNPdXRsZXRSZWdleC50ZXN0KGNvbXBvbmVudFN0YWNrKSkge1xuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIHRyYWNrIHRoYXQgdGhpcyBpcyBkeW5hbWljLiBJdCBpcyBvbmx5IHNvIHdoZW4gc29tZXRoaW5nIGVsc2UgaXMgYWxzbyBkeW5hbWljLlxuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChoYXNNZXRhZGF0YVJlZ2V4LnRlc3QoY29tcG9uZW50U3RhY2spKSB7XG4gICAgICAgIGR5bmFtaWNWYWxpZGF0aW9uLmhhc0R5bmFtaWNNZXRhZGF0YSA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGhhc1ZpZXdwb3J0UmVnZXgudGVzdChjb21wb25lbnRTdGFjaykpIHtcbiAgICAgICAgZHluYW1pY1ZhbGlkYXRpb24uaGFzRHluYW1pY1ZpZXdwb3J0ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoaGFzU3VzcGVuc2VSZWdleC50ZXN0KGNvbXBvbmVudFN0YWNrKSkge1xuICAgICAgICBkeW5hbWljVmFsaWRhdGlvbi5oYXNTdXNwZW5kZWREeW5hbWljID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoc2VydmVyRHluYW1pYy5zeW5jRHluYW1pY0Vycm9yV2l0aFN0YWNrIHx8IGNsaWVudER5bmFtaWMuc3luY0R5bmFtaWNFcnJvcldpdGhTdGFjaykge1xuICAgICAgICBkeW5hbWljVmFsaWRhdGlvbi5oYXNTeW5jRHluYW1pY0Vycm9ycyA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYFJvdXRlIFwiJHtyb3V0ZX1cIjogQSBjb21wb25lbnQgYWNjZXNzZWQgZGF0YSwgaGVhZGVycywgcGFyYW1zLCBzZWFyY2hQYXJhbXMsIG9yIGEgc2hvcnQtbGl2ZWQgY2FjaGUgd2l0aG91dCBhIFN1c3BlbnNlIGJvdW5kYXJ5IG5vciBhIFwidXNlIGNhY2hlXCIgYWJvdmUgaXQuIFdlIGRvbid0IGhhdmUgdGhlIGV4YWN0IGxpbmUgbnVtYmVyIGFkZGVkIHRvIGVycm9yIG1lc3NhZ2VzIHlldCBidXQgeW91IGNhbiBzZWUgd2hpY2ggY29tcG9uZW50IGluIHRoZSBzdGFjayBiZWxvdy4gU2VlIG1vcmUgaW5mbzogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvbWVzc2FnZXMvbmV4dC1wcmVyZW5kZXItbWlzc2luZy1zdXNwZW5zZWA7XG4gICAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlRXJyb3JXaXRoQ29tcG9uZW50U3RhY2sobWVzc2FnZSwgY29tcG9uZW50U3RhY2spO1xuICAgICAgICBkeW5hbWljVmFsaWRhdGlvbi5keW5hbWljRXJyb3JzLnB1c2goZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlRXJyb3JXaXRoQ29tcG9uZW50U3RhY2sobWVzc2FnZSwgY29tcG9uZW50U3RhY2spIHtcbiAgICBjb25zdCBlcnJvciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IobWVzc2FnZSksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICB2YWx1ZTogXCJFMzk0XCIsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBlcnJvci5zdGFjayA9ICdFcnJvcjogJyArIG1lc3NhZ2UgKyBjb21wb25lbnRTdGFjaztcbiAgICByZXR1cm4gZXJyb3I7XG59XG5mdW5jdGlvbiB0aHJvd0lmRGlzYWxsb3dlZER5bmFtaWMocm91dGUsIGR5bmFtaWNWYWxpZGF0aW9uLCBzZXJ2ZXJEeW5hbWljLCBjbGllbnREeW5hbWljKSB7XG4gICAgbGV0IHN5bmNFcnJvcjtcbiAgICBsZXQgc3luY0V4cHJlc3Npb247XG4gICAgbGV0IHN5bmNMb2dnZWQ7XG4gICAgaWYgKHNlcnZlckR5bmFtaWMuc3luY0R5bmFtaWNFcnJvcldpdGhTdGFjaykge1xuICAgICAgICBzeW5jRXJyb3IgPSBzZXJ2ZXJEeW5hbWljLnN5bmNEeW5hbWljRXJyb3JXaXRoU3RhY2s7XG4gICAgICAgIHN5bmNFeHByZXNzaW9uID0gc2VydmVyRHluYW1pYy5zeW5jRHluYW1pY0V4cHJlc3Npb247XG4gICAgICAgIHN5bmNMb2dnZWQgPSBzZXJ2ZXJEeW5hbWljLnN5bmNEeW5hbWljTG9nZ2VkID09PSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoY2xpZW50RHluYW1pYy5zeW5jRHluYW1pY0Vycm9yV2l0aFN0YWNrKSB7XG4gICAgICAgIHN5bmNFcnJvciA9IGNsaWVudER5bmFtaWMuc3luY0R5bmFtaWNFcnJvcldpdGhTdGFjaztcbiAgICAgICAgc3luY0V4cHJlc3Npb24gPSBjbGllbnREeW5hbWljLnN5bmNEeW5hbWljRXhwcmVzc2lvbjtcbiAgICAgICAgc3luY0xvZ2dlZCA9IGNsaWVudER5bmFtaWMuc3luY0R5bmFtaWNMb2dnZWQgPT09IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3luY0Vycm9yID0gbnVsbDtcbiAgICAgICAgc3luY0V4cHJlc3Npb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHN5bmNMb2dnZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGR5bmFtaWNWYWxpZGF0aW9uLmhhc1N5bmNEeW5hbWljRXJyb3JzICYmIHN5bmNFcnJvcikge1xuICAgICAgICBpZiAoIXN5bmNMb2dnZWQpIHtcbiAgICAgICAgICAgIC8vIEluIGRldiB3ZSBhbHJlYWR5IGxvZyBlcnJvcnMgYWJvdXQgc3luYyBkeW5hbWljIGFjY2Vzcy4gQnV0IGR1cmluZyBidWlsZHMgd2UgbmVlZCB0byBlbnN1cmVcbiAgICAgICAgICAgIC8vIHRoZSBvZmZlbmRpbmcgc3luYyBlcnJvciBpcyBsb2dnZWQgYmVmb3JlIHdlIGV4aXQgdGhlIGJ1aWxkXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHN5bmNFcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGFjdHVhbCBlcnJvciBzaG91bGQgaGF2ZSBiZWVuIGxvZ2dlZCB3aGVuIHRoZSBzeW5jIGFjY2VzcyBvY3VycmVkXG4gICAgICAgIHRocm93IG5ldyBfc3RhdGljZ2VuZXJhdGlvbmJhaWxvdXQuU3RhdGljR2VuQmFpbG91dEVycm9yKCk7XG4gICAgfVxuICAgIGNvbnN0IGR5bmFtaWNFcnJvcnMgPSBkeW5hbWljVmFsaWRhdGlvbi5keW5hbWljRXJyb3JzO1xuICAgIGlmIChkeW5hbWljRXJyb3JzLmxlbmd0aCkge1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZHluYW1pY0Vycm9ycy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGR5bmFtaWNFcnJvcnNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBfc3RhdGljZ2VuZXJhdGlvbmJhaWxvdXQuU3RhdGljR2VuQmFpbG91dEVycm9yKCk7XG4gICAgfVxuICAgIGlmICghZHluYW1pY1ZhbGlkYXRpb24uaGFzU3VzcGVuZGVkRHluYW1pYykge1xuICAgICAgICBpZiAoZHluYW1pY1ZhbGlkYXRpb24uaGFzRHluYW1pY01ldGFkYXRhKSB7XG4gICAgICAgICAgICBpZiAoc3luY0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihzeW5jRXJyb3IpO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgX3N0YXRpY2dlbmVyYXRpb25iYWlsb3V0LlN0YXRpY0dlbkJhaWxvdXRFcnJvcihgUm91dGUgXCIke3JvdXRlfVwiIGhhcyBhIFxcYGdlbmVyYXRlTWV0YWRhdGFcXGAgdGhhdCBjb3VsZCBub3QgZmluaXNoIHJlbmRlcmluZyBiZWZvcmUgJHtzeW5jRXhwcmVzc2lvbn0gd2FzIHVzZWQuIEZvbGxvdyB0aGUgaW5zdHJ1Y3Rpb25zIGluIHRoZSBlcnJvciBmb3IgdGhpcyBleHByZXNzaW9uIHRvIHJlc29sdmUuYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNjA4XCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgX3N0YXRpY2dlbmVyYXRpb25iYWlsb3V0LlN0YXRpY0dlbkJhaWxvdXRFcnJvcihgUm91dGUgXCIke3JvdXRlfVwiIGhhcyBhIFxcYGdlbmVyYXRlTWV0YWRhdGFcXGAgdGhhdCBkZXBlbmRzIG9uIFJlcXVlc3QgZGF0YSAoXFxgY29va2llcygpXFxgLCBldGMuLi4pIG9yIGV4dGVybmFsIGRhdGEgKFxcYGZldGNoKC4uLilcXGAsIGV0Yy4uLikgYnV0IHRoZSByZXN0IG9mIHRoZSByb3V0ZSB3YXMgc3RhdGljIG9yIG9ubHkgdXNlZCBjYWNoZWQgZGF0YSAoXFxgXCJ1c2UgY2FjaGVcIlxcYCkuIElmIHlvdSBleHBlY3RlZCB0aGlzIHJvdXRlIHRvIGJlIHByZXJlbmRlcmFibGUgdXBkYXRlIHlvdXIgXFxgZ2VuZXJhdGVNZXRhZGF0YVxcYCB0byBub3QgdXNlIFJlcXVlc3QgZGF0YSBhbmQgb25seSB1c2UgY2FjaGVkIGV4dGVybmFsIGRhdGEuIE90aGVyd2lzZSwgYWRkIFxcYGF3YWl0IGNvbm5lY3Rpb24oKVxcYCBzb21ld2hlcmUgd2l0aGluIHRoaXMgcm91dGUgdG8gaW5kaWNhdGUgZXhwbGljaXRseSBpdCBzaG91bGQgbm90IGJlIHByZXJlbmRlcmVkLmApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNTM0XCIsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChkeW5hbWljVmFsaWRhdGlvbi5oYXNEeW5hbWljVmlld3BvcnQpIHtcbiAgICAgICAgICAgIGlmIChzeW5jRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHN5bmNFcnJvcik7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBfc3RhdGljZ2VuZXJhdGlvbmJhaWxvdXQuU3RhdGljR2VuQmFpbG91dEVycm9yKGBSb3V0ZSBcIiR7cm91dGV9XCIgaGFzIGEgXFxgZ2VuZXJhdGVWaWV3cG9ydFxcYCB0aGF0IGNvdWxkIG5vdCBmaW5pc2ggcmVuZGVyaW5nIGJlZm9yZSAke3N5bmNFeHByZXNzaW9ufSB3YXMgdXNlZC4gRm9sbG93IHRoZSBpbnN0cnVjdGlvbnMgaW4gdGhlIGVycm9yIGZvciB0aGlzIGV4cHJlc3Npb24gdG8gcmVzb2x2ZS5gKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU1NzNcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBfc3RhdGljZ2VuZXJhdGlvbmJhaWxvdXQuU3RhdGljR2VuQmFpbG91dEVycm9yKGBSb3V0ZSBcIiR7cm91dGV9XCIgaGFzIGEgXFxgZ2VuZXJhdGVWaWV3cG9ydFxcYCB0aGF0IGRlcGVuZHMgb24gUmVxdWVzdCBkYXRhIChcXGBjb29raWVzKClcXGAsIGV0Yy4uLikgb3IgZXh0ZXJuYWwgZGF0YSAoXFxgZmV0Y2goLi4uKVxcYCwgZXRjLi4uKSBidXQgdGhlIHJlc3Qgb2YgdGhlIHJvdXRlIHdhcyBzdGF0aWMgb3Igb25seSB1c2VkIGNhY2hlZCBkYXRhIChcXGBcInVzZSBjYWNoZVwiXFxgKS4gSWYgeW91IGV4cGVjdGVkIHRoaXMgcm91dGUgdG8gYmUgcHJlcmVuZGVyYWJsZSB1cGRhdGUgeW91ciBcXGBnZW5lcmF0ZVZpZXdwb3J0XFxgIHRvIG5vdCB1c2UgUmVxdWVzdCBkYXRhIGFuZCBvbmx5IHVzZSBjYWNoZWQgZXh0ZXJuYWwgZGF0YS4gT3RoZXJ3aXNlLCBhZGQgXFxgYXdhaXQgY29ubmVjdGlvbigpXFxgIHNvbWV3aGVyZSB3aXRoaW4gdGhpcyByb3V0ZSB0byBpbmRpY2F0ZSBleHBsaWNpdGx5IGl0IHNob3VsZCBub3QgYmUgcHJlcmVuZGVyZWQuYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU1OTBcIixcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1keW5hbWljLXJlbmRlcmluZy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/app-render/dynamic-rendering.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/create-deduped-by-callsite-server-error-logger.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/next/dist/server/create-deduped-by-callsite-server-error-logger.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"createDedupedByCallsiteServerErrorLoggerDev\", ({\n    enumerable: true,\n    get: function() {\n        return createDedupedByCallsiteServerErrorLoggerDev;\n    }\n}));\nconst _react = /*#__PURE__*/ _interop_require_wildcard(__webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"));\nfunction _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n    return (_getRequireWildcardCache = function(nodeInterop) {\n        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) {\n        return obj;\n    }\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n        return {\n            default: obj\n        };\n    }\n    var cache = _getRequireWildcardCache(nodeInterop);\n    if (cache && cache.has(obj)) {\n        return cache.get(obj);\n    }\n    var newObj = {\n        __proto__: null\n    };\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for(var key in obj){\n        if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n            if (desc && (desc.get || desc.set)) {\n                Object.defineProperty(newObj, key, desc);\n            } else {\n                newObj[key] = obj[key];\n            }\n        }\n    }\n    newObj.default = obj;\n    if (cache) {\n        cache.set(obj, newObj);\n    }\n    return newObj;\n}\nconst errorRef = {\n    current: null\n};\n// React.cache is currently only available in canary/experimental React channels.\nconst cache = typeof _react.cache === 'function' ? _react.cache : (fn)=>fn;\n// When Dynamic IO is enabled, we record these as errors so that they\n// are captured by the dev overlay as it's more critical to fix these\n// when enabled.\nconst logErrorOrWarn =  false ? 0 : console.warn;\n// We don't want to dedupe across requests.\n// The developer might've just attempted to fix the warning so we should warn again if it still happens.\nconst flushCurrentErrorIfNew = cache(// eslint-disable-next-line @typescript-eslint/no-unused-vars -- cache key\n(key)=>{\n    try {\n        logErrorOrWarn(errorRef.current);\n    } finally{\n        errorRef.current = null;\n    }\n});\nfunction createDedupedByCallsiteServerErrorLoggerDev(getMessage) {\n    return function logDedupedError(...args) {\n        const message = getMessage(...args);\n        if (true) {\n            var _stack;\n            const callStackFrames = (_stack = new Error().stack) == null ? void 0 : _stack.split('\\n');\n            if (callStackFrames === undefined || callStackFrames.length < 4) {\n                logErrorOrWarn(message);\n            } else {\n                // Error:\n                //   logDedupedError\n                //   asyncApiBeingAccessedSynchronously\n                //   <userland callsite>\n                // TODO: This breaks if sourcemaps with ignore lists are enabled.\n                const key = callStackFrames[4];\n                errorRef.current = message;\n                flushCurrentErrorIfNew(key);\n            }\n        } else {}\n    };\n}\n\n//# sourceMappingURL=create-deduped-by-callsite-server-error-logger.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL2NyZWF0ZS1kZWR1cGVkLWJ5LWNhbGxzaXRlLXNlcnZlci1lcnJvci1sb2dnZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRiwrRUFBOEU7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRix1REFBdUQsbUJBQU8sQ0FBQyxtRkFBTztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsTUFBNkIsR0FBRyxDQUFhO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFlBQVksSUFBcUM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxLQUFLLEVBRU47QUFDVDtBQUNBOztBQUVBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcc2VydmVyXFxjcmVhdGUtZGVkdXBlZC1ieS1jYWxsc2l0ZS1zZXJ2ZXItZXJyb3ItbG9nZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY3JlYXRlRGVkdXBlZEJ5Q2FsbHNpdGVTZXJ2ZXJFcnJvckxvZ2dlckRldlwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlRGVkdXBlZEJ5Q2FsbHNpdGVTZXJ2ZXJFcnJvckxvZ2dlckRldjtcbiAgICB9XG59KTtcbmNvbnN0IF9yZWFjdCA9IC8qI19fUFVSRV9fKi8gX2ludGVyb3BfcmVxdWlyZV93aWxkY2FyZChyZXF1aXJlKFwicmVhY3RcIikpO1xuZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKSB7XG4gICAgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsO1xuICAgIHZhciBjYWNoZUJhYmVsSW50ZXJvcCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgdmFyIGNhY2hlTm9kZUludGVyb3AgPSBuZXcgV2Vha01hcCgpO1xuICAgIHJldHVybiAoX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlID0gZnVuY3Rpb24obm9kZUludGVyb3ApIHtcbiAgICAgICAgcmV0dXJuIG5vZGVJbnRlcm9wID8gY2FjaGVOb2RlSW50ZXJvcCA6IGNhY2hlQmFiZWxJbnRlcm9wO1xuICAgIH0pKG5vZGVJbnRlcm9wKTtcbn1cbmZ1bmN0aW9uIF9pbnRlcm9wX3JlcXVpcmVfd2lsZGNhcmQob2JqLCBub2RlSW50ZXJvcCkge1xuICAgIGlmICghbm9kZUludGVyb3AgJiYgb2JqICYmIG9iai5fX2VzTW9kdWxlKSB7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb2JqICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG9ialxuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUobm9kZUludGVyb3ApO1xuICAgIGlmIChjYWNoZSAmJiBjYWNoZS5oYXMob2JqKSkge1xuICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KG9iaik7XG4gICAgfVxuICAgIHZhciBuZXdPYmogPSB7XG4gICAgICAgIF9fcHJvdG9fXzogbnVsbFxuICAgIH07XG4gICAgdmFyIGhhc1Byb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgIGZvcih2YXIga2V5IGluIG9iail7XG4gICAgICAgIGlmIChrZXkgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgIHZhciBkZXNjID0gaGFzUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiBudWxsO1xuICAgICAgICAgICAgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7XG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGNhY2hlLnNldChvYmosIG5ld09iaik7XG4gICAgfVxuICAgIHJldHVybiBuZXdPYmo7XG59XG5jb25zdCBlcnJvclJlZiA9IHtcbiAgICBjdXJyZW50OiBudWxsXG59O1xuLy8gUmVhY3QuY2FjaGUgaXMgY3VycmVudGx5IG9ubHkgYXZhaWxhYmxlIGluIGNhbmFyeS9leHBlcmltZW50YWwgUmVhY3QgY2hhbm5lbHMuXG5jb25zdCBjYWNoZSA9IHR5cGVvZiBfcmVhY3QuY2FjaGUgPT09ICdmdW5jdGlvbicgPyBfcmVhY3QuY2FjaGUgOiAoZm4pPT5mbjtcbi8vIFdoZW4gRHluYW1pYyBJTyBpcyBlbmFibGVkLCB3ZSByZWNvcmQgdGhlc2UgYXMgZXJyb3JzIHNvIHRoYXQgdGhleVxuLy8gYXJlIGNhcHR1cmVkIGJ5IHRoZSBkZXYgb3ZlcmxheSBhcyBpdCdzIG1vcmUgY3JpdGljYWwgdG8gZml4IHRoZXNlXG4vLyB3aGVuIGVuYWJsZWQuXG5jb25zdCBsb2dFcnJvck9yV2FybiA9IHByb2Nlc3MuZW52Ll9fTkVYVF9EWU5BTUlDX0lPID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2Fybjtcbi8vIFdlIGRvbid0IHdhbnQgdG8gZGVkdXBlIGFjcm9zcyByZXF1ZXN0cy5cbi8vIFRoZSBkZXZlbG9wZXIgbWlnaHQndmUganVzdCBhdHRlbXB0ZWQgdG8gZml4IHRoZSB3YXJuaW5nIHNvIHdlIHNob3VsZCB3YXJuIGFnYWluIGlmIGl0IHN0aWxsIGhhcHBlbnMuXG5jb25zdCBmbHVzaEN1cnJlbnRFcnJvcklmTmV3ID0gY2FjaGUoLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAtLSBjYWNoZSBrZXlcbihrZXkpPT57XG4gICAgdHJ5IHtcbiAgICAgICAgbG9nRXJyb3JPcldhcm4oZXJyb3JSZWYuY3VycmVudCk7XG4gICAgfSBmaW5hbGx5e1xuICAgICAgICBlcnJvclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG59KTtcbmZ1bmN0aW9uIGNyZWF0ZURlZHVwZWRCeUNhbGxzaXRlU2VydmVyRXJyb3JMb2dnZXJEZXYoZ2V0TWVzc2FnZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBsb2dEZWR1cGVkRXJyb3IoLi4uYXJncykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2V0TWVzc2FnZSguLi5hcmdzKTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIHZhciBfc3RhY2s7XG4gICAgICAgICAgICBjb25zdCBjYWxsU3RhY2tGcmFtZXMgPSAoX3N0YWNrID0gbmV3IEVycm9yKCkuc3RhY2spID09IG51bGwgPyB2b2lkIDAgOiBfc3RhY2suc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgaWYgKGNhbGxTdGFja0ZyYW1lcyA9PT0gdW5kZWZpbmVkIHx8IGNhbGxTdGFja0ZyYW1lcy5sZW5ndGggPCA0KSB7XG4gICAgICAgICAgICAgICAgbG9nRXJyb3JPcldhcm4obWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEVycm9yOlxuICAgICAgICAgICAgICAgIC8vICAgbG9nRGVkdXBlZEVycm9yXG4gICAgICAgICAgICAgICAgLy8gICBhc3luY0FwaUJlaW5nQWNjZXNzZWRTeW5jaHJvbm91c2x5XG4gICAgICAgICAgICAgICAgLy8gICA8dXNlcmxhbmQgY2FsbHNpdGU+XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogVGhpcyBicmVha3MgaWYgc291cmNlbWFwcyB3aXRoIGlnbm9yZSBsaXN0cyBhcmUgZW5hYmxlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBjYWxsU3RhY2tGcmFtZXNbNF07XG4gICAgICAgICAgICAgICAgZXJyb3JSZWYuY3VycmVudCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgZmx1c2hDdXJyZW50RXJyb3JJZk5ldyhrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nRXJyb3JPcldhcm4obWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUtZGVkdXBlZC1ieS1jYWxsc2l0ZS1zZXJ2ZXItZXJyb3ItbG9nZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/create-deduped-by-callsite-server-error-logger.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/dynamic-rendering-utils.js":
/*!******************************************************************!*\
  !*** ./node_modules/next/dist/server/dynamic-rendering-utils.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    isHangingPromiseRejectionError: function() {\n        return isHangingPromiseRejectionError;\n    },\n    makeHangingPromise: function() {\n        return makeHangingPromise;\n    }\n});\nfunction isHangingPromiseRejectionError(err) {\n    if (typeof err !== 'object' || err === null || !('digest' in err)) {\n        return false;\n    }\n    return err.digest === HANGING_PROMISE_REJECTION;\n}\nconst HANGING_PROMISE_REJECTION = 'HANGING_PROMISE_REJECTION';\nclass HangingPromiseRejectionError extends Error {\n    constructor(expression){\n        super(`During prerendering, ${expression} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${expression} to a different context by using \\`setTimeout\\`, \\`after\\`, or similar functions you may observe this error and you should handle it in that context.`), this.expression = expression, this.digest = HANGING_PROMISE_REJECTION;\n    }\n}\nconst abortListenersBySignal = new WeakMap();\nfunction makeHangingPromise(signal, expression) {\n    if (signal.aborted) {\n        return Promise.reject(new HangingPromiseRejectionError(expression));\n    } else {\n        const hangingPromise = new Promise((_, reject)=>{\n            const boundRejection = reject.bind(null, new HangingPromiseRejectionError(expression));\n            let currentListeners = abortListenersBySignal.get(signal);\n            if (currentListeners) {\n                currentListeners.push(boundRejection);\n            } else {\n                const listeners = [\n                    boundRejection\n                ];\n                abortListenersBySignal.set(signal, listeners);\n                signal.addEventListener('abort', ()=>{\n                    for(let i = 0; i < listeners.length; i++){\n                        listeners[i]();\n                    }\n                }, {\n                    once: true\n                });\n            }\n        });\n        // We are fine if no one actually awaits this promise. We shouldn't consider this an unhandled rejection so\n        // we attach a noop catch handler here to suppress this warning. If you actually await somewhere or construct\n        // your own promise out of it you'll need to ensure you handle the error when it rejects.\n        hangingPromise.catch(ignoreReject);\n        return hangingPromise;\n    }\n}\nfunction ignoreReject() {}\n\n//# sourceMappingURL=dynamic-rendering-utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL2R5bmFtaWMtcmVuZGVyaW5nLXV0aWxzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsTUFBTSxDQUdMO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxZQUFZLHNHQUFzRyxZQUFZO0FBQ3BLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0JBQXNCO0FBQ3pEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXHNlcnZlclxcZHluYW1pYy1yZW5kZXJpbmctdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBpc0hhbmdpbmdQcm9taXNlUmVqZWN0aW9uRXJyb3I6IG51bGwsXG4gICAgbWFrZUhhbmdpbmdQcm9taXNlOiBudWxsXG59KTtcbmZ1bmN0aW9uIF9leHBvcnQodGFyZ2V0LCBhbGwpIHtcbiAgICBmb3IodmFyIG5hbWUgaW4gYWxsKU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIG5hbWUsIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiBhbGxbbmFtZV1cbiAgICB9KTtcbn1cbl9leHBvcnQoZXhwb3J0cywge1xuICAgIGlzSGFuZ2luZ1Byb21pc2VSZWplY3Rpb25FcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpc0hhbmdpbmdQcm9taXNlUmVqZWN0aW9uRXJyb3I7XG4gICAgfSxcbiAgICBtYWtlSGFuZ2luZ1Byb21pc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbWFrZUhhbmdpbmdQcm9taXNlO1xuICAgIH1cbn0pO1xuZnVuY3Rpb24gaXNIYW5naW5nUHJvbWlzZVJlamVjdGlvbkVycm9yKGVycikge1xuICAgIGlmICh0eXBlb2YgZXJyICE9PSAnb2JqZWN0JyB8fCBlcnIgPT09IG51bGwgfHwgISgnZGlnZXN0JyBpbiBlcnIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGVyci5kaWdlc3QgPT09IEhBTkdJTkdfUFJPTUlTRV9SRUpFQ1RJT047XG59XG5jb25zdCBIQU5HSU5HX1BST01JU0VfUkVKRUNUSU9OID0gJ0hBTkdJTkdfUFJPTUlTRV9SRUpFQ1RJT04nO1xuY2xhc3MgSGFuZ2luZ1Byb21pc2VSZWplY3Rpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uKXtcbiAgICAgICAgc3VwZXIoYER1cmluZyBwcmVyZW5kZXJpbmcsICR7ZXhwcmVzc2lvbn0gcmVqZWN0cyB3aGVuIHRoZSBwcmVyZW5kZXIgaXMgY29tcGxldGUuIFR5cGljYWxseSB0aGVzZSBlcnJvcnMgYXJlIGhhbmRsZWQgYnkgUmVhY3QgYnV0IGlmIHlvdSBtb3ZlICR7ZXhwcmVzc2lvbn0gdG8gYSBkaWZmZXJlbnQgY29udGV4dCBieSB1c2luZyBcXGBzZXRUaW1lb3V0XFxgLCBcXGBhZnRlclxcYCwgb3Igc2ltaWxhciBmdW5jdGlvbnMgeW91IG1heSBvYnNlcnZlIHRoaXMgZXJyb3IgYW5kIHlvdSBzaG91bGQgaGFuZGxlIGl0IGluIHRoYXQgY29udGV4dC5gKSwgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbiwgdGhpcy5kaWdlc3QgPSBIQU5HSU5HX1BST01JU0VfUkVKRUNUSU9OO1xuICAgIH1cbn1cbmNvbnN0IGFib3J0TGlzdGVuZXJzQnlTaWduYWwgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gbWFrZUhhbmdpbmdQcm9taXNlKHNpZ25hbCwgZXhwcmVzc2lvbikge1xuICAgIGlmIChzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEhhbmdpbmdQcm9taXNlUmVqZWN0aW9uRXJyb3IoZXhwcmVzc2lvbikpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGhhbmdpbmdQcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCk9PntcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kUmVqZWN0aW9uID0gcmVqZWN0LmJpbmQobnVsbCwgbmV3IEhhbmdpbmdQcm9taXNlUmVqZWN0aW9uRXJyb3IoZXhwcmVzc2lvbikpO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRMaXN0ZW5lcnMgPSBhYm9ydExpc3RlbmVyc0J5U2lnbmFsLmdldChzaWduYWwpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzLnB1c2goYm91bmRSZWplY3Rpb24pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kUmVqZWN0aW9uXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBhYm9ydExpc3RlbmVyc0J5U2lnbmFsLnNldChzaWduYWwsIGxpc3RlbmVycyk7XG4gICAgICAgICAgICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnNbaV0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgb25jZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gV2UgYXJlIGZpbmUgaWYgbm8gb25lIGFjdHVhbGx5IGF3YWl0cyB0aGlzIHByb21pc2UuIFdlIHNob3VsZG4ndCBjb25zaWRlciB0aGlzIGFuIHVuaGFuZGxlZCByZWplY3Rpb24gc29cbiAgICAgICAgLy8gd2UgYXR0YWNoIGEgbm9vcCBjYXRjaCBoYW5kbGVyIGhlcmUgdG8gc3VwcHJlc3MgdGhpcyB3YXJuaW5nLiBJZiB5b3UgYWN0dWFsbHkgYXdhaXQgc29tZXdoZXJlIG9yIGNvbnN0cnVjdFxuICAgICAgICAvLyB5b3VyIG93biBwcm9taXNlIG91dCBvZiBpdCB5b3UnbGwgbmVlZCB0byBlbnN1cmUgeW91IGhhbmRsZSB0aGUgZXJyb3Igd2hlbiBpdCByZWplY3RzLlxuICAgICAgICBoYW5naW5nUHJvbWlzZS5jYXRjaChpZ25vcmVSZWplY3QpO1xuICAgICAgICByZXR1cm4gaGFuZ2luZ1Byb21pc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gaWdub3JlUmVqZWN0KCkge31cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZHluYW1pYy1yZW5kZXJpbmctdXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/dynamic-rendering-utils.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/request/cookies.js":
/*!**********************************************************!*\
  !*** ./node_modules/next/dist/server/request/cookies.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"cookies\", ({\n    enumerable: true,\n    get: function() {\n        return cookies;\n    }\n}));\nconst _requestcookies = __webpack_require__(/*! ../web/spec-extension/adapters/request-cookies */ \"(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/request-cookies.js\");\nconst _cookies = __webpack_require__(/*! ../web/spec-extension/cookies */ \"(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/cookies.js\");\nconst _workasyncstorageexternal = __webpack_require__(/*! ../app-render/work-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-async-storage.external.js\");\nconst _workunitasyncstorageexternal = __webpack_require__(/*! ../app-render/work-unit-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage.external.js\");\nconst _dynamicrendering = __webpack_require__(/*! ../app-render/dynamic-rendering */ \"(app-pages-browser)/./node_modules/next/dist/server/app-render/dynamic-rendering.js\");\nconst _staticgenerationbailout = __webpack_require__(/*! ../../client/components/static-generation-bailout */ \"(app-pages-browser)/./node_modules/next/dist/client/components/static-generation-bailout.js\");\nconst _dynamicrenderingutils = __webpack_require__(/*! ../dynamic-rendering-utils */ \"(app-pages-browser)/./node_modules/next/dist/server/dynamic-rendering-utils.js\");\nconst _creatededupedbycallsiteservererrorlogger = __webpack_require__(/*! ../create-deduped-by-callsite-server-error-logger */ \"(app-pages-browser)/./node_modules/next/dist/server/create-deduped-by-callsite-server-error-logger.js\");\nconst _scheduler = __webpack_require__(/*! ../../lib/scheduler */ \"(app-pages-browser)/./node_modules/next/dist/lib/scheduler.js\");\nconst _utils = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./node_modules/next/dist/server/request/utils.js\");\nfunction cookies() {\n    const callingExpression = 'cookies';\n    const workStore = _workasyncstorageexternal.workAsyncStorage.getStore();\n    const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n    if (workStore) {\n        if (workUnitStore && workUnitStore.phase === 'after' && !(0, _utils.isRequestAPICallableInsideAfter)()) {\n            throw Object.defineProperty(new Error(// TODO(after): clarify that this only applies to pages?\n            `Route ${workStore.route} used \"cookies\" inside \"after(...)\". This is not supported. If you need this data inside an \"after\" callback, use \"cookies\" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`), \"__NEXT_ERROR_CODE\", {\n                value: \"E88\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (workStore.forceStatic) {\n            // When using forceStatic we override all other logic and always just return an empty\n            // cookies object without tracking\n            const underlyingCookies = createEmptyCookies();\n            return makeUntrackedExoticCookies(underlyingCookies);\n        }\n        if (workUnitStore) {\n            if (workUnitStore.type === 'cache') {\n                throw Object.defineProperty(new Error(`Route ${workStore.route} used \"cookies\" inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \"cookies\" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E398\",\n                    enumerable: false,\n                    configurable: true\n                });\n            } else if (workUnitStore.type === 'unstable-cache') {\n                throw Object.defineProperty(new Error(`Route ${workStore.route} used \"cookies\" inside a function cached with \"unstable_cache(...)\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \"cookies\" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E157\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n        }\n        if (workStore.dynamicShouldError) {\n            throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${workStore.route} with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`cookies\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`), \"__NEXT_ERROR_CODE\", {\n                value: \"E549\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (workUnitStore) {\n            if (workUnitStore.type === 'prerender') {\n                // dynamicIO Prerender\n                // We don't track dynamic access here because access will be tracked when you access\n                // one of the properties of the cookies object.\n                return makeDynamicallyTrackedExoticCookies(workStore.route, workUnitStore);\n            } else if (workUnitStore.type === 'prerender-ppr') {\n                // PPR Prerender (no dynamicIO)\n                // We are prerendering with PPR. We need track dynamic access here eagerly\n                // to keep continuity with how cookies has worked in PPR without dynamicIO.\n                (0, _dynamicrendering.postponeWithTracking)(workStore.route, callingExpression, workUnitStore.dynamicTracking);\n            } else if (workUnitStore.type === 'prerender-legacy') {\n                // Legacy Prerender\n                // We track dynamic access here so we don't need to wrap the cookies in\n                // individual property access tracking.\n                (0, _dynamicrendering.throwToInterruptStaticGeneration)(callingExpression, workStore, workUnitStore);\n            }\n        }\n        // We fall through to the dynamic context below but we still track dynamic access\n        // because in dev we can still error for things like using cookies inside a cache context\n        (0, _dynamicrendering.trackDynamicDataInDynamicRender)(workStore, workUnitStore);\n    }\n    // cookies is being called in a dynamic context\n    const requestStore = (0, _workunitasyncstorageexternal.getExpectedRequestStore)(callingExpression);\n    let underlyingCookies;\n    if ((0, _requestcookies.areCookiesMutableInCurrentPhase)(requestStore)) {\n        // We can't conditionally return different types here based on the context.\n        // To avoid confusion, we always return the readonly type here.\n        underlyingCookies = requestStore.userspaceMutableCookies;\n    } else {\n        underlyingCookies = requestStore.cookies;\n    }\n    if ( true && !(workStore == null ? void 0 : workStore.isPrefetchRequest)) {\n        return makeUntrackedExoticCookiesWithDevWarnings(underlyingCookies, workStore == null ? void 0 : workStore.route);\n    } else {\n        return makeUntrackedExoticCookies(underlyingCookies);\n    }\n}\nfunction createEmptyCookies() {\n    return _requestcookies.RequestCookiesAdapter.seal(new _cookies.RequestCookies(new Headers({})));\n}\nconst CachedCookies = new WeakMap();\nfunction makeDynamicallyTrackedExoticCookies(route, prerenderStore) {\n    const cachedPromise = CachedCookies.get(prerenderStore);\n    if (cachedPromise) {\n        return cachedPromise;\n    }\n    const promise = (0, _dynamicrenderingutils.makeHangingPromise)(prerenderStore.renderSignal, '`cookies()`');\n    CachedCookies.set(prerenderStore, promise);\n    Object.defineProperties(promise, {\n        [Symbol.iterator]: {\n            value: function() {\n                const expression = '`cookies()[Symbol.iterator]()`';\n                const error = createCookiesAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        size: {\n            get () {\n                const expression = '`cookies().size`';\n                const error = createCookiesAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        get: {\n            value: function get() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().get()`';\n                } else {\n                    expression = `\\`cookies().get(${describeNameArg(arguments[0])})\\``;\n                }\n                const error = createCookiesAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        getAll: {\n            value: function getAll() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().getAll()`';\n                } else {\n                    expression = `\\`cookies().getAll(${describeNameArg(arguments[0])})\\``;\n                }\n                const error = createCookiesAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        has: {\n            value: function has() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().has()`';\n                } else {\n                    expression = `\\`cookies().has(${describeNameArg(arguments[0])})\\``;\n                }\n                const error = createCookiesAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        set: {\n            value: function set() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().set()`';\n                } else {\n                    const arg = arguments[0];\n                    if (arg) {\n                        expression = `\\`cookies().set(${describeNameArg(arg)}, ...)\\``;\n                    } else {\n                        expression = '`cookies().set(...)`';\n                    }\n                }\n                const error = createCookiesAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        delete: {\n            value: function() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().delete()`';\n                } else if (arguments.length === 1) {\n                    expression = `\\`cookies().delete(${describeNameArg(arguments[0])})\\``;\n                } else {\n                    expression = `\\`cookies().delete(${describeNameArg(arguments[0])}, ...)\\``;\n                }\n                const error = createCookiesAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        clear: {\n            value: function clear() {\n                const expression = '`cookies().clear()`';\n                const error = createCookiesAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        toString: {\n            value: function toString() {\n                const expression = '`cookies().toString()`';\n                const error = createCookiesAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        }\n    });\n    return promise;\n}\nfunction makeUntrackedExoticCookies(underlyingCookies) {\n    const cachedCookies = CachedCookies.get(underlyingCookies);\n    if (cachedCookies) {\n        return cachedCookies;\n    }\n    const promise = Promise.resolve(underlyingCookies);\n    CachedCookies.set(underlyingCookies, promise);\n    Object.defineProperties(promise, {\n        [Symbol.iterator]: {\n            value: underlyingCookies[Symbol.iterator] ? underlyingCookies[Symbol.iterator].bind(underlyingCookies) : // We should remove this and unify our cookies types. We could just let this continue to throw lazily\n            // but that's already a hard thing to debug so we may as well implement it consistently. The biggest problem with\n            // implementing this in this way is the underlying cookie type is a ResponseCookie and not a RequestCookie and so it\n            // has extra properties not available on RequestCookie instances.\n            polyfilledResponseCookiesIterator.bind(underlyingCookies)\n        },\n        size: {\n            get () {\n                return underlyingCookies.size;\n            }\n        },\n        get: {\n            value: underlyingCookies.get.bind(underlyingCookies)\n        },\n        getAll: {\n            value: underlyingCookies.getAll.bind(underlyingCookies)\n        },\n        has: {\n            value: underlyingCookies.has.bind(underlyingCookies)\n        },\n        set: {\n            value: underlyingCookies.set.bind(underlyingCookies)\n        },\n        delete: {\n            value: underlyingCookies.delete.bind(underlyingCookies)\n        },\n        clear: {\n            value: // @ts-expect-error clear is defined in RequestCookies implementation but not in the type\n            typeof underlyingCookies.clear === 'function' ? underlyingCookies.clear.bind(underlyingCookies) : // We should remove this and unify our cookies types. We could just let this continue to throw lazily\n            // but that's already a hard thing to debug so we may as well implement it consistently. The biggest problem with\n            // implementing this in this way is the underlying cookie type is a ResponseCookie and not a RequestCookie and so it\n            // has extra properties not available on RequestCookie instances.\n            polyfilledResponseCookiesClear.bind(underlyingCookies, promise)\n        },\n        toString: {\n            value: underlyingCookies.toString.bind(underlyingCookies)\n        }\n    });\n    return promise;\n}\nfunction makeUntrackedExoticCookiesWithDevWarnings(underlyingCookies, route) {\n    const cachedCookies = CachedCookies.get(underlyingCookies);\n    if (cachedCookies) {\n        return cachedCookies;\n    }\n    const promise = new Promise((resolve)=>(0, _scheduler.scheduleImmediate)(()=>resolve(underlyingCookies)));\n    CachedCookies.set(underlyingCookies, promise);\n    Object.defineProperties(promise, {\n        [Symbol.iterator]: {\n            value: function() {\n                const expression = '`...cookies()` or similar iteration';\n                syncIODev(route, expression);\n                return underlyingCookies[Symbol.iterator] ? underlyingCookies[Symbol.iterator].apply(underlyingCookies, arguments) : // We should remove this and unify our cookies types. We could just let this continue to throw lazily\n                // but that's already a hard thing to debug so we may as well implement it consistently. The biggest problem with\n                // implementing this in this way is the underlying cookie type is a ResponseCookie and not a RequestCookie and so it\n                // has extra properties not available on RequestCookie instances.\n                polyfilledResponseCookiesIterator.call(underlyingCookies);\n            },\n            writable: false\n        },\n        size: {\n            get () {\n                const expression = '`cookies().size`';\n                syncIODev(route, expression);\n                return underlyingCookies.size;\n            }\n        },\n        get: {\n            value: function get() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().get()`';\n                } else {\n                    expression = `\\`cookies().get(${describeNameArg(arguments[0])})\\``;\n                }\n                syncIODev(route, expression);\n                return underlyingCookies.get.apply(underlyingCookies, arguments);\n            },\n            writable: false\n        },\n        getAll: {\n            value: function getAll() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().getAll()`';\n                } else {\n                    expression = `\\`cookies().getAll(${describeNameArg(arguments[0])})\\``;\n                }\n                syncIODev(route, expression);\n                return underlyingCookies.getAll.apply(underlyingCookies, arguments);\n            },\n            writable: false\n        },\n        has: {\n            value: function get() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().has()`';\n                } else {\n                    expression = `\\`cookies().has(${describeNameArg(arguments[0])})\\``;\n                }\n                syncIODev(route, expression);\n                return underlyingCookies.has.apply(underlyingCookies, arguments);\n            },\n            writable: false\n        },\n        set: {\n            value: function set() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().set()`';\n                } else {\n                    const arg = arguments[0];\n                    if (arg) {\n                        expression = `\\`cookies().set(${describeNameArg(arg)}, ...)\\``;\n                    } else {\n                        expression = '`cookies().set(...)`';\n                    }\n                }\n                syncIODev(route, expression);\n                return underlyingCookies.set.apply(underlyingCookies, arguments);\n            },\n            writable: false\n        },\n        delete: {\n            value: function() {\n                let expression;\n                if (arguments.length === 0) {\n                    expression = '`cookies().delete()`';\n                } else if (arguments.length === 1) {\n                    expression = `\\`cookies().delete(${describeNameArg(arguments[0])})\\``;\n                } else {\n                    expression = `\\`cookies().delete(${describeNameArg(arguments[0])}, ...)\\``;\n                }\n                syncIODev(route, expression);\n                return underlyingCookies.delete.apply(underlyingCookies, arguments);\n            },\n            writable: false\n        },\n        clear: {\n            value: function clear() {\n                const expression = '`cookies().clear()`';\n                syncIODev(route, expression);\n                // @ts-ignore clear is defined in RequestCookies implementation but not in the type\n                return typeof underlyingCookies.clear === 'function' ? underlyingCookies.clear.apply(underlyingCookies, arguments) : // We should remove this and unify our cookies types. We could just let this continue to throw lazily\n                // but that's already a hard thing to debug so we may as well implement it consistently. The biggest problem with\n                // implementing this in this way is the underlying cookie type is a ResponseCookie and not a RequestCookie and so it\n                // has extra properties not available on RequestCookie instances.\n                polyfilledResponseCookiesClear.call(underlyingCookies, promise);\n            },\n            writable: false\n        },\n        toString: {\n            value: function toString() {\n                const expression = '`cookies().toString()` or implicit casting';\n                syncIODev(route, expression);\n                return underlyingCookies.toString.apply(underlyingCookies, arguments);\n            },\n            writable: false\n        }\n    });\n    return promise;\n}\nfunction describeNameArg(arg) {\n    return typeof arg === 'object' && arg !== null && typeof arg.name === 'string' ? `'${arg.name}'` : typeof arg === 'string' ? `'${arg}'` : '...';\n}\nfunction syncIODev(route, expression) {\n    const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n    if (workUnitStore && workUnitStore.type === 'request' && workUnitStore.prerenderPhase === true) {\n        // When we're rendering dynamically in dev we need to advance out of the\n        // Prerender environment when we read Request data synchronously\n        const requestStore = workUnitStore;\n        (0, _dynamicrendering.trackSynchronousRequestDataAccessInDev)(requestStore);\n    }\n    // In all cases we warn normally\n    warnForSyncAccess(route, expression);\n}\nconst warnForSyncAccess = (0, _creatededupedbycallsiteservererrorlogger.createDedupedByCallsiteServerErrorLoggerDev)(createCookiesAccessError);\nfunction createCookiesAccessError(route, expression) {\n    const prefix = route ? `Route \"${route}\" ` : 'This route ';\n    return Object.defineProperty(new Error(`${prefix}used ${expression}. ` + `\\`cookies()\\` should be awaited before using its value. ` + `Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`), \"__NEXT_ERROR_CODE\", {\n        value: \"E223\",\n        enumerable: false,\n        configurable: true\n    });\n}\nfunction polyfilledResponseCookiesIterator() {\n    return this.getAll().map((c)=>[\n            c.name,\n            c\n        ]).values();\n}\nfunction polyfilledResponseCookiesClear(returnable) {\n    for (const cookie of this.getAll()){\n        this.delete(cookie.name);\n    }\n    return returnable;\n}\n\n//# sourceMappingURL=cookies.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QvY29va2llcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLDJDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGLHdCQUF3QixtQkFBTyxDQUFDLDBKQUFnRDtBQUNoRixpQkFBaUIsbUJBQU8sQ0FBQyx3SEFBK0I7QUFDeEQsa0NBQWtDLG1CQUFPLENBQUMscUlBQTJDO0FBQ3JGLHNDQUFzQyxtQkFBTyxDQUFDLCtJQUFnRDtBQUM5RiwwQkFBMEIsbUJBQU8sQ0FBQyw0SEFBaUM7QUFDbkUsaUNBQWlDLG1CQUFPLENBQUMsc0pBQW1EO0FBQzVGLCtCQUErQixtQkFBTyxDQUFDLGtIQUE0QjtBQUNuRSxrREFBa0QsbUJBQU8sQ0FBQyxnS0FBbUQ7QUFDN0csbUJBQW1CLG1CQUFPLENBQUMsMEZBQXFCO0FBQ2hELGVBQWUsbUJBQU8sQ0FBQyxxRkFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixpQkFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxpQkFBaUI7QUFDaEY7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZCwrREFBK0QsaUJBQWlCO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxvR0FBb0csaUJBQWlCO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRLEtBQXNDO0FBQzlDO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLG9EQUFvRCw4QkFBOEI7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQix1REFBdUQsOEJBQThCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsb0RBQW9ELDhCQUE4QjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSx3REFBd0QscUJBQXFCO0FBQzdFLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQix1REFBdUQsOEJBQThCO0FBQ3JGLGtCQUFrQjtBQUNsQix1REFBdUQsOEJBQThCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLG9EQUFvRCw4QkFBOEI7QUFDbEY7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsdURBQXVELDhCQUE4QjtBQUNyRjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixvREFBb0QsOEJBQThCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSx3REFBd0QscUJBQXFCO0FBQzdFLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsdURBQXVELDhCQUE4QjtBQUNyRixrQkFBa0I7QUFDbEIsdURBQXVELDhCQUE4QjtBQUNyRjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHlGQUF5RixTQUFTLG1DQUFtQyxJQUFJO0FBQ3pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsTUFBTTtBQUMzQyw4Q0FBOEMsT0FBTyxPQUFPLFdBQVc7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcc2VydmVyXFxyZXF1ZXN0XFxjb29raWVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY29va2llc1wiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29va2llcztcbiAgICB9XG59KTtcbmNvbnN0IF9yZXF1ZXN0Y29va2llcyA9IHJlcXVpcmUoXCIuLi93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvcmVxdWVzdC1jb29raWVzXCIpO1xuY29uc3QgX2Nvb2tpZXMgPSByZXF1aXJlKFwiLi4vd2ViL3NwZWMtZXh0ZW5zaW9uL2Nvb2tpZXNcIik7XG5jb25zdCBfd29ya2FzeW5jc3RvcmFnZWV4dGVybmFsID0gcmVxdWlyZShcIi4uL2FwcC1yZW5kZXIvd29yay1hc3luYy1zdG9yYWdlLmV4dGVybmFsXCIpO1xuY29uc3QgX3dvcmt1bml0YXN5bmNzdG9yYWdlZXh0ZXJuYWwgPSByZXF1aXJlKFwiLi4vYXBwLXJlbmRlci93b3JrLXVuaXQtYXN5bmMtc3RvcmFnZS5leHRlcm5hbFwiKTtcbmNvbnN0IF9keW5hbWljcmVuZGVyaW5nID0gcmVxdWlyZShcIi4uL2FwcC1yZW5kZXIvZHluYW1pYy1yZW5kZXJpbmdcIik7XG5jb25zdCBfc3RhdGljZ2VuZXJhdGlvbmJhaWxvdXQgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbXBvbmVudHMvc3RhdGljLWdlbmVyYXRpb24tYmFpbG91dFwiKTtcbmNvbnN0IF9keW5hbWljcmVuZGVyaW5ndXRpbHMgPSByZXF1aXJlKFwiLi4vZHluYW1pYy1yZW5kZXJpbmctdXRpbHNcIik7XG5jb25zdCBfY3JlYXRlZGVkdXBlZGJ5Y2FsbHNpdGVzZXJ2ZXJlcnJvcmxvZ2dlciA9IHJlcXVpcmUoXCIuLi9jcmVhdGUtZGVkdXBlZC1ieS1jYWxsc2l0ZS1zZXJ2ZXItZXJyb3ItbG9nZ2VyXCIpO1xuY29uc3QgX3NjaGVkdWxlciA9IHJlcXVpcmUoXCIuLi8uLi9saWIvc2NoZWR1bGVyXCIpO1xuY29uc3QgX3V0aWxzID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5mdW5jdGlvbiBjb29raWVzKCkge1xuICAgIGNvbnN0IGNhbGxpbmdFeHByZXNzaW9uID0gJ2Nvb2tpZXMnO1xuICAgIGNvbnN0IHdvcmtTdG9yZSA9IF93b3JrYXN5bmNzdG9yYWdlZXh0ZXJuYWwud29ya0FzeW5jU3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgIGNvbnN0IHdvcmtVbml0U3RvcmUgPSBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbC53b3JrVW5pdEFzeW5jU3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgIGlmICh3b3JrU3RvcmUpIHtcbiAgICAgICAgaWYgKHdvcmtVbml0U3RvcmUgJiYgd29ya1VuaXRTdG9yZS5waGFzZSA9PT0gJ2FmdGVyJyAmJiAhKDAsIF91dGlscy5pc1JlcXVlc3RBUElDYWxsYWJsZUluc2lkZUFmdGVyKSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKC8vIFRPRE8oYWZ0ZXIpOiBjbGFyaWZ5IHRoYXQgdGhpcyBvbmx5IGFwcGxpZXMgdG8gcGFnZXM/XG4gICAgICAgICAgICBgUm91dGUgJHt3b3JrU3RvcmUucm91dGV9IHVzZWQgXCJjb29raWVzXCIgaW5zaWRlIFwiYWZ0ZXIoLi4uKVwiLiBUaGlzIGlzIG5vdCBzdXBwb3J0ZWQuIElmIHlvdSBuZWVkIHRoaXMgZGF0YSBpbnNpZGUgYW4gXCJhZnRlclwiIGNhbGxiYWNrLCB1c2UgXCJjb29raWVzXCIgb3V0c2lkZSBvZiB0aGUgY2FsbGJhY2suIFNlZSBtb3JlIGluZm8gaGVyZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvY2FuYXJ5L2FwcC9hcGktcmVmZXJlbmNlL2Z1bmN0aW9ucy9hZnRlcmApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCJFODhcIixcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JrU3RvcmUuZm9yY2VTdGF0aWMpIHtcbiAgICAgICAgICAgIC8vIFdoZW4gdXNpbmcgZm9yY2VTdGF0aWMgd2Ugb3ZlcnJpZGUgYWxsIG90aGVyIGxvZ2ljIGFuZCBhbHdheXMganVzdCByZXR1cm4gYW4gZW1wdHlcbiAgICAgICAgICAgIC8vIGNvb2tpZXMgb2JqZWN0IHdpdGhvdXQgdHJhY2tpbmdcbiAgICAgICAgICAgIGNvbnN0IHVuZGVybHlpbmdDb29raWVzID0gY3JlYXRlRW1wdHlDb29raWVzKCk7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVVudHJhY2tlZEV4b3RpY0Nvb2tpZXModW5kZXJseWluZ0Nvb2tpZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JrVW5pdFN0b3JlKSB7XG4gICAgICAgICAgICBpZiAod29ya1VuaXRTdG9yZS50eXBlID09PSAnY2FjaGUnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgUm91dGUgJHt3b3JrU3RvcmUucm91dGV9IHVzZWQgXCJjb29raWVzXCIgaW5zaWRlIFwidXNlIGNhY2hlXCIuIEFjY2Vzc2luZyBEeW5hbWljIGRhdGEgc291cmNlcyBpbnNpZGUgYSBjYWNoZSBzY29wZSBpcyBub3Qgc3VwcG9ydGVkLiBJZiB5b3UgbmVlZCB0aGlzIGRhdGEgaW5zaWRlIGEgY2FjaGVkIGZ1bmN0aW9uIHVzZSBcImNvb2tpZXNcIiBvdXRzaWRlIG9mIHRoZSBjYWNoZWQgZnVuY3Rpb24gYW5kIHBhc3MgdGhlIHJlcXVpcmVkIGR5bmFtaWMgZGF0YSBpbiBhcyBhbiBhcmd1bWVudC4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9uZXh0LXJlcXVlc3QtaW4tdXNlLWNhY2hlYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFMzk4XCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod29ya1VuaXRTdG9yZS50eXBlID09PSAndW5zdGFibGUtY2FjaGUnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgUm91dGUgJHt3b3JrU3RvcmUucm91dGV9IHVzZWQgXCJjb29raWVzXCIgaW5zaWRlIGEgZnVuY3Rpb24gY2FjaGVkIHdpdGggXCJ1bnN0YWJsZV9jYWNoZSguLi4pXCIuIEFjY2Vzc2luZyBEeW5hbWljIGRhdGEgc291cmNlcyBpbnNpZGUgYSBjYWNoZSBzY29wZSBpcyBub3Qgc3VwcG9ydGVkLiBJZiB5b3UgbmVlZCB0aGlzIGRhdGEgaW5zaWRlIGEgY2FjaGVkIGZ1bmN0aW9uIHVzZSBcImNvb2tpZXNcIiBvdXRzaWRlIG9mIHRoZSBjYWNoZWQgZnVuY3Rpb24gYW5kIHBhc3MgdGhlIHJlcXVpcmVkIGR5bmFtaWMgZGF0YSBpbiBhcyBhbiBhcmd1bWVudC4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9hcHAvYXBpLXJlZmVyZW5jZS9mdW5jdGlvbnMvdW5zdGFibGVfY2FjaGVgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUxNTdcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JrU3RvcmUuZHluYW1pY1Nob3VsZEVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IF9zdGF0aWNnZW5lcmF0aW9uYmFpbG91dC5TdGF0aWNHZW5CYWlsb3V0RXJyb3IoYFJvdXRlICR7d29ya1N0b3JlLnJvdXRlfSB3aXRoIFxcYGR5bmFtaWMgPSBcImVycm9yXCJcXGAgY291bGRuJ3QgYmUgcmVuZGVyZWQgc3RhdGljYWxseSBiZWNhdXNlIGl0IHVzZWQgXFxgY29va2llc1xcYC4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9hcHAvYnVpbGRpbmcteW91ci1hcHBsaWNhdGlvbi9yZW5kZXJpbmcvc3RhdGljLWFuZC1keW5hbWljI2R5bmFtaWMtcmVuZGVyaW5nYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU1NDlcIixcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JrVW5pdFN0b3JlKSB7XG4gICAgICAgICAgICBpZiAod29ya1VuaXRTdG9yZS50eXBlID09PSAncHJlcmVuZGVyJykge1xuICAgICAgICAgICAgICAgIC8vIGR5bmFtaWNJTyBQcmVyZW5kZXJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB0cmFjayBkeW5hbWljIGFjY2VzcyBoZXJlIGJlY2F1c2UgYWNjZXNzIHdpbGwgYmUgdHJhY2tlZCB3aGVuIHlvdSBhY2Nlc3NcbiAgICAgICAgICAgICAgICAvLyBvbmUgb2YgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGNvb2tpZXMgb2JqZWN0LlxuICAgICAgICAgICAgICAgIHJldHVybiBtYWtlRHluYW1pY2FsbHlUcmFja2VkRXhvdGljQ29va2llcyh3b3JrU3RvcmUucm91dGUsIHdvcmtVbml0U3RvcmUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdwcmVyZW5kZXItcHByJykge1xuICAgICAgICAgICAgICAgIC8vIFBQUiBQcmVyZW5kZXIgKG5vIGR5bmFtaWNJTylcbiAgICAgICAgICAgICAgICAvLyBXZSBhcmUgcHJlcmVuZGVyaW5nIHdpdGggUFBSLiBXZSBuZWVkIHRyYWNrIGR5bmFtaWMgYWNjZXNzIGhlcmUgZWFnZXJseVxuICAgICAgICAgICAgICAgIC8vIHRvIGtlZXAgY29udGludWl0eSB3aXRoIGhvdyBjb29raWVzIGhhcyB3b3JrZWQgaW4gUFBSIHdpdGhvdXQgZHluYW1pY0lPLlxuICAgICAgICAgICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy5wb3N0cG9uZVdpdGhUcmFja2luZykod29ya1N0b3JlLnJvdXRlLCBjYWxsaW5nRXhwcmVzc2lvbiwgd29ya1VuaXRTdG9yZS5keW5hbWljVHJhY2tpbmcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdwcmVyZW5kZXItbGVnYWN5Jykge1xuICAgICAgICAgICAgICAgIC8vIExlZ2FjeSBQcmVyZW5kZXJcbiAgICAgICAgICAgICAgICAvLyBXZSB0cmFjayBkeW5hbWljIGFjY2VzcyBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gd3JhcCB0aGUgY29va2llcyBpblxuICAgICAgICAgICAgICAgIC8vIGluZGl2aWR1YWwgcHJvcGVydHkgYWNjZXNzIHRyYWNraW5nLlxuICAgICAgICAgICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy50aHJvd1RvSW50ZXJydXB0U3RhdGljR2VuZXJhdGlvbikoY2FsbGluZ0V4cHJlc3Npb24sIHdvcmtTdG9yZSwgd29ya1VuaXRTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgZmFsbCB0aHJvdWdoIHRvIHRoZSBkeW5hbWljIGNvbnRleHQgYmVsb3cgYnV0IHdlIHN0aWxsIHRyYWNrIGR5bmFtaWMgYWNjZXNzXG4gICAgICAgIC8vIGJlY2F1c2UgaW4gZGV2IHdlIGNhbiBzdGlsbCBlcnJvciBmb3IgdGhpbmdzIGxpa2UgdXNpbmcgY29va2llcyBpbnNpZGUgYSBjYWNoZSBjb250ZXh0XG4gICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy50cmFja0R5bmFtaWNEYXRhSW5EeW5hbWljUmVuZGVyKSh3b3JrU3RvcmUsIHdvcmtVbml0U3RvcmUpO1xuICAgIH1cbiAgICAvLyBjb29raWVzIGlzIGJlaW5nIGNhbGxlZCBpbiBhIGR5bmFtaWMgY29udGV4dFxuICAgIGNvbnN0IHJlcXVlc3RTdG9yZSA9ICgwLCBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbC5nZXRFeHBlY3RlZFJlcXVlc3RTdG9yZSkoY2FsbGluZ0V4cHJlc3Npb24pO1xuICAgIGxldCB1bmRlcmx5aW5nQ29va2llcztcbiAgICBpZiAoKDAsIF9yZXF1ZXN0Y29va2llcy5hcmVDb29raWVzTXV0YWJsZUluQ3VycmVudFBoYXNlKShyZXF1ZXN0U3RvcmUpKSB7XG4gICAgICAgIC8vIFdlIGNhbid0IGNvbmRpdGlvbmFsbHkgcmV0dXJuIGRpZmZlcmVudCB0eXBlcyBoZXJlIGJhc2VkIG9uIHRoZSBjb250ZXh0LlxuICAgICAgICAvLyBUbyBhdm9pZCBjb25mdXNpb24sIHdlIGFsd2F5cyByZXR1cm4gdGhlIHJlYWRvbmx5IHR5cGUgaGVyZS5cbiAgICAgICAgdW5kZXJseWluZ0Nvb2tpZXMgPSByZXF1ZXN0U3RvcmUudXNlcnNwYWNlTXV0YWJsZUNvb2tpZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdW5kZXJseWluZ0Nvb2tpZXMgPSByZXF1ZXN0U3RvcmUuY29va2llcztcbiAgICB9XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmICEod29ya1N0b3JlID09IG51bGwgPyB2b2lkIDAgOiB3b3JrU3RvcmUuaXNQcmVmZXRjaFJlcXVlc3QpKSB7XG4gICAgICAgIHJldHVybiBtYWtlVW50cmFja2VkRXhvdGljQ29va2llc1dpdGhEZXZXYXJuaW5ncyh1bmRlcmx5aW5nQ29va2llcywgd29ya1N0b3JlID09IG51bGwgPyB2b2lkIDAgOiB3b3JrU3RvcmUucm91dGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBtYWtlVW50cmFja2VkRXhvdGljQ29va2llcyh1bmRlcmx5aW5nQ29va2llcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlRW1wdHlDb29raWVzKCkge1xuICAgIHJldHVybiBfcmVxdWVzdGNvb2tpZXMuUmVxdWVzdENvb2tpZXNBZGFwdGVyLnNlYWwobmV3IF9jb29raWVzLlJlcXVlc3RDb29raWVzKG5ldyBIZWFkZXJzKHt9KSkpO1xufVxuY29uc3QgQ2FjaGVkQ29va2llcyA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBtYWtlRHluYW1pY2FsbHlUcmFja2VkRXhvdGljQ29va2llcyhyb3V0ZSwgcHJlcmVuZGVyU3RvcmUpIHtcbiAgICBjb25zdCBjYWNoZWRQcm9taXNlID0gQ2FjaGVkQ29va2llcy5nZXQocHJlcmVuZGVyU3RvcmUpO1xuICAgIGlmIChjYWNoZWRQcm9taXNlKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWRQcm9taXNlO1xuICAgIH1cbiAgICBjb25zdCBwcm9taXNlID0gKDAsIF9keW5hbWljcmVuZGVyaW5ndXRpbHMubWFrZUhhbmdpbmdQcm9taXNlKShwcmVyZW5kZXJTdG9yZS5yZW5kZXJTaWduYWwsICdgY29va2llcygpYCcpO1xuICAgIENhY2hlZENvb2tpZXMuc2V0KHByZXJlbmRlclN0b3JlLCBwcm9taXNlKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhwcm9taXNlLCB7XG4gICAgICAgIFtTeW1ib2wuaXRlcmF0b3JdOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgY29va2llcygpW1N5bWJvbC5pdGVyYXRvcl0oKWAnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlQ29va2llc0FjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcuYWJvcnRBbmRUaHJvd09uU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzcykocm91dGUsIGV4cHJlc3Npb24sIGVycm9yLCBwcmVyZW5kZXJTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNpemU6IHtcbiAgICAgICAgICAgIGdldCAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLnNpemVgJztcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUNvb2tpZXNBY2Nlc3NFcnJvcihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgKDAsIF9keW5hbWljcmVuZGVyaW5nLmFib3J0QW5kVGhyb3dPblN5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3MpKHJvdXRlLCBleHByZXNzaW9uLCBlcnJvciwgcHJlcmVuZGVyU3RvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLmdldCgpYCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IGBcXGBjb29raWVzKCkuZ2V0KCR7ZGVzY3JpYmVOYW1lQXJnKGFyZ3VtZW50c1swXSl9KVxcYGA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlQ29va2llc0FjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcuYWJvcnRBbmRUaHJvd09uU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzcykocm91dGUsIGV4cHJlc3Npb24sIGVycm9yLCBwcmVyZW5kZXJTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldEFsbDoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXhwcmVzc2lvbjtcbiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gJ2Bjb29raWVzKCkuZ2V0QWxsKClgJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gYFxcYGNvb2tpZXMoKS5nZXRBbGwoJHtkZXNjcmliZU5hbWVBcmcoYXJndW1lbnRzWzBdKX0pXFxgYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBjcmVhdGVDb29raWVzQWNjZXNzRXJyb3Iocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy5hYm9ydEFuZFRocm93T25TeW5jaHJvbm91c1JlcXVlc3REYXRhQWNjZXNzKShyb3V0ZSwgZXhwcmVzc2lvbiwgZXJyb3IsIHByZXJlbmRlclN0b3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaGFzOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFzKCkge1xuICAgICAgICAgICAgICAgIGxldCBleHByZXNzaW9uO1xuICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24gPSAnYGNvb2tpZXMoKS5oYXMoKWAnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24gPSBgXFxgY29va2llcygpLmhhcygke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSlcXGBgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUNvb2tpZXNBY2Nlc3NFcnJvcihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgKDAsIF9keW5hbWljcmVuZGVyaW5nLmFib3J0QW5kVGhyb3dPblN5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3MpKHJvdXRlLCBleHByZXNzaW9uLCBlcnJvciwgcHJlcmVuZGVyU3RvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZXQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLnNldCgpYCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJnID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gYFxcYGNvb2tpZXMoKS5zZXQoJHtkZXNjcmliZU5hbWVBcmcoYXJnKX0sIC4uLilcXGBgO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLnNldCguLi4pYCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBjcmVhdGVDb29raWVzQWNjZXNzRXJyb3Iocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy5hYm9ydEFuZFRocm93T25TeW5jaHJvbm91c1JlcXVlc3REYXRhQWNjZXNzKShyb3V0ZSwgZXhwcmVzc2lvbiwgZXJyb3IsIHByZXJlbmRlclN0b3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgbGV0IGV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLmRlbGV0ZSgpYCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24gPSBgXFxgY29va2llcygpLmRlbGV0ZSgke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSlcXGBgO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24gPSBgXFxgY29va2llcygpLmRlbGV0ZSgke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSwgLi4uKVxcYGA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlQ29va2llc0FjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcuYWJvcnRBbmRUaHJvd09uU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzcykocm91dGUsIGV4cHJlc3Npb24sIGVycm9yLCBwcmVyZW5kZXJTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNsZWFyOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLmNsZWFyKClgJztcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUNvb2tpZXNBY2Nlc3NFcnJvcihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgKDAsIF9keW5hbWljcmVuZGVyaW5nLmFib3J0QW5kVGhyb3dPblN5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3MpKHJvdXRlLCBleHByZXNzaW9uLCBlcnJvciwgcHJlcmVuZGVyU3RvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0b1N0cmluZzoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSAnYGNvb2tpZXMoKS50b1N0cmluZygpYCc7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBjcmVhdGVDb29raWVzQWNjZXNzRXJyb3Iocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy5hYm9ydEFuZFRocm93T25TeW5jaHJvbm91c1JlcXVlc3REYXRhQWNjZXNzKShyb3V0ZSwgZXhwcmVzc2lvbiwgZXJyb3IsIHByZXJlbmRlclN0b3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gbWFrZVVudHJhY2tlZEV4b3RpY0Nvb2tpZXModW5kZXJseWluZ0Nvb2tpZXMpIHtcbiAgICBjb25zdCBjYWNoZWRDb29raWVzID0gQ2FjaGVkQ29va2llcy5nZXQodW5kZXJseWluZ0Nvb2tpZXMpO1xuICAgIGlmIChjYWNoZWRDb29raWVzKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWRDb29raWVzO1xuICAgIH1cbiAgICBjb25zdCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHVuZGVybHlpbmdDb29raWVzKTtcbiAgICBDYWNoZWRDb29raWVzLnNldCh1bmRlcmx5aW5nQ29va2llcywgcHJvbWlzZSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocHJvbWlzZSwge1xuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXToge1xuICAgICAgICAgICAgdmFsdWU6IHVuZGVybHlpbmdDb29raWVzW1N5bWJvbC5pdGVyYXRvcl0gPyB1bmRlcmx5aW5nQ29va2llc1tTeW1ib2wuaXRlcmF0b3JdLmJpbmQodW5kZXJseWluZ0Nvb2tpZXMpIDogLy8gV2Ugc2hvdWxkIHJlbW92ZSB0aGlzIGFuZCB1bmlmeSBvdXIgY29va2llcyB0eXBlcy4gV2UgY291bGQganVzdCBsZXQgdGhpcyBjb250aW51ZSB0byB0aHJvdyBsYXppbHlcbiAgICAgICAgICAgIC8vIGJ1dCB0aGF0J3MgYWxyZWFkeSBhIGhhcmQgdGhpbmcgdG8gZGVidWcgc28gd2UgbWF5IGFzIHdlbGwgaW1wbGVtZW50IGl0IGNvbnNpc3RlbnRseS4gVGhlIGJpZ2dlc3QgcHJvYmxlbSB3aXRoXG4gICAgICAgICAgICAvLyBpbXBsZW1lbnRpbmcgdGhpcyBpbiB0aGlzIHdheSBpcyB0aGUgdW5kZXJseWluZyBjb29raWUgdHlwZSBpcyBhIFJlc3BvbnNlQ29va2llIGFuZCBub3QgYSBSZXF1ZXN0Q29va2llIGFuZCBzbyBpdFxuICAgICAgICAgICAgLy8gaGFzIGV4dHJhIHByb3BlcnRpZXMgbm90IGF2YWlsYWJsZSBvbiBSZXF1ZXN0Q29va2llIGluc3RhbmNlcy5cbiAgICAgICAgICAgIHBvbHlmaWxsZWRSZXNwb25zZUNvb2tpZXNJdGVyYXRvci5iaW5kKHVuZGVybHlpbmdDb29raWVzKVxuICAgICAgICB9LFxuICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICBnZXQgKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlcmx5aW5nQ29va2llcy5zaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiB1bmRlcmx5aW5nQ29va2llcy5nZXQuYmluZCh1bmRlcmx5aW5nQ29va2llcylcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0QWxsOiB7XG4gICAgICAgICAgICB2YWx1ZTogdW5kZXJseWluZ0Nvb2tpZXMuZ2V0QWxsLmJpbmQodW5kZXJseWluZ0Nvb2tpZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGhhczoge1xuICAgICAgICAgICAgdmFsdWU6IHVuZGVybHlpbmdDb29raWVzLmhhcy5iaW5kKHVuZGVybHlpbmdDb29raWVzKVxuICAgICAgICB9LFxuICAgICAgICBzZXQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiB1bmRlcmx5aW5nQ29va2llcy5zZXQuYmluZCh1bmRlcmx5aW5nQ29va2llcylcbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlOiB7XG4gICAgICAgICAgICB2YWx1ZTogdW5kZXJseWluZ0Nvb2tpZXMuZGVsZXRlLmJpbmQodW5kZXJseWluZ0Nvb2tpZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGNsZWFyOiB7XG4gICAgICAgICAgICB2YWx1ZTogLy8gQHRzLWV4cGVjdC1lcnJvciBjbGVhciBpcyBkZWZpbmVkIGluIFJlcXVlc3RDb29raWVzIGltcGxlbWVudGF0aW9uIGJ1dCBub3QgaW4gdGhlIHR5cGVcbiAgICAgICAgICAgIHR5cGVvZiB1bmRlcmx5aW5nQ29va2llcy5jbGVhciA9PT0gJ2Z1bmN0aW9uJyA/IHVuZGVybHlpbmdDb29raWVzLmNsZWFyLmJpbmQodW5kZXJseWluZ0Nvb2tpZXMpIDogLy8gV2Ugc2hvdWxkIHJlbW92ZSB0aGlzIGFuZCB1bmlmeSBvdXIgY29va2llcyB0eXBlcy4gV2UgY291bGQganVzdCBsZXQgdGhpcyBjb250aW51ZSB0byB0aHJvdyBsYXppbHlcbiAgICAgICAgICAgIC8vIGJ1dCB0aGF0J3MgYWxyZWFkeSBhIGhhcmQgdGhpbmcgdG8gZGVidWcgc28gd2UgbWF5IGFzIHdlbGwgaW1wbGVtZW50IGl0IGNvbnNpc3RlbnRseS4gVGhlIGJpZ2dlc3QgcHJvYmxlbSB3aXRoXG4gICAgICAgICAgICAvLyBpbXBsZW1lbnRpbmcgdGhpcyBpbiB0aGlzIHdheSBpcyB0aGUgdW5kZXJseWluZyBjb29raWUgdHlwZSBpcyBhIFJlc3BvbnNlQ29va2llIGFuZCBub3QgYSBSZXF1ZXN0Q29va2llIGFuZCBzbyBpdFxuICAgICAgICAgICAgLy8gaGFzIGV4dHJhIHByb3BlcnRpZXMgbm90IGF2YWlsYWJsZSBvbiBSZXF1ZXN0Q29va2llIGluc3RhbmNlcy5cbiAgICAgICAgICAgIHBvbHlmaWxsZWRSZXNwb25zZUNvb2tpZXNDbGVhci5iaW5kKHVuZGVybHlpbmdDb29raWVzLCBwcm9taXNlKVxuICAgICAgICB9LFxuICAgICAgICB0b1N0cmluZzoge1xuICAgICAgICAgICAgdmFsdWU6IHVuZGVybHlpbmdDb29raWVzLnRvU3RyaW5nLmJpbmQodW5kZXJseWluZ0Nvb2tpZXMpXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIG1ha2VVbnRyYWNrZWRFeG90aWNDb29raWVzV2l0aERldldhcm5pbmdzKHVuZGVybHlpbmdDb29raWVzLCByb3V0ZSkge1xuICAgIGNvbnN0IGNhY2hlZENvb2tpZXMgPSBDYWNoZWRDb29raWVzLmdldCh1bmRlcmx5aW5nQ29va2llcyk7XG4gICAgaWYgKGNhY2hlZENvb2tpZXMpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZENvb2tpZXM7XG4gICAgfVxuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PigwLCBfc2NoZWR1bGVyLnNjaGVkdWxlSW1tZWRpYXRlKSgoKT0+cmVzb2x2ZSh1bmRlcmx5aW5nQ29va2llcykpKTtcbiAgICBDYWNoZWRDb29raWVzLnNldCh1bmRlcmx5aW5nQ29va2llcywgcHJvbWlzZSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocHJvbWlzZSwge1xuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXToge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSAnYC4uLmNvb2tpZXMoKWAgb3Igc2ltaWxhciBpdGVyYXRpb24nO1xuICAgICAgICAgICAgICAgIHN5bmNJT0Rldihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVybHlpbmdDb29raWVzW1N5bWJvbC5pdGVyYXRvcl0gPyB1bmRlcmx5aW5nQ29va2llc1tTeW1ib2wuaXRlcmF0b3JdLmFwcGx5KHVuZGVybHlpbmdDb29raWVzLCBhcmd1bWVudHMpIDogLy8gV2Ugc2hvdWxkIHJlbW92ZSB0aGlzIGFuZCB1bmlmeSBvdXIgY29va2llcyB0eXBlcy4gV2UgY291bGQganVzdCBsZXQgdGhpcyBjb250aW51ZSB0byB0aHJvdyBsYXppbHlcbiAgICAgICAgICAgICAgICAvLyBidXQgdGhhdCdzIGFscmVhZHkgYSBoYXJkIHRoaW5nIHRvIGRlYnVnIHNvIHdlIG1heSBhcyB3ZWxsIGltcGxlbWVudCBpdCBjb25zaXN0ZW50bHkuIFRoZSBiaWdnZXN0IHByb2JsZW0gd2l0aFxuICAgICAgICAgICAgICAgIC8vIGltcGxlbWVudGluZyB0aGlzIGluIHRoaXMgd2F5IGlzIHRoZSB1bmRlcmx5aW5nIGNvb2tpZSB0eXBlIGlzIGEgUmVzcG9uc2VDb29raWUgYW5kIG5vdCBhIFJlcXVlc3RDb29raWUgYW5kIHNvIGl0XG4gICAgICAgICAgICAgICAgLy8gaGFzIGV4dHJhIHByb3BlcnRpZXMgbm90IGF2YWlsYWJsZSBvbiBSZXF1ZXN0Q29va2llIGluc3RhbmNlcy5cbiAgICAgICAgICAgICAgICBwb2x5ZmlsbGVkUmVzcG9uc2VDb29raWVzSXRlcmF0b3IuY2FsbCh1bmRlcmx5aW5nQ29va2llcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHNpemU6IHtcbiAgICAgICAgICAgIGdldCAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLnNpemVgJztcbiAgICAgICAgICAgICAgICBzeW5jSU9EZXYocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlcmx5aW5nQ29va2llcy5zaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLmdldCgpYCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IGBcXGBjb29raWVzKCkuZ2V0KCR7ZGVzY3JpYmVOYW1lQXJnKGFyZ3VtZW50c1swXSl9KVxcYGA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN5bmNJT0Rldihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVybHlpbmdDb29raWVzLmdldC5hcHBseSh1bmRlcmx5aW5nQ29va2llcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0QWxsOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgICAgIGxldCBleHByZXNzaW9uO1xuICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24gPSAnYGNvb2tpZXMoKS5nZXRBbGwoKWAnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24gPSBgXFxgY29va2llcygpLmdldEFsbCgke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSlcXGBgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzeW5jSU9EZXYocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlcmx5aW5nQ29va2llcy5nZXRBbGwuYXBwbHkodW5kZXJseWluZ0Nvb2tpZXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGhhczoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXhwcmVzc2lvbjtcbiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gJ2Bjb29raWVzKCkuaGFzKClgJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gYFxcYGNvb2tpZXMoKS5oYXMoJHtkZXNjcmliZU5hbWVBcmcoYXJndW1lbnRzWzBdKX0pXFxgYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZXJseWluZ0Nvb2tpZXMuaGFzLmFwcGx5KHVuZGVybHlpbmdDb29raWVzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBzZXQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLnNldCgpYCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJnID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gYFxcYGNvb2tpZXMoKS5zZXQoJHtkZXNjcmliZU5hbWVBcmcoYXJnKX0sIC4uLilcXGBgO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9ICdgY29va2llcygpLnNldCguLi4pYCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZXJseWluZ0Nvb2tpZXMuc2V0LmFwcGx5KHVuZGVybHlpbmdDb29raWVzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBkZWxldGU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXhwcmVzc2lvbjtcbiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gJ2Bjb29raWVzKCkuZGVsZXRlKClgJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IGBcXGBjb29raWVzKCkuZGVsZXRlKCR7ZGVzY3JpYmVOYW1lQXJnKGFyZ3VtZW50c1swXSl9KVxcYGA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IGBcXGBjb29raWVzKCkuZGVsZXRlKCR7ZGVzY3JpYmVOYW1lQXJnKGFyZ3VtZW50c1swXSl9LCAuLi4pXFxgYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZXJseWluZ0Nvb2tpZXMuZGVsZXRlLmFwcGx5KHVuZGVybHlpbmdDb29raWVzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBjbGVhcjoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSAnYGNvb2tpZXMoKS5jbGVhcigpYCc7XG4gICAgICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIGNsZWFyIGlzIGRlZmluZWQgaW4gUmVxdWVzdENvb2tpZXMgaW1wbGVtZW50YXRpb24gYnV0IG5vdCBpbiB0aGUgdHlwZVxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdW5kZXJseWluZ0Nvb2tpZXMuY2xlYXIgPT09ICdmdW5jdGlvbicgPyB1bmRlcmx5aW5nQ29va2llcy5jbGVhci5hcHBseSh1bmRlcmx5aW5nQ29va2llcywgYXJndW1lbnRzKSA6IC8vIFdlIHNob3VsZCByZW1vdmUgdGhpcyBhbmQgdW5pZnkgb3VyIGNvb2tpZXMgdHlwZXMuIFdlIGNvdWxkIGp1c3QgbGV0IHRoaXMgY29udGludWUgdG8gdGhyb3cgbGF6aWx5XG4gICAgICAgICAgICAgICAgLy8gYnV0IHRoYXQncyBhbHJlYWR5IGEgaGFyZCB0aGluZyB0byBkZWJ1ZyBzbyB3ZSBtYXkgYXMgd2VsbCBpbXBsZW1lbnQgaXQgY29uc2lzdGVudGx5LiBUaGUgYmlnZ2VzdCBwcm9ibGVtIHdpdGhcbiAgICAgICAgICAgICAgICAvLyBpbXBsZW1lbnRpbmcgdGhpcyBpbiB0aGlzIHdheSBpcyB0aGUgdW5kZXJseWluZyBjb29raWUgdHlwZSBpcyBhIFJlc3BvbnNlQ29va2llIGFuZCBub3QgYSBSZXF1ZXN0Q29va2llIGFuZCBzbyBpdFxuICAgICAgICAgICAgICAgIC8vIGhhcyBleHRyYSBwcm9wZXJ0aWVzIG5vdCBhdmFpbGFibGUgb24gUmVxdWVzdENvb2tpZSBpbnN0YW5jZXMuXG4gICAgICAgICAgICAgICAgcG9seWZpbGxlZFJlc3BvbnNlQ29va2llc0NsZWFyLmNhbGwodW5kZXJseWluZ0Nvb2tpZXMsIHByb21pc2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB0b1N0cmluZzoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSAnYGNvb2tpZXMoKS50b1N0cmluZygpYCBvciBpbXBsaWNpdCBjYXN0aW5nJztcbiAgICAgICAgICAgICAgICBzeW5jSU9EZXYocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlcmx5aW5nQ29va2llcy50b1N0cmluZy5hcHBseSh1bmRlcmx5aW5nQ29va2llcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gZGVzY3JpYmVOYW1lQXJnKGFyZykge1xuICAgIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGwgJiYgdHlwZW9mIGFyZy5uYW1lID09PSAnc3RyaW5nJyA/IGAnJHthcmcubmFtZX0nYCA6IHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnID8gYCcke2FyZ30nYCA6ICcuLi4nO1xufVxuZnVuY3Rpb24gc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKSB7XG4gICAgY29uc3Qgd29ya1VuaXRTdG9yZSA9IF93b3JrdW5pdGFzeW5jc3RvcmFnZWV4dGVybmFsLndvcmtVbml0QXN5bmNTdG9yYWdlLmdldFN0b3JlKCk7XG4gICAgaWYgKHdvcmtVbml0U3RvcmUgJiYgd29ya1VuaXRTdG9yZS50eXBlID09PSAncmVxdWVzdCcgJiYgd29ya1VuaXRTdG9yZS5wcmVyZW5kZXJQaGFzZSA9PT0gdHJ1ZSkge1xuICAgICAgICAvLyBXaGVuIHdlJ3JlIHJlbmRlcmluZyBkeW5hbWljYWxseSBpbiBkZXYgd2UgbmVlZCB0byBhZHZhbmNlIG91dCBvZiB0aGVcbiAgICAgICAgLy8gUHJlcmVuZGVyIGVudmlyb25tZW50IHdoZW4gd2UgcmVhZCBSZXF1ZXN0IGRhdGEgc3luY2hyb25vdXNseVxuICAgICAgICBjb25zdCByZXF1ZXN0U3RvcmUgPSB3b3JrVW5pdFN0b3JlO1xuICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcudHJhY2tTeW5jaHJvbm91c1JlcXVlc3REYXRhQWNjZXNzSW5EZXYpKHJlcXVlc3RTdG9yZSk7XG4gICAgfVxuICAgIC8vIEluIGFsbCBjYXNlcyB3ZSB3YXJuIG5vcm1hbGx5XG4gICAgd2FybkZvclN5bmNBY2Nlc3Mocm91dGUsIGV4cHJlc3Npb24pO1xufVxuY29uc3Qgd2FybkZvclN5bmNBY2Nlc3MgPSAoMCwgX2NyZWF0ZWRlZHVwZWRieWNhbGxzaXRlc2VydmVyZXJyb3Jsb2dnZXIuY3JlYXRlRGVkdXBlZEJ5Q2FsbHNpdGVTZXJ2ZXJFcnJvckxvZ2dlckRldikoY3JlYXRlQ29va2llc0FjY2Vzc0Vycm9yKTtcbmZ1bmN0aW9uIGNyZWF0ZUNvb2tpZXNBY2Nlc3NFcnJvcihyb3V0ZSwgZXhwcmVzc2lvbikge1xuICAgIGNvbnN0IHByZWZpeCA9IHJvdXRlID8gYFJvdXRlIFwiJHtyb3V0ZX1cIiBgIDogJ1RoaXMgcm91dGUgJztcbiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgJHtwcmVmaXh9dXNlZCAke2V4cHJlc3Npb259LiBgICsgYFxcYGNvb2tpZXMoKVxcYCBzaG91bGQgYmUgYXdhaXRlZCBiZWZvcmUgdXNpbmcgaXRzIHZhbHVlLiBgICsgYExlYXJuIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL3N5bmMtZHluYW1pYy1hcGlzYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICB2YWx1ZTogXCJFMjIzXCIsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHBvbHlmaWxsZWRSZXNwb25zZUNvb2tpZXNJdGVyYXRvcigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBbGwoKS5tYXAoKGMpPT5bXG4gICAgICAgICAgICBjLm5hbWUsXG4gICAgICAgICAgICBjXG4gICAgICAgIF0pLnZhbHVlcygpO1xufVxuZnVuY3Rpb24gcG9seWZpbGxlZFJlc3BvbnNlQ29va2llc0NsZWFyKHJldHVybmFibGUpIHtcbiAgICBmb3IgKGNvbnN0IGNvb2tpZSBvZiB0aGlzLmdldEFsbCgpKXtcbiAgICAgICAgdGhpcy5kZWxldGUoY29va2llLm5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuYWJsZTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29va2llcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/request/cookies.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/request/draft-mode.js":
/*!*************************************************************!*\
  !*** ./node_modules/next/dist/server/request/draft-mode.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"draftMode\", ({\n    enumerable: true,\n    get: function() {\n        return draftMode;\n    }\n}));\nconst _workunitasyncstorageexternal = __webpack_require__(/*! ../app-render/work-unit-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage.external.js\");\nconst _workasyncstorageexternal = __webpack_require__(/*! ../app-render/work-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-async-storage.external.js\");\nconst _dynamicrendering = __webpack_require__(/*! ../app-render/dynamic-rendering */ \"(app-pages-browser)/./node_modules/next/dist/server/app-render/dynamic-rendering.js\");\nconst _creatededupedbycallsiteservererrorlogger = __webpack_require__(/*! ../create-deduped-by-callsite-server-error-logger */ \"(app-pages-browser)/./node_modules/next/dist/server/create-deduped-by-callsite-server-error-logger.js\");\nconst _staticgenerationbailout = __webpack_require__(/*! ../../client/components/static-generation-bailout */ \"(app-pages-browser)/./node_modules/next/dist/client/components/static-generation-bailout.js\");\nconst _hooksservercontext = __webpack_require__(/*! ../../client/components/hooks-server-context */ \"(app-pages-browser)/./node_modules/next/dist/client/components/hooks-server-context.js\");\nfunction draftMode() {\n    const callingExpression = 'draftMode';\n    const workStore = _workasyncstorageexternal.workAsyncStorage.getStore();\n    const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n    if (!workStore || !workUnitStore) {\n        (0, _workunitasyncstorageexternal.throwForMissingRequestStore)(callingExpression);\n    }\n    switch(workUnitStore.type){\n        case 'request':\n            return createOrGetCachedExoticDraftMode(workUnitStore.draftMode, workStore);\n        case 'cache':\n        case 'unstable-cache':\n            // Inside of `\"use cache\"` or `unstable_cache`, draft mode is available if\n            // the outmost work unit store is a request store, and if draft mode is\n            // enabled.\n            const draftModeProvider = (0, _workunitasyncstorageexternal.getDraftModeProviderForCacheScope)(workStore, workUnitStore);\n            if (draftModeProvider) {\n                return createOrGetCachedExoticDraftMode(draftModeProvider, workStore);\n            }\n        // Otherwise, we fall through to providing an empty draft mode.\n        // eslint-disable-next-line no-fallthrough\n        case 'prerender':\n        case 'prerender-ppr':\n        case 'prerender-legacy':\n            // Return empty draft mode\n            if ( true && !(workStore == null ? void 0 : workStore.isPrefetchRequest)) {\n                const route = workStore == null ? void 0 : workStore.route;\n                return createExoticDraftModeWithDevWarnings(null, route);\n            } else {\n                return createExoticDraftMode(null);\n            }\n        default:\n            const _exhaustiveCheck = workUnitStore;\n            return _exhaustiveCheck;\n    }\n}\nfunction createOrGetCachedExoticDraftMode(draftModeProvider, workStore) {\n    const cachedDraftMode = CachedDraftModes.get(draftMode);\n    if (cachedDraftMode) {\n        return cachedDraftMode;\n    }\n    let promise;\n    if ( true && !(workStore == null ? void 0 : workStore.isPrefetchRequest)) {\n        const route = workStore == null ? void 0 : workStore.route;\n        promise = createExoticDraftModeWithDevWarnings(draftModeProvider, route);\n    } else {\n        promise = createExoticDraftMode(draftModeProvider);\n    }\n    CachedDraftModes.set(draftModeProvider, promise);\n    return promise;\n}\nconst CachedDraftModes = new WeakMap();\nfunction createExoticDraftMode(underlyingProvider) {\n    const instance = new DraftMode(underlyingProvider);\n    const promise = Promise.resolve(instance);\n    Object.defineProperty(promise, 'isEnabled', {\n        get () {\n            return instance.isEnabled;\n        },\n        set (newValue) {\n            Object.defineProperty(promise, 'isEnabled', {\n                value: newValue,\n                writable: true,\n                enumerable: true\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    promise.enable = instance.enable.bind(instance);\n    promise.disable = instance.disable.bind(instance);\n    return promise;\n}\nfunction createExoticDraftModeWithDevWarnings(underlyingProvider, route) {\n    const instance = new DraftMode(underlyingProvider);\n    const promise = Promise.resolve(instance);\n    Object.defineProperty(promise, 'isEnabled', {\n        get () {\n            const expression = '`draftMode().isEnabled`';\n            syncIODev(route, expression);\n            return instance.isEnabled;\n        },\n        set (newValue) {\n            Object.defineProperty(promise, 'isEnabled', {\n                value: newValue,\n                writable: true,\n                enumerable: true\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(promise, 'enable', {\n        value: function get() {\n            const expression = '`draftMode().enable()`';\n            syncIODev(route, expression);\n            return instance.enable.apply(instance, arguments);\n        }\n    });\n    Object.defineProperty(promise, 'disable', {\n        value: function get() {\n            const expression = '`draftMode().disable()`';\n            syncIODev(route, expression);\n            return instance.disable.apply(instance, arguments);\n        }\n    });\n    return promise;\n}\nclass DraftMode {\n    constructor(provider){\n        this._provider = provider;\n    }\n    get isEnabled() {\n        if (this._provider !== null) {\n            return this._provider.isEnabled;\n        }\n        return false;\n    }\n    enable() {\n        // We have a store we want to track dynamic data access to ensure we\n        // don't statically generate routes that manipulate draft mode.\n        trackDynamicDraftMode('draftMode().enable()');\n        if (this._provider !== null) {\n            this._provider.enable();\n        }\n    }\n    disable() {\n        trackDynamicDraftMode('draftMode().disable()');\n        if (this._provider !== null) {\n            this._provider.disable();\n        }\n    }\n}\nfunction syncIODev(route, expression) {\n    const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n    if (workUnitStore && workUnitStore.type === 'request' && workUnitStore.prerenderPhase === true) {\n        // When we're rendering dynamically in dev we need to advance out of the\n        // Prerender environment when we read Request data synchronously\n        const requestStore = workUnitStore;\n        (0, _dynamicrendering.trackSynchronousRequestDataAccessInDev)(requestStore);\n    }\n    // In all cases we warn normally\n    warnForSyncAccess(route, expression);\n}\nconst warnForSyncAccess = (0, _creatededupedbycallsiteservererrorlogger.createDedupedByCallsiteServerErrorLoggerDev)(createDraftModeAccessError);\nfunction createDraftModeAccessError(route, expression) {\n    const prefix = route ? `Route \"${route}\" ` : 'This route ';\n    return Object.defineProperty(new Error(`${prefix}used ${expression}. ` + `\\`draftMode()\\` should be awaited before using its value. ` + `Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`), \"__NEXT_ERROR_CODE\", {\n        value: \"E377\",\n        enumerable: false,\n        configurable: true\n    });\n}\nfunction trackDynamicDraftMode(expression) {\n    const store = _workasyncstorageexternal.workAsyncStorage.getStore();\n    const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n    if (store) {\n        // We have a store we want to track dynamic data access to ensure we\n        // don't statically generate routes that manipulate draft mode.\n        if (workUnitStore) {\n            if (workUnitStore.type === 'cache') {\n                throw Object.defineProperty(new Error(`Route ${store.route} used \"${expression}\" inside \"use cache\". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E246\",\n                    enumerable: false,\n                    configurable: true\n                });\n            } else if (workUnitStore.type === 'unstable-cache') {\n                throw Object.defineProperty(new Error(`Route ${store.route} used \"${expression}\" inside a function cached with \"unstable_cache(...)\". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E259\",\n                    enumerable: false,\n                    configurable: true\n                });\n            } else if (workUnitStore.phase === 'after') {\n                throw Object.defineProperty(new Error(`Route ${store.route} used \"${expression}\" inside \\`after\\`. The enabled status of draftMode can be read inside \\`after\\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E348\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n        }\n        if (store.dynamicShouldError) {\n            throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${store.route} with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`${expression}\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`), \"__NEXT_ERROR_CODE\", {\n                value: \"E553\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (workUnitStore) {\n            if (workUnitStore.type === 'prerender') {\n                // dynamicIO Prerender\n                const error = Object.defineProperty(new Error(`Route ${store.route} used ${expression} without first calling \\`await connection()\\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E126\",\n                    enumerable: false,\n                    configurable: true\n                });\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(store.route, expression, error, workUnitStore);\n            } else if (workUnitStore.type === 'prerender-ppr') {\n                // PPR Prerender\n                (0, _dynamicrendering.postponeWithTracking)(store.route, expression, workUnitStore.dynamicTracking);\n            } else if (workUnitStore.type === 'prerender-legacy') {\n                // legacy Prerender\n                workUnitStore.revalidate = 0;\n                const err = Object.defineProperty(new _hooksservercontext.DynamicServerError(`Route ${store.route} couldn't be rendered statically because it used \\`${expression}\\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E558\",\n                    enumerable: false,\n                    configurable: true\n                });\n                store.dynamicUsageDescription = expression;\n                store.dynamicUsageStack = err.stack;\n                throw err;\n            } else if ( true && workUnitStore && workUnitStore.type === 'request') {\n                workUnitStore.usedDynamic = true;\n            }\n        }\n    }\n}\n\n//# sourceMappingURL=draft-mode.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QvZHJhZnQtbW9kZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLDZDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGLHNDQUFzQyxtQkFBTyxDQUFDLCtJQUFnRDtBQUM5RixrQ0FBa0MsbUJBQU8sQ0FBQyxxSUFBMkM7QUFDckYsMEJBQTBCLG1CQUFPLENBQUMsNEhBQWlDO0FBQ25FLGtEQUFrRCxtQkFBTyxDQUFDLGdLQUFtRDtBQUM3RyxpQ0FBaUMsbUJBQU8sQ0FBQyxzSkFBbUQ7QUFDNUYsNEJBQTRCLG1CQUFPLENBQUMsNElBQThDO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLEtBQXNDO0FBQ3REO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXNDO0FBQzlDO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxNQUFNO0FBQzNDLDhDQUE4QyxPQUFPLE9BQU8sV0FBVztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGFBQWEsUUFBUSxXQUFXO0FBQy9GO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2QsK0RBQStELGFBQWEsUUFBUSxXQUFXO0FBQy9GO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2QsK0RBQStELGFBQWEsUUFBUSxXQUFXO0FBQy9GO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxvR0FBb0csYUFBYSwrRUFBK0UsV0FBVztBQUMzTTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsYUFBYSxPQUFPLFlBQVk7QUFDdkc7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLHNHQUFzRyxhQUFhLG9EQUFvRCxXQUFXO0FBQ2xMO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxjQUFjLFNBQVMsS0FBc0M7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXHNlcnZlclxccmVxdWVzdFxcZHJhZnQtbW9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImRyYWZ0TW9kZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZHJhZnRNb2RlO1xuICAgIH1cbn0pO1xuY29uc3QgX3dvcmt1bml0YXN5bmNzdG9yYWdlZXh0ZXJuYWwgPSByZXF1aXJlKFwiLi4vYXBwLXJlbmRlci93b3JrLXVuaXQtYXN5bmMtc3RvcmFnZS5leHRlcm5hbFwiKTtcbmNvbnN0IF93b3JrYXN5bmNzdG9yYWdlZXh0ZXJuYWwgPSByZXF1aXJlKFwiLi4vYXBwLXJlbmRlci93b3JrLWFzeW5jLXN0b3JhZ2UuZXh0ZXJuYWxcIik7XG5jb25zdCBfZHluYW1pY3JlbmRlcmluZyA9IHJlcXVpcmUoXCIuLi9hcHAtcmVuZGVyL2R5bmFtaWMtcmVuZGVyaW5nXCIpO1xuY29uc3QgX2NyZWF0ZWRlZHVwZWRieWNhbGxzaXRlc2VydmVyZXJyb3Jsb2dnZXIgPSByZXF1aXJlKFwiLi4vY3JlYXRlLWRlZHVwZWQtYnktY2FsbHNpdGUtc2VydmVyLWVycm9yLWxvZ2dlclwiKTtcbmNvbnN0IF9zdGF0aWNnZW5lcmF0aW9uYmFpbG91dCA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tcG9uZW50cy9zdGF0aWMtZ2VuZXJhdGlvbi1iYWlsb3V0XCIpO1xuY29uc3QgX2hvb2tzc2VydmVyY29udGV4dCA9IHJlcXVpcmUoXCIuLi8uLi9jbGllbnQvY29tcG9uZW50cy9ob29rcy1zZXJ2ZXItY29udGV4dFwiKTtcbmZ1bmN0aW9uIGRyYWZ0TW9kZSgpIHtcbiAgICBjb25zdCBjYWxsaW5nRXhwcmVzc2lvbiA9ICdkcmFmdE1vZGUnO1xuICAgIGNvbnN0IHdvcmtTdG9yZSA9IF93b3JrYXN5bmNzdG9yYWdlZXh0ZXJuYWwud29ya0FzeW5jU3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgIGNvbnN0IHdvcmtVbml0U3RvcmUgPSBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbC53b3JrVW5pdEFzeW5jU3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgIGlmICghd29ya1N0b3JlIHx8ICF3b3JrVW5pdFN0b3JlKSB7XG4gICAgICAgICgwLCBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbC50aHJvd0Zvck1pc3NpbmdSZXF1ZXN0U3RvcmUpKGNhbGxpbmdFeHByZXNzaW9uKTtcbiAgICB9XG4gICAgc3dpdGNoKHdvcmtVbml0U3RvcmUudHlwZSl7XG4gICAgICAgIGNhc2UgJ3JlcXVlc3QnOlxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yR2V0Q2FjaGVkRXhvdGljRHJhZnRNb2RlKHdvcmtVbml0U3RvcmUuZHJhZnRNb2RlLCB3b3JrU3RvcmUpO1xuICAgICAgICBjYXNlICdjYWNoZSc6XG4gICAgICAgIGNhc2UgJ3Vuc3RhYmxlLWNhY2hlJzpcbiAgICAgICAgICAgIC8vIEluc2lkZSBvZiBgXCJ1c2UgY2FjaGVcImAgb3IgYHVuc3RhYmxlX2NhY2hlYCwgZHJhZnQgbW9kZSBpcyBhdmFpbGFibGUgaWZcbiAgICAgICAgICAgIC8vIHRoZSBvdXRtb3N0IHdvcmsgdW5pdCBzdG9yZSBpcyBhIHJlcXVlc3Qgc3RvcmUsIGFuZCBpZiBkcmFmdCBtb2RlIGlzXG4gICAgICAgICAgICAvLyBlbmFibGVkLlxuICAgICAgICAgICAgY29uc3QgZHJhZnRNb2RlUHJvdmlkZXIgPSAoMCwgX3dvcmt1bml0YXN5bmNzdG9yYWdlZXh0ZXJuYWwuZ2V0RHJhZnRNb2RlUHJvdmlkZXJGb3JDYWNoZVNjb3BlKSh3b3JrU3RvcmUsIHdvcmtVbml0U3RvcmUpO1xuICAgICAgICAgICAgaWYgKGRyYWZ0TW9kZVByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yR2V0Q2FjaGVkRXhvdGljRHJhZnRNb2RlKGRyYWZ0TW9kZVByb3ZpZGVyLCB3b3JrU3RvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGZhbGwgdGhyb3VnaCB0byBwcm92aWRpbmcgYW4gZW1wdHkgZHJhZnQgbW9kZS5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWZhbGx0aHJvdWdoXG4gICAgICAgIGNhc2UgJ3ByZXJlbmRlcic6XG4gICAgICAgIGNhc2UgJ3ByZXJlbmRlci1wcHInOlxuICAgICAgICBjYXNlICdwcmVyZW5kZXItbGVnYWN5JzpcbiAgICAgICAgICAgIC8vIFJldHVybiBlbXB0eSBkcmFmdCBtb2RlXG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgISh3b3JrU3RvcmUgPT0gbnVsbCA/IHZvaWQgMCA6IHdvcmtTdG9yZS5pc1ByZWZldGNoUmVxdWVzdCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHdvcmtTdG9yZSA9PSBudWxsID8gdm9pZCAwIDogd29ya1N0b3JlLnJvdXRlO1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVFeG90aWNEcmFmdE1vZGVXaXRoRGV2V2FybmluZ3MobnVsbCwgcm91dGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlRXhvdGljRHJhZnRNb2RlKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHdvcmtVbml0U3RvcmU7XG4gICAgICAgICAgICByZXR1cm4gX2V4aGF1c3RpdmVDaGVjaztcbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVPckdldENhY2hlZEV4b3RpY0RyYWZ0TW9kZShkcmFmdE1vZGVQcm92aWRlciwgd29ya1N0b3JlKSB7XG4gICAgY29uc3QgY2FjaGVkRHJhZnRNb2RlID0gQ2FjaGVkRHJhZnRNb2Rlcy5nZXQoZHJhZnRNb2RlKTtcbiAgICBpZiAoY2FjaGVkRHJhZnRNb2RlKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWREcmFmdE1vZGU7XG4gICAgfVxuICAgIGxldCBwcm9taXNlO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiAhKHdvcmtTdG9yZSA9PSBudWxsID8gdm9pZCAwIDogd29ya1N0b3JlLmlzUHJlZmV0Y2hSZXF1ZXN0KSkge1xuICAgICAgICBjb25zdCByb3V0ZSA9IHdvcmtTdG9yZSA9PSBudWxsID8gdm9pZCAwIDogd29ya1N0b3JlLnJvdXRlO1xuICAgICAgICBwcm9taXNlID0gY3JlYXRlRXhvdGljRHJhZnRNb2RlV2l0aERldldhcm5pbmdzKGRyYWZ0TW9kZVByb3ZpZGVyLCByb3V0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZSA9IGNyZWF0ZUV4b3RpY0RyYWZ0TW9kZShkcmFmdE1vZGVQcm92aWRlcik7XG4gICAgfVxuICAgIENhY2hlZERyYWZ0TW9kZXMuc2V0KGRyYWZ0TW9kZVByb3ZpZGVyLCBwcm9taXNlKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmNvbnN0IENhY2hlZERyYWZ0TW9kZXMgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gY3JlYXRlRXhvdGljRHJhZnRNb2RlKHVuZGVybHlpbmdQcm92aWRlcikge1xuICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IERyYWZ0TW9kZSh1bmRlcmx5aW5nUHJvdmlkZXIpO1xuICAgIGNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoaW5zdGFuY2UpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9taXNlLCAnaXNFbmFibGVkJywge1xuICAgICAgICBnZXQgKCkge1xuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmlzRW5hYmxlZDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb21pc2UsICdpc0VuYWJsZWQnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBwcm9taXNlLmVuYWJsZSA9IGluc3RhbmNlLmVuYWJsZS5iaW5kKGluc3RhbmNlKTtcbiAgICBwcm9taXNlLmRpc2FibGUgPSBpbnN0YW5jZS5kaXNhYmxlLmJpbmQoaW5zdGFuY2UpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gY3JlYXRlRXhvdGljRHJhZnRNb2RlV2l0aERldldhcm5pbmdzKHVuZGVybHlpbmdQcm92aWRlciwgcm91dGUpIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBEcmFmdE1vZGUodW5kZXJseWluZ1Byb3ZpZGVyKTtcbiAgICBjb25zdCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGluc3RhbmNlKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvbWlzZSwgJ2lzRW5hYmxlZCcsIHtcbiAgICAgICAgZ2V0ICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSAnYGRyYWZ0TW9kZSgpLmlzRW5hYmxlZGAnO1xuICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5pc0VuYWJsZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9taXNlLCAnaXNFbmFibGVkJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBuZXdWYWx1ZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb21pc2UsICdlbmFibGUnLCB7XG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICBjb25zdCBleHByZXNzaW9uID0gJ2BkcmFmdE1vZGUoKS5lbmFibGUoKWAnO1xuICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5lbmFibGUuYXBwbHkoaW5zdGFuY2UsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvbWlzZSwgJ2Rpc2FibGUnLCB7XG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICBjb25zdCBleHByZXNzaW9uID0gJ2BkcmFmdE1vZGUoKS5kaXNhYmxlKClgJztcbiAgICAgICAgICAgIHN5bmNJT0Rldihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UuZGlzYWJsZS5hcHBseShpbnN0YW5jZSwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuY2xhc3MgRHJhZnRNb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcil7XG4gICAgICAgIHRoaXMuX3Byb3ZpZGVyID0gcHJvdmlkZXI7XG4gICAgfVxuICAgIGdldCBpc0VuYWJsZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9wcm92aWRlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3ZpZGVyLmlzRW5hYmxlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVuYWJsZSgpIHtcbiAgICAgICAgLy8gV2UgaGF2ZSBhIHN0b3JlIHdlIHdhbnQgdG8gdHJhY2sgZHluYW1pYyBkYXRhIGFjY2VzcyB0byBlbnN1cmUgd2VcbiAgICAgICAgLy8gZG9uJ3Qgc3RhdGljYWxseSBnZW5lcmF0ZSByb3V0ZXMgdGhhdCBtYW5pcHVsYXRlIGRyYWZ0IG1vZGUuXG4gICAgICAgIHRyYWNrRHluYW1pY0RyYWZ0TW9kZSgnZHJhZnRNb2RlKCkuZW5hYmxlKCknKTtcbiAgICAgICAgaWYgKHRoaXMuX3Byb3ZpZGVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9wcm92aWRlci5lbmFibGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNhYmxlKCkge1xuICAgICAgICB0cmFja0R5bmFtaWNEcmFmdE1vZGUoJ2RyYWZ0TW9kZSgpLmRpc2FibGUoKScpO1xuICAgICAgICBpZiAodGhpcy5fcHJvdmlkZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb3ZpZGVyLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHN5bmNJT0Rldihyb3V0ZSwgZXhwcmVzc2lvbikge1xuICAgIGNvbnN0IHdvcmtVbml0U3RvcmUgPSBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbC53b3JrVW5pdEFzeW5jU3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgIGlmICh3b3JrVW5pdFN0b3JlICYmIHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3JlcXVlc3QnICYmIHdvcmtVbml0U3RvcmUucHJlcmVuZGVyUGhhc2UgPT09IHRydWUpIHtcbiAgICAgICAgLy8gV2hlbiB3ZSdyZSByZW5kZXJpbmcgZHluYW1pY2FsbHkgaW4gZGV2IHdlIG5lZWQgdG8gYWR2YW5jZSBvdXQgb2YgdGhlXG4gICAgICAgIC8vIFByZXJlbmRlciBlbnZpcm9ubWVudCB3aGVuIHdlIHJlYWQgUmVxdWVzdCBkYXRhIHN5bmNocm9ub3VzbHlcbiAgICAgICAgY29uc3QgcmVxdWVzdFN0b3JlID0gd29ya1VuaXRTdG9yZTtcbiAgICAgICAgKDAsIF9keW5hbWljcmVuZGVyaW5nLnRyYWNrU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzc0luRGV2KShyZXF1ZXN0U3RvcmUpO1xuICAgIH1cbiAgICAvLyBJbiBhbGwgY2FzZXMgd2Ugd2FybiBub3JtYWxseVxuICAgIHdhcm5Gb3JTeW5jQWNjZXNzKHJvdXRlLCBleHByZXNzaW9uKTtcbn1cbmNvbnN0IHdhcm5Gb3JTeW5jQWNjZXNzID0gKDAsIF9jcmVhdGVkZWR1cGVkYnljYWxsc2l0ZXNlcnZlcmVycm9ybG9nZ2VyLmNyZWF0ZURlZHVwZWRCeUNhbGxzaXRlU2VydmVyRXJyb3JMb2dnZXJEZXYpKGNyZWF0ZURyYWZ0TW9kZUFjY2Vzc0Vycm9yKTtcbmZ1bmN0aW9uIGNyZWF0ZURyYWZ0TW9kZUFjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKSB7XG4gICAgY29uc3QgcHJlZml4ID0gcm91dGUgPyBgUm91dGUgXCIke3JvdXRlfVwiIGAgOiAnVGhpcyByb3V0ZSAnO1xuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGAke3ByZWZpeH11c2VkICR7ZXhwcmVzc2lvbn0uIGAgKyBgXFxgZHJhZnRNb2RlKClcXGAgc2hvdWxkIGJlIGF3YWl0ZWQgYmVmb3JlIHVzaW5nIGl0cyB2YWx1ZS4gYCArIGBMZWFybiBtb3JlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9zeW5jLWR5bmFtaWMtYXBpc2ApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgdmFsdWU6IFwiRTM3N1wiLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG59XG5mdW5jdGlvbiB0cmFja0R5bmFtaWNEcmFmdE1vZGUoZXhwcmVzc2lvbikge1xuICAgIGNvbnN0IHN0b3JlID0gX3dvcmthc3luY3N0b3JhZ2VleHRlcm5hbC53b3JrQXN5bmNTdG9yYWdlLmdldFN0b3JlKCk7XG4gICAgY29uc3Qgd29ya1VuaXRTdG9yZSA9IF93b3JrdW5pdGFzeW5jc3RvcmFnZWV4dGVybmFsLndvcmtVbml0QXN5bmNTdG9yYWdlLmdldFN0b3JlKCk7XG4gICAgaWYgKHN0b3JlKSB7XG4gICAgICAgIC8vIFdlIGhhdmUgYSBzdG9yZSB3ZSB3YW50IHRvIHRyYWNrIGR5bmFtaWMgZGF0YSBhY2Nlc3MgdG8gZW5zdXJlIHdlXG4gICAgICAgIC8vIGRvbid0IHN0YXRpY2FsbHkgZ2VuZXJhdGUgcm91dGVzIHRoYXQgbWFuaXB1bGF0ZSBkcmFmdCBtb2RlLlxuICAgICAgICBpZiAod29ya1VuaXRTdG9yZSkge1xuICAgICAgICAgICAgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ2NhY2hlJykge1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYFJvdXRlICR7c3RvcmUucm91dGV9IHVzZWQgXCIke2V4cHJlc3Npb259XCIgaW5zaWRlIFwidXNlIGNhY2hlXCIuIFRoZSBlbmFibGVkIHN0YXR1cyBvZiBkcmFmdE1vZGUgY2FuIGJlIHJlYWQgaW4gY2FjaGVzIGJ1dCB5b3UgbXVzdCBub3QgZW5hYmxlIG9yIGRpc2FibGUgZHJhZnRNb2RlIGluc2lkZSBhIGNhY2hlLiBTZWUgbW9yZSBpbmZvIGhlcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL25leHQtcmVxdWVzdC1pbi11c2UtY2FjaGVgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUyNDZcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICd1bnN0YWJsZS1jYWNoZScpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBSb3V0ZSAke3N0b3JlLnJvdXRlfSB1c2VkIFwiJHtleHByZXNzaW9ufVwiIGluc2lkZSBhIGZ1bmN0aW9uIGNhY2hlZCB3aXRoIFwidW5zdGFibGVfY2FjaGUoLi4uKVwiLiBUaGUgZW5hYmxlZCBzdGF0dXMgb2YgZHJhZnRNb2RlIGNhbiBiZSByZWFkIGluIGNhY2hlcyBidXQgeW91IG11c3Qgbm90IGVuYWJsZSBvciBkaXNhYmxlIGRyYWZ0TW9kZSBpbnNpZGUgYSBjYWNoZS4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9hcHAvYXBpLXJlZmVyZW5jZS9mdW5jdGlvbnMvdW5zdGFibGVfY2FjaGVgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUyNTlcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3b3JrVW5pdFN0b3JlLnBoYXNlID09PSAnYWZ0ZXInKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgUm91dGUgJHtzdG9yZS5yb3V0ZX0gdXNlZCBcIiR7ZXhwcmVzc2lvbn1cIiBpbnNpZGUgXFxgYWZ0ZXJcXGAuIFRoZSBlbmFibGVkIHN0YXR1cyBvZiBkcmFmdE1vZGUgY2FuIGJlIHJlYWQgaW5zaWRlIFxcYGFmdGVyXFxgIGJ1dCB5b3UgY2Fubm90IGVuYWJsZSBvciBkaXNhYmxlIGRyYWZ0TW9kZS4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9hcHAvYXBpLXJlZmVyZW5jZS9mdW5jdGlvbnMvYWZ0ZXJgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUzNDhcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdG9yZS5keW5hbWljU2hvdWxkRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgX3N0YXRpY2dlbmVyYXRpb25iYWlsb3V0LlN0YXRpY0dlbkJhaWxvdXRFcnJvcihgUm91dGUgJHtzdG9yZS5yb3V0ZX0gd2l0aCBcXGBkeW5hbWljID0gXCJlcnJvclwiXFxgIGNvdWxkbid0IGJlIHJlbmRlcmVkIHN0YXRpY2FsbHkgYmVjYXVzZSBpdCB1c2VkIFxcYCR7ZXhwcmVzc2lvbn1cXGAuIFNlZSBtb3JlIGluZm8gaGVyZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2J1aWxkaW5nLXlvdXItYXBwbGljYXRpb24vcmVuZGVyaW5nL3N0YXRpYy1hbmQtZHluYW1pYyNkeW5hbWljLXJlbmRlcmluZ2ApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNTUzXCIsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod29ya1VuaXRTdG9yZSkge1xuICAgICAgICAgICAgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3ByZXJlbmRlcicpIHtcbiAgICAgICAgICAgICAgICAvLyBkeW5hbWljSU8gUHJlcmVuZGVyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBSb3V0ZSAke3N0b3JlLnJvdXRlfSB1c2VkICR7ZXhwcmVzc2lvbn0gd2l0aG91dCBmaXJzdCBjYWxsaW5nIFxcYGF3YWl0IGNvbm5lY3Rpb24oKVxcYC4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9uZXh0LXByZXJlbmRlci1zeW5jLWhlYWRlcnNgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUxMjZcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy5hYm9ydEFuZFRocm93T25TeW5jaHJvbm91c1JlcXVlc3REYXRhQWNjZXNzKShzdG9yZS5yb3V0ZSwgZXhwcmVzc2lvbiwgZXJyb3IsIHdvcmtVbml0U3RvcmUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdwcmVyZW5kZXItcHByJykge1xuICAgICAgICAgICAgICAgIC8vIFBQUiBQcmVyZW5kZXJcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcucG9zdHBvbmVXaXRoVHJhY2tpbmcpKHN0b3JlLnJvdXRlLCBleHByZXNzaW9uLCB3b3JrVW5pdFN0b3JlLmR5bmFtaWNUcmFja2luZyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3ByZXJlbmRlci1sZWdhY3knKSB7XG4gICAgICAgICAgICAgICAgLy8gbGVnYWN5IFByZXJlbmRlclxuICAgICAgICAgICAgICAgIHdvcmtVbml0U3RvcmUucmV2YWxpZGF0ZSA9IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBfaG9va3NzZXJ2ZXJjb250ZXh0LkR5bmFtaWNTZXJ2ZXJFcnJvcihgUm91dGUgJHtzdG9yZS5yb3V0ZX0gY291bGRuJ3QgYmUgcmVuZGVyZWQgc3RhdGljYWxseSBiZWNhdXNlIGl0IHVzZWQgXFxgJHtleHByZXNzaW9ufVxcYC4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9keW5hbWljLXNlcnZlci1lcnJvcmApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTU1OFwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RvcmUuZHluYW1pY1VzYWdlRGVzY3JpcHRpb24gPSBleHByZXNzaW9uO1xuICAgICAgICAgICAgICAgIHN0b3JlLmR5bmFtaWNVc2FnZVN0YWNrID0gZXJyLnN0YWNrO1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgd29ya1VuaXRTdG9yZSAmJiB3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdyZXF1ZXN0Jykge1xuICAgICAgICAgICAgICAgIHdvcmtVbml0U3RvcmUudXNlZER5bmFtaWMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kcmFmdC1tb2RlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/request/draft-mode.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/request/headers.js":
/*!**********************************************************!*\
  !*** ./node_modules/next/dist/server/request/headers.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"headers\", ({\n    enumerable: true,\n    get: function() {\n        return headers;\n    }\n}));\nconst _headers = __webpack_require__(/*! ../web/spec-extension/adapters/headers */ \"(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/headers.js\");\nconst _workasyncstorageexternal = __webpack_require__(/*! ../app-render/work-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-async-storage.external.js\");\nconst _workunitasyncstorageexternal = __webpack_require__(/*! ../app-render/work-unit-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage.external.js\");\nconst _dynamicrendering = __webpack_require__(/*! ../app-render/dynamic-rendering */ \"(app-pages-browser)/./node_modules/next/dist/server/app-render/dynamic-rendering.js\");\nconst _staticgenerationbailout = __webpack_require__(/*! ../../client/components/static-generation-bailout */ \"(app-pages-browser)/./node_modules/next/dist/client/components/static-generation-bailout.js\");\nconst _dynamicrenderingutils = __webpack_require__(/*! ../dynamic-rendering-utils */ \"(app-pages-browser)/./node_modules/next/dist/server/dynamic-rendering-utils.js\");\nconst _creatededupedbycallsiteservererrorlogger = __webpack_require__(/*! ../create-deduped-by-callsite-server-error-logger */ \"(app-pages-browser)/./node_modules/next/dist/server/create-deduped-by-callsite-server-error-logger.js\");\nconst _scheduler = __webpack_require__(/*! ../../lib/scheduler */ \"(app-pages-browser)/./node_modules/next/dist/lib/scheduler.js\");\nconst _utils = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./node_modules/next/dist/server/request/utils.js\");\nfunction headers() {\n    const workStore = _workasyncstorageexternal.workAsyncStorage.getStore();\n    const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n    if (workStore) {\n        if (workUnitStore && workUnitStore.phase === 'after' && !(0, _utils.isRequestAPICallableInsideAfter)()) {\n            throw Object.defineProperty(new Error(`Route ${workStore.route} used \"headers\" inside \"after(...)\". This is not supported. If you need this data inside an \"after\" callback, use \"headers\" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`), \"__NEXT_ERROR_CODE\", {\n                value: \"E367\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (workStore.forceStatic) {\n            // When using forceStatic we override all other logic and always just return an empty\n            // headers object without tracking\n            const underlyingHeaders = _headers.HeadersAdapter.seal(new Headers({}));\n            return makeUntrackedExoticHeaders(underlyingHeaders);\n        }\n        if (workUnitStore) {\n            if (workUnitStore.type === 'cache') {\n                throw Object.defineProperty(new Error(`Route ${workStore.route} used \"headers\" inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \"headers\" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E304\",\n                    enumerable: false,\n                    configurable: true\n                });\n            } else if (workUnitStore.type === 'unstable-cache') {\n                throw Object.defineProperty(new Error(`Route ${workStore.route} used \"headers\" inside a function cached with \"unstable_cache(...)\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \"headers\" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E127\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n        }\n        if (workStore.dynamicShouldError) {\n            throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${workStore.route} with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`headers\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`), \"__NEXT_ERROR_CODE\", {\n                value: \"E525\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (workUnitStore) {\n            if (workUnitStore.type === 'prerender') {\n                // dynamicIO Prerender\n                // We don't track dynamic access here because access will be tracked when you access\n                // one of the properties of the headers object.\n                return makeDynamicallyTrackedExoticHeaders(workStore.route, workUnitStore);\n            } else if (workUnitStore.type === 'prerender-ppr') {\n                // PPR Prerender (no dynamicIO)\n                // We are prerendering with PPR. We need track dynamic access here eagerly\n                // to keep continuity with how headers has worked in PPR without dynamicIO.\n                // TODO consider switching the semantic to throw on property access instead\n                (0, _dynamicrendering.postponeWithTracking)(workStore.route, 'headers', workUnitStore.dynamicTracking);\n            } else if (workUnitStore.type === 'prerender-legacy') {\n                // Legacy Prerender\n                // We are in a legacy static generation mode while prerendering\n                // We track dynamic access here so we don't need to wrap the headers in\n                // individual property access tracking.\n                (0, _dynamicrendering.throwToInterruptStaticGeneration)('headers', workStore, workUnitStore);\n            }\n        }\n        // We fall through to the dynamic context below but we still track dynamic access\n        // because in dev we can still error for things like using headers inside a cache context\n        (0, _dynamicrendering.trackDynamicDataInDynamicRender)(workStore, workUnitStore);\n    }\n    const requestStore = (0, _workunitasyncstorageexternal.getExpectedRequestStore)('headers');\n    if ( true && !(workStore == null ? void 0 : workStore.isPrefetchRequest)) {\n        return makeUntrackedExoticHeadersWithDevWarnings(requestStore.headers, workStore == null ? void 0 : workStore.route);\n    } else {\n        return makeUntrackedExoticHeaders(requestStore.headers);\n    }\n}\nconst CachedHeaders = new WeakMap();\nfunction makeDynamicallyTrackedExoticHeaders(route, prerenderStore) {\n    const cachedHeaders = CachedHeaders.get(prerenderStore);\n    if (cachedHeaders) {\n        return cachedHeaders;\n    }\n    const promise = (0, _dynamicrenderingutils.makeHangingPromise)(prerenderStore.renderSignal, '`headers()`');\n    CachedHeaders.set(prerenderStore, promise);\n    Object.defineProperties(promise, {\n        append: {\n            value: function append() {\n                const expression = `\\`headers().append(${describeNameArg(arguments[0])}, ...)\\``;\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        delete: {\n            value: function _delete() {\n                const expression = `\\`headers().delete(${describeNameArg(arguments[0])})\\``;\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        get: {\n            value: function get() {\n                const expression = `\\`headers().get(${describeNameArg(arguments[0])})\\``;\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        has: {\n            value: function has() {\n                const expression = `\\`headers().has(${describeNameArg(arguments[0])})\\``;\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        set: {\n            value: function set() {\n                const expression = `\\`headers().set(${describeNameArg(arguments[0])}, ...)\\``;\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        getSetCookie: {\n            value: function getSetCookie() {\n                const expression = '`headers().getSetCookie()`';\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        forEach: {\n            value: function forEach() {\n                const expression = '`headers().forEach(...)`';\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        keys: {\n            value: function keys() {\n                const expression = '`headers().keys()`';\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        values: {\n            value: function values() {\n                const expression = '`headers().values()`';\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        entries: {\n            value: function entries() {\n                const expression = '`headers().entries()`';\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        },\n        [Symbol.iterator]: {\n            value: function() {\n                const expression = '`headers()[Symbol.iterator]()`';\n                const error = createHeadersAccessError(route, expression);\n                (0, _dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route, expression, error, prerenderStore);\n            }\n        }\n    });\n    return promise;\n}\nfunction makeUntrackedExoticHeaders(underlyingHeaders) {\n    const cachedHeaders = CachedHeaders.get(underlyingHeaders);\n    if (cachedHeaders) {\n        return cachedHeaders;\n    }\n    const promise = Promise.resolve(underlyingHeaders);\n    CachedHeaders.set(underlyingHeaders, promise);\n    Object.defineProperties(promise, {\n        append: {\n            value: underlyingHeaders.append.bind(underlyingHeaders)\n        },\n        delete: {\n            value: underlyingHeaders.delete.bind(underlyingHeaders)\n        },\n        get: {\n            value: underlyingHeaders.get.bind(underlyingHeaders)\n        },\n        has: {\n            value: underlyingHeaders.has.bind(underlyingHeaders)\n        },\n        set: {\n            value: underlyingHeaders.set.bind(underlyingHeaders)\n        },\n        getSetCookie: {\n            value: underlyingHeaders.getSetCookie.bind(underlyingHeaders)\n        },\n        forEach: {\n            value: underlyingHeaders.forEach.bind(underlyingHeaders)\n        },\n        keys: {\n            value: underlyingHeaders.keys.bind(underlyingHeaders)\n        },\n        values: {\n            value: underlyingHeaders.values.bind(underlyingHeaders)\n        },\n        entries: {\n            value: underlyingHeaders.entries.bind(underlyingHeaders)\n        },\n        [Symbol.iterator]: {\n            value: underlyingHeaders[Symbol.iterator].bind(underlyingHeaders)\n        }\n    });\n    return promise;\n}\nfunction makeUntrackedExoticHeadersWithDevWarnings(underlyingHeaders, route) {\n    const cachedHeaders = CachedHeaders.get(underlyingHeaders);\n    if (cachedHeaders) {\n        return cachedHeaders;\n    }\n    const promise = new Promise((resolve)=>(0, _scheduler.scheduleImmediate)(()=>resolve(underlyingHeaders)));\n    CachedHeaders.set(underlyingHeaders, promise);\n    Object.defineProperties(promise, {\n        append: {\n            value: function append() {\n                const expression = `\\`headers().append(${describeNameArg(arguments[0])}, ...)\\``;\n                syncIODev(route, expression);\n                return underlyingHeaders.append.apply(underlyingHeaders, arguments);\n            }\n        },\n        delete: {\n            value: function _delete() {\n                const expression = `\\`headers().delete(${describeNameArg(arguments[0])})\\``;\n                syncIODev(route, expression);\n                return underlyingHeaders.delete.apply(underlyingHeaders, arguments);\n            }\n        },\n        get: {\n            value: function get() {\n                const expression = `\\`headers().get(${describeNameArg(arguments[0])})\\``;\n                syncIODev(route, expression);\n                return underlyingHeaders.get.apply(underlyingHeaders, arguments);\n            }\n        },\n        has: {\n            value: function has() {\n                const expression = `\\`headers().has(${describeNameArg(arguments[0])})\\``;\n                syncIODev(route, expression);\n                return underlyingHeaders.has.apply(underlyingHeaders, arguments);\n            }\n        },\n        set: {\n            value: function set() {\n                const expression = `\\`headers().set(${describeNameArg(arguments[0])}, ...)\\``;\n                syncIODev(route, expression);\n                return underlyingHeaders.set.apply(underlyingHeaders, arguments);\n            }\n        },\n        getSetCookie: {\n            value: function getSetCookie() {\n                const expression = '`headers().getSetCookie()`';\n                syncIODev(route, expression);\n                return underlyingHeaders.getSetCookie.apply(underlyingHeaders, arguments);\n            }\n        },\n        forEach: {\n            value: function forEach() {\n                const expression = '`headers().forEach(...)`';\n                syncIODev(route, expression);\n                return underlyingHeaders.forEach.apply(underlyingHeaders, arguments);\n            }\n        },\n        keys: {\n            value: function keys() {\n                const expression = '`headers().keys()`';\n                syncIODev(route, expression);\n                return underlyingHeaders.keys.apply(underlyingHeaders, arguments);\n            }\n        },\n        values: {\n            value: function values() {\n                const expression = '`headers().values()`';\n                syncIODev(route, expression);\n                return underlyingHeaders.values.apply(underlyingHeaders, arguments);\n            }\n        },\n        entries: {\n            value: function entries() {\n                const expression = '`headers().entries()`';\n                syncIODev(route, expression);\n                return underlyingHeaders.entries.apply(underlyingHeaders, arguments);\n            }\n        },\n        [Symbol.iterator]: {\n            value: function() {\n                const expression = '`...headers()` or similar iteration';\n                syncIODev(route, expression);\n                return underlyingHeaders[Symbol.iterator].apply(underlyingHeaders, arguments);\n            }\n        }\n    });\n    return promise;\n}\nfunction describeNameArg(arg) {\n    return typeof arg === 'string' ? `'${arg}'` : '...';\n}\nfunction syncIODev(route, expression) {\n    const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();\n    if (workUnitStore && workUnitStore.type === 'request' && workUnitStore.prerenderPhase === true) {\n        // When we're rendering dynamically in dev we need to advance out of the\n        // Prerender environment when we read Request data synchronously\n        const requestStore = workUnitStore;\n        (0, _dynamicrendering.trackSynchronousRequestDataAccessInDev)(requestStore);\n    }\n    // In all cases we warn normally\n    warnForSyncAccess(route, expression);\n}\nconst warnForSyncAccess = (0, _creatededupedbycallsiteservererrorlogger.createDedupedByCallsiteServerErrorLoggerDev)(createHeadersAccessError);\nfunction createHeadersAccessError(route, expression) {\n    const prefix = route ? `Route \"${route}\" ` : 'This route ';\n    return Object.defineProperty(new Error(`${prefix}used ${expression}. ` + `\\`headers()\\` should be awaited before using its value. ` + `Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`), \"__NEXT_ERROR_CODE\", {\n        value: \"E277\",\n        enumerable: false,\n        configurable: true\n    });\n}\n\n//# sourceMappingURL=headers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QvaGVhZGVycy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLDJDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGLGlCQUFpQixtQkFBTyxDQUFDLDBJQUF3QztBQUNqRSxrQ0FBa0MsbUJBQU8sQ0FBQyxxSUFBMkM7QUFDckYsc0NBQXNDLG1CQUFPLENBQUMsK0lBQWdEO0FBQzlGLDBCQUEwQixtQkFBTyxDQUFDLDRIQUFpQztBQUNuRSxpQ0FBaUMsbUJBQU8sQ0FBQyxzSkFBbUQ7QUFDNUYsK0JBQStCLG1CQUFPLENBQUMsa0hBQTRCO0FBQ25FLGtEQUFrRCxtQkFBTyxDQUFDLGdLQUFtRDtBQUM3RyxtQkFBbUIsbUJBQU8sQ0FBQywwRkFBcUI7QUFDaEQsZUFBZSxtQkFBTyxDQUFDLHFGQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsaUJBQWlCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxpQkFBaUI7QUFDaEY7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZCwrREFBK0QsaUJBQWlCO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxvR0FBb0csaUJBQWlCO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsS0FBc0M7QUFDOUM7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCw4QkFBOEI7QUFDdkY7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx5REFBeUQsOEJBQThCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0RBQXNELDhCQUE4QjtBQUNwRjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNEQUFzRCw4QkFBOEI7QUFDcEY7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBc0QsOEJBQThCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELDhCQUE4QjtBQUN2RjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlEQUF5RCw4QkFBOEI7QUFDdkY7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBc0QsOEJBQThCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0RBQXNELDhCQUE4QjtBQUNwRjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNEQUFzRCw4QkFBOEI7QUFDcEY7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLElBQUk7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxNQUFNO0FBQzNDLDhDQUE4QyxPQUFPLE9BQU8sV0FBVztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxuZXh0XFxkaXN0XFxzZXJ2ZXJcXHJlcXVlc3RcXGhlYWRlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJoZWFkZXJzXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBoZWFkZXJzO1xuICAgIH1cbn0pO1xuY29uc3QgX2hlYWRlcnMgPSByZXF1aXJlKFwiLi4vd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL2hlYWRlcnNcIik7XG5jb25zdCBfd29ya2FzeW5jc3RvcmFnZWV4dGVybmFsID0gcmVxdWlyZShcIi4uL2FwcC1yZW5kZXIvd29yay1hc3luYy1zdG9yYWdlLmV4dGVybmFsXCIpO1xuY29uc3QgX3dvcmt1bml0YXN5bmNzdG9yYWdlZXh0ZXJuYWwgPSByZXF1aXJlKFwiLi4vYXBwLXJlbmRlci93b3JrLXVuaXQtYXN5bmMtc3RvcmFnZS5leHRlcm5hbFwiKTtcbmNvbnN0IF9keW5hbWljcmVuZGVyaW5nID0gcmVxdWlyZShcIi4uL2FwcC1yZW5kZXIvZHluYW1pYy1yZW5kZXJpbmdcIik7XG5jb25zdCBfc3RhdGljZ2VuZXJhdGlvbmJhaWxvdXQgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbXBvbmVudHMvc3RhdGljLWdlbmVyYXRpb24tYmFpbG91dFwiKTtcbmNvbnN0IF9keW5hbWljcmVuZGVyaW5ndXRpbHMgPSByZXF1aXJlKFwiLi4vZHluYW1pYy1yZW5kZXJpbmctdXRpbHNcIik7XG5jb25zdCBfY3JlYXRlZGVkdXBlZGJ5Y2FsbHNpdGVzZXJ2ZXJlcnJvcmxvZ2dlciA9IHJlcXVpcmUoXCIuLi9jcmVhdGUtZGVkdXBlZC1ieS1jYWxsc2l0ZS1zZXJ2ZXItZXJyb3ItbG9nZ2VyXCIpO1xuY29uc3QgX3NjaGVkdWxlciA9IHJlcXVpcmUoXCIuLi8uLi9saWIvc2NoZWR1bGVyXCIpO1xuY29uc3QgX3V0aWxzID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5mdW5jdGlvbiBoZWFkZXJzKCkge1xuICAgIGNvbnN0IHdvcmtTdG9yZSA9IF93b3JrYXN5bmNzdG9yYWdlZXh0ZXJuYWwud29ya0FzeW5jU3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgIGNvbnN0IHdvcmtVbml0U3RvcmUgPSBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbC53b3JrVW5pdEFzeW5jU3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgIGlmICh3b3JrU3RvcmUpIHtcbiAgICAgICAgaWYgKHdvcmtVbml0U3RvcmUgJiYgd29ya1VuaXRTdG9yZS5waGFzZSA9PT0gJ2FmdGVyJyAmJiAhKDAsIF91dGlscy5pc1JlcXVlc3RBUElDYWxsYWJsZUluc2lkZUFmdGVyKSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBSb3V0ZSAke3dvcmtTdG9yZS5yb3V0ZX0gdXNlZCBcImhlYWRlcnNcIiBpbnNpZGUgXCJhZnRlciguLi4pXCIuIFRoaXMgaXMgbm90IHN1cHBvcnRlZC4gSWYgeW91IG5lZWQgdGhpcyBkYXRhIGluc2lkZSBhbiBcImFmdGVyXCIgY2FsbGJhY2ssIHVzZSBcImhlYWRlcnNcIiBvdXRzaWRlIG9mIHRoZSBjYWxsYmFjay4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9jYW5hcnkvYXBwL2FwaS1yZWZlcmVuY2UvZnVuY3Rpb25zL2FmdGVyYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUzNjdcIixcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JrU3RvcmUuZm9yY2VTdGF0aWMpIHtcbiAgICAgICAgICAgIC8vIFdoZW4gdXNpbmcgZm9yY2VTdGF0aWMgd2Ugb3ZlcnJpZGUgYWxsIG90aGVyIGxvZ2ljIGFuZCBhbHdheXMganVzdCByZXR1cm4gYW4gZW1wdHlcbiAgICAgICAgICAgIC8vIGhlYWRlcnMgb2JqZWN0IHdpdGhvdXQgdHJhY2tpbmdcbiAgICAgICAgICAgIGNvbnN0IHVuZGVybHlpbmdIZWFkZXJzID0gX2hlYWRlcnMuSGVhZGVyc0FkYXB0ZXIuc2VhbChuZXcgSGVhZGVycyh7fSkpO1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VVbnRyYWNrZWRFeG90aWNIZWFkZXJzKHVuZGVybHlpbmdIZWFkZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod29ya1VuaXRTdG9yZSkge1xuICAgICAgICAgICAgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ2NhY2hlJykge1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYFJvdXRlICR7d29ya1N0b3JlLnJvdXRlfSB1c2VkIFwiaGVhZGVyc1wiIGluc2lkZSBcInVzZSBjYWNoZVwiLiBBY2Nlc3NpbmcgRHluYW1pYyBkYXRhIHNvdXJjZXMgaW5zaWRlIGEgY2FjaGUgc2NvcGUgaXMgbm90IHN1cHBvcnRlZC4gSWYgeW91IG5lZWQgdGhpcyBkYXRhIGluc2lkZSBhIGNhY2hlZCBmdW5jdGlvbiB1c2UgXCJoZWFkZXJzXCIgb3V0c2lkZSBvZiB0aGUgY2FjaGVkIGZ1bmN0aW9uIGFuZCBwYXNzIHRoZSByZXF1aXJlZCBkeW5hbWljIGRhdGEgaW4gYXMgYW4gYXJndW1lbnQuIFNlZSBtb3JlIGluZm8gaGVyZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvbWVzc2FnZXMvbmV4dC1yZXF1ZXN0LWluLXVzZS1jYWNoZWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTMwNFwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3Vuc3RhYmxlLWNhY2hlJykge1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYFJvdXRlICR7d29ya1N0b3JlLnJvdXRlfSB1c2VkIFwiaGVhZGVyc1wiIGluc2lkZSBhIGZ1bmN0aW9uIGNhY2hlZCB3aXRoIFwidW5zdGFibGVfY2FjaGUoLi4uKVwiLiBBY2Nlc3NpbmcgRHluYW1pYyBkYXRhIHNvdXJjZXMgaW5zaWRlIGEgY2FjaGUgc2NvcGUgaXMgbm90IHN1cHBvcnRlZC4gSWYgeW91IG5lZWQgdGhpcyBkYXRhIGluc2lkZSBhIGNhY2hlZCBmdW5jdGlvbiB1c2UgXCJoZWFkZXJzXCIgb3V0c2lkZSBvZiB0aGUgY2FjaGVkIGZ1bmN0aW9uIGFuZCBwYXNzIHRoZSByZXF1aXJlZCBkeW5hbWljIGRhdGEgaW4gYXMgYW4gYXJndW1lbnQuIFNlZSBtb3JlIGluZm8gaGVyZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2FwaS1yZWZlcmVuY2UvZnVuY3Rpb25zL3Vuc3RhYmxlX2NhY2hlYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFMTI3XCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAod29ya1N0b3JlLmR5bmFtaWNTaG91bGRFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBfc3RhdGljZ2VuZXJhdGlvbmJhaWxvdXQuU3RhdGljR2VuQmFpbG91dEVycm9yKGBSb3V0ZSAke3dvcmtTdG9yZS5yb3V0ZX0gd2l0aCBcXGBkeW5hbWljID0gXCJlcnJvclwiXFxgIGNvdWxkbid0IGJlIHJlbmRlcmVkIHN0YXRpY2FsbHkgYmVjYXVzZSBpdCB1c2VkIFxcYGhlYWRlcnNcXGAuIFNlZSBtb3JlIGluZm8gaGVyZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2J1aWxkaW5nLXlvdXItYXBwbGljYXRpb24vcmVuZGVyaW5nL3N0YXRpYy1hbmQtZHluYW1pYyNkeW5hbWljLXJlbmRlcmluZ2ApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNTI1XCIsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod29ya1VuaXRTdG9yZSkge1xuICAgICAgICAgICAgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3ByZXJlbmRlcicpIHtcbiAgICAgICAgICAgICAgICAvLyBkeW5hbWljSU8gUHJlcmVuZGVyXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdHJhY2sgZHluYW1pYyBhY2Nlc3MgaGVyZSBiZWNhdXNlIGFjY2VzcyB3aWxsIGJlIHRyYWNrZWQgd2hlbiB5b3UgYWNjZXNzXG4gICAgICAgICAgICAgICAgLy8gb25lIG9mIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBoZWFkZXJzIG9iamVjdC5cbiAgICAgICAgICAgICAgICByZXR1cm4gbWFrZUR5bmFtaWNhbGx5VHJhY2tlZEV4b3RpY0hlYWRlcnMod29ya1N0b3JlLnJvdXRlLCB3b3JrVW5pdFN0b3JlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod29ya1VuaXRTdG9yZS50eXBlID09PSAncHJlcmVuZGVyLXBwcicpIHtcbiAgICAgICAgICAgICAgICAvLyBQUFIgUHJlcmVuZGVyIChubyBkeW5hbWljSU8pXG4gICAgICAgICAgICAgICAgLy8gV2UgYXJlIHByZXJlbmRlcmluZyB3aXRoIFBQUi4gV2UgbmVlZCB0cmFjayBkeW5hbWljIGFjY2VzcyBoZXJlIGVhZ2VybHlcbiAgICAgICAgICAgICAgICAvLyB0byBrZWVwIGNvbnRpbnVpdHkgd2l0aCBob3cgaGVhZGVycyBoYXMgd29ya2VkIGluIFBQUiB3aXRob3V0IGR5bmFtaWNJTy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPIGNvbnNpZGVyIHN3aXRjaGluZyB0aGUgc2VtYW50aWMgdG8gdGhyb3cgb24gcHJvcGVydHkgYWNjZXNzIGluc3RlYWRcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcucG9zdHBvbmVXaXRoVHJhY2tpbmcpKHdvcmtTdG9yZS5yb3V0ZSwgJ2hlYWRlcnMnLCB3b3JrVW5pdFN0b3JlLmR5bmFtaWNUcmFja2luZyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3ByZXJlbmRlci1sZWdhY3knKSB7XG4gICAgICAgICAgICAgICAgLy8gTGVnYWN5IFByZXJlbmRlclxuICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBpbiBhIGxlZ2FjeSBzdGF0aWMgZ2VuZXJhdGlvbiBtb2RlIHdoaWxlIHByZXJlbmRlcmluZ1xuICAgICAgICAgICAgICAgIC8vIFdlIHRyYWNrIGR5bmFtaWMgYWNjZXNzIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byB3cmFwIHRoZSBoZWFkZXJzIGluXG4gICAgICAgICAgICAgICAgLy8gaW5kaXZpZHVhbCBwcm9wZXJ0eSBhY2Nlc3MgdHJhY2tpbmcuXG4gICAgICAgICAgICAgICAgKDAsIF9keW5hbWljcmVuZGVyaW5nLnRocm93VG9JbnRlcnJ1cHRTdGF0aWNHZW5lcmF0aW9uKSgnaGVhZGVycycsIHdvcmtTdG9yZSwgd29ya1VuaXRTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgZmFsbCB0aHJvdWdoIHRvIHRoZSBkeW5hbWljIGNvbnRleHQgYmVsb3cgYnV0IHdlIHN0aWxsIHRyYWNrIGR5bmFtaWMgYWNjZXNzXG4gICAgICAgIC8vIGJlY2F1c2UgaW4gZGV2IHdlIGNhbiBzdGlsbCBlcnJvciBmb3IgdGhpbmdzIGxpa2UgdXNpbmcgaGVhZGVycyBpbnNpZGUgYSBjYWNoZSBjb250ZXh0XG4gICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy50cmFja0R5bmFtaWNEYXRhSW5EeW5hbWljUmVuZGVyKSh3b3JrU3RvcmUsIHdvcmtVbml0U3RvcmUpO1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0U3RvcmUgPSAoMCwgX3dvcmt1bml0YXN5bmNzdG9yYWdlZXh0ZXJuYWwuZ2V0RXhwZWN0ZWRSZXF1ZXN0U3RvcmUpKCdoZWFkZXJzJyk7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmICEod29ya1N0b3JlID09IG51bGwgPyB2b2lkIDAgOiB3b3JrU3RvcmUuaXNQcmVmZXRjaFJlcXVlc3QpKSB7XG4gICAgICAgIHJldHVybiBtYWtlVW50cmFja2VkRXhvdGljSGVhZGVyc1dpdGhEZXZXYXJuaW5ncyhyZXF1ZXN0U3RvcmUuaGVhZGVycywgd29ya1N0b3JlID09IG51bGwgPyB2b2lkIDAgOiB3b3JrU3RvcmUucm91dGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBtYWtlVW50cmFja2VkRXhvdGljSGVhZGVycyhyZXF1ZXN0U3RvcmUuaGVhZGVycyk7XG4gICAgfVxufVxuY29uc3QgQ2FjaGVkSGVhZGVycyA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBtYWtlRHluYW1pY2FsbHlUcmFja2VkRXhvdGljSGVhZGVycyhyb3V0ZSwgcHJlcmVuZGVyU3RvcmUpIHtcbiAgICBjb25zdCBjYWNoZWRIZWFkZXJzID0gQ2FjaGVkSGVhZGVycy5nZXQocHJlcmVuZGVyU3RvcmUpO1xuICAgIGlmIChjYWNoZWRIZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWRIZWFkZXJzO1xuICAgIH1cbiAgICBjb25zdCBwcm9taXNlID0gKDAsIF9keW5hbWljcmVuZGVyaW5ndXRpbHMubWFrZUhhbmdpbmdQcm9taXNlKShwcmVyZW5kZXJTdG9yZS5yZW5kZXJTaWduYWwsICdgaGVhZGVycygpYCcpO1xuICAgIENhY2hlZEhlYWRlcnMuc2V0KHByZXJlbmRlclN0b3JlLCBwcm9taXNlKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhwcm9taXNlLCB7XG4gICAgICAgIGFwcGVuZDoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGVuZCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHByZXNzaW9uID0gYFxcYGhlYWRlcnMoKS5hcHBlbmQoJHtkZXNjcmliZU5hbWVBcmcoYXJndW1lbnRzWzBdKX0sIC4uLilcXGBgO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlSGVhZGVyc0FjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcuYWJvcnRBbmRUaHJvd09uU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzcykocm91dGUsIGV4cHJlc3Npb24sIGVycm9yLCBwcmVyZW5kZXJTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZToge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGBcXGBoZWFkZXJzKCkuZGVsZXRlKCR7ZGVzY3JpYmVOYW1lQXJnKGFyZ3VtZW50c1swXSl9KVxcYGA7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBjcmVhdGVIZWFkZXJzQWNjZXNzRXJyb3Iocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy5hYm9ydEFuZFRocm93T25TeW5jaHJvbm91c1JlcXVlc3REYXRhQWNjZXNzKShyb3V0ZSwgZXhwcmVzc2lvbiwgZXJyb3IsIHByZXJlbmRlclN0b3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBgXFxgaGVhZGVycygpLmdldCgke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSlcXGBgO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlSGVhZGVyc0FjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcuYWJvcnRBbmRUaHJvd09uU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzcykocm91dGUsIGV4cHJlc3Npb24sIGVycm9yLCBwcmVyZW5kZXJTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGhhczoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhcygpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHByZXNzaW9uID0gYFxcYGhlYWRlcnMoKS5oYXMoJHtkZXNjcmliZU5hbWVBcmcoYXJndW1lbnRzWzBdKX0pXFxgYDtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUhlYWRlcnNBY2Nlc3NFcnJvcihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgKDAsIF9keW5hbWljcmVuZGVyaW5nLmFib3J0QW5kVGhyb3dPblN5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3MpKHJvdXRlLCBleHByZXNzaW9uLCBlcnJvciwgcHJlcmVuZGVyU3RvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZXQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGBcXGBoZWFkZXJzKCkuc2V0KCR7ZGVzY3JpYmVOYW1lQXJnKGFyZ3VtZW50c1swXSl9LCAuLi4pXFxgYDtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUhlYWRlcnNBY2Nlc3NFcnJvcihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgKDAsIF9keW5hbWljcmVuZGVyaW5nLmFib3J0QW5kVGhyb3dPblN5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3MpKHJvdXRlLCBleHByZXNzaW9uLCBlcnJvciwgcHJlcmVuZGVyU3RvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXRTZXRDb29raWU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZXRDb29raWUoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgaGVhZGVycygpLmdldFNldENvb2tpZSgpYCc7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBjcmVhdGVIZWFkZXJzQWNjZXNzRXJyb3Iocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy5hYm9ydEFuZFRocm93T25TeW5jaHJvbm91c1JlcXVlc3REYXRhQWNjZXNzKShyb3V0ZSwgZXhwcmVzc2lvbiwgZXJyb3IsIHByZXJlbmRlclN0b3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZm9yRWFjaDoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZvckVhY2goKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgaGVhZGVycygpLmZvckVhY2goLi4uKWAnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlSGVhZGVyc0FjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcuYWJvcnRBbmRUaHJvd09uU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzcykocm91dGUsIGV4cHJlc3Npb24sIGVycm9yLCBwcmVyZW5kZXJTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGtleXM6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBrZXlzKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSAnYGhlYWRlcnMoKS5rZXlzKClgJztcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUhlYWRlcnNBY2Nlc3NFcnJvcihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgKDAsIF9keW5hbWljcmVuZGVyaW5nLmFib3J0QW5kVGhyb3dPblN5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3MpKHJvdXRlLCBleHByZXNzaW9uLCBlcnJvciwgcHJlcmVuZGVyU3RvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB2YWx1ZXM6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZXMoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgaGVhZGVycygpLnZhbHVlcygpYCc7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBjcmVhdGVIZWFkZXJzQWNjZXNzRXJyb3Iocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy5hYm9ydEFuZFRocm93T25TeW5jaHJvbm91c1JlcXVlc3REYXRhQWNjZXNzKShyb3V0ZSwgZXhwcmVzc2lvbiwgZXJyb3IsIHByZXJlbmRlclN0b3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW50cmllczoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVudHJpZXMoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgaGVhZGVycygpLmVudHJpZXMoKWAnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlSGVhZGVyc0FjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcuYWJvcnRBbmRUaHJvd09uU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzcykocm91dGUsIGV4cHJlc3Npb24sIGVycm9yLCBwcmVyZW5kZXJTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFtTeW1ib2wuaXRlcmF0b3JdOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgaGVhZGVycygpW1N5bWJvbC5pdGVyYXRvcl0oKWAnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlSGVhZGVyc0FjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAoMCwgX2R5bmFtaWNyZW5kZXJpbmcuYWJvcnRBbmRUaHJvd09uU3luY2hyb25vdXNSZXF1ZXN0RGF0YUFjY2Vzcykocm91dGUsIGV4cHJlc3Npb24sIGVycm9yLCBwcmVyZW5kZXJTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIG1ha2VVbnRyYWNrZWRFeG90aWNIZWFkZXJzKHVuZGVybHlpbmdIZWFkZXJzKSB7XG4gICAgY29uc3QgY2FjaGVkSGVhZGVycyA9IENhY2hlZEhlYWRlcnMuZ2V0KHVuZGVybHlpbmdIZWFkZXJzKTtcbiAgICBpZiAoY2FjaGVkSGVhZGVycykge1xuICAgICAgICByZXR1cm4gY2FjaGVkSGVhZGVycztcbiAgICB9XG4gICAgY29uc3QgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSh1bmRlcmx5aW5nSGVhZGVycyk7XG4gICAgQ2FjaGVkSGVhZGVycy5zZXQodW5kZXJseWluZ0hlYWRlcnMsIHByb21pc2UpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHByb21pc2UsIHtcbiAgICAgICAgYXBwZW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogdW5kZXJseWluZ0hlYWRlcnMuYXBwZW5kLmJpbmQodW5kZXJseWluZ0hlYWRlcnMpXG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZToge1xuICAgICAgICAgICAgdmFsdWU6IHVuZGVybHlpbmdIZWFkZXJzLmRlbGV0ZS5iaW5kKHVuZGVybHlpbmdIZWFkZXJzKVxuICAgICAgICB9LFxuICAgICAgICBnZXQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiB1bmRlcmx5aW5nSGVhZGVycy5nZXQuYmluZCh1bmRlcmx5aW5nSGVhZGVycylcbiAgICAgICAgfSxcbiAgICAgICAgaGFzOiB7XG4gICAgICAgICAgICB2YWx1ZTogdW5kZXJseWluZ0hlYWRlcnMuaGFzLmJpbmQodW5kZXJseWluZ0hlYWRlcnMpXG4gICAgICAgIH0sXG4gICAgICAgIHNldDoge1xuICAgICAgICAgICAgdmFsdWU6IHVuZGVybHlpbmdIZWFkZXJzLnNldC5iaW5kKHVuZGVybHlpbmdIZWFkZXJzKVxuICAgICAgICB9LFxuICAgICAgICBnZXRTZXRDb29raWU6IHtcbiAgICAgICAgICAgIHZhbHVlOiB1bmRlcmx5aW5nSGVhZGVycy5nZXRTZXRDb29raWUuYmluZCh1bmRlcmx5aW5nSGVhZGVycylcbiAgICAgICAgfSxcbiAgICAgICAgZm9yRWFjaDoge1xuICAgICAgICAgICAgdmFsdWU6IHVuZGVybHlpbmdIZWFkZXJzLmZvckVhY2guYmluZCh1bmRlcmx5aW5nSGVhZGVycylcbiAgICAgICAgfSxcbiAgICAgICAga2V5czoge1xuICAgICAgICAgICAgdmFsdWU6IHVuZGVybHlpbmdIZWFkZXJzLmtleXMuYmluZCh1bmRlcmx5aW5nSGVhZGVycylcbiAgICAgICAgfSxcbiAgICAgICAgdmFsdWVzOiB7XG4gICAgICAgICAgICB2YWx1ZTogdW5kZXJseWluZ0hlYWRlcnMudmFsdWVzLmJpbmQodW5kZXJseWluZ0hlYWRlcnMpXG4gICAgICAgIH0sXG4gICAgICAgIGVudHJpZXM6IHtcbiAgICAgICAgICAgIHZhbHVlOiB1bmRlcmx5aW5nSGVhZGVycy5lbnRyaWVzLmJpbmQodW5kZXJseWluZ0hlYWRlcnMpXG4gICAgICAgIH0sXG4gICAgICAgIFtTeW1ib2wuaXRlcmF0b3JdOiB7XG4gICAgICAgICAgICB2YWx1ZTogdW5kZXJseWluZ0hlYWRlcnNbU3ltYm9sLml0ZXJhdG9yXS5iaW5kKHVuZGVybHlpbmdIZWFkZXJzKVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBtYWtlVW50cmFja2VkRXhvdGljSGVhZGVyc1dpdGhEZXZXYXJuaW5ncyh1bmRlcmx5aW5nSGVhZGVycywgcm91dGUpIHtcbiAgICBjb25zdCBjYWNoZWRIZWFkZXJzID0gQ2FjaGVkSGVhZGVycy5nZXQodW5kZXJseWluZ0hlYWRlcnMpO1xuICAgIGlmIChjYWNoZWRIZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWRIZWFkZXJzO1xuICAgIH1cbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpPT4oMCwgX3NjaGVkdWxlci5zY2hlZHVsZUltbWVkaWF0ZSkoKCk9PnJlc29sdmUodW5kZXJseWluZ0hlYWRlcnMpKSk7XG4gICAgQ2FjaGVkSGVhZGVycy5zZXQodW5kZXJseWluZ0hlYWRlcnMsIHByb21pc2UpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHByb21pc2UsIHtcbiAgICAgICAgYXBwZW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXBwZW5kKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBgXFxgaGVhZGVycygpLmFwcGVuZCgke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSwgLi4uKVxcYGA7XG4gICAgICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZXJseWluZ0hlYWRlcnMuYXBwZW5kLmFwcGx5KHVuZGVybHlpbmdIZWFkZXJzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWxldGU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBgXFxgaGVhZGVycygpLmRlbGV0ZSgke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSlcXGBgO1xuICAgICAgICAgICAgICAgIHN5bmNJT0Rldihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVybHlpbmdIZWFkZXJzLmRlbGV0ZS5hcHBseSh1bmRlcmx5aW5nSGVhZGVycywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBgXFxgaGVhZGVycygpLmdldCgke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSlcXGBgO1xuICAgICAgICAgICAgICAgIHN5bmNJT0Rldihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVybHlpbmdIZWFkZXJzLmdldC5hcHBseSh1bmRlcmx5aW5nSGVhZGVycywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaGFzOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFzKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBgXFxgaGVhZGVycygpLmhhcygke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSlcXGBgO1xuICAgICAgICAgICAgICAgIHN5bmNJT0Rldihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVybHlpbmdIZWFkZXJzLmhhcy5hcHBseSh1bmRlcmx5aW5nSGVhZGVycywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBgXFxgaGVhZGVycygpLnNldCgke2Rlc2NyaWJlTmFtZUFyZyhhcmd1bWVudHNbMF0pfSwgLi4uKVxcYGA7XG4gICAgICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZXJseWluZ0hlYWRlcnMuc2V0LmFwcGx5KHVuZGVybHlpbmdIZWFkZXJzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXRTZXRDb29raWU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZXRDb29raWUoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgaGVhZGVycygpLmdldFNldENvb2tpZSgpYCc7XG4gICAgICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZXJseWluZ0hlYWRlcnMuZ2V0U2V0Q29va2llLmFwcGx5KHVuZGVybHlpbmdIZWFkZXJzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBmb3JFYWNoOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZm9yRWFjaCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHByZXNzaW9uID0gJ2BoZWFkZXJzKCkuZm9yRWFjaCguLi4pYCc7XG4gICAgICAgICAgICAgICAgc3luY0lPRGV2KHJvdXRlLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZXJseWluZ0hlYWRlcnMuZm9yRWFjaC5hcHBseSh1bmRlcmx5aW5nSGVhZGVycywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAga2V5czoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGtleXMoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9ICdgaGVhZGVycygpLmtleXMoKWAnO1xuICAgICAgICAgICAgICAgIHN5bmNJT0Rldihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVybHlpbmdIZWFkZXJzLmtleXMuYXBwbHkodW5kZXJseWluZ0hlYWRlcnMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHZhbHVlczoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlcygpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHByZXNzaW9uID0gJ2BoZWFkZXJzKCkudmFsdWVzKClgJztcbiAgICAgICAgICAgICAgICBzeW5jSU9EZXYocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlcmx5aW5nSGVhZGVycy52YWx1ZXMuYXBwbHkodW5kZXJseWluZ0hlYWRlcnMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudHJpZXM6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlbnRyaWVzKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSAnYGhlYWRlcnMoKS5lbnRyaWVzKClgJztcbiAgICAgICAgICAgICAgICBzeW5jSU9EZXYocm91dGUsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlcmx5aW5nSGVhZGVycy5lbnRyaWVzLmFwcGx5KHVuZGVybHlpbmdIZWFkZXJzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXToge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSAnYC4uLmhlYWRlcnMoKWAgb3Igc2ltaWxhciBpdGVyYXRpb24nO1xuICAgICAgICAgICAgICAgIHN5bmNJT0Rldihyb3V0ZSwgZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVybHlpbmdIZWFkZXJzW1N5bWJvbC5pdGVyYXRvcl0uYXBwbHkodW5kZXJseWluZ0hlYWRlcnMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGRlc2NyaWJlTmFtZUFyZyhhcmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgPyBgJyR7YXJnfSdgIDogJy4uLic7XG59XG5mdW5jdGlvbiBzeW5jSU9EZXYocm91dGUsIGV4cHJlc3Npb24pIHtcbiAgICBjb25zdCB3b3JrVW5pdFN0b3JlID0gX3dvcmt1bml0YXN5bmNzdG9yYWdlZXh0ZXJuYWwud29ya1VuaXRBc3luY1N0b3JhZ2UuZ2V0U3RvcmUoKTtcbiAgICBpZiAod29ya1VuaXRTdG9yZSAmJiB3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdyZXF1ZXN0JyAmJiB3b3JrVW5pdFN0b3JlLnByZXJlbmRlclBoYXNlID09PSB0cnVlKSB7XG4gICAgICAgIC8vIFdoZW4gd2UncmUgcmVuZGVyaW5nIGR5bmFtaWNhbGx5IGluIGRldiB3ZSBuZWVkIHRvIGFkdmFuY2Ugb3V0IG9mIHRoZVxuICAgICAgICAvLyBQcmVyZW5kZXIgZW52aXJvbm1lbnQgd2hlbiB3ZSByZWFkIFJlcXVlc3QgZGF0YSBzeW5jaHJvbm91c2x5XG4gICAgICAgIGNvbnN0IHJlcXVlc3RTdG9yZSA9IHdvcmtVbml0U3RvcmU7XG4gICAgICAgICgwLCBfZHluYW1pY3JlbmRlcmluZy50cmFja1N5bmNocm9ub3VzUmVxdWVzdERhdGFBY2Nlc3NJbkRldikocmVxdWVzdFN0b3JlKTtcbiAgICB9XG4gICAgLy8gSW4gYWxsIGNhc2VzIHdlIHdhcm4gbm9ybWFsbHlcbiAgICB3YXJuRm9yU3luY0FjY2Vzcyhyb3V0ZSwgZXhwcmVzc2lvbik7XG59XG5jb25zdCB3YXJuRm9yU3luY0FjY2VzcyA9ICgwLCBfY3JlYXRlZGVkdXBlZGJ5Y2FsbHNpdGVzZXJ2ZXJlcnJvcmxvZ2dlci5jcmVhdGVEZWR1cGVkQnlDYWxsc2l0ZVNlcnZlckVycm9yTG9nZ2VyRGV2KShjcmVhdGVIZWFkZXJzQWNjZXNzRXJyb3IpO1xuZnVuY3Rpb24gY3JlYXRlSGVhZGVyc0FjY2Vzc0Vycm9yKHJvdXRlLCBleHByZXNzaW9uKSB7XG4gICAgY29uc3QgcHJlZml4ID0gcm91dGUgPyBgUm91dGUgXCIke3JvdXRlfVwiIGAgOiAnVGhpcyByb3V0ZSAnO1xuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGAke3ByZWZpeH11c2VkICR7ZXhwcmVzc2lvbn0uIGAgKyBgXFxgaGVhZGVycygpXFxgIHNob3VsZCBiZSBhd2FpdGVkIGJlZm9yZSB1c2luZyBpdHMgdmFsdWUuIGAgKyBgTGVhcm4gbW9yZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvbWVzc2FnZXMvc3luYy1keW5hbWljLWFwaXNgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgIHZhbHVlOiBcIkUyNzdcIixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWFkZXJzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/request/headers.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/request/utils.js":
/*!********************************************************!*\
  !*** ./node_modules/next/dist/server/request/utils.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    isRequestAPICallableInsideAfter: function() {\n        return isRequestAPICallableInsideAfter;\n    },\n    throwForSearchParamsAccessInUseCache: function() {\n        return throwForSearchParamsAccessInUseCache;\n    },\n    throwWithStaticGenerationBailoutError: function() {\n        return throwWithStaticGenerationBailoutError;\n    },\n    throwWithStaticGenerationBailoutErrorWithDynamicError: function() {\n        return throwWithStaticGenerationBailoutErrorWithDynamicError;\n    }\n});\nconst _staticgenerationbailout = __webpack_require__(/*! ../../client/components/static-generation-bailout */ \"(app-pages-browser)/./node_modules/next/dist/client/components/static-generation-bailout.js\");\nconst _aftertaskasyncstorageexternal = __webpack_require__(/*! ../app-render/after-task-async-storage.external */ \"(app-pages-browser)/./node_modules/next/dist/server/app-render/after-task-async-storage.external.js\");\nfunction throwWithStaticGenerationBailoutError(route, expression) {\n    throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${route} couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`), \"__NEXT_ERROR_CODE\", {\n        value: \"E576\",\n        enumerable: false,\n        configurable: true\n    });\n}\nfunction throwWithStaticGenerationBailoutErrorWithDynamicError(route, expression) {\n    throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${route} with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`), \"__NEXT_ERROR_CODE\", {\n        value: \"E543\",\n        enumerable: false,\n        configurable: true\n    });\n}\nfunction throwForSearchParamsAccessInUseCache(workStore) {\n    const error = Object.defineProperty(new Error(`Route ${workStore.route} used \"searchParams\" inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \"searchParams\" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`), \"__NEXT_ERROR_CODE\", {\n        value: \"E634\",\n        enumerable: false,\n        configurable: true\n    });\n    workStore.invalidUsageError ??= error;\n    throw error;\n}\nfunction isRequestAPICallableInsideAfter() {\n    const afterTaskStore = _aftertaskasyncstorageexternal.afterTaskAsyncStorage.getStore();\n    return (afterTaskStore == null ? void 0 : afterTaskStore.rootTaskSpawnPhase) === 'action';\n}\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QvdXRpbHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixNQUFNLENBS0w7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGlDQUFpQyxtQkFBTyxDQUFDLHNKQUFtRDtBQUM1Rix1Q0FBdUMsbUJBQU8sQ0FBQyw0SkFBaUQ7QUFDaEc7QUFDQSw0RkFBNEYsT0FBTyxrREFBa0QsV0FBVztBQUNoSztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRGQUE0RixPQUFPLDZFQUE2RSxXQUFXO0FBQzNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsMkRBQTJELGlCQUFpQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxuZXh0XFxkaXN0XFxzZXJ2ZXJcXHJlcXVlc3RcXHV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgaXNSZXF1ZXN0QVBJQ2FsbGFibGVJbnNpZGVBZnRlcjogbnVsbCxcbiAgICB0aHJvd0ZvclNlYXJjaFBhcmFtc0FjY2Vzc0luVXNlQ2FjaGU6IG51bGwsXG4gICAgdGhyb3dXaXRoU3RhdGljR2VuZXJhdGlvbkJhaWxvdXRFcnJvcjogbnVsbCxcbiAgICB0aHJvd1dpdGhTdGF0aWNHZW5lcmF0aW9uQmFpbG91dEVycm9yV2l0aER5bmFtaWNFcnJvcjogbnVsbFxufSk7XG5mdW5jdGlvbiBfZXhwb3J0KHRhcmdldCwgYWxsKSB7XG4gICAgZm9yKHZhciBuYW1lIGluIGFsbClPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogYWxsW25hbWVdXG4gICAgfSk7XG59XG5fZXhwb3J0KGV4cG9ydHMsIHtcbiAgICBpc1JlcXVlc3RBUElDYWxsYWJsZUluc2lkZUFmdGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGlzUmVxdWVzdEFQSUNhbGxhYmxlSW5zaWRlQWZ0ZXI7XG4gICAgfSxcbiAgICB0aHJvd0ZvclNlYXJjaFBhcmFtc0FjY2Vzc0luVXNlQ2FjaGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhyb3dGb3JTZWFyY2hQYXJhbXNBY2Nlc3NJblVzZUNhY2hlO1xuICAgIH0sXG4gICAgdGhyb3dXaXRoU3RhdGljR2VuZXJhdGlvbkJhaWxvdXRFcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aHJvd1dpdGhTdGF0aWNHZW5lcmF0aW9uQmFpbG91dEVycm9yO1xuICAgIH0sXG4gICAgdGhyb3dXaXRoU3RhdGljR2VuZXJhdGlvbkJhaWxvdXRFcnJvcldpdGhEeW5hbWljRXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhyb3dXaXRoU3RhdGljR2VuZXJhdGlvbkJhaWxvdXRFcnJvcldpdGhEeW5hbWljRXJyb3I7XG4gICAgfVxufSk7XG5jb25zdCBfc3RhdGljZ2VuZXJhdGlvbmJhaWxvdXQgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbXBvbmVudHMvc3RhdGljLWdlbmVyYXRpb24tYmFpbG91dFwiKTtcbmNvbnN0IF9hZnRlcnRhc2thc3luY3N0b3JhZ2VleHRlcm5hbCA9IHJlcXVpcmUoXCIuLi9hcHAtcmVuZGVyL2FmdGVyLXRhc2stYXN5bmMtc3RvcmFnZS5leHRlcm5hbFwiKTtcbmZ1bmN0aW9uIHRocm93V2l0aFN0YXRpY0dlbmVyYXRpb25CYWlsb3V0RXJyb3Iocm91dGUsIGV4cHJlc3Npb24pIHtcbiAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IF9zdGF0aWNnZW5lcmF0aW9uYmFpbG91dC5TdGF0aWNHZW5CYWlsb3V0RXJyb3IoYFJvdXRlICR7cm91dGV9IGNvdWxkbid0IGJlIHJlbmRlcmVkIHN0YXRpY2FsbHkgYmVjYXVzZSBpdCB1c2VkICR7ZXhwcmVzc2lvbn0uIFNlZSBtb3JlIGluZm8gaGVyZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2J1aWxkaW5nLXlvdXItYXBwbGljYXRpb24vcmVuZGVyaW5nL3N0YXRpYy1hbmQtZHluYW1pYyNkeW5hbWljLXJlbmRlcmluZ2ApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgdmFsdWU6IFwiRTU3NlwiLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG59XG5mdW5jdGlvbiB0aHJvd1dpdGhTdGF0aWNHZW5lcmF0aW9uQmFpbG91dEVycm9yV2l0aER5bmFtaWNFcnJvcihyb3V0ZSwgZXhwcmVzc2lvbikge1xuICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgX3N0YXRpY2dlbmVyYXRpb25iYWlsb3V0LlN0YXRpY0dlbkJhaWxvdXRFcnJvcihgUm91dGUgJHtyb3V0ZX0gd2l0aCBcXGBkeW5hbWljID0gXCJlcnJvclwiXFxgIGNvdWxkbid0IGJlIHJlbmRlcmVkIHN0YXRpY2FsbHkgYmVjYXVzZSBpdCB1c2VkICR7ZXhwcmVzc2lvbn0uIFNlZSBtb3JlIGluZm8gaGVyZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2J1aWxkaW5nLXlvdXItYXBwbGljYXRpb24vcmVuZGVyaW5nL3N0YXRpYy1hbmQtZHluYW1pYyNkeW5hbWljLXJlbmRlcmluZ2ApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgdmFsdWU6IFwiRTU0M1wiLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG59XG5mdW5jdGlvbiB0aHJvd0ZvclNlYXJjaFBhcmFtc0FjY2Vzc0luVXNlQ2FjaGUod29ya1N0b3JlKSB7XG4gICAgY29uc3QgZXJyb3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBSb3V0ZSAke3dvcmtTdG9yZS5yb3V0ZX0gdXNlZCBcInNlYXJjaFBhcmFtc1wiIGluc2lkZSBcInVzZSBjYWNoZVwiLiBBY2Nlc3NpbmcgRHluYW1pYyBkYXRhIHNvdXJjZXMgaW5zaWRlIGEgY2FjaGUgc2NvcGUgaXMgbm90IHN1cHBvcnRlZC4gSWYgeW91IG5lZWQgdGhpcyBkYXRhIGluc2lkZSBhIGNhY2hlZCBmdW5jdGlvbiB1c2UgXCJzZWFyY2hQYXJhbXNcIiBvdXRzaWRlIG9mIHRoZSBjYWNoZWQgZnVuY3Rpb24gYW5kIHBhc3MgdGhlIHJlcXVpcmVkIGR5bmFtaWMgZGF0YSBpbiBhcyBhbiBhcmd1bWVudC4gU2VlIG1vcmUgaW5mbyBoZXJlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9uZXh0LXJlcXVlc3QtaW4tdXNlLWNhY2hlYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICB2YWx1ZTogXCJFNjM0XCIsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICB3b3JrU3RvcmUuaW52YWxpZFVzYWdlRXJyb3IgPz89IGVycm9yO1xuICAgIHRocm93IGVycm9yO1xufVxuZnVuY3Rpb24gaXNSZXF1ZXN0QVBJQ2FsbGFibGVJbnNpZGVBZnRlcigpIHtcbiAgICBjb25zdCBhZnRlclRhc2tTdG9yZSA9IF9hZnRlcnRhc2thc3luY3N0b3JhZ2VleHRlcm5hbC5hZnRlclRhc2tBc3luY1N0b3JhZ2UuZ2V0U3RvcmUoKTtcbiAgICByZXR1cm4gKGFmdGVyVGFza1N0b3JlID09IG51bGwgPyB2b2lkIDAgOiBhZnRlclRhc2tTdG9yZS5yb290VGFza1NwYXduUGhhc2UpID09PSAnYWN0aW9uJztcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/request/utils.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/headers.js":
/*!******************************************************************************!*\
  !*** ./node_modules/next/dist/server/web/spec-extension/adapters/headers.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    HeadersAdapter: function() {\n        return HeadersAdapter;\n    },\n    ReadonlyHeadersError: function() {\n        return ReadonlyHeadersError;\n    }\n});\nconst _reflect = __webpack_require__(/*! ./reflect */ \"(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/reflect.js\");\nclass ReadonlyHeadersError extends Error {\n    constructor(){\n        super('Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers');\n    }\n    static callable() {\n        throw new ReadonlyHeadersError();\n    }\n}\nclass HeadersAdapter extends Headers {\n    constructor(headers){\n        // We've already overridden the methods that would be called, so we're just\n        // calling the super constructor to ensure that the instanceof check works.\n        super();\n        this.headers = new Proxy(headers, {\n            get (target, prop, receiver) {\n                // Because this is just an object, we expect that all \"get\" operations\n                // are for properties. If it's a \"get\" for a symbol, we'll just return\n                // the symbol.\n                if (typeof prop === 'symbol') {\n                    return _reflect.ReflectAdapter.get(target, prop, receiver);\n                }\n                const lowercased = prop.toLowerCase();\n                // Let's find the original casing of the key. This assumes that there is\n                // no mixed case keys (e.g. \"Content-Type\" and \"content-type\") in the\n                // headers object.\n                const original = Object.keys(headers).find((o)=>o.toLowerCase() === lowercased);\n                // If the original casing doesn't exist, return undefined.\n                if (typeof original === 'undefined') return;\n                // If the original casing exists, return the value.\n                return _reflect.ReflectAdapter.get(target, original, receiver);\n            },\n            set (target, prop, value, receiver) {\n                if (typeof prop === 'symbol') {\n                    return _reflect.ReflectAdapter.set(target, prop, value, receiver);\n                }\n                const lowercased = prop.toLowerCase();\n                // Let's find the original casing of the key. This assumes that there is\n                // no mixed case keys (e.g. \"Content-Type\" and \"content-type\") in the\n                // headers object.\n                const original = Object.keys(headers).find((o)=>o.toLowerCase() === lowercased);\n                // If the original casing doesn't exist, use the prop as the key.\n                return _reflect.ReflectAdapter.set(target, original ?? prop, value, receiver);\n            },\n            has (target, prop) {\n                if (typeof prop === 'symbol') return _reflect.ReflectAdapter.has(target, prop);\n                const lowercased = prop.toLowerCase();\n                // Let's find the original casing of the key. This assumes that there is\n                // no mixed case keys (e.g. \"Content-Type\" and \"content-type\") in the\n                // headers object.\n                const original = Object.keys(headers).find((o)=>o.toLowerCase() === lowercased);\n                // If the original casing doesn't exist, return false.\n                if (typeof original === 'undefined') return false;\n                // If the original casing exists, return true.\n                return _reflect.ReflectAdapter.has(target, original);\n            },\n            deleteProperty (target, prop) {\n                if (typeof prop === 'symbol') return _reflect.ReflectAdapter.deleteProperty(target, prop);\n                const lowercased = prop.toLowerCase();\n                // Let's find the original casing of the key. This assumes that there is\n                // no mixed case keys (e.g. \"Content-Type\" and \"content-type\") in the\n                // headers object.\n                const original = Object.keys(headers).find((o)=>o.toLowerCase() === lowercased);\n                // If the original casing doesn't exist, return true.\n                if (typeof original === 'undefined') return true;\n                // If the original casing exists, delete the property.\n                return _reflect.ReflectAdapter.deleteProperty(target, original);\n            }\n        });\n    }\n    /**\n   * Seals a Headers instance to prevent modification by throwing an error when\n   * any mutating method is called.\n   */ static seal(headers) {\n        return new Proxy(headers, {\n            get (target, prop, receiver) {\n                switch(prop){\n                    case 'append':\n                    case 'delete':\n                    case 'set':\n                        return ReadonlyHeadersError.callable;\n                    default:\n                        return _reflect.ReflectAdapter.get(target, prop, receiver);\n                }\n            }\n        });\n    }\n    /**\n   * Merges a header value into a string. This stores multiple values as an\n   * array, so we need to merge them into a string.\n   *\n   * @param value a header value\n   * @returns a merged header value (a string)\n   */ merge(value) {\n        if (Array.isArray(value)) return value.join(', ');\n        return value;\n    }\n    /**\n   * Creates a Headers instance from a plain object or a Headers instance.\n   *\n   * @param headers a plain object or a Headers instance\n   * @returns a headers instance\n   */ static from(headers) {\n        if (headers instanceof Headers) return headers;\n        return new HeadersAdapter(headers);\n    }\n    append(name, value) {\n        const existing = this.headers[name];\n        if (typeof existing === 'string') {\n            this.headers[name] = [\n                existing,\n                value\n            ];\n        } else if (Array.isArray(existing)) {\n            existing.push(value);\n        } else {\n            this.headers[name] = value;\n        }\n    }\n    delete(name) {\n        delete this.headers[name];\n    }\n    get(name) {\n        const value = this.headers[name];\n        if (typeof value !== 'undefined') return this.merge(value);\n        return null;\n    }\n    has(name) {\n        return typeof this.headers[name] !== 'undefined';\n    }\n    set(name, value) {\n        this.headers[name] = value;\n    }\n    forEach(callbackfn, thisArg) {\n        for (const [name, value] of this.entries()){\n            callbackfn.call(thisArg, value, name, this);\n        }\n    }\n    *entries() {\n        for (const key of Object.keys(this.headers)){\n            const name = key.toLowerCase();\n            // We assert here that this is a string because we got it from the\n            // Object.keys() call above.\n            const value = this.get(name);\n            yield [\n                name,\n                value\n            ];\n        }\n    }\n    *keys() {\n        for (const key of Object.keys(this.headers)){\n            const name = key.toLowerCase();\n            yield name;\n        }\n    }\n    *values() {\n        for (const key of Object.keys(this.headers)){\n            // We assert here that this is a string because we got it from the\n            // Object.keys() call above.\n            const value = this.get(key);\n            yield value;\n        }\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n}\n\n//# sourceMappingURL=headers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9oZWFkZXJzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsTUFBTSxDQUdMO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGlCQUFpQixtQkFBTyxDQUFDLDZHQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXHNlcnZlclxcd2ViXFxzcGVjLWV4dGVuc2lvblxcYWRhcHRlcnNcXGhlYWRlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBIZWFkZXJzQWRhcHRlcjogbnVsbCxcbiAgICBSZWFkb25seUhlYWRlcnNFcnJvcjogbnVsbFxufSk7XG5mdW5jdGlvbiBfZXhwb3J0KHRhcmdldCwgYWxsKSB7XG4gICAgZm9yKHZhciBuYW1lIGluIGFsbClPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogYWxsW25hbWVdXG4gICAgfSk7XG59XG5fZXhwb3J0KGV4cG9ydHMsIHtcbiAgICBIZWFkZXJzQWRhcHRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBIZWFkZXJzQWRhcHRlcjtcbiAgICB9LFxuICAgIFJlYWRvbmx5SGVhZGVyc0Vycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFJlYWRvbmx5SGVhZGVyc0Vycm9yO1xuICAgIH1cbn0pO1xuY29uc3QgX3JlZmxlY3QgPSByZXF1aXJlKFwiLi9yZWZsZWN0XCIpO1xuY2xhc3MgUmVhZG9ubHlIZWFkZXJzRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgc3VwZXIoJ0hlYWRlcnMgY2Fubm90IGJlIG1vZGlmaWVkLiBSZWFkIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9hcGktcmVmZXJlbmNlL2Z1bmN0aW9ucy9oZWFkZXJzJyk7XG4gICAgfVxuICAgIHN0YXRpYyBjYWxsYWJsZSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJlYWRvbmx5SGVhZGVyc0Vycm9yKCk7XG4gICAgfVxufVxuY2xhc3MgSGVhZGVyc0FkYXB0ZXIgZXh0ZW5kcyBIZWFkZXJzIHtcbiAgICBjb25zdHJ1Y3RvcihoZWFkZXJzKXtcbiAgICAgICAgLy8gV2UndmUgYWxyZWFkeSBvdmVycmlkZGVuIHRoZSBtZXRob2RzIHRoYXQgd291bGQgYmUgY2FsbGVkLCBzbyB3ZSdyZSBqdXN0XG4gICAgICAgIC8vIGNhbGxpbmcgdGhlIHN1cGVyIGNvbnN0cnVjdG9yIHRvIGVuc3VyZSB0aGF0IHRoZSBpbnN0YW5jZW9mIGNoZWNrIHdvcmtzLlxuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgUHJveHkoaGVhZGVycywge1xuICAgICAgICAgICAgZ2V0ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICAgICAgLy8gQmVjYXVzZSB0aGlzIGlzIGp1c3QgYW4gb2JqZWN0LCB3ZSBleHBlY3QgdGhhdCBhbGwgXCJnZXRcIiBvcGVyYXRpb25zXG4gICAgICAgICAgICAgICAgLy8gYXJlIGZvciBwcm9wZXJ0aWVzLiBJZiBpdCdzIGEgXCJnZXRcIiBmb3IgYSBzeW1ib2wsIHdlJ2xsIGp1c3QgcmV0dXJuXG4gICAgICAgICAgICAgICAgLy8gdGhlIHN5bWJvbC5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3AgPT09ICdzeW1ib2wnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmbGVjdC5SZWZsZWN0QWRhcHRlci5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGxvd2VyY2FzZWQgPSBwcm9wLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gTGV0J3MgZmluZCB0aGUgb3JpZ2luYWwgY2FzaW5nIG9mIHRoZSBrZXkuIFRoaXMgYXNzdW1lcyB0aGF0IHRoZXJlIGlzXG4gICAgICAgICAgICAgICAgLy8gbm8gbWl4ZWQgY2FzZSBrZXlzIChlLmcuIFwiQ29udGVudC1UeXBlXCIgYW5kIFwiY29udGVudC10eXBlXCIpIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIGhlYWRlcnMgb2JqZWN0LlxuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gT2JqZWN0LmtleXMoaGVhZGVycykuZmluZCgobyk9Pm8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJjYXNlZCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIGNhc2luZyBkb2Vzbid0IGV4aXN0LCByZXR1cm4gdW5kZWZpbmVkLlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3JpZ2luYWwgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIGNhc2luZyBleGlzdHMsIHJldHVybiB0aGUgdmFsdWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWZsZWN0LlJlZmxlY3RBZGFwdGVyLmdldCh0YXJnZXQsIG9yaWdpbmFsLCByZWNlaXZlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0ICh0YXJnZXQsIHByb3AsIHZhbHVlLCByZWNlaXZlcikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N5bWJvbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWZsZWN0LlJlZmxlY3RBZGFwdGVyLnNldCh0YXJnZXQsIHByb3AsIHZhbHVlLCByZWNlaXZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGxvd2VyY2FzZWQgPSBwcm9wLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gTGV0J3MgZmluZCB0aGUgb3JpZ2luYWwgY2FzaW5nIG9mIHRoZSBrZXkuIFRoaXMgYXNzdW1lcyB0aGF0IHRoZXJlIGlzXG4gICAgICAgICAgICAgICAgLy8gbm8gbWl4ZWQgY2FzZSBrZXlzIChlLmcuIFwiQ29udGVudC1UeXBlXCIgYW5kIFwiY29udGVudC10eXBlXCIpIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIGhlYWRlcnMgb2JqZWN0LlxuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gT2JqZWN0LmtleXMoaGVhZGVycykuZmluZCgobyk9Pm8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJjYXNlZCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIGNhc2luZyBkb2Vzbid0IGV4aXN0LCB1c2UgdGhlIHByb3AgYXMgdGhlIGtleS5cbiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZmxlY3QuUmVmbGVjdEFkYXB0ZXIuc2V0KHRhcmdldCwgb3JpZ2luYWwgPz8gcHJvcCwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYXMgKHRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N5bWJvbCcpIHJldHVybiBfcmVmbGVjdC5SZWZsZWN0QWRhcHRlci5oYXModGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb3dlcmNhc2VkID0gcHJvcC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIC8vIExldCdzIGZpbmQgdGhlIG9yaWdpbmFsIGNhc2luZyBvZiB0aGUga2V5LiBUaGlzIGFzc3VtZXMgdGhhdCB0aGVyZSBpc1xuICAgICAgICAgICAgICAgIC8vIG5vIG1peGVkIGNhc2Uga2V5cyAoZS5nLiBcIkNvbnRlbnQtVHlwZVwiIGFuZCBcImNvbnRlbnQtdHlwZVwiKSBpbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBoZWFkZXJzIG9iamVjdC5cbiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IE9iamVjdC5rZXlzKGhlYWRlcnMpLmZpbmQoKG8pPT5vLnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyY2FzZWQpO1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBvcmlnaW5hbCBjYXNpbmcgZG9lc24ndCBleGlzdCwgcmV0dXJuIGZhbHNlLlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3JpZ2luYWwgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIGNhc2luZyBleGlzdHMsIHJldHVybiB0cnVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBfcmVmbGVjdC5SZWZsZWN0QWRhcHRlci5oYXModGFyZ2V0LCBvcmlnaW5hbCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVsZXRlUHJvcGVydHkgKHRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N5bWJvbCcpIHJldHVybiBfcmVmbGVjdC5SZWZsZWN0QWRhcHRlci5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3ApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvd2VyY2FzZWQgPSBwcm9wLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gTGV0J3MgZmluZCB0aGUgb3JpZ2luYWwgY2FzaW5nIG9mIHRoZSBrZXkuIFRoaXMgYXNzdW1lcyB0aGF0IHRoZXJlIGlzXG4gICAgICAgICAgICAgICAgLy8gbm8gbWl4ZWQgY2FzZSBrZXlzIChlLmcuIFwiQ29udGVudC1UeXBlXCIgYW5kIFwiY29udGVudC10eXBlXCIpIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIGhlYWRlcnMgb2JqZWN0LlxuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gT2JqZWN0LmtleXMoaGVhZGVycykuZmluZCgobyk9Pm8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJjYXNlZCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIGNhc2luZyBkb2Vzbid0IGV4aXN0LCByZXR1cm4gdHJ1ZS5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9yaWdpbmFsID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIGNhc2luZyBleGlzdHMsIGRlbGV0ZSB0aGUgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWZsZWN0LlJlZmxlY3RBZGFwdGVyLmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgb3JpZ2luYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAqIFNlYWxzIGEgSGVhZGVycyBpbnN0YW5jZSB0byBwcmV2ZW50IG1vZGlmaWNhdGlvbiBieSB0aHJvd2luZyBhbiBlcnJvciB3aGVuXG4gICAqIGFueSBtdXRhdGluZyBtZXRob2QgaXMgY2FsbGVkLlxuICAgKi8gc3RhdGljIHNlYWwoaGVhZGVycykge1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5KGhlYWRlcnMsIHtcbiAgICAgICAgICAgIGdldCAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICAgICAgICAgIHN3aXRjaChwcm9wKXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXBwZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2V0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWFkb25seUhlYWRlcnNFcnJvci5jYWxsYWJsZTtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmbGVjdC5SZWZsZWN0QWRhcHRlci5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAqIE1lcmdlcyBhIGhlYWRlciB2YWx1ZSBpbnRvIGEgc3RyaW5nLiBUaGlzIHN0b3JlcyBtdWx0aXBsZSB2YWx1ZXMgYXMgYW5cbiAgICogYXJyYXksIHNvIHdlIG5lZWQgdG8gbWVyZ2UgdGhlbSBpbnRvIGEgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0gdmFsdWUgYSBoZWFkZXIgdmFsdWVcbiAgICogQHJldHVybnMgYSBtZXJnZWQgaGVhZGVyIHZhbHVlIChhIHN0cmluZylcbiAgICovIG1lcmdlKHZhbHVlKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLmpvaW4oJywgJyk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAqIENyZWF0ZXMgYSBIZWFkZXJzIGluc3RhbmNlIGZyb20gYSBwbGFpbiBvYmplY3Qgb3IgYSBIZWFkZXJzIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gaGVhZGVycyBhIHBsYWluIG9iamVjdCBvciBhIEhlYWRlcnMgaW5zdGFuY2VcbiAgICogQHJldHVybnMgYSBoZWFkZXJzIGluc3RhbmNlXG4gICAqLyBzdGF0aWMgZnJvbShoZWFkZXJzKSB7XG4gICAgICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykgcmV0dXJuIGhlYWRlcnM7XG4gICAgICAgIHJldHVybiBuZXcgSGVhZGVyc0FkYXB0ZXIoaGVhZGVycyk7XG4gICAgfVxuICAgIGFwcGVuZChuYW1lLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuaGVhZGVyc1tuYW1lXTtcbiAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyc1tuYW1lXSA9IFtcbiAgICAgICAgICAgICAgICBleGlzdGluZyxcbiAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGV4aXN0aW5nKSkge1xuICAgICAgICAgICAgZXhpc3RpbmcucHVzaCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWxldGUobmFtZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5oZWFkZXJzW25hbWVdO1xuICAgIH1cbiAgICBnZXQobmFtZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuaGVhZGVyc1tuYW1lXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLm1lcmdlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGhhcyhuYW1lKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5oZWFkZXJzW25hbWVdICE9PSAndW5kZWZpbmVkJztcbiAgICB9XG4gICAgc2V0KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVhZGVyc1tuYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICBmb3JFYWNoKGNhbGxiYWNrZm4sIHRoaXNBcmcpIHtcbiAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIHRoaXMuZW50cmllcygpKXtcbiAgICAgICAgICAgIGNhbGxiYWNrZm4uY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgKmVudHJpZXMoKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMuaGVhZGVycykpe1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgLy8gV2UgYXNzZXJ0IGhlcmUgdGhhdCB0aGlzIGlzIGEgc3RyaW5nIGJlY2F1c2Ugd2UgZ290IGl0IGZyb20gdGhlXG4gICAgICAgICAgICAvLyBPYmplY3Qua2V5cygpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0KG5hbWUpO1xuICAgICAgICAgICAgeWllbGQgW1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgKmtleXMoKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMuaGVhZGVycykpe1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgeWllbGQgbmFtZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAqdmFsdWVzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmhlYWRlcnMpKXtcbiAgICAgICAgICAgIC8vIFdlIGFzc2VydCBoZXJlIHRoYXQgdGhpcyBpcyBhIHN0cmluZyBiZWNhdXNlIHdlIGdvdCBpdCBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gT2JqZWN0LmtleXMoKSBjYWxsIGFib3ZlLlxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldChrZXkpO1xuICAgICAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudHJpZXMoKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlYWRlcnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/headers.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/reflect.js":
/*!******************************************************************************!*\
  !*** ./node_modules/next/dist/server/web/spec-extension/adapters/reflect.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"ReflectAdapter\", ({\n    enumerable: true,\n    get: function() {\n        return ReflectAdapter;\n    }\n}));\nclass ReflectAdapter {\n    static get(target, prop, receiver) {\n        const value = Reflect.get(target, prop, receiver);\n        if (typeof value === 'function') {\n            return value.bind(target);\n        }\n        return value;\n    }\n    static set(target, prop, value, receiver) {\n        return Reflect.set(target, prop, value, receiver);\n    }\n    static has(target, prop) {\n        return Reflect.has(target, prop);\n    }\n    static deleteProperty(target, prop) {\n        return Reflect.deleteProperty(target, prop);\n    }\n}\n\n//# sourceMappingURL=reflect.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9yZWZsZWN0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0RBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcc2VydmVyXFx3ZWJcXHNwZWMtZXh0ZW5zaW9uXFxhZGFwdGVyc1xccmVmbGVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlJlZmxlY3RBZGFwdGVyXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBSZWZsZWN0QWRhcHRlcjtcbiAgICB9XG59KTtcbmNsYXNzIFJlZmxlY3RBZGFwdGVyIHtcbiAgICBzdGF0aWMgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmJpbmQodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHN0YXRpYyBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICB9XG4gICAgc3RhdGljIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgcmV0dXJuIFJlZmxlY3QuaGFzKHRhcmdldCwgcHJvcCk7XG4gICAgfVxuICAgIHN0YXRpYyBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZmxlY3QuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/reflect.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/request-cookies.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/next/dist/server/web/spec-extension/adapters/request-cookies.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    MutableRequestCookiesAdapter: function() {\n        return MutableRequestCookiesAdapter;\n    },\n    ReadonlyRequestCookiesError: function() {\n        return ReadonlyRequestCookiesError;\n    },\n    RequestCookiesAdapter: function() {\n        return RequestCookiesAdapter;\n    },\n    appendMutableCookies: function() {\n        return appendMutableCookies;\n    },\n    areCookiesMutableInCurrentPhase: function() {\n        return areCookiesMutableInCurrentPhase;\n    },\n    getModifiedCookieValues: function() {\n        return getModifiedCookieValues;\n    },\n    responseCookiesToRequestCookies: function() {\n        return responseCookiesToRequestCookies;\n    },\n    wrapWithMutableAccessCheck: function() {\n        return wrapWithMutableAccessCheck;\n    }\n});\nconst _cookies = __webpack_require__(/*! ../cookies */ \"(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/cookies.js\");\nconst _reflect = __webpack_require__(/*! ./reflect */ \"(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/reflect.js\");\nconst _workasyncstorageexternal = __webpack_require__(/*! ../../../app-render/work-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-async-storage.external.js\");\nconst _workunitasyncstorageexternal = __webpack_require__(/*! ../../../app-render/work-unit-async-storage.external */ \"(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage.external.js\");\nclass ReadonlyRequestCookiesError extends Error {\n    constructor(){\n        super('Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options');\n    }\n    static callable() {\n        throw new ReadonlyRequestCookiesError();\n    }\n}\nclass RequestCookiesAdapter {\n    static seal(cookies) {\n        return new Proxy(cookies, {\n            get (target, prop, receiver) {\n                switch(prop){\n                    case 'clear':\n                    case 'delete':\n                    case 'set':\n                        return ReadonlyRequestCookiesError.callable;\n                    default:\n                        return _reflect.ReflectAdapter.get(target, prop, receiver);\n                }\n            }\n        });\n    }\n}\nconst SYMBOL_MODIFY_COOKIE_VALUES = Symbol.for('next.mutated.cookies');\nfunction getModifiedCookieValues(cookies) {\n    const modified = cookies[SYMBOL_MODIFY_COOKIE_VALUES];\n    if (!modified || !Array.isArray(modified) || modified.length === 0) {\n        return [];\n    }\n    return modified;\n}\nfunction appendMutableCookies(headers, mutableCookies) {\n    const modifiedCookieValues = getModifiedCookieValues(mutableCookies);\n    if (modifiedCookieValues.length === 0) {\n        return false;\n    }\n    // Return a new response that extends the response with\n    // the modified cookies as fallbacks. `res` cookies\n    // will still take precedence.\n    const resCookies = new _cookies.ResponseCookies(headers);\n    const returnedCookies = resCookies.getAll();\n    // Set the modified cookies as fallbacks.\n    for (const cookie of modifiedCookieValues){\n        resCookies.set(cookie);\n    }\n    // Set the original cookies as the final values.\n    for (const cookie of returnedCookies){\n        resCookies.set(cookie);\n    }\n    return true;\n}\nclass MutableRequestCookiesAdapter {\n    static wrap(cookies, onUpdateCookies) {\n        const responseCookies = new _cookies.ResponseCookies(new Headers());\n        for (const cookie of cookies.getAll()){\n            responseCookies.set(cookie);\n        }\n        let modifiedValues = [];\n        const modifiedCookies = new Set();\n        const updateResponseCookies = ()=>{\n            // TODO-APP: change method of getting workStore\n            const workStore = _workasyncstorageexternal.workAsyncStorage.getStore();\n            if (workStore) {\n                workStore.pathWasRevalidated = true;\n            }\n            const allCookies = responseCookies.getAll();\n            modifiedValues = allCookies.filter((c)=>modifiedCookies.has(c.name));\n            if (onUpdateCookies) {\n                const serializedCookies = [];\n                for (const cookie of modifiedValues){\n                    const tempCookies = new _cookies.ResponseCookies(new Headers());\n                    tempCookies.set(cookie);\n                    serializedCookies.push(tempCookies.toString());\n                }\n                onUpdateCookies(serializedCookies);\n            }\n        };\n        const wrappedCookies = new Proxy(responseCookies, {\n            get (target, prop, receiver) {\n                switch(prop){\n                    // A special symbol to get the modified cookie values\n                    case SYMBOL_MODIFY_COOKIE_VALUES:\n                        return modifiedValues;\n                    // TODO: Throw error if trying to set a cookie after the response\n                    // headers have been set.\n                    case 'delete':\n                        return function(...args) {\n                            modifiedCookies.add(typeof args[0] === 'string' ? args[0] : args[0].name);\n                            try {\n                                target.delete(...args);\n                                return wrappedCookies;\n                            } finally{\n                                updateResponseCookies();\n                            }\n                        };\n                    case 'set':\n                        return function(...args) {\n                            modifiedCookies.add(typeof args[0] === 'string' ? args[0] : args[0].name);\n                            try {\n                                target.set(...args);\n                                return wrappedCookies;\n                            } finally{\n                                updateResponseCookies();\n                            }\n                        };\n                    default:\n                        return _reflect.ReflectAdapter.get(target, prop, receiver);\n                }\n            }\n        });\n        return wrappedCookies;\n    }\n}\nfunction wrapWithMutableAccessCheck(responseCookies) {\n    const wrappedCookies = new Proxy(responseCookies, {\n        get (target, prop, receiver) {\n            switch(prop){\n                case 'delete':\n                    return function(...args) {\n                        ensureCookiesAreStillMutable('cookies().delete');\n                        target.delete(...args);\n                        return wrappedCookies;\n                    };\n                case 'set':\n                    return function(...args) {\n                        ensureCookiesAreStillMutable('cookies().set');\n                        target.set(...args);\n                        return wrappedCookies;\n                    };\n                default:\n                    return _reflect.ReflectAdapter.get(target, prop, receiver);\n            }\n        }\n    });\n    return wrappedCookies;\n}\nfunction areCookiesMutableInCurrentPhase(requestStore) {\n    return requestStore.phase === 'action';\n}\n/** Ensure that cookies() starts throwing on mutation\n * if we changed phases and can no longer mutate.\n *\n * This can happen when going:\n *   'render' -> 'after'\n *   'action' -> 'render'\n * */ function ensureCookiesAreStillMutable(callingExpression) {\n    const requestStore = (0, _workunitasyncstorageexternal.getExpectedRequestStore)(callingExpression);\n    if (!areCookiesMutableInCurrentPhase(requestStore)) {\n        // TODO: maybe we can give a more precise error message based on callingExpression?\n        throw new ReadonlyRequestCookiesError();\n    }\n}\nfunction responseCookiesToRequestCookies(responseCookies) {\n    const requestCookies = new _cookies.RequestCookies(new Headers());\n    for (const cookie of responseCookies.getAll()){\n        requestCookies.set(cookie);\n    }\n    return requestCookies;\n}\n\n//# sourceMappingURL=request-cookies.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9yZXF1ZXN0LWNvb2tpZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixNQUFNLENBU0w7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLG1CQUFPLENBQUMscUdBQVk7QUFDckMsaUJBQWlCLG1CQUFPLENBQUMsNkdBQVc7QUFDcEMsa0NBQWtDLG1CQUFPLENBQUMsMklBQWlEO0FBQzNGLHNDQUFzQyxtQkFBTyxDQUFDLHFKQUFzRDtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxuZXh0XFxkaXN0XFxzZXJ2ZXJcXHdlYlxcc3BlYy1leHRlbnNpb25cXGFkYXB0ZXJzXFxyZXF1ZXN0LWNvb2tpZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBNdXRhYmxlUmVxdWVzdENvb2tpZXNBZGFwdGVyOiBudWxsLFxuICAgIFJlYWRvbmx5UmVxdWVzdENvb2tpZXNFcnJvcjogbnVsbCxcbiAgICBSZXF1ZXN0Q29va2llc0FkYXB0ZXI6IG51bGwsXG4gICAgYXBwZW5kTXV0YWJsZUNvb2tpZXM6IG51bGwsXG4gICAgYXJlQ29va2llc011dGFibGVJbkN1cnJlbnRQaGFzZTogbnVsbCxcbiAgICBnZXRNb2RpZmllZENvb2tpZVZhbHVlczogbnVsbCxcbiAgICByZXNwb25zZUNvb2tpZXNUb1JlcXVlc3RDb29raWVzOiBudWxsLFxuICAgIHdyYXBXaXRoTXV0YWJsZUFjY2Vzc0NoZWNrOiBudWxsXG59KTtcbmZ1bmN0aW9uIF9leHBvcnQodGFyZ2V0LCBhbGwpIHtcbiAgICBmb3IodmFyIG5hbWUgaW4gYWxsKU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIG5hbWUsIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiBhbGxbbmFtZV1cbiAgICB9KTtcbn1cbl9leHBvcnQoZXhwb3J0cywge1xuICAgIE11dGFibGVSZXF1ZXN0Q29va2llc0FkYXB0ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTXV0YWJsZVJlcXVlc3RDb29raWVzQWRhcHRlcjtcbiAgICB9LFxuICAgIFJlYWRvbmx5UmVxdWVzdENvb2tpZXNFcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBSZWFkb25seVJlcXVlc3RDb29raWVzRXJyb3I7XG4gICAgfSxcbiAgICBSZXF1ZXN0Q29va2llc0FkYXB0ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gUmVxdWVzdENvb2tpZXNBZGFwdGVyO1xuICAgIH0sXG4gICAgYXBwZW5kTXV0YWJsZUNvb2tpZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYXBwZW5kTXV0YWJsZUNvb2tpZXM7XG4gICAgfSxcbiAgICBhcmVDb29raWVzTXV0YWJsZUluQ3VycmVudFBoYXNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGFyZUNvb2tpZXNNdXRhYmxlSW5DdXJyZW50UGhhc2U7XG4gICAgfSxcbiAgICBnZXRNb2RpZmllZENvb2tpZVZhbHVlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBnZXRNb2RpZmllZENvb2tpZVZhbHVlcztcbiAgICB9LFxuICAgIHJlc3BvbnNlQ29va2llc1RvUmVxdWVzdENvb2tpZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VDb29raWVzVG9SZXF1ZXN0Q29va2llcztcbiAgICB9LFxuICAgIHdyYXBXaXRoTXV0YWJsZUFjY2Vzc0NoZWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHdyYXBXaXRoTXV0YWJsZUFjY2Vzc0NoZWNrO1xuICAgIH1cbn0pO1xuY29uc3QgX2Nvb2tpZXMgPSByZXF1aXJlKFwiLi4vY29va2llc1wiKTtcbmNvbnN0IF9yZWZsZWN0ID0gcmVxdWlyZShcIi4vcmVmbGVjdFwiKTtcbmNvbnN0IF93b3JrYXN5bmNzdG9yYWdlZXh0ZXJuYWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vYXBwLXJlbmRlci93b3JrLWFzeW5jLXN0b3JhZ2UuZXh0ZXJuYWxcIik7XG5jb25zdCBfd29ya3VuaXRhc3luY3N0b3JhZ2VleHRlcm5hbCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9hcHAtcmVuZGVyL3dvcmstdW5pdC1hc3luYy1zdG9yYWdlLmV4dGVybmFsXCIpO1xuY2xhc3MgUmVhZG9ubHlSZXF1ZXN0Q29va2llc0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHN1cGVyKCdDb29raWVzIGNhbiBvbmx5IGJlIG1vZGlmaWVkIGluIGEgU2VydmVyIEFjdGlvbiBvciBSb3V0ZSBIYW5kbGVyLiBSZWFkIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9hcGktcmVmZXJlbmNlL2Z1bmN0aW9ucy9jb29raWVzI29wdGlvbnMnKTtcbiAgICB9XG4gICAgc3RhdGljIGNhbGxhYmxlKCkge1xuICAgICAgICB0aHJvdyBuZXcgUmVhZG9ubHlSZXF1ZXN0Q29va2llc0Vycm9yKCk7XG4gICAgfVxufVxuY2xhc3MgUmVxdWVzdENvb2tpZXNBZGFwdGVyIHtcbiAgICBzdGF0aWMgc2VhbChjb29raWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkoY29va2llcywge1xuICAgICAgICAgICAgZ2V0ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHByb3Ape1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjbGVhcic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhZG9ubHlSZXF1ZXN0Q29va2llc0Vycm9yLmNhbGxhYmxlO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWZsZWN0LlJlZmxlY3RBZGFwdGVyLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmNvbnN0IFNZTUJPTF9NT0RJRllfQ09PS0lFX1ZBTFVFUyA9IFN5bWJvbC5mb3IoJ25leHQubXV0YXRlZC5jb29raWVzJyk7XG5mdW5jdGlvbiBnZXRNb2RpZmllZENvb2tpZVZhbHVlcyhjb29raWVzKSB7XG4gICAgY29uc3QgbW9kaWZpZWQgPSBjb29raWVzW1NZTUJPTF9NT0RJRllfQ09PS0lFX1ZBTFVFU107XG4gICAgaWYgKCFtb2RpZmllZCB8fCAhQXJyYXkuaXNBcnJheShtb2RpZmllZCkgfHwgbW9kaWZpZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIG1vZGlmaWVkO1xufVxuZnVuY3Rpb24gYXBwZW5kTXV0YWJsZUNvb2tpZXMoaGVhZGVycywgbXV0YWJsZUNvb2tpZXMpIHtcbiAgICBjb25zdCBtb2RpZmllZENvb2tpZVZhbHVlcyA9IGdldE1vZGlmaWVkQ29va2llVmFsdWVzKG11dGFibGVDb29raWVzKTtcbiAgICBpZiAobW9kaWZpZWRDb29raWVWYWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIGEgbmV3IHJlc3BvbnNlIHRoYXQgZXh0ZW5kcyB0aGUgcmVzcG9uc2Ugd2l0aFxuICAgIC8vIHRoZSBtb2RpZmllZCBjb29raWVzIGFzIGZhbGxiYWNrcy4gYHJlc2AgY29va2llc1xuICAgIC8vIHdpbGwgc3RpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICAgIGNvbnN0IHJlc0Nvb2tpZXMgPSBuZXcgX2Nvb2tpZXMuUmVzcG9uc2VDb29raWVzKGhlYWRlcnMpO1xuICAgIGNvbnN0IHJldHVybmVkQ29va2llcyA9IHJlc0Nvb2tpZXMuZ2V0QWxsKCk7XG4gICAgLy8gU2V0IHRoZSBtb2RpZmllZCBjb29raWVzIGFzIGZhbGxiYWNrcy5cbiAgICBmb3IgKGNvbnN0IGNvb2tpZSBvZiBtb2RpZmllZENvb2tpZVZhbHVlcyl7XG4gICAgICAgIHJlc0Nvb2tpZXMuc2V0KGNvb2tpZSk7XG4gICAgfVxuICAgIC8vIFNldCB0aGUgb3JpZ2luYWwgY29va2llcyBhcyB0aGUgZmluYWwgdmFsdWVzLlxuICAgIGZvciAoY29uc3QgY29va2llIG9mIHJldHVybmVkQ29va2llcyl7XG4gICAgICAgIHJlc0Nvb2tpZXMuc2V0KGNvb2tpZSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuY2xhc3MgTXV0YWJsZVJlcXVlc3RDb29raWVzQWRhcHRlciB7XG4gICAgc3RhdGljIHdyYXAoY29va2llcywgb25VcGRhdGVDb29raWVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlQ29va2llcyA9IG5ldyBfY29va2llcy5SZXNwb25zZUNvb2tpZXMobmV3IEhlYWRlcnMoKSk7XG4gICAgICAgIGZvciAoY29uc3QgY29va2llIG9mIGNvb2tpZXMuZ2V0QWxsKCkpe1xuICAgICAgICAgICAgcmVzcG9uc2VDb29raWVzLnNldChjb29raWUpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBtb2RpZmllZFZhbHVlcyA9IFtdO1xuICAgICAgICBjb25zdCBtb2RpZmllZENvb2tpZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZVJlc3BvbnNlQ29va2llcyA9ICgpPT57XG4gICAgICAgICAgICAvLyBUT0RPLUFQUDogY2hhbmdlIG1ldGhvZCBvZiBnZXR0aW5nIHdvcmtTdG9yZVxuICAgICAgICAgICAgY29uc3Qgd29ya1N0b3JlID0gX3dvcmthc3luY3N0b3JhZ2VleHRlcm5hbC53b3JrQXN5bmNTdG9yYWdlLmdldFN0b3JlKCk7XG4gICAgICAgICAgICBpZiAod29ya1N0b3JlKSB7XG4gICAgICAgICAgICAgICAgd29ya1N0b3JlLnBhdGhXYXNSZXZhbGlkYXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhbGxDb29raWVzID0gcmVzcG9uc2VDb29raWVzLmdldEFsbCgpO1xuICAgICAgICAgICAgbW9kaWZpZWRWYWx1ZXMgPSBhbGxDb29raWVzLmZpbHRlcigoYyk9Pm1vZGlmaWVkQ29va2llcy5oYXMoYy5uYW1lKSk7XG4gICAgICAgICAgICBpZiAob25VcGRhdGVDb29raWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZENvb2tpZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvb2tpZSBvZiBtb2RpZmllZFZhbHVlcyl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBDb29raWVzID0gbmV3IF9jb29raWVzLlJlc3BvbnNlQ29va2llcyhuZXcgSGVhZGVycygpKTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcENvb2tpZXMuc2V0KGNvb2tpZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWRDb29raWVzLnB1c2godGVtcENvb2tpZXMudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uVXBkYXRlQ29va2llcyhzZXJpYWxpemVkQ29va2llcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHdyYXBwZWRDb29raWVzID0gbmV3IFByb3h5KHJlc3BvbnNlQ29va2llcywge1xuICAgICAgICAgICAgZ2V0ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHByb3Ape1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHNwZWNpYWwgc3ltYm9sIHRvIGdldCB0aGUgbW9kaWZpZWQgY29va2llIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFNZTUJPTF9NT0RJRllfQ09PS0lFX1ZBTFVFUzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RpZmllZFZhbHVlcztcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogVGhyb3cgZXJyb3IgaWYgdHJ5aW5nIHRvIHNldCBhIGNvb2tpZSBhZnRlciB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gaGVhZGVycyBoYXZlIGJlZW4gc2V0LlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllZENvb2tpZXMuYWRkKHR5cGVvZiBhcmdzWzBdID09PSAnc3RyaW5nJyA/IGFyZ3NbMF0gOiBhcmdzWzBdLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5kZWxldGUoLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3cmFwcGVkQ29va2llcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJlc3BvbnNlQ29va2llcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVkQ29va2llcy5hZGQodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnID8gYXJnc1swXSA6IGFyZ3NbMF0ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnNldCguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZWRDb29raWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmVzcG9uc2VDb29raWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmbGVjdC5SZWZsZWN0QWRhcHRlci5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHdyYXBwZWRDb29raWVzO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdyYXBXaXRoTXV0YWJsZUFjY2Vzc0NoZWNrKHJlc3BvbnNlQ29va2llcykge1xuICAgIGNvbnN0IHdyYXBwZWRDb29raWVzID0gbmV3IFByb3h5KHJlc3BvbnNlQ29va2llcywge1xuICAgICAgICBnZXQgKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIHN3aXRjaChwcm9wKXtcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5zdXJlQ29va2llc0FyZVN0aWxsTXV0YWJsZSgnY29va2llcygpLmRlbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmRlbGV0ZSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3cmFwcGVkQ29va2llcztcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjYXNlICdzZXQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5zdXJlQ29va2llc0FyZVN0aWxsTXV0YWJsZSgnY29va2llcygpLnNldCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnNldCguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3cmFwcGVkQ29va2llcztcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZmxlY3QuUmVmbGVjdEFkYXB0ZXIuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHdyYXBwZWRDb29raWVzO1xufVxuZnVuY3Rpb24gYXJlQ29va2llc011dGFibGVJbkN1cnJlbnRQaGFzZShyZXF1ZXN0U3RvcmUpIHtcbiAgICByZXR1cm4gcmVxdWVzdFN0b3JlLnBoYXNlID09PSAnYWN0aW9uJztcbn1cbi8qKiBFbnN1cmUgdGhhdCBjb29raWVzKCkgc3RhcnRzIHRocm93aW5nIG9uIG11dGF0aW9uXG4gKiBpZiB3ZSBjaGFuZ2VkIHBoYXNlcyBhbmQgY2FuIG5vIGxvbmdlciBtdXRhdGUuXG4gKlxuICogVGhpcyBjYW4gaGFwcGVuIHdoZW4gZ29pbmc6XG4gKiAgICdyZW5kZXInIC0+ICdhZnRlcidcbiAqICAgJ2FjdGlvbicgLT4gJ3JlbmRlcidcbiAqICovIGZ1bmN0aW9uIGVuc3VyZUNvb2tpZXNBcmVTdGlsbE11dGFibGUoY2FsbGluZ0V4cHJlc3Npb24pIHtcbiAgICBjb25zdCByZXF1ZXN0U3RvcmUgPSAoMCwgX3dvcmt1bml0YXN5bmNzdG9yYWdlZXh0ZXJuYWwuZ2V0RXhwZWN0ZWRSZXF1ZXN0U3RvcmUpKGNhbGxpbmdFeHByZXNzaW9uKTtcbiAgICBpZiAoIWFyZUNvb2tpZXNNdXRhYmxlSW5DdXJyZW50UGhhc2UocmVxdWVzdFN0b3JlKSkge1xuICAgICAgICAvLyBUT0RPOiBtYXliZSB3ZSBjYW4gZ2l2ZSBhIG1vcmUgcHJlY2lzZSBlcnJvciBtZXNzYWdlIGJhc2VkIG9uIGNhbGxpbmdFeHByZXNzaW9uP1xuICAgICAgICB0aHJvdyBuZXcgUmVhZG9ubHlSZXF1ZXN0Q29va2llc0Vycm9yKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVzcG9uc2VDb29raWVzVG9SZXF1ZXN0Q29va2llcyhyZXNwb25zZUNvb2tpZXMpIHtcbiAgICBjb25zdCByZXF1ZXN0Q29va2llcyA9IG5ldyBfY29va2llcy5SZXF1ZXN0Q29va2llcyhuZXcgSGVhZGVycygpKTtcbiAgICBmb3IgKGNvbnN0IGNvb2tpZSBvZiByZXNwb25zZUNvb2tpZXMuZ2V0QWxsKCkpe1xuICAgICAgICByZXF1ZXN0Q29va2llcy5zZXQoY29va2llKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcXVlc3RDb29raWVzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXF1ZXN0LWNvb2tpZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/adapters/request-cookies.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/cookies.js":
/*!*********************************************************************!*\
  !*** ./node_modules/next/dist/server/web/spec-extension/cookies.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    RequestCookies: function() {\n        return _cookies.RequestCookies;\n    },\n    ResponseCookies: function() {\n        return _cookies.ResponseCookies;\n    },\n    stringifyCookie: function() {\n        return _cookies.stringifyCookie;\n    }\n});\nconst _cookies = __webpack_require__(/*! next/dist/compiled/@edge-runtime/cookies */ \"(app-pages-browser)/./node_modules/next/dist/compiled/@edge-runtime/cookies/index.js\");\n\n//# sourceMappingURL=cookies.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9jb29raWVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsTUFBTSxDQUlMO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLG1CQUFPLENBQUMsc0lBQTBDOztBQUVuRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXHNlcnZlclxcd2ViXFxzcGVjLWV4dGVuc2lvblxcY29va2llcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICAgIFJlcXVlc3RDb29raWVzOiBudWxsLFxuICAgIFJlc3BvbnNlQ29va2llczogbnVsbCxcbiAgICBzdHJpbmdpZnlDb29raWU6IG51bGxcbn0pO1xuZnVuY3Rpb24gX2V4cG9ydCh0YXJnZXQsIGFsbCkge1xuICAgIGZvcih2YXIgbmFtZSBpbiBhbGwpT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgbmFtZSwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6IGFsbFtuYW1lXVxuICAgIH0pO1xufVxuX2V4cG9ydChleHBvcnRzLCB7XG4gICAgUmVxdWVzdENvb2tpZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX2Nvb2tpZXMuUmVxdWVzdENvb2tpZXM7XG4gICAgfSxcbiAgICBSZXNwb25zZUNvb2tpZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX2Nvb2tpZXMuUmVzcG9uc2VDb29raWVzO1xuICAgIH0sXG4gICAgc3RyaW5naWZ5Q29va2llOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9jb29raWVzLnN0cmluZ2lmeUNvb2tpZTtcbiAgICB9XG59KTtcbmNvbnN0IF9jb29raWVzID0gcmVxdWlyZShcIm5leHQvZGlzdC9jb21waWxlZC9AZWRnZS1ydW50aW1lL2Nvb2tpZXNcIik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvb2tpZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/server/web/spec-extension/cookies.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/router/utils/format-url.js":
/*!**********************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/router/utils/format-url.js ***!
  \**********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("// Format function modified from nodejs\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    formatUrl: function() {\n        return formatUrl;\n    },\n    formatWithValidation: function() {\n        return formatWithValidation;\n    },\n    urlObjectKeys: function() {\n        return urlObjectKeys;\n    }\n});\nconst _interop_require_wildcard = __webpack_require__(/*! @swc/helpers/_/_interop_require_wildcard */ \"(app-pages-browser)/./node_modules/next/node_modules/@swc/helpers/esm/_interop_require_wildcard.js\");\nconst _querystring = /*#__PURE__*/ _interop_require_wildcard._(__webpack_require__(/*! ./querystring */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/router/utils/querystring.js\"));\nconst slashedProtocols = /https?|ftp|gopher|file/;\nfunction formatUrl(urlObj) {\n    let { auth, hostname } = urlObj;\n    let protocol = urlObj.protocol || '';\n    let pathname = urlObj.pathname || '';\n    let hash = urlObj.hash || '';\n    let query = urlObj.query || '';\n    let host = false;\n    auth = auth ? encodeURIComponent(auth).replace(/%3A/i, ':') + '@' : '';\n    if (urlObj.host) {\n        host = auth + urlObj.host;\n    } else if (hostname) {\n        host = auth + (~hostname.indexOf(':') ? \"[\" + hostname + \"]\" : hostname);\n        if (urlObj.port) {\n            host += ':' + urlObj.port;\n        }\n    }\n    if (query && typeof query === 'object') {\n        query = String(_querystring.urlQueryToSearchParams(query));\n    }\n    let search = urlObj.search || query && \"?\" + query || '';\n    if (protocol && !protocol.endsWith(':')) protocol += ':';\n    if (urlObj.slashes || (!protocol || slashedProtocols.test(protocol)) && host !== false) {\n        host = '//' + (host || '');\n        if (pathname && pathname[0] !== '/') pathname = '/' + pathname;\n    } else if (!host) {\n        host = '';\n    }\n    if (hash && hash[0] !== '#') hash = '#' + hash;\n    if (search && search[0] !== '?') search = '?' + search;\n    pathname = pathname.replace(/[?#]/g, encodeURIComponent);\n    search = search.replace('#', '%23');\n    return \"\" + protocol + host + pathname + search + hash;\n}\nconst urlObjectKeys = [\n    'auth',\n    'hash',\n    'host',\n    'hostname',\n    'href',\n    'path',\n    'pathname',\n    'port',\n    'protocol',\n    'query',\n    'search',\n    'slashes'\n];\nfunction formatWithValidation(url) {\n    if (true) {\n        if (url !== null && typeof url === 'object') {\n            Object.keys(url).forEach((key)=>{\n                if (!urlObjectKeys.includes(key)) {\n                    console.warn(\"Unknown key passed via urlObject into url.format: \" + key);\n                }\n            });\n        }\n    }\n    return formatUrl(url);\n} //# sourceMappingURL=format-url.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvZm9ybWF0LXVybC5qcyIsIm1hcHBpbmdzIjoiQUFBQSx1Q0FBdUM7QUFDdkMsc0RBQXNEO0FBQ3RELEVBQUU7QUFDRiwwRUFBMEU7QUFDMUUsZ0VBQWdFO0FBQ2hFLHNFQUFzRTtBQUN0RSxzRUFBc0U7QUFDdEUsNEVBQTRFO0FBQzVFLHFFQUFxRTtBQUNyRSx3QkFBd0I7QUFDeEIsRUFBRTtBQUNGLDBFQUEwRTtBQUMxRSx5REFBeUQ7QUFDekQsRUFBRTtBQUNGLDBFQUEwRTtBQUMxRSw2REFBNkQ7QUFDN0QsNEVBQTRFO0FBQzVFLDJFQUEyRTtBQUMzRSx3RUFBd0U7QUFDeEUsNEVBQTRFO0FBQzVFLHlDQUF5Qzs7Ozs7Ozs7Ozs7OztJQVF6QkEsU0FBUztlQUFUQTs7SUE2REFDLG9CQUFvQjtlQUFwQkE7O0lBZkhDLGFBQWE7ZUFBYkE7Ozs7bUZBbERnQjtBQUU3QixNQUFNQyxtQkFBbUI7QUFFbEIsU0FBU0gsVUFBVUksTUFBaUI7SUFDekMsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLFFBQVEsRUFBRSxHQUFHRjtJQUN6QixJQUFJRyxXQUFXSCxPQUFPRyxRQUFRLElBQUk7SUFDbEMsSUFBSUMsV0FBV0osT0FBT0ksUUFBUSxJQUFJO0lBQ2xDLElBQUlDLE9BQU9MLE9BQU9LLElBQUksSUFBSTtJQUMxQixJQUFJQyxRQUFRTixPQUFPTSxLQUFLLElBQUk7SUFDNUIsSUFBSUMsT0FBdUI7SUFFM0JOLE9BQU9BLE9BQU9PLG1CQUFtQlAsTUFBTVEsT0FBTyxDQUFDLFFBQVEsT0FBTyxNQUFNO0lBRXBFLElBQUlULE9BQU9PLElBQUksRUFBRTtRQUNmQSxPQUFPTixPQUFPRCxPQUFPTyxJQUFJO0lBQzNCLE9BQU8sSUFBSUwsVUFBVTtRQUNuQkssT0FBT04sT0FBUSxFQUFDQyxTQUFTUSxPQUFPLENBQUMsT0FBUSxNQUFHUixXQUFTLE1BQUtBLFFBQUFBLENBQU87UUFDakUsSUFBSUYsT0FBT1csSUFBSSxFQUFFO1lBQ2ZKLFFBQVEsTUFBTVAsT0FBT1csSUFBSTtRQUMzQjtJQUNGO0lBRUEsSUFBSUwsU0FBUyxPQUFPQSxVQUFVLFVBQVU7UUFDdENBLFFBQVFNLE9BQU9DLGFBQVlDLHNCQUFzQixDQUFDUjtJQUNwRDtJQUVBLElBQUlTLFNBQVNmLE9BQU9lLE1BQU0sSUFBS1QsU0FBVSxNQUFHQSxTQUFZO0lBRXhELElBQUlILFlBQVksQ0FBQ0EsU0FBU2EsUUFBUSxDQUFDLE1BQU1iLFlBQVk7SUFFckQsSUFDRUgsT0FBT2lCLE9BQU8sSUFDWixFQUFDZCxZQUFZSixpQkFBaUJtQixJQUFJLENBQUNmLFNBQUFBLENBQVEsSUFBTUksU0FBUyxPQUM1RDtRQUNBQSxPQUFPLE9BQVFBLENBQUFBLFFBQVEsR0FBQztRQUN4QixJQUFJSCxZQUFZQSxRQUFRLENBQUMsRUFBRSxLQUFLLEtBQUtBLFdBQVcsTUFBTUE7SUFDeEQsT0FBTyxJQUFJLENBQUNHLE1BQU07UUFDaEJBLE9BQU87SUFDVDtJQUVBLElBQUlGLFFBQVFBLElBQUksQ0FBQyxFQUFFLEtBQUssS0FBS0EsT0FBTyxNQUFNQTtJQUMxQyxJQUFJVSxVQUFVQSxNQUFNLENBQUMsRUFBRSxLQUFLLEtBQUtBLFNBQVMsTUFBTUE7SUFFaERYLFdBQVdBLFNBQVNLLE9BQU8sQ0FBQyxTQUFTRDtJQUNyQ08sU0FBU0EsT0FBT04sT0FBTyxDQUFDLEtBQUs7SUFFN0IsT0FBUSxLQUFFTixXQUFXSSxPQUFPSCxXQUFXVyxTQUFTVjtBQUNsRDtBQUVPLE1BQU1QLGdCQUFnQjtJQUMzQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVNLFNBQVNELHFCQUFxQnNCLEdBQWM7SUFDakQsSUFBSUMsSUFBb0IsRUFBb0I7UUFDMUMsSUFBSUQsUUFBUSxRQUFRLE9BQU9BLFFBQVEsVUFBVTtZQUMzQ0ksT0FBT0MsSUFBSSxDQUFDTCxLQUFLTSxPQUFPLENBQUMsQ0FBQ0M7Z0JBQ3hCLElBQUksQ0FBQzVCLGNBQWM2QixRQUFRLENBQUNELE1BQU07b0JBQ2hDRSxRQUFRQyxJQUFJLENBQ1QsdURBQW9ESDtnQkFFekQ7WUFDRjtRQUNGO0lBQ0Y7SUFFQSxPQUFPOUIsVUFBVXVCO0FBQ25CIiwic291cmNlcyI6WyJDOlxcc3JjXFxzaGFyZWRcXGxpYlxccm91dGVyXFx1dGlsc1xcZm9ybWF0LXVybC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGb3JtYXQgZnVuY3Rpb24gbW9kaWZpZWQgZnJvbSBub2RlanNcbi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5pbXBvcnQgdHlwZSB7IFVybE9iamVjdCB9IGZyb20gJ3VybCdcbmltcG9ydCB0eXBlIHsgUGFyc2VkVXJsUXVlcnkgfSBmcm9tICdxdWVyeXN0cmluZydcbmltcG9ydCAqIGFzIHF1ZXJ5c3RyaW5nIGZyb20gJy4vcXVlcnlzdHJpbmcnXG5cbmNvbnN0IHNsYXNoZWRQcm90b2NvbHMgPSAvaHR0cHM/fGZ0cHxnb3BoZXJ8ZmlsZS9cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFVybCh1cmxPYmo6IFVybE9iamVjdCkge1xuICBsZXQgeyBhdXRoLCBob3N0bmFtZSB9ID0gdXJsT2JqXG4gIGxldCBwcm90b2NvbCA9IHVybE9iai5wcm90b2NvbCB8fCAnJ1xuICBsZXQgcGF0aG5hbWUgPSB1cmxPYmoucGF0aG5hbWUgfHwgJydcbiAgbGV0IGhhc2ggPSB1cmxPYmouaGFzaCB8fCAnJ1xuICBsZXQgcXVlcnkgPSB1cmxPYmoucXVlcnkgfHwgJydcbiAgbGV0IGhvc3Q6IHN0cmluZyB8IGZhbHNlID0gZmFsc2VcblxuICBhdXRoID0gYXV0aCA/IGVuY29kZVVSSUNvbXBvbmVudChhdXRoKS5yZXBsYWNlKC8lM0EvaSwgJzonKSArICdAJyA6ICcnXG5cbiAgaWYgKHVybE9iai5ob3N0KSB7XG4gICAgaG9zdCA9IGF1dGggKyB1cmxPYmouaG9zdFxuICB9IGVsc2UgaWYgKGhvc3RuYW1lKSB7XG4gICAgaG9zdCA9IGF1dGggKyAofmhvc3RuYW1lLmluZGV4T2YoJzonKSA/IGBbJHtob3N0bmFtZX1dYCA6IGhvc3RuYW1lKVxuICAgIGlmICh1cmxPYmoucG9ydCkge1xuICAgICAgaG9zdCArPSAnOicgKyB1cmxPYmoucG9ydFxuICAgIH1cbiAgfVxuXG4gIGlmIChxdWVyeSAmJiB0eXBlb2YgcXVlcnkgPT09ICdvYmplY3QnKSB7XG4gICAgcXVlcnkgPSBTdHJpbmcocXVlcnlzdHJpbmcudXJsUXVlcnlUb1NlYXJjaFBhcmFtcyhxdWVyeSBhcyBQYXJzZWRVcmxRdWVyeSkpXG4gIH1cblxuICBsZXQgc2VhcmNoID0gdXJsT2JqLnNlYXJjaCB8fCAocXVlcnkgJiYgYD8ke3F1ZXJ5fWApIHx8ICcnXG5cbiAgaWYgKHByb3RvY29sICYmICFwcm90b2NvbC5lbmRzV2l0aCgnOicpKSBwcm90b2NvbCArPSAnOidcblxuICBpZiAoXG4gICAgdXJsT2JqLnNsYXNoZXMgfHxcbiAgICAoKCFwcm90b2NvbCB8fCBzbGFzaGVkUHJvdG9jb2xzLnRlc3QocHJvdG9jb2wpKSAmJiBob3N0ICE9PSBmYWxzZSlcbiAgKSB7XG4gICAgaG9zdCA9ICcvLycgKyAoaG9zdCB8fCAnJylcbiAgICBpZiAocGF0aG5hbWUgJiYgcGF0aG5hbWVbMF0gIT09ICcvJykgcGF0aG5hbWUgPSAnLycgKyBwYXRobmFtZVxuICB9IGVsc2UgaWYgKCFob3N0KSB7XG4gICAgaG9zdCA9ICcnXG4gIH1cblxuICBpZiAoaGFzaCAmJiBoYXNoWzBdICE9PSAnIycpIGhhc2ggPSAnIycgKyBoYXNoXG4gIGlmIChzZWFyY2ggJiYgc2VhcmNoWzBdICE9PSAnPycpIHNlYXJjaCA9ICc/JyArIHNlYXJjaFxuXG4gIHBhdGhuYW1lID0gcGF0aG5hbWUucmVwbGFjZSgvWz8jXS9nLCBlbmNvZGVVUklDb21wb25lbnQpXG4gIHNlYXJjaCA9IHNlYXJjaC5yZXBsYWNlKCcjJywgJyUyMycpXG5cbiAgcmV0dXJuIGAke3Byb3RvY29sfSR7aG9zdH0ke3BhdGhuYW1lfSR7c2VhcmNofSR7aGFzaH1gXG59XG5cbmV4cG9ydCBjb25zdCB1cmxPYmplY3RLZXlzID0gW1xuICAnYXV0aCcsXG4gICdoYXNoJyxcbiAgJ2hvc3QnLFxuICAnaG9zdG5hbWUnLFxuICAnaHJlZicsXG4gICdwYXRoJyxcbiAgJ3BhdGhuYW1lJyxcbiAgJ3BvcnQnLFxuICAncHJvdG9jb2wnLFxuICAncXVlcnknLFxuICAnc2VhcmNoJyxcbiAgJ3NsYXNoZXMnLFxuXVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0V2l0aFZhbGlkYXRpb24odXJsOiBVcmxPYmplY3QpOiBzdHJpbmcge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICBpZiAodXJsICE9PSBudWxsICYmIHR5cGVvZiB1cmwgPT09ICdvYmplY3QnKSB7XG4gICAgICBPYmplY3Qua2V5cyh1cmwpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBpZiAoIXVybE9iamVjdEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIGBVbmtub3duIGtleSBwYXNzZWQgdmlhIHVybE9iamVjdCBpbnRvIHVybC5mb3JtYXQ6ICR7a2V5fWBcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZvcm1hdFVybCh1cmwpXG59XG4iXSwibmFtZXMiOlsiZm9ybWF0VXJsIiwiZm9ybWF0V2l0aFZhbGlkYXRpb24iLCJ1cmxPYmplY3RLZXlzIiwic2xhc2hlZFByb3RvY29scyIsInVybE9iaiIsImF1dGgiLCJob3N0bmFtZSIsInByb3RvY29sIiwicGF0aG5hbWUiLCJoYXNoIiwicXVlcnkiLCJob3N0IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVwbGFjZSIsImluZGV4T2YiLCJwb3J0IiwiU3RyaW5nIiwicXVlcnlzdHJpbmciLCJ1cmxRdWVyeVRvU2VhcmNoUGFyYW1zIiwic2VhcmNoIiwiZW5kc1dpdGgiLCJzbGFzaGVzIiwidGVzdCIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwiaW5jbHVkZXMiLCJjb25zb2xlIiwid2FybiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/router/utils/format-url.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/router/utils/is-local-url.js":
/*!************************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/router/utils/is-local-url.js ***!
  \************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"isLocalURL\", ({\n    enumerable: true,\n    get: function() {\n        return isLocalURL;\n    }\n}));\nconst _utils = __webpack_require__(/*! ../../utils */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/utils.js\");\nconst _hasbasepath = __webpack_require__(/*! ../../../../client/has-base-path */ \"(app-pages-browser)/./node_modules/next/dist/client/has-base-path.js\");\nfunction isLocalURL(url) {\n    // prevent a hydration mismatch on href for url with anchor refs\n    if (!(0, _utils.isAbsoluteUrl)(url)) return true;\n    try {\n        // absolute urls can be local if they are on the same origin\n        const locationOrigin = (0, _utils.getLocationOrigin)();\n        const resolved = new URL(url, locationOrigin);\n        return resolved.origin === locationOrigin && (0, _hasbasepath.hasBasePath)(resolved.pathname);\n    } catch (_) {\n        return false;\n    }\n} //# sourceMappingURL=is-local-url.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvaXMtbG9jYWwtdXJsLmpzIiwibWFwcGluZ3MiOiI7Ozs7OENBTWdCQTs7O2VBQUFBOzs7bUNBTmlDO3lDQUNyQjtBQUtyQixTQUFTQSxXQUFXQyxHQUFXO0lBQ3BDLGdFQUFnRTtJQUNoRSxJQUFJLENBQUNDLENBQUFBLEdBQUFBLE9BQUFBLGFBQUFBLEVBQWNELE1BQU0sT0FBTztJQUNoQyxJQUFJO1FBQ0YsNERBQTREO1FBQzVELE1BQU1FLGlCQUFpQkMsQ0FBQUEsR0FBQUEsT0FBQUEsaUJBQUFBO1FBQ3ZCLE1BQU1DLFdBQVcsSUFBSUMsSUFBSUwsS0FBS0U7UUFDOUIsT0FBT0UsU0FBU0UsTUFBTSxLQUFLSixrQkFBa0JLLENBQUFBLEdBQUFBLGFBQUFBLFdBQUFBLEVBQVlILFNBQVNJLFFBQVE7SUFDNUUsRUFBRSxPQUFPQyxHQUFHO1FBQ1YsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxzcmNcXHNoYXJlZFxcbGliXFxyb3V0ZXJcXHV0aWxzXFxpcy1sb2NhbC11cmwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNBYnNvbHV0ZVVybCwgZ2V0TG9jYXRpb25PcmlnaW4gfSBmcm9tICcuLi8uLi91dGlscydcbmltcG9ydCB7IGhhc0Jhc2VQYXRoIH0gZnJvbSAnLi4vLi4vLi4vLi4vY2xpZW50L2hhcy1iYXNlLXBhdGgnXG5cbi8qKlxuICogRGV0ZWN0cyB3aGV0aGVyIGEgZ2l2ZW4gdXJsIGlzIHJvdXRhYmxlIGJ5IHRoZSBOZXh0LmpzIHJvdXRlciAoYnJvd3NlciBvbmx5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9jYWxVUkwodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gcHJldmVudCBhIGh5ZHJhdGlvbiBtaXNtYXRjaCBvbiBocmVmIGZvciB1cmwgd2l0aCBhbmNob3IgcmVmc1xuICBpZiAoIWlzQWJzb2x1dGVVcmwodXJsKSkgcmV0dXJuIHRydWVcbiAgdHJ5IHtcbiAgICAvLyBhYnNvbHV0ZSB1cmxzIGNhbiBiZSBsb2NhbCBpZiB0aGV5IGFyZSBvbiB0aGUgc2FtZSBvcmlnaW5cbiAgICBjb25zdCBsb2NhdGlvbk9yaWdpbiA9IGdldExvY2F0aW9uT3JpZ2luKClcbiAgICBjb25zdCByZXNvbHZlZCA9IG5ldyBVUkwodXJsLCBsb2NhdGlvbk9yaWdpbilcbiAgICByZXR1cm4gcmVzb2x2ZWQub3JpZ2luID09PSBsb2NhdGlvbk9yaWdpbiAmJiBoYXNCYXNlUGF0aChyZXNvbHZlZC5wYXRobmFtZSlcbiAgfSBjYXRjaCAoXykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG4iXSwibmFtZXMiOlsiaXNMb2NhbFVSTCIsInVybCIsImlzQWJzb2x1dGVVcmwiLCJsb2NhdGlvbk9yaWdpbiIsImdldExvY2F0aW9uT3JpZ2luIiwicmVzb2x2ZWQiLCJVUkwiLCJvcmlnaW4iLCJoYXNCYXNlUGF0aCIsInBhdGhuYW1lIiwiXyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/router/utils/is-local-url.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/router/utils/querystring.js":
/*!***********************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/router/utils/querystring.js ***!
  \***********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    assign: function() {\n        return assign;\n    },\n    searchParamsToUrlQuery: function() {\n        return searchParamsToUrlQuery;\n    },\n    urlQueryToSearchParams: function() {\n        return urlQueryToSearchParams;\n    }\n});\nfunction searchParamsToUrlQuery(searchParams) {\n    const query = {};\n    for (const [key, value] of searchParams.entries()){\n        const existing = query[key];\n        if (typeof existing === 'undefined') {\n            query[key] = value;\n        } else if (Array.isArray(existing)) {\n            existing.push(value);\n        } else {\n            query[key] = [\n                existing,\n                value\n            ];\n        }\n    }\n    return query;\n}\nfunction stringifyUrlQueryParam(param) {\n    if (typeof param === 'string') {\n        return param;\n    }\n    if (typeof param === 'number' && !isNaN(param) || typeof param === 'boolean') {\n        return String(param);\n    } else {\n        return '';\n    }\n}\nfunction urlQueryToSearchParams(query) {\n    const searchParams = new URLSearchParams();\n    for (const [key, value] of Object.entries(query)){\n        if (Array.isArray(value)) {\n            for (const item of value){\n                searchParams.append(key, stringifyUrlQueryParam(item));\n            }\n        } else {\n            searchParams.set(key, stringifyUrlQueryParam(value));\n        }\n    }\n    return searchParams;\n}\nfunction assign(target) {\n    for(var _len = arguments.length, searchParamsList = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++){\n        searchParamsList[_key - 1] = arguments[_key];\n    }\n    for (const searchParams of searchParamsList){\n        for (const key of searchParams.keys()){\n            target.delete(key);\n        }\n        for (const [key, value] of searchParams.entries()){\n            target.append(key, value);\n        }\n    }\n    return target;\n} //# sourceMappingURL=querystring.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvcXVlcnlzdHJpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0lBZ0RnQkEsTUFBTTtlQUFOQTs7SUE5Q0FDLHNCQUFzQjtlQUF0QkE7O0lBZ0NBQyxzQkFBc0I7ZUFBdEJBOzs7QUFoQ1QsU0FBU0QsdUJBQ2RFLFlBQTZCO0lBRTdCLE1BQU1DLFFBQXdCLENBQUM7SUFDL0IsS0FBSyxNQUFNLENBQUNDLEtBQUtDLE1BQU0sSUFBSUgsYUFBYUksT0FBTyxHQUFJO1FBQ2pELE1BQU1DLFdBQVdKLEtBQUssQ0FBQ0MsSUFBSTtRQUMzQixJQUFJLE9BQU9HLGFBQWEsYUFBYTtZQUNuQ0osS0FBSyxDQUFDQyxJQUFJLEdBQUdDO1FBQ2YsT0FBTyxJQUFJRyxNQUFNQyxPQUFPLENBQUNGLFdBQVc7WUFDbENBLFNBQVNHLElBQUksQ0FBQ0w7UUFDaEIsT0FBTztZQUNMRixLQUFLLENBQUNDLElBQUksR0FBRztnQkFBQ0c7Z0JBQVVGO2FBQU07UUFDaEM7SUFDRjtJQUNBLE9BQU9GO0FBQ1Q7QUFFQSxTQUFTUSx1QkFBdUJDLEtBQWM7SUFDNUMsSUFBSSxPQUFPQSxVQUFVLFVBQVU7UUFDN0IsT0FBT0E7SUFDVDtJQUVBLElBQ0csT0FBT0EsVUFBVSxZQUFZLENBQUNDLE1BQU1ELFVBQ3JDLE9BQU9BLFVBQVUsV0FDakI7UUFDQSxPQUFPRSxPQUFPRjtJQUNoQixPQUFPO1FBQ0wsT0FBTztJQUNUO0FBQ0Y7QUFFTyxTQUFTWCx1QkFBdUJFLEtBQXFCO0lBQzFELE1BQU1ELGVBQWUsSUFBSWE7SUFDekIsS0FBSyxNQUFNLENBQUNYLEtBQUtDLE1BQU0sSUFBSVcsT0FBT1YsT0FBTyxDQUFDSCxPQUFRO1FBQ2hELElBQUlLLE1BQU1DLE9BQU8sQ0FBQ0osUUFBUTtZQUN4QixLQUFLLE1BQU1ZLFFBQVFaLE1BQU87Z0JBQ3hCSCxhQUFhZ0IsTUFBTSxDQUFDZCxLQUFLTyx1QkFBdUJNO1lBQ2xEO1FBQ0YsT0FBTztZQUNMZixhQUFhaUIsR0FBRyxDQUFDZixLQUFLTyx1QkFBdUJOO1FBQy9DO0lBQ0Y7SUFDQSxPQUFPSDtBQUNUO0FBRU8sU0FBU0gsT0FDZHFCLE1BQXVCO0lBQ3ZCLGlDQUFHQyxtQkFBSDtRQUFHQSxnQkFBQUEsQ0FBSCwyQkFBc0M7O0lBRXRDLEtBQUssTUFBTW5CLGdCQUFnQm1CLGlCQUFrQjtRQUMzQyxLQUFLLE1BQU1qQixPQUFPRixhQUFhb0IsSUFBSSxHQUFJO1lBQ3JDRixPQUFPRyxNQUFNLENBQUNuQjtRQUNoQjtRQUVBLEtBQUssTUFBTSxDQUFDQSxLQUFLQyxNQUFNLElBQUlILGFBQWFJLE9BQU8sR0FBSTtZQUNqRGMsT0FBT0YsTUFBTSxDQUFDZCxLQUFLQztRQUNyQjtJQUNGO0lBRUEsT0FBT2U7QUFDVCIsInNvdXJjZXMiOlsiQzpcXHNyY1xcc2hhcmVkXFxsaWJcXHJvdXRlclxcdXRpbHNcXHF1ZXJ5c3RyaW5nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUGFyc2VkVXJsUXVlcnkgfSBmcm9tICdxdWVyeXN0cmluZydcblxuZXhwb3J0IGZ1bmN0aW9uIHNlYXJjaFBhcmFtc1RvVXJsUXVlcnkoXG4gIHNlYXJjaFBhcmFtczogVVJMU2VhcmNoUGFyYW1zXG4pOiBQYXJzZWRVcmxRdWVyeSB7XG4gIGNvbnN0IHF1ZXJ5OiBQYXJzZWRVcmxRdWVyeSA9IHt9XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHNlYXJjaFBhcmFtcy5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCBleGlzdGluZyA9IHF1ZXJ5W2tleV1cbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcXVlcnlba2V5XSA9IHZhbHVlXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGV4aXN0aW5nKSkge1xuICAgICAgZXhpc3RpbmcucHVzaCh2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgcXVlcnlba2V5XSA9IFtleGlzdGluZywgdmFsdWVdXG4gICAgfVxuICB9XG4gIHJldHVybiBxdWVyeVxufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlVcmxRdWVyeVBhcmFtKHBhcmFtOiB1bmtub3duKTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBwYXJhbSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcGFyYW1cbiAgfVxuXG4gIGlmIChcbiAgICAodHlwZW9mIHBhcmFtID09PSAnbnVtYmVyJyAmJiAhaXNOYU4ocGFyYW0pKSB8fFxuICAgIHR5cGVvZiBwYXJhbSA9PT0gJ2Jvb2xlYW4nXG4gICkge1xuICAgIHJldHVybiBTdHJpbmcocGFyYW0pXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVybFF1ZXJ5VG9TZWFyY2hQYXJhbXMocXVlcnk6IFBhcnNlZFVybFF1ZXJ5KTogVVJMU2VhcmNoUGFyYW1zIHtcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSB7XG4gICAgICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBzdHJpbmdpZnlVcmxRdWVyeVBhcmFtKGl0ZW0pKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZWFyY2hQYXJhbXMuc2V0KGtleSwgc3RyaW5naWZ5VXJsUXVlcnlQYXJhbSh2YWx1ZSkpXG4gICAgfVxuICB9XG4gIHJldHVybiBzZWFyY2hQYXJhbXNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbihcbiAgdGFyZ2V0OiBVUkxTZWFyY2hQYXJhbXMsXG4gIC4uLnNlYXJjaFBhcmFtc0xpc3Q6IFVSTFNlYXJjaFBhcmFtc1tdXG4pOiBVUkxTZWFyY2hQYXJhbXMge1xuICBmb3IgKGNvbnN0IHNlYXJjaFBhcmFtcyBvZiBzZWFyY2hQYXJhbXNMaXN0KSB7XG4gICAgZm9yIChjb25zdCBrZXkgb2Ygc2VhcmNoUGFyYW1zLmtleXMoKSkge1xuICAgICAgdGFyZ2V0LmRlbGV0ZShrZXkpXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2Ygc2VhcmNoUGFyYW1zLmVudHJpZXMoKSkge1xuICAgICAgdGFyZ2V0LmFwcGVuZChrZXksIHZhbHVlKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXRcbn1cbiJdLCJuYW1lcyI6WyJhc3NpZ24iLCJzZWFyY2hQYXJhbXNUb1VybFF1ZXJ5IiwidXJsUXVlcnlUb1NlYXJjaFBhcmFtcyIsInNlYXJjaFBhcmFtcyIsInF1ZXJ5Iiwia2V5IiwidmFsdWUiLCJlbnRyaWVzIiwiZXhpc3RpbmciLCJBcnJheSIsImlzQXJyYXkiLCJwdXNoIiwic3RyaW5naWZ5VXJsUXVlcnlQYXJhbSIsInBhcmFtIiwiaXNOYU4iLCJTdHJpbmciLCJVUkxTZWFyY2hQYXJhbXMiLCJPYmplY3QiLCJpdGVtIiwiYXBwZW5kIiwic2V0IiwidGFyZ2V0Iiwic2VhcmNoUGFyYW1zTGlzdCIsImtleXMiLCJkZWxldGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/router/utils/querystring.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/utils.js":
/*!****************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/utils.js ***!
  \****************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    DecodeError: function() {\n        return DecodeError;\n    },\n    MiddlewareNotFoundError: function() {\n        return MiddlewareNotFoundError;\n    },\n    MissingStaticPage: function() {\n        return MissingStaticPage;\n    },\n    NormalizeError: function() {\n        return NormalizeError;\n    },\n    PageNotFoundError: function() {\n        return PageNotFoundError;\n    },\n    SP: function() {\n        return SP;\n    },\n    ST: function() {\n        return ST;\n    },\n    WEB_VITALS: function() {\n        return WEB_VITALS;\n    },\n    execOnce: function() {\n        return execOnce;\n    },\n    getDisplayName: function() {\n        return getDisplayName;\n    },\n    getLocationOrigin: function() {\n        return getLocationOrigin;\n    },\n    getURL: function() {\n        return getURL;\n    },\n    isAbsoluteUrl: function() {\n        return isAbsoluteUrl;\n    },\n    isResSent: function() {\n        return isResSent;\n    },\n    loadGetInitialProps: function() {\n        return loadGetInitialProps;\n    },\n    normalizeRepeatedSlashes: function() {\n        return normalizeRepeatedSlashes;\n    },\n    stringifyError: function() {\n        return stringifyError;\n    }\n});\nconst WEB_VITALS = [\n    'CLS',\n    'FCP',\n    'FID',\n    'INP',\n    'LCP',\n    'TTFB'\n];\nfunction execOnce(fn) {\n    let used = false;\n    let result;\n    return function() {\n        for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){\n            args[_key] = arguments[_key];\n        }\n        if (!used) {\n            used = true;\n            result = fn(...args);\n        }\n        return result;\n    };\n}\n// Scheme: https://tools.ietf.org/html/rfc3986#section-3.1\n// Absolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\nconst ABSOLUTE_URL_REGEX = /^[a-zA-Z][a-zA-Z\\d+\\-.]*?:/;\nconst isAbsoluteUrl = (url)=>ABSOLUTE_URL_REGEX.test(url);\nfunction getLocationOrigin() {\n    const { protocol, hostname, port } = window.location;\n    return protocol + \"//\" + hostname + (port ? ':' + port : '');\n}\nfunction getURL() {\n    const { href } = window.location;\n    const origin = getLocationOrigin();\n    return href.substring(origin.length);\n}\nfunction getDisplayName(Component) {\n    return typeof Component === 'string' ? Component : Component.displayName || Component.name || 'Unknown';\n}\nfunction isResSent(res) {\n    return res.finished || res.headersSent;\n}\nfunction normalizeRepeatedSlashes(url) {\n    const urlParts = url.split('?');\n    const urlNoQuery = urlParts[0];\n    return urlNoQuery // first we replace any non-encoded backslashes with forward\n    // then normalize repeated forward slashes\n    .replace(/\\\\/g, '/').replace(/\\/\\/+/g, '/') + (urlParts[1] ? \"?\" + urlParts.slice(1).join('?') : '');\n}\nasync function loadGetInitialProps(App, ctx) {\n    if (true) {\n        var _App_prototype;\n        if ((_App_prototype = App.prototype) == null ? void 0 : _App_prototype.getInitialProps) {\n            const message = '\"' + getDisplayName(App) + '.getInitialProps()\" is defined as an instance method - visit https://nextjs.org/docs/messages/get-initial-props-as-an-instance-method for more information.';\n            throw Object.defineProperty(new Error(message), \"__NEXT_ERROR_CODE\", {\n                value: \"E394\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n    }\n    // when called from _app `ctx` is nested in `ctx`\n    const res = ctx.res || ctx.ctx && ctx.ctx.res;\n    if (!App.getInitialProps) {\n        if (ctx.ctx && ctx.Component) {\n            // @ts-ignore pageProps default\n            return {\n                pageProps: await loadGetInitialProps(ctx.Component, ctx.ctx)\n            };\n        }\n        return {};\n    }\n    const props = await App.getInitialProps(ctx);\n    if (res && isResSent(res)) {\n        return props;\n    }\n    if (!props) {\n        const message = '\"' + getDisplayName(App) + '.getInitialProps()\" should resolve to an object. But found \"' + props + '\" instead.';\n        throw Object.defineProperty(new Error(message), \"__NEXT_ERROR_CODE\", {\n            value: \"E394\",\n            enumerable: false,\n            configurable: true\n        });\n    }\n    if (true) {\n        if (Object.keys(props).length === 0 && !ctx.ctx) {\n            console.warn(\"\" + getDisplayName(App) + \" returned an empty object from `getInitialProps`. This de-optimizes and prevents automatic static optimization. https://nextjs.org/docs/messages/empty-object-getInitialProps\");\n        }\n    }\n    return props;\n}\nconst SP = typeof performance !== 'undefined';\nconst ST = SP && [\n    'mark',\n    'measure',\n    'getEntriesByName'\n].every((method)=>typeof performance[method] === 'function');\nclass DecodeError extends Error {\n}\nclass NormalizeError extends Error {\n}\nclass PageNotFoundError extends Error {\n    constructor(page){\n        super();\n        this.code = 'ENOENT';\n        this.name = 'PageNotFoundError';\n        this.message = \"Cannot find module for page: \" + page;\n    }\n}\nclass MissingStaticPage extends Error {\n    constructor(page, message){\n        super();\n        this.message = \"Failed to load static file for page: \" + page + \" \" + message;\n    }\n}\nclass MiddlewareNotFoundError extends Error {\n    constructor(){\n        super();\n        this.code = 'ENOENT';\n        this.message = \"Cannot find the middleware module\";\n    }\n}\nfunction stringifyError(error) {\n    return JSON.stringify({\n        message: error.message,\n        stack: error.stack\n    });\n} //# sourceMappingURL=utils.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUFvYWFBLFdBQVc7ZUFBWEE7O0lBb0JBQyx1QkFBdUI7ZUFBdkJBOztJQVBBQyxpQkFBaUI7ZUFBakJBOztJQVpBQyxjQUFjO2VBQWRBOztJQUNBQyxpQkFBaUI7ZUFBakJBOztJQVRBQyxFQUFFO2VBQUZBOztJQUNBQyxFQUFFO2VBQUZBOztJQWxYQUMsVUFBVTtlQUFWQTs7SUFzUUdDLFFBQVE7ZUFBUkE7O0lBK0JBQyxjQUFjO2VBQWRBOztJQVhBQyxpQkFBaUI7ZUFBakJBOztJQUtBQyxNQUFNO2VBQU5BOztJQVBIQyxhQUFhO2VBQWJBOztJQW1CR0MsU0FBUztlQUFUQTs7SUFrQk1DLG1CQUFtQjtlQUFuQkE7O0lBZE5DLHdCQUF3QjtlQUF4QkE7O0lBK0dBQyxnQkFBYztlQUFkQTs7O0FBOVpULE1BQU1ULGFBQWE7SUFBQztJQUFPO0lBQU87SUFBTztJQUFPO0lBQU87Q0FBTztBQXNROUQsU0FBU0MsU0FDZFMsRUFBSztJQUVMLElBQUlDLE9BQU87SUFDWCxJQUFJQztJQUVKLE9BQVE7eUNBQUlDLE9BQUFBLElBQUFBLE1BQUFBLE9BQUFBLE9BQUFBLEdBQUFBLE9BQUFBLE1BQUFBLE9BQUFBO1lBQUFBLElBQUFBLENBQUFBLEtBQUFBLEdBQUFBLFNBQUFBLENBQUFBLEtBQUFBOztRQUNWLElBQUksQ0FBQ0YsTUFBTTtZQUNUQSxPQUFPO1lBQ1BDLFNBQVNGLE1BQU1HO1FBQ2pCO1FBQ0EsT0FBT0Q7SUFDVDtBQUNGO0FBRUEsMERBQTBEO0FBQzFELGdFQUFnRTtBQUNoRSxNQUFNRSxxQkFBcUI7QUFDcEIsTUFBTVQsZ0JBQWdCLENBQUNVLE1BQWdCRCxtQkFBbUJFLElBQUksQ0FBQ0Q7QUFFL0QsU0FBU1o7SUFDZCxNQUFNLEVBQUVjLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxJQUFJLEVBQUUsR0FBR0MsT0FBT0MsUUFBUTtJQUNwRCxPQUFVSixXQUFTLE9BQUlDLFdBQVdDLENBQUFBLE9BQU8sTUFBTUEsT0FBTyxHQUFDO0FBQ3pEO0FBRU8sU0FBU2Y7SUFDZCxNQUFNLEVBQUVrQixJQUFJLEVBQUUsR0FBR0YsT0FBT0MsUUFBUTtJQUNoQyxNQUFNRSxTQUFTcEI7SUFDZixPQUFPbUIsS0FBS0UsU0FBUyxDQUFDRCxPQUFPRSxNQUFNO0FBQ3JDO0FBRU8sU0FBU3ZCLGVBQWtCd0IsU0FBMkI7SUFDM0QsT0FBTyxPQUFPQSxjQUFjLFdBQ3hCQSxZQUNBQSxVQUFVQyxXQUFXLElBQUlELFVBQVVFLElBQUksSUFBSTtBQUNqRDtBQUVPLFNBQVN0QixVQUFVdUIsR0FBbUI7SUFDM0MsT0FBT0EsSUFBSUMsUUFBUSxJQUFJRCxJQUFJRSxXQUFXO0FBQ3hDO0FBRU8sU0FBU3ZCLHlCQUF5Qk8sR0FBVztJQUNsRCxNQUFNaUIsV0FBV2pCLElBQUlrQixLQUFLLENBQUM7SUFDM0IsTUFBTUMsYUFBYUYsUUFBUSxDQUFDLEVBQUU7SUFFOUIsT0FDRUUsV0FDRSw0REFBNEQ7SUFDNUQsMENBQTBDO0tBQ3pDQyxPQUFPLENBQUMsT0FBTyxLQUNmQSxPQUFPLENBQUMsVUFBVSxPQUNwQkgsQ0FBQUEsUUFBUSxDQUFDLEVBQUUsR0FBSSxNQUFHQSxTQUFTSSxLQUFLLENBQUMsR0FBR0MsSUFBSSxDQUFDLE9BQVMsR0FBQztBQUV4RDtBQUVPLGVBQWU5QixvQkFJcEIrQixHQUFnQyxFQUFFQyxHQUFNO0lBQ3hDLElBQUlDLElBQW9CLEVBQW1CO1lBQ3JDRjtRQUFKLEtBQUlBLGlCQUFBQSxJQUFJSyxTQUFBQSxLQUFTLGdCQUFiTCxlQUFlTSxlQUFlLEVBQUU7WUFDbEMsTUFBTUMsVUFBVyxNQUFHM0MsZUFDbEJvQyxPQUNBO1lBQ0YsTUFBTSxxQkFBa0IsQ0FBbEIsSUFBSVEsTUFBTUQsVUFBVjt1QkFBQTs0QkFBQTs4QkFBQTtZQUFpQjtRQUN6QjtJQUNGO0lBQ0EsaURBQWlEO0lBQ2pELE1BQU1oQixNQUFNVSxJQUFJVixHQUFHLElBQUtVLElBQUlBLEdBQUcsSUFBSUEsSUFBSUEsR0FBRyxDQUFDVixHQUFHO0lBRTlDLElBQUksQ0FBQ1MsSUFBSU0sZUFBZSxFQUFFO1FBQ3hCLElBQUlMLElBQUlBLEdBQUcsSUFBSUEsSUFBSWIsU0FBUyxFQUFFO1lBQzVCLCtCQUErQjtZQUMvQixPQUFPO2dCQUNMcUIsV0FBVyxNQUFNeEMsb0JBQW9CZ0MsSUFBSWIsU0FBUyxFQUFFYSxJQUFJQSxHQUFHO1lBQzdEO1FBQ0Y7UUFDQSxPQUFPLENBQUM7SUFDVjtJQUVBLE1BQU1TLFFBQVEsTUFBTVYsSUFBSU0sZUFBZSxDQUFDTDtJQUV4QyxJQUFJVixPQUFPdkIsVUFBVXVCLE1BQU07UUFDekIsT0FBT21CO0lBQ1Q7SUFFQSxJQUFJLENBQUNBLE9BQU87UUFDVixNQUFNSCxVQUFXLE1BQUczQyxlQUNsQm9DLE9BQ0EsaUVBQThEVSxRQUFNO1FBQ3RFLE1BQU0scUJBQWtCLENBQWxCLElBQUlGLE1BQU1ELFVBQVY7bUJBQUE7d0JBQUE7MEJBQUE7UUFBaUI7SUFDekI7SUFFQSxJQUFJTCxJQUFvQixFQUFtQjtRQUN6QyxJQUFJUyxPQUFPQyxJQUFJLENBQUNGLE9BQU92QixNQUFNLEtBQUssS0FBSyxDQUFDYyxJQUFJQSxHQUFHLEVBQUU7WUFDL0NZLFFBQVFDLElBQUksQ0FDVCxLQUFFbEQsZUFDRG9DLE9BQ0E7UUFFTjtJQUNGO0lBRUEsT0FBT1U7QUFDVDtBQUVPLE1BQU1sRCxLQUFLLE9BQU91RCxnQkFBZ0I7QUFDbEMsTUFBTXRELEtBQ1hELE1BQ0M7SUFBQztJQUFRO0lBQVc7Q0FBbUIsQ0FBV3dELEtBQUssQ0FDdEQsQ0FBQ0MsU0FBVyxPQUFPRixXQUFXLENBQUNFLE9BQU8sS0FBSztBQUd4QyxNQUFNOUQsb0JBQW9CcUQ7QUFBTztBQUNqQyxNQUFNbEQsdUJBQXVCa0Q7QUFBTztBQUNwQyxNQUFNakQsMEJBQTBCaUQ7SUFHckNVLFlBQVlDLElBQVksQ0FBRTtRQUN4QixLQUFLO1FBQ0wsSUFBSSxDQUFDQyxJQUFJLEdBQUc7UUFDWixJQUFJLENBQUM5QixJQUFJLEdBQUc7UUFDWixJQUFJLENBQUNpQixPQUFPLEdBQUksa0NBQStCWTtJQUNqRDtBQUNGO0FBRU8sTUFBTTlELDBCQUEwQm1EO0lBQ3JDVSxZQUFZQyxJQUFZLEVBQUVaLE9BQWUsQ0FBRTtRQUN6QyxLQUFLO1FBQ0wsSUFBSSxDQUFDQSxPQUFPLEdBQUksMENBQXVDWSxPQUFLLE1BQUdaO0lBQ2pFO0FBQ0Y7QUFFTyxNQUFNbkQsZ0NBQWdDb0Q7SUFFM0NVLGFBQWM7UUFDWixLQUFLO1FBQ0wsSUFBSSxDQUFDRSxJQUFJLEdBQUc7UUFDWixJQUFJLENBQUNiLE9BQU8sR0FBSTtJQUNsQjtBQUNGO0FBV08sU0FBU3BDLGVBQWVrRCxLQUFZO0lBQ3pDLE9BQU9DLEtBQUtDLFNBQVMsQ0FBQztRQUFFaEIsU0FBU2MsTUFBTWQsT0FBTztRQUFFaUIsT0FBT0gsTUFBTUcsS0FBSztJQUFDO0FBQ3JFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxzcmNcXHNoYXJlZFxcbGliXFx1dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEh0bWxQcm9wcyB9IGZyb20gJy4vaHRtbC1jb250ZXh0LnNoYXJlZC1ydW50aW1lJ1xuaW1wb3J0IHR5cGUgeyBDb21wb25lbnRUeXBlLCBKU1ggfSBmcm9tICdyZWFjdCdcbmltcG9ydCB0eXBlIHsgRG9tYWluTG9jYWxlIH0gZnJvbSAnLi4vLi4vc2VydmVyL2NvbmZpZydcbmltcG9ydCB0eXBlIHsgRW52IH0gZnJvbSAnQG5leHQvZW52J1xuaW1wb3J0IHR5cGUgeyBJbmNvbWluZ01lc3NhZ2UsIFNlcnZlclJlc3BvbnNlIH0gZnJvbSAnaHR0cCdcbmltcG9ydCB0eXBlIHsgTmV4dFJvdXRlciB9IGZyb20gJy4vcm91dGVyL3JvdXRlcidcbmltcG9ydCB0eXBlIHsgUGFyc2VkVXJsUXVlcnkgfSBmcm9tICdxdWVyeXN0cmluZydcbmltcG9ydCB0eXBlIHsgUHJldmlld0RhdGEgfSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCB0eXBlIHsgQ09NUElMRVJfTkFNRVMgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB0eXBlIGZzIGZyb20gJ2ZzJ1xuXG5leHBvcnQgdHlwZSBOZXh0Q29tcG9uZW50VHlwZTxcbiAgQ29udGV4dCBleHRlbmRzIEJhc2VDb250ZXh0ID0gTmV4dFBhZ2VDb250ZXh0LFxuICBJbml0aWFsUHJvcHMgPSB7fSxcbiAgUHJvcHMgPSB7fSxcbj4gPSBDb21wb25lbnRUeXBlPFByb3BzPiAmIHtcbiAgLyoqXG4gICAqIFVzZWQgZm9yIGluaXRpYWwgcGFnZSBsb2FkIGRhdGEgcG9wdWxhdGlvbi4gRGF0YSByZXR1cm5lZCBmcm9tIGBnZXRJbml0aWFsUHJvcHNgIGlzIHNlcmlhbGl6ZWQgd2hlbiBzZXJ2ZXIgcmVuZGVyZWQuXG4gICAqIE1ha2Ugc3VyZSB0byByZXR1cm4gcGxhaW4gYE9iamVjdGAgd2l0aG91dCB1c2luZyBgRGF0ZWAsIGBNYXBgLCBgU2V0YC5cbiAgICogQHBhcmFtIGNvbnRleHQgQ29udGV4dCBvZiBgcGFnZWBcbiAgICovXG4gIGdldEluaXRpYWxQcm9wcz8oY29udGV4dDogQ29udGV4dCk6IEluaXRpYWxQcm9wcyB8IFByb21pc2U8SW5pdGlhbFByb3BzPlxufVxuXG5leHBvcnQgdHlwZSBEb2N1bWVudFR5cGUgPSBOZXh0Q29tcG9uZW50VHlwZTxcbiAgRG9jdW1lbnRDb250ZXh0LFxuICBEb2N1bWVudEluaXRpYWxQcm9wcyxcbiAgRG9jdW1lbnRQcm9wc1xuPlxuXG5leHBvcnQgdHlwZSBBcHBUeXBlPFAgPSB7fT4gPSBOZXh0Q29tcG9uZW50VHlwZTxcbiAgQXBwQ29udGV4dFR5cGUsXG4gIFAsXG4gIEFwcFByb3BzVHlwZTxhbnksIFA+XG4+XG5cbmV4cG9ydCB0eXBlIEFwcFRyZWVUeXBlID0gQ29tcG9uZW50VHlwZTxcbiAgQXBwSW5pdGlhbFByb3BzICYgeyBbbmFtZTogc3RyaW5nXTogYW55IH1cbj5cblxuLyoqXG4gKiBXZWIgdml0YWxzIHByb3ZpZGVkIHRvIF9hcHAucmVwb3J0V2ViVml0YWxzIGJ5IENvcmUgV2ViIFZpdGFscyBwbHVnaW4gZGV2ZWxvcGVkIGJ5IEdvb2dsZSBDaHJvbWUgdGVhbS5cbiAqIGh0dHBzOi8vbmV4dGpzLm9yZy9ibG9nL25leHQtOS00I2ludGVncmF0ZWQtd2ViLXZpdGFscy1yZXBvcnRpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IFdFQl9WSVRBTFMgPSBbJ0NMUycsICdGQ1AnLCAnRklEJywgJ0lOUCcsICdMQ1AnLCAnVFRGQiddIGFzIGNvbnN0XG5leHBvcnQgdHlwZSBOZXh0V2ViVml0YWxzTWV0cmljID0ge1xuICBpZDogc3RyaW5nXG4gIHN0YXJ0VGltZTogbnVtYmVyXG4gIHZhbHVlOiBudW1iZXJcbiAgYXR0cmlidXRpb24/OiB7IFtrZXk6IHN0cmluZ106IHVua25vd24gfVxufSAmIChcbiAgfCB7XG4gICAgICBsYWJlbDogJ3dlYi12aXRhbCdcbiAgICAgIG5hbWU6ICh0eXBlb2YgV0VCX1ZJVEFMUylbbnVtYmVyXVxuICAgIH1cbiAgfCB7XG4gICAgICBsYWJlbDogJ2N1c3RvbSdcbiAgICAgIG5hbWU6XG4gICAgICAgIHwgJ05leHQuanMtaHlkcmF0aW9uJ1xuICAgICAgICB8ICdOZXh0LmpzLXJvdXRlLWNoYW5nZS10by1yZW5kZXInXG4gICAgICAgIHwgJ05leHQuanMtcmVuZGVyJ1xuICAgIH1cbilcblxuZXhwb3J0IHR5cGUgRW5oYW5jZXI8Qz4gPSAoQ29tcG9uZW50OiBDKSA9PiBDXG5cbmV4cG9ydCB0eXBlIENvbXBvbmVudHNFbmhhbmNlciA9XG4gIHwge1xuICAgICAgZW5oYW5jZUFwcD86IEVuaGFuY2VyPEFwcFR5cGU+XG4gICAgICBlbmhhbmNlQ29tcG9uZW50PzogRW5oYW5jZXI8TmV4dENvbXBvbmVudFR5cGU+XG4gICAgfVxuICB8IEVuaGFuY2VyPE5leHRDb21wb25lbnRUeXBlPlxuXG5leHBvcnQgdHlwZSBSZW5kZXJQYWdlUmVzdWx0ID0ge1xuICBodG1sOiBzdHJpbmdcbiAgaGVhZD86IEFycmF5PEpTWC5FbGVtZW50IHwgbnVsbD5cbn1cblxuZXhwb3J0IHR5cGUgUmVuZGVyUGFnZSA9IChcbiAgb3B0aW9ucz86IENvbXBvbmVudHNFbmhhbmNlclxuKSA9PiBEb2N1bWVudEluaXRpYWxQcm9wcyB8IFByb21pc2U8RG9jdW1lbnRJbml0aWFsUHJvcHM+XG5cbmV4cG9ydCB0eXBlIEJhc2VDb250ZXh0ID0ge1xuICByZXM/OiBTZXJ2ZXJSZXNwb25zZVxuICBbazogc3RyaW5nXTogYW55XG59XG5cbmV4cG9ydCB0eXBlIE5FWFRfREFUQSA9IHtcbiAgcHJvcHM6IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgcGFnZTogc3RyaW5nXG4gIHF1ZXJ5OiBQYXJzZWRVcmxRdWVyeVxuICBidWlsZElkOiBzdHJpbmdcbiAgYXNzZXRQcmVmaXg/OiBzdHJpbmdcbiAgcnVudGltZUNvbmZpZz86IHsgW2tleTogc3RyaW5nXTogYW55IH1cbiAgbmV4dEV4cG9ydD86IGJvb2xlYW5cbiAgYXV0b0V4cG9ydD86IGJvb2xlYW5cbiAgaXNGYWxsYmFjaz86IGJvb2xlYW5cbiAgaXNFeHBlcmltZW50YWxDb21waWxlPzogYm9vbGVhblxuICBkeW5hbWljSWRzPzogKHN0cmluZyB8IG51bWJlcilbXVxuICBlcnI/OiBFcnJvciAmIHtcbiAgICBzdGF0dXNDb2RlPzogbnVtYmVyXG4gICAgc291cmNlPzogdHlwZW9mIENPTVBJTEVSX05BTUVTLnNlcnZlciB8IHR5cGVvZiBDT01QSUxFUl9OQU1FUy5lZGdlU2VydmVyXG4gIH1cbiAgZ3NwPzogYm9vbGVhblxuICBnc3NwPzogYm9vbGVhblxuICBjdXN0b21TZXJ2ZXI/OiBib29sZWFuXG4gIGdpcD86IGJvb2xlYW5cbiAgYXBwR2lwPzogYm9vbGVhblxuICBsb2NhbGU/OiBzdHJpbmdcbiAgbG9jYWxlcz86IHJlYWRvbmx5IHN0cmluZ1tdXG4gIGRlZmF1bHRMb2NhbGU/OiBzdHJpbmdcbiAgZG9tYWluTG9jYWxlcz86IHJlYWRvbmx5IERvbWFpbkxvY2FsZVtdXG4gIHNjcmlwdExvYWRlcj86IGFueVtdXG4gIGlzUHJldmlldz86IGJvb2xlYW5cbiAgbm90Rm91bmRTcmNQYWdlPzogc3RyaW5nXG59XG5cbi8qKlxuICogYE5leHRgIGNvbnRleHRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBOZXh0UGFnZUNvbnRleHQge1xuICAvKipcbiAgICogRXJyb3Igb2JqZWN0IGlmIGVuY291bnRlcmVkIGR1cmluZyByZW5kZXJpbmdcbiAgICovXG4gIGVycj86IChFcnJvciAmIHsgc3RhdHVzQ29kZT86IG51bWJlciB9KSB8IG51bGxcbiAgLyoqXG4gICAqIGBIVFRQYCByZXF1ZXN0IG9iamVjdC5cbiAgICovXG4gIHJlcT86IEluY29taW5nTWVzc2FnZVxuICAvKipcbiAgICogYEhUVFBgIHJlc3BvbnNlIG9iamVjdC5cbiAgICovXG4gIHJlcz86IFNlcnZlclJlc3BvbnNlXG4gIC8qKlxuICAgKiBQYXRoIHNlY3Rpb24gb2YgYFVSTGAuXG4gICAqL1xuICBwYXRobmFtZTogc3RyaW5nXG4gIC8qKlxuICAgKiBRdWVyeSBzdHJpbmcgc2VjdGlvbiBvZiBgVVJMYCBwYXJzZWQgYXMgYW4gb2JqZWN0LlxuICAgKi9cbiAgcXVlcnk6IFBhcnNlZFVybFF1ZXJ5XG4gIC8qKlxuICAgKiBgU3RyaW5nYCBvZiB0aGUgYWN0dWFsIHBhdGggaW5jbHVkaW5nIHF1ZXJ5LlxuICAgKi9cbiAgYXNQYXRoPzogc3RyaW5nXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudGx5IGFjdGl2ZSBsb2NhbGVcbiAgICovXG4gIGxvY2FsZT86IHN0cmluZ1xuICAvKipcbiAgICogQWxsIGNvbmZpZ3VyZWQgbG9jYWxlc1xuICAgKi9cbiAgbG9jYWxlcz86IHJlYWRvbmx5IHN0cmluZ1tdXG4gIC8qKlxuICAgKiBUaGUgY29uZmlndXJlZCBkZWZhdWx0IGxvY2FsZVxuICAgKi9cbiAgZGVmYXVsdExvY2FsZT86IHN0cmluZ1xuICAvKipcbiAgICogYENvbXBvbmVudGAgdGhlIHRyZWUgb2YgdGhlIEFwcCB0byB1c2UgaWYgbmVlZGluZyB0byByZW5kZXIgc2VwYXJhdGVseVxuICAgKi9cbiAgQXBwVHJlZTogQXBwVHJlZVR5cGVcbn1cblxuZXhwb3J0IHR5cGUgQXBwQ29udGV4dFR5cGU8Um91dGVyIGV4dGVuZHMgTmV4dFJvdXRlciA9IE5leHRSb3V0ZXI+ID0ge1xuICBDb21wb25lbnQ6IE5leHRDb21wb25lbnRUeXBlPE5leHRQYWdlQ29udGV4dD5cbiAgQXBwVHJlZTogQXBwVHJlZVR5cGVcbiAgY3R4OiBOZXh0UGFnZUNvbnRleHRcbiAgcm91dGVyOiBSb3V0ZXJcbn1cblxuZXhwb3J0IHR5cGUgQXBwSW5pdGlhbFByb3BzPFBhZ2VQcm9wcyA9IGFueT4gPSB7XG4gIHBhZ2VQcm9wczogUGFnZVByb3BzXG59XG5cbmV4cG9ydCB0eXBlIEFwcFByb3BzVHlwZTxcbiAgUm91dGVyIGV4dGVuZHMgTmV4dFJvdXRlciA9IE5leHRSb3V0ZXIsXG4gIFBhZ2VQcm9wcyA9IHt9LFxuPiA9IEFwcEluaXRpYWxQcm9wczxQYWdlUHJvcHM+ICYge1xuICBDb21wb25lbnQ6IE5leHRDb21wb25lbnRUeXBlPE5leHRQYWdlQ29udGV4dCwgYW55LCBhbnk+XG4gIHJvdXRlcjogUm91dGVyXG4gIF9fTl9TU0c/OiBib29sZWFuXG4gIF9fTl9TU1A/OiBib29sZWFuXG59XG5cbmV4cG9ydCB0eXBlIERvY3VtZW50Q29udGV4dCA9IE5leHRQYWdlQ29udGV4dCAmIHtcbiAgcmVuZGVyUGFnZTogUmVuZGVyUGFnZVxuICBkZWZhdWx0R2V0SW5pdGlhbFByb3BzKFxuICAgIGN0eDogRG9jdW1lbnRDb250ZXh0LFxuICAgIG9wdGlvbnM/OiB7IG5vbmNlPzogc3RyaW5nIH1cbiAgKTogUHJvbWlzZTxEb2N1bWVudEluaXRpYWxQcm9wcz5cbn1cblxuZXhwb3J0IHR5cGUgRG9jdW1lbnRJbml0aWFsUHJvcHMgPSBSZW5kZXJQYWdlUmVzdWx0ICYge1xuICBzdHlsZXM/OiBSZWFjdC5SZWFjdEVsZW1lbnRbXSB8IEl0ZXJhYmxlPFJlYWN0LlJlYWN0Tm9kZT4gfCBKU1guRWxlbWVudFxufVxuXG5leHBvcnQgdHlwZSBEb2N1bWVudFByb3BzID0gRG9jdW1lbnRJbml0aWFsUHJvcHMgJiBIdG1sUHJvcHNcblxuLyoqXG4gKiBOZXh0IGBBUElgIHJvdXRlIHJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBOZXh0QXBpUmVxdWVzdCBleHRlbmRzIEluY29taW5nTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBPYmplY3Qgb2YgYHF1ZXJ5YCB2YWx1ZXMgZnJvbSB1cmxcbiAgICovXG4gIHF1ZXJ5OiBQYXJ0aWFsPHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBzdHJpbmdbXVxuICB9PlxuICAvKipcbiAgICogT2JqZWN0IG9mIGBjb29raWVzYCBmcm9tIGhlYWRlclxuICAgKi9cbiAgY29va2llczogUGFydGlhbDx7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nXG4gIH0+XG5cbiAgYm9keTogYW55XG5cbiAgZW52OiBFbnZcblxuICBkcmFmdE1vZGU/OiBib29sZWFuXG5cbiAgcHJldmlldz86IGJvb2xlYW5cbiAgLyoqXG4gICAqIFByZXZpZXcgZGF0YSBzZXQgb24gdGhlIHJlcXVlc3QsIGlmIGFueVxuICAgKiAqL1xuICBwcmV2aWV3RGF0YT86IFByZXZpZXdEYXRhXG59XG5cbi8qKlxuICogU2VuZCBib2R5IG9mIHJlc3BvbnNlXG4gKi9cbnR5cGUgU2VuZDxUPiA9IChib2R5OiBUKSA9PiB2b2lkXG5cbi8qKlxuICogTmV4dCBgQVBJYCByb3V0ZSByZXNwb25zZVxuICovXG5leHBvcnQgdHlwZSBOZXh0QXBpUmVzcG9uc2U8RGF0YSA9IGFueT4gPSBTZXJ2ZXJSZXNwb25zZSAmIHtcbiAgLyoqXG4gICAqIFNlbmQgZGF0YSBgYW55YCBkYXRhIGluIHJlc3BvbnNlXG4gICAqL1xuICBzZW5kOiBTZW5kPERhdGE+XG4gIC8qKlxuICAgKiBTZW5kIGRhdGEgYGpzb25gIGRhdGEgaW4gcmVzcG9uc2VcbiAgICovXG4gIGpzb246IFNlbmQ8RGF0YT5cbiAgc3RhdHVzOiAoc3RhdHVzQ29kZTogbnVtYmVyKSA9PiBOZXh0QXBpUmVzcG9uc2U8RGF0YT5cbiAgcmVkaXJlY3QodXJsOiBzdHJpbmcpOiBOZXh0QXBpUmVzcG9uc2U8RGF0YT5cbiAgcmVkaXJlY3Qoc3RhdHVzOiBudW1iZXIsIHVybDogc3RyaW5nKTogTmV4dEFwaVJlc3BvbnNlPERhdGE+XG5cbiAgLyoqXG4gICAqIFNldCBkcmFmdCBtb2RlXG4gICAqL1xuICBzZXREcmFmdE1vZGU6IChvcHRpb25zOiB7IGVuYWJsZTogYm9vbGVhbiB9KSA9PiBOZXh0QXBpUmVzcG9uc2U8RGF0YT5cblxuICAvKipcbiAgICogU2V0IHByZXZpZXcgZGF0YSBmb3IgTmV4dC5qcycgcHJlcmVuZGVyIG1vZGVcbiAgICovXG4gIHNldFByZXZpZXdEYXRhOiAoXG4gICAgZGF0YTogb2JqZWN0IHwgc3RyaW5nLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICAvKipcbiAgICAgICAqIFNwZWNpZmllcyB0aGUgbnVtYmVyIChpbiBzZWNvbmRzKSBmb3IgdGhlIHByZXZpZXcgc2Vzc2lvbiB0byBsYXN0IGZvci5cbiAgICAgICAqIFRoZSBnaXZlbiBudW1iZXIgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYW4gaW50ZWdlciBieSByb3VuZGluZyBkb3duLlxuICAgICAgICogQnkgZGVmYXVsdCwgbm8gbWF4aW11bSBhZ2UgaXMgc2V0IGFuZCB0aGUgcHJldmlldyBzZXNzaW9uIGZpbmlzaGVzXG4gICAgICAgKiB3aGVuIHRoZSBjbGllbnQgc2h1dHMgZG93biAoYnJvd3NlciBpcyBjbG9zZWQpLlxuICAgICAgICovXG4gICAgICBtYXhBZ2U/OiBudW1iZXJcbiAgICAgIC8qKlxuICAgICAgICogU3BlY2lmaWVzIHRoZSBwYXRoIGZvciB0aGUgcHJldmlldyBzZXNzaW9uIHRvIHdvcmsgdW5kZXIuIEJ5IGRlZmF1bHQsXG4gICAgICAgKiB0aGUgcGF0aCBpcyBjb25zaWRlcmVkIHRoZSBcImRlZmF1bHQgcGF0aFwiLCBpLmUuLCBhbnkgcGFnZXMgdW5kZXIgXCIvXCIuXG4gICAgICAgKi9cbiAgICAgIHBhdGg/OiBzdHJpbmdcbiAgICB9XG4gICkgPT4gTmV4dEFwaVJlc3BvbnNlPERhdGE+XG5cbiAgLyoqXG4gICAqIENsZWFyIHByZXZpZXcgZGF0YSBmb3IgTmV4dC5qcycgcHJlcmVuZGVyIG1vZGVcbiAgICovXG4gIGNsZWFyUHJldmlld0RhdGE6IChvcHRpb25zPzogeyBwYXRoPzogc3RyaW5nIH0pID0+IE5leHRBcGlSZXNwb25zZTxEYXRhPlxuXG4gIC8qKlxuICAgKiBSZXZhbGlkYXRlIGEgc3BlY2lmaWMgcGFnZSBhbmQgcmVnZW5lcmF0ZSBpdCB1c2luZyBPbi1EZW1hbmQgSW5jcmVtZW50YWxcbiAgICogU3RhdGljIFJlZ2VuZXJhdGlvbi5cbiAgICogVGhlIHBhdGggc2hvdWxkIGJlIGFuIGFjdHVhbCBwYXRoLCBub3QgYSByZXdyaXR0ZW4gcGF0aC4gRS5nLiBmb3JcbiAgICogXCIvYmxvZy9bc2x1Z11cIiB0aGlzIHNob3VsZCBiZSBcIi9ibG9nL3Bvc3QtMVwiLlxuICAgKiBAbGluayBodHRwczovL25leHRqcy5vcmcvZG9jcy9hcHAvYnVpbGRpbmcteW91ci1hcHBsaWNhdGlvbi9kYXRhLWZldGNoaW5nL2luY3JlbWVudGFsLXN0YXRpYy1yZWdlbmVyYXRpb24jb24tZGVtYW5kLXJldmFsaWRhdGlvbi13aXRoLXJldmFsaWRhdGVwYXRoXG4gICAqL1xuICByZXZhbGlkYXRlOiAoXG4gICAgdXJsUGF0aDogc3RyaW5nLFxuICAgIG9wdHM/OiB7XG4gICAgICB1bnN0YWJsZV9vbmx5R2VuZXJhdGVkPzogYm9vbGVhblxuICAgIH1cbiAgKSA9PiBQcm9taXNlPHZvaWQ+XG59XG5cbi8qKlxuICogTmV4dCBgQVBJYCByb3V0ZSBoYW5kbGVyXG4gKi9cbmV4cG9ydCB0eXBlIE5leHRBcGlIYW5kbGVyPFQgPSBhbnk+ID0gKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZTxUPlxuKSA9PiB1bmtub3duIHwgUHJvbWlzZTx1bmtub3duPlxuXG4vKipcbiAqIFV0aWxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleGVjT25jZTxUIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBSZXR1cm5UeXBlPFQ+PihcbiAgZm46IFRcbik6IFQge1xuICBsZXQgdXNlZCA9IGZhbHNlXG4gIGxldCByZXN1bHQ6IFJldHVyblR5cGU8VD5cblxuICByZXR1cm4gKCguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIGlmICghdXNlZCkge1xuICAgICAgdXNlZCA9IHRydWVcbiAgICAgIHJlc3VsdCA9IGZuKC4uLmFyZ3MpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfSkgYXMgVFxufVxuXG4vLyBTY2hlbWU6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3NlY3Rpb24tMy4xXG4vLyBBYnNvbHV0ZSBVUkw6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3NlY3Rpb24tNC4zXG5jb25zdCBBQlNPTFVURV9VUkxfUkVHRVggPSAvXlthLXpBLVpdW2EtekEtWlxcZCtcXC0uXSo/Oi9cbmV4cG9ydCBjb25zdCBpc0Fic29sdXRlVXJsID0gKHVybDogc3RyaW5nKSA9PiBBQlNPTFVURV9VUkxfUkVHRVgudGVzdCh1cmwpXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2NhdGlvbk9yaWdpbigpIHtcbiAgY29uc3QgeyBwcm90b2NvbCwgaG9zdG5hbWUsIHBvcnQgfSA9IHdpbmRvdy5sb2NhdGlvblxuICByZXR1cm4gYCR7cHJvdG9jb2x9Ly8ke2hvc3RuYW1lfSR7cG9ydCA/ICc6JyArIHBvcnQgOiAnJ31gXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVUkwoKSB7XG4gIGNvbnN0IHsgaHJlZiB9ID0gd2luZG93LmxvY2F0aW9uXG4gIGNvbnN0IG9yaWdpbiA9IGdldExvY2F0aW9uT3JpZ2luKClcbiAgcmV0dXJuIGhyZWYuc3Vic3RyaW5nKG9yaWdpbi5sZW5ndGgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXNwbGF5TmFtZTxQPihDb21wb25lbnQ6IENvbXBvbmVudFR5cGU8UD4pIHtcbiAgcmV0dXJuIHR5cGVvZiBDb21wb25lbnQgPT09ICdzdHJpbmcnXG4gICAgPyBDb21wb25lbnRcbiAgICA6IENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAnVW5rbm93bidcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVzU2VudChyZXM6IFNlcnZlclJlc3BvbnNlKSB7XG4gIHJldHVybiByZXMuZmluaXNoZWQgfHwgcmVzLmhlYWRlcnNTZW50XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVSZXBlYXRlZFNsYXNoZXModXJsOiBzdHJpbmcpIHtcbiAgY29uc3QgdXJsUGFydHMgPSB1cmwuc3BsaXQoJz8nKVxuICBjb25zdCB1cmxOb1F1ZXJ5ID0gdXJsUGFydHNbMF1cblxuICByZXR1cm4gKFxuICAgIHVybE5vUXVlcnlcbiAgICAgIC8vIGZpcnN0IHdlIHJlcGxhY2UgYW55IG5vbi1lbmNvZGVkIGJhY2tzbGFzaGVzIHdpdGggZm9yd2FyZFxuICAgICAgLy8gdGhlbiBub3JtYWxpemUgcmVwZWF0ZWQgZm9yd2FyZCBzbGFzaGVzXG4gICAgICAucmVwbGFjZSgvXFxcXC9nLCAnLycpXG4gICAgICAucmVwbGFjZSgvXFwvXFwvKy9nLCAnLycpICtcbiAgICAodXJsUGFydHNbMV0gPyBgPyR7dXJsUGFydHMuc2xpY2UoMSkuam9pbignPycpfWAgOiAnJylcbiAgKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZEdldEluaXRpYWxQcm9wczxcbiAgQyBleHRlbmRzIEJhc2VDb250ZXh0LFxuICBJUCA9IHt9LFxuICBQID0ge30sXG4+KEFwcDogTmV4dENvbXBvbmVudFR5cGU8QywgSVAsIFA+LCBjdHg6IEMpOiBQcm9taXNlPElQPiB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKEFwcC5wcm90b3R5cGU/LmdldEluaXRpYWxQcm9wcykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGBcIiR7Z2V0RGlzcGxheU5hbWUoXG4gICAgICAgIEFwcFxuICAgICAgKX0uZ2V0SW5pdGlhbFByb3BzKClcIiBpcyBkZWZpbmVkIGFzIGFuIGluc3RhbmNlIG1ldGhvZCAtIHZpc2l0IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL2dldC1pbml0aWFsLXByb3BzLWFzLWFuLWluc3RhbmNlLW1ldGhvZCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSlcbiAgICB9XG4gIH1cbiAgLy8gd2hlbiBjYWxsZWQgZnJvbSBfYXBwIGBjdHhgIGlzIG5lc3RlZCBpbiBgY3R4YFxuICBjb25zdCByZXMgPSBjdHgucmVzIHx8IChjdHguY3R4ICYmIGN0eC5jdHgucmVzKVxuXG4gIGlmICghQXBwLmdldEluaXRpYWxQcm9wcykge1xuICAgIGlmIChjdHguY3R4ICYmIGN0eC5Db21wb25lbnQpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmUgcGFnZVByb3BzIGRlZmF1bHRcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhZ2VQcm9wczogYXdhaXQgbG9hZEdldEluaXRpYWxQcm9wcyhjdHguQ29tcG9uZW50LCBjdHguY3R4KSxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHt9IGFzIElQXG4gIH1cblxuICBjb25zdCBwcm9wcyA9IGF3YWl0IEFwcC5nZXRJbml0aWFsUHJvcHMoY3R4KVxuXG4gIGlmIChyZXMgJiYgaXNSZXNTZW50KHJlcykpIHtcbiAgICByZXR1cm4gcHJvcHNcbiAgfVxuXG4gIGlmICghcHJvcHMpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYFwiJHtnZXREaXNwbGF5TmFtZShcbiAgICAgIEFwcFxuICAgICl9LmdldEluaXRpYWxQcm9wcygpXCIgc2hvdWxkIHJlc29sdmUgdG8gYW4gb2JqZWN0LiBCdXQgZm91bmQgXCIke3Byb3BzfVwiIGluc3RlYWQuYFxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKVxuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoT2JqZWN0LmtleXMocHJvcHMpLmxlbmd0aCA9PT0gMCAmJiAhY3R4LmN0eCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgJHtnZXREaXNwbGF5TmFtZShcbiAgICAgICAgICBBcHBcbiAgICAgICAgKX0gcmV0dXJuZWQgYW4gZW1wdHkgb2JqZWN0IGZyb20gXFxgZ2V0SW5pdGlhbFByb3BzXFxgLiBUaGlzIGRlLW9wdGltaXplcyBhbmQgcHJldmVudHMgYXV0b21hdGljIHN0YXRpYyBvcHRpbWl6YXRpb24uIGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL2VtcHR5LW9iamVjdC1nZXRJbml0aWFsUHJvcHNgXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHByb3BzXG59XG5cbmV4cG9ydCBjb25zdCBTUCA9IHR5cGVvZiBwZXJmb3JtYW5jZSAhPT0gJ3VuZGVmaW5lZCdcbmV4cG9ydCBjb25zdCBTVCA9XG4gIFNQICYmXG4gIChbJ21hcmsnLCAnbWVhc3VyZScsICdnZXRFbnRyaWVzQnlOYW1lJ10gYXMgY29uc3QpLmV2ZXJ5KFxuICAgIChtZXRob2QpID0+IHR5cGVvZiBwZXJmb3JtYW5jZVttZXRob2RdID09PSAnZnVuY3Rpb24nXG4gIClcblxuZXhwb3J0IGNsYXNzIERlY29kZUVycm9yIGV4dGVuZHMgRXJyb3Ige31cbmV4cG9ydCBjbGFzcyBOb3JtYWxpemVFcnJvciBleHRlbmRzIEVycm9yIHt9XG5leHBvcnQgY2xhc3MgUGFnZU5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvZGU6IHN0cmluZ1xuXG4gIGNvbnN0cnVjdG9yKHBhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLmNvZGUgPSAnRU5PRU5UJ1xuICAgIHRoaXMubmFtZSA9ICdQYWdlTm90Rm91bmRFcnJvcidcbiAgICB0aGlzLm1lc3NhZ2UgPSBgQ2Fubm90IGZpbmQgbW9kdWxlIGZvciBwYWdlOiAke3BhZ2V9YFxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNaXNzaW5nU3RhdGljUGFnZSBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IocGFnZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5tZXNzYWdlID0gYEZhaWxlZCB0byBsb2FkIHN0YXRpYyBmaWxlIGZvciBwYWdlOiAke3BhZ2V9ICR7bWVzc2FnZX1gXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1pZGRsZXdhcmVOb3RGb3VuZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb2RlOiBzdHJpbmdcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMuY29kZSA9ICdFTk9FTlQnXG4gICAgdGhpcy5tZXNzYWdlID0gYENhbm5vdCBmaW5kIHRoZSBtaWRkbGV3YXJlIG1vZHVsZWBcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlRnMge1xuICBleGlzdHNTeW5jOiB0eXBlb2YgZnMuZXhpc3RzU3luY1xuICByZWFkRmlsZTogdHlwZW9mIGZzLnByb21pc2VzLnJlYWRGaWxlXG4gIHJlYWRGaWxlU3luYzogdHlwZW9mIGZzLnJlYWRGaWxlU3luY1xuICB3cml0ZUZpbGUoZjogc3RyaW5nLCBkOiBhbnkpOiBQcm9taXNlPHZvaWQ+XG4gIG1rZGlyKGRpcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkIHwgc3RyaW5nPlxuICBzdGF0KGY6IHN0cmluZyk6IFByb21pc2U8eyBtdGltZTogRGF0ZSB9PlxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5RXJyb3IoZXJyb3I6IEVycm9yKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIHN0YWNrOiBlcnJvci5zdGFjayB9KVxufVxuIl0sIm5hbWVzIjpbIkRlY29kZUVycm9yIiwiTWlkZGxld2FyZU5vdEZvdW5kRXJyb3IiLCJNaXNzaW5nU3RhdGljUGFnZSIsIk5vcm1hbGl6ZUVycm9yIiwiUGFnZU5vdEZvdW5kRXJyb3IiLCJTUCIsIlNUIiwiV0VCX1ZJVEFMUyIsImV4ZWNPbmNlIiwiZ2V0RGlzcGxheU5hbWUiLCJnZXRMb2NhdGlvbk9yaWdpbiIsImdldFVSTCIsImlzQWJzb2x1dGVVcmwiLCJpc1Jlc1NlbnQiLCJsb2FkR2V0SW5pdGlhbFByb3BzIiwibm9ybWFsaXplUmVwZWF0ZWRTbGFzaGVzIiwic3RyaW5naWZ5RXJyb3IiLCJmbiIsInVzZWQiLCJyZXN1bHQiLCJhcmdzIiwiQUJTT0xVVEVfVVJMX1JFR0VYIiwidXJsIiwidGVzdCIsInByb3RvY29sIiwiaG9zdG5hbWUiLCJwb3J0Iiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwib3JpZ2luIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiQ29tcG9uZW50IiwiZGlzcGxheU5hbWUiLCJuYW1lIiwicmVzIiwiZmluaXNoZWQiLCJoZWFkZXJzU2VudCIsInVybFBhcnRzIiwic3BsaXQiLCJ1cmxOb1F1ZXJ5IiwicmVwbGFjZSIsInNsaWNlIiwiam9pbiIsIkFwcCIsImN0eCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInByb3RvdHlwZSIsImdldEluaXRpYWxQcm9wcyIsIm1lc3NhZ2UiLCJFcnJvciIsInBhZ2VQcm9wcyIsInByb3BzIiwiT2JqZWN0Iiwia2V5cyIsImNvbnNvbGUiLCJ3YXJuIiwicGVyZm9ybWFuY2UiLCJldmVyeSIsIm1ldGhvZCIsImNvbnN0cnVjdG9yIiwicGFnZSIsImNvZGUiLCJlcnJvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdGFjayJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/error-once.js":
/*!***************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/utils/error-once.js ***!
  \***************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"errorOnce\", ({\n    enumerable: true,\n    get: function() {\n        return errorOnce;\n    }\n}));\nlet errorOnce = (_)=>{};\nif (true) {\n    const errors = new Set();\n    errorOnce = (msg)=>{\n        if (!errors.has(msg)) {\n            console.error(msg);\n        }\n        errors.add(msg);\n    };\n} //# sourceMappingURL=error-once.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi91dGlscy9lcnJvci1vbmNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7NkNBV1NBOzs7ZUFBQUE7OztBQVhULElBQUlBLFlBQVksQ0FBQ0MsS0FBZTtBQUNoQyxJQUFJQyxJQUFvQixFQUFtQjtJQUN6QyxNQUFNRyxTQUFTLElBQUlDO0lBQ25CTixZQUFZLENBQUNPO1FBQ1gsSUFBSSxDQUFDRixPQUFPRyxHQUFHLENBQUNELE1BQU07WUFDcEJFLFFBQVFDLEtBQUssQ0FBQ0g7UUFDaEI7UUFDQUYsT0FBT00sR0FBRyxDQUFDSjtJQUNiO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcc3JjXFxzaGFyZWRcXGxpYlxcdXRpbHNcXGVycm9yLW9uY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IGVycm9yT25jZSA9IChfOiBzdHJpbmcpID0+IHt9XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBjb25zdCBlcnJvcnMgPSBuZXcgU2V0PHN0cmluZz4oKVxuICBlcnJvck9uY2UgPSAobXNnOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIWVycm9ycy5oYXMobXNnKSkge1xuICAgICAgY29uc29sZS5lcnJvcihtc2cpXG4gICAgfVxuICAgIGVycm9ycy5hZGQobXNnKVxuICB9XG59XG5cbmV4cG9ydCB7IGVycm9yT25jZSB9XG4iXSwibmFtZXMiOlsiZXJyb3JPbmNlIiwiXyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImVycm9ycyIsIlNldCIsIm1zZyIsImhhcyIsImNvbnNvbGUiLCJlcnJvciIsImFkZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/error-once.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/oauth4webapi/build/index.js":
/*!**************************************************!*\
  !*** ./node_modules/oauth4webapi/build/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OperationProcessingError: () => (/* binding */ OperationProcessingError),\n/* harmony export */   UnsupportedOperationError: () => (/* binding */ UnsupportedOperationError),\n/* harmony export */   authorizationCodeGrantRequest: () => (/* binding */ authorizationCodeGrantRequest),\n/* harmony export */   calculatePKCECodeChallenge: () => (/* binding */ calculatePKCECodeChallenge),\n/* harmony export */   clientCredentialsGrantRequest: () => (/* binding */ clientCredentialsGrantRequest),\n/* harmony export */   clockSkew: () => (/* binding */ clockSkew),\n/* harmony export */   clockTolerance: () => (/* binding */ clockTolerance),\n/* harmony export */   customFetch: () => (/* binding */ customFetch),\n/* harmony export */   deviceAuthorizationRequest: () => (/* binding */ deviceAuthorizationRequest),\n/* harmony export */   deviceCodeGrantRequest: () => (/* binding */ deviceCodeGrantRequest),\n/* harmony export */   discoveryRequest: () => (/* binding */ discoveryRequest),\n/* harmony export */   expectNoNonce: () => (/* binding */ expectNoNonce),\n/* harmony export */   expectNoState: () => (/* binding */ expectNoState),\n/* harmony export */   experimentalCustomFetch: () => (/* binding */ experimentalCustomFetch),\n/* harmony export */   experimentalUseMtlsAlias: () => (/* binding */ experimentalUseMtlsAlias),\n/* harmony export */   experimental_customFetch: () => (/* binding */ experimental_customFetch),\n/* harmony export */   experimental_jwksCache: () => (/* binding */ experimental_jwksCache),\n/* harmony export */   experimental_useMtlsAlias: () => (/* binding */ experimental_useMtlsAlias),\n/* harmony export */   experimental_validateDetachedSignatureResponse: () => (/* binding */ experimental_validateDetachedSignatureResponse),\n/* harmony export */   experimental_validateJwtAccessToken: () => (/* binding */ experimental_validateJwtAccessToken),\n/* harmony export */   generateKeyPair: () => (/* binding */ generateKeyPair),\n/* harmony export */   generateRandomCodeVerifier: () => (/* binding */ generateRandomCodeVerifier),\n/* harmony export */   generateRandomNonce: () => (/* binding */ generateRandomNonce),\n/* harmony export */   generateRandomState: () => (/* binding */ generateRandomState),\n/* harmony export */   genericTokenEndpointRequest: () => (/* binding */ genericTokenEndpointRequest),\n/* harmony export */   getValidatedIdTokenClaims: () => (/* binding */ getValidatedIdTokenClaims),\n/* harmony export */   introspectionRequest: () => (/* binding */ introspectionRequest),\n/* harmony export */   isOAuth2Error: () => (/* binding */ isOAuth2Error),\n/* harmony export */   issueRequestObject: () => (/* binding */ issueRequestObject),\n/* harmony export */   jweDecrypt: () => (/* binding */ jweDecrypt),\n/* harmony export */   jwksCache: () => (/* binding */ jwksCache),\n/* harmony export */   modifyAssertion: () => (/* binding */ modifyAssertion),\n/* harmony export */   parseWwwAuthenticateChallenges: () => (/* binding */ parseWwwAuthenticateChallenges),\n/* harmony export */   processAuthorizationCodeOAuth2Response: () => (/* binding */ processAuthorizationCodeOAuth2Response),\n/* harmony export */   processAuthorizationCodeOpenIDResponse: () => (/* binding */ processAuthorizationCodeOpenIDResponse),\n/* harmony export */   processClientCredentialsResponse: () => (/* binding */ processClientCredentialsResponse),\n/* harmony export */   processDeviceAuthorizationResponse: () => (/* binding */ processDeviceAuthorizationResponse),\n/* harmony export */   processDeviceCodeResponse: () => (/* binding */ processDeviceCodeResponse),\n/* harmony export */   processDiscoveryResponse: () => (/* binding */ processDiscoveryResponse),\n/* harmony export */   processIntrospectionResponse: () => (/* binding */ processIntrospectionResponse),\n/* harmony export */   processPushedAuthorizationResponse: () => (/* binding */ processPushedAuthorizationResponse),\n/* harmony export */   processRefreshTokenResponse: () => (/* binding */ processRefreshTokenResponse),\n/* harmony export */   processRevocationResponse: () => (/* binding */ processRevocationResponse),\n/* harmony export */   processUserInfoResponse: () => (/* binding */ processUserInfoResponse),\n/* harmony export */   protectedResourceRequest: () => (/* binding */ protectedResourceRequest),\n/* harmony export */   pushedAuthorizationRequest: () => (/* binding */ pushedAuthorizationRequest),\n/* harmony export */   refreshTokenGrantRequest: () => (/* binding */ refreshTokenGrantRequest),\n/* harmony export */   revocationRequest: () => (/* binding */ revocationRequest),\n/* harmony export */   skipAuthTimeCheck: () => (/* binding */ skipAuthTimeCheck),\n/* harmony export */   skipStateCheck: () => (/* binding */ skipStateCheck),\n/* harmony export */   skipSubjectCheck: () => (/* binding */ skipSubjectCheck),\n/* harmony export */   useMtlsAlias: () => (/* binding */ useMtlsAlias),\n/* harmony export */   userInfoRequest: () => (/* binding */ userInfoRequest),\n/* harmony export */   validateAuthResponse: () => (/* binding */ validateAuthResponse),\n/* harmony export */   validateDetachedSignatureResponse: () => (/* binding */ validateDetachedSignatureResponse),\n/* harmony export */   validateIdTokenSignature: () => (/* binding */ validateIdTokenSignature),\n/* harmony export */   validateJwtAccessToken: () => (/* binding */ validateJwtAccessToken),\n/* harmony export */   validateJwtAuthResponse: () => (/* binding */ validateJwtAuthResponse),\n/* harmony export */   validateJwtIntrospectionSignature: () => (/* binding */ validateJwtIntrospectionSignature),\n/* harmony export */   validateJwtUserInfoSignature: () => (/* binding */ validateJwtUserInfoSignature),\n/* harmony export */   validateJwtUserinfoSignature: () => (/* binding */ validateJwtUserinfoSignature)\n/* harmony export */ });\nlet USER_AGENT;\nif (typeof navigator === 'undefined' || !navigator.userAgent?.startsWith?.('Mozilla/5.0 ')) {\n    const NAME = 'oauth4webapi';\n    const VERSION = 'v2.17.0';\n    USER_AGENT = `${NAME}/${VERSION}`;\n}\nfunction looseInstanceOf(input, expected) {\n    if (input == null) {\n        return false;\n    }\n    try {\n        return (input instanceof expected ||\n            Object.getPrototypeOf(input)[Symbol.toStringTag] === expected.prototype[Symbol.toStringTag]);\n    }\n    catch {\n        return false;\n    }\n}\nconst clockSkew = Symbol();\nconst clockTolerance = Symbol();\nconst customFetch = Symbol();\nconst modifyAssertion = Symbol();\nconst jweDecrypt = Symbol();\nconst jwksCache = Symbol();\nconst useMtlsAlias = Symbol();\nconst encoder = new TextEncoder();\nconst decoder = new TextDecoder();\nfunction buf(input) {\n    if (typeof input === 'string') {\n        return encoder.encode(input);\n    }\n    return decoder.decode(input);\n}\nconst CHUNK_SIZE = 0x8000;\nfunction encodeBase64Url(input) {\n    if (input instanceof ArrayBuffer) {\n        input = new Uint8Array(input);\n    }\n    const arr = [];\n    for (let i = 0; i < input.byteLength; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, input.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join('')).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\nfunction decodeBase64Url(input) {\n    try {\n        const binary = atob(input.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, ''));\n        const bytes = new Uint8Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            bytes[i] = binary.charCodeAt(i);\n        }\n        return bytes;\n    }\n    catch (cause) {\n        throw new OPE('The input to be decoded is not correctly encoded.', { cause });\n    }\n}\nfunction b64u(input) {\n    if (typeof input === 'string') {\n        return decodeBase64Url(input);\n    }\n    return encodeBase64Url(input);\n}\nclass LRU {\n    constructor(maxSize) {\n        this.cache = new Map();\n        this._cache = new Map();\n        this.maxSize = maxSize;\n    }\n    get(key) {\n        let v = this.cache.get(key);\n        if (v) {\n            return v;\n        }\n        if ((v = this._cache.get(key))) {\n            this.update(key, v);\n            return v;\n        }\n        return undefined;\n    }\n    has(key) {\n        return this.cache.has(key) || this._cache.has(key);\n    }\n    set(key, value) {\n        if (this.cache.has(key)) {\n            this.cache.set(key, value);\n        }\n        else {\n            this.update(key, value);\n        }\n        return this;\n    }\n    delete(key) {\n        if (this.cache.has(key)) {\n            return this.cache.delete(key);\n        }\n        if (this._cache.has(key)) {\n            return this._cache.delete(key);\n        }\n        return false;\n    }\n    update(key, value) {\n        this.cache.set(key, value);\n        if (this.cache.size >= this.maxSize) {\n            this._cache = this.cache;\n            this.cache = new Map();\n        }\n    }\n}\nclass UnsupportedOperationError extends Error {\n    constructor(message) {\n        super(message ?? 'operation not supported');\n        this.name = this.constructor.name;\n        Error.captureStackTrace?.(this, this.constructor);\n    }\n}\nclass OperationProcessingError extends Error {\n    constructor(message, options) {\n        super(message, options);\n        this.name = this.constructor.name;\n        Error.captureStackTrace?.(this, this.constructor);\n    }\n}\nconst OPE = OperationProcessingError;\nconst dpopNonces = new LRU(100);\nfunction isCryptoKey(key) {\n    return key instanceof CryptoKey;\n}\nfunction isPrivateKey(key) {\n    return isCryptoKey(key) && key.type === 'private';\n}\nfunction isPublicKey(key) {\n    return isCryptoKey(key) && key.type === 'public';\n}\nconst SUPPORTED_JWS_ALGS = [\n    'PS256',\n    'ES256',\n    'RS256',\n    'PS384',\n    'ES384',\n    'RS384',\n    'PS512',\n    'ES512',\n    'RS512',\n    'EdDSA',\n];\nfunction processDpopNonce(response) {\n    try {\n        const nonce = response.headers.get('dpop-nonce');\n        if (nonce) {\n            dpopNonces.set(new URL(response.url).origin, nonce);\n        }\n    }\n    catch { }\n    return response;\n}\nfunction normalizeTyp(value) {\n    return value.toLowerCase().replace(/^application\\//, '');\n}\nfunction isJsonObject(input) {\n    if (input === null || typeof input !== 'object' || Array.isArray(input)) {\n        return false;\n    }\n    return true;\n}\nfunction prepareHeaders(input) {\n    if (looseInstanceOf(input, Headers)) {\n        input = Object.fromEntries(input.entries());\n    }\n    const headers = new Headers(input);\n    if (USER_AGENT && !headers.has('user-agent')) {\n        headers.set('user-agent', USER_AGENT);\n    }\n    if (headers.has('authorization')) {\n        throw new TypeError('\"options.headers\" must not include the \"authorization\" header name');\n    }\n    if (headers.has('dpop')) {\n        throw new TypeError('\"options.headers\" must not include the \"dpop\" header name');\n    }\n    return headers;\n}\nfunction signal(value) {\n    if (typeof value === 'function') {\n        value = value();\n    }\n    if (!(value instanceof AbortSignal)) {\n        throw new TypeError('\"options.signal\" must return or be an instance of AbortSignal');\n    }\n    return value;\n}\nasync function discoveryRequest(issuerIdentifier, options) {\n    if (!(issuerIdentifier instanceof URL)) {\n        throw new TypeError('\"issuerIdentifier\" must be an instance of URL');\n    }\n    if (issuerIdentifier.protocol !== 'https:' && issuerIdentifier.protocol !== 'http:') {\n        throw new TypeError('\"issuer.protocol\" must be \"https:\" or \"http:\"');\n    }\n    const url = new URL(issuerIdentifier.href);\n    switch (options?.algorithm) {\n        case undefined:\n        case 'oidc':\n            url.pathname = `${url.pathname}/.well-known/openid-configuration`.replace('//', '/');\n            break;\n        case 'oauth2':\n            if (url.pathname === '/') {\n                url.pathname = '.well-known/oauth-authorization-server';\n            }\n            else {\n                url.pathname = `.well-known/oauth-authorization-server/${url.pathname}`.replace('//', '/');\n            }\n            break;\n        default:\n            throw new TypeError('\"options.algorithm\" must be \"oidc\" (default), or \"oauth2\"');\n    }\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    return (options?.[customFetch] || fetch)(url.href, {\n        headers: Object.fromEntries(headers.entries()),\n        method: 'GET',\n        redirect: 'manual',\n        signal: options?.signal ? signal(options.signal) : null,\n    }).then(processDpopNonce);\n}\nfunction validateString(input) {\n    return typeof input === 'string' && input.length !== 0;\n}\nasync function processDiscoveryResponse(expectedIssuerIdentifier, response) {\n    if (!(expectedIssuerIdentifier instanceof URL)) {\n        throw new TypeError('\"expectedIssuer\" must be an instance of URL');\n    }\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        throw new OPE('\"response\" is not a conform Authorization Server Metadata response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.issuer)) {\n        throw new OPE('\"response\" body \"issuer\" property must be a non-empty string');\n    }\n    if (new URL(json.issuer).href !== expectedIssuerIdentifier.href) {\n        throw new OPE('\"response\" body \"issuer\" does not match \"expectedIssuer\"');\n    }\n    return json;\n}\nfunction randomBytes() {\n    return b64u(crypto.getRandomValues(new Uint8Array(32)));\n}\nfunction generateRandomCodeVerifier() {\n    return randomBytes();\n}\nfunction generateRandomState() {\n    return randomBytes();\n}\nfunction generateRandomNonce() {\n    return randomBytes();\n}\nasync function calculatePKCECodeChallenge(codeVerifier) {\n    if (!validateString(codeVerifier)) {\n        throw new TypeError('\"codeVerifier\" must be a non-empty string');\n    }\n    return b64u(await crypto.subtle.digest('SHA-256', buf(codeVerifier)));\n}\nfunction getKeyAndKid(input) {\n    if (input instanceof CryptoKey) {\n        return { key: input };\n    }\n    if (!(input?.key instanceof CryptoKey)) {\n        return {};\n    }\n    if (input.kid !== undefined && !validateString(input.kid)) {\n        throw new TypeError('\"kid\" must be a non-empty string');\n    }\n    return {\n        key: input.key,\n        kid: input.kid,\n        modifyAssertion: input[modifyAssertion],\n    };\n}\nfunction formUrlEncode(token) {\n    return encodeURIComponent(token).replace(/%20/g, '+');\n}\nfunction clientSecretBasic(clientId, clientSecret) {\n    const username = formUrlEncode(clientId);\n    const password = formUrlEncode(clientSecret);\n    const credentials = btoa(`${username}:${password}`);\n    return `Basic ${credentials}`;\n}\nfunction psAlg(key) {\n    switch (key.algorithm.hash.name) {\n        case 'SHA-256':\n            return 'PS256';\n        case 'SHA-384':\n            return 'PS384';\n        case 'SHA-512':\n            return 'PS512';\n        default:\n            throw new UnsupportedOperationError('unsupported RsaHashedKeyAlgorithm hash name');\n    }\n}\nfunction rsAlg(key) {\n    switch (key.algorithm.hash.name) {\n        case 'SHA-256':\n            return 'RS256';\n        case 'SHA-384':\n            return 'RS384';\n        case 'SHA-512':\n            return 'RS512';\n        default:\n            throw new UnsupportedOperationError('unsupported RsaHashedKeyAlgorithm hash name');\n    }\n}\nfunction esAlg(key) {\n    switch (key.algorithm.namedCurve) {\n        case 'P-256':\n            return 'ES256';\n        case 'P-384':\n            return 'ES384';\n        case 'P-521':\n            return 'ES512';\n        default:\n            throw new UnsupportedOperationError('unsupported EcKeyAlgorithm namedCurve');\n    }\n}\nfunction keyToJws(key) {\n    switch (key.algorithm.name) {\n        case 'RSA-PSS':\n            return psAlg(key);\n        case 'RSASSA-PKCS1-v1_5':\n            return rsAlg(key);\n        case 'ECDSA':\n            return esAlg(key);\n        case 'Ed25519':\n        case 'Ed448':\n            return 'EdDSA';\n        default:\n            throw new UnsupportedOperationError('unsupported CryptoKey algorithm name');\n    }\n}\nfunction getClockSkew(client) {\n    const skew = client?.[clockSkew];\n    return typeof skew === 'number' && Number.isFinite(skew) ? skew : 0;\n}\nfunction getClockTolerance(client) {\n    const tolerance = client?.[clockTolerance];\n    return typeof tolerance === 'number' && Number.isFinite(tolerance) && Math.sign(tolerance) !== -1\n        ? tolerance\n        : 30;\n}\nfunction epochTime() {\n    return Math.floor(Date.now() / 1000);\n}\nfunction clientAssertion(as, client) {\n    const now = epochTime() + getClockSkew(client);\n    return {\n        jti: randomBytes(),\n        aud: [as.issuer, as.token_endpoint],\n        exp: now + 60,\n        iat: now,\n        nbf: now,\n        iss: client.client_id,\n        sub: client.client_id,\n    };\n}\nasync function privateKeyJwt(as, client, key, kid, modifyAssertion) {\n    const header = { alg: keyToJws(key), kid };\n    const payload = clientAssertion(as, client);\n    modifyAssertion?.(header, payload);\n    return jwt(header, payload, key);\n}\nfunction assertAs(as) {\n    if (typeof as !== 'object' || as === null) {\n        throw new TypeError('\"as\" must be an object');\n    }\n    if (!validateString(as.issuer)) {\n        throw new TypeError('\"as.issuer\" property must be a non-empty string');\n    }\n    return true;\n}\nfunction assertClient(client) {\n    if (typeof client !== 'object' || client === null) {\n        throw new TypeError('\"client\" must be an object');\n    }\n    if (!validateString(client.client_id)) {\n        throw new TypeError('\"client.client_id\" property must be a non-empty string');\n    }\n    return true;\n}\nfunction assertClientSecret(clientSecret) {\n    if (!validateString(clientSecret)) {\n        throw new TypeError('\"client.client_secret\" property must be a non-empty string');\n    }\n    return clientSecret;\n}\nfunction assertNoClientPrivateKey(clientAuthMethod, clientPrivateKey) {\n    if (clientPrivateKey !== undefined) {\n        throw new TypeError(`\"options.clientPrivateKey\" property must not be provided when ${clientAuthMethod} client authentication method is used.`);\n    }\n}\nfunction assertNoClientSecret(clientAuthMethod, clientSecret) {\n    if (clientSecret !== undefined) {\n        throw new TypeError(`\"client.client_secret\" property must not be provided when ${clientAuthMethod} client authentication method is used.`);\n    }\n}\nasync function clientAuthentication(as, client, body, headers, clientPrivateKey) {\n    body.delete('client_secret');\n    body.delete('client_assertion_type');\n    body.delete('client_assertion');\n    switch (client.token_endpoint_auth_method) {\n        case undefined:\n        case 'client_secret_basic': {\n            assertNoClientPrivateKey('client_secret_basic', clientPrivateKey);\n            headers.set('authorization', clientSecretBasic(client.client_id, assertClientSecret(client.client_secret)));\n            break;\n        }\n        case 'client_secret_post': {\n            assertNoClientPrivateKey('client_secret_post', clientPrivateKey);\n            body.set('client_id', client.client_id);\n            body.set('client_secret', assertClientSecret(client.client_secret));\n            break;\n        }\n        case 'private_key_jwt': {\n            assertNoClientSecret('private_key_jwt', client.client_secret);\n            if (clientPrivateKey === undefined) {\n                throw new TypeError('\"options.clientPrivateKey\" must be provided when \"client.token_endpoint_auth_method\" is \"private_key_jwt\"');\n            }\n            const { key, kid, modifyAssertion } = getKeyAndKid(clientPrivateKey);\n            if (!isPrivateKey(key)) {\n                throw new TypeError('\"options.clientPrivateKey.key\" must be a private CryptoKey');\n            }\n            body.set('client_id', client.client_id);\n            body.set('client_assertion_type', 'urn:ietf:params:oauth:client-assertion-type:jwt-bearer');\n            body.set('client_assertion', await privateKeyJwt(as, client, key, kid, modifyAssertion));\n            break;\n        }\n        case 'tls_client_auth':\n        case 'self_signed_tls_client_auth':\n        case 'none': {\n            assertNoClientSecret(client.token_endpoint_auth_method, client.client_secret);\n            assertNoClientPrivateKey(client.token_endpoint_auth_method, clientPrivateKey);\n            body.set('client_id', client.client_id);\n            break;\n        }\n        default:\n            throw new UnsupportedOperationError('unsupported client token_endpoint_auth_method');\n    }\n}\nasync function jwt(header, payload, key) {\n    if (!key.usages.includes('sign')) {\n        throw new TypeError('CryptoKey instances used for signing assertions must include \"sign\" in their \"usages\"');\n    }\n    const input = `${b64u(buf(JSON.stringify(header)))}.${b64u(buf(JSON.stringify(payload)))}`;\n    const signature = b64u(await crypto.subtle.sign(keyToSubtle(key), key, buf(input)));\n    return `${input}.${signature}`;\n}\nasync function issueRequestObject(as, client, parameters, privateKey) {\n    assertAs(as);\n    assertClient(client);\n    parameters = new URLSearchParams(parameters);\n    const { key, kid, modifyAssertion } = getKeyAndKid(privateKey);\n    if (!isPrivateKey(key)) {\n        throw new TypeError('\"privateKey.key\" must be a private CryptoKey');\n    }\n    parameters.set('client_id', client.client_id);\n    const now = epochTime() + getClockSkew(client);\n    const claims = {\n        ...Object.fromEntries(parameters.entries()),\n        jti: randomBytes(),\n        aud: as.issuer,\n        exp: now + 60,\n        iat: now,\n        nbf: now,\n        iss: client.client_id,\n    };\n    let resource;\n    if (parameters.has('resource') &&\n        (resource = parameters.getAll('resource')) &&\n        resource.length > 1) {\n        claims.resource = resource;\n    }\n    {\n        let value = parameters.get('max_age');\n        if (value !== null) {\n            claims.max_age = parseInt(value, 10);\n            if (!Number.isFinite(claims.max_age)) {\n                throw new OPE('\"max_age\" parameter must be a number');\n            }\n        }\n    }\n    {\n        let value = parameters.get('claims');\n        if (value !== null) {\n            try {\n                claims.claims = JSON.parse(value);\n            }\n            catch (cause) {\n                throw new OPE('failed to parse the \"claims\" parameter as JSON', { cause });\n            }\n            if (!isJsonObject(claims.claims)) {\n                throw new OPE('\"claims\" parameter must be a JSON with a top level object');\n            }\n        }\n    }\n    {\n        let value = parameters.get('authorization_details');\n        if (value !== null) {\n            try {\n                claims.authorization_details = JSON.parse(value);\n            }\n            catch (cause) {\n                throw new OPE('failed to parse the \"authorization_details\" parameter as JSON', { cause });\n            }\n            if (!Array.isArray(claims.authorization_details)) {\n                throw new OPE('\"authorization_details\" parameter must be a JSON with a top level array');\n            }\n        }\n    }\n    const header = {\n        alg: keyToJws(key),\n        typ: 'oauth-authz-req+jwt',\n        kid,\n    };\n    modifyAssertion?.(header, claims);\n    return jwt(header, claims, key);\n}\nasync function dpopProofJwt(headers, options, url, htm, clockSkew, accessToken) {\n    const { privateKey, publicKey, nonce = dpopNonces.get(url.origin) } = options;\n    if (!isPrivateKey(privateKey)) {\n        throw new TypeError('\"DPoP.privateKey\" must be a private CryptoKey');\n    }\n    if (!isPublicKey(publicKey)) {\n        throw new TypeError('\"DPoP.publicKey\" must be a public CryptoKey');\n    }\n    if (nonce !== undefined && !validateString(nonce)) {\n        throw new TypeError('\"DPoP.nonce\" must be a non-empty string or undefined');\n    }\n    if (!publicKey.extractable) {\n        throw new TypeError('\"DPoP.publicKey.extractable\" must be true');\n    }\n    const now = epochTime() + clockSkew;\n    const header = {\n        alg: keyToJws(privateKey),\n        typ: 'dpop+jwt',\n        jwk: await publicJwk(publicKey),\n    };\n    const payload = {\n        iat: now,\n        jti: randomBytes(),\n        htm,\n        nonce,\n        htu: `${url.origin}${url.pathname}`,\n        ath: accessToken ? b64u(await crypto.subtle.digest('SHA-256', buf(accessToken))) : undefined,\n    };\n    options[modifyAssertion]?.(header, payload);\n    headers.set('dpop', await jwt(header, payload, privateKey));\n}\nlet jwkCache;\nasync function getSetPublicJwkCache(key) {\n    const { kty, e, n, x, y, crv } = await crypto.subtle.exportKey('jwk', key);\n    const jwk = { kty, e, n, x, y, crv };\n    jwkCache.set(key, jwk);\n    return jwk;\n}\nasync function publicJwk(key) {\n    jwkCache || (jwkCache = new WeakMap());\n    return jwkCache.get(key) || getSetPublicJwkCache(key);\n}\nfunction validateEndpoint(value, endpoint, useMtlsAlias) {\n    if (typeof value !== 'string') {\n        if (useMtlsAlias) {\n            throw new TypeError(`\"as.mtls_endpoint_aliases.${endpoint}\" must be a string`);\n        }\n        throw new TypeError(`\"as.${endpoint}\" must be a string`);\n    }\n    return new URL(value);\n}\nfunction resolveEndpoint(as, endpoint, useMtlsAlias = false) {\n    if (useMtlsAlias && as.mtls_endpoint_aliases && endpoint in as.mtls_endpoint_aliases) {\n        return validateEndpoint(as.mtls_endpoint_aliases[endpoint], endpoint, useMtlsAlias);\n    }\n    return validateEndpoint(as[endpoint], endpoint, useMtlsAlias);\n}\nfunction alias(client, options) {\n    if (client.use_mtls_endpoint_aliases || options?.[useMtlsAlias]) {\n        return true;\n    }\n    return false;\n}\nasync function pushedAuthorizationRequest(as, client, parameters, options) {\n    assertAs(as);\n    assertClient(client);\n    const url = resolveEndpoint(as, 'pushed_authorization_request_endpoint', alias(client, options));\n    const body = new URLSearchParams(parameters);\n    body.set('client_id', client.client_id);\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    if (options?.DPoP !== undefined) {\n        await dpopProofJwt(headers, options.DPoP, url, 'POST', getClockSkew(client));\n    }\n    return authenticatedRequest(as, client, 'POST', url, body, headers, options);\n}\nfunction isOAuth2Error(input) {\n    const value = input;\n    if (typeof value !== 'object' || Array.isArray(value) || value === null) {\n        return false;\n    }\n    return value.error !== undefined;\n}\nfunction unquote(value) {\n    if (value.length >= 2 && value[0] === '\"' && value[value.length - 1] === '\"') {\n        return value.slice(1, -1);\n    }\n    return value;\n}\nconst SPLIT_REGEXP = /((?:,|, )?[0-9a-zA-Z!#$%&'*+-.^_`|~]+=)/;\nconst SCHEMES_REGEXP = /(?:^|, ?)([0-9a-zA-Z!#$%&'*+\\-.^_`|~]+)(?=$|[ ,])/g;\nfunction wwwAuth(scheme, params) {\n    const arr = params.split(SPLIT_REGEXP).slice(1);\n    if (!arr.length) {\n        return { scheme: scheme.toLowerCase(), parameters: {} };\n    }\n    arr[arr.length - 1] = arr[arr.length - 1].replace(/,$/, '');\n    const parameters = {};\n    for (let i = 1; i < arr.length; i += 2) {\n        const idx = i;\n        if (arr[idx][0] === '\"') {\n            while (arr[idx].slice(-1) !== '\"' && ++i < arr.length) {\n                arr[idx] += arr[i];\n            }\n        }\n        const key = arr[idx - 1].replace(/^(?:, ?)|=$/g, '').toLowerCase();\n        parameters[key] = unquote(arr[idx]);\n    }\n    return {\n        scheme: scheme.toLowerCase(),\n        parameters,\n    };\n}\nfunction parseWwwAuthenticateChallenges(response) {\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    const header = response.headers.get('www-authenticate');\n    if (header === null) {\n        return undefined;\n    }\n    const result = [];\n    for (const { 1: scheme, index } of header.matchAll(SCHEMES_REGEXP)) {\n        result.push([scheme, index]);\n    }\n    if (!result.length) {\n        return undefined;\n    }\n    const challenges = result.map(([scheme, indexOf], i, others) => {\n        const next = others[i + 1];\n        let parameters;\n        if (next) {\n            parameters = header.slice(indexOf, next[1]);\n        }\n        else {\n            parameters = header.slice(indexOf);\n        }\n        return wwwAuth(scheme, parameters);\n    });\n    return challenges;\n}\nasync function processPushedAuthorizationResponse(as, client, response) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 201) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Pushed Authorization Request Endpoint response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.request_uri)) {\n        throw new OPE('\"response\" body \"request_uri\" property must be a non-empty string');\n    }\n    if (typeof json.expires_in !== 'number' || json.expires_in <= 0) {\n        throw new OPE('\"response\" body \"expires_in\" property must be a positive number');\n    }\n    return json;\n}\nasync function protectedResourceRequest(accessToken, method, url, headers, body, options) {\n    if (!validateString(accessToken)) {\n        throw new TypeError('\"accessToken\" must be a non-empty string');\n    }\n    if (!(url instanceof URL)) {\n        throw new TypeError('\"url\" must be an instance of URL');\n    }\n    headers = prepareHeaders(headers);\n    if (options?.DPoP === undefined) {\n        headers.set('authorization', `Bearer ${accessToken}`);\n    }\n    else {\n        await dpopProofJwt(headers, options.DPoP, url, method.toUpperCase(), getClockSkew({ [clockSkew]: options?.[clockSkew] }), accessToken);\n        headers.set('authorization', `DPoP ${accessToken}`);\n    }\n    return (options?.[customFetch] || fetch)(url.href, {\n        body,\n        headers: Object.fromEntries(headers.entries()),\n        method,\n        redirect: 'manual',\n        signal: options?.signal ? signal(options.signal) : null,\n    }).then(processDpopNonce);\n}\nasync function userInfoRequest(as, client, accessToken, options) {\n    assertAs(as);\n    assertClient(client);\n    const url = resolveEndpoint(as, 'userinfo_endpoint', alias(client, options));\n    const headers = prepareHeaders(options?.headers);\n    if (client.userinfo_signed_response_alg) {\n        headers.set('accept', 'application/jwt');\n    }\n    else {\n        headers.set('accept', 'application/json');\n        headers.append('accept', 'application/jwt');\n    }\n    return protectedResourceRequest(accessToken, 'GET', url, headers, null, {\n        ...options,\n        [clockSkew]: getClockSkew(client),\n    });\n}\nlet jwksMap;\nfunction setJwksCache(as, jwks, uat, cache) {\n    jwksMap || (jwksMap = new WeakMap());\n    jwksMap.set(as, {\n        jwks,\n        uat,\n        get age() {\n            return epochTime() - this.uat;\n        },\n    });\n    if (cache) {\n        Object.assign(cache, { jwks: structuredClone(jwks), uat });\n    }\n}\nfunction isFreshJwksCache(input) {\n    if (typeof input !== 'object' || input === null) {\n        return false;\n    }\n    if (!('uat' in input) || typeof input.uat !== 'number' || epochTime() - input.uat >= 300) {\n        return false;\n    }\n    if (!('jwks' in input) ||\n        !isJsonObject(input.jwks) ||\n        !Array.isArray(input.jwks.keys) ||\n        !Array.prototype.every.call(input.jwks.keys, isJsonObject)) {\n        return false;\n    }\n    return true;\n}\nfunction clearJwksCache(as, cache) {\n    jwksMap?.delete(as);\n    delete cache?.jwks;\n    delete cache?.uat;\n}\nasync function getPublicSigKeyFromIssuerJwksUri(as, options, header) {\n    const { alg, kid } = header;\n    checkSupportedJwsAlg(alg);\n    if (!jwksMap?.has(as) && isFreshJwksCache(options?.[jwksCache])) {\n        setJwksCache(as, options?.[jwksCache].jwks, options?.[jwksCache].uat);\n    }\n    let jwks;\n    let age;\n    if (jwksMap?.has(as)) {\n        ;\n        ({ jwks, age } = jwksMap.get(as));\n        if (age >= 300) {\n            clearJwksCache(as, options?.[jwksCache]);\n            return getPublicSigKeyFromIssuerJwksUri(as, options, header);\n        }\n    }\n    else {\n        jwks = await jwksRequest(as, options).then(processJwksResponse);\n        age = 0;\n        setJwksCache(as, jwks, epochTime(), options?.[jwksCache]);\n    }\n    let kty;\n    switch (alg.slice(0, 2)) {\n        case 'RS':\n        case 'PS':\n            kty = 'RSA';\n            break;\n        case 'ES':\n            kty = 'EC';\n            break;\n        case 'Ed':\n            kty = 'OKP';\n            break;\n        default:\n            throw new UnsupportedOperationError();\n    }\n    const candidates = jwks.keys.filter((jwk) => {\n        if (jwk.kty !== kty) {\n            return false;\n        }\n        if (kid !== undefined && kid !== jwk.kid) {\n            return false;\n        }\n        if (jwk.alg !== undefined && alg !== jwk.alg) {\n            return false;\n        }\n        if (jwk.use !== undefined && jwk.use !== 'sig') {\n            return false;\n        }\n        if (jwk.key_ops?.includes('verify') === false) {\n            return false;\n        }\n        switch (true) {\n            case alg === 'ES256' && jwk.crv !== 'P-256':\n            case alg === 'ES384' && jwk.crv !== 'P-384':\n            case alg === 'ES512' && jwk.crv !== 'P-521':\n            case alg === 'EdDSA' && !(jwk.crv === 'Ed25519' || jwk.crv === 'Ed448'):\n                return false;\n        }\n        return true;\n    });\n    const { 0: jwk, length } = candidates;\n    if (!length) {\n        if (age >= 60) {\n            clearJwksCache(as, options?.[jwksCache]);\n            return getPublicSigKeyFromIssuerJwksUri(as, options, header);\n        }\n        throw new OPE('error when selecting a JWT verification key, no applicable keys found');\n    }\n    if (length !== 1) {\n        throw new OPE('error when selecting a JWT verification key, multiple applicable keys found, a \"kid\" JWT Header Parameter is required');\n    }\n    const key = await importJwk(alg, jwk);\n    if (key.type !== 'public') {\n        throw new OPE('jwks_uri must only contain public keys');\n    }\n    return key;\n}\nconst skipSubjectCheck = Symbol();\nfunction getContentType(response) {\n    return response.headers.get('content-type')?.split(';')[0];\n}\nasync function processUserInfoResponse(as, client, expectedSubject, response) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        throw new OPE('\"response\" is not a conform UserInfo Endpoint response');\n    }\n    let json;\n    if (getContentType(response) === 'application/jwt') {\n        assertReadableResponse(response);\n        const { claims, jwt } = await validateJwt(await response.text(), checkSigningAlgorithm.bind(undefined, client.userinfo_signed_response_alg, as.userinfo_signing_alg_values_supported), noSignatureCheck, getClockSkew(client), getClockTolerance(client), client[jweDecrypt])\n            .then(validateOptionalAudience.bind(undefined, client.client_id))\n            .then(validateOptionalIssuer.bind(undefined, as.issuer));\n        jwtResponseBodies.set(response, jwt);\n        json = claims;\n    }\n    else {\n        if (client.userinfo_signed_response_alg) {\n            throw new OPE('JWT UserInfo Response expected');\n        }\n        assertReadableResponse(response);\n        try {\n            json = await response.json();\n        }\n        catch (cause) {\n            throw new OPE('failed to parse \"response\" body as JSON', { cause });\n        }\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.sub)) {\n        throw new OPE('\"response\" body \"sub\" property must be a non-empty string');\n    }\n    switch (expectedSubject) {\n        case skipSubjectCheck:\n            break;\n        default:\n            if (!validateString(expectedSubject)) {\n                throw new OPE('\"expectedSubject\" must be a non-empty string');\n            }\n            if (json.sub !== expectedSubject) {\n                throw new OPE('unexpected \"response\" body \"sub\" value');\n            }\n    }\n    return json;\n}\nasync function authenticatedRequest(as, client, method, url, body, headers, options) {\n    await clientAuthentication(as, client, body, headers, options?.clientPrivateKey);\n    headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n    return (options?.[customFetch] || fetch)(url.href, {\n        body,\n        headers: Object.fromEntries(headers.entries()),\n        method,\n        redirect: 'manual',\n        signal: options?.signal ? signal(options.signal) : null,\n    }).then(processDpopNonce);\n}\nasync function tokenEndpointRequest(as, client, grantType, parameters, options) {\n    const url = resolveEndpoint(as, 'token_endpoint', alias(client, options));\n    parameters.set('grant_type', grantType);\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    if (options?.DPoP !== undefined) {\n        await dpopProofJwt(headers, options.DPoP, url, 'POST', getClockSkew(client));\n    }\n    return authenticatedRequest(as, client, 'POST', url, parameters, headers, options);\n}\nasync function refreshTokenGrantRequest(as, client, refreshToken, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!validateString(refreshToken)) {\n        throw new TypeError('\"refreshToken\" must be a non-empty string');\n    }\n    const parameters = new URLSearchParams(options?.additionalParameters);\n    parameters.set('refresh_token', refreshToken);\n    return tokenEndpointRequest(as, client, 'refresh_token', parameters, options);\n}\nconst idTokenClaims = new WeakMap();\nconst jwtResponseBodies = new WeakMap();\nfunction getValidatedIdTokenClaims(ref) {\n    if (!ref.id_token) {\n        return undefined;\n    }\n    const claims = idTokenClaims.get(ref);\n    if (!claims) {\n        throw new TypeError('\"ref\" was already garbage collected or did not resolve from the proper sources');\n    }\n    return claims[0];\n}\nasync function validateIdTokenSignature(as, ref, options) {\n    assertAs(as);\n    if (!idTokenClaims.has(ref)) {\n        throw new OPE('\"ref\" does not contain an ID Token to verify the signature of');\n    }\n    const { 0: protectedHeader, 1: payload, 2: encodedSignature, } = idTokenClaims.get(ref)[1].split('.');\n    const header = JSON.parse(buf(b64u(protectedHeader)));\n    if (header.alg.startsWith('HS')) {\n        throw new UnsupportedOperationError();\n    }\n    let key;\n    key = await getPublicSigKeyFromIssuerJwksUri(as, options, header);\n    await validateJwsSignature(protectedHeader, payload, key, b64u(encodedSignature));\n}\nasync function validateJwtResponseSignature(as, ref, options) {\n    assertAs(as);\n    if (!jwtResponseBodies.has(ref)) {\n        throw new OPE('\"ref\" does not contain a processed JWT Response to verify the signature of');\n    }\n    const { 0: protectedHeader, 1: payload, 2: encodedSignature, } = jwtResponseBodies.get(ref).split('.');\n    const header = JSON.parse(buf(b64u(protectedHeader)));\n    if (header.alg.startsWith('HS')) {\n        throw new UnsupportedOperationError();\n    }\n    let key;\n    key = await getPublicSigKeyFromIssuerJwksUri(as, options, header);\n    await validateJwsSignature(protectedHeader, payload, key, b64u(encodedSignature));\n}\nfunction validateJwtUserInfoSignature(as, ref, options) {\n    return validateJwtResponseSignature(as, ref, options);\n}\nfunction validateJwtIntrospectionSignature(as, ref, options) {\n    return validateJwtResponseSignature(as, ref, options);\n}\nasync function processGenericAccessTokenResponse(as, client, response, ignoreIdToken = false, ignoreRefreshToken = false) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Token Endpoint response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.access_token)) {\n        throw new OPE('\"response\" body \"access_token\" property must be a non-empty string');\n    }\n    if (!validateString(json.token_type)) {\n        throw new OPE('\"response\" body \"token_type\" property must be a non-empty string');\n    }\n    json.token_type = json.token_type.toLowerCase();\n    if (json.token_type !== 'dpop' && json.token_type !== 'bearer') {\n        throw new UnsupportedOperationError('unsupported `token_type` value');\n    }\n    if (json.expires_in !== undefined &&\n        (typeof json.expires_in !== 'number' || json.expires_in <= 0)) {\n        throw new OPE('\"response\" body \"expires_in\" property must be a positive number');\n    }\n    if (!ignoreRefreshToken &&\n        json.refresh_token !== undefined &&\n        !validateString(json.refresh_token)) {\n        throw new OPE('\"response\" body \"refresh_token\" property must be a non-empty string');\n    }\n    if (json.scope !== undefined && typeof json.scope !== 'string') {\n        throw new OPE('\"response\" body \"scope\" property must be a string');\n    }\n    if (!ignoreIdToken) {\n        if (json.id_token !== undefined && !validateString(json.id_token)) {\n            throw new OPE('\"response\" body \"id_token\" property must be a non-empty string');\n        }\n        if (json.id_token) {\n            const { claims, jwt } = await validateJwt(json.id_token, checkSigningAlgorithm.bind(undefined, client.id_token_signed_response_alg, as.id_token_signing_alg_values_supported), noSignatureCheck, getClockSkew(client), getClockTolerance(client), client[jweDecrypt])\n                .then(validatePresence.bind(undefined, ['aud', 'exp', 'iat', 'iss', 'sub']))\n                .then(validateIssuer.bind(undefined, as.issuer))\n                .then(validateAudience.bind(undefined, client.client_id));\n            if (Array.isArray(claims.aud) && claims.aud.length !== 1) {\n                if (claims.azp === undefined) {\n                    throw new OPE('ID Token \"aud\" (audience) claim includes additional untrusted audiences');\n                }\n                if (claims.azp !== client.client_id) {\n                    throw new OPE('unexpected ID Token \"azp\" (authorized party) claim value');\n                }\n            }\n            if (claims.auth_time !== undefined &&\n                (!Number.isFinite(claims.auth_time) || Math.sign(claims.auth_time) !== 1)) {\n                throw new OPE('ID Token \"auth_time\" (authentication time) must be a positive number');\n            }\n            idTokenClaims.set(json, [claims, jwt]);\n        }\n    }\n    return json;\n}\nasync function processRefreshTokenResponse(as, client, response) {\n    return processGenericAccessTokenResponse(as, client, response);\n}\nfunction validateOptionalAudience(expected, result) {\n    if (result.claims.aud !== undefined) {\n        return validateAudience(expected, result);\n    }\n    return result;\n}\nfunction validateAudience(expected, result) {\n    if (Array.isArray(result.claims.aud)) {\n        if (!result.claims.aud.includes(expected)) {\n            throw new OPE('unexpected JWT \"aud\" (audience) claim value');\n        }\n    }\n    else if (result.claims.aud !== expected) {\n        throw new OPE('unexpected JWT \"aud\" (audience) claim value');\n    }\n    return result;\n}\nfunction validateOptionalIssuer(expected, result) {\n    if (result.claims.iss !== undefined) {\n        return validateIssuer(expected, result);\n    }\n    return result;\n}\nfunction validateIssuer(expected, result) {\n    if (result.claims.iss !== expected) {\n        throw new OPE('unexpected JWT \"iss\" (issuer) claim value');\n    }\n    return result;\n}\nconst branded = new WeakSet();\nfunction brand(searchParams) {\n    branded.add(searchParams);\n    return searchParams;\n}\nasync function authorizationCodeGrantRequest(as, client, callbackParameters, redirectUri, codeVerifier, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!branded.has(callbackParameters)) {\n        throw new TypeError('\"callbackParameters\" must be an instance of URLSearchParams obtained from \"validateAuthResponse()\", or \"validateJwtAuthResponse()');\n    }\n    if (!validateString(redirectUri)) {\n        throw new TypeError('\"redirectUri\" must be a non-empty string');\n    }\n    if (!validateString(codeVerifier)) {\n        throw new TypeError('\"codeVerifier\" must be a non-empty string');\n    }\n    const code = getURLSearchParameter(callbackParameters, 'code');\n    if (!code) {\n        throw new OPE('no authorization code in \"callbackParameters\"');\n    }\n    const parameters = new URLSearchParams(options?.additionalParameters);\n    parameters.set('redirect_uri', redirectUri);\n    parameters.set('code_verifier', codeVerifier);\n    parameters.set('code', code);\n    return tokenEndpointRequest(as, client, 'authorization_code', parameters, options);\n}\nconst jwtClaimNames = {\n    aud: 'audience',\n    c_hash: 'code hash',\n    client_id: 'client id',\n    exp: 'expiration time',\n    iat: 'issued at',\n    iss: 'issuer',\n    jti: 'jwt id',\n    nonce: 'nonce',\n    s_hash: 'state hash',\n    sub: 'subject',\n    ath: 'access token hash',\n    htm: 'http method',\n    htu: 'http uri',\n    cnf: 'confirmation',\n};\nfunction validatePresence(required, result) {\n    for (const claim of required) {\n        if (result.claims[claim] === undefined) {\n            throw new OPE(`JWT \"${claim}\" (${jwtClaimNames[claim]}) claim missing`);\n        }\n    }\n    return result;\n}\nconst expectNoNonce = Symbol();\nconst skipAuthTimeCheck = Symbol();\nasync function processAuthorizationCodeOpenIDResponse(as, client, response, expectedNonce, maxAge) {\n    const result = await processGenericAccessTokenResponse(as, client, response);\n    if (isOAuth2Error(result)) {\n        return result;\n    }\n    if (!validateString(result.id_token)) {\n        throw new OPE('\"response\" body \"id_token\" property must be a non-empty string');\n    }\n    maxAge ?? (maxAge = client.default_max_age ?? skipAuthTimeCheck);\n    const claims = getValidatedIdTokenClaims(result);\n    if ((client.require_auth_time || maxAge !== skipAuthTimeCheck) &&\n        claims.auth_time === undefined) {\n        throw new OPE('ID Token \"auth_time\" (authentication time) claim missing');\n    }\n    if (maxAge !== skipAuthTimeCheck) {\n        if (typeof maxAge !== 'number' || maxAge < 0) {\n            throw new TypeError('\"maxAge\" must be a non-negative number');\n        }\n        const now = epochTime() + getClockSkew(client);\n        const tolerance = getClockTolerance(client);\n        if (claims.auth_time + maxAge < now - tolerance) {\n            throw new OPE('too much time has elapsed since the last End-User authentication');\n        }\n    }\n    switch (expectedNonce) {\n        case undefined:\n        case expectNoNonce:\n            if (claims.nonce !== undefined) {\n                throw new OPE('unexpected ID Token \"nonce\" claim value');\n            }\n            break;\n        default:\n            if (!validateString(expectedNonce)) {\n                throw new TypeError('\"expectedNonce\" must be a non-empty string');\n            }\n            if (claims.nonce === undefined) {\n                throw new OPE('ID Token \"nonce\" claim missing');\n            }\n            if (claims.nonce !== expectedNonce) {\n                throw new OPE('unexpected ID Token \"nonce\" claim value');\n            }\n    }\n    return result;\n}\nasync function processAuthorizationCodeOAuth2Response(as, client, response) {\n    const result = await processGenericAccessTokenResponse(as, client, response, true);\n    if (isOAuth2Error(result)) {\n        return result;\n    }\n    if (result.id_token !== undefined) {\n        if (typeof result.id_token === 'string' && result.id_token.length) {\n            throw new OPE('Unexpected ID Token returned, use processAuthorizationCodeOpenIDResponse() for OpenID Connect callback processing');\n        }\n        delete result.id_token;\n    }\n    return result;\n}\nfunction checkJwtType(expected, result) {\n    if (typeof result.header.typ !== 'string' || normalizeTyp(result.header.typ) !== expected) {\n        throw new OPE('unexpected JWT \"typ\" header parameter value');\n    }\n    return result;\n}\nasync function clientCredentialsGrantRequest(as, client, parameters, options) {\n    assertAs(as);\n    assertClient(client);\n    return tokenEndpointRequest(as, client, 'client_credentials', new URLSearchParams(parameters), options);\n}\nasync function genericTokenEndpointRequest(as, client, grantType, parameters, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!validateString(grantType)) {\n        throw new TypeError('\"grantType\" must be a non-empty string');\n    }\n    return tokenEndpointRequest(as, client, grantType, new URLSearchParams(parameters), options);\n}\nasync function processClientCredentialsResponse(as, client, response) {\n    const result = await processGenericAccessTokenResponse(as, client, response, true, true);\n    if (isOAuth2Error(result)) {\n        return result;\n    }\n    return result;\n}\nasync function revocationRequest(as, client, token, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!validateString(token)) {\n        throw new TypeError('\"token\" must be a non-empty string');\n    }\n    const url = resolveEndpoint(as, 'revocation_endpoint', alias(client, options));\n    const body = new URLSearchParams(options?.additionalParameters);\n    body.set('token', token);\n    const headers = prepareHeaders(options?.headers);\n    headers.delete('accept');\n    return authenticatedRequest(as, client, 'POST', url, body, headers, options);\n}\nasync function processRevocationResponse(response) {\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Revocation Endpoint response');\n    }\n    return undefined;\n}\nfunction assertReadableResponse(response) {\n    if (response.bodyUsed) {\n        throw new TypeError('\"response\" body has been used already');\n    }\n}\nasync function introspectionRequest(as, client, token, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!validateString(token)) {\n        throw new TypeError('\"token\" must be a non-empty string');\n    }\n    const url = resolveEndpoint(as, 'introspection_endpoint', alias(client, options));\n    const body = new URLSearchParams(options?.additionalParameters);\n    body.set('token', token);\n    const headers = prepareHeaders(options?.headers);\n    if (options?.requestJwtResponse ?? client.introspection_signed_response_alg) {\n        headers.set('accept', 'application/token-introspection+jwt');\n    }\n    else {\n        headers.set('accept', 'application/json');\n    }\n    return authenticatedRequest(as, client, 'POST', url, body, headers, options);\n}\nasync function processIntrospectionResponse(as, client, response) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Introspection Endpoint response');\n    }\n    let json;\n    if (getContentType(response) === 'application/token-introspection+jwt') {\n        assertReadableResponse(response);\n        const { claims, jwt } = await validateJwt(await response.text(), checkSigningAlgorithm.bind(undefined, client.introspection_signed_response_alg, as.introspection_signing_alg_values_supported), noSignatureCheck, getClockSkew(client), getClockTolerance(client), client[jweDecrypt])\n            .then(checkJwtType.bind(undefined, 'token-introspection+jwt'))\n            .then(validatePresence.bind(undefined, ['aud', 'iat', 'iss']))\n            .then(validateIssuer.bind(undefined, as.issuer))\n            .then(validateAudience.bind(undefined, client.client_id));\n        jwtResponseBodies.set(response, jwt);\n        json = claims.token_introspection;\n        if (!isJsonObject(json)) {\n            throw new OPE('JWT \"token_introspection\" claim must be a JSON object');\n        }\n    }\n    else {\n        assertReadableResponse(response);\n        try {\n            json = await response.json();\n        }\n        catch (cause) {\n            throw new OPE('failed to parse \"response\" body as JSON', { cause });\n        }\n        if (!isJsonObject(json)) {\n            throw new OPE('\"response\" body must be a top level object');\n        }\n    }\n    if (typeof json.active !== 'boolean') {\n        throw new OPE('\"response\" body \"active\" property must be a boolean');\n    }\n    return json;\n}\nasync function jwksRequest(as, options) {\n    assertAs(as);\n    const url = resolveEndpoint(as, 'jwks_uri');\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    headers.append('accept', 'application/jwk-set+json');\n    return (options?.[customFetch] || fetch)(url.href, {\n        headers: Object.fromEntries(headers.entries()),\n        method: 'GET',\n        redirect: 'manual',\n        signal: options?.signal ? signal(options.signal) : null,\n    }).then(processDpopNonce);\n}\nasync function processJwksResponse(response) {\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        throw new OPE('\"response\" is not a conform JSON Web Key Set response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!Array.isArray(json.keys)) {\n        throw new OPE('\"response\" body \"keys\" property must be an array');\n    }\n    if (!Array.prototype.every.call(json.keys, isJsonObject)) {\n        throw new OPE('\"response\" body \"keys\" property members must be JWK formatted objects');\n    }\n    return json;\n}\nasync function handleOAuthBodyError(response) {\n    if (response.status > 399 && response.status < 500) {\n        assertReadableResponse(response);\n        try {\n            const json = await response.json();\n            if (isJsonObject(json) && typeof json.error === 'string' && json.error.length) {\n                if (json.error_description !== undefined && typeof json.error_description !== 'string') {\n                    delete json.error_description;\n                }\n                if (json.error_uri !== undefined && typeof json.error_uri !== 'string') {\n                    delete json.error_uri;\n                }\n                if (json.algs !== undefined && typeof json.algs !== 'string') {\n                    delete json.algs;\n                }\n                if (json.scope !== undefined && typeof json.scope !== 'string') {\n                    delete json.scope;\n                }\n                return json;\n            }\n        }\n        catch { }\n    }\n    return undefined;\n}\nfunction checkSupportedJwsAlg(alg) {\n    if (!SUPPORTED_JWS_ALGS.includes(alg)) {\n        throw new UnsupportedOperationError('unsupported JWS \"alg\" identifier');\n    }\n    return alg;\n}\nfunction checkRsaKeyAlgorithm(algorithm) {\n    if (typeof algorithm.modulusLength !== 'number' || algorithm.modulusLength < 2048) {\n        throw new OPE(`${algorithm.name} modulusLength must be at least 2048 bits`);\n    }\n}\nfunction ecdsaHashName(namedCurve) {\n    switch (namedCurve) {\n        case 'P-256':\n            return 'SHA-256';\n        case 'P-384':\n            return 'SHA-384';\n        case 'P-521':\n            return 'SHA-512';\n        default:\n            throw new UnsupportedOperationError();\n    }\n}\nfunction keyToSubtle(key) {\n    switch (key.algorithm.name) {\n        case 'ECDSA':\n            return {\n                name: key.algorithm.name,\n                hash: ecdsaHashName(key.algorithm.namedCurve),\n            };\n        case 'RSA-PSS': {\n            checkRsaKeyAlgorithm(key.algorithm);\n            switch (key.algorithm.hash.name) {\n                case 'SHA-256':\n                case 'SHA-384':\n                case 'SHA-512':\n                    return {\n                        name: key.algorithm.name,\n                        saltLength: parseInt(key.algorithm.hash.name.slice(-3), 10) >> 3,\n                    };\n                default:\n                    throw new UnsupportedOperationError();\n            }\n        }\n        case 'RSASSA-PKCS1-v1_5':\n            checkRsaKeyAlgorithm(key.algorithm);\n            return key.algorithm.name;\n        case 'Ed448':\n        case 'Ed25519':\n            return key.algorithm.name;\n    }\n    throw new UnsupportedOperationError();\n}\nconst noSignatureCheck = Symbol();\nasync function validateJwsSignature(protectedHeader, payload, key, signature) {\n    const input = `${protectedHeader}.${payload}`;\n    const verified = await crypto.subtle.verify(keyToSubtle(key), key, signature, buf(input));\n    if (!verified) {\n        throw new OPE('JWT signature verification failed');\n    }\n}\nasync function validateJwt(jws, checkAlg, getKey, clockSkew, clockTolerance, decryptJwt) {\n    let { 0: protectedHeader, 1: payload, 2: encodedSignature, length } = jws.split('.');\n    if (length === 5) {\n        if (decryptJwt !== undefined) {\n            jws = await decryptJwt(jws);\n            ({ 0: protectedHeader, 1: payload, 2: encodedSignature, length } = jws.split('.'));\n        }\n        else {\n            throw new UnsupportedOperationError('JWE structure JWTs are not supported');\n        }\n    }\n    if (length !== 3) {\n        throw new OPE('Invalid JWT');\n    }\n    let header;\n    try {\n        header = JSON.parse(buf(b64u(protectedHeader)));\n    }\n    catch (cause) {\n        throw new OPE('failed to parse JWT Header body as base64url encoded JSON', { cause });\n    }\n    if (!isJsonObject(header)) {\n        throw new OPE('JWT Header must be a top level object');\n    }\n    checkAlg(header);\n    if (header.crit !== undefined) {\n        throw new OPE('unexpected JWT \"crit\" header parameter');\n    }\n    const signature = b64u(encodedSignature);\n    let key;\n    if (getKey !== noSignatureCheck) {\n        key = await getKey(header);\n        await validateJwsSignature(protectedHeader, payload, key, signature);\n    }\n    let claims;\n    try {\n        claims = JSON.parse(buf(b64u(payload)));\n    }\n    catch (cause) {\n        throw new OPE('failed to parse JWT Payload body as base64url encoded JSON', { cause });\n    }\n    if (!isJsonObject(claims)) {\n        throw new OPE('JWT Payload must be a top level object');\n    }\n    const now = epochTime() + clockSkew;\n    if (claims.exp !== undefined) {\n        if (typeof claims.exp !== 'number') {\n            throw new OPE('unexpected JWT \"exp\" (expiration time) claim type');\n        }\n        if (claims.exp <= now - clockTolerance) {\n            throw new OPE('unexpected JWT \"exp\" (expiration time) claim value, timestamp is <= now()');\n        }\n    }\n    if (claims.iat !== undefined) {\n        if (typeof claims.iat !== 'number') {\n            throw new OPE('unexpected JWT \"iat\" (issued at) claim type');\n        }\n    }\n    if (claims.iss !== undefined) {\n        if (typeof claims.iss !== 'string') {\n            throw new OPE('unexpected JWT \"iss\" (issuer) claim type');\n        }\n    }\n    if (claims.nbf !== undefined) {\n        if (typeof claims.nbf !== 'number') {\n            throw new OPE('unexpected JWT \"nbf\" (not before) claim type');\n        }\n        if (claims.nbf > now + clockTolerance) {\n            throw new OPE('unexpected JWT \"nbf\" (not before) claim value, timestamp is > now()');\n        }\n    }\n    if (claims.aud !== undefined) {\n        if (typeof claims.aud !== 'string' && !Array.isArray(claims.aud)) {\n            throw new OPE('unexpected JWT \"aud\" (audience) claim type');\n        }\n    }\n    return { header, claims, signature, key, jwt: jws };\n}\nasync function validateJwtAuthResponse(as, client, parameters, expectedState, options) {\n    assertAs(as);\n    assertClient(client);\n    if (parameters instanceof URL) {\n        parameters = parameters.searchParams;\n    }\n    if (!(parameters instanceof URLSearchParams)) {\n        throw new TypeError('\"parameters\" must be an instance of URLSearchParams, or URL');\n    }\n    const response = getURLSearchParameter(parameters, 'response');\n    if (!response) {\n        throw new OPE('\"parameters\" does not contain a JARM response');\n    }\n    const { claims } = await validateJwt(response, checkSigningAlgorithm.bind(undefined, client.authorization_signed_response_alg, as.authorization_signing_alg_values_supported), getPublicSigKeyFromIssuerJwksUri.bind(undefined, as, options), getClockSkew(client), getClockTolerance(client), client[jweDecrypt])\n        .then(validatePresence.bind(undefined, ['aud', 'exp', 'iss']))\n        .then(validateIssuer.bind(undefined, as.issuer))\n        .then(validateAudience.bind(undefined, client.client_id));\n    const result = new URLSearchParams();\n    for (const [key, value] of Object.entries(claims)) {\n        if (typeof value === 'string' && key !== 'aud') {\n            result.set(key, value);\n        }\n    }\n    return validateAuthResponse(as, client, result, expectedState);\n}\nasync function idTokenHash(alg, data, key) {\n    let algorithm;\n    switch (alg) {\n        case 'RS256':\n        case 'PS256':\n        case 'ES256':\n            algorithm = 'SHA-256';\n            break;\n        case 'RS384':\n        case 'PS384':\n        case 'ES384':\n            algorithm = 'SHA-384';\n            break;\n        case 'RS512':\n        case 'PS512':\n        case 'ES512':\n            algorithm = 'SHA-512';\n            break;\n        case 'EdDSA':\n            if (key.algorithm.name === 'Ed25519') {\n                algorithm = 'SHA-512';\n                break;\n            }\n            throw new UnsupportedOperationError();\n        default:\n            throw new UnsupportedOperationError();\n    }\n    const digest = await crypto.subtle.digest(algorithm, buf(data));\n    return b64u(digest.slice(0, digest.byteLength / 2));\n}\nasync function idTokenHashMatches(data, actual, alg, key) {\n    const expected = await idTokenHash(alg, data, key);\n    return actual === expected;\n}\nasync function validateDetachedSignatureResponse(as, client, parameters, expectedNonce, expectedState, maxAge, options) {\n    assertAs(as);\n    assertClient(client);\n    if (parameters instanceof URL) {\n        if (!parameters.hash.length) {\n            throw new TypeError('\"parameters\" as an instance of URL must contain a hash (fragment) with the Authorization Response parameters');\n        }\n        parameters = new URLSearchParams(parameters.hash.slice(1));\n    }\n    if (!(parameters instanceof URLSearchParams)) {\n        throw new TypeError('\"parameters\" must be an instance of URLSearchParams');\n    }\n    parameters = new URLSearchParams(parameters);\n    const id_token = getURLSearchParameter(parameters, 'id_token');\n    parameters.delete('id_token');\n    switch (expectedState) {\n        case undefined:\n        case expectNoState:\n            break;\n        default:\n            if (!validateString(expectedState)) {\n                throw new TypeError('\"expectedState\" must be a non-empty string');\n            }\n    }\n    const result = validateAuthResponse({\n        ...as,\n        authorization_response_iss_parameter_supported: false,\n    }, client, parameters, expectedState);\n    if (isOAuth2Error(result)) {\n        return result;\n    }\n    if (!id_token) {\n        throw new OPE('\"parameters\" does not contain an ID Token');\n    }\n    const code = getURLSearchParameter(parameters, 'code');\n    if (!code) {\n        throw new OPE('\"parameters\" does not contain an Authorization Code');\n    }\n    const requiredClaims = [\n        'aud',\n        'exp',\n        'iat',\n        'iss',\n        'sub',\n        'nonce',\n        'c_hash',\n    ];\n    if (typeof expectedState === 'string') {\n        requiredClaims.push('s_hash');\n    }\n    const { claims, header, key } = await validateJwt(id_token, checkSigningAlgorithm.bind(undefined, client.id_token_signed_response_alg, as.id_token_signing_alg_values_supported), getPublicSigKeyFromIssuerJwksUri.bind(undefined, as, options), getClockSkew(client), getClockTolerance(client), client[jweDecrypt])\n        .then(validatePresence.bind(undefined, requiredClaims))\n        .then(validateIssuer.bind(undefined, as.issuer))\n        .then(validateAudience.bind(undefined, client.client_id));\n    const clockSkew = getClockSkew(client);\n    const now = epochTime() + clockSkew;\n    if (claims.iat < now - 3600) {\n        throw new OPE('unexpected JWT \"iat\" (issued at) claim value, it is too far in the past');\n    }\n    if (typeof claims.c_hash !== 'string' ||\n        (await idTokenHashMatches(code, claims.c_hash, header.alg, key)) !== true) {\n        throw new OPE('invalid ID Token \"c_hash\" (code hash) claim value');\n    }\n    if (claims.s_hash !== undefined && typeof expectedState !== 'string') {\n        throw new OPE('could not verify ID Token \"s_hash\" (state hash) claim value');\n    }\n    if (typeof expectedState === 'string' &&\n        (typeof claims.s_hash !== 'string' ||\n            (await idTokenHashMatches(expectedState, claims.s_hash, header.alg, key)) !== true)) {\n        throw new OPE('invalid ID Token \"s_hash\" (state hash) claim value');\n    }\n    if (claims.auth_time !== undefined &&\n        (!Number.isFinite(claims.auth_time) || Math.sign(claims.auth_time) !== 1)) {\n        throw new OPE('ID Token \"auth_time\" (authentication time) must be a positive number');\n    }\n    maxAge ?? (maxAge = client.default_max_age ?? skipAuthTimeCheck);\n    if ((client.require_auth_time || maxAge !== skipAuthTimeCheck) &&\n        claims.auth_time === undefined) {\n        throw new OPE('ID Token \"auth_time\" (authentication time) claim missing');\n    }\n    if (maxAge !== skipAuthTimeCheck) {\n        if (typeof maxAge !== 'number' || maxAge < 0) {\n            throw new TypeError('\"maxAge\" must be a non-negative number');\n        }\n        const now = epochTime() + getClockSkew(client);\n        const tolerance = getClockTolerance(client);\n        if (claims.auth_time + maxAge < now - tolerance) {\n            throw new OPE('too much time has elapsed since the last End-User authentication');\n        }\n    }\n    if (!validateString(expectedNonce)) {\n        throw new TypeError('\"expectedNonce\" must be a non-empty string');\n    }\n    if (claims.nonce !== expectedNonce) {\n        throw new OPE('unexpected ID Token \"nonce\" claim value');\n    }\n    if (Array.isArray(claims.aud) && claims.aud.length !== 1) {\n        if (claims.azp === undefined) {\n            throw new OPE('ID Token \"aud\" (audience) claim includes additional untrusted audiences');\n        }\n        if (claims.azp !== client.client_id) {\n            throw new OPE('unexpected ID Token \"azp\" (authorized party) claim value');\n        }\n    }\n    return result;\n}\nfunction checkSigningAlgorithm(client, issuer, header) {\n    if (client !== undefined) {\n        if (header.alg !== client) {\n            throw new OPE('unexpected JWT \"alg\" header parameter');\n        }\n        return;\n    }\n    if (Array.isArray(issuer)) {\n        if (!issuer.includes(header.alg)) {\n            throw new OPE('unexpected JWT \"alg\" header parameter');\n        }\n        return;\n    }\n    if (header.alg !== 'RS256') {\n        throw new OPE('unexpected JWT \"alg\" header parameter');\n    }\n}\nfunction getURLSearchParameter(parameters, name) {\n    const { 0: value, length } = parameters.getAll(name);\n    if (length > 1) {\n        throw new OPE(`\"${name}\" parameter must be provided only once`);\n    }\n    return value;\n}\nconst skipStateCheck = Symbol();\nconst expectNoState = Symbol();\nfunction validateAuthResponse(as, client, parameters, expectedState) {\n    assertAs(as);\n    assertClient(client);\n    if (parameters instanceof URL) {\n        parameters = parameters.searchParams;\n    }\n    if (!(parameters instanceof URLSearchParams)) {\n        throw new TypeError('\"parameters\" must be an instance of URLSearchParams, or URL');\n    }\n    if (getURLSearchParameter(parameters, 'response')) {\n        throw new OPE('\"parameters\" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()');\n    }\n    const iss = getURLSearchParameter(parameters, 'iss');\n    const state = getURLSearchParameter(parameters, 'state');\n    if (!iss && as.authorization_response_iss_parameter_supported) {\n        throw new OPE('response parameter \"iss\" (issuer) missing');\n    }\n    if (iss && iss !== as.issuer) {\n        throw new OPE('unexpected \"iss\" (issuer) response parameter value');\n    }\n    switch (expectedState) {\n        case undefined:\n        case expectNoState:\n            if (state !== undefined) {\n                throw new OPE('unexpected \"state\" response parameter encountered');\n            }\n            break;\n        case skipStateCheck:\n            break;\n        default:\n            if (!validateString(expectedState)) {\n                throw new OPE('\"expectedState\" must be a non-empty string');\n            }\n            if (state === undefined) {\n                throw new OPE('response parameter \"state\" missing');\n            }\n            if (state !== expectedState) {\n                throw new OPE('unexpected \"state\" response parameter value');\n            }\n    }\n    const error = getURLSearchParameter(parameters, 'error');\n    if (error) {\n        return {\n            error,\n            error_description: getURLSearchParameter(parameters, 'error_description'),\n            error_uri: getURLSearchParameter(parameters, 'error_uri'),\n        };\n    }\n    const id_token = getURLSearchParameter(parameters, 'id_token');\n    const token = getURLSearchParameter(parameters, 'token');\n    if (id_token !== undefined || token !== undefined) {\n        throw new UnsupportedOperationError('implicit and hybrid flows are not supported');\n    }\n    return brand(new URLSearchParams(parameters));\n}\nfunction algToSubtle(alg, crv) {\n    switch (alg) {\n        case 'PS256':\n        case 'PS384':\n        case 'PS512':\n            return { name: 'RSA-PSS', hash: `SHA-${alg.slice(-3)}` };\n        case 'RS256':\n        case 'RS384':\n        case 'RS512':\n            return { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${alg.slice(-3)}` };\n        case 'ES256':\n        case 'ES384':\n            return { name: 'ECDSA', namedCurve: `P-${alg.slice(-3)}` };\n        case 'ES512':\n            return { name: 'ECDSA', namedCurve: 'P-521' };\n        case 'EdDSA': {\n            switch (crv) {\n                case 'Ed25519':\n                case 'Ed448':\n                    return crv;\n                default:\n                    throw new UnsupportedOperationError();\n            }\n        }\n        default:\n            throw new UnsupportedOperationError();\n    }\n}\nasync function importJwk(alg, jwk) {\n    const { ext, key_ops, use, ...key } = jwk;\n    return crypto.subtle.importKey('jwk', key, algToSubtle(alg, jwk.crv), true, ['verify']);\n}\nasync function deviceAuthorizationRequest(as, client, parameters, options) {\n    assertAs(as);\n    assertClient(client);\n    const url = resolveEndpoint(as, 'device_authorization_endpoint', alias(client, options));\n    const body = new URLSearchParams(parameters);\n    body.set('client_id', client.client_id);\n    const headers = prepareHeaders(options?.headers);\n    headers.set('accept', 'application/json');\n    return authenticatedRequest(as, client, 'POST', url, body, headers, options);\n}\nasync function processDeviceAuthorizationResponse(as, client, response) {\n    assertAs(as);\n    assertClient(client);\n    if (!looseInstanceOf(response, Response)) {\n        throw new TypeError('\"response\" must be an instance of Response');\n    }\n    if (response.status !== 200) {\n        let err;\n        if ((err = await handleOAuthBodyError(response))) {\n            return err;\n        }\n        throw new OPE('\"response\" is not a conform Device Authorization Endpoint response');\n    }\n    assertReadableResponse(response);\n    let json;\n    try {\n        json = await response.json();\n    }\n    catch (cause) {\n        throw new OPE('failed to parse \"response\" body as JSON', { cause });\n    }\n    if (!isJsonObject(json)) {\n        throw new OPE('\"response\" body must be a top level object');\n    }\n    if (!validateString(json.device_code)) {\n        throw new OPE('\"response\" body \"device_code\" property must be a non-empty string');\n    }\n    if (!validateString(json.user_code)) {\n        throw new OPE('\"response\" body \"user_code\" property must be a non-empty string');\n    }\n    if (!validateString(json.verification_uri)) {\n        throw new OPE('\"response\" body \"verification_uri\" property must be a non-empty string');\n    }\n    if (typeof json.expires_in !== 'number' || json.expires_in <= 0) {\n        throw new OPE('\"response\" body \"expires_in\" property must be a positive number');\n    }\n    if (json.verification_uri_complete !== undefined &&\n        !validateString(json.verification_uri_complete)) {\n        throw new OPE('\"response\" body \"verification_uri_complete\" property must be a non-empty string');\n    }\n    if (json.interval !== undefined && (typeof json.interval !== 'number' || json.interval <= 0)) {\n        throw new OPE('\"response\" body \"interval\" property must be a positive number');\n    }\n    return json;\n}\nasync function deviceCodeGrantRequest(as, client, deviceCode, options) {\n    assertAs(as);\n    assertClient(client);\n    if (!validateString(deviceCode)) {\n        throw new TypeError('\"deviceCode\" must be a non-empty string');\n    }\n    const parameters = new URLSearchParams(options?.additionalParameters);\n    parameters.set('device_code', deviceCode);\n    return tokenEndpointRequest(as, client, 'urn:ietf:params:oauth:grant-type:device_code', parameters, options);\n}\nasync function processDeviceCodeResponse(as, client, response) {\n    return processGenericAccessTokenResponse(as, client, response);\n}\nasync function generateKeyPair(alg, options) {\n    if (!validateString(alg)) {\n        throw new TypeError('\"alg\" must be a non-empty string');\n    }\n    const algorithm = algToSubtle(alg, alg === 'EdDSA' ? (options?.crv ?? 'Ed25519') : undefined);\n    if (alg.startsWith('PS') || alg.startsWith('RS')) {\n        Object.assign(algorithm, {\n            modulusLength: options?.modulusLength ?? 2048,\n            publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n        });\n    }\n    return crypto.subtle.generateKey(algorithm, options?.extractable ?? false, [\n        'sign',\n        'verify',\n    ]);\n}\nfunction normalizeHtu(htu) {\n    const url = new URL(htu);\n    url.search = '';\n    url.hash = '';\n    return url.href;\n}\nasync function validateDPoP(as, request, accessToken, accessTokenClaims, options) {\n    const header = request.headers.get('dpop');\n    if (header === null) {\n        throw new OPE('operation indicated DPoP use but the request has no DPoP HTTP Header');\n    }\n    if (request.headers.get('authorization')?.toLowerCase().startsWith('dpop ') === false) {\n        throw new OPE(`operation indicated DPoP use but the request's Authorization HTTP Header scheme is not DPoP`);\n    }\n    if (typeof accessTokenClaims.cnf?.jkt !== 'string') {\n        throw new OPE('operation indicated DPoP use but the JWT Access Token has no jkt confirmation claim');\n    }\n    const clockSkew = getClockSkew(options);\n    const proof = await validateJwt(header, checkSigningAlgorithm.bind(undefined, undefined, as?.dpop_signing_alg_values_supported || SUPPORTED_JWS_ALGS), async ({ jwk, alg }) => {\n        if (!jwk) {\n            throw new OPE('DPoP Proof is missing the jwk header parameter');\n        }\n        const key = await importJwk(alg, jwk);\n        if (key.type !== 'public') {\n            throw new OPE('DPoP Proof jwk header parameter must contain a public key');\n        }\n        return key;\n    }, clockSkew, getClockTolerance(options), undefined)\n        .then(checkJwtType.bind(undefined, 'dpop+jwt'))\n        .then(validatePresence.bind(undefined, ['iat', 'jti', 'ath', 'htm', 'htu']));\n    const now = epochTime() + clockSkew;\n    const diff = Math.abs(now - proof.claims.iat);\n    if (diff > 300) {\n        throw new OPE('DPoP Proof iat is not recent enough');\n    }\n    if (proof.claims.htm !== request.method) {\n        throw new OPE('DPoP Proof htm mismatch');\n    }\n    if (typeof proof.claims.htu !== 'string' ||\n        normalizeHtu(proof.claims.htu) !== normalizeHtu(request.url)) {\n        throw new OPE('DPoP Proof htu mismatch');\n    }\n    {\n        const expected = b64u(await crypto.subtle.digest('SHA-256', encoder.encode(accessToken)));\n        if (proof.claims.ath !== expected) {\n            throw new OPE('DPoP Proof ath mismatch');\n        }\n    }\n    {\n        let components;\n        switch (proof.header.jwk.kty) {\n            case 'EC':\n                components = {\n                    crv: proof.header.jwk.crv,\n                    kty: proof.header.jwk.kty,\n                    x: proof.header.jwk.x,\n                    y: proof.header.jwk.y,\n                };\n                break;\n            case 'OKP':\n                components = {\n                    crv: proof.header.jwk.crv,\n                    kty: proof.header.jwk.kty,\n                    x: proof.header.jwk.x,\n                };\n                break;\n            case 'RSA':\n                components = {\n                    e: proof.header.jwk.e,\n                    kty: proof.header.jwk.kty,\n                    n: proof.header.jwk.n,\n                };\n                break;\n            default:\n                throw new UnsupportedOperationError();\n        }\n        const expected = b64u(await crypto.subtle.digest('SHA-256', encoder.encode(JSON.stringify(components))));\n        if (accessTokenClaims.cnf.jkt !== expected) {\n            throw new OPE('JWT Access Token confirmation mismatch');\n        }\n    }\n}\nasync function validateJwtAccessToken(as, request, expectedAudience, options) {\n    assertAs(as);\n    if (!looseInstanceOf(request, Request)) {\n        throw new TypeError('\"request\" must be an instance of Request');\n    }\n    if (!validateString(expectedAudience)) {\n        throw new OPE('\"expectedAudience\" must be a non-empty string');\n    }\n    const authorization = request.headers.get('authorization');\n    if (authorization === null) {\n        throw new OPE('\"request\" is missing an Authorization HTTP Header');\n    }\n    let { 0: scheme, 1: accessToken, length } = authorization.split(' ');\n    scheme = scheme.toLowerCase();\n    switch (scheme) {\n        case 'dpop':\n        case 'bearer':\n            break;\n        default:\n            throw new UnsupportedOperationError('unsupported Authorization HTTP Header scheme');\n    }\n    if (length !== 2) {\n        throw new OPE('invalid Authorization HTTP Header format');\n    }\n    const requiredClaims = [\n        'iss',\n        'exp',\n        'aud',\n        'sub',\n        'iat',\n        'jti',\n        'client_id',\n    ];\n    if (options?.requireDPoP || scheme === 'dpop' || request.headers.has('dpop')) {\n        requiredClaims.push('cnf');\n    }\n    const { claims } = await validateJwt(accessToken, checkSigningAlgorithm.bind(undefined, undefined, SUPPORTED_JWS_ALGS), getPublicSigKeyFromIssuerJwksUri.bind(undefined, as, options), getClockSkew(options), getClockTolerance(options), undefined)\n        .then(checkJwtType.bind(undefined, 'at+jwt'))\n        .then(validatePresence.bind(undefined, requiredClaims))\n        .then(validateIssuer.bind(undefined, as.issuer))\n        .then(validateAudience.bind(undefined, expectedAudience));\n    for (const claim of ['client_id', 'jti', 'sub']) {\n        if (typeof claims[claim] !== 'string') {\n            throw new OPE(`unexpected JWT \"${claim}\" claim type`);\n        }\n    }\n    if ('cnf' in claims) {\n        if (!isJsonObject(claims.cnf)) {\n            throw new OPE('unexpected JWT \"cnf\" (confirmation) claim value');\n        }\n        const { 0: cnf, length } = Object.keys(claims.cnf);\n        if (length) {\n            if (length !== 1) {\n                throw new UnsupportedOperationError('multiple confirmation claims are not supported');\n            }\n            if (cnf !== 'jkt') {\n                throw new UnsupportedOperationError('unsupported JWT Confirmation method');\n            }\n        }\n    }\n    if (options?.requireDPoP ||\n        scheme === 'dpop' ||\n        claims.cnf?.jkt !== undefined ||\n        request.headers.has('dpop')) {\n        await validateDPoP(as, request, accessToken, claims, options);\n    }\n    return claims;\n}\nconst experimentalCustomFetch = customFetch;\nconst experimental_customFetch = customFetch;\nconst experimentalUseMtlsAlias = useMtlsAlias;\nconst experimental_useMtlsAlias = useMtlsAlias;\nconst experimental_validateDetachedSignatureResponse = (...args) => validateDetachedSignatureResponse(...args);\nconst experimental_validateJwtAccessToken = (...args) => validateJwtAccessToken(...args);\nconst validateJwtUserinfoSignature = (...args) => validateJwtUserInfoSignature(...args);\nconst experimental_jwksCache = jwksCache;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9vYXV0aDR3ZWJhcGkvYnVpbGQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLEtBQUssR0FBRyxRQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLE9BQU87QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixhQUFhO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxhQUFhO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLE9BQU87QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxTQUFTLEdBQUcsU0FBUztBQUNyRCxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkZBQTZGLGtCQUFrQjtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlGQUF5RixrQkFBa0I7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDRCQUE0QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0NBQWtDLEdBQUcsbUNBQW1DO0FBQzdGO0FBQ0EsY0FBYyxNQUFNLEdBQUcsVUFBVTtBQUNqQztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0QkFBNEI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLE9BQU87QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsT0FBTztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDREQUE0RDtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVcsRUFBRSxhQUFhO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1QkFBdUI7QUFDbkMsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELFNBQVM7QUFDdEU7QUFDQSxtQ0FBbUMsU0FBUztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsT0FBTztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsWUFBWTtBQUMzRDtBQUNBO0FBQ0EsNEZBQTRGLG1DQUFtQztBQUMvSCw2Q0FBNkMsWUFBWTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EsK0JBQStCLGtDQUFrQztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWSxpQkFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxPQUFPO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVEQUF1RDtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdURBQXVEO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxPQUFPO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGNBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxNQUFNLEtBQUsscUJBQXFCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsT0FBTztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxPQUFPO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixnQkFBZ0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0JBQWdCLEdBQUcsUUFBUTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDhEQUE4RDtBQUN4RTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhEQUE4RDtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRixPQUFPO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGLE9BQU87QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzQkFBc0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQjtBQUNBLDBCQUEwQixLQUFLO0FBQy9CO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOEJBQThCLGNBQWM7QUFDakU7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHdDQUF3QyxjQUFjO0FBQzNFO0FBQ0E7QUFDQSxxQkFBcUIsZ0NBQWdDLGNBQWM7QUFDbkU7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNEJBQTRCO0FBQ3hDO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLE9BQU87QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvS0FBb0ssVUFBVTtBQUM5SztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsb0NBQW9DO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLE1BQU07QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlCQUFpQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG9hdXRoNHdlYmFwaVxcYnVpbGRcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBVU0VSX0FHRU5UO1xuaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IudXNlckFnZW50Py5zdGFydHNXaXRoPy4oJ01vemlsbGEvNS4wICcpKSB7XG4gICAgY29uc3QgTkFNRSA9ICdvYXV0aDR3ZWJhcGknO1xuICAgIGNvbnN0IFZFUlNJT04gPSAndjIuMTcuMCc7XG4gICAgVVNFUl9BR0VOVCA9IGAke05BTUV9LyR7VkVSU0lPTn1gO1xufVxuZnVuY3Rpb24gbG9vc2VJbnN0YW5jZU9mKGlucHV0LCBleHBlY3RlZCkge1xuICAgIGlmIChpbnB1dCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIGV4cGVjdGVkIHx8XG4gICAgICAgICAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5wdXQpW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09IGV4cGVjdGVkLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGNsb2NrU2tldyA9IFN5bWJvbCgpO1xuZXhwb3J0IGNvbnN0IGNsb2NrVG9sZXJhbmNlID0gU3ltYm9sKCk7XG5leHBvcnQgY29uc3QgY3VzdG9tRmV0Y2ggPSBTeW1ib2woKTtcbmV4cG9ydCBjb25zdCBtb2RpZnlBc3NlcnRpb24gPSBTeW1ib2woKTtcbmV4cG9ydCBjb25zdCBqd2VEZWNyeXB0ID0gU3ltYm9sKCk7XG5leHBvcnQgY29uc3Qgandrc0NhY2hlID0gU3ltYm9sKCk7XG5leHBvcnQgY29uc3QgdXNlTXRsc0FsaWFzID0gU3ltYm9sKCk7XG5jb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5jb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5mdW5jdGlvbiBidWYoaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZW5jb2Rlci5lbmNvZGUoaW5wdXQpO1xuICAgIH1cbiAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoaW5wdXQpO1xufVxuY29uc3QgQ0hVTktfU0laRSA9IDB4ODAwMDtcbmZ1bmN0aW9uIGVuY29kZUJhc2U2NFVybChpbnB1dCkge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIGlucHV0ID0gbmV3IFVpbnQ4QXJyYXkoaW5wdXQpO1xuICAgIH1cbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0LmJ5dGVMZW5ndGg7IGkgKz0gQ0hVTktfU0laRSkge1xuICAgICAgICBhcnIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGlucHV0LnN1YmFycmF5KGksIGkgKyBDSFVOS19TSVpFKSkpO1xuICAgIH1cbiAgICByZXR1cm4gYnRvYShhcnIuam9pbignJykpLnJlcGxhY2UoLz0vZywgJycpLnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xufVxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0VXJsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYmluYXJ5ID0gYXRvYihpbnB1dC5yZXBsYWNlKC8tL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpLnJlcGxhY2UoL1xccy9nLCAnJykpO1xuICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJpbmFyeS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnkuY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnl0ZXM7XG4gICAgfVxuICAgIGNhdGNoIChjYXVzZSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdUaGUgaW5wdXQgdG8gYmUgZGVjb2RlZCBpcyBub3QgY29ycmVjdGx5IGVuY29kZWQuJywgeyBjYXVzZSB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBiNjR1KGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZUJhc2U2NFVybChpbnB1dCk7XG4gICAgfVxuICAgIHJldHVybiBlbmNvZGVCYXNlNjRVcmwoaW5wdXQpO1xufVxuY2xhc3MgTFJVIHtcbiAgICBjb25zdHJ1Y3RvcihtYXhTaXplKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX2NhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm1heFNpemUgPSBtYXhTaXplO1xuICAgIH1cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIGxldCB2ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9XG4gICAgICAgIGlmICgodiA9IHRoaXMuX2NhY2hlLmdldChrZXkpKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoa2V5LCB2KTtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGhhcyhrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuaGFzKGtleSkgfHwgdGhpcy5fY2FjaGUuaGFzKGtleSk7XG4gICAgfVxuICAgIHNldChrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBkZWxldGUoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHVwZGF0ZShrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZS5zaXplID49IHRoaXMubWF4U2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSB0aGlzLmNhY2hlO1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBVbnN1cHBvcnRlZE9wZXJhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSA/PyAnb3BlcmF0aW9uIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT8uKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPcGVyYXRpb25Qcm9jZXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT8uKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIH1cbn1cbmNvbnN0IE9QRSA9IE9wZXJhdGlvblByb2Nlc3NpbmdFcnJvcjtcbmNvbnN0IGRwb3BOb25jZXMgPSBuZXcgTFJVKDEwMCk7XG5mdW5jdGlvbiBpc0NyeXB0b0tleShrZXkpIHtcbiAgICByZXR1cm4ga2V5IGluc3RhbmNlb2YgQ3J5cHRvS2V5O1xufVxuZnVuY3Rpb24gaXNQcml2YXRlS2V5KGtleSkge1xuICAgIHJldHVybiBpc0NyeXB0b0tleShrZXkpICYmIGtleS50eXBlID09PSAncHJpdmF0ZSc7XG59XG5mdW5jdGlvbiBpc1B1YmxpY0tleShrZXkpIHtcbiAgICByZXR1cm4gaXNDcnlwdG9LZXkoa2V5KSAmJiBrZXkudHlwZSA9PT0gJ3B1YmxpYyc7XG59XG5jb25zdCBTVVBQT1JURURfSldTX0FMR1MgPSBbXG4gICAgJ1BTMjU2JyxcbiAgICAnRVMyNTYnLFxuICAgICdSUzI1NicsXG4gICAgJ1BTMzg0JyxcbiAgICAnRVMzODQnLFxuICAgICdSUzM4NCcsXG4gICAgJ1BTNTEyJyxcbiAgICAnRVM1MTInLFxuICAgICdSUzUxMicsXG4gICAgJ0VkRFNBJyxcbl07XG5mdW5jdGlvbiBwcm9jZXNzRHBvcE5vbmNlKHJlc3BvbnNlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgbm9uY2UgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnZHBvcC1ub25jZScpO1xuICAgICAgICBpZiAobm9uY2UpIHtcbiAgICAgICAgICAgIGRwb3BOb25jZXMuc2V0KG5ldyBVUkwocmVzcG9uc2UudXJsKS5vcmlnaW4sIG5vbmNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCB7IH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG5mdW5jdGlvbiBub3JtYWxpemVUeXAodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eYXBwbGljYXRpb25cXC8vLCAnJyk7XG59XG5mdW5jdGlvbiBpc0pzb25PYmplY3QoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgPT09IG51bGwgfHwgdHlwZW9mIGlucHV0ICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gcHJlcGFyZUhlYWRlcnMoaW5wdXQpIHtcbiAgICBpZiAobG9vc2VJbnN0YW5jZU9mKGlucHV0LCBIZWFkZXJzKSkge1xuICAgICAgICBpbnB1dCA9IE9iamVjdC5mcm9tRW50cmllcyhpbnB1dC5lbnRyaWVzKCkpO1xuICAgIH1cbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQpO1xuICAgIGlmIChVU0VSX0FHRU5UICYmICFoZWFkZXJzLmhhcygndXNlci1hZ2VudCcpKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KCd1c2VyLWFnZW50JywgVVNFUl9BR0VOVCk7XG4gICAgfVxuICAgIGlmIChoZWFkZXJzLmhhcygnYXV0aG9yaXphdGlvbicpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wib3B0aW9ucy5oZWFkZXJzXCIgbXVzdCBub3QgaW5jbHVkZSB0aGUgXCJhdXRob3JpemF0aW9uXCIgaGVhZGVyIG5hbWUnKTtcbiAgICB9XG4gICAgaWYgKGhlYWRlcnMuaGFzKCdkcG9wJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJvcHRpb25zLmhlYWRlcnNcIiBtdXN0IG5vdCBpbmNsdWRlIHRoZSBcImRwb3BcIiBoZWFkZXIgbmFtZScpO1xuICAgIH1cbiAgICByZXR1cm4gaGVhZGVycztcbn1cbmZ1bmN0aW9uIHNpZ25hbCh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSgpO1xuICAgIH1cbiAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIEFib3J0U2lnbmFsKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcIm9wdGlvbnMuc2lnbmFsXCIgbXVzdCByZXR1cm4gb3IgYmUgYW4gaW5zdGFuY2Ugb2YgQWJvcnRTaWduYWwnKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpc2NvdmVyeVJlcXVlc3QoaXNzdWVySWRlbnRpZmllciwgb3B0aW9ucykge1xuICAgIGlmICghKGlzc3VlcklkZW50aWZpZXIgaW5zdGFuY2VvZiBVUkwpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiaXNzdWVySWRlbnRpZmllclwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgVVJMJyk7XG4gICAgfVxuICAgIGlmIChpc3N1ZXJJZGVudGlmaWVyLnByb3RvY29sICE9PSAnaHR0cHM6JyAmJiBpc3N1ZXJJZGVudGlmaWVyLnByb3RvY29sICE9PSAnaHR0cDonKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiaXNzdWVyLnByb3RvY29sXCIgbXVzdCBiZSBcImh0dHBzOlwiIG9yIFwiaHR0cDpcIicpO1xuICAgIH1cbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGlzc3VlcklkZW50aWZpZXIuaHJlZik7XG4gICAgc3dpdGNoIChvcHRpb25zPy5hbGdvcml0aG0pIHtcbiAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIGNhc2UgJ29pZGMnOlxuICAgICAgICAgICAgdXJsLnBhdGhuYW1lID0gYCR7dXJsLnBhdGhuYW1lfS8ud2VsbC1rbm93bi9vcGVuaWQtY29uZmlndXJhdGlvbmAucmVwbGFjZSgnLy8nLCAnLycpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ29hdXRoMic6XG4gICAgICAgICAgICBpZiAodXJsLnBhdGhuYW1lID09PSAnLycpIHtcbiAgICAgICAgICAgICAgICB1cmwucGF0aG5hbWUgPSAnLndlbGwta25vd24vb2F1dGgtYXV0aG9yaXphdGlvbi1zZXJ2ZXInO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXJsLnBhdGhuYW1lID0gYC53ZWxsLWtub3duL29hdXRoLWF1dGhvcml6YXRpb24tc2VydmVyLyR7dXJsLnBhdGhuYW1lfWAucmVwbGFjZSgnLy8nLCAnLycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcIm9wdGlvbnMuYWxnb3JpdGhtXCIgbXVzdCBiZSBcIm9pZGNcIiAoZGVmYXVsdCksIG9yIFwib2F1dGgyXCInKTtcbiAgICB9XG4gICAgY29uc3QgaGVhZGVycyA9IHByZXBhcmVIZWFkZXJzKG9wdGlvbnM/LmhlYWRlcnMpO1xuICAgIGhlYWRlcnMuc2V0KCdhY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIHJldHVybiAob3B0aW9ucz8uW2N1c3RvbUZldGNoXSB8fCBmZXRjaCkodXJsLmhyZWYsIHtcbiAgICAgICAgaGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKGhlYWRlcnMuZW50cmllcygpKSxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgcmVkaXJlY3Q6ICdtYW51YWwnLFxuICAgICAgICBzaWduYWw6IG9wdGlvbnM/LnNpZ25hbCA/IHNpZ25hbChvcHRpb25zLnNpZ25hbCkgOiBudWxsLFxuICAgIH0pLnRoZW4ocHJvY2Vzc0Rwb3BOb25jZSk7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVN0cmluZyhpbnB1dCkge1xuICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnICYmIGlucHV0Lmxlbmd0aCAhPT0gMDtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRGlzY292ZXJ5UmVzcG9uc2UoZXhwZWN0ZWRJc3N1ZXJJZGVudGlmaWVyLCByZXNwb25zZSkge1xuICAgIGlmICghKGV4cGVjdGVkSXNzdWVySWRlbnRpZmllciBpbnN0YW5jZW9mIFVSTCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJleHBlY3RlZElzc3VlclwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgVVJMJyk7XG4gICAgfVxuICAgIGlmICghbG9vc2VJbnN0YW5jZU9mKHJlc3BvbnNlLCBSZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJyZXNwb25zZVwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVzcG9uc2UnKTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBpcyBub3QgYSBjb25mb3JtIEF1dGhvcml6YXRpb24gU2VydmVyIE1ldGFkYXRhIHJlc3BvbnNlJyk7XG4gICAgfVxuICAgIGFzc2VydFJlYWRhYmxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIGxldCBqc29uO1xuICAgIHRyeSB7XG4gICAgICAgIGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGNhdGNoIChjYXVzZSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdmYWlsZWQgdG8gcGFyc2UgXCJyZXNwb25zZVwiIGJvZHkgYXMgSlNPTicsIHsgY2F1c2UgfSk7XG4gICAgfVxuICAgIGlmICghaXNKc29uT2JqZWN0KGpzb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBib2R5IG11c3QgYmUgYSB0b3AgbGV2ZWwgb2JqZWN0Jyk7XG4gICAgfVxuICAgIGlmICghdmFsaWRhdGVTdHJpbmcoanNvbi5pc3N1ZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBib2R5IFwiaXNzdWVyXCIgcHJvcGVydHkgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICB9XG4gICAgaWYgKG5ldyBVUkwoanNvbi5pc3N1ZXIpLmhyZWYgIT09IGV4cGVjdGVkSXNzdWVySWRlbnRpZmllci5ocmVmKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBib2R5IFwiaXNzdWVyXCIgZG9lcyBub3QgbWF0Y2ggXCJleHBlY3RlZElzc3VlclwiJyk7XG4gICAgfVxuICAgIHJldHVybiBqc29uO1xufVxuZnVuY3Rpb24gcmFuZG9tQnl0ZXMoKSB7XG4gICAgcmV0dXJuIGI2NHUoY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgzMikpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbUNvZGVWZXJpZmllcigpIHtcbiAgICByZXR1cm4gcmFuZG9tQnl0ZXMoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbVN0YXRlKCkge1xuICAgIHJldHVybiByYW5kb21CeXRlcygpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tTm9uY2UoKSB7XG4gICAgcmV0dXJuIHJhbmRvbUJ5dGVzKCk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FsY3VsYXRlUEtDRUNvZGVDaGFsbGVuZ2UoY29kZVZlcmlmaWVyKSB7XG4gICAgaWYgKCF2YWxpZGF0ZVN0cmluZyhjb2RlVmVyaWZpZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiY29kZVZlcmlmaWVyXCIgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICB9XG4gICAgcmV0dXJuIGI2NHUoYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBidWYoY29kZVZlcmlmaWVyKSkpO1xufVxuZnVuY3Rpb24gZ2V0S2V5QW5kS2lkKGlucHV0KSB7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgQ3J5cHRvS2V5KSB7XG4gICAgICAgIHJldHVybiB7IGtleTogaW5wdXQgfTtcbiAgICB9XG4gICAgaWYgKCEoaW5wdXQ/LmtleSBpbnN0YW5jZW9mIENyeXB0b0tleSkpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBpZiAoaW5wdXQua2lkICE9PSB1bmRlZmluZWQgJiYgIXZhbGlkYXRlU3RyaW5nKGlucHV0LmtpZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJraWRcIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBrZXk6IGlucHV0LmtleSxcbiAgICAgICAga2lkOiBpbnB1dC5raWQsXG4gICAgICAgIG1vZGlmeUFzc2VydGlvbjogaW5wdXRbbW9kaWZ5QXNzZXJ0aW9uXSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZm9ybVVybEVuY29kZSh0b2tlbikge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodG9rZW4pLnJlcGxhY2UoLyUyMC9nLCAnKycpO1xufVxuZnVuY3Rpb24gY2xpZW50U2VjcmV0QmFzaWMoY2xpZW50SWQsIGNsaWVudFNlY3JldCkge1xuICAgIGNvbnN0IHVzZXJuYW1lID0gZm9ybVVybEVuY29kZShjbGllbnRJZCk7XG4gICAgY29uc3QgcGFzc3dvcmQgPSBmb3JtVXJsRW5jb2RlKGNsaWVudFNlY3JldCk7XG4gICAgY29uc3QgY3JlZGVudGlhbHMgPSBidG9hKGAke3VzZXJuYW1lfToke3Bhc3N3b3JkfWApO1xuICAgIHJldHVybiBgQmFzaWMgJHtjcmVkZW50aWFsc31gO1xufVxuZnVuY3Rpb24gcHNBbGcoa2V5KSB7XG4gICAgc3dpdGNoIChrZXkuYWxnb3JpdGhtLmhhc2gubmFtZSkge1xuICAgICAgICBjYXNlICdTSEEtMjU2JzpcbiAgICAgICAgICAgIHJldHVybiAnUFMyNTYnO1xuICAgICAgICBjYXNlICdTSEEtMzg0JzpcbiAgICAgICAgICAgIHJldHVybiAnUFMzODQnO1xuICAgICAgICBjYXNlICdTSEEtNTEyJzpcbiAgICAgICAgICAgIHJldHVybiAnUFM1MTInO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoJ3Vuc3VwcG9ydGVkIFJzYUhhc2hlZEtleUFsZ29yaXRobSBoYXNoIG5hbWUnKTtcbiAgICB9XG59XG5mdW5jdGlvbiByc0FsZyhrZXkpIHtcbiAgICBzd2l0Y2ggKGtleS5hbGdvcml0aG0uaGFzaC5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ1NIQS0yNTYnOlxuICAgICAgICAgICAgcmV0dXJuICdSUzI1Nic7XG4gICAgICAgIGNhc2UgJ1NIQS0zODQnOlxuICAgICAgICAgICAgcmV0dXJuICdSUzM4NCc7XG4gICAgICAgIGNhc2UgJ1NIQS01MTInOlxuICAgICAgICAgICAgcmV0dXJuICdSUzUxMic7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcigndW5zdXBwb3J0ZWQgUnNhSGFzaGVkS2V5QWxnb3JpdGhtIGhhc2ggbmFtZScpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVzQWxnKGtleSkge1xuICAgIHN3aXRjaCAoa2V5LmFsZ29yaXRobS5uYW1lZEN1cnZlKSB7XG4gICAgICAgIGNhc2UgJ1AtMjU2JzpcbiAgICAgICAgICAgIHJldHVybiAnRVMyNTYnO1xuICAgICAgICBjYXNlICdQLTM4NCc6XG4gICAgICAgICAgICByZXR1cm4gJ0VTMzg0JztcbiAgICAgICAgY2FzZSAnUC01MjEnOlxuICAgICAgICAgICAgcmV0dXJuICdFUzUxMic7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcigndW5zdXBwb3J0ZWQgRWNLZXlBbGdvcml0aG0gbmFtZWRDdXJ2ZScpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGtleVRvSndzKGtleSkge1xuICAgIHN3aXRjaCAoa2V5LmFsZ29yaXRobS5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ1JTQS1QU1MnOlxuICAgICAgICAgICAgcmV0dXJuIHBzQWxnKGtleSk7XG4gICAgICAgIGNhc2UgJ1JTQVNTQS1QS0NTMS12MV81JzpcbiAgICAgICAgICAgIHJldHVybiByc0FsZyhrZXkpO1xuICAgICAgICBjYXNlICdFQ0RTQSc6XG4gICAgICAgICAgICByZXR1cm4gZXNBbGcoa2V5KTtcbiAgICAgICAgY2FzZSAnRWQyNTUxOSc6XG4gICAgICAgIGNhc2UgJ0VkNDQ4JzpcbiAgICAgICAgICAgIHJldHVybiAnRWREU0EnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoJ3Vuc3VwcG9ydGVkIENyeXB0b0tleSBhbGdvcml0aG0gbmFtZScpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldENsb2NrU2tldyhjbGllbnQpIHtcbiAgICBjb25zdCBza2V3ID0gY2xpZW50Py5bY2xvY2tTa2V3XTtcbiAgICByZXR1cm4gdHlwZW9mIHNrZXcgPT09ICdudW1iZXInICYmIE51bWJlci5pc0Zpbml0ZShza2V3KSA/IHNrZXcgOiAwO1xufVxuZnVuY3Rpb24gZ2V0Q2xvY2tUb2xlcmFuY2UoY2xpZW50KSB7XG4gICAgY29uc3QgdG9sZXJhbmNlID0gY2xpZW50Py5bY2xvY2tUb2xlcmFuY2VdO1xuICAgIHJldHVybiB0eXBlb2YgdG9sZXJhbmNlID09PSAnbnVtYmVyJyAmJiBOdW1iZXIuaXNGaW5pdGUodG9sZXJhbmNlKSAmJiBNYXRoLnNpZ24odG9sZXJhbmNlKSAhPT0gLTFcbiAgICAgICAgPyB0b2xlcmFuY2VcbiAgICAgICAgOiAzMDtcbn1cbmZ1bmN0aW9uIGVwb2NoVGltZSgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG59XG5mdW5jdGlvbiBjbGllbnRBc3NlcnRpb24oYXMsIGNsaWVudCkge1xuICAgIGNvbnN0IG5vdyA9IGVwb2NoVGltZSgpICsgZ2V0Q2xvY2tTa2V3KGNsaWVudCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAganRpOiByYW5kb21CeXRlcygpLFxuICAgICAgICBhdWQ6IFthcy5pc3N1ZXIsIGFzLnRva2VuX2VuZHBvaW50XSxcbiAgICAgICAgZXhwOiBub3cgKyA2MCxcbiAgICAgICAgaWF0OiBub3csXG4gICAgICAgIG5iZjogbm93LFxuICAgICAgICBpc3M6IGNsaWVudC5jbGllbnRfaWQsXG4gICAgICAgIHN1YjogY2xpZW50LmNsaWVudF9pZCxcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcHJpdmF0ZUtleUp3dChhcywgY2xpZW50LCBrZXksIGtpZCwgbW9kaWZ5QXNzZXJ0aW9uKSB7XG4gICAgY29uc3QgaGVhZGVyID0geyBhbGc6IGtleVRvSndzKGtleSksIGtpZCB9O1xuICAgIGNvbnN0IHBheWxvYWQgPSBjbGllbnRBc3NlcnRpb24oYXMsIGNsaWVudCk7XG4gICAgbW9kaWZ5QXNzZXJ0aW9uPy4oaGVhZGVyLCBwYXlsb2FkKTtcbiAgICByZXR1cm4gand0KGhlYWRlciwgcGF5bG9hZCwga2V5KTtcbn1cbmZ1bmN0aW9uIGFzc2VydEFzKGFzKSB7XG4gICAgaWYgKHR5cGVvZiBhcyAhPT0gJ29iamVjdCcgfHwgYXMgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJhc1wiIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgfVxuICAgIGlmICghdmFsaWRhdGVTdHJpbmcoYXMuaXNzdWVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImFzLmlzc3VlclwiIHByb3BlcnR5IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gYXNzZXJ0Q2xpZW50KGNsaWVudCkge1xuICAgIGlmICh0eXBlb2YgY2xpZW50ICE9PSAnb2JqZWN0JyB8fCBjbGllbnQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJjbGllbnRcIiBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKGNsaWVudC5jbGllbnRfaWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiY2xpZW50LmNsaWVudF9pZFwiIHByb3BlcnR5IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gYXNzZXJ0Q2xpZW50U2VjcmV0KGNsaWVudFNlY3JldCkge1xuICAgIGlmICghdmFsaWRhdGVTdHJpbmcoY2xpZW50U2VjcmV0KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImNsaWVudC5jbGllbnRfc2VjcmV0XCIgcHJvcGVydHkgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICB9XG4gICAgcmV0dXJuIGNsaWVudFNlY3JldDtcbn1cbmZ1bmN0aW9uIGFzc2VydE5vQ2xpZW50UHJpdmF0ZUtleShjbGllbnRBdXRoTWV0aG9kLCBjbGllbnRQcml2YXRlS2V5KSB7XG4gICAgaWYgKGNsaWVudFByaXZhdGVLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBcIm9wdGlvbnMuY2xpZW50UHJpdmF0ZUtleVwiIHByb3BlcnR5IG11c3Qgbm90IGJlIHByb3ZpZGVkIHdoZW4gJHtjbGllbnRBdXRoTWV0aG9kfSBjbGllbnQgYXV0aGVudGljYXRpb24gbWV0aG9kIGlzIHVzZWQuYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0Tm9DbGllbnRTZWNyZXQoY2xpZW50QXV0aE1ldGhvZCwgY2xpZW50U2VjcmV0KSB7XG4gICAgaWYgKGNsaWVudFNlY3JldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFwiY2xpZW50LmNsaWVudF9zZWNyZXRcIiBwcm9wZXJ0eSBtdXN0IG5vdCBiZSBwcm92aWRlZCB3aGVuICR7Y2xpZW50QXV0aE1ldGhvZH0gY2xpZW50IGF1dGhlbnRpY2F0aW9uIG1ldGhvZCBpcyB1c2VkLmApO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGNsaWVudEF1dGhlbnRpY2F0aW9uKGFzLCBjbGllbnQsIGJvZHksIGhlYWRlcnMsIGNsaWVudFByaXZhdGVLZXkpIHtcbiAgICBib2R5LmRlbGV0ZSgnY2xpZW50X3NlY3JldCcpO1xuICAgIGJvZHkuZGVsZXRlKCdjbGllbnRfYXNzZXJ0aW9uX3R5cGUnKTtcbiAgICBib2R5LmRlbGV0ZSgnY2xpZW50X2Fzc2VydGlvbicpO1xuICAgIHN3aXRjaCAoY2xpZW50LnRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kKSB7XG4gICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICBjYXNlICdjbGllbnRfc2VjcmV0X2Jhc2ljJzoge1xuICAgICAgICAgICAgYXNzZXJ0Tm9DbGllbnRQcml2YXRlS2V5KCdjbGllbnRfc2VjcmV0X2Jhc2ljJywgY2xpZW50UHJpdmF0ZUtleSk7XG4gICAgICAgICAgICBoZWFkZXJzLnNldCgnYXV0aG9yaXphdGlvbicsIGNsaWVudFNlY3JldEJhc2ljKGNsaWVudC5jbGllbnRfaWQsIGFzc2VydENsaWVudFNlY3JldChjbGllbnQuY2xpZW50X3NlY3JldCkpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2NsaWVudF9zZWNyZXRfcG9zdCc6IHtcbiAgICAgICAgICAgIGFzc2VydE5vQ2xpZW50UHJpdmF0ZUtleSgnY2xpZW50X3NlY3JldF9wb3N0JywgY2xpZW50UHJpdmF0ZUtleSk7XG4gICAgICAgICAgICBib2R5LnNldCgnY2xpZW50X2lkJywgY2xpZW50LmNsaWVudF9pZCk7XG4gICAgICAgICAgICBib2R5LnNldCgnY2xpZW50X3NlY3JldCcsIGFzc2VydENsaWVudFNlY3JldChjbGllbnQuY2xpZW50X3NlY3JldCkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAncHJpdmF0ZV9rZXlfand0Jzoge1xuICAgICAgICAgICAgYXNzZXJ0Tm9DbGllbnRTZWNyZXQoJ3ByaXZhdGVfa2V5X2p3dCcsIGNsaWVudC5jbGllbnRfc2VjcmV0KTtcbiAgICAgICAgICAgIGlmIChjbGllbnRQcml2YXRlS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcIm9wdGlvbnMuY2xpZW50UHJpdmF0ZUtleVwiIG11c3QgYmUgcHJvdmlkZWQgd2hlbiBcImNsaWVudC50b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZFwiIGlzIFwicHJpdmF0ZV9rZXlfand0XCInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCBraWQsIG1vZGlmeUFzc2VydGlvbiB9ID0gZ2V0S2V5QW5kS2lkKGNsaWVudFByaXZhdGVLZXkpO1xuICAgICAgICAgICAgaWYgKCFpc1ByaXZhdGVLZXkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wib3B0aW9ucy5jbGllbnRQcml2YXRlS2V5LmtleVwiIG11c3QgYmUgYSBwcml2YXRlIENyeXB0b0tleScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm9keS5zZXQoJ2NsaWVudF9pZCcsIGNsaWVudC5jbGllbnRfaWQpO1xuICAgICAgICAgICAgYm9keS5zZXQoJ2NsaWVudF9hc3NlcnRpb25fdHlwZScsICd1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXInKTtcbiAgICAgICAgICAgIGJvZHkuc2V0KCdjbGllbnRfYXNzZXJ0aW9uJywgYXdhaXQgcHJpdmF0ZUtleUp3dChhcywgY2xpZW50LCBrZXksIGtpZCwgbW9kaWZ5QXNzZXJ0aW9uKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICd0bHNfY2xpZW50X2F1dGgnOlxuICAgICAgICBjYXNlICdzZWxmX3NpZ25lZF90bHNfY2xpZW50X2F1dGgnOlxuICAgICAgICBjYXNlICdub25lJzoge1xuICAgICAgICAgICAgYXNzZXJ0Tm9DbGllbnRTZWNyZXQoY2xpZW50LnRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kLCBjbGllbnQuY2xpZW50X3NlY3JldCk7XG4gICAgICAgICAgICBhc3NlcnROb0NsaWVudFByaXZhdGVLZXkoY2xpZW50LnRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kLCBjbGllbnRQcml2YXRlS2V5KTtcbiAgICAgICAgICAgIGJvZHkuc2V0KCdjbGllbnRfaWQnLCBjbGllbnQuY2xpZW50X2lkKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcigndW5zdXBwb3J0ZWQgY2xpZW50IHRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kJyk7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gand0KGhlYWRlciwgcGF5bG9hZCwga2V5KSB7XG4gICAgaWYgKCFrZXkudXNhZ2VzLmluY2x1ZGVzKCdzaWduJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ3J5cHRvS2V5IGluc3RhbmNlcyB1c2VkIGZvciBzaWduaW5nIGFzc2VydGlvbnMgbXVzdCBpbmNsdWRlIFwic2lnblwiIGluIHRoZWlyIFwidXNhZ2VzXCInKTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXQgPSBgJHtiNjR1KGJ1ZihKU09OLnN0cmluZ2lmeShoZWFkZXIpKSl9LiR7YjY0dShidWYoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpKX1gO1xuICAgIGNvbnN0IHNpZ25hdHVyZSA9IGI2NHUoYXdhaXQgY3J5cHRvLnN1YnRsZS5zaWduKGtleVRvU3VidGxlKGtleSksIGtleSwgYnVmKGlucHV0KSkpO1xuICAgIHJldHVybiBgJHtpbnB1dH0uJHtzaWduYXR1cmV9YDtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc3N1ZVJlcXVlc3RPYmplY3QoYXMsIGNsaWVudCwgcGFyYW1ldGVycywgcHJpdmF0ZUtleSkge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBwYXJhbWV0ZXJzID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbWV0ZXJzKTtcbiAgICBjb25zdCB7IGtleSwga2lkLCBtb2RpZnlBc3NlcnRpb24gfSA9IGdldEtleUFuZEtpZChwcml2YXRlS2V5KTtcbiAgICBpZiAoIWlzUHJpdmF0ZUtleShrZXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicHJpdmF0ZUtleS5rZXlcIiBtdXN0IGJlIGEgcHJpdmF0ZSBDcnlwdG9LZXknKTtcbiAgICB9XG4gICAgcGFyYW1ldGVycy5zZXQoJ2NsaWVudF9pZCcsIGNsaWVudC5jbGllbnRfaWQpO1xuICAgIGNvbnN0IG5vdyA9IGVwb2NoVGltZSgpICsgZ2V0Q2xvY2tTa2V3KGNsaWVudCk7XG4gICAgY29uc3QgY2xhaW1zID0ge1xuICAgICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMocGFyYW1ldGVycy5lbnRyaWVzKCkpLFxuICAgICAgICBqdGk6IHJhbmRvbUJ5dGVzKCksXG4gICAgICAgIGF1ZDogYXMuaXNzdWVyLFxuICAgICAgICBleHA6IG5vdyArIDYwLFxuICAgICAgICBpYXQ6IG5vdyxcbiAgICAgICAgbmJmOiBub3csXG4gICAgICAgIGlzczogY2xpZW50LmNsaWVudF9pZCxcbiAgICB9O1xuICAgIGxldCByZXNvdXJjZTtcbiAgICBpZiAocGFyYW1ldGVycy5oYXMoJ3Jlc291cmNlJykgJiZcbiAgICAgICAgKHJlc291cmNlID0gcGFyYW1ldGVycy5nZXRBbGwoJ3Jlc291cmNlJykpICYmXG4gICAgICAgIHJlc291cmNlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY2xhaW1zLnJlc291cmNlID0gcmVzb3VyY2U7XG4gICAgfVxuICAgIHtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyYW1ldGVycy5nZXQoJ21heF9hZ2UnKTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjbGFpbXMubWF4X2FnZSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShjbGFpbXMubWF4X2FnZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCdcIm1heF9hZ2VcIiBwYXJhbWV0ZXIgbXVzdCBiZSBhIG51bWJlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyYW1ldGVycy5nZXQoJ2NsYWltcycpO1xuICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2xhaW1zLmNsYWltcyA9IEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnZmFpbGVkIHRvIHBhcnNlIHRoZSBcImNsYWltc1wiIHBhcmFtZXRlciBhcyBKU09OJywgeyBjYXVzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNKc29uT2JqZWN0KGNsYWltcy5jbGFpbXMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJjbGFpbXNcIiBwYXJhbWV0ZXIgbXVzdCBiZSBhIEpTT04gd2l0aCBhIHRvcCBsZXZlbCBvYmplY3QnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHBhcmFtZXRlcnMuZ2V0KCdhdXRob3JpemF0aW9uX2RldGFpbHMnKTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNsYWltcy5hdXRob3JpemF0aW9uX2RldGFpbHMgPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChjYXVzZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ2ZhaWxlZCB0byBwYXJzZSB0aGUgXCJhdXRob3JpemF0aW9uX2RldGFpbHNcIiBwYXJhbWV0ZXIgYXMgSlNPTicsIHsgY2F1c2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY2xhaW1zLmF1dGhvcml6YXRpb25fZGV0YWlscykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCdcImF1dGhvcml6YXRpb25fZGV0YWlsc1wiIHBhcmFtZXRlciBtdXN0IGJlIGEgSlNPTiB3aXRoIGEgdG9wIGxldmVsIGFycmF5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaGVhZGVyID0ge1xuICAgICAgICBhbGc6IGtleVRvSndzKGtleSksXG4gICAgICAgIHR5cDogJ29hdXRoLWF1dGh6LXJlcStqd3QnLFxuICAgICAgICBraWQsXG4gICAgfTtcbiAgICBtb2RpZnlBc3NlcnRpb24/LihoZWFkZXIsIGNsYWltcyk7XG4gICAgcmV0dXJuIGp3dChoZWFkZXIsIGNsYWltcywga2V5KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGRwb3BQcm9vZkp3dChoZWFkZXJzLCBvcHRpb25zLCB1cmwsIGh0bSwgY2xvY2tTa2V3LCBhY2Nlc3NUb2tlbikge1xuICAgIGNvbnN0IHsgcHJpdmF0ZUtleSwgcHVibGljS2V5LCBub25jZSA9IGRwb3BOb25jZXMuZ2V0KHVybC5vcmlnaW4pIH0gPSBvcHRpb25zO1xuICAgIGlmICghaXNQcml2YXRlS2V5KHByaXZhdGVLZXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiRFBvUC5wcml2YXRlS2V5XCIgbXVzdCBiZSBhIHByaXZhdGUgQ3J5cHRvS2V5Jyk7XG4gICAgfVxuICAgIGlmICghaXNQdWJsaWNLZXkocHVibGljS2V5KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcIkRQb1AucHVibGljS2V5XCIgbXVzdCBiZSBhIHB1YmxpYyBDcnlwdG9LZXknKTtcbiAgICB9XG4gICAgaWYgKG5vbmNlICE9PSB1bmRlZmluZWQgJiYgIXZhbGlkYXRlU3RyaW5nKG5vbmNlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcIkRQb1Aubm9uY2VcIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBvciB1bmRlZmluZWQnKTtcbiAgICB9XG4gICAgaWYgKCFwdWJsaWNLZXkuZXh0cmFjdGFibGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJEUG9QLnB1YmxpY0tleS5leHRyYWN0YWJsZVwiIG11c3QgYmUgdHJ1ZScpO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBlcG9jaFRpbWUoKSArIGNsb2NrU2tldztcbiAgICBjb25zdCBoZWFkZXIgPSB7XG4gICAgICAgIGFsZzoga2V5VG9Kd3MocHJpdmF0ZUtleSksXG4gICAgICAgIHR5cDogJ2Rwb3Arand0JyxcbiAgICAgICAgandrOiBhd2FpdCBwdWJsaWNKd2socHVibGljS2V5KSxcbiAgICB9O1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgIGlhdDogbm93LFxuICAgICAgICBqdGk6IHJhbmRvbUJ5dGVzKCksXG4gICAgICAgIGh0bSxcbiAgICAgICAgbm9uY2UsXG4gICAgICAgIGh0dTogYCR7dXJsLm9yaWdpbn0ke3VybC5wYXRobmFtZX1gLFxuICAgICAgICBhdGg6IGFjY2Vzc1Rva2VuID8gYjY0dShhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGJ1ZihhY2Nlc3NUb2tlbikpKSA6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgIG9wdGlvbnNbbW9kaWZ5QXNzZXJ0aW9uXT8uKGhlYWRlciwgcGF5bG9hZCk7XG4gICAgaGVhZGVycy5zZXQoJ2Rwb3AnLCBhd2FpdCBqd3QoaGVhZGVyLCBwYXlsb2FkLCBwcml2YXRlS2V5KSk7XG59XG5sZXQgandrQ2FjaGU7XG5hc3luYyBmdW5jdGlvbiBnZXRTZXRQdWJsaWNKd2tDYWNoZShrZXkpIHtcbiAgICBjb25zdCB7IGt0eSwgZSwgbiwgeCwgeSwgY3J2IH0gPSBhd2FpdCBjcnlwdG8uc3VidGxlLmV4cG9ydEtleSgnandrJywga2V5KTtcbiAgICBjb25zdCBqd2sgPSB7IGt0eSwgZSwgbiwgeCwgeSwgY3J2IH07XG4gICAgandrQ2FjaGUuc2V0KGtleSwgandrKTtcbiAgICByZXR1cm4gandrO1xufVxuYXN5bmMgZnVuY3Rpb24gcHVibGljSndrKGtleSkge1xuICAgIGp3a0NhY2hlIHx8IChqd2tDYWNoZSA9IG5ldyBXZWFrTWFwKCkpO1xuICAgIHJldHVybiBqd2tDYWNoZS5nZXQoa2V5KSB8fCBnZXRTZXRQdWJsaWNKd2tDYWNoZShrZXkpO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVFbmRwb2ludCh2YWx1ZSwgZW5kcG9pbnQsIHVzZU10bHNBbGlhcykge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh1c2VNdGxzQWxpYXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFwiYXMubXRsc19lbmRwb2ludF9hbGlhc2VzLiR7ZW5kcG9pbnR9XCIgbXVzdCBiZSBhIHN0cmluZ2ApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFwiYXMuJHtlbmRwb2ludH1cIiBtdXN0IGJlIGEgc3RyaW5nYCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVVJMKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVFbmRwb2ludChhcywgZW5kcG9pbnQsIHVzZU10bHNBbGlhcyA9IGZhbHNlKSB7XG4gICAgaWYgKHVzZU10bHNBbGlhcyAmJiBhcy5tdGxzX2VuZHBvaW50X2FsaWFzZXMgJiYgZW5kcG9pbnQgaW4gYXMubXRsc19lbmRwb2ludF9hbGlhc2VzKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZUVuZHBvaW50KGFzLm10bHNfZW5kcG9pbnRfYWxpYXNlc1tlbmRwb2ludF0sIGVuZHBvaW50LCB1c2VNdGxzQWxpYXMpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWRhdGVFbmRwb2ludChhc1tlbmRwb2ludF0sIGVuZHBvaW50LCB1c2VNdGxzQWxpYXMpO1xufVxuZnVuY3Rpb24gYWxpYXMoY2xpZW50LCBvcHRpb25zKSB7XG4gICAgaWYgKGNsaWVudC51c2VfbXRsc19lbmRwb2ludF9hbGlhc2VzIHx8IG9wdGlvbnM/Llt1c2VNdGxzQWxpYXNdKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVzaGVkQXV0aG9yaXphdGlvblJlcXVlc3QoYXMsIGNsaWVudCwgcGFyYW1ldGVycywgb3B0aW9ucykge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBjb25zdCB1cmwgPSByZXNvbHZlRW5kcG9pbnQoYXMsICdwdXNoZWRfYXV0aG9yaXphdGlvbl9yZXF1ZXN0X2VuZHBvaW50JywgYWxpYXMoY2xpZW50LCBvcHRpb25zKSk7XG4gICAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1ldGVycyk7XG4gICAgYm9keS5zZXQoJ2NsaWVudF9pZCcsIGNsaWVudC5jbGllbnRfaWQpO1xuICAgIGNvbnN0IGhlYWRlcnMgPSBwcmVwYXJlSGVhZGVycyhvcHRpb25zPy5oZWFkZXJzKTtcbiAgICBoZWFkZXJzLnNldCgnYWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICBpZiAob3B0aW9ucz8uRFBvUCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IGRwb3BQcm9vZkp3dChoZWFkZXJzLCBvcHRpb25zLkRQb1AsIHVybCwgJ1BPU1QnLCBnZXRDbG9ja1NrZXcoY2xpZW50KSk7XG4gICAgfVxuICAgIHJldHVybiBhdXRoZW50aWNhdGVkUmVxdWVzdChhcywgY2xpZW50LCAnUE9TVCcsIHVybCwgYm9keSwgaGVhZGVycywgb3B0aW9ucyk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNPQXV0aDJFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IHZhbHVlID0gaW5wdXQ7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUuZXJyb3IgIT09IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIHVucXVvdGUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUubGVuZ3RoID49IDIgJiYgdmFsdWVbMF0gPT09ICdcIicgJiYgdmFsdWVbdmFsdWUubGVuZ3RoIC0gMV0gPT09ICdcIicpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDEsIC0xKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuY29uc3QgU1BMSVRfUkVHRVhQID0gLygoPzosfCwgKT9bMC05YS16QS1aISMkJSYnKistLl5fYHx+XSs9KS87XG5jb25zdCBTQ0hFTUVTX1JFR0VYUCA9IC8oPzpefCwgPykoWzAtOWEtekEtWiEjJCUmJyorXFwtLl5fYHx+XSspKD89JHxbICxdKS9nO1xuZnVuY3Rpb24gd3d3QXV0aChzY2hlbWUsIHBhcmFtcykge1xuICAgIGNvbnN0IGFyciA9IHBhcmFtcy5zcGxpdChTUExJVF9SRUdFWFApLnNsaWNlKDEpO1xuICAgIGlmICghYXJyLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4geyBzY2hlbWU6IHNjaGVtZS50b0xvd2VyQ2FzZSgpLCBwYXJhbWV0ZXJzOiB7fSB9O1xuICAgIH1cbiAgICBhcnJbYXJyLmxlbmd0aCAtIDFdID0gYXJyW2Fyci5sZW5ndGggLSAxXS5yZXBsYWNlKC8sJC8sICcnKTtcbiAgICBjb25zdCBwYXJhbWV0ZXJzID0ge307XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgY29uc3QgaWR4ID0gaTtcbiAgICAgICAgaWYgKGFycltpZHhdWzBdID09PSAnXCInKSB7XG4gICAgICAgICAgICB3aGlsZSAoYXJyW2lkeF0uc2xpY2UoLTEpICE9PSAnXCInICYmICsraSA8IGFyci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBhcnJbaWR4XSArPSBhcnJbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5ID0gYXJyW2lkeCAtIDFdLnJlcGxhY2UoL14oPzosID8pfD0kL2csICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBwYXJhbWV0ZXJzW2tleV0gPSB1bnF1b3RlKGFycltpZHhdKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2NoZW1lOiBzY2hlbWUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgcGFyYW1ldGVycyxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlV3d3QXV0aGVudGljYXRlQ2hhbGxlbmdlcyhyZXNwb25zZSkge1xuICAgIGlmICghbG9vc2VJbnN0YW5jZU9mKHJlc3BvbnNlLCBSZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJyZXNwb25zZVwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVzcG9uc2UnKTtcbiAgICB9XG4gICAgY29uc3QgaGVhZGVyID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3d3dy1hdXRoZW50aWNhdGUnKTtcbiAgICBpZiAoaGVhZGVyID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAoY29uc3QgeyAxOiBzY2hlbWUsIGluZGV4IH0gb2YgaGVhZGVyLm1hdGNoQWxsKFNDSEVNRVNfUkVHRVhQKSkge1xuICAgICAgICByZXN1bHQucHVzaChbc2NoZW1lLCBpbmRleF0pO1xuICAgIH1cbiAgICBpZiAoIXJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY2hhbGxlbmdlcyA9IHJlc3VsdC5tYXAoKFtzY2hlbWUsIGluZGV4T2ZdLCBpLCBvdGhlcnMpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9IG90aGVyc1tpICsgMV07XG4gICAgICAgIGxldCBwYXJhbWV0ZXJzO1xuICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgcGFyYW1ldGVycyA9IGhlYWRlci5zbGljZShpbmRleE9mLCBuZXh0WzFdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcmFtZXRlcnMgPSBoZWFkZXIuc2xpY2UoaW5kZXhPZik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHd3d0F1dGgoc2NoZW1lLCBwYXJhbWV0ZXJzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY2hhbGxlbmdlcztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzUHVzaGVkQXV0aG9yaXphdGlvblJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGFzc2VydENsaWVudChjbGllbnQpO1xuICAgIGlmICghbG9vc2VJbnN0YW5jZU9mKHJlc3BvbnNlLCBSZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJyZXNwb25zZVwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVzcG9uc2UnKTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAxKSB7XG4gICAgICAgIGxldCBlcnI7XG4gICAgICAgIGlmICgoZXJyID0gYXdhaXQgaGFuZGxlT0F1dGhCb2R5RXJyb3IocmVzcG9uc2UpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgaXMgbm90IGEgY29uZm9ybSBQdXNoZWQgQXV0aG9yaXphdGlvbiBSZXF1ZXN0IEVuZHBvaW50IHJlc3BvbnNlJyk7XG4gICAgfVxuICAgIGFzc2VydFJlYWRhYmxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIGxldCBqc29uO1xuICAgIHRyeSB7XG4gICAgICAgIGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGNhdGNoIChjYXVzZSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdmYWlsZWQgdG8gcGFyc2UgXCJyZXNwb25zZVwiIGJvZHkgYXMgSlNPTicsIHsgY2F1c2UgfSk7XG4gICAgfVxuICAgIGlmICghaXNKc29uT2JqZWN0KGpzb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBib2R5IG11c3QgYmUgYSB0b3AgbGV2ZWwgb2JqZWN0Jyk7XG4gICAgfVxuICAgIGlmICghdmFsaWRhdGVTdHJpbmcoanNvbi5yZXF1ZXN0X3VyaSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJyZXF1ZXN0X3VyaVwiIHByb3BlcnR5IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YganNvbi5leHBpcmVzX2luICE9PSAnbnVtYmVyJyB8fCBqc29uLmV4cGlyZXNfaW4gPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgYm9keSBcImV4cGlyZXNfaW5cIiBwcm9wZXJ0eSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgfVxuICAgIHJldHVybiBqc29uO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb3RlY3RlZFJlc291cmNlUmVxdWVzdChhY2Nlc3NUb2tlbiwgbWV0aG9kLCB1cmwsIGhlYWRlcnMsIGJvZHksIG9wdGlvbnMpIHtcbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKGFjY2Vzc1Rva2VuKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImFjY2Vzc1Rva2VuXCIgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICB9XG4gICAgaWYgKCEodXJsIGluc3RhbmNlb2YgVVJMKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInVybFwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgVVJMJyk7XG4gICAgfVxuICAgIGhlYWRlcnMgPSBwcmVwYXJlSGVhZGVycyhoZWFkZXJzKTtcbiAgICBpZiAob3B0aW9ucz8uRFBvUCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KCdhdXRob3JpemF0aW9uJywgYEJlYXJlciAke2FjY2Vzc1Rva2VufWApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXdhaXQgZHBvcFByb29mSnd0KGhlYWRlcnMsIG9wdGlvbnMuRFBvUCwgdXJsLCBtZXRob2QudG9VcHBlckNhc2UoKSwgZ2V0Q2xvY2tTa2V3KHsgW2Nsb2NrU2tld106IG9wdGlvbnM/LltjbG9ja1NrZXddIH0pLCBhY2Nlc3NUb2tlbik7XG4gICAgICAgIGhlYWRlcnMuc2V0KCdhdXRob3JpemF0aW9uJywgYERQb1AgJHthY2Nlc3NUb2tlbn1gKTtcbiAgICB9XG4gICAgcmV0dXJuIChvcHRpb25zPy5bY3VzdG9tRmV0Y2hdIHx8IGZldGNoKSh1cmwuaHJlZiwge1xuICAgICAgICBib2R5LFxuICAgICAgICBoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMoaGVhZGVycy5lbnRyaWVzKCkpLFxuICAgICAgICBtZXRob2QsXG4gICAgICAgIHJlZGlyZWN0OiAnbWFudWFsJyxcbiAgICAgICAgc2lnbmFsOiBvcHRpb25zPy5zaWduYWwgPyBzaWduYWwob3B0aW9ucy5zaWduYWwpIDogbnVsbCxcbiAgICB9KS50aGVuKHByb2Nlc3NEcG9wTm9uY2UpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVzZXJJbmZvUmVxdWVzdChhcywgY2xpZW50LCBhY2Nlc3NUb2tlbiwgb3B0aW9ucykge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBjb25zdCB1cmwgPSByZXNvbHZlRW5kcG9pbnQoYXMsICd1c2VyaW5mb19lbmRwb2ludCcsIGFsaWFzKGNsaWVudCwgb3B0aW9ucykpO1xuICAgIGNvbnN0IGhlYWRlcnMgPSBwcmVwYXJlSGVhZGVycyhvcHRpb25zPy5oZWFkZXJzKTtcbiAgICBpZiAoY2xpZW50LnVzZXJpbmZvX3NpZ25lZF9yZXNwb25zZV9hbGcpIHtcbiAgICAgICAgaGVhZGVycy5zZXQoJ2FjY2VwdCcsICdhcHBsaWNhdGlvbi9qd3QnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KCdhY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZCgnYWNjZXB0JywgJ2FwcGxpY2F0aW9uL2p3dCcpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvdGVjdGVkUmVzb3VyY2VSZXF1ZXN0KGFjY2Vzc1Rva2VuLCAnR0VUJywgdXJsLCBoZWFkZXJzLCBudWxsLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIFtjbG9ja1NrZXddOiBnZXRDbG9ja1NrZXcoY2xpZW50KSxcbiAgICB9KTtcbn1cbmxldCBqd2tzTWFwO1xuZnVuY3Rpb24gc2V0Sndrc0NhY2hlKGFzLCBqd2tzLCB1YXQsIGNhY2hlKSB7XG4gICAgandrc01hcCB8fCAoandrc01hcCA9IG5ldyBXZWFrTWFwKCkpO1xuICAgIGp3a3NNYXAuc2V0KGFzLCB7XG4gICAgICAgIGp3a3MsXG4gICAgICAgIHVhdCxcbiAgICAgICAgZ2V0IGFnZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBlcG9jaFRpbWUoKSAtIHRoaXMudWF0O1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGlmIChjYWNoZSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKGNhY2hlLCB7IGp3a3M6IHN0cnVjdHVyZWRDbG9uZShqd2tzKSwgdWF0IH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzRnJlc2hKd2tzQ2FjaGUoaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnb2JqZWN0JyB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghKCd1YXQnIGluIGlucHV0KSB8fCB0eXBlb2YgaW5wdXQudWF0ICE9PSAnbnVtYmVyJyB8fCBlcG9jaFRpbWUoKSAtIGlucHV0LnVhdCA+PSAzMDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoISgnandrcycgaW4gaW5wdXQpIHx8XG4gICAgICAgICFpc0pzb25PYmplY3QoaW5wdXQuandrcykgfHxcbiAgICAgICAgIUFycmF5LmlzQXJyYXkoaW5wdXQuandrcy5rZXlzKSB8fFxuICAgICAgICAhQXJyYXkucHJvdG90eXBlLmV2ZXJ5LmNhbGwoaW5wdXQuandrcy5rZXlzLCBpc0pzb25PYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBjbGVhckp3a3NDYWNoZShhcywgY2FjaGUpIHtcbiAgICBqd2tzTWFwPy5kZWxldGUoYXMpO1xuICAgIGRlbGV0ZSBjYWNoZT8uandrcztcbiAgICBkZWxldGUgY2FjaGU/LnVhdDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFB1YmxpY1NpZ0tleUZyb21Jc3N1ZXJKd2tzVXJpKGFzLCBvcHRpb25zLCBoZWFkZXIpIHtcbiAgICBjb25zdCB7IGFsZywga2lkIH0gPSBoZWFkZXI7XG4gICAgY2hlY2tTdXBwb3J0ZWRKd3NBbGcoYWxnKTtcbiAgICBpZiAoIWp3a3NNYXA/LmhhcyhhcykgJiYgaXNGcmVzaEp3a3NDYWNoZShvcHRpb25zPy5bandrc0NhY2hlXSkpIHtcbiAgICAgICAgc2V0Sndrc0NhY2hlKGFzLCBvcHRpb25zPy5bandrc0NhY2hlXS5qd2tzLCBvcHRpb25zPy5bandrc0NhY2hlXS51YXQpO1xuICAgIH1cbiAgICBsZXQgandrcztcbiAgICBsZXQgYWdlO1xuICAgIGlmIChqd2tzTWFwPy5oYXMoYXMpKSB7XG4gICAgICAgIDtcbiAgICAgICAgKHsgandrcywgYWdlIH0gPSBqd2tzTWFwLmdldChhcykpO1xuICAgICAgICBpZiAoYWdlID49IDMwMCkge1xuICAgICAgICAgICAgY2xlYXJKd2tzQ2FjaGUoYXMsIG9wdGlvbnM/Lltqd2tzQ2FjaGVdKTtcbiAgICAgICAgICAgIHJldHVybiBnZXRQdWJsaWNTaWdLZXlGcm9tSXNzdWVySndrc1VyaShhcywgb3B0aW9ucywgaGVhZGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgandrcyA9IGF3YWl0IGp3a3NSZXF1ZXN0KGFzLCBvcHRpb25zKS50aGVuKHByb2Nlc3NKd2tzUmVzcG9uc2UpO1xuICAgICAgICBhZ2UgPSAwO1xuICAgICAgICBzZXRKd2tzQ2FjaGUoYXMsIGp3a3MsIGVwb2NoVGltZSgpLCBvcHRpb25zPy5bandrc0NhY2hlXSk7XG4gICAgfVxuICAgIGxldCBrdHk7XG4gICAgc3dpdGNoIChhbGcuc2xpY2UoMCwgMikpIHtcbiAgICAgICAgY2FzZSAnUlMnOlxuICAgICAgICBjYXNlICdQUyc6XG4gICAgICAgICAgICBrdHkgPSAnUlNBJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFUyc6XG4gICAgICAgICAgICBrdHkgPSAnRUMnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0VkJzpcbiAgICAgICAgICAgIGt0eSA9ICdPS1AnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcigpO1xuICAgIH1cbiAgICBjb25zdCBjYW5kaWRhdGVzID0gandrcy5rZXlzLmZpbHRlcigoandrKSA9PiB7XG4gICAgICAgIGlmIChqd2sua3R5ICE9PSBrdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2lkICE9PSB1bmRlZmluZWQgJiYga2lkICE9PSBqd2sua2lkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGp3ay5hbGcgIT09IHVuZGVmaW5lZCAmJiBhbGcgIT09IGp3ay5hbGcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoandrLnVzZSAhPT0gdW5kZWZpbmVkICYmIGp3ay51c2UgIT09ICdzaWcnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGp3ay5rZXlfb3BzPy5pbmNsdWRlcygndmVyaWZ5JykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgICBjYXNlIGFsZyA9PT0gJ0VTMjU2JyAmJiBqd2suY3J2ICE9PSAnUC0yNTYnOlxuICAgICAgICAgICAgY2FzZSBhbGcgPT09ICdFUzM4NCcgJiYgandrLmNydiAhPT0gJ1AtMzg0JzpcbiAgICAgICAgICAgIGNhc2UgYWxnID09PSAnRVM1MTInICYmIGp3ay5jcnYgIT09ICdQLTUyMSc6XG4gICAgICAgICAgICBjYXNlIGFsZyA9PT0gJ0VkRFNBJyAmJiAhKGp3ay5jcnYgPT09ICdFZDI1NTE5JyB8fCBqd2suY3J2ID09PSAnRWQ0NDgnKTpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgY29uc3QgeyAwOiBqd2ssIGxlbmd0aCB9ID0gY2FuZGlkYXRlcztcbiAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICBpZiAoYWdlID49IDYwKSB7XG4gICAgICAgICAgICBjbGVhckp3a3NDYWNoZShhcywgb3B0aW9ucz8uW2p3a3NDYWNoZV0pO1xuICAgICAgICAgICAgcmV0dXJuIGdldFB1YmxpY1NpZ0tleUZyb21Jc3N1ZXJKd2tzVXJpKGFzLCBvcHRpb25zLCBoZWFkZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ2Vycm9yIHdoZW4gc2VsZWN0aW5nIGEgSldUIHZlcmlmaWNhdGlvbiBrZXksIG5vIGFwcGxpY2FibGUga2V5cyBmb3VuZCcpO1xuICAgIH1cbiAgICBpZiAobGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ2Vycm9yIHdoZW4gc2VsZWN0aW5nIGEgSldUIHZlcmlmaWNhdGlvbiBrZXksIG11bHRpcGxlIGFwcGxpY2FibGUga2V5cyBmb3VuZCwgYSBcImtpZFwiIEpXVCBIZWFkZXIgUGFyYW1ldGVyIGlzIHJlcXVpcmVkJyk7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IGF3YWl0IGltcG9ydEp3ayhhbGcsIGp3ayk7XG4gICAgaWYgKGtleS50eXBlICE9PSAncHVibGljJykge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdqd2tzX3VyaSBtdXN0IG9ubHkgY29udGFpbiBwdWJsaWMga2V5cycpO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xufVxuZXhwb3J0IGNvbnN0IHNraXBTdWJqZWN0Q2hlY2sgPSBTeW1ib2woKTtcbmZ1bmN0aW9uIGdldENvbnRlbnRUeXBlKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKT8uc3BsaXQoJzsnKVswXTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzVXNlckluZm9SZXNwb25zZShhcywgY2xpZW50LCBleHBlY3RlZFN1YmplY3QsIHJlc3BvbnNlKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGFzc2VydENsaWVudChjbGllbnQpO1xuICAgIGlmICghbG9vc2VJbnN0YW5jZU9mKHJlc3BvbnNlLCBSZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJyZXNwb25zZVwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVzcG9uc2UnKTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBpcyBub3QgYSBjb25mb3JtIFVzZXJJbmZvIEVuZHBvaW50IHJlc3BvbnNlJyk7XG4gICAgfVxuICAgIGxldCBqc29uO1xuICAgIGlmIChnZXRDb250ZW50VHlwZShyZXNwb25zZSkgPT09ICdhcHBsaWNhdGlvbi9qd3QnKSB7XG4gICAgICAgIGFzc2VydFJlYWRhYmxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICBjb25zdCB7IGNsYWltcywgand0IH0gPSBhd2FpdCB2YWxpZGF0ZUp3dChhd2FpdCByZXNwb25zZS50ZXh0KCksIGNoZWNrU2lnbmluZ0FsZ29yaXRobS5iaW5kKHVuZGVmaW5lZCwgY2xpZW50LnVzZXJpbmZvX3NpZ25lZF9yZXNwb25zZV9hbGcsIGFzLnVzZXJpbmZvX3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQpLCBub1NpZ25hdHVyZUNoZWNrLCBnZXRDbG9ja1NrZXcoY2xpZW50KSwgZ2V0Q2xvY2tUb2xlcmFuY2UoY2xpZW50KSwgY2xpZW50W2p3ZURlY3J5cHRdKVxuICAgICAgICAgICAgLnRoZW4odmFsaWRhdGVPcHRpb25hbEF1ZGllbmNlLmJpbmQodW5kZWZpbmVkLCBjbGllbnQuY2xpZW50X2lkKSlcbiAgICAgICAgICAgIC50aGVuKHZhbGlkYXRlT3B0aW9uYWxJc3N1ZXIuYmluZCh1bmRlZmluZWQsIGFzLmlzc3VlcikpO1xuICAgICAgICBqd3RSZXNwb25zZUJvZGllcy5zZXQocmVzcG9uc2UsIGp3dCk7XG4gICAgICAgIGpzb24gPSBjbGFpbXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoY2xpZW50LnVzZXJpbmZvX3NpZ25lZF9yZXNwb25zZV9hbGcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ0pXVCBVc2VySW5mbyBSZXNwb25zZSBleHBlY3RlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydFJlYWRhYmxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoY2F1c2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ2ZhaWxlZCB0byBwYXJzZSBcInJlc3BvbnNlXCIgYm9keSBhcyBKU09OJywgeyBjYXVzZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzSnNvbk9iamVjdChqc29uKSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgYm9keSBtdXN0IGJlIGEgdG9wIGxldmVsIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKGpzb24uc3ViKSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgYm9keSBcInN1YlwiIHByb3BlcnR5IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIHN3aXRjaCAoZXhwZWN0ZWRTdWJqZWN0KSB7XG4gICAgICAgIGNhc2Ugc2tpcFN1YmplY3RDaGVjazpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZVN0cmluZyhleHBlY3RlZFN1YmplY3QpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJleHBlY3RlZFN1YmplY3RcIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGpzb24uc3ViICE9PSBleHBlY3RlZFN1YmplY3QpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCd1bmV4cGVjdGVkIFwicmVzcG9uc2VcIiBib2R5IFwic3ViXCIgdmFsdWUnKTtcbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGpzb247XG59XG5hc3luYyBmdW5jdGlvbiBhdXRoZW50aWNhdGVkUmVxdWVzdChhcywgY2xpZW50LCBtZXRob2QsIHVybCwgYm9keSwgaGVhZGVycywgb3B0aW9ucykge1xuICAgIGF3YWl0IGNsaWVudEF1dGhlbnRpY2F0aW9uKGFzLCBjbGllbnQsIGJvZHksIGhlYWRlcnMsIG9wdGlvbnM/LmNsaWVudFByaXZhdGVLZXkpO1xuICAgIGhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKTtcbiAgICByZXR1cm4gKG9wdGlvbnM/LltjdXN0b21GZXRjaF0gfHwgZmV0Y2gpKHVybC5ocmVmLCB7XG4gICAgICAgIGJvZHksXG4gICAgICAgIGhlYWRlcnM6IE9iamVjdC5mcm9tRW50cmllcyhoZWFkZXJzLmVudHJpZXMoKSksXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgcmVkaXJlY3Q6ICdtYW51YWwnLFxuICAgICAgICBzaWduYWw6IG9wdGlvbnM/LnNpZ25hbCA/IHNpZ25hbChvcHRpb25zLnNpZ25hbCkgOiBudWxsLFxuICAgIH0pLnRoZW4ocHJvY2Vzc0Rwb3BOb25jZSk7XG59XG5hc3luYyBmdW5jdGlvbiB0b2tlbkVuZHBvaW50UmVxdWVzdChhcywgY2xpZW50LCBncmFudFR5cGUsIHBhcmFtZXRlcnMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB1cmwgPSByZXNvbHZlRW5kcG9pbnQoYXMsICd0b2tlbl9lbmRwb2ludCcsIGFsaWFzKGNsaWVudCwgb3B0aW9ucykpO1xuICAgIHBhcmFtZXRlcnMuc2V0KCdncmFudF90eXBlJywgZ3JhbnRUeXBlKTtcbiAgICBjb25zdCBoZWFkZXJzID0gcHJlcGFyZUhlYWRlcnMob3B0aW9ucz8uaGVhZGVycyk7XG4gICAgaGVhZGVycy5zZXQoJ2FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgaWYgKG9wdGlvbnM/LkRQb1AgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhd2FpdCBkcG9wUHJvb2ZKd3QoaGVhZGVycywgb3B0aW9ucy5EUG9QLCB1cmwsICdQT1NUJywgZ2V0Q2xvY2tTa2V3KGNsaWVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gYXV0aGVudGljYXRlZFJlcXVlc3QoYXMsIGNsaWVudCwgJ1BPU1QnLCB1cmwsIHBhcmFtZXRlcnMsIGhlYWRlcnMsIG9wdGlvbnMpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hUb2tlbkdyYW50UmVxdWVzdChhcywgY2xpZW50LCByZWZyZXNoVG9rZW4sIG9wdGlvbnMpIHtcbiAgICBhc3NlcnRBcyhhcyk7XG4gICAgYXNzZXJ0Q2xpZW50KGNsaWVudCk7XG4gICAgaWYgKCF2YWxpZGF0ZVN0cmluZyhyZWZyZXNoVG9rZW4pKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicmVmcmVzaFRva2VuXCIgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMob3B0aW9ucz8uYWRkaXRpb25hbFBhcmFtZXRlcnMpO1xuICAgIHBhcmFtZXRlcnMuc2V0KCdyZWZyZXNoX3Rva2VuJywgcmVmcmVzaFRva2VuKTtcbiAgICByZXR1cm4gdG9rZW5FbmRwb2ludFJlcXVlc3QoYXMsIGNsaWVudCwgJ3JlZnJlc2hfdG9rZW4nLCBwYXJhbWV0ZXJzLCBvcHRpb25zKTtcbn1cbmNvbnN0IGlkVG9rZW5DbGFpbXMgPSBuZXcgV2Vha01hcCgpO1xuY29uc3Qgand0UmVzcG9uc2VCb2RpZXMgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbGlkYXRlZElkVG9rZW5DbGFpbXMocmVmKSB7XG4gICAgaWYgKCFyZWYuaWRfdG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY2xhaW1zID0gaWRUb2tlbkNsYWltcy5nZXQocmVmKTtcbiAgICBpZiAoIWNsYWltcykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInJlZlwiIHdhcyBhbHJlYWR5IGdhcmJhZ2UgY29sbGVjdGVkIG9yIGRpZCBub3QgcmVzb2x2ZSBmcm9tIHRoZSBwcm9wZXIgc291cmNlcycpO1xuICAgIH1cbiAgICByZXR1cm4gY2xhaW1zWzBdO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlSWRUb2tlblNpZ25hdHVyZShhcywgcmVmLCBvcHRpb25zKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGlmICghaWRUb2tlbkNsYWltcy5oYXMocmVmKSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlZlwiIGRvZXMgbm90IGNvbnRhaW4gYW4gSUQgVG9rZW4gdG8gdmVyaWZ5IHRoZSBzaWduYXR1cmUgb2YnKTtcbiAgICB9XG4gICAgY29uc3QgeyAwOiBwcm90ZWN0ZWRIZWFkZXIsIDE6IHBheWxvYWQsIDI6IGVuY29kZWRTaWduYXR1cmUsIH0gPSBpZFRva2VuQ2xhaW1zLmdldChyZWYpWzFdLnNwbGl0KCcuJyk7XG4gICAgY29uc3QgaGVhZGVyID0gSlNPTi5wYXJzZShidWYoYjY0dShwcm90ZWN0ZWRIZWFkZXIpKSk7XG4gICAgaWYgKGhlYWRlci5hbGcuc3RhcnRzV2l0aCgnSFMnKSkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcigpO1xuICAgIH1cbiAgICBsZXQga2V5O1xuICAgIGtleSA9IGF3YWl0IGdldFB1YmxpY1NpZ0tleUZyb21Jc3N1ZXJKd2tzVXJpKGFzLCBvcHRpb25zLCBoZWFkZXIpO1xuICAgIGF3YWl0IHZhbGlkYXRlSndzU2lnbmF0dXJlKHByb3RlY3RlZEhlYWRlciwgcGF5bG9hZCwga2V5LCBiNjR1KGVuY29kZWRTaWduYXR1cmUpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlSnd0UmVzcG9uc2VTaWduYXR1cmUoYXMsIHJlZiwgb3B0aW9ucykge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBpZiAoIWp3dFJlc3BvbnNlQm9kaWVzLmhhcyhyZWYpKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVmXCIgZG9lcyBub3QgY29udGFpbiBhIHByb2Nlc3NlZCBKV1QgUmVzcG9uc2UgdG8gdmVyaWZ5IHRoZSBzaWduYXR1cmUgb2YnKTtcbiAgICB9XG4gICAgY29uc3QgeyAwOiBwcm90ZWN0ZWRIZWFkZXIsIDE6IHBheWxvYWQsIDI6IGVuY29kZWRTaWduYXR1cmUsIH0gPSBqd3RSZXNwb25zZUJvZGllcy5nZXQocmVmKS5zcGxpdCgnLicpO1xuICAgIGNvbnN0IGhlYWRlciA9IEpTT04ucGFyc2UoYnVmKGI2NHUocHJvdGVjdGVkSGVhZGVyKSkpO1xuICAgIGlmIChoZWFkZXIuYWxnLnN0YXJ0c1dpdGgoJ0hTJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoKTtcbiAgICB9XG4gICAgbGV0IGtleTtcbiAgICBrZXkgPSBhd2FpdCBnZXRQdWJsaWNTaWdLZXlGcm9tSXNzdWVySndrc1VyaShhcywgb3B0aW9ucywgaGVhZGVyKTtcbiAgICBhd2FpdCB2YWxpZGF0ZUp3c1NpZ25hdHVyZShwcm90ZWN0ZWRIZWFkZXIsIHBheWxvYWQsIGtleSwgYjY0dShlbmNvZGVkU2lnbmF0dXJlKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVKd3RVc2VySW5mb1NpZ25hdHVyZShhcywgcmVmLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRlSnd0UmVzcG9uc2VTaWduYXR1cmUoYXMsIHJlZiwgb3B0aW9ucyk7XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVKd3RJbnRyb3NwZWN0aW9uU2lnbmF0dXJlKGFzLCByZWYsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdmFsaWRhdGVKd3RSZXNwb25zZVNpZ25hdHVyZShhcywgcmVmLCBvcHRpb25zKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NHZW5lcmljQWNjZXNzVG9rZW5SZXNwb25zZShhcywgY2xpZW50LCByZXNwb25zZSwgaWdub3JlSWRUb2tlbiA9IGZhbHNlLCBpZ25vcmVSZWZyZXNoVG9rZW4gPSBmYWxzZSkge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBpZiAoIWxvb3NlSW5zdGFuY2VPZihyZXNwb25zZSwgUmVzcG9uc2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicmVzcG9uc2VcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIFJlc3BvbnNlJyk7XG4gICAgfVxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICBsZXQgZXJyO1xuICAgICAgICBpZiAoKGVyciA9IGF3YWl0IGhhbmRsZU9BdXRoQm9keUVycm9yKHJlc3BvbnNlKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGlzIG5vdCBhIGNvbmZvcm0gVG9rZW4gRW5kcG9pbnQgcmVzcG9uc2UnKTtcbiAgICB9XG4gICAgYXNzZXJ0UmVhZGFibGVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgbGV0IGpzb247XG4gICAgdHJ5IHtcbiAgICAgICAganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ2ZhaWxlZCB0byBwYXJzZSBcInJlc3BvbnNlXCIgYm9keSBhcyBKU09OJywgeyBjYXVzZSB9KTtcbiAgICB9XG4gICAgaWYgKCFpc0pzb25PYmplY3QoanNvbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgbXVzdCBiZSBhIHRvcCBsZXZlbCBvYmplY3QnKTtcbiAgICB9XG4gICAgaWYgKCF2YWxpZGF0ZVN0cmluZyhqc29uLmFjY2Vzc190b2tlbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJhY2Nlc3NfdG9rZW5cIiBwcm9wZXJ0eSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKGpzb24udG9rZW5fdHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJ0b2tlbl90eXBlXCIgcHJvcGVydHkgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICB9XG4gICAganNvbi50b2tlbl90eXBlID0ganNvbi50b2tlbl90eXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGpzb24udG9rZW5fdHlwZSAhPT0gJ2Rwb3AnICYmIGpzb24udG9rZW5fdHlwZSAhPT0gJ2JlYXJlcicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoJ3Vuc3VwcG9ydGVkIGB0b2tlbl90eXBlYCB2YWx1ZScpO1xuICAgIH1cbiAgICBpZiAoanNvbi5leHBpcmVzX2luICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgKHR5cGVvZiBqc29uLmV4cGlyZXNfaW4gIT09ICdudW1iZXInIHx8IGpzb24uZXhwaXJlc19pbiA8PSAwKSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgYm9keSBcImV4cGlyZXNfaW5cIiBwcm9wZXJ0eSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgfVxuICAgIGlmICghaWdub3JlUmVmcmVzaFRva2VuICYmXG4gICAgICAgIGpzb24ucmVmcmVzaF90b2tlbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICF2YWxpZGF0ZVN0cmluZyhqc29uLnJlZnJlc2hfdG9rZW4pKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBib2R5IFwicmVmcmVzaF90b2tlblwiIHByb3BlcnR5IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIGlmIChqc29uLnNjb3BlICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGpzb24uc2NvcGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBib2R5IFwic2NvcGVcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgfVxuICAgIGlmICghaWdub3JlSWRUb2tlbikge1xuICAgICAgICBpZiAoanNvbi5pZF90b2tlbiAhPT0gdW5kZWZpbmVkICYmICF2YWxpZGF0ZVN0cmluZyhqc29uLmlkX3Rva2VuKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJpZF90b2tlblwiIHByb3BlcnR5IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpzb24uaWRfdG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY2xhaW1zLCBqd3QgfSA9IGF3YWl0IHZhbGlkYXRlSnd0KGpzb24uaWRfdG9rZW4sIGNoZWNrU2lnbmluZ0FsZ29yaXRobS5iaW5kKHVuZGVmaW5lZCwgY2xpZW50LmlkX3Rva2VuX3NpZ25lZF9yZXNwb25zZV9hbGcsIGFzLmlkX3Rva2VuX3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQpLCBub1NpZ25hdHVyZUNoZWNrLCBnZXRDbG9ja1NrZXcoY2xpZW50KSwgZ2V0Q2xvY2tUb2xlcmFuY2UoY2xpZW50KSwgY2xpZW50W2p3ZURlY3J5cHRdKVxuICAgICAgICAgICAgICAgIC50aGVuKHZhbGlkYXRlUHJlc2VuY2UuYmluZCh1bmRlZmluZWQsIFsnYXVkJywgJ2V4cCcsICdpYXQnLCAnaXNzJywgJ3N1YiddKSlcbiAgICAgICAgICAgICAgICAudGhlbih2YWxpZGF0ZUlzc3Vlci5iaW5kKHVuZGVmaW5lZCwgYXMuaXNzdWVyKSlcbiAgICAgICAgICAgICAgICAudGhlbih2YWxpZGF0ZUF1ZGllbmNlLmJpbmQodW5kZWZpbmVkLCBjbGllbnQuY2xpZW50X2lkKSk7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjbGFpbXMuYXVkKSAmJiBjbGFpbXMuYXVkLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIGlmIChjbGFpbXMuYXpwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnSUQgVG9rZW4gXCJhdWRcIiAoYXVkaWVuY2UpIGNsYWltIGluY2x1ZGVzIGFkZGl0aW9uYWwgdW50cnVzdGVkIGF1ZGllbmNlcycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2xhaW1zLmF6cCAhPT0gY2xpZW50LmNsaWVudF9pZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCd1bmV4cGVjdGVkIElEIFRva2VuIFwiYXpwXCIgKGF1dGhvcml6ZWQgcGFydHkpIGNsYWltIHZhbHVlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNsYWltcy5hdXRoX3RpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICghTnVtYmVyLmlzRmluaXRlKGNsYWltcy5hdXRoX3RpbWUpIHx8IE1hdGguc2lnbihjbGFpbXMuYXV0aF90aW1lKSAhPT0gMSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCdJRCBUb2tlbiBcImF1dGhfdGltZVwiIChhdXRoZW50aWNhdGlvbiB0aW1lKSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZFRva2VuQ2xhaW1zLnNldChqc29uLCBbY2xhaW1zLCBqd3RdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ganNvbjtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzUmVmcmVzaFRva2VuUmVzcG9uc2UoYXMsIGNsaWVudCwgcmVzcG9uc2UpIHtcbiAgICByZXR1cm4gcHJvY2Vzc0dlbmVyaWNBY2Nlc3NUb2tlblJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlKTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9uYWxBdWRpZW5jZShleHBlY3RlZCwgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdC5jbGFpbXMuYXVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlQXVkaWVuY2UoZXhwZWN0ZWQsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZUF1ZGllbmNlKGV4cGVjdGVkLCByZXN1bHQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQuY2xhaW1zLmF1ZCkpIHtcbiAgICAgICAgaWYgKCFyZXN1bHQuY2xhaW1zLmF1ZC5pbmNsdWRlcyhleHBlY3RlZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSldUIFwiYXVkXCIgKGF1ZGllbmNlKSBjbGFpbSB2YWx1ZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlc3VsdC5jbGFpbXMuYXVkICE9PSBleHBlY3RlZCkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCd1bmV4cGVjdGVkIEpXVCBcImF1ZFwiIChhdWRpZW5jZSkgY2xhaW0gdmFsdWUnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9uYWxJc3N1ZXIoZXhwZWN0ZWQsIHJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQuY2xhaW1zLmlzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZUlzc3VlcihleHBlY3RlZCwgcmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlSXNzdWVyKGV4cGVjdGVkLCByZXN1bHQpIHtcbiAgICBpZiAocmVzdWx0LmNsYWltcy5pc3MgIT09IGV4cGVjdGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSldUIFwiaXNzXCIgKGlzc3VlcikgY2xhaW0gdmFsdWUnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNvbnN0IGJyYW5kZWQgPSBuZXcgV2Vha1NldCgpO1xuZnVuY3Rpb24gYnJhbmQoc2VhcmNoUGFyYW1zKSB7XG4gICAgYnJhbmRlZC5hZGQoc2VhcmNoUGFyYW1zKTtcbiAgICByZXR1cm4gc2VhcmNoUGFyYW1zO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGhvcml6YXRpb25Db2RlR3JhbnRSZXF1ZXN0KGFzLCBjbGllbnQsIGNhbGxiYWNrUGFyYW1ldGVycywgcmVkaXJlY3RVcmksIGNvZGVWZXJpZmllciwgb3B0aW9ucykge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBpZiAoIWJyYW5kZWQuaGFzKGNhbGxiYWNrUGFyYW1ldGVycykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJjYWxsYmFja1BhcmFtZXRlcnNcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIFVSTFNlYXJjaFBhcmFtcyBvYnRhaW5lZCBmcm9tIFwidmFsaWRhdGVBdXRoUmVzcG9uc2UoKVwiLCBvciBcInZhbGlkYXRlSnd0QXV0aFJlc3BvbnNlKCknKTtcbiAgICB9XG4gICAgaWYgKCF2YWxpZGF0ZVN0cmluZyhyZWRpcmVjdFVyaSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJyZWRpcmVjdFVyaVwiIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIGlmICghdmFsaWRhdGVTdHJpbmcoY29kZVZlcmlmaWVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImNvZGVWZXJpZmllclwiIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIGNvbnN0IGNvZGUgPSBnZXRVUkxTZWFyY2hQYXJhbWV0ZXIoY2FsbGJhY2tQYXJhbWV0ZXJzLCAnY29kZScpO1xuICAgIGlmICghY29kZSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdubyBhdXRob3JpemF0aW9uIGNvZGUgaW4gXCJjYWxsYmFja1BhcmFtZXRlcnNcIicpO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbWV0ZXJzID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhvcHRpb25zPy5hZGRpdGlvbmFsUGFyYW1ldGVycyk7XG4gICAgcGFyYW1ldGVycy5zZXQoJ3JlZGlyZWN0X3VyaScsIHJlZGlyZWN0VXJpKTtcbiAgICBwYXJhbWV0ZXJzLnNldCgnY29kZV92ZXJpZmllcicsIGNvZGVWZXJpZmllcik7XG4gICAgcGFyYW1ldGVycy5zZXQoJ2NvZGUnLCBjb2RlKTtcbiAgICByZXR1cm4gdG9rZW5FbmRwb2ludFJlcXVlc3QoYXMsIGNsaWVudCwgJ2F1dGhvcml6YXRpb25fY29kZScsIHBhcmFtZXRlcnMsIG9wdGlvbnMpO1xufVxuY29uc3Qgand0Q2xhaW1OYW1lcyA9IHtcbiAgICBhdWQ6ICdhdWRpZW5jZScsXG4gICAgY19oYXNoOiAnY29kZSBoYXNoJyxcbiAgICBjbGllbnRfaWQ6ICdjbGllbnQgaWQnLFxuICAgIGV4cDogJ2V4cGlyYXRpb24gdGltZScsXG4gICAgaWF0OiAnaXNzdWVkIGF0JyxcbiAgICBpc3M6ICdpc3N1ZXInLFxuICAgIGp0aTogJ2p3dCBpZCcsXG4gICAgbm9uY2U6ICdub25jZScsXG4gICAgc19oYXNoOiAnc3RhdGUgaGFzaCcsXG4gICAgc3ViOiAnc3ViamVjdCcsXG4gICAgYXRoOiAnYWNjZXNzIHRva2VuIGhhc2gnLFxuICAgIGh0bTogJ2h0dHAgbWV0aG9kJyxcbiAgICBodHU6ICdodHRwIHVyaScsXG4gICAgY25mOiAnY29uZmlybWF0aW9uJyxcbn07XG5mdW5jdGlvbiB2YWxpZGF0ZVByZXNlbmNlKHJlcXVpcmVkLCByZXN1bHQpIHtcbiAgICBmb3IgKGNvbnN0IGNsYWltIG9mIHJlcXVpcmVkKSB7XG4gICAgICAgIGlmIChyZXN1bHQuY2xhaW1zW2NsYWltXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT1BFKGBKV1QgXCIke2NsYWltfVwiICgke2p3dENsYWltTmFtZXNbY2xhaW1dfSkgY2xhaW0gbWlzc2luZ2ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgY29uc3QgZXhwZWN0Tm9Ob25jZSA9IFN5bWJvbCgpO1xuZXhwb3J0IGNvbnN0IHNraXBBdXRoVGltZUNoZWNrID0gU3ltYm9sKCk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0F1dGhvcml6YXRpb25Db2RlT3BlbklEUmVzcG9uc2UoYXMsIGNsaWVudCwgcmVzcG9uc2UsIGV4cGVjdGVkTm9uY2UsIG1heEFnZSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2Nlc3NHZW5lcmljQWNjZXNzVG9rZW5SZXNwb25zZShhcywgY2xpZW50LCByZXNwb25zZSk7XG4gICAgaWYgKGlzT0F1dGgyRXJyb3IocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKHJlc3VsdC5pZF90b2tlbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJpZF90b2tlblwiIHByb3BlcnR5IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIG1heEFnZSA/PyAobWF4QWdlID0gY2xpZW50LmRlZmF1bHRfbWF4X2FnZSA/PyBza2lwQXV0aFRpbWVDaGVjayk7XG4gICAgY29uc3QgY2xhaW1zID0gZ2V0VmFsaWRhdGVkSWRUb2tlbkNsYWltcyhyZXN1bHQpO1xuICAgIGlmICgoY2xpZW50LnJlcXVpcmVfYXV0aF90aW1lIHx8IG1heEFnZSAhPT0gc2tpcEF1dGhUaW1lQ2hlY2spICYmXG4gICAgICAgIGNsYWltcy5hdXRoX3RpbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdJRCBUb2tlbiBcImF1dGhfdGltZVwiIChhdXRoZW50aWNhdGlvbiB0aW1lKSBjbGFpbSBtaXNzaW5nJyk7XG4gICAgfVxuICAgIGlmIChtYXhBZ2UgIT09IHNraXBBdXRoVGltZUNoZWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbWF4QWdlICE9PSAnbnVtYmVyJyB8fCBtYXhBZ2UgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcIm1heEFnZVwiIG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm93ID0gZXBvY2hUaW1lKCkgKyBnZXRDbG9ja1NrZXcoY2xpZW50KTtcbiAgICAgICAgY29uc3QgdG9sZXJhbmNlID0gZ2V0Q2xvY2tUb2xlcmFuY2UoY2xpZW50KTtcbiAgICAgICAgaWYgKGNsYWltcy5hdXRoX3RpbWUgKyBtYXhBZ2UgPCBub3cgLSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3RvbyBtdWNoIHRpbWUgaGFzIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgRW5kLVVzZXIgYXV0aGVudGljYXRpb24nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKGV4cGVjdGVkTm9uY2UpIHtcbiAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIGNhc2UgZXhwZWN0Tm9Ob25jZTpcbiAgICAgICAgICAgIGlmIChjbGFpbXMubm9uY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSUQgVG9rZW4gXCJub25jZVwiIGNsYWltIHZhbHVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICghdmFsaWRhdGVTdHJpbmcoZXhwZWN0ZWROb25jZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImV4cGVjdGVkTm9uY2VcIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNsYWltcy5ub25jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnSUQgVG9rZW4gXCJub25jZVwiIGNsYWltIG1pc3NpbmcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjbGFpbXMubm9uY2UgIT09IGV4cGVjdGVkTm9uY2UpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCd1bmV4cGVjdGVkIElEIFRva2VuIFwibm9uY2VcIiBjbGFpbSB2YWx1ZScpO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NBdXRob3JpemF0aW9uQ29kZU9BdXRoMlJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvY2Vzc0dlbmVyaWNBY2Nlc3NUb2tlblJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlLCB0cnVlKTtcbiAgICBpZiAoaXNPQXV0aDJFcnJvcihyZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmIChyZXN1bHQuaWRfdG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdC5pZF90b2tlbiA9PT0gJ3N0cmluZycgJiYgcmVzdWx0LmlkX3Rva2VuLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnVW5leHBlY3RlZCBJRCBUb2tlbiByZXR1cm5lZCwgdXNlIHByb2Nlc3NBdXRob3JpemF0aW9uQ29kZU9wZW5JRFJlc3BvbnNlKCkgZm9yIE9wZW5JRCBDb25uZWN0IGNhbGxiYWNrIHByb2Nlc3NpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgcmVzdWx0LmlkX3Rva2VuO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY2hlY2tKd3RUeXBlKGV4cGVjdGVkLCByZXN1bHQpIHtcbiAgICBpZiAodHlwZW9mIHJlc3VsdC5oZWFkZXIudHlwICE9PSAnc3RyaW5nJyB8fCBub3JtYWxpemVUeXAocmVzdWx0LmhlYWRlci50eXApICE9PSBleHBlY3RlZCkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCd1bmV4cGVjdGVkIEpXVCBcInR5cFwiIGhlYWRlciBwYXJhbWV0ZXIgdmFsdWUnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGllbnRDcmVkZW50aWFsc0dyYW50UmVxdWVzdChhcywgY2xpZW50LCBwYXJhbWV0ZXJzLCBvcHRpb25zKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGFzc2VydENsaWVudChjbGllbnQpO1xuICAgIHJldHVybiB0b2tlbkVuZHBvaW50UmVxdWVzdChhcywgY2xpZW50LCAnY2xpZW50X2NyZWRlbnRpYWxzJywgbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbWV0ZXJzKSwgb3B0aW9ucyk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJpY1Rva2VuRW5kcG9pbnRSZXF1ZXN0KGFzLCBjbGllbnQsIGdyYW50VHlwZSwgcGFyYW1ldGVycywgb3B0aW9ucykge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKGdyYW50VHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJncmFudFR5cGVcIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgIH1cbiAgICByZXR1cm4gdG9rZW5FbmRwb2ludFJlcXVlc3QoYXMsIGNsaWVudCwgZ3JhbnRUeXBlLCBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtZXRlcnMpLCBvcHRpb25zKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzQ2xpZW50Q3JlZGVudGlhbHNSZXNwb25zZShhcywgY2xpZW50LCByZXNwb25zZSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2Nlc3NHZW5lcmljQWNjZXNzVG9rZW5SZXNwb25zZShhcywgY2xpZW50LCByZXNwb25zZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgaWYgKGlzT0F1dGgyRXJyb3IocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldm9jYXRpb25SZXF1ZXN0KGFzLCBjbGllbnQsIHRva2VuLCBvcHRpb25zKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGFzc2VydENsaWVudChjbGllbnQpO1xuICAgIGlmICghdmFsaWRhdGVTdHJpbmcodG9rZW4pKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widG9rZW5cIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgIH1cbiAgICBjb25zdCB1cmwgPSByZXNvbHZlRW5kcG9pbnQoYXMsICdyZXZvY2F0aW9uX2VuZHBvaW50JywgYWxpYXMoY2xpZW50LCBvcHRpb25zKSk7XG4gICAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMob3B0aW9ucz8uYWRkaXRpb25hbFBhcmFtZXRlcnMpO1xuICAgIGJvZHkuc2V0KCd0b2tlbicsIHRva2VuKTtcbiAgICBjb25zdCBoZWFkZXJzID0gcHJlcGFyZUhlYWRlcnMob3B0aW9ucz8uaGVhZGVycyk7XG4gICAgaGVhZGVycy5kZWxldGUoJ2FjY2VwdCcpO1xuICAgIHJldHVybiBhdXRoZW50aWNhdGVkUmVxdWVzdChhcywgY2xpZW50LCAnUE9TVCcsIHVybCwgYm9keSwgaGVhZGVycywgb3B0aW9ucyk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1Jldm9jYXRpb25SZXNwb25zZShyZXNwb25zZSkge1xuICAgIGlmICghbG9vc2VJbnN0YW5jZU9mKHJlc3BvbnNlLCBSZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJyZXNwb25zZVwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVzcG9uc2UnKTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIGxldCBlcnI7XG4gICAgICAgIGlmICgoZXJyID0gYXdhaXQgaGFuZGxlT0F1dGhCb2R5RXJyb3IocmVzcG9uc2UpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgaXMgbm90IGEgY29uZm9ybSBSZXZvY2F0aW9uIEVuZHBvaW50IHJlc3BvbnNlJyk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBhc3NlcnRSZWFkYWJsZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLmJvZHlVc2VkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicmVzcG9uc2VcIiBib2R5IGhhcyBiZWVuIHVzZWQgYWxyZWFkeScpO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnRyb3NwZWN0aW9uUmVxdWVzdChhcywgY2xpZW50LCB0b2tlbiwgb3B0aW9ucykge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKHRva2VuKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInRva2VuXCIgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gcmVzb2x2ZUVuZHBvaW50KGFzLCAnaW50cm9zcGVjdGlvbl9lbmRwb2ludCcsIGFsaWFzKGNsaWVudCwgb3B0aW9ucykpO1xuICAgIGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKG9wdGlvbnM/LmFkZGl0aW9uYWxQYXJhbWV0ZXJzKTtcbiAgICBib2R5LnNldCgndG9rZW4nLCB0b2tlbik7XG4gICAgY29uc3QgaGVhZGVycyA9IHByZXBhcmVIZWFkZXJzKG9wdGlvbnM/LmhlYWRlcnMpO1xuICAgIGlmIChvcHRpb25zPy5yZXF1ZXN0Snd0UmVzcG9uc2UgPz8gY2xpZW50LmludHJvc3BlY3Rpb25fc2lnbmVkX3Jlc3BvbnNlX2FsZykge1xuICAgICAgICBoZWFkZXJzLnNldCgnYWNjZXB0JywgJ2FwcGxpY2F0aW9uL3Rva2VuLWludHJvc3BlY3Rpb24rand0Jyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBoZWFkZXJzLnNldCgnYWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICB9XG4gICAgcmV0dXJuIGF1dGhlbnRpY2F0ZWRSZXF1ZXN0KGFzLCBjbGllbnQsICdQT1NUJywgdXJsLCBib2R5LCBoZWFkZXJzLCBvcHRpb25zKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzSW50cm9zcGVjdGlvblJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGFzc2VydENsaWVudChjbGllbnQpO1xuICAgIGlmICghbG9vc2VJbnN0YW5jZU9mKHJlc3BvbnNlLCBSZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJyZXNwb25zZVwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVzcG9uc2UnKTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIGxldCBlcnI7XG4gICAgICAgIGlmICgoZXJyID0gYXdhaXQgaGFuZGxlT0F1dGhCb2R5RXJyb3IocmVzcG9uc2UpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgaXMgbm90IGEgY29uZm9ybSBJbnRyb3NwZWN0aW9uIEVuZHBvaW50IHJlc3BvbnNlJyk7XG4gICAgfVxuICAgIGxldCBqc29uO1xuICAgIGlmIChnZXRDb250ZW50VHlwZShyZXNwb25zZSkgPT09ICdhcHBsaWNhdGlvbi90b2tlbi1pbnRyb3NwZWN0aW9uK2p3dCcpIHtcbiAgICAgICAgYXNzZXJ0UmVhZGFibGVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIGNvbnN0IHsgY2xhaW1zLCBqd3QgfSA9IGF3YWl0IHZhbGlkYXRlSnd0KGF3YWl0IHJlc3BvbnNlLnRleHQoKSwgY2hlY2tTaWduaW5nQWxnb3JpdGhtLmJpbmQodW5kZWZpbmVkLCBjbGllbnQuaW50cm9zcGVjdGlvbl9zaWduZWRfcmVzcG9uc2VfYWxnLCBhcy5pbnRyb3NwZWN0aW9uX3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQpLCBub1NpZ25hdHVyZUNoZWNrLCBnZXRDbG9ja1NrZXcoY2xpZW50KSwgZ2V0Q2xvY2tUb2xlcmFuY2UoY2xpZW50KSwgY2xpZW50W2p3ZURlY3J5cHRdKVxuICAgICAgICAgICAgLnRoZW4oY2hlY2tKd3RUeXBlLmJpbmQodW5kZWZpbmVkLCAndG9rZW4taW50cm9zcGVjdGlvbitqd3QnKSlcbiAgICAgICAgICAgIC50aGVuKHZhbGlkYXRlUHJlc2VuY2UuYmluZCh1bmRlZmluZWQsIFsnYXVkJywgJ2lhdCcsICdpc3MnXSkpXG4gICAgICAgICAgICAudGhlbih2YWxpZGF0ZUlzc3Vlci5iaW5kKHVuZGVmaW5lZCwgYXMuaXNzdWVyKSlcbiAgICAgICAgICAgIC50aGVuKHZhbGlkYXRlQXVkaWVuY2UuYmluZCh1bmRlZmluZWQsIGNsaWVudC5jbGllbnRfaWQpKTtcbiAgICAgICAgand0UmVzcG9uc2VCb2RpZXMuc2V0KHJlc3BvbnNlLCBqd3QpO1xuICAgICAgICBqc29uID0gY2xhaW1zLnRva2VuX2ludHJvc3BlY3Rpb247XG4gICAgICAgIGlmICghaXNKc29uT2JqZWN0KGpzb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCdKV1QgXCJ0b2tlbl9pbnRyb3NwZWN0aW9uXCIgY2xhaW0gbXVzdCBiZSBhIEpTT04gb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFzc2VydFJlYWRhYmxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoY2F1c2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ2ZhaWxlZCB0byBwYXJzZSBcInJlc3BvbnNlXCIgYm9keSBhcyBKU09OJywgeyBjYXVzZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzSnNvbk9iamVjdChqc29uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgbXVzdCBiZSBhIHRvcCBsZXZlbCBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGpzb24uYWN0aXZlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJhY3RpdmVcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgYm9vbGVhbicpO1xuICAgIH1cbiAgICByZXR1cm4ganNvbjtcbn1cbmFzeW5jIGZ1bmN0aW9uIGp3a3NSZXF1ZXN0KGFzLCBvcHRpb25zKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGNvbnN0IHVybCA9IHJlc29sdmVFbmRwb2ludChhcywgJ2p3a3NfdXJpJyk7XG4gICAgY29uc3QgaGVhZGVycyA9IHByZXBhcmVIZWFkZXJzKG9wdGlvbnM/LmhlYWRlcnMpO1xuICAgIGhlYWRlcnMuc2V0KCdhY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIGhlYWRlcnMuYXBwZW5kKCdhY2NlcHQnLCAnYXBwbGljYXRpb24vandrLXNldCtqc29uJyk7XG4gICAgcmV0dXJuIChvcHRpb25zPy5bY3VzdG9tRmV0Y2hdIHx8IGZldGNoKSh1cmwuaHJlZiwge1xuICAgICAgICBoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMoaGVhZGVycy5lbnRyaWVzKCkpLFxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICByZWRpcmVjdDogJ21hbnVhbCcsXG4gICAgICAgIHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsID8gc2lnbmFsKG9wdGlvbnMuc2lnbmFsKSA6IG51bGwsXG4gICAgfSkudGhlbihwcm9jZXNzRHBvcE5vbmNlKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NKd2tzUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICBpZiAoIWxvb3NlSW5zdGFuY2VPZihyZXNwb25zZSwgUmVzcG9uc2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicmVzcG9uc2VcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIFJlc3BvbnNlJyk7XG4gICAgfVxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgaXMgbm90IGEgY29uZm9ybSBKU09OIFdlYiBLZXkgU2V0IHJlc3BvbnNlJyk7XG4gICAgfVxuICAgIGFzc2VydFJlYWRhYmxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIGxldCBqc29uO1xuICAgIHRyeSB7XG4gICAgICAgIGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGNhdGNoIChjYXVzZSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdmYWlsZWQgdG8gcGFyc2UgXCJyZXNwb25zZVwiIGJvZHkgYXMgSlNPTicsIHsgY2F1c2UgfSk7XG4gICAgfVxuICAgIGlmICghaXNKc29uT2JqZWN0KGpzb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBib2R5IG11c3QgYmUgYSB0b3AgbGV2ZWwgb2JqZWN0Jyk7XG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShqc29uLmtleXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBib2R5IFwia2V5c1wiIHByb3BlcnR5IG11c3QgYmUgYW4gYXJyYXknKTtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5wcm90b3R5cGUuZXZlcnkuY2FsbChqc29uLmtleXMsIGlzSnNvbk9iamVjdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJrZXlzXCIgcHJvcGVydHkgbWVtYmVycyBtdXN0IGJlIEpXSyBmb3JtYXR0ZWQgb2JqZWN0cycpO1xuICAgIH1cbiAgICByZXR1cm4ganNvbjtcbn1cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZU9BdXRoQm9keUVycm9yKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+IDM5OSAmJiByZXNwb25zZS5zdGF0dXMgPCA1MDApIHtcbiAgICAgICAgYXNzZXJ0UmVhZGFibGVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgaWYgKGlzSnNvbk9iamVjdChqc29uKSAmJiB0eXBlb2YganNvbi5lcnJvciA9PT0gJ3N0cmluZycgJiYganNvbi5lcnJvci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoanNvbi5lcnJvcl9kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBqc29uLmVycm9yX2Rlc2NyaXB0aW9uICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5lcnJvcl9kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGpzb24uZXJyb3JfdXJpICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGpzb24uZXJyb3JfdXJpICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5lcnJvcl91cmk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChqc29uLmFsZ3MgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YganNvbi5hbGdzICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5hbGdzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoanNvbi5zY29wZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBqc29uLnNjb3BlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5zY29wZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggeyB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBjaGVja1N1cHBvcnRlZEp3c0FsZyhhbGcpIHtcbiAgICBpZiAoIVNVUFBPUlRFRF9KV1NfQUxHUy5pbmNsdWRlcyhhbGcpKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkVycm9yKCd1bnN1cHBvcnRlZCBKV1MgXCJhbGdcIiBpZGVudGlmaWVyJyk7XG4gICAgfVxuICAgIHJldHVybiBhbGc7XG59XG5mdW5jdGlvbiBjaGVja1JzYUtleUFsZ29yaXRobShhbGdvcml0aG0pIHtcbiAgICBpZiAodHlwZW9mIGFsZ29yaXRobS5tb2R1bHVzTGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBhbGdvcml0aG0ubW9kdWx1c0xlbmd0aCA8IDIwNDgpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRShgJHthbGdvcml0aG0ubmFtZX0gbW9kdWx1c0xlbmd0aCBtdXN0IGJlIGF0IGxlYXN0IDIwNDggYml0c2ApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVjZHNhSGFzaE5hbWUobmFtZWRDdXJ2ZSkge1xuICAgIHN3aXRjaCAobmFtZWRDdXJ2ZSkge1xuICAgICAgICBjYXNlICdQLTI1Nic6XG4gICAgICAgICAgICByZXR1cm4gJ1NIQS0yNTYnO1xuICAgICAgICBjYXNlICdQLTM4NCc6XG4gICAgICAgICAgICByZXR1cm4gJ1NIQS0zODQnO1xuICAgICAgICBjYXNlICdQLTUyMSc6XG4gICAgICAgICAgICByZXR1cm4gJ1NIQS01MTInO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBrZXlUb1N1YnRsZShrZXkpIHtcbiAgICBzd2l0Y2ggKGtleS5hbGdvcml0aG0ubmFtZSkge1xuICAgICAgICBjYXNlICdFQ0RTQSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGtleS5hbGdvcml0aG0ubmFtZSxcbiAgICAgICAgICAgICAgICBoYXNoOiBlY2RzYUhhc2hOYW1lKGtleS5hbGdvcml0aG0ubmFtZWRDdXJ2ZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdSU0EtUFNTJzoge1xuICAgICAgICAgICAgY2hlY2tSc2FLZXlBbGdvcml0aG0oa2V5LmFsZ29yaXRobSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGtleS5hbGdvcml0aG0uaGFzaC5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnU0hBLTI1Nic6XG4gICAgICAgICAgICAgICAgY2FzZSAnU0hBLTM4NCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnU0hBLTUxMic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBrZXkuYWxnb3JpdGhtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzYWx0TGVuZ3RoOiBwYXJzZUludChrZXkuYWxnb3JpdGhtLmhhc2gubmFtZS5zbGljZSgtMyksIDEwKSA+PiAzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnUlNBU1NBLVBLQ1MxLXYxXzUnOlxuICAgICAgICAgICAgY2hlY2tSc2FLZXlBbGdvcml0aG0oa2V5LmFsZ29yaXRobSk7XG4gICAgICAgICAgICByZXR1cm4ga2V5LmFsZ29yaXRobS5uYW1lO1xuICAgICAgICBjYXNlICdFZDQ0OCc6XG4gICAgICAgIGNhc2UgJ0VkMjU1MTknOlxuICAgICAgICAgICAgcmV0dXJuIGtleS5hbGdvcml0aG0ubmFtZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoKTtcbn1cbmNvbnN0IG5vU2lnbmF0dXJlQ2hlY2sgPSBTeW1ib2woKTtcbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlSndzU2lnbmF0dXJlKHByb3RlY3RlZEhlYWRlciwgcGF5bG9hZCwga2V5LCBzaWduYXR1cmUpIHtcbiAgICBjb25zdCBpbnB1dCA9IGAke3Byb3RlY3RlZEhlYWRlcn0uJHtwYXlsb2FkfWA7XG4gICAgY29uc3QgdmVyaWZpZWQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLnZlcmlmeShrZXlUb1N1YnRsZShrZXkpLCBrZXksIHNpZ25hdHVyZSwgYnVmKGlucHV0KSk7XG4gICAgaWYgKCF2ZXJpZmllZCkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdKV1Qgc2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWQnKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUp3dChqd3MsIGNoZWNrQWxnLCBnZXRLZXksIGNsb2NrU2tldywgY2xvY2tUb2xlcmFuY2UsIGRlY3J5cHRKd3QpIHtcbiAgICBsZXQgeyAwOiBwcm90ZWN0ZWRIZWFkZXIsIDE6IHBheWxvYWQsIDI6IGVuY29kZWRTaWduYXR1cmUsIGxlbmd0aCB9ID0gandzLnNwbGl0KCcuJyk7XG4gICAgaWYgKGxlbmd0aCA9PT0gNSkge1xuICAgICAgICBpZiAoZGVjcnlwdEp3dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBqd3MgPSBhd2FpdCBkZWNyeXB0Snd0KGp3cyk7XG4gICAgICAgICAgICAoeyAwOiBwcm90ZWN0ZWRIZWFkZXIsIDE6IHBheWxvYWQsIDI6IGVuY29kZWRTaWduYXR1cmUsIGxlbmd0aCB9ID0gandzLnNwbGl0KCcuJykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoJ0pXRSBzdHJ1Y3R1cmUgSldUcyBhcmUgbm90IHN1cHBvcnRlZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChsZW5ndGggIT09IDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnSW52YWxpZCBKV1QnKTtcbiAgICB9XG4gICAgbGV0IGhlYWRlcjtcbiAgICB0cnkge1xuICAgICAgICBoZWFkZXIgPSBKU09OLnBhcnNlKGJ1ZihiNjR1KHByb3RlY3RlZEhlYWRlcikpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ2ZhaWxlZCB0byBwYXJzZSBKV1QgSGVhZGVyIGJvZHkgYXMgYmFzZTY0dXJsIGVuY29kZWQgSlNPTicsIHsgY2F1c2UgfSk7XG4gICAgfVxuICAgIGlmICghaXNKc29uT2JqZWN0KGhlYWRlcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnSldUIEhlYWRlciBtdXN0IGJlIGEgdG9wIGxldmVsIG9iamVjdCcpO1xuICAgIH1cbiAgICBjaGVja0FsZyhoZWFkZXIpO1xuICAgIGlmIChoZWFkZXIuY3JpdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSldUIFwiY3JpdFwiIGhlYWRlciBwYXJhbWV0ZXInKTtcbiAgICB9XG4gICAgY29uc3Qgc2lnbmF0dXJlID0gYjY0dShlbmNvZGVkU2lnbmF0dXJlKTtcbiAgICBsZXQga2V5O1xuICAgIGlmIChnZXRLZXkgIT09IG5vU2lnbmF0dXJlQ2hlY2spIHtcbiAgICAgICAga2V5ID0gYXdhaXQgZ2V0S2V5KGhlYWRlcik7XG4gICAgICAgIGF3YWl0IHZhbGlkYXRlSndzU2lnbmF0dXJlKHByb3RlY3RlZEhlYWRlciwgcGF5bG9hZCwga2V5LCBzaWduYXR1cmUpO1xuICAgIH1cbiAgICBsZXQgY2xhaW1zO1xuICAgIHRyeSB7XG4gICAgICAgIGNsYWltcyA9IEpTT04ucGFyc2UoYnVmKGI2NHUocGF5bG9hZCkpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ2ZhaWxlZCB0byBwYXJzZSBKV1QgUGF5bG9hZCBib2R5IGFzIGJhc2U2NHVybCBlbmNvZGVkIEpTT04nLCB7IGNhdXNlIH0pO1xuICAgIH1cbiAgICBpZiAoIWlzSnNvbk9iamVjdChjbGFpbXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ0pXVCBQYXlsb2FkIG11c3QgYmUgYSB0b3AgbGV2ZWwgb2JqZWN0Jyk7XG4gICAgfVxuICAgIGNvbnN0IG5vdyA9IGVwb2NoVGltZSgpICsgY2xvY2tTa2V3O1xuICAgIGlmIChjbGFpbXMuZXhwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGFpbXMuZXhwICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgndW5leHBlY3RlZCBKV1QgXCJleHBcIiAoZXhwaXJhdGlvbiB0aW1lKSBjbGFpbSB0eXBlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsYWltcy5leHAgPD0gbm93IC0gY2xvY2tUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSldUIFwiZXhwXCIgKGV4cGlyYXRpb24gdGltZSkgY2xhaW0gdmFsdWUsIHRpbWVzdGFtcCBpcyA8PSBub3coKScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjbGFpbXMuaWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGFpbXMuaWF0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgndW5leHBlY3RlZCBKV1QgXCJpYXRcIiAoaXNzdWVkIGF0KSBjbGFpbSB0eXBlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNsYWltcy5pc3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodHlwZW9mIGNsYWltcy5pc3MgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCd1bmV4cGVjdGVkIEpXVCBcImlzc1wiIChpc3N1ZXIpIGNsYWltIHR5cGUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2xhaW1zLm5iZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xhaW1zLm5iZiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSldUIFwibmJmXCIgKG5vdCBiZWZvcmUpIGNsYWltIHR5cGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xhaW1zLm5iZiA+IG5vdyArIGNsb2NrVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCd1bmV4cGVjdGVkIEpXVCBcIm5iZlwiIChub3QgYmVmb3JlKSBjbGFpbSB2YWx1ZSwgdGltZXN0YW1wIGlzID4gbm93KCknKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2xhaW1zLmF1ZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xhaW1zLmF1ZCAhPT0gJ3N0cmluZycgJiYgIUFycmF5LmlzQXJyYXkoY2xhaW1zLmF1ZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSldUIFwiYXVkXCIgKGF1ZGllbmNlKSBjbGFpbSB0eXBlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgaGVhZGVyLCBjbGFpbXMsIHNpZ25hdHVyZSwga2V5LCBqd3Q6IGp3cyB9O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlSnd0QXV0aFJlc3BvbnNlKGFzLCBjbGllbnQsIHBhcmFtZXRlcnMsIGV4cGVjdGVkU3RhdGUsIG9wdGlvbnMpIHtcbiAgICBhc3NlcnRBcyhhcyk7XG4gICAgYXNzZXJ0Q2xpZW50KGNsaWVudCk7XG4gICAgaWYgKHBhcmFtZXRlcnMgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICAgICAgcGFyYW1ldGVycyA9IHBhcmFtZXRlcnMuc2VhcmNoUGFyYW1zO1xuICAgIH1cbiAgICBpZiAoIShwYXJhbWV0ZXJzIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInBhcmFtZXRlcnNcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIFVSTFNlYXJjaFBhcmFtcywgb3IgVVJMJyk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gZ2V0VVJMU2VhcmNoUGFyYW1ldGVyKHBhcmFtZXRlcnMsICdyZXNwb25zZScpO1xuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJwYXJhbWV0ZXJzXCIgZG9lcyBub3QgY29udGFpbiBhIEpBUk0gcmVzcG9uc2UnKTtcbiAgICB9XG4gICAgY29uc3QgeyBjbGFpbXMgfSA9IGF3YWl0IHZhbGlkYXRlSnd0KHJlc3BvbnNlLCBjaGVja1NpZ25pbmdBbGdvcml0aG0uYmluZCh1bmRlZmluZWQsIGNsaWVudC5hdXRob3JpemF0aW9uX3NpZ25lZF9yZXNwb25zZV9hbGcsIGFzLmF1dGhvcml6YXRpb25fc2lnbmluZ19hbGdfdmFsdWVzX3N1cHBvcnRlZCksIGdldFB1YmxpY1NpZ0tleUZyb21Jc3N1ZXJKd2tzVXJpLmJpbmQodW5kZWZpbmVkLCBhcywgb3B0aW9ucyksIGdldENsb2NrU2tldyhjbGllbnQpLCBnZXRDbG9ja1RvbGVyYW5jZShjbGllbnQpLCBjbGllbnRbandlRGVjcnlwdF0pXG4gICAgICAgIC50aGVuKHZhbGlkYXRlUHJlc2VuY2UuYmluZCh1bmRlZmluZWQsIFsnYXVkJywgJ2V4cCcsICdpc3MnXSkpXG4gICAgICAgIC50aGVuKHZhbGlkYXRlSXNzdWVyLmJpbmQodW5kZWZpbmVkLCBhcy5pc3N1ZXIpKVxuICAgICAgICAudGhlbih2YWxpZGF0ZUF1ZGllbmNlLmJpbmQodW5kZWZpbmVkLCBjbGllbnQuY2xpZW50X2lkKSk7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNsYWltcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYga2V5ICE9PSAnYXVkJykge1xuICAgICAgICAgICAgcmVzdWx0LnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsaWRhdGVBdXRoUmVzcG9uc2UoYXMsIGNsaWVudCwgcmVzdWx0LCBleHBlY3RlZFN0YXRlKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGlkVG9rZW5IYXNoKGFsZywgZGF0YSwga2V5KSB7XG4gICAgbGV0IGFsZ29yaXRobTtcbiAgICBzd2l0Y2ggKGFsZykge1xuICAgICAgICBjYXNlICdSUzI1Nic6XG4gICAgICAgIGNhc2UgJ1BTMjU2JzpcbiAgICAgICAgY2FzZSAnRVMyNTYnOlxuICAgICAgICAgICAgYWxnb3JpdGhtID0gJ1NIQS0yNTYnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1JTMzg0JzpcbiAgICAgICAgY2FzZSAnUFMzODQnOlxuICAgICAgICBjYXNlICdFUzM4NCc6XG4gICAgICAgICAgICBhbGdvcml0aG0gPSAnU0hBLTM4NCc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnUlM1MTInOlxuICAgICAgICBjYXNlICdQUzUxMic6XG4gICAgICAgIGNhc2UgJ0VTNTEyJzpcbiAgICAgICAgICAgIGFsZ29yaXRobSA9ICdTSEEtNTEyJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFZERTQSc6XG4gICAgICAgICAgICBpZiAoa2V5LmFsZ29yaXRobS5uYW1lID09PSAnRWQyNTUxOScpIHtcbiAgICAgICAgICAgICAgICBhbGdvcml0aG0gPSAnU0hBLTUxMic7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcigpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoKTtcbiAgICB9XG4gICAgY29uc3QgZGlnZXN0ID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoYWxnb3JpdGhtLCBidWYoZGF0YSkpO1xuICAgIHJldHVybiBiNjR1KGRpZ2VzdC5zbGljZSgwLCBkaWdlc3QuYnl0ZUxlbmd0aCAvIDIpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGlkVG9rZW5IYXNoTWF0Y2hlcyhkYXRhLCBhY3R1YWwsIGFsZywga2V5KSB7XG4gICAgY29uc3QgZXhwZWN0ZWQgPSBhd2FpdCBpZFRva2VuSGFzaChhbGcsIGRhdGEsIGtleSk7XG4gICAgcmV0dXJuIGFjdHVhbCA9PT0gZXhwZWN0ZWQ7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVEZXRhY2hlZFNpZ25hdHVyZVJlc3BvbnNlKGFzLCBjbGllbnQsIHBhcmFtZXRlcnMsIGV4cGVjdGVkTm9uY2UsIGV4cGVjdGVkU3RhdGUsIG1heEFnZSwgb3B0aW9ucykge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBpZiAocGFyYW1ldGVycyBpbnN0YW5jZW9mIFVSTCkge1xuICAgICAgICBpZiAoIXBhcmFtZXRlcnMuaGFzaC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicGFyYW1ldGVyc1wiIGFzIGFuIGluc3RhbmNlIG9mIFVSTCBtdXN0IGNvbnRhaW4gYSBoYXNoIChmcmFnbWVudCkgd2l0aCB0aGUgQXV0aG9yaXphdGlvbiBSZXNwb25zZSBwYXJhbWV0ZXJzJyk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1ldGVycy5oYXNoLnNsaWNlKDEpKTtcbiAgICB9XG4gICAgaWYgKCEocGFyYW1ldGVycyBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJwYXJhbWV0ZXJzXCIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBVUkxTZWFyY2hQYXJhbXMnKTtcbiAgICB9XG4gICAgcGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1ldGVycyk7XG4gICAgY29uc3QgaWRfdG9rZW4gPSBnZXRVUkxTZWFyY2hQYXJhbWV0ZXIocGFyYW1ldGVycywgJ2lkX3Rva2VuJyk7XG4gICAgcGFyYW1ldGVycy5kZWxldGUoJ2lkX3Rva2VuJyk7XG4gICAgc3dpdGNoIChleHBlY3RlZFN0YXRlKSB7XG4gICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICBjYXNlIGV4cGVjdE5vU3RhdGU6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICghdmFsaWRhdGVTdHJpbmcoZXhwZWN0ZWRTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImV4cGVjdGVkU3RhdGVcIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUF1dGhSZXNwb25zZSh7XG4gICAgICAgIC4uLmFzLFxuICAgICAgICBhdXRob3JpemF0aW9uX3Jlc3BvbnNlX2lzc19wYXJhbWV0ZXJfc3VwcG9ydGVkOiBmYWxzZSxcbiAgICB9LCBjbGllbnQsIHBhcmFtZXRlcnMsIGV4cGVjdGVkU3RhdGUpO1xuICAgIGlmIChpc09BdXRoMkVycm9yKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgaWYgKCFpZF90b2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInBhcmFtZXRlcnNcIiBkb2VzIG5vdCBjb250YWluIGFuIElEIFRva2VuJyk7XG4gICAgfVxuICAgIGNvbnN0IGNvZGUgPSBnZXRVUkxTZWFyY2hQYXJhbWV0ZXIocGFyYW1ldGVycywgJ2NvZGUnKTtcbiAgICBpZiAoIWNvZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJwYXJhbWV0ZXJzXCIgZG9lcyBub3QgY29udGFpbiBhbiBBdXRob3JpemF0aW9uIENvZGUnKTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWlyZWRDbGFpbXMgPSBbXG4gICAgICAgICdhdWQnLFxuICAgICAgICAnZXhwJyxcbiAgICAgICAgJ2lhdCcsXG4gICAgICAgICdpc3MnLFxuICAgICAgICAnc3ViJyxcbiAgICAgICAgJ25vbmNlJyxcbiAgICAgICAgJ2NfaGFzaCcsXG4gICAgXTtcbiAgICBpZiAodHlwZW9mIGV4cGVjdGVkU3RhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlcXVpcmVkQ2xhaW1zLnB1c2goJ3NfaGFzaCcpO1xuICAgIH1cbiAgICBjb25zdCB7IGNsYWltcywgaGVhZGVyLCBrZXkgfSA9IGF3YWl0IHZhbGlkYXRlSnd0KGlkX3Rva2VuLCBjaGVja1NpZ25pbmdBbGdvcml0aG0uYmluZCh1bmRlZmluZWQsIGNsaWVudC5pZF90b2tlbl9zaWduZWRfcmVzcG9uc2VfYWxnLCBhcy5pZF90b2tlbl9zaWduaW5nX2FsZ192YWx1ZXNfc3VwcG9ydGVkKSwgZ2V0UHVibGljU2lnS2V5RnJvbUlzc3Vlckp3a3NVcmkuYmluZCh1bmRlZmluZWQsIGFzLCBvcHRpb25zKSwgZ2V0Q2xvY2tTa2V3KGNsaWVudCksIGdldENsb2NrVG9sZXJhbmNlKGNsaWVudCksIGNsaWVudFtqd2VEZWNyeXB0XSlcbiAgICAgICAgLnRoZW4odmFsaWRhdGVQcmVzZW5jZS5iaW5kKHVuZGVmaW5lZCwgcmVxdWlyZWRDbGFpbXMpKVxuICAgICAgICAudGhlbih2YWxpZGF0ZUlzc3Vlci5iaW5kKHVuZGVmaW5lZCwgYXMuaXNzdWVyKSlcbiAgICAgICAgLnRoZW4odmFsaWRhdGVBdWRpZW5jZS5iaW5kKHVuZGVmaW5lZCwgY2xpZW50LmNsaWVudF9pZCkpO1xuICAgIGNvbnN0IGNsb2NrU2tldyA9IGdldENsb2NrU2tldyhjbGllbnQpO1xuICAgIGNvbnN0IG5vdyA9IGVwb2NoVGltZSgpICsgY2xvY2tTa2V3O1xuICAgIGlmIChjbGFpbXMuaWF0IDwgbm93IC0gMzYwMCkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCd1bmV4cGVjdGVkIEpXVCBcImlhdFwiIChpc3N1ZWQgYXQpIGNsYWltIHZhbHVlLCBpdCBpcyB0b28gZmFyIGluIHRoZSBwYXN0Jyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2xhaW1zLmNfaGFzaCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgKGF3YWl0IGlkVG9rZW5IYXNoTWF0Y2hlcyhjb2RlLCBjbGFpbXMuY19oYXNoLCBoZWFkZXIuYWxnLCBrZXkpKSAhPT0gdHJ1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdpbnZhbGlkIElEIFRva2VuIFwiY19oYXNoXCIgKGNvZGUgaGFzaCkgY2xhaW0gdmFsdWUnKTtcbiAgICB9XG4gICAgaWYgKGNsYWltcy5zX2hhc2ggIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZXhwZWN0ZWRTdGF0ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnY291bGQgbm90IHZlcmlmeSBJRCBUb2tlbiBcInNfaGFzaFwiIChzdGF0ZSBoYXNoKSBjbGFpbSB2YWx1ZScpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGV4cGVjdGVkU3RhdGUgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICh0eXBlb2YgY2xhaW1zLnNfaGFzaCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgIChhd2FpdCBpZFRva2VuSGFzaE1hdGNoZXMoZXhwZWN0ZWRTdGF0ZSwgY2xhaW1zLnNfaGFzaCwgaGVhZGVyLmFsZywga2V5KSkgIT09IHRydWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ2ludmFsaWQgSUQgVG9rZW4gXCJzX2hhc2hcIiAoc3RhdGUgaGFzaCkgY2xhaW0gdmFsdWUnKTtcbiAgICB9XG4gICAgaWYgKGNsYWltcy5hdXRoX3RpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAoIU51bWJlci5pc0Zpbml0ZShjbGFpbXMuYXV0aF90aW1lKSB8fCBNYXRoLnNpZ24oY2xhaW1zLmF1dGhfdGltZSkgIT09IDEpKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ0lEIFRva2VuIFwiYXV0aF90aW1lXCIgKGF1dGhlbnRpY2F0aW9uIHRpbWUpIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgICB9XG4gICAgbWF4QWdlID8/IChtYXhBZ2UgPSBjbGllbnQuZGVmYXVsdF9tYXhfYWdlID8/IHNraXBBdXRoVGltZUNoZWNrKTtcbiAgICBpZiAoKGNsaWVudC5yZXF1aXJlX2F1dGhfdGltZSB8fCBtYXhBZ2UgIT09IHNraXBBdXRoVGltZUNoZWNrKSAmJlxuICAgICAgICBjbGFpbXMuYXV0aF90aW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnSUQgVG9rZW4gXCJhdXRoX3RpbWVcIiAoYXV0aGVudGljYXRpb24gdGltZSkgY2xhaW0gbWlzc2luZycpO1xuICAgIH1cbiAgICBpZiAobWF4QWdlICE9PSBza2lwQXV0aFRpbWVDaGVjaykge1xuICAgICAgICBpZiAodHlwZW9mIG1heEFnZSAhPT0gJ251bWJlcicgfHwgbWF4QWdlIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJtYXhBZ2VcIiBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vdyA9IGVwb2NoVGltZSgpICsgZ2V0Q2xvY2tTa2V3KGNsaWVudCk7XG4gICAgICAgIGNvbnN0IHRvbGVyYW5jZSA9IGdldENsb2NrVG9sZXJhbmNlKGNsaWVudCk7XG4gICAgICAgIGlmIChjbGFpbXMuYXV0aF90aW1lICsgbWF4QWdlIDwgbm93IC0gdG9sZXJhbmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCd0b28gbXVjaCB0aW1lIGhhcyBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IEVuZC1Vc2VyIGF1dGhlbnRpY2F0aW9uJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF2YWxpZGF0ZVN0cmluZyhleHBlY3RlZE5vbmNlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImV4cGVjdGVkTm9uY2VcIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgIH1cbiAgICBpZiAoY2xhaW1zLm5vbmNlICE9PSBleHBlY3RlZE5vbmNlKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSUQgVG9rZW4gXCJub25jZVwiIGNsYWltIHZhbHVlJyk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGNsYWltcy5hdWQpICYmIGNsYWltcy5hdWQubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIGlmIChjbGFpbXMuYXpwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ0lEIFRva2VuIFwiYXVkXCIgKGF1ZGllbmNlKSBjbGFpbSBpbmNsdWRlcyBhZGRpdGlvbmFsIHVudHJ1c3RlZCBhdWRpZW5jZXMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xhaW1zLmF6cCAhPT0gY2xpZW50LmNsaWVudF9pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgndW5leHBlY3RlZCBJRCBUb2tlbiBcImF6cFwiIChhdXRob3JpemVkIHBhcnR5KSBjbGFpbSB2YWx1ZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjaGVja1NpZ25pbmdBbGdvcml0aG0oY2xpZW50LCBpc3N1ZXIsIGhlYWRlcikge1xuICAgIGlmIChjbGllbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaGVhZGVyLmFsZyAhPT0gY2xpZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCd1bmV4cGVjdGVkIEpXVCBcImFsZ1wiIGhlYWRlciBwYXJhbWV0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGlzc3VlcikpIHtcbiAgICAgICAgaWYgKCFpc3N1ZXIuaW5jbHVkZXMoaGVhZGVyLmFsZykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSldUIFwiYWxnXCIgaGVhZGVyIHBhcmFtZXRlcicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGhlYWRlci5hbGcgIT09ICdSUzI1NicpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgndW5leHBlY3RlZCBKV1QgXCJhbGdcIiBoZWFkZXIgcGFyYW1ldGVyJyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0VVJMU2VhcmNoUGFyYW1ldGVyKHBhcmFtZXRlcnMsIG5hbWUpIHtcbiAgICBjb25zdCB7IDA6IHZhbHVlLCBsZW5ndGggfSA9IHBhcmFtZXRlcnMuZ2V0QWxsKG5hbWUpO1xuICAgIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoYFwiJHtuYW1lfVwiIHBhcmFtZXRlciBtdXN0IGJlIHByb3ZpZGVkIG9ubHkgb25jZWApO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5leHBvcnQgY29uc3Qgc2tpcFN0YXRlQ2hlY2sgPSBTeW1ib2woKTtcbmV4cG9ydCBjb25zdCBleHBlY3ROb1N0YXRlID0gU3ltYm9sKCk7XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVBdXRoUmVzcG9uc2UoYXMsIGNsaWVudCwgcGFyYW1ldGVycywgZXhwZWN0ZWRTdGF0ZSkge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBpZiAocGFyYW1ldGVycyBpbnN0YW5jZW9mIFVSTCkge1xuICAgICAgICBwYXJhbWV0ZXJzID0gcGFyYW1ldGVycy5zZWFyY2hQYXJhbXM7XG4gICAgfVxuICAgIGlmICghKHBhcmFtZXRlcnMgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicGFyYW1ldGVyc1wiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgVVJMU2VhcmNoUGFyYW1zLCBvciBVUkwnKTtcbiAgICB9XG4gICAgaWYgKGdldFVSTFNlYXJjaFBhcmFtZXRlcihwYXJhbWV0ZXJzLCAncmVzcG9uc2UnKSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInBhcmFtZXRlcnNcIiBjb250YWlucyBhIEpBUk0gcmVzcG9uc2UsIHVzZSB2YWxpZGF0ZUp3dEF1dGhSZXNwb25zZSgpIGluc3RlYWQgb2YgdmFsaWRhdGVBdXRoUmVzcG9uc2UoKScpO1xuICAgIH1cbiAgICBjb25zdCBpc3MgPSBnZXRVUkxTZWFyY2hQYXJhbWV0ZXIocGFyYW1ldGVycywgJ2lzcycpO1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0VVJMU2VhcmNoUGFyYW1ldGVyKHBhcmFtZXRlcnMsICdzdGF0ZScpO1xuICAgIGlmICghaXNzICYmIGFzLmF1dGhvcml6YXRpb25fcmVzcG9uc2VfaXNzX3BhcmFtZXRlcl9zdXBwb3J0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgncmVzcG9uc2UgcGFyYW1ldGVyIFwiaXNzXCIgKGlzc3VlcikgbWlzc2luZycpO1xuICAgIH1cbiAgICBpZiAoaXNzICYmIGlzcyAhPT0gYXMuaXNzdWVyKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgXCJpc3NcIiAoaXNzdWVyKSByZXNwb25zZSBwYXJhbWV0ZXIgdmFsdWUnKTtcbiAgICB9XG4gICAgc3dpdGNoIChleHBlY3RlZFN0YXRlKSB7XG4gICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICBjYXNlIGV4cGVjdE5vU3RhdGU6XG4gICAgICAgICAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgXCJzdGF0ZVwiIHJlc3BvbnNlIHBhcmFtZXRlciBlbmNvdW50ZXJlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2Ugc2tpcFN0YXRlQ2hlY2s6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICghdmFsaWRhdGVTdHJpbmcoZXhwZWN0ZWRTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCdcImV4cGVjdGVkU3RhdGVcIiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCdyZXNwb25zZSBwYXJhbWV0ZXIgXCJzdGF0ZVwiIG1pc3NpbmcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZSAhPT0gZXhwZWN0ZWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgXCJzdGF0ZVwiIHJlc3BvbnNlIHBhcmFtZXRlciB2YWx1ZScpO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBlcnJvciA9IGdldFVSTFNlYXJjaFBhcmFtZXRlcihwYXJhbWV0ZXJzLCAnZXJyb3InKTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgZXJyb3JfZGVzY3JpcHRpb246IGdldFVSTFNlYXJjaFBhcmFtZXRlcihwYXJhbWV0ZXJzLCAnZXJyb3JfZGVzY3JpcHRpb24nKSxcbiAgICAgICAgICAgIGVycm9yX3VyaTogZ2V0VVJMU2VhcmNoUGFyYW1ldGVyKHBhcmFtZXRlcnMsICdlcnJvcl91cmknKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaWRfdG9rZW4gPSBnZXRVUkxTZWFyY2hQYXJhbWV0ZXIocGFyYW1ldGVycywgJ2lkX3Rva2VuJyk7XG4gICAgY29uc3QgdG9rZW4gPSBnZXRVUkxTZWFyY2hQYXJhbWV0ZXIocGFyYW1ldGVycywgJ3Rva2VuJyk7XG4gICAgaWYgKGlkX3Rva2VuICE9PSB1bmRlZmluZWQgfHwgdG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcignaW1wbGljaXQgYW5kIGh5YnJpZCBmbG93cyBhcmUgbm90IHN1cHBvcnRlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gYnJhbmQobmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbWV0ZXJzKSk7XG59XG5mdW5jdGlvbiBhbGdUb1N1YnRsZShhbGcsIGNydikge1xuICAgIHN3aXRjaCAoYWxnKSB7XG4gICAgICAgIGNhc2UgJ1BTMjU2JzpcbiAgICAgICAgY2FzZSAnUFMzODQnOlxuICAgICAgICBjYXNlICdQUzUxMic6XG4gICAgICAgICAgICByZXR1cm4geyBuYW1lOiAnUlNBLVBTUycsIGhhc2g6IGBTSEEtJHthbGcuc2xpY2UoLTMpfWAgfTtcbiAgICAgICAgY2FzZSAnUlMyNTYnOlxuICAgICAgICBjYXNlICdSUzM4NCc6XG4gICAgICAgIGNhc2UgJ1JTNTEyJzpcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWU6ICdSU0FTU0EtUEtDUzEtdjFfNScsIGhhc2g6IGBTSEEtJHthbGcuc2xpY2UoLTMpfWAgfTtcbiAgICAgICAgY2FzZSAnRVMyNTYnOlxuICAgICAgICBjYXNlICdFUzM4NCc6XG4gICAgICAgICAgICByZXR1cm4geyBuYW1lOiAnRUNEU0EnLCBuYW1lZEN1cnZlOiBgUC0ke2FsZy5zbGljZSgtMyl9YCB9O1xuICAgICAgICBjYXNlICdFUzUxMic6XG4gICAgICAgICAgICByZXR1cm4geyBuYW1lOiAnRUNEU0EnLCBuYW1lZEN1cnZlOiAnUC01MjEnIH07XG4gICAgICAgIGNhc2UgJ0VkRFNBJzoge1xuICAgICAgICAgICAgc3dpdGNoIChjcnYpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdFZDI1NTE5JzpcbiAgICAgICAgICAgICAgICBjYXNlICdFZDQ0OCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcnY7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXJyb3IoKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBpbXBvcnRKd2soYWxnLCBqd2spIHtcbiAgICBjb25zdCB7IGV4dCwga2V5X29wcywgdXNlLCAuLi5rZXkgfSA9IGp3aztcbiAgICByZXR1cm4gY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoJ2p3aycsIGtleSwgYWxnVG9TdWJ0bGUoYWxnLCBqd2suY3J2KSwgdHJ1ZSwgWyd2ZXJpZnknXSk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGV2aWNlQXV0aG9yaXphdGlvblJlcXVlc3QoYXMsIGNsaWVudCwgcGFyYW1ldGVycywgb3B0aW9ucykge1xuICAgIGFzc2VydEFzKGFzKTtcbiAgICBhc3NlcnRDbGllbnQoY2xpZW50KTtcbiAgICBjb25zdCB1cmwgPSByZXNvbHZlRW5kcG9pbnQoYXMsICdkZXZpY2VfYXV0aG9yaXphdGlvbl9lbmRwb2ludCcsIGFsaWFzKGNsaWVudCwgb3B0aW9ucykpO1xuICAgIGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtZXRlcnMpO1xuICAgIGJvZHkuc2V0KCdjbGllbnRfaWQnLCBjbGllbnQuY2xpZW50X2lkKTtcbiAgICBjb25zdCBoZWFkZXJzID0gcHJlcGFyZUhlYWRlcnMob3B0aW9ucz8uaGVhZGVycyk7XG4gICAgaGVhZGVycy5zZXQoJ2FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgcmV0dXJuIGF1dGhlbnRpY2F0ZWRSZXF1ZXN0KGFzLCBjbGllbnQsICdQT1NUJywgdXJsLCBib2R5LCBoZWFkZXJzLCBvcHRpb25zKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRGV2aWNlQXV0aG9yaXphdGlvblJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGFzc2VydENsaWVudChjbGllbnQpO1xuICAgIGlmICghbG9vc2VJbnN0YW5jZU9mKHJlc3BvbnNlLCBSZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJyZXNwb25zZVwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVzcG9uc2UnKTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIGxldCBlcnI7XG4gICAgICAgIGlmICgoZXJyID0gYXdhaXQgaGFuZGxlT0F1dGhCb2R5RXJyb3IocmVzcG9uc2UpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgaXMgbm90IGEgY29uZm9ybSBEZXZpY2UgQXV0aG9yaXphdGlvbiBFbmRwb2ludCByZXNwb25zZScpO1xuICAgIH1cbiAgICBhc3NlcnRSZWFkYWJsZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICBsZXQganNvbjtcbiAgICB0cnkge1xuICAgICAgICBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBjYXRjaCAoY2F1c2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnZmFpbGVkIHRvIHBhcnNlIFwicmVzcG9uc2VcIiBib2R5IGFzIEpTT04nLCB7IGNhdXNlIH0pO1xuICAgIH1cbiAgICBpZiAoIWlzSnNvbk9iamVjdChqc29uKSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgYm9keSBtdXN0IGJlIGEgdG9wIGxldmVsIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKGpzb24uZGV2aWNlX2NvZGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wicmVzcG9uc2VcIiBib2R5IFwiZGV2aWNlX2NvZGVcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKGpzb24udXNlcl9jb2RlKSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgYm9keSBcInVzZXJfY29kZVwiIHByb3BlcnR5IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIGlmICghdmFsaWRhdGVTdHJpbmcoanNvbi52ZXJpZmljYXRpb25fdXJpKSkge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdcInJlc3BvbnNlXCIgYm9keSBcInZlcmlmaWNhdGlvbl91cmlcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGpzb24uZXhwaXJlc19pbiAhPT0gJ251bWJlcicgfHwganNvbi5leHBpcmVzX2luIDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJleHBpcmVzX2luXCIgcHJvcGVydHkgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICAgIH1cbiAgICBpZiAoanNvbi52ZXJpZmljYXRpb25fdXJpX2NvbXBsZXRlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgIXZhbGlkYXRlU3RyaW5nKGpzb24udmVyaWZpY2F0aW9uX3VyaV9jb21wbGV0ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJ2ZXJpZmljYXRpb25fdXJpX2NvbXBsZXRlXCIgcHJvcGVydHkgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICB9XG4gICAgaWYgKGpzb24uaW50ZXJ2YWwgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGpzb24uaW50ZXJ2YWwgIT09ICdudW1iZXInIHx8IGpzb24uaW50ZXJ2YWwgPD0gMCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXNwb25zZVwiIGJvZHkgXCJpbnRlcnZhbFwiIHByb3BlcnR5IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgICB9XG4gICAgcmV0dXJuIGpzb247XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGV2aWNlQ29kZUdyYW50UmVxdWVzdChhcywgY2xpZW50LCBkZXZpY2VDb2RlLCBvcHRpb25zKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGFzc2VydENsaWVudChjbGllbnQpO1xuICAgIGlmICghdmFsaWRhdGVTdHJpbmcoZGV2aWNlQ29kZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJkZXZpY2VDb2RlXCIgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMob3B0aW9ucz8uYWRkaXRpb25hbFBhcmFtZXRlcnMpO1xuICAgIHBhcmFtZXRlcnMuc2V0KCdkZXZpY2VfY29kZScsIGRldmljZUNvZGUpO1xuICAgIHJldHVybiB0b2tlbkVuZHBvaW50UmVxdWVzdChhcywgY2xpZW50LCAndXJuOmlldGY6cGFyYW1zOm9hdXRoOmdyYW50LXR5cGU6ZGV2aWNlX2NvZGUnLCBwYXJhbWV0ZXJzLCBvcHRpb25zKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRGV2aWNlQ29kZVJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHByb2Nlc3NHZW5lcmljQWNjZXNzVG9rZW5SZXNwb25zZShhcywgY2xpZW50LCByZXNwb25zZSk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVLZXlQYWlyKGFsZywgb3B0aW9ucykge1xuICAgIGlmICghdmFsaWRhdGVTdHJpbmcoYWxnKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImFsZ1wiIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIGNvbnN0IGFsZ29yaXRobSA9IGFsZ1RvU3VidGxlKGFsZywgYWxnID09PSAnRWREU0EnID8gKG9wdGlvbnM/LmNydiA/PyAnRWQyNTUxOScpIDogdW5kZWZpbmVkKTtcbiAgICBpZiAoYWxnLnN0YXJ0c1dpdGgoJ1BTJykgfHwgYWxnLnN0YXJ0c1dpdGgoJ1JTJykpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihhbGdvcml0aG0sIHtcbiAgICAgICAgICAgIG1vZHVsdXNMZW5ndGg6IG9wdGlvbnM/Lm1vZHVsdXNMZW5ndGggPz8gMjA0OCxcbiAgICAgICAgICAgIHB1YmxpY0V4cG9uZW50OiBuZXcgVWludDhBcnJheShbMHgwMSwgMHgwMCwgMHgwMV0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoYWxnb3JpdGhtLCBvcHRpb25zPy5leHRyYWN0YWJsZSA/PyBmYWxzZSwgW1xuICAgICAgICAnc2lnbicsXG4gICAgICAgICd2ZXJpZnknLFxuICAgIF0pO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplSHR1KGh0dSkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoaHR1KTtcbiAgICB1cmwuc2VhcmNoID0gJyc7XG4gICAgdXJsLmhhc2ggPSAnJztcbiAgICByZXR1cm4gdXJsLmhyZWY7XG59XG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZURQb1AoYXMsIHJlcXVlc3QsIGFjY2Vzc1Rva2VuLCBhY2Nlc3NUb2tlbkNsYWltcywgb3B0aW9ucykge1xuICAgIGNvbnN0IGhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2Rwb3AnKTtcbiAgICBpZiAoaGVhZGVyID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ29wZXJhdGlvbiBpbmRpY2F0ZWQgRFBvUCB1c2UgYnV0IHRoZSByZXF1ZXN0IGhhcyBubyBEUG9QIEhUVFAgSGVhZGVyJyk7XG4gICAgfVxuICAgIGlmIChyZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk/LnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnZHBvcCAnKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRShgb3BlcmF0aW9uIGluZGljYXRlZCBEUG9QIHVzZSBidXQgdGhlIHJlcXVlc3QncyBBdXRob3JpemF0aW9uIEhUVFAgSGVhZGVyIHNjaGVtZSBpcyBub3QgRFBvUGApO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGFjY2Vzc1Rva2VuQ2xhaW1zLmNuZj8uamt0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdvcGVyYXRpb24gaW5kaWNhdGVkIERQb1AgdXNlIGJ1dCB0aGUgSldUIEFjY2VzcyBUb2tlbiBoYXMgbm8gamt0IGNvbmZpcm1hdGlvbiBjbGFpbScpO1xuICAgIH1cbiAgICBjb25zdCBjbG9ja1NrZXcgPSBnZXRDbG9ja1NrZXcob3B0aW9ucyk7XG4gICAgY29uc3QgcHJvb2YgPSBhd2FpdCB2YWxpZGF0ZUp3dChoZWFkZXIsIGNoZWNrU2lnbmluZ0FsZ29yaXRobS5iaW5kKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcz8uZHBvcF9zaWduaW5nX2FsZ192YWx1ZXNfc3VwcG9ydGVkIHx8IFNVUFBPUlRFRF9KV1NfQUxHUyksIGFzeW5jICh7IGp3aywgYWxnIH0pID0+IHtcbiAgICAgICAgaWYgKCFqd2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ0RQb1AgUHJvb2YgaXMgbWlzc2luZyB0aGUgandrIGhlYWRlciBwYXJhbWV0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBpbXBvcnRKd2soYWxnLCBqd2spO1xuICAgICAgICBpZiAoa2V5LnR5cGUgIT09ICdwdWJsaWMnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT1BFKCdEUG9QIFByb29mIGp3ayBoZWFkZXIgcGFyYW1ldGVyIG11c3QgY29udGFpbiBhIHB1YmxpYyBrZXknKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5O1xuICAgIH0sIGNsb2NrU2tldywgZ2V0Q2xvY2tUb2xlcmFuY2Uob3B0aW9ucyksIHVuZGVmaW5lZClcbiAgICAgICAgLnRoZW4oY2hlY2tKd3RUeXBlLmJpbmQodW5kZWZpbmVkLCAnZHBvcCtqd3QnKSlcbiAgICAgICAgLnRoZW4odmFsaWRhdGVQcmVzZW5jZS5iaW5kKHVuZGVmaW5lZCwgWydpYXQnLCAnanRpJywgJ2F0aCcsICdodG0nLCAnaHR1J10pKTtcbiAgICBjb25zdCBub3cgPSBlcG9jaFRpbWUoKSArIGNsb2NrU2tldztcbiAgICBjb25zdCBkaWZmID0gTWF0aC5hYnMobm93IC0gcHJvb2YuY2xhaW1zLmlhdCk7XG4gICAgaWYgKGRpZmYgPiAzMDApIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnRFBvUCBQcm9vZiBpYXQgaXMgbm90IHJlY2VudCBlbm91Z2gnKTtcbiAgICB9XG4gICAgaWYgKHByb29mLmNsYWltcy5odG0gIT09IHJlcXVlc3QubWV0aG9kKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ0RQb1AgUHJvb2YgaHRtIG1pc21hdGNoJyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcHJvb2YuY2xhaW1zLmh0dSAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgbm9ybWFsaXplSHR1KHByb29mLmNsYWltcy5odHUpICE9PSBub3JtYWxpemVIdHUocmVxdWVzdC51cmwpKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ0RQb1AgUHJvb2YgaHR1IG1pc21hdGNoJyk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBiNjR1KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgZW5jb2Rlci5lbmNvZGUoYWNjZXNzVG9rZW4pKSk7XG4gICAgICAgIGlmIChwcm9vZi5jbGFpbXMuYXRoICE9PSBleHBlY3RlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnRFBvUCBQcm9vZiBhdGggbWlzbWF0Y2gnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB7XG4gICAgICAgIGxldCBjb21wb25lbnRzO1xuICAgICAgICBzd2l0Y2ggKHByb29mLmhlYWRlci5qd2sua3R5KSB7XG4gICAgICAgICAgICBjYXNlICdFQyc6XG4gICAgICAgICAgICAgICAgY29tcG9uZW50cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY3J2OiBwcm9vZi5oZWFkZXIuandrLmNydixcbiAgICAgICAgICAgICAgICAgICAga3R5OiBwcm9vZi5oZWFkZXIuandrLmt0eSxcbiAgICAgICAgICAgICAgICAgICAgeDogcHJvb2YuaGVhZGVyLmp3ay54LFxuICAgICAgICAgICAgICAgICAgICB5OiBwcm9vZi5oZWFkZXIuandrLnksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ09LUCc6XG4gICAgICAgICAgICAgICAgY29tcG9uZW50cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY3J2OiBwcm9vZi5oZWFkZXIuandrLmNydixcbiAgICAgICAgICAgICAgICAgICAga3R5OiBwcm9vZi5oZWFkZXIuandrLmt0eSxcbiAgICAgICAgICAgICAgICAgICAgeDogcHJvb2YuaGVhZGVyLmp3ay54LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdSU0EnOlxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGU6IHByb29mLmhlYWRlci5qd2suZSxcbiAgICAgICAgICAgICAgICAgICAga3R5OiBwcm9vZi5oZWFkZXIuandrLmt0eSxcbiAgICAgICAgICAgICAgICAgICAgbjogcHJvb2YuaGVhZGVyLmp3ay5uLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBiNjR1KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgZW5jb2Rlci5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoY29tcG9uZW50cykpKSk7XG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbkNsYWltcy5jbmYuamt0ICE9PSBleHBlY3RlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRSgnSldUIEFjY2VzcyBUb2tlbiBjb25maXJtYXRpb24gbWlzbWF0Y2gnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUp3dEFjY2Vzc1Rva2VuKGFzLCByZXF1ZXN0LCBleHBlY3RlZEF1ZGllbmNlLCBvcHRpb25zKSB7XG4gICAgYXNzZXJ0QXMoYXMpO1xuICAgIGlmICghbG9vc2VJbnN0YW5jZU9mKHJlcXVlc3QsIFJlcXVlc3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicmVxdWVzdFwiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVxdWVzdCcpO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlU3RyaW5nKGV4cGVjdGVkQXVkaWVuY2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBPUEUoJ1wiZXhwZWN0ZWRBdWRpZW5jZVwiIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgfVxuICAgIGNvbnN0IGF1dGhvcml6YXRpb24gPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XG4gICAgaWYgKGF1dGhvcml6YXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9QRSgnXCJyZXF1ZXN0XCIgaXMgbWlzc2luZyBhbiBBdXRob3JpemF0aW9uIEhUVFAgSGVhZGVyJyk7XG4gICAgfVxuICAgIGxldCB7IDA6IHNjaGVtZSwgMTogYWNjZXNzVG9rZW4sIGxlbmd0aCB9ID0gYXV0aG9yaXphdGlvbi5zcGxpdCgnICcpO1xuICAgIHNjaGVtZSA9IHNjaGVtZS50b0xvd2VyQ2FzZSgpO1xuICAgIHN3aXRjaCAoc2NoZW1lKSB7XG4gICAgICAgIGNhc2UgJ2Rwb3AnOlxuICAgICAgICBjYXNlICdiZWFyZXInOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcigndW5zdXBwb3J0ZWQgQXV0aG9yaXphdGlvbiBIVFRQIEhlYWRlciBzY2hlbWUnKTtcbiAgICB9XG4gICAgaWYgKGxlbmd0aCAhPT0gMikge1xuICAgICAgICB0aHJvdyBuZXcgT1BFKCdpbnZhbGlkIEF1dGhvcml6YXRpb24gSFRUUCBIZWFkZXIgZm9ybWF0Jyk7XG4gICAgfVxuICAgIGNvbnN0IHJlcXVpcmVkQ2xhaW1zID0gW1xuICAgICAgICAnaXNzJyxcbiAgICAgICAgJ2V4cCcsXG4gICAgICAgICdhdWQnLFxuICAgICAgICAnc3ViJyxcbiAgICAgICAgJ2lhdCcsXG4gICAgICAgICdqdGknLFxuICAgICAgICAnY2xpZW50X2lkJyxcbiAgICBdO1xuICAgIGlmIChvcHRpb25zPy5yZXF1aXJlRFBvUCB8fCBzY2hlbWUgPT09ICdkcG9wJyB8fCByZXF1ZXN0LmhlYWRlcnMuaGFzKCdkcG9wJykpIHtcbiAgICAgICAgcmVxdWlyZWRDbGFpbXMucHVzaCgnY25mJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgY2xhaW1zIH0gPSBhd2FpdCB2YWxpZGF0ZUp3dChhY2Nlc3NUb2tlbiwgY2hlY2tTaWduaW5nQWxnb3JpdGhtLmJpbmQodW5kZWZpbmVkLCB1bmRlZmluZWQsIFNVUFBPUlRFRF9KV1NfQUxHUyksIGdldFB1YmxpY1NpZ0tleUZyb21Jc3N1ZXJKd2tzVXJpLmJpbmQodW5kZWZpbmVkLCBhcywgb3B0aW9ucyksIGdldENsb2NrU2tldyhvcHRpb25zKSwgZ2V0Q2xvY2tUb2xlcmFuY2Uob3B0aW9ucyksIHVuZGVmaW5lZClcbiAgICAgICAgLnRoZW4oY2hlY2tKd3RUeXBlLmJpbmQodW5kZWZpbmVkLCAnYXQrand0JykpXG4gICAgICAgIC50aGVuKHZhbGlkYXRlUHJlc2VuY2UuYmluZCh1bmRlZmluZWQsIHJlcXVpcmVkQ2xhaW1zKSlcbiAgICAgICAgLnRoZW4odmFsaWRhdGVJc3N1ZXIuYmluZCh1bmRlZmluZWQsIGFzLmlzc3VlcikpXG4gICAgICAgIC50aGVuKHZhbGlkYXRlQXVkaWVuY2UuYmluZCh1bmRlZmluZWQsIGV4cGVjdGVkQXVkaWVuY2UpKTtcbiAgICBmb3IgKGNvbnN0IGNsYWltIG9mIFsnY2xpZW50X2lkJywgJ2p0aScsICdzdWInXSkge1xuICAgICAgICBpZiAodHlwZW9mIGNsYWltc1tjbGFpbV0gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT1BFKGB1bmV4cGVjdGVkIEpXVCBcIiR7Y2xhaW19XCIgY2xhaW0gdHlwZWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICgnY25mJyBpbiBjbGFpbXMpIHtcbiAgICAgICAgaWYgKCFpc0pzb25PYmplY3QoY2xhaW1zLmNuZikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPUEUoJ3VuZXhwZWN0ZWQgSldUIFwiY25mXCIgKGNvbmZpcm1hdGlvbikgY2xhaW0gdmFsdWUnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IDA6IGNuZiwgbGVuZ3RoIH0gPSBPYmplY3Qua2V5cyhjbGFpbXMuY25mKTtcbiAgICAgICAgaWYgKGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkVycm9yKCdtdWx0aXBsZSBjb25maXJtYXRpb24gY2xhaW1zIGFyZSBub3Qgc3VwcG9ydGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY25mICE9PSAnamt0Jykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkVycm9yKCd1bnN1cHBvcnRlZCBKV1QgQ29uZmlybWF0aW9uIG1ldGhvZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRpb25zPy5yZXF1aXJlRFBvUCB8fFxuICAgICAgICBzY2hlbWUgPT09ICdkcG9wJyB8fFxuICAgICAgICBjbGFpbXMuY25mPy5qa3QgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICByZXF1ZXN0LmhlYWRlcnMuaGFzKCdkcG9wJykpIHtcbiAgICAgICAgYXdhaXQgdmFsaWRhdGVEUG9QKGFzLCByZXF1ZXN0LCBhY2Nlc3NUb2tlbiwgY2xhaW1zLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIGNsYWltcztcbn1cbmV4cG9ydCBjb25zdCBleHBlcmltZW50YWxDdXN0b21GZXRjaCA9IGN1c3RvbUZldGNoO1xuZXhwb3J0IGNvbnN0IGV4cGVyaW1lbnRhbF9jdXN0b21GZXRjaCA9IGN1c3RvbUZldGNoO1xuZXhwb3J0IGNvbnN0IGV4cGVyaW1lbnRhbFVzZU10bHNBbGlhcyA9IHVzZU10bHNBbGlhcztcbmV4cG9ydCBjb25zdCBleHBlcmltZW50YWxfdXNlTXRsc0FsaWFzID0gdXNlTXRsc0FsaWFzO1xuZXhwb3J0IGNvbnN0IGV4cGVyaW1lbnRhbF92YWxpZGF0ZURldGFjaGVkU2lnbmF0dXJlUmVzcG9uc2UgPSAoLi4uYXJncykgPT4gdmFsaWRhdGVEZXRhY2hlZFNpZ25hdHVyZVJlc3BvbnNlKC4uLmFyZ3MpO1xuZXhwb3J0IGNvbnN0IGV4cGVyaW1lbnRhbF92YWxpZGF0ZUp3dEFjY2Vzc1Rva2VuID0gKC4uLmFyZ3MpID0+IHZhbGlkYXRlSnd0QWNjZXNzVG9rZW4oLi4uYXJncyk7XG5leHBvcnQgY29uc3QgdmFsaWRhdGVKd3RVc2VyaW5mb1NpZ25hdHVyZSA9ICguLi5hcmdzKSA9PiB2YWxpZGF0ZUp3dFVzZXJJbmZvU2lnbmF0dXJlKC4uLmFyZ3MpO1xuZXhwb3J0IGNvbnN0IGV4cGVyaW1lbnRhbF9qd2tzQ2FjaGUgPSBqd2tzQ2FjaGU7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/oauth4webapi/build/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/app/page.module.css":
/*!*********************************!*\
  !*** ./src/app/page.module.css ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"page_main__GlU4n\",\"contentArea\":\"page_contentArea__r4RWt\",\"section\":\"page_section__61PEw\"};\n    if(true) {\n      // 1744584506385\n      var cssReload = __webpack_require__(/*! ./node_modules/next/dist/compiled/mini-css-extract-plugin/hmr/hotModuleReplacement.js */ \"(app-pages-browser)/./node_modules/next/dist/compiled/mini-css-extract-plugin/hmr/hotModuleReplacement.js\")(module.id, {\"publicPath\":\"/_next/\",\"esModule\":false,\"locals\":true});\n      module.hot.dispose(cssReload);\n      \n    }\n  \nmodule.exports.__checksum = \"8cd3545be4b3\"\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvcGFnZS5tb2R1bGUuY3NzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0Esa0JBQWtCO0FBQ2xCLE9BQU8sSUFBVTtBQUNqQjtBQUNBLHNCQUFzQixtQkFBTyxDQUFDLHdNQUF1SSxjQUFjLHNEQUFzRDtBQUN6TyxNQUFNLFVBQVU7QUFDaEI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXHNyY1xcYXBwXFxwYWdlLm1vZHVsZS5jc3MiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5tb2R1bGUuZXhwb3J0cyA9IHtcIm1haW5cIjpcInBhZ2VfbWFpbl9fR2xVNG5cIixcImNvbnRlbnRBcmVhXCI6XCJwYWdlX2NvbnRlbnRBcmVhX19yNFJXdFwiLFwic2VjdGlvblwiOlwicGFnZV9zZWN0aW9uX182MVBFd1wifTtcbiAgICBpZihtb2R1bGUuaG90KSB7XG4gICAgICAvLyAxNzQ0NTg0NTA2Mzg1XG4gICAgICB2YXIgY3NzUmVsb2FkID0gcmVxdWlyZShcIkM6L1VzZXJzL2FwZ2F1L09uZURyaXZlL0Rlc2t0b3AvZWR1Y2F0aW9uLXdlYnNpdGUvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jb21waWxlZC9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9obXIvaG90TW9kdWxlUmVwbGFjZW1lbnQuanNcIikobW9kdWxlLmlkLCB7XCJwdWJsaWNQYXRoXCI6XCIvX25leHQvXCIsXCJlc01vZHVsZVwiOmZhbHNlLFwibG9jYWxzXCI6dHJ1ZX0pO1xuICAgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGNzc1JlbG9hZCk7XG4gICAgICBcbiAgICB9XG4gIFxubW9kdWxlLmV4cG9ydHMuX19jaGVja3N1bSA9IFwiOGNkMzU0NWJlNGIzXCJcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/page.module.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ HomePage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _stack__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/stack */ \"(app-pages-browser)/./src/stack.ts\");\n/* harmony import */ var _stackframe_stack__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @stackframe/stack */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/hooks.js\");\n/* harmony import */ var _components_MathQuiz__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/MathQuiz */ \"(app-pages-browser)/./src/components/MathQuiz.tsx\");\n/* harmony import */ var _components_GrammarHelp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/GrammarHelp */ \"(app-pages-browser)/./src/components/GrammarHelp.tsx\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/link */ \"(app-pages-browser)/./node_modules/next/dist/client/app-dir/link.js\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _page_module_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./page.module.css */ \"(app-pages-browser)/./src/app/page.module.css\");\n/* harmony import */ var _page_module_css__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_page_module_css__WEBPACK_IMPORTED_MODULE_5__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n // Corrected import path\n // Import useUser hook only\n\n\n // Use Next.js Link for navigation\n // Import CSS module\nfunction HomePage() {\n    _s();\n    const user = (0,_stackframe_stack__WEBPACK_IMPORTED_MODULE_6__.useUser)(); // Get user authentication state\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n        className: (_page_module_css__WEBPACK_IMPORTED_MODULE_5___default().main),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (_page_module_css__WEBPACK_IMPORTED_MODULE_5___default().contentArea),\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                    id: \"math-quiz\",\n                    className: (_page_module_css__WEBPACK_IMPORTED_MODULE_5___default().section),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            children: \"Math Quiz\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 18,\n                            columnNumber: 11\n                        }, this),\n                        user ? // User is authenticated\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MathQuiz__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {}, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 21,\n                            columnNumber: 13\n                        }, this) : // User is not authenticated\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            children: [\n                                \"Please \",\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                    href: _stack__WEBPACK_IMPORTED_MODULE_1__.stackClientApp.urls.signIn,\n                                    children: \"sign in\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n                                    lineNumber: 25,\n                                    columnNumber: 22\n                                }, this),\n                                \" to take the quiz.\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 24,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n                    lineNumber: 17,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                    id: \"grammar-help\",\n                    className: (_page_module_css__WEBPACK_IMPORTED_MODULE_5___default().section),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            children: \"Grammar Help\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 32,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_GrammarHelp__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {}, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 35,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n                    lineNumber: 31,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n            lineNumber: 16,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\app\\\\page.tsx\",\n        lineNumber: 14,\n        columnNumber: 5\n    }, this);\n}\n_s(HomePage, \"BPnln+wUpxLjLAxQmw7xYz9C+QI=\", false, function() {\n    return [\n        _stackframe_stack__WEBPACK_IMPORTED_MODULE_6__.useUser\n    ];\n});\n_c = HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBRXlDLENBQUMsd0JBQXdCO0FBQ3RCLENBQUMsMkJBQTJCO0FBQzFCO0FBQ007QUFDdkIsQ0FBQyxrQ0FBa0M7QUFDekIsQ0FBQyxvQkFBb0I7QUFFN0MsU0FBU007O0lBQ3RCLE1BQU1DLE9BQU9OLDBEQUFPQSxJQUFJLGdDQUFnQztJQUV4RCxxQkFDRSw4REFBQ087UUFBS0MsV0FBV0osOERBQVc7a0JBRTFCLDRFQUFDSztZQUFJRCxXQUFXSixxRUFBa0I7OzhCQUNoQyw4REFBQ087b0JBQVFDLElBQUc7b0JBQVlKLFdBQVdKLGlFQUFjOztzQ0FDL0MsOERBQUNTO3NDQUFHOzs7Ozs7d0JBQ0hQLE9BQ0Msd0JBQXdCO3NDQUN4Qiw4REFBQ0wsNERBQVFBOzs7O21DQUVULDRCQUE0QjtzQ0FDNUIsOERBQUNhOztnQ0FBRTs4Q0FDTSw4REFBQ1gsa0RBQUlBO29DQUFDWSxNQUFNaEIsa0RBQWNBLENBQUNpQixJQUFJLENBQUNDLE1BQU07OENBQUU7Ozs7OztnQ0FBYzs7Ozs7Ozs7Ozs7Ozs4QkFNbkUsOERBQUNOO29CQUFRQyxJQUFHO29CQUFlSixXQUFXSixpRUFBYzs7c0NBQ2xELDhEQUFDUztzQ0FBRzs7Ozs7O3NDQUdKLDhEQUFDWCwrREFBV0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLdEI7R0E5QndCRzs7UUFDVEwsc0RBQU9BOzs7S0FERUsiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcc3JjXFxhcHBcXHBhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiOyAvLyBDb21wb25lbnRzIHVzaW5nIGhvb2tzIGxpa2UgdXNlU3RhdGUgb3IgdXNlVXNlciBuZWVkIHRvIGJlIGNsaWVudCBjb21wb25lbnRzXHJcblxyXG5pbXBvcnQgeyBzdGFja0NsaWVudEFwcCB9IGZyb20gXCJAL3N0YWNrXCI7IC8vIENvcnJlY3RlZCBpbXBvcnQgcGF0aFxyXG5pbXBvcnQgeyB1c2VVc2VyIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrXCI7IC8vIEltcG9ydCB1c2VVc2VyIGhvb2sgb25seVxyXG5pbXBvcnQgTWF0aFF1aXogZnJvbSBcIi4uL2NvbXBvbmVudHMvTWF0aFF1aXpcIjtcclxuaW1wb3J0IEdyYW1tYXJIZWxwIGZyb20gXCIuLi9jb21wb25lbnRzL0dyYW1tYXJIZWxwXCI7XHJcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjsgLy8gVXNlIE5leHQuanMgTGluayBmb3IgbmF2aWdhdGlvblxyXG5pbXBvcnQgc3R5bGVzIGZyb20gXCIuL3BhZ2UubW9kdWxlLmNzc1wiOyAvLyBJbXBvcnQgQ1NTIG1vZHVsZVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG9tZVBhZ2UoKSB7XHJcbiAgY29uc3QgdXNlciA9IHVzZVVzZXIoKTsgLy8gR2V0IHVzZXIgYXV0aGVudGljYXRpb24gc3RhdGVcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxtYWluIGNsYXNzTmFtZT17c3R5bGVzLm1haW59PlxyXG4gICAgICB7LyogVGl0bGUgYW5kIFVzZXJCdXR0b24gYXJlIG5vdyBpbiB0aGUgSGVhZGVyIGNvbXBvbmVudCAqL31cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jb250ZW50QXJlYX0+XHJcbiAgICAgICAgPHNlY3Rpb24gaWQ9XCJtYXRoLXF1aXpcIiBjbGFzc05hbWU9e3N0eWxlcy5zZWN0aW9ufT5cclxuICAgICAgICAgIDxoMj5NYXRoIFF1aXo8L2gyPlxyXG4gICAgICAgICAge3VzZXIgPyAoXHJcbiAgICAgICAgICAgIC8vIFVzZXIgaXMgYXV0aGVudGljYXRlZFxyXG4gICAgICAgICAgICA8TWF0aFF1aXogLz5cclxuICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgIC8vIFVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcclxuICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgUGxlYXNlIDxMaW5rIGhyZWY9e3N0YWNrQ2xpZW50QXBwLnVybHMuc2lnbklufT5zaWduIGluPC9MaW5rPiB0b1xyXG4gICAgICAgICAgICAgIHRha2UgdGhlIHF1aXouXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9zZWN0aW9uPlxyXG5cclxuICAgICAgICA8c2VjdGlvbiBpZD1cImdyYW1tYXItaGVscFwiIGNsYXNzTmFtZT17c3R5bGVzLnNlY3Rpb259PlxyXG4gICAgICAgICAgPGgyPkdyYW1tYXIgSGVscDwvaDI+XHJcbiAgICAgICAgICB7LyogR3JhbW1hciBIZWxwIGNvbXBvbmVudCB3aWxsIGdvIGhlcmUgLSBtYXliZSBhbHNvIHJlcXVpcmVzIGF1dGg/ICovfVxyXG4gICAgICAgICAgey8qIEVuc3VyZSBHcmFtbWFySGVscCBpcyBtYXJrZWQgJ3VzZSBjbGllbnQnIGlmIGl0IHVzZXMgaG9va3MgKi99XHJcbiAgICAgICAgICA8R3JhbW1hckhlbHAgLz5cclxuICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9tYWluPlxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInN0YWNrQ2xpZW50QXBwIiwidXNlVXNlciIsIk1hdGhRdWl6IiwiR3JhbW1hckhlbHAiLCJMaW5rIiwic3R5bGVzIiwiSG9tZVBhZ2UiLCJ1c2VyIiwibWFpbiIsImNsYXNzTmFtZSIsImRpdiIsImNvbnRlbnRBcmVhIiwic2VjdGlvbiIsImlkIiwiaDIiLCJwIiwiaHJlZiIsInVybHMiLCJzaWduSW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/components/GrammarHelp.tsx":
/*!****************************************!*\
  !*** ./src/components/GrammarHelp.tsx ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\nconst GrammarHelp = ()=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                children: \"Grammar Assistance\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\GrammarHelp.tsx\",\n                lineNumber: 8,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                children: \"Grammar help functionality is under construction.\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\GrammarHelp.tsx\",\n                lineNumber: 10,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\GrammarHelp.tsx\",\n        lineNumber: 7,\n        columnNumber: 5\n    }, undefined);\n};\n_c = GrammarHelp;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GrammarHelp);\nvar _c;\n$RefreshReg$(_c, \"GrammarHelp\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0dyYW1tYXJIZWxwLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUUwQjtBQUUxQixNQUFNQyxjQUF3QjtJQUM1QixxQkFDRSw4REFBQ0M7OzBCQUNDLDhEQUFDQzswQkFBRzs7Ozs7OzBCQUVKLDhEQUFDQzswQkFBRTs7Ozs7Ozs7Ozs7O0FBR1Q7S0FSTUg7QUFVTixpRUFBZUEsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxzcmNcXGNvbXBvbmVudHNcXEdyYW1tYXJIZWxwLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcclxuXHJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmNvbnN0IEdyYW1tYXJIZWxwOiBSZWFjdC5GQyA9ICgpID0+IHtcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdj5cclxuICAgICAgPGgzPkdyYW1tYXIgQXNzaXN0YW5jZTwvaDM+XHJcbiAgICAgIHsvKiBHcmFtbWFyIGNoZWNraW5nL2V4cGxhbmF0aW9uIGxvZ2ljIHdpbGwgZ28gaGVyZSAqL31cclxuICAgICAgPHA+R3JhbW1hciBoZWxwIGZ1bmN0aW9uYWxpdHkgaXMgdW5kZXIgY29uc3RydWN0aW9uLjwvcD5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHcmFtbWFySGVscDtcclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwiR3JhbW1hckhlbHAiLCJkaXYiLCJoMyIsInAiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/GrammarHelp.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/components/MathQuiz.tsx":
/*!*************************************!*\
  !*** ./src/components/MathQuiz.tsx ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n// Function to generate a random math question\nconst generateQuestion = ()=>{\n    const operand1 = Math.floor(Math.random() * 10) + 1; // Numbers between 1 and 10\n    const operand2 = Math.floor(Math.random() * 10) + 1;\n    const operator = \"+\"; // Only addition for now\n    const correctAnswer = operand1 + operand2;\n    return {\n        operand1,\n        operand2,\n        operator,\n        correctAnswer\n    };\n};\nconst MathQuiz = ()=>{\n    _s();\n    const [currentQuestion, setCurrentQuestion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [userAnswer, setUserAnswer] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [score, setScore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [feedback, setFeedback] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [questionNumber, setQuestionNumber] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0); // Track number of questions answered\n    const totalQuestions = 5; // Let's have 5 questions per quiz\n    // Generate the first question when the component mounts\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MathQuiz.useEffect\": ()=>{\n            startNewQuiz();\n        }\n    }[\"MathQuiz.useEffect\"], []);\n    const startNewQuiz = ()=>{\n        setScore(0);\n        setQuestionNumber(0);\n        setFeedback(\"\");\n        setUserAnswer(\"\");\n        setCurrentQuestion(generateQuestion());\n    };\n    const handleAnswerChange = (event)=>{\n        setUserAnswer(event.target.value);\n        setFeedback(\"\"); // Clear feedback when user types\n    };\n    const handleSubmit = (event)=>{\n        event.preventDefault();\n        if (!currentQuestion) return; // Should not happen if quiz started\n        const answer = parseInt(userAnswer, 10);\n        if (isNaN(answer)) {\n            setFeedback(\"Please enter a valid number.\");\n            return;\n        }\n        if (answer === currentQuestion.correctAnswer) {\n            setScore(score + 1);\n            setFeedback(\"Correct!\");\n        } else {\n            setFeedback(\"Incorrect. The answer was \".concat(currentQuestion.correctAnswer, \".\"));\n        }\n        // Move to the next question or end the quiz\n        const nextQuestionNum = questionNumber + 1;\n        setQuestionNumber(nextQuestionNum);\n        setUserAnswer(\"\"); // Clear input field\n        if (nextQuestionNum < totalQuestions) {\n            // Wait a moment before showing the next question to let user see feedback\n            setTimeout(()=>{\n                setCurrentQuestion(generateQuestion());\n                setFeedback(\"\"); // Clear feedback for the new question\n            }, 1500); // 1.5 second delay\n        } else {\n            // Quiz finished\n            setFeedback(\"Quiz finished! Your score: \".concat(score + (answer === currentQuestion.correctAnswer ? 1 : 0), \"/\").concat(totalQuestions));\n            setCurrentQuestion(null); // Indicate quiz is over\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                children: \"Basic Addition Quiz\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                lineNumber: 93,\n                columnNumber: 7\n            }, undefined),\n            currentQuestion ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                onSubmit: handleSubmit,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: [\n                            \"Question \",\n                            questionNumber + 1,\n                            \" / \",\n                            totalQuestions\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                        lineNumber: 96,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        style: {\n                            fontSize: \"1.5em\",\n                            margin: \"1rem 0\"\n                        },\n                        children: [\n                            currentQuestion.operand1,\n                            \" \",\n                            currentQuestion.operator,\n                            \" \",\n                            currentQuestion.operand2,\n                            \" = ?\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                        lineNumber: 99,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"number\",\n                        value: userAnswer,\n                        onChange: handleAnswerChange,\n                        required: true,\n                        autoFocus: true\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                        lineNumber: 103,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"submit\",\n                        style: {\n                            marginLeft: \"0.5rem\"\n                        },\n                        children: \"Submit\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                        lineNumber: 110,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                lineNumber: 95,\n                columnNumber: 9\n            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                children: \"Loading quiz...\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                lineNumber: 115,\n                columnNumber: 9\n            }, undefined) // Initial state or after finishing\n            ,\n            feedback && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                style: {\n                    marginTop: \"1rem\",\n                    fontWeight: \"bold\"\n                },\n                children: feedback\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                lineNumber: 118,\n                columnNumber: 9\n            }, undefined),\n            !currentQuestion && questionNumber >= totalQuestions && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: [\n                            \"Final Score: \",\n                            score,\n                            \"/\",\n                            totalQuestions\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                        lineNumber: 123,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: startNewQuiz,\n                        style: {\n                            marginTop: \"1rem\"\n                        },\n                        children: \"Start New Quiz\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                        lineNumber: 126,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n                lineNumber: 122,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\apgau\\\\OneDrive\\\\Desktop\\\\education-website\\\\src\\\\components\\\\MathQuiz.tsx\",\n        lineNumber: 92,\n        columnNumber: 5\n    }, undefined);\n};\n_s(MathQuiz, \"4Vej/FI34qOK7+BwUQSvMHKgVyA=\");\n_c = MathQuiz;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MathQuiz);\nvar _c;\n$RefreshReg$(_c, \"MathQuiz\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL01hdGhRdWl6LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFbUQ7QUFVbkQsOENBQThDO0FBQzlDLE1BQU1HLG1CQUFtQjtJQUN2QixNQUFNQyxXQUFXQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBSyxNQUFNLEdBQUcsMkJBQTJCO0lBQ2hGLE1BQU1DLFdBQVdILEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLLE1BQU07SUFDbEQsTUFBTUUsV0FBVyxLQUFLLHdCQUF3QjtJQUM5QyxNQUFNQyxnQkFBZ0JOLFdBQVdJO0lBQ2pDLE9BQU87UUFBRUo7UUFBVUk7UUFBVUM7UUFBVUM7SUFBYztBQUN2RDtBQUVBLE1BQU1DLFdBQXFCOztJQUN6QixNQUFNLENBQUNDLGlCQUFpQkMsbUJBQW1CLEdBQUdaLCtDQUFRQSxDQUNwRDtJQUVGLE1BQU0sQ0FBQ2EsWUFBWUMsY0FBYyxHQUFHZCwrQ0FBUUEsQ0FBUztJQUNyRCxNQUFNLENBQUNlLE9BQU9DLFNBQVMsR0FBR2hCLCtDQUFRQSxDQUFTO0lBQzNDLE1BQU0sQ0FBQ2lCLFVBQVVDLFlBQVksR0FBR2xCLCtDQUFRQSxDQUFTO0lBQ2pELE1BQU0sQ0FBQ21CLGdCQUFnQkMsa0JBQWtCLEdBQUdwQiwrQ0FBUUEsQ0FBUyxJQUFJLHFDQUFxQztJQUN0RyxNQUFNcUIsaUJBQWlCLEdBQUcsa0NBQWtDO0lBRTVELHdEQUF3RDtJQUN4RHBCLGdEQUFTQTs4QkFBQztZQUNScUI7UUFDRjs2QkFBRyxFQUFFO0lBRUwsTUFBTUEsZUFBZTtRQUNuQk4sU0FBUztRQUNUSSxrQkFBa0I7UUFDbEJGLFlBQVk7UUFDWkosY0FBYztRQUNkRixtQkFBbUJWO0lBQ3JCO0lBRUEsTUFBTXFCLHFCQUFxQixDQUFDQztRQUMxQlYsY0FBY1UsTUFBTUMsTUFBTSxDQUFDQyxLQUFLO1FBQ2hDUixZQUFZLEtBQUssaUNBQWlDO0lBQ3BEO0lBRUEsTUFBTVMsZUFBZSxDQUFDSDtRQUNwQkEsTUFBTUksY0FBYztRQUNwQixJQUFJLENBQUNqQixpQkFBaUIsUUFBUSxvQ0FBb0M7UUFFbEUsTUFBTWtCLFNBQVNDLFNBQVNqQixZQUFZO1FBQ3BDLElBQUlrQixNQUFNRixTQUFTO1lBQ2pCWCxZQUFZO1lBQ1o7UUFDRjtRQUVBLElBQUlXLFdBQVdsQixnQkFBZ0JGLGFBQWEsRUFBRTtZQUM1Q08sU0FBU0QsUUFBUTtZQUNqQkcsWUFBWTtRQUNkLE9BQU87WUFDTEEsWUFDRSw2QkFBMkQsT0FBOUJQLGdCQUFnQkYsYUFBYSxFQUFDO1FBRS9EO1FBRUEsNENBQTRDO1FBQzVDLE1BQU11QixrQkFBa0JiLGlCQUFpQjtRQUN6Q0Msa0JBQWtCWTtRQUNsQmxCLGNBQWMsS0FBSyxvQkFBb0I7UUFFdkMsSUFBSWtCLGtCQUFrQlgsZ0JBQWdCO1lBQ3BDLDBFQUEwRTtZQUMxRVksV0FBVztnQkFDVHJCLG1CQUFtQlY7Z0JBQ25CZ0IsWUFBWSxLQUFLLHNDQUFzQztZQUN6RCxHQUFHLE9BQU8sbUJBQW1CO1FBQy9CLE9BQU87WUFDTCxnQkFBZ0I7WUFDaEJBLFlBQ0UsOEJBRUlHLE9BREZOLFFBQVNjLENBQUFBLFdBQVdsQixnQkFBZ0JGLGFBQWEsR0FBRyxJQUFJLElBQ3pELEtBQWtCLE9BQWZZO1lBRU5ULG1CQUFtQixPQUFPLHdCQUF3QjtRQUNwRDtJQUNGO0lBRUEscUJBQ0UsOERBQUNzQjs7MEJBQ0MsOERBQUNDOzBCQUFHOzs7Ozs7WUFDSHhCLGdDQUNDLDhEQUFDeUI7Z0JBQUtDLFVBQVVWOztrQ0FDZCw4REFBQ1c7OzRCQUFFOzRCQUNTbkIsaUJBQWlCOzRCQUFFOzRCQUFJRTs7Ozs7OztrQ0FFbkMsOERBQUNpQjt3QkFBRUMsT0FBTzs0QkFBRUMsVUFBVTs0QkFBU0MsUUFBUTt3QkFBUzs7NEJBQzdDOUIsZ0JBQWdCUixRQUFROzRCQUFDOzRCQUFFUSxnQkFBZ0JILFFBQVE7NEJBQUU7NEJBQ3JERyxnQkFBZ0JKLFFBQVE7NEJBQUM7Ozs7Ozs7a0NBRTVCLDhEQUFDbUM7d0JBQ0NDLE1BQUs7d0JBQ0xqQixPQUFPYjt3QkFDUCtCLFVBQVVyQjt3QkFDVnNCLFFBQVE7d0JBQ1JDLFNBQVM7Ozs7OztrQ0FFWCw4REFBQ0M7d0JBQU9KLE1BQUs7d0JBQVNKLE9BQU87NEJBQUVTLFlBQVk7d0JBQVM7a0NBQUc7Ozs7Ozs7Ozs7OzBDQUt6RCw4REFBQ1Y7MEJBQUU7Ozs7OzBCQUFvQixtQ0FBbUM7O1lBRTNEckIsMEJBQ0MsOERBQUNxQjtnQkFBRUMsT0FBTztvQkFBRVUsV0FBVztvQkFBUUMsWUFBWTtnQkFBTzswQkFBSWpDOzs7Ozs7WUFHdkQsQ0FBQ04sbUJBQW1CUSxrQkFBa0JFLGdDQUNyQyw4REFBQ2E7O2tDQUNDLDhEQUFDSTs7NEJBQUU7NEJBQ2F2Qjs0QkFBTTs0QkFBRU07Ozs7Ozs7a0NBRXhCLDhEQUFDMEI7d0JBQU9JLFNBQVM3Qjt3QkFBY2lCLE9BQU87NEJBQUVVLFdBQVc7d0JBQU87a0NBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU92RTtHQS9HTXZDO0tBQUFBO0FBaUhOLGlFQUFlQSxRQUFRQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXHNyY1xcY29tcG9uZW50c1xcTWF0aFF1aXoudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xyXG5cclxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbi8vIERlZmluZSB0aGUgc3RydWN0dXJlIGZvciBhIG1hdGggcXVlc3Rpb25cclxuaW50ZXJmYWNlIE1hdGhRdWVzdGlvbiB7XHJcbiAgb3BlcmFuZDE6IG51bWJlcjtcclxuICBvcGVyYW5kMjogbnVtYmVyO1xyXG4gIG9wZXJhdG9yOiBcIitcIjsgLy8gRm9yIG5vdywgb25seSBhZGRpdGlvblxyXG4gIGNvcnJlY3RBbnN3ZXI6IG51bWJlcjtcclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdG8gZ2VuZXJhdGUgYSByYW5kb20gbWF0aCBxdWVzdGlvblxyXG5jb25zdCBnZW5lcmF0ZVF1ZXN0aW9uID0gKCk6IE1hdGhRdWVzdGlvbiA9PiB7XHJcbiAgY29uc3Qgb3BlcmFuZDEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxOyAvLyBOdW1iZXJzIGJldHdlZW4gMSBhbmQgMTBcclxuICBjb25zdCBvcGVyYW5kMiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSArIDE7XHJcbiAgY29uc3Qgb3BlcmF0b3IgPSBcIitcIjsgLy8gT25seSBhZGRpdGlvbiBmb3Igbm93XHJcbiAgY29uc3QgY29ycmVjdEFuc3dlciA9IG9wZXJhbmQxICsgb3BlcmFuZDI7XHJcbiAgcmV0dXJuIHsgb3BlcmFuZDEsIG9wZXJhbmQyLCBvcGVyYXRvciwgY29ycmVjdEFuc3dlciB9O1xyXG59O1xyXG5cclxuY29uc3QgTWF0aFF1aXo6IFJlYWN0LkZDID0gKCkgPT4ge1xyXG4gIGNvbnN0IFtjdXJyZW50UXVlc3Rpb24sIHNldEN1cnJlbnRRdWVzdGlvbl0gPSB1c2VTdGF0ZTxNYXRoUXVlc3Rpb24gfCBudWxsPihcclxuICAgIG51bGxcclxuICApO1xyXG4gIGNvbnN0IFt1c2VyQW5zd2VyLCBzZXRVc2VyQW5zd2VyXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XHJcbiAgY29uc3QgW3Njb3JlLCBzZXRTY29yZV0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xyXG4gIGNvbnN0IFtmZWVkYmFjaywgc2V0RmVlZGJhY2tdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcclxuICBjb25zdCBbcXVlc3Rpb25OdW1iZXIsIHNldFF1ZXN0aW9uTnVtYmVyXSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7IC8vIFRyYWNrIG51bWJlciBvZiBxdWVzdGlvbnMgYW5zd2VyZWRcclxuICBjb25zdCB0b3RhbFF1ZXN0aW9ucyA9IDU7IC8vIExldCdzIGhhdmUgNSBxdWVzdGlvbnMgcGVyIHF1aXpcclxuXHJcbiAgLy8gR2VuZXJhdGUgdGhlIGZpcnN0IHF1ZXN0aW9uIHdoZW4gdGhlIGNvbXBvbmVudCBtb3VudHNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgc3RhcnROZXdRdWl6KCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBzdGFydE5ld1F1aXogPSAoKSA9PiB7XHJcbiAgICBzZXRTY29yZSgwKTtcclxuICAgIHNldFF1ZXN0aW9uTnVtYmVyKDApO1xyXG4gICAgc2V0RmVlZGJhY2soXCJcIik7XHJcbiAgICBzZXRVc2VyQW5zd2VyKFwiXCIpO1xyXG4gICAgc2V0Q3VycmVudFF1ZXN0aW9uKGdlbmVyYXRlUXVlc3Rpb24oKSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQW5zd2VyQ2hhbmdlID0gKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xyXG4gICAgc2V0VXNlckFuc3dlcihldmVudC50YXJnZXQudmFsdWUpO1xyXG4gICAgc2V0RmVlZGJhY2soXCJcIik7IC8vIENsZWFyIGZlZWRiYWNrIHdoZW4gdXNlciB0eXBlc1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IChldmVudDogUmVhY3QuRm9ybUV2ZW50PEhUTUxGb3JtRWxlbWVudD4pID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoIWN1cnJlbnRRdWVzdGlvbikgcmV0dXJuOyAvLyBTaG91bGQgbm90IGhhcHBlbiBpZiBxdWl6IHN0YXJ0ZWRcclxuXHJcbiAgICBjb25zdCBhbnN3ZXIgPSBwYXJzZUludCh1c2VyQW5zd2VyLCAxMCk7XHJcbiAgICBpZiAoaXNOYU4oYW5zd2VyKSkge1xyXG4gICAgICBzZXRGZWVkYmFjayhcIlBsZWFzZSBlbnRlciBhIHZhbGlkIG51bWJlci5cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYW5zd2VyID09PSBjdXJyZW50UXVlc3Rpb24uY29ycmVjdEFuc3dlcikge1xyXG4gICAgICBzZXRTY29yZShzY29yZSArIDEpO1xyXG4gICAgICBzZXRGZWVkYmFjayhcIkNvcnJlY3QhXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0RmVlZGJhY2soXHJcbiAgICAgICAgYEluY29ycmVjdC4gVGhlIGFuc3dlciB3YXMgJHtjdXJyZW50UXVlc3Rpb24uY29ycmVjdEFuc3dlcn0uYFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1vdmUgdG8gdGhlIG5leHQgcXVlc3Rpb24gb3IgZW5kIHRoZSBxdWl6XHJcbiAgICBjb25zdCBuZXh0UXVlc3Rpb25OdW0gPSBxdWVzdGlvbk51bWJlciArIDE7XHJcbiAgICBzZXRRdWVzdGlvbk51bWJlcihuZXh0UXVlc3Rpb25OdW0pO1xyXG4gICAgc2V0VXNlckFuc3dlcihcIlwiKTsgLy8gQ2xlYXIgaW5wdXQgZmllbGRcclxuXHJcbiAgICBpZiAobmV4dFF1ZXN0aW9uTnVtIDwgdG90YWxRdWVzdGlvbnMpIHtcclxuICAgICAgLy8gV2FpdCBhIG1vbWVudCBiZWZvcmUgc2hvd2luZyB0aGUgbmV4dCBxdWVzdGlvbiB0byBsZXQgdXNlciBzZWUgZmVlZGJhY2tcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgc2V0Q3VycmVudFF1ZXN0aW9uKGdlbmVyYXRlUXVlc3Rpb24oKSk7XHJcbiAgICAgICAgc2V0RmVlZGJhY2soXCJcIik7IC8vIENsZWFyIGZlZWRiYWNrIGZvciB0aGUgbmV3IHF1ZXN0aW9uXHJcbiAgICAgIH0sIDE1MDApOyAvLyAxLjUgc2Vjb25kIGRlbGF5XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBRdWl6IGZpbmlzaGVkXHJcbiAgICAgIHNldEZlZWRiYWNrKFxyXG4gICAgICAgIGBRdWl6IGZpbmlzaGVkISBZb3VyIHNjb3JlOiAke1xyXG4gICAgICAgICAgc2NvcmUgKyAoYW5zd2VyID09PSBjdXJyZW50UXVlc3Rpb24uY29ycmVjdEFuc3dlciA/IDEgOiAwKVxyXG4gICAgICAgIH0vJHt0b3RhbFF1ZXN0aW9uc31gXHJcbiAgICAgICk7XHJcbiAgICAgIHNldEN1cnJlbnRRdWVzdGlvbihudWxsKTsgLy8gSW5kaWNhdGUgcXVpeiBpcyBvdmVyXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXY+XHJcbiAgICAgIDxoMz5CYXNpYyBBZGRpdGlvbiBRdWl6PC9oMz5cclxuICAgICAge2N1cnJlbnRRdWVzdGlvbiA/IChcclxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cclxuICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICBRdWVzdGlvbiB7cXVlc3Rpb25OdW1iZXIgKyAxfSAvIHt0b3RhbFF1ZXN0aW9uc31cclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDxwIHN0eWxlPXt7IGZvbnRTaXplOiBcIjEuNWVtXCIsIG1hcmdpbjogXCIxcmVtIDBcIiB9fT5cclxuICAgICAgICAgICAge2N1cnJlbnRRdWVzdGlvbi5vcGVyYW5kMX0ge2N1cnJlbnRRdWVzdGlvbi5vcGVyYXRvcn17XCIgXCJ9XHJcbiAgICAgICAgICAgIHtjdXJyZW50UXVlc3Rpb24ub3BlcmFuZDJ9ID0gP1xyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICB2YWx1ZT17dXNlckFuc3dlcn1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUFuc3dlckNoYW5nZX1cclxuICAgICAgICAgICAgcmVxdWlyZWRcclxuICAgICAgICAgICAgYXV0b0ZvY3VzIC8vIEZvY3VzIHRoZSBpbnB1dCBmaWVsZCBhdXRvbWF0aWNhbGx5XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgc3R5bGU9e3sgbWFyZ2luTGVmdDogXCIwLjVyZW1cIiB9fT5cclxuICAgICAgICAgICAgU3VibWl0XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICkgOiAoXHJcbiAgICAgICAgPHA+TG9hZGluZyBxdWl6Li4uPC9wPiAvLyBJbml0aWFsIHN0YXRlIG9yIGFmdGVyIGZpbmlzaGluZ1xyXG4gICAgICApfVxyXG4gICAgICB7ZmVlZGJhY2sgJiYgKFxyXG4gICAgICAgIDxwIHN0eWxlPXt7IG1hcmdpblRvcDogXCIxcmVtXCIsIGZvbnRXZWlnaHQ6IFwiYm9sZFwiIH19PntmZWVkYmFja308L3A+XHJcbiAgICAgICl9XHJcbiAgICAgIHsvKiBTaG93IHNjb3JlIG9ubHkgYWZ0ZXIgcXVpeiBpcyBmaW5pc2hlZCAqL31cclxuICAgICAgeyFjdXJyZW50UXVlc3Rpb24gJiYgcXVlc3Rpb25OdW1iZXIgPj0gdG90YWxRdWVzdGlvbnMgJiYgKFxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgRmluYWwgU2NvcmU6IHtzY29yZX0ve3RvdGFsUXVlc3Rpb25zfVxyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtzdGFydE5ld1F1aXp9IHN0eWxlPXt7IG1hcmdpblRvcDogXCIxcmVtXCIgfX0+XHJcbiAgICAgICAgICAgIFN0YXJ0IE5ldyBRdWl6XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNYXRoUXVpejtcclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJnZW5lcmF0ZVF1ZXN0aW9uIiwib3BlcmFuZDEiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJvcGVyYW5kMiIsIm9wZXJhdG9yIiwiY29ycmVjdEFuc3dlciIsIk1hdGhRdWl6IiwiY3VycmVudFF1ZXN0aW9uIiwic2V0Q3VycmVudFF1ZXN0aW9uIiwidXNlckFuc3dlciIsInNldFVzZXJBbnN3ZXIiLCJzY29yZSIsInNldFNjb3JlIiwiZmVlZGJhY2siLCJzZXRGZWVkYmFjayIsInF1ZXN0aW9uTnVtYmVyIiwic2V0UXVlc3Rpb25OdW1iZXIiLCJ0b3RhbFF1ZXN0aW9ucyIsInN0YXJ0TmV3UXVpeiIsImhhbmRsZUFuc3dlckNoYW5nZSIsImV2ZW50IiwidGFyZ2V0IiwidmFsdWUiLCJoYW5kbGVTdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsImFuc3dlciIsInBhcnNlSW50IiwiaXNOYU4iLCJuZXh0UXVlc3Rpb25OdW0iLCJzZXRUaW1lb3V0IiwiZGl2IiwiaDMiLCJmb3JtIiwib25TdWJtaXQiLCJwIiwic3R5bGUiLCJmb250U2l6ZSIsIm1hcmdpbiIsImlucHV0IiwidHlwZSIsIm9uQ2hhbmdlIiwicmVxdWlyZWQiLCJhdXRvRm9jdXMiLCJidXR0b24iLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwiZm9udFdlaWdodCIsIm9uQ2xpY2siXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/MathQuiz.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/stack.ts":
/*!**********************!*\
  !*** ./src/stack.ts ***!
  \**********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stackClientApp: () => (/* binding */ stackClientApp),\n/* harmony export */   stackServerApp: () => (/* binding */ stackServerApp)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack */ \"(app-pages-browser)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app/apps/interfaces/client-app.js\");\n\nif (false) {}\n// Initialize and export the Client App\nconst stackClientApp = new _stackframe_stack__WEBPACK_IMPORTED_MODULE_0__.StackClientApp({\n    publishableClientKey: \"pck_0b4d3xze5mgp06cgr16xe761fge2j7xhfwsheya2mxt1g\",\n    tokenStore: \"memory\"\n});\n// Initialize Server App conditionally\nlet stackServerApp = null;\nif (false) {}\n// Export the potentially null server app. Consumers must handle the null case or ensure it's only used server-side.\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zdGFjay50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUU7QUFFbkUsSUFBSSxLQUFxRCxFQUFFLEVBSTFEO0FBRUQsdUNBQXVDO0FBQ2hDLE1BQU1NLGlCQUFpQixJQUFJTCw2REFBY0EsQ0FBQztJQUMvQ00sc0JBQXNCTCxtREFBb0Q7SUFDMUVNLFlBQVk7QUFFZCxHQUFHO0FBRUgsc0NBQXNDO0FBQ3RDLElBQUlDLGlCQUF3QztBQUU1QyxJQUFJLEtBQTZCLEVBQUUsRUFZbEM7QUFFRCxvSEFBb0g7QUFDMUYiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcc3JjXFxzdGFjay50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGFja1NlcnZlckFwcCwgU3RhY2tDbGllbnRBcHAgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2tcIjtcclxuXHJcbmlmICghcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1RBQ0tfUFVCTElTSEFCTEVfQ0xJRU5UX0tFWSkge1xyXG4gIHRocm93IG5ldyBFcnJvcihcclxuICAgIFwiTkVYVF9QVUJMSUNfU1RBQ0tfUFVCTElTSEFCTEVfQ0xJRU5UX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBub3Qgc2V0LlwiXHJcbiAgKTtcclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSBhbmQgZXhwb3J0IHRoZSBDbGllbnQgQXBwXHJcbmV4cG9ydCBjb25zdCBzdGFja0NsaWVudEFwcCA9IG5ldyBTdGFja0NsaWVudEFwcCh7XHJcbiAgcHVibGlzaGFibGVDbGllbnRLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NUQUNLX1BVQkxJU0hBQkxFX0NMSUVOVF9LRVksXHJcbiAgdG9rZW5TdG9yZTogXCJtZW1vcnlcIixcclxuICAvLyBhcGlVcmwgaXMgTk9UIGEgZGlyZWN0IGNvbmZpZyBvcHRpb24gaGVyZVxyXG59KTtcclxuXHJcbi8vIEluaXRpYWxpemUgU2VydmVyIEFwcCBjb25kaXRpb25hbGx5XHJcbmxldCBzdGFja1NlcnZlckFwcDogU3RhY2tTZXJ2ZXJBcHAgfCBudWxsID0gbnVsbDtcclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgaWYgKCFwcm9jZXNzLmVudi5TVEFDS19TRUNSRVRfU0VSVkVSX0tFWSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU1RBQ0tfU0VDUkVUX1NFUlZFUl9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbm90IHNldC5cIik7XHJcbiAgfVxyXG5cclxuICAvLyBJbml0aWFsaXplIGFuZCBwb3RlbnRpYWxseSBleHBvcnQgdGhlIFNlcnZlciBBcHAgb25seSBvbiB0aGUgc2VydmVyXHJcbiAgc3RhY2tTZXJ2ZXJBcHAgPSBuZXcgU3RhY2tTZXJ2ZXJBcHAoe1xyXG4gICAgdG9rZW5TdG9yZTogXCJtZW1vcnlcIixcclxuICAgIHB1Ymxpc2hhYmxlQ2xpZW50S2V5OiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVEFDS19QVUJMSVNIQUJMRV9DTElFTlRfS0VZLFxyXG4gICAgc2VjcmV0U2VydmVyS2V5OiBwcm9jZXNzLmVudi5TVEFDS19TRUNSRVRfU0VSVkVSX0tFWSxcclxuICAgIC8vIGFwaVVybCBpcyBOT1QgYSBkaXJlY3QgY29uZmlnIG9wdGlvbiBoZXJlXHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vIEV4cG9ydCB0aGUgcG90ZW50aWFsbHkgbnVsbCBzZXJ2ZXIgYXBwLiBDb25zdW1lcnMgbXVzdCBoYW5kbGUgdGhlIG51bGwgY2FzZSBvciBlbnN1cmUgaXQncyBvbmx5IHVzZWQgc2VydmVyLXNpZGUuXHJcbmV4cG9ydCB7IHN0YWNrU2VydmVyQXBwIH07XHJcbiJdLCJuYW1lcyI6WyJTdGFja1NlcnZlckFwcCIsIlN0YWNrQ2xpZW50QXBwIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NUQUNLX1BVQkxJU0hBQkxFX0NMSUVOVF9LRVkiLCJFcnJvciIsInN0YWNrQ2xpZW50QXBwIiwicHVibGlzaGFibGVDbGllbnRLZXkiLCJ0b2tlblN0b3JlIiwic3RhY2tTZXJ2ZXJBcHAiLCJTVEFDS19TRUNSRVRfU0VSVkVSX0tFWSIsInNlY3JldFNlcnZlcktleSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/stack.ts\n"));

/***/ }),

/***/ "(shared)/./node_modules/next/dist/client/components/app-router-headers.js":
/*!************************************************************************!*\
  !*** ./node_modules/next/dist/client/components/app-router-headers.js ***!
  \************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    ACTION_HEADER: function() {\n        return ACTION_HEADER;\n    },\n    FLIGHT_HEADERS: function() {\n        return FLIGHT_HEADERS;\n    },\n    NEXT_DID_POSTPONE_HEADER: function() {\n        return NEXT_DID_POSTPONE_HEADER;\n    },\n    NEXT_HMR_REFRESH_HASH_COOKIE: function() {\n        return NEXT_HMR_REFRESH_HASH_COOKIE;\n    },\n    NEXT_HMR_REFRESH_HEADER: function() {\n        return NEXT_HMR_REFRESH_HEADER;\n    },\n    NEXT_IS_PRERENDER_HEADER: function() {\n        return NEXT_IS_PRERENDER_HEADER;\n    },\n    NEXT_REWRITTEN_PATH_HEADER: function() {\n        return NEXT_REWRITTEN_PATH_HEADER;\n    },\n    NEXT_REWRITTEN_QUERY_HEADER: function() {\n        return NEXT_REWRITTEN_QUERY_HEADER;\n    },\n    NEXT_ROUTER_PREFETCH_HEADER: function() {\n        return NEXT_ROUTER_PREFETCH_HEADER;\n    },\n    NEXT_ROUTER_SEGMENT_PREFETCH_HEADER: function() {\n        return NEXT_ROUTER_SEGMENT_PREFETCH_HEADER;\n    },\n    NEXT_ROUTER_STALE_TIME_HEADER: function() {\n        return NEXT_ROUTER_STALE_TIME_HEADER;\n    },\n    NEXT_ROUTER_STATE_TREE_HEADER: function() {\n        return NEXT_ROUTER_STATE_TREE_HEADER;\n    },\n    NEXT_RSC_UNION_QUERY: function() {\n        return NEXT_RSC_UNION_QUERY;\n    },\n    NEXT_URL: function() {\n        return NEXT_URL;\n    },\n    RSC_CONTENT_TYPE_HEADER: function() {\n        return RSC_CONTENT_TYPE_HEADER;\n    },\n    RSC_HEADER: function() {\n        return RSC_HEADER;\n    }\n});\nconst RSC_HEADER = 'RSC';\nconst ACTION_HEADER = 'Next-Action';\nconst NEXT_ROUTER_STATE_TREE_HEADER = 'Next-Router-State-Tree';\nconst NEXT_ROUTER_PREFETCH_HEADER = 'Next-Router-Prefetch';\nconst NEXT_ROUTER_SEGMENT_PREFETCH_HEADER = 'Next-Router-Segment-Prefetch';\nconst NEXT_HMR_REFRESH_HEADER = 'Next-HMR-Refresh';\nconst NEXT_HMR_REFRESH_HASH_COOKIE = '__next_hmr_refresh_hash__';\nconst NEXT_URL = 'Next-Url';\nconst RSC_CONTENT_TYPE_HEADER = 'text/x-component';\nconst FLIGHT_HEADERS = [\n    RSC_HEADER,\n    NEXT_ROUTER_STATE_TREE_HEADER,\n    NEXT_ROUTER_PREFETCH_HEADER,\n    NEXT_HMR_REFRESH_HEADER,\n    NEXT_ROUTER_SEGMENT_PREFETCH_HEADER\n];\nconst NEXT_RSC_UNION_QUERY = '_rsc';\nconst NEXT_ROUTER_STALE_TIME_HEADER = 'x-nextjs-stale-time';\nconst NEXT_DID_POSTPONE_HEADER = 'x-nextjs-postponed';\nconst NEXT_REWRITTEN_PATH_HEADER = 'x-nextjs-rewritten-path';\nconst NEXT_REWRITTEN_QUERY_HEADER = 'x-nextjs-rewritten-query';\nconst NEXT_IS_PRERENDER_HEADER = 'x-nextjs-prerender';\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n    Object.defineProperty(exports.default, '__esModule', {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=app-router-headers.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNoYXJlZCkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2FwcC1yb3V0ZXItaGVhZGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUFDYUEsYUFBYTtlQUFiQTs7SUFpQkFDLGNBQWM7ZUFBZEE7O0lBV0FDLHdCQUF3QjtlQUF4QkE7O0lBZkFDLDRCQUE0QjtlQUE1QkE7O0lBREFDLHVCQUF1QjtlQUF2QkE7O0lBbUJBQyx3QkFBd0I7ZUFBeEJBOztJQUZBQywwQkFBMEI7ZUFBMUJBOztJQUNBQywyQkFBMkI7ZUFBM0JBOztJQXpCQUMsMkJBQTJCO2VBQTNCQTs7SUFLQUMsbUNBQW1DO2VBQW5DQTs7SUFpQkFDLDZCQUE2QjtlQUE3QkE7O0lBdkJBQyw2QkFBNkI7ZUFBN0JBOztJQXFCQUMsb0JBQW9CO2VBQXBCQTs7SUFYQUMsUUFBUTtlQUFSQTs7SUFDQUMsdUJBQXVCO2VBQXZCQTs7SUFoQkFDLFVBQVU7ZUFBVkE7OztBQUFOLE1BQU1BLGFBQWE7QUFDbkIsTUFBTWYsZ0JBQWdCO0FBSXRCLE1BQU1XLGdDQUFnQztBQUN0QyxNQUFNSCw4QkFBOEI7QUFLcEMsTUFBTUMsc0NBQ1g7QUFDSyxNQUFNTCwwQkFBMEI7QUFDaEMsTUFBTUQsK0JBQStCO0FBQ3JDLE1BQU1VLFdBQVc7QUFDakIsTUFBTUMsMEJBQTBCO0FBRWhDLE1BQU1iLGlCQUFpQjtJQUM1QmM7SUFDQUo7SUFDQUg7SUFDQUo7SUFDQUs7Q0FDRDtBQUVNLE1BQU1HLHVCQUF1QjtBQUU3QixNQUFNRixnQ0FBZ0M7QUFDdEMsTUFBTVIsMkJBQTJCO0FBQ2pDLE1BQU1JLDZCQUE2QjtBQUNuQyxNQUFNQyw4QkFBOEI7QUFDcEMsTUFBTUYsMkJBQTJCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxzcmNcXGNsaWVudFxcY29tcG9uZW50c1xcYXBwLXJvdXRlci1oZWFkZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBSU0NfSEVBREVSID0gJ1JTQycgYXMgY29uc3RcbmV4cG9ydCBjb25zdCBBQ1RJT05fSEVBREVSID0gJ05leHQtQWN0aW9uJyBhcyBjb25zdFxuLy8gVE9ETzogSW5zdGVhZCBvZiBzZW5kaW5nIHRoZSBmdWxsIHJvdXRlciBzdGF0ZSwgd2Ugb25seSBuZWVkIHRvIHNlbmQgdGhlXG4vLyBzZWdtZW50IHBhdGguIFNhdmVzIGJ5dGVzLiBUaGVuIHdlIGNvdWxkIGFsc28gdXNlIHRoaXMgZmllbGQgZm9yIHNlZ21lbnRcbi8vIHByZWZldGNoZXMsIHdoaWNoIGFsc28gbmVlZCB0byBzcGVjaWZ5IGEgcGFydGljdWxhciBzZWdtZW50LlxuZXhwb3J0IGNvbnN0IE5FWFRfUk9VVEVSX1NUQVRFX1RSRUVfSEVBREVSID0gJ05leHQtUm91dGVyLVN0YXRlLVRyZWUnIGFzIGNvbnN0XG5leHBvcnQgY29uc3QgTkVYVF9ST1VURVJfUFJFRkVUQ0hfSEVBREVSID0gJ05leHQtUm91dGVyLVByZWZldGNoJyBhcyBjb25zdFxuLy8gVGhpcyBjb250YWlucyB0aGUgcGF0aCB0byB0aGUgc2VnbWVudCBiZWluZyBwcmVmZXRjaGVkLlxuLy8gVE9ETzogSWYgd2UgY2hhbmdlIE5leHQtUm91dGVyLVN0YXRlLVRyZWUgdG8gYmUgYSBzZWdtZW50IHBhdGgsIHdlIGNhbiB1c2Vcbi8vIHRoYXQgaW5zdGVhZC4gVGhlbiBOZXh0LVJvdXRlci1QcmVmZXRjaCBhbmQgTmV4dC1Sb3V0ZXItU2VnbWVudC1QcmVmZXRjaCBjYW5cbi8vIGJlIG1lcmdlZCBpbnRvIGEgc2luZ2xlIGVudW0uXG5leHBvcnQgY29uc3QgTkVYVF9ST1VURVJfU0VHTUVOVF9QUkVGRVRDSF9IRUFERVIgPVxuICAnTmV4dC1Sb3V0ZXItU2VnbWVudC1QcmVmZXRjaCcgYXMgY29uc3RcbmV4cG9ydCBjb25zdCBORVhUX0hNUl9SRUZSRVNIX0hFQURFUiA9ICdOZXh0LUhNUi1SZWZyZXNoJyBhcyBjb25zdFxuZXhwb3J0IGNvbnN0IE5FWFRfSE1SX1JFRlJFU0hfSEFTSF9DT09LSUUgPSAnX19uZXh0X2htcl9yZWZyZXNoX2hhc2hfXycgYXMgY29uc3RcbmV4cG9ydCBjb25zdCBORVhUX1VSTCA9ICdOZXh0LVVybCcgYXMgY29uc3RcbmV4cG9ydCBjb25zdCBSU0NfQ09OVEVOVF9UWVBFX0hFQURFUiA9ICd0ZXh0L3gtY29tcG9uZW50JyBhcyBjb25zdFxuXG5leHBvcnQgY29uc3QgRkxJR0hUX0hFQURFUlMgPSBbXG4gIFJTQ19IRUFERVIsXG4gIE5FWFRfUk9VVEVSX1NUQVRFX1RSRUVfSEVBREVSLFxuICBORVhUX1JPVVRFUl9QUkVGRVRDSF9IRUFERVIsXG4gIE5FWFRfSE1SX1JFRlJFU0hfSEVBREVSLFxuICBORVhUX1JPVVRFUl9TRUdNRU5UX1BSRUZFVENIX0hFQURFUixcbl0gYXMgY29uc3RcblxuZXhwb3J0IGNvbnN0IE5FWFRfUlNDX1VOSU9OX1FVRVJZID0gJ19yc2MnIGFzIGNvbnN0XG5cbmV4cG9ydCBjb25zdCBORVhUX1JPVVRFUl9TVEFMRV9USU1FX0hFQURFUiA9ICd4LW5leHRqcy1zdGFsZS10aW1lJyBhcyBjb25zdFxuZXhwb3J0IGNvbnN0IE5FWFRfRElEX1BPU1RQT05FX0hFQURFUiA9ICd4LW5leHRqcy1wb3N0cG9uZWQnIGFzIGNvbnN0XG5leHBvcnQgY29uc3QgTkVYVF9SRVdSSVRURU5fUEFUSF9IRUFERVIgPSAneC1uZXh0anMtcmV3cml0dGVuLXBhdGgnIGFzIGNvbnN0XG5leHBvcnQgY29uc3QgTkVYVF9SRVdSSVRURU5fUVVFUllfSEVBREVSID0gJ3gtbmV4dGpzLXJld3JpdHRlbi1xdWVyeScgYXMgY29uc3RcbmV4cG9ydCBjb25zdCBORVhUX0lTX1BSRVJFTkRFUl9IRUFERVIgPSAneC1uZXh0anMtcHJlcmVuZGVyJyBhcyBjb25zdFxuIl0sIm5hbWVzIjpbIkFDVElPTl9IRUFERVIiLCJGTElHSFRfSEVBREVSUyIsIk5FWFRfRElEX1BPU1RQT05FX0hFQURFUiIsIk5FWFRfSE1SX1JFRlJFU0hfSEFTSF9DT09LSUUiLCJORVhUX0hNUl9SRUZSRVNIX0hFQURFUiIsIk5FWFRfSVNfUFJFUkVOREVSX0hFQURFUiIsIk5FWFRfUkVXUklUVEVOX1BBVEhfSEVBREVSIiwiTkVYVF9SRVdSSVRURU5fUVVFUllfSEVBREVSIiwiTkVYVF9ST1VURVJfUFJFRkVUQ0hfSEVBREVSIiwiTkVYVF9ST1VURVJfU0VHTUVOVF9QUkVGRVRDSF9IRUFERVIiLCJORVhUX1JPVVRFUl9TVEFMRV9USU1FX0hFQURFUiIsIk5FWFRfUk9VVEVSX1NUQVRFX1RSRUVfSEVBREVSIiwiTkVYVF9SU0NfVU5JT05fUVVFUlkiLCJORVhUX1VSTCIsIlJTQ19DT05URU5UX1RZUEVfSEVBREVSIiwiUlNDX0hFQURFUiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(shared)/./node_modules/next/dist/client/components/app-router-headers.js\n"));

/***/ }),

/***/ "(shared)/./node_modules/next/dist/server/app-render/async-local-storage.js":
/*!*************************************************************************!*\
  !*** ./node_modules/next/dist/server/app-render/async-local-storage.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    bindSnapshot: function() {\n        return bindSnapshot;\n    },\n    createAsyncLocalStorage: function() {\n        return createAsyncLocalStorage;\n    },\n    createSnapshot: function() {\n        return createSnapshot;\n    }\n});\nconst sharedAsyncLocalStorageNotAvailableError = Object.defineProperty(new Error('Invariant: AsyncLocalStorage accessed in runtime where it is not available'), \"__NEXT_ERROR_CODE\", {\n    value: \"E504\",\n    enumerable: false,\n    configurable: true\n});\nclass FakeAsyncLocalStorage {\n    disable() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    getStore() {\n        // This fake implementation of AsyncLocalStorage always returns `undefined`.\n        return undefined;\n    }\n    run() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    exit() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    enterWith() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    static bind(fn) {\n        return fn;\n    }\n}\nconst maybeGlobalAsyncLocalStorage = typeof globalThis !== 'undefined' && globalThis.AsyncLocalStorage;\nfunction createAsyncLocalStorage() {\n    if (maybeGlobalAsyncLocalStorage) {\n        return new maybeGlobalAsyncLocalStorage();\n    }\n    return new FakeAsyncLocalStorage();\n}\nfunction bindSnapshot(fn) {\n    if (maybeGlobalAsyncLocalStorage) {\n        return maybeGlobalAsyncLocalStorage.bind(fn);\n    }\n    return FakeAsyncLocalStorage.bind(fn);\n}\nfunction createSnapshot() {\n    if (maybeGlobalAsyncLocalStorage) {\n        return maybeGlobalAsyncLocalStorage.snapshot();\n    }\n    return function(fn, ...args) {\n        return fn(...args);\n    };\n}\n\n//# sourceMappingURL=async-local-storage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNoYXJlZCkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2FzeW5jLWxvY2FsLXN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixNQUFNLENBSUw7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxuZXh0XFxkaXN0XFxzZXJ2ZXJcXGFwcC1yZW5kZXJcXGFzeW5jLWxvY2FsLXN0b3JhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBiaW5kU25hcHNob3Q6IG51bGwsXG4gICAgY3JlYXRlQXN5bmNMb2NhbFN0b3JhZ2U6IG51bGwsXG4gICAgY3JlYXRlU25hcHNob3Q6IG51bGxcbn0pO1xuZnVuY3Rpb24gX2V4cG9ydCh0YXJnZXQsIGFsbCkge1xuICAgIGZvcih2YXIgbmFtZSBpbiBhbGwpT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgbmFtZSwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6IGFsbFtuYW1lXVxuICAgIH0pO1xufVxuX2V4cG9ydChleHBvcnRzLCB7XG4gICAgYmluZFNuYXBzaG90OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJpbmRTbmFwc2hvdDtcbiAgICB9LFxuICAgIGNyZWF0ZUFzeW5jTG9jYWxTdG9yYWdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFzeW5jTG9jYWxTdG9yYWdlO1xuICAgIH0sXG4gICAgY3JlYXRlU25hcHNob3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlU25hcHNob3Q7XG4gICAgfVxufSk7XG5jb25zdCBzaGFyZWRBc3luY0xvY2FsU3RvcmFnZU5vdEF2YWlsYWJsZUVycm9yID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcignSW52YXJpYW50OiBBc3luY0xvY2FsU3RvcmFnZSBhY2Nlc3NlZCBpbiBydW50aW1lIHdoZXJlIGl0IGlzIG5vdCBhdmFpbGFibGUnKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgdmFsdWU6IFwiRTUwNFwiLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxufSk7XG5jbGFzcyBGYWtlQXN5bmNMb2NhbFN0b3JhZ2Uge1xuICAgIGRpc2FibGUoKSB7XG4gICAgICAgIHRocm93IHNoYXJlZEFzeW5jTG9jYWxTdG9yYWdlTm90QXZhaWxhYmxlRXJyb3I7XG4gICAgfVxuICAgIGdldFN0b3JlKCkge1xuICAgICAgICAvLyBUaGlzIGZha2UgaW1wbGVtZW50YXRpb24gb2YgQXN5bmNMb2NhbFN0b3JhZ2UgYWx3YXlzIHJldHVybnMgYHVuZGVmaW5lZGAuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJ1bigpIHtcbiAgICAgICAgdGhyb3cgc2hhcmVkQXN5bmNMb2NhbFN0b3JhZ2VOb3RBdmFpbGFibGVFcnJvcjtcbiAgICB9XG4gICAgZXhpdCgpIHtcbiAgICAgICAgdGhyb3cgc2hhcmVkQXN5bmNMb2NhbFN0b3JhZ2VOb3RBdmFpbGFibGVFcnJvcjtcbiAgICB9XG4gICAgZW50ZXJXaXRoKCkge1xuICAgICAgICB0aHJvdyBzaGFyZWRBc3luY0xvY2FsU3RvcmFnZU5vdEF2YWlsYWJsZUVycm9yO1xuICAgIH1cbiAgICBzdGF0aWMgYmluZChmbikge1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfVxufVxuY29uc3QgbWF5YmVHbG9iYWxBc3luY0xvY2FsU3RvcmFnZSA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWxUaGlzLkFzeW5jTG9jYWxTdG9yYWdlO1xuZnVuY3Rpb24gY3JlYXRlQXN5bmNMb2NhbFN0b3JhZ2UoKSB7XG4gICAgaWYgKG1heWJlR2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtYXliZUdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlKCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRmFrZUFzeW5jTG9jYWxTdG9yYWdlKCk7XG59XG5mdW5jdGlvbiBiaW5kU25hcHNob3QoZm4pIHtcbiAgICBpZiAobWF5YmVHbG9iYWxBc3luY0xvY2FsU3RvcmFnZSkge1xuICAgICAgICByZXR1cm4gbWF5YmVHbG9iYWxBc3luY0xvY2FsU3RvcmFnZS5iaW5kKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIEZha2VBc3luY0xvY2FsU3RvcmFnZS5iaW5kKGZuKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNuYXBzaG90KCkge1xuICAgIGlmIChtYXliZUdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIHJldHVybiBtYXliZUdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlLnNuYXBzaG90KCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihmbiwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gZm4oLi4uYXJncyk7XG4gICAgfTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXN5bmMtbG9jYWwtc3RvcmFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(shared)/./node_modules/next/dist/server/app-render/async-local-storage.js\n"));

/***/ }),

/***/ "(shared)/./node_modules/next/dist/server/app-render/work-async-storage-instance.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/next/dist/server/app-render/work-async-storage-instance.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"workAsyncStorageInstance\", ({\n    enumerable: true,\n    get: function() {\n        return workAsyncStorageInstance;\n    }\n}));\nconst _asynclocalstorage = __webpack_require__(/*! ./async-local-storage */ \"(shared)/./node_modules/next/dist/server/app-render/async-local-storage.js\");\nconst workAsyncStorageInstance = (0, _asynclocalstorage.createAsyncLocalStorage)();\n\n//# sourceMappingURL=work-async-storage-instance.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNoYXJlZCkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL3dvcmstYXN5bmMtc3RvcmFnZS1pbnN0YW5jZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLDREQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGLDJCQUEyQixtQkFBTyxDQUFDLHlHQUF1QjtBQUMxRDs7QUFFQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcGdhdVxcT25lRHJpdmVcXERlc2t0b3BcXGVkdWNhdGlvbi13ZWJzaXRlXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXHNlcnZlclxcYXBwLXJlbmRlclxcd29yay1hc3luYy1zdG9yYWdlLWluc3RhbmNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwid29ya0FzeW5jU3RvcmFnZUluc3RhbmNlXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB3b3JrQXN5bmNTdG9yYWdlSW5zdGFuY2U7XG4gICAgfVxufSk7XG5jb25zdCBfYXN5bmNsb2NhbHN0b3JhZ2UgPSByZXF1aXJlKFwiLi9hc3luYy1sb2NhbC1zdG9yYWdlXCIpO1xuY29uc3Qgd29ya0FzeW5jU3RvcmFnZUluc3RhbmNlID0gKDAsIF9hc3luY2xvY2Fsc3RvcmFnZS5jcmVhdGVBc3luY0xvY2FsU3RvcmFnZSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d29yay1hc3luYy1zdG9yYWdlLWluc3RhbmNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(shared)/./node_modules/next/dist/server/app-render/work-async-storage-instance.js\n"));

/***/ }),

/***/ "(shared)/./node_modules/next/dist/server/app-render/work-async-storage.external.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/next/dist/server/app-render/work-async-storage.external.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"workAsyncStorage\", ({\n    enumerable: true,\n    get: function() {\n        return _workasyncstorageinstance.workAsyncStorageInstance;\n    }\n}));\nconst _workasyncstorageinstance = __webpack_require__(/*! ./work-async-storage-instance */ \"(shared)/./node_modules/next/dist/server/app-render/work-async-storage-instance.js\");\n\n//# sourceMappingURL=work-async-storage.external.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNoYXJlZCkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL3dvcmstYXN5bmMtc3RvcmFnZS5leHRlcm5hbC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLG9EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGLGtDQUFrQyxtQkFBTyxDQUFDLHlIQUErQjs7QUFFekUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBnYXVcXE9uZURyaXZlXFxEZXNrdG9wXFxlZHVjYXRpb24td2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxuZXh0XFxkaXN0XFxzZXJ2ZXJcXGFwcC1yZW5kZXJcXHdvcmstYXN5bmMtc3RvcmFnZS5leHRlcm5hbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIndvcmtBc3luY1N0b3JhZ2VcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF93b3JrYXN5bmNzdG9yYWdlaW5zdGFuY2Uud29ya0FzeW5jU3RvcmFnZUluc3RhbmNlO1xuICAgIH1cbn0pO1xuY29uc3QgX3dvcmthc3luY3N0b3JhZ2VpbnN0YW5jZSA9IHJlcXVpcmUoXCIuL3dvcmstYXN5bmMtc3RvcmFnZS1pbnN0YW5jZVwiKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d29yay1hc3luYy1zdG9yYWdlLmV4dGVybmFsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(shared)/./node_modules/next/dist/server/app-render/work-async-storage.external.js\n"));

/***/ }),

/***/ "(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage-instance.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/next/dist/server/app-render/work-unit-async-storage-instance.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"workUnitAsyncStorageInstance\", ({\n    enumerable: true,\n    get: function() {\n        return workUnitAsyncStorageInstance;\n    }\n}));\nconst _asynclocalstorage = __webpack_require__(/*! ./async-local-storage */ \"(shared)/./node_modules/next/dist/server/app-render/async-local-storage.js\");\nconst workUnitAsyncStorageInstance = (0, _asynclocalstorage.createAsyncLocalStorage)();\n\n//# sourceMappingURL=work-unit-async-storage-instance.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNoYXJlZCkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL3dvcmstdW5pdC1hc3luYy1zdG9yYWdlLWluc3RhbmNlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsZ0VBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsMkJBQTJCLG1CQUFPLENBQUMseUdBQXVCO0FBQzFEOztBQUVBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcc2VydmVyXFxhcHAtcmVuZGVyXFx3b3JrLXVuaXQtYXN5bmMtc3RvcmFnZS1pbnN0YW5jZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIndvcmtVbml0QXN5bmNTdG9yYWdlSW5zdGFuY2VcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHdvcmtVbml0QXN5bmNTdG9yYWdlSW5zdGFuY2U7XG4gICAgfVxufSk7XG5jb25zdCBfYXN5bmNsb2NhbHN0b3JhZ2UgPSByZXF1aXJlKFwiLi9hc3luYy1sb2NhbC1zdG9yYWdlXCIpO1xuY29uc3Qgd29ya1VuaXRBc3luY1N0b3JhZ2VJbnN0YW5jZSA9ICgwLCBfYXN5bmNsb2NhbHN0b3JhZ2UuY3JlYXRlQXN5bmNMb2NhbFN0b3JhZ2UpKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmstdW5pdC1hc3luYy1zdG9yYWdlLWluc3RhbmNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage-instance.js\n"));

/***/ }),

/***/ "(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage.external.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/next/dist/server/app-render/work-unit-async-storage.external.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    getDraftModeProviderForCacheScope: function() {\n        return getDraftModeProviderForCacheScope;\n    },\n    getExpectedRequestStore: function() {\n        return getExpectedRequestStore;\n    },\n    getHmrRefreshHash: function() {\n        return getHmrRefreshHash;\n    },\n    getPrerenderResumeDataCache: function() {\n        return getPrerenderResumeDataCache;\n    },\n    getRenderResumeDataCache: function() {\n        return getRenderResumeDataCache;\n    },\n    throwForMissingRequestStore: function() {\n        return throwForMissingRequestStore;\n    },\n    workUnitAsyncStorage: function() {\n        return _workunitasyncstorageinstance.workUnitAsyncStorageInstance;\n    }\n});\nconst _workunitasyncstorageinstance = __webpack_require__(/*! ./work-unit-async-storage-instance */ \"(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage-instance.js\");\nconst _approuterheaders = __webpack_require__(/*! ../../client/components/app-router-headers */ \"(shared)/./node_modules/next/dist/client/components/app-router-headers.js\");\nfunction getExpectedRequestStore(callingExpression) {\n    const workUnitStore = _workunitasyncstorageinstance.workUnitAsyncStorageInstance.getStore();\n    if (!workUnitStore) {\n        throwForMissingRequestStore(callingExpression);\n    }\n    switch(workUnitStore.type){\n        case 'request':\n            return workUnitStore;\n        case 'prerender':\n        case 'prerender-ppr':\n        case 'prerender-legacy':\n            // This should not happen because we should have checked it already.\n            throw Object.defineProperty(new Error(`\\`${callingExpression}\\` cannot be called inside a prerender. This is a bug in Next.js.`), \"__NEXT_ERROR_CODE\", {\n                value: \"E401\",\n                enumerable: false,\n                configurable: true\n            });\n        case 'cache':\n            throw Object.defineProperty(new Error(`\\`${callingExpression}\\` cannot be called inside \"use cache\". Call it outside and pass an argument instead. Read more: https://nextjs.org/docs/messages/next-request-in-use-cache`), \"__NEXT_ERROR_CODE\", {\n                value: \"E37\",\n                enumerable: false,\n                configurable: true\n            });\n        case 'unstable-cache':\n            throw Object.defineProperty(new Error(`\\`${callingExpression}\\` cannot be called inside unstable_cache. Call it outside and pass an argument instead. Read more: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`), \"__NEXT_ERROR_CODE\", {\n                value: \"E69\",\n                enumerable: false,\n                configurable: true\n            });\n        default:\n            const _exhaustiveCheck = workUnitStore;\n            return _exhaustiveCheck;\n    }\n}\nfunction throwForMissingRequestStore(callingExpression) {\n    throw Object.defineProperty(new Error(`\\`${callingExpression}\\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`), \"__NEXT_ERROR_CODE\", {\n        value: \"E251\",\n        enumerable: false,\n        configurable: true\n    });\n}\nfunction getPrerenderResumeDataCache(workUnitStore) {\n    if (workUnitStore.type === 'prerender' || workUnitStore.type === 'prerender-ppr') {\n        return workUnitStore.prerenderResumeDataCache;\n    }\n    return null;\n}\nfunction getRenderResumeDataCache(workUnitStore) {\n    if (workUnitStore.type !== 'prerender-legacy' && workUnitStore.type !== 'cache' && workUnitStore.type !== 'unstable-cache') {\n        if (workUnitStore.type === 'request') {\n            return workUnitStore.renderResumeDataCache;\n        }\n        // We return the mutable resume data cache here as an immutable version of\n        // the cache as it can also be used for reading.\n        return workUnitStore.prerenderResumeDataCache;\n    }\n    return null;\n}\nfunction getHmrRefreshHash(workStore, workUnitStore) {\n    var _workUnitStore_cookies_get;\n    if (!workStore.dev) {\n        return undefined;\n    }\n    return workUnitStore.type === 'cache' || workUnitStore.type === 'prerender' ? workUnitStore.hmrRefreshHash : workUnitStore.type === 'request' ? (_workUnitStore_cookies_get = workUnitStore.cookies.get(_approuterheaders.NEXT_HMR_REFRESH_HASH_COOKIE)) == null ? void 0 : _workUnitStore_cookies_get.value : undefined;\n}\nfunction getDraftModeProviderForCacheScope(workStore, workUnitStore) {\n    if (workStore.isDraftMode) {\n        switch(workUnitStore.type){\n            case 'cache':\n            case 'unstable-cache':\n            case 'request':\n                return workUnitStore.draftMode;\n            default:\n                return undefined;\n        }\n    }\n    return undefined;\n}\n\n//# sourceMappingURL=work-unit-async-storage.external.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNoYXJlZCkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL3dvcmstdW5pdC1hc3luYy1zdG9yYWdlLmV4dGVybmFsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsTUFBTSxDQVFMO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxzQ0FBc0MsbUJBQU8sQ0FBQyxtSUFBb0M7QUFDbEYsMEJBQTBCLG1CQUFPLENBQUMsNkhBQTRDO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxrQkFBa0I7QUFDekU7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsdURBQXVELGtCQUFrQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1REFBdUQsa0JBQWtCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msa0JBQWtCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwZ2F1XFxPbmVEcml2ZVxcRGVza3RvcFxcZWR1Y2F0aW9uLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcc2VydmVyXFxhcHAtcmVuZGVyXFx3b3JrLXVuaXQtYXN5bmMtc3RvcmFnZS5leHRlcm5hbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICAgIGdldERyYWZ0TW9kZVByb3ZpZGVyRm9yQ2FjaGVTY29wZTogbnVsbCxcbiAgICBnZXRFeHBlY3RlZFJlcXVlc3RTdG9yZTogbnVsbCxcbiAgICBnZXRIbXJSZWZyZXNoSGFzaDogbnVsbCxcbiAgICBnZXRQcmVyZW5kZXJSZXN1bWVEYXRhQ2FjaGU6IG51bGwsXG4gICAgZ2V0UmVuZGVyUmVzdW1lRGF0YUNhY2hlOiBudWxsLFxuICAgIHRocm93Rm9yTWlzc2luZ1JlcXVlc3RTdG9yZTogbnVsbCxcbiAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZTogbnVsbFxufSk7XG5mdW5jdGlvbiBfZXhwb3J0KHRhcmdldCwgYWxsKSB7XG4gICAgZm9yKHZhciBuYW1lIGluIGFsbClPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogYWxsW25hbWVdXG4gICAgfSk7XG59XG5fZXhwb3J0KGV4cG9ydHMsIHtcbiAgICBnZXREcmFmdE1vZGVQcm92aWRlckZvckNhY2hlU2NvcGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZ2V0RHJhZnRNb2RlUHJvdmlkZXJGb3JDYWNoZVNjb3BlO1xuICAgIH0sXG4gICAgZ2V0RXhwZWN0ZWRSZXF1ZXN0U3RvcmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZ2V0RXhwZWN0ZWRSZXF1ZXN0U3RvcmU7XG4gICAgfSxcbiAgICBnZXRIbXJSZWZyZXNoSGFzaDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBnZXRIbXJSZWZyZXNoSGFzaDtcbiAgICB9LFxuICAgIGdldFByZXJlbmRlclJlc3VtZURhdGFDYWNoZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBnZXRQcmVyZW5kZXJSZXN1bWVEYXRhQ2FjaGU7XG4gICAgfSxcbiAgICBnZXRSZW5kZXJSZXN1bWVEYXRhQ2FjaGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZ2V0UmVuZGVyUmVzdW1lRGF0YUNhY2hlO1xuICAgIH0sXG4gICAgdGhyb3dGb3JNaXNzaW5nUmVxdWVzdFN0b3JlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRocm93Rm9yTWlzc2luZ1JlcXVlc3RTdG9yZTtcbiAgICB9LFxuICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF93b3JrdW5pdGFzeW5jc3RvcmFnZWluc3RhbmNlLndvcmtVbml0QXN5bmNTdG9yYWdlSW5zdGFuY2U7XG4gICAgfVxufSk7XG5jb25zdCBfd29ya3VuaXRhc3luY3N0b3JhZ2VpbnN0YW5jZSA9IHJlcXVpcmUoXCIuL3dvcmstdW5pdC1hc3luYy1zdG9yYWdlLWluc3RhbmNlXCIpO1xuY29uc3QgX2FwcHJvdXRlcmhlYWRlcnMgPSByZXF1aXJlKFwiLi4vLi4vY2xpZW50L2NvbXBvbmVudHMvYXBwLXJvdXRlci1oZWFkZXJzXCIpO1xuZnVuY3Rpb24gZ2V0RXhwZWN0ZWRSZXF1ZXN0U3RvcmUoY2FsbGluZ0V4cHJlc3Npb24pIHtcbiAgICBjb25zdCB3b3JrVW5pdFN0b3JlID0gX3dvcmt1bml0YXN5bmNzdG9yYWdlaW5zdGFuY2Uud29ya1VuaXRBc3luY1N0b3JhZ2VJbnN0YW5jZS5nZXRTdG9yZSgpO1xuICAgIGlmICghd29ya1VuaXRTdG9yZSkge1xuICAgICAgICB0aHJvd0Zvck1pc3NpbmdSZXF1ZXN0U3RvcmUoY2FsbGluZ0V4cHJlc3Npb24pO1xuICAgIH1cbiAgICBzd2l0Y2god29ya1VuaXRTdG9yZS50eXBlKXtcbiAgICAgICAgY2FzZSAncmVxdWVzdCc6XG4gICAgICAgICAgICByZXR1cm4gd29ya1VuaXRTdG9yZTtcbiAgICAgICAgY2FzZSAncHJlcmVuZGVyJzpcbiAgICAgICAgY2FzZSAncHJlcmVuZGVyLXBwcic6XG4gICAgICAgIGNhc2UgJ3ByZXJlbmRlci1sZWdhY3knOlxuICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IGhhcHBlbiBiZWNhdXNlIHdlIHNob3VsZCBoYXZlIGNoZWNrZWQgaXQgYWxyZWFkeS5cbiAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYFxcYCR7Y2FsbGluZ0V4cHJlc3Npb259XFxgIGNhbm5vdCBiZSBjYWxsZWQgaW5zaWRlIGEgcHJlcmVuZGVyLiBUaGlzIGlzIGEgYnVnIGluIE5leHQuanMuYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU0MDFcIixcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlICdjYWNoZSc6XG4gICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBcXGAke2NhbGxpbmdFeHByZXNzaW9ufVxcYCBjYW5ub3QgYmUgY2FsbGVkIGluc2lkZSBcInVzZSBjYWNoZVwiLiBDYWxsIGl0IG91dHNpZGUgYW5kIHBhc3MgYW4gYXJndW1lbnQgaW5zdGVhZC4gUmVhZCBtb3JlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9uZXh0LXJlcXVlc3QtaW4tdXNlLWNhY2hlYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUzN1wiLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgJ3Vuc3RhYmxlLWNhY2hlJzpcbiAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYFxcYCR7Y2FsbGluZ0V4cHJlc3Npb259XFxgIGNhbm5vdCBiZSBjYWxsZWQgaW5zaWRlIHVuc3RhYmxlX2NhY2hlLiBDYWxsIGl0IG91dHNpZGUgYW5kIHBhc3MgYW4gYXJndW1lbnQgaW5zdGVhZC4gUmVhZCBtb3JlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9hcHAvYXBpLXJlZmVyZW5jZS9mdW5jdGlvbnMvdW5zdGFibGVfY2FjaGVgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IFwiRTY5XCIsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSB3b3JrVW5pdFN0b3JlO1xuICAgICAgICAgICAgcmV0dXJuIF9leGhhdXN0aXZlQ2hlY2s7XG4gICAgfVxufVxuZnVuY3Rpb24gdGhyb3dGb3JNaXNzaW5nUmVxdWVzdFN0b3JlKGNhbGxpbmdFeHByZXNzaW9uKSB7XG4gICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgXFxgJHtjYWxsaW5nRXhwcmVzc2lvbn1cXGAgd2FzIGNhbGxlZCBvdXRzaWRlIGEgcmVxdWVzdCBzY29wZS4gUmVhZCBtb3JlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9uZXh0LWR5bmFtaWMtYXBpLXdyb25nLWNvbnRleHRgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgIHZhbHVlOiBcIkUyNTFcIixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xufVxuZnVuY3Rpb24gZ2V0UHJlcmVuZGVyUmVzdW1lRGF0YUNhY2hlKHdvcmtVbml0U3RvcmUpIHtcbiAgICBpZiAod29ya1VuaXRTdG9yZS50eXBlID09PSAncHJlcmVuZGVyJyB8fCB3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdwcmVyZW5kZXItcHByJykge1xuICAgICAgICByZXR1cm4gd29ya1VuaXRTdG9yZS5wcmVyZW5kZXJSZXN1bWVEYXRhQ2FjaGU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZ2V0UmVuZGVyUmVzdW1lRGF0YUNhY2hlKHdvcmtVbml0U3RvcmUpIHtcbiAgICBpZiAod29ya1VuaXRTdG9yZS50eXBlICE9PSAncHJlcmVuZGVyLWxlZ2FjeScgJiYgd29ya1VuaXRTdG9yZS50eXBlICE9PSAnY2FjaGUnICYmIHdvcmtVbml0U3RvcmUudHlwZSAhPT0gJ3Vuc3RhYmxlLWNhY2hlJykge1xuICAgICAgICBpZiAod29ya1VuaXRTdG9yZS50eXBlID09PSAncmVxdWVzdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB3b3JrVW5pdFN0b3JlLnJlbmRlclJlc3VtZURhdGFDYWNoZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSByZXR1cm4gdGhlIG11dGFibGUgcmVzdW1lIGRhdGEgY2FjaGUgaGVyZSBhcyBhbiBpbW11dGFibGUgdmVyc2lvbiBvZlxuICAgICAgICAvLyB0aGUgY2FjaGUgYXMgaXQgY2FuIGFsc28gYmUgdXNlZCBmb3IgcmVhZGluZy5cbiAgICAgICAgcmV0dXJuIHdvcmtVbml0U3RvcmUucHJlcmVuZGVyUmVzdW1lRGF0YUNhY2hlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEhtclJlZnJlc2hIYXNoKHdvcmtTdG9yZSwgd29ya1VuaXRTdG9yZSkge1xuICAgIHZhciBfd29ya1VuaXRTdG9yZV9jb29raWVzX2dldDtcbiAgICBpZiAoIXdvcmtTdG9yZS5kZXYpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ2NhY2hlJyB8fCB3b3JrVW5pdFN0b3JlLnR5cGUgPT09ICdwcmVyZW5kZXInID8gd29ya1VuaXRTdG9yZS5obXJSZWZyZXNoSGFzaCA6IHdvcmtVbml0U3RvcmUudHlwZSA9PT0gJ3JlcXVlc3QnID8gKF93b3JrVW5pdFN0b3JlX2Nvb2tpZXNfZ2V0ID0gd29ya1VuaXRTdG9yZS5jb29raWVzLmdldChfYXBwcm91dGVyaGVhZGVycy5ORVhUX0hNUl9SRUZSRVNIX0hBU0hfQ09PS0lFKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF93b3JrVW5pdFN0b3JlX2Nvb2tpZXNfZ2V0LnZhbHVlIDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gZ2V0RHJhZnRNb2RlUHJvdmlkZXJGb3JDYWNoZVNjb3BlKHdvcmtTdG9yZSwgd29ya1VuaXRTdG9yZSkge1xuICAgIGlmICh3b3JrU3RvcmUuaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgc3dpdGNoKHdvcmtVbml0U3RvcmUudHlwZSl7XG4gICAgICAgICAgICBjYXNlICdjYWNoZSc6XG4gICAgICAgICAgICBjYXNlICd1bnN0YWJsZS1jYWNoZSc6XG4gICAgICAgICAgICBjYXNlICdyZXF1ZXN0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gd29ya1VuaXRTdG9yZS5kcmFmdE1vZGU7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d29yay11bml0LWFzeW5jLXN0b3JhZ2UuZXh0ZXJuYWwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(shared)/./node_modules/next/dist/server/app-render/work-unit-async-storage.external.js\n"));

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["main-app"], () => (__webpack_exec__("(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5Capgau%5C%5COneDrive%5C%5CDesktop%5C%5Ceducation-website%5C%5Csrc%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);